import"../chunks/DsnmJJEf.js";import"../chunks/CzS45DwE.js";import{v as oe,w as E,k as u,x as mt,j as m,z as ht,F as g,R as X,y as d,A as a,B as t,I as e,t as L,a2 as qa,L as Vt,n as Re,aq as rs,U as ns,T as Mt,b7 as ma}from"../chunks/CeQBZBfG.js";import{d as bt,o as Ia,s as f,w as ca,g as Ee,e as Ct}from"../chunks/DGsQstmn.js";import{l as He,s as Ve,i as $,p as Le}from"../chunks/CyF0tIdS.js";import{h as Ht}from"../chunks/lCLb9LXD.js";import{a as Fe,$ as qt,e as oa,s as ze,i as is,r as ut,f as ka,g as ha}from"../chunks/Bf8fp1vJ.js";import{s as Wt,a as me}from"../chunks/T6JPUUzi.js";import{I as qe,s as We}from"../chunks/PNmOa-dp.js";import{X as Wa,M as Ya,q as jt,a as $a,T as Ga,P as ba,b as ls}from"../chunks/oOtnmlXQ.js";import{t as ft,a as Ja,f as Gt}from"../chunks/7CS22xGD.js";import{D as tt,G as ra,S as ds,l as Ka,a as Sa,b as cs,c as vs,C as us,g as xa}from"../chunks/scgq71Ur.js";import{b as pt,h as gt,d as xe,e as _e,f as ea,g as ta,k as Ca,l as na,u as Ba,p as ps}from"../chunks/CKXojuJE.js";import{b as gs,g as aa}from"../chunks/B_QDZO7b.js";import{C as Aa,U as Ua,r as sa,W as fs}from"../chunks/D_ox7Ue_.js";import{C as ms,G as Ea,a as hs,P as Oa}from"../chunks/CoHjlRZF.js";import{U as Ta,L as bs,A as xs}from"../chunks/bjtA0hWe.js";import{h as _s}from"../chunks/BYmFNSF7.js";function ws(c,o){const l=He(o,["children","$$slots","$$events","$$legacy"]);const i=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];qe(c,Ve({name:"circle-alert"},()=>l,{get iconNode(){return i},children:(r,n)=>{var s=oe(),v=E(s);We(v,o,"default",{}),u(r,s)},$$slots:{default:!0}}))}function ys(c,o){const l=He(o,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"m2 2 20 20"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07"}]];qe(c,Ve({name:"cloud-off"},()=>l,{get iconNode(){return i},children:(r,n)=>{var s=oe(),v=E(s);We(v,o,"default",{}),u(r,s)},$$slots:{default:!0}}))}function ks(c,o){const l=He(o,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"}]];qe(c,Ve({name:"cloud"},()=>l,{get iconNode(){return i},children:(r,n)=>{var s=oe(),v=E(s);We(v,o,"default",{}),u(r,s)},$$slots:{default:!0}}))}function Fa(c,o){const l=He(o,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];qe(c,Ve({name:"download"},()=>l,{get iconNode(){return i},children:(r,n)=>{var s=oe(),v=E(s);We(v,o,"default",{}),u(r,s)},$$slots:{default:!0}}))}function $s(c,o){const l=He(o,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];qe(c,Ve({name:"loader-circle"},()=>l,{get iconNode(){return i},children:(r,n)=>{var s=oe(),v=E(s);We(v,o,"default",{}),u(r,s)},$$slots:{default:!0}}))}function Ss(c,o){const l=He(o,["children","$$slots","$$events","$$legacy"]);const i=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21"}]];qe(c,Ve({name:"monitor"},()=>l,{get iconNode(){return i},children:(r,n)=>{var s=oe(),v=E(s);We(v,o,"default",{}),u(r,s)},$$slots:{default:!0}}))}function Cs(c,o){const l=He(o,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}]];qe(c,Ve({name:"palette"},()=>l,{get iconNode(){return i},children:(r,n)=>{var s=oe(),v=E(s);We(v,o,"default",{}),u(r,s)},$$slots:{default:!0}}))}function Es(c,o){const l=He(o,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];qe(c,Ve({name:"refresh-cw"},()=>l,{get iconNode(){return i},children:(r,n)=>{var s=oe(),v=E(s);We(v,o,"default",{}),u(r,s)},$$slots:{default:!0}}))}function _a(c,o){const l=He(o,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3"}]];qe(c,Ve({name:"scroll"},()=>l,{get iconNode(){return i},children:(r,n)=>{var s=oe(),v=E(s);We(v,o,"default",{}),u(r,s)},$$slots:{default:!0}}))}function zs(c,o){const l=He(o,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}],["path",{d:"M12 8v4"}],["path",{d:"M12 16h.01"}]];qe(c,Ve({name:"shield-alert"},()=>l,{get iconNode(){return i},children:(r,n)=>{var s=oe(),v=E(s);We(v,o,"default",{}),u(r,s)},$$slots:{default:!0}}))}var Is=m('<button class="fixed bottom-28 md:bottom-6 right-6 z-[60] bg-indigo-600 hover:bg-indigo-500 text-white h-14 px-4 rounded-full shadow-2xl shadow-indigo-900/50 flex items-center justify-center font-bold animate-pulse hover:animate-none transition-all active:scale-95 group"><!> <span class="text-sm uppercase tracking-wider max-w-0 overflow-hidden ml-0 group-hover:max-w-xs group-hover:ml-2 transition-all duration-300 md:max-w-xs md:ml-2 md:inline"> </span></button>'),Ts=m("<div><!></div>"),Ns=m("<div><!></div>"),Ps=m('<li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">1</span> <!></li> <li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">2</span> <div><!></div></li>',1),Ds=m('<li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">1</span> <div><!></div></li> <li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">2</span> <div><!></div></li>',1),Ms=m('<div class="fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-end sm:items-center justify-center p-4 animate-in fade-in"><div class="bg-slate-900 border border-slate-700 rounded-2xl p-6 max-w-sm w-full relative shadow-2xl mb-4 sm:mb-0 animate-in slide-in-from-bottom-10 sm:slide-in-from-bottom-0 sm:zoom-in-95"><button class="absolute top-4 right-4 text-slate-400 hover:text-white p-1"><!></button> <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2"><!> </h3> <ol class="space-y-4 text-slate-300 text-sm"><!></ol> <div class="mt-6 text-center"><button class="text-indigo-400 text-sm font-bold hover:text-indigo-300"> </button></div></div></div>'),js=m("<!> <!>",1);function Gs(c,o){mt(o,!0);const l=()=>me(qt,"$t",i),[i,r]=Wt();let n=X(null),s=X(!1),v=X(!1),_=X(!1),h=X(!1);Ia(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone){g(s,!1);return}const C=window.navigator.userAgent;g(_,/iPad|iPhone|iPod/.test(C)&&!window.MSStream,!0),g(h,/CriOS/i.test(C),!0),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(C)&&g(s,!0),window.addEventListener("beforeinstallprompt",N=>{N.preventDefault(),g(n,N,!0),g(s,!0)}),window.addEventListener("appinstalled",()=>{g(n,null),g(s,!1),g(v,!1)})});async function S(){if(d(n)){d(n).prompt();const{outcome:x}=await d(n).userChoice;x==="accepted"&&(g(n,null),g(s,!1))}else g(v,!0)}const U="inline w-3.5 h-3.5",M=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${U}"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" x2="12" y1="2" y2="15"/></svg>`,W=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${U}"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M8 12h8"/><path d="M12 8v8"/></svg>`,b=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${U}"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>`;function z(x,C){const j=l()(x),N=`<span class="inline-flex items-center justify-center bg-slate-800 p-1 rounded mx-1 align-middle">${C}</span>`;return j.replace("{icon}",N)}var R=js(),w=E(R);{var B=x=>{var C=Is();C.__click=S;var j=t(C);Fa(j,{size:24});var N=a(j,2),re=t(N,!0);e(N),e(C),L((Y,G)=>{Fe(C,"aria-label",Y),f(re,G)},[()=>l()("home.install.button"),()=>l()("home.install.button")]),u(x,C)};$(w,x=>{d(s)&&x(B)})}var I=a(w,2);{var y=x=>{var C=Ms(),j=t(C),N=t(j);N.__click=()=>g(v,!1);var re=t(N);Wa(re,{size:20}),e(N);var Y=a(N,2),G=t(Y);Fa(G,{size:24,class:"text-indigo-500"});var T=a(G);e(Y);var H=a(Y,2),te=t(H);{var Z=O=>{var q=Ps(),F=E(q),le=a(t(F),2);{var ce=ve=>{var ie=Ts(),Q=t(ie);Ht(Q,()=>z("home.install.ios_chrome_step1",M)),e(ie),u(ve,ie)},he=ve=>{var ie=Ns(),Q=t(ie);Ht(Q,()=>z("home.install.ios_step1",M)),e(ie),u(ve,ie)};$(le,ve=>{d(h)?ve(ce):ve(he,!1)})}e(F);var de=a(F,2),ae=a(t(de),2),we=t(ae);Ht(we,()=>z("home.install.ios_step2",W)),e(ae),e(de),u(O,q)},J=O=>{var q=Ds(),F=E(q),le=a(t(F),2),ce=t(le);Ht(ce,()=>z("home.install.android_step1",b)),e(le),e(F);var he=a(F,2),de=a(t(he),2),ae=t(de);Ht(ae,()=>l()("home.install.android_step2")),e(de),e(he),u(O,q)};$(te,O=>{d(_)?O(Z):O(J,!1)})}e(H);var V=a(H,2),ne=t(V);ne.__click=()=>g(v,!1);var P=t(ne,!0);e(ne),e(V),e(j),e(C),L((O,q)=>{f(T,` ${O??""}`),f(P,q)},[()=>l()("home.install.title"),()=>l()("home.install.close")]),u(x,C)};$(I,x=>{d(v)&&x(y)})}u(c,R),ht(),r()}bt(["click"]);var Bs=m('<span class="text-[9px] bg-slate-800 text-slate-400 px-1.5 py-0.5 rounded uppercase tracking-wider">Em Breve</span>'),As=m('<div class="w-2 h-2 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]"></div>'),Us=m('<button><div class="flex-1"><div class="font-bold text-sm flex items-center gap-2"> <!></div> <div class="text-[10px] opacity-60 mt-0.5"> </div></div> <!></button>'),Os=m('<div class="space-y-4"><div><label class="text-xs text-slate-500 uppercase font-black block mb-2 tracking-widest flex items-center gap-1"><!> Sistema de Jogo</label> <div class="grid grid-cols-1 gap-2"></div></div> <div><label for="char-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nome do Personagem</label> <input id="char-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Alaric, o Errante"/></div> <div><label for="char-player" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> Nome do Jogador</label> <input id="char-player" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-ancestry" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Ancestralidade</label> <input id="char-ancestry" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Humano"/></div> <div><label for="char-level" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">NÃ­vel</label> <input id="char-level" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div> <div><label for="char-path" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Trilha Inicial (Novice)</label> <input id="char-path" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Guerreiro, Mago"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-defense" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Defesa</label> <input id="char-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div> <div><label for="char-health" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Vida MÃ¡xima</label> <input id="char-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div></div> <div class="flex gap-3 mt-8"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-3 rounded-xl text-white font-bold active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95">Criar Personagem</button></div>',1);function Fs(c,o){mt(o,!0);let l=Le(o,"isOpen",3,!1),i=Le(o,"initialData",3,"{}"),r=qa({name:"",playerName:"",ancestry:"",novicePath:"",level:1,defense:10,health:24,system:tt});Vt(()=>{if(l()&&i())try{const s=JSON.parse(i());r.name=s.name||"",r.playerName=s.playerName||"",r.ancestry=s.ancestry||"",r.novicePath=s.paths&&s.paths.novice?s.paths.novice:"",r.level=s.level||1,r.defense=s.defense||10,r.health=s.health||s.normalHealth||24,r.system=s.system||tt}catch{r.name="",r.playerName="",r.ancestry="",r.novicePath="",r.level=1,r.defense=10,r.health=24,r.system=tt}});function n(){o.onSave({...r})}Ya(c,{get isOpen(){return l()},get onClose(){return o.onClose},title:"Novo Personagem",maxWidth:"max-w-md",children:(s,v)=>{var _=Os(),h=E(_),S=t(h),U=t(S),M=t(U);ra(M,{size:12}),Re(),e(U);var W=a(U,2);oa(W,21,()=>ds,is,(P,O)=>{var q=Us();q.__click=()=>!d(O).disabled&&(r.system=d(O).id);var F=t(q),le=t(F),ce=t(le),he=a(ce);{var de=Q=>{var ye=Bs();u(Q,ye)};$(he,Q=>{d(O).comingSoon&&Q(de)})}e(le);var ae=a(le,2),we=t(ae,!0);e(ae),e(F);var ve=a(F,2);{var ie=Q=>{var ye=As();u(Q,ye)};$(ve,Q=>{r.system===d(O).id&&Q(ie)})}e(q),L(()=>{ze(q,1,`relative flex items-center p-3 rounded-lg border text-left transition-all ${r.system===d(O).id?"bg-indigo-600/20 border-indigo-500 text-white":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"} ${d(O).disabled?"opacity-60 cursor-not-allowed":""}`),q.disabled=d(O).disabled,f(ce,`${d(O).name??""} `),f(we,d(O).description)}),u(P,q)}),e(W),e(S);var b=a(S,2),z=a(t(b),2);ut(z),e(b);var R=a(b,2),w=t(R),B=t(w);Ta(B,{size:12}),Re(),e(w);var I=a(w,2);ut(I),e(R);var y=a(R,2),x=t(y),C=a(t(x),2);ut(C),e(x);var j=a(x,2),N=a(t(j),2);ut(N),e(j),e(y);var re=a(y,2),Y=a(t(re),2);ut(Y),e(re);var G=a(re,2),T=t(G),H=a(t(T),2);ut(H),e(T);var te=a(T,2),Z=a(t(te),2);ut(Z),e(te),e(G),e(h);var J=a(h,2),V=t(J);V.__click=function(...P){o.onClose?.apply(this,P)};var ne=a(V,2);ne.__click=n,e(J),pt(z,()=>r.name,P=>r.name=P),pt(I,()=>r.playerName,P=>r.playerName=P),pt(C,()=>r.ancestry,P=>r.ancestry=P),pt(N,()=>r.level,P=>r.level=P),pt(Y,()=>r.novicePath,P=>r.novicePath=P),pt(H,()=>r.defense,P=>r.defense=P),pt(Z,()=>r.health,P=>r.health=P),u(s,_)},$$slots:{default:!0}}),ht()}bt(["click"]);var Ls=m('<div class="space-y-5"><div><label for="settings-player-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> Nome do Jogador</label> <input id="settings-player-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/> <p class="text-[10px] text-slate-500 mt-1">O nome do jogador associado a este personagem.</p></div></div> <div class="flex flex-col-reverse sm:flex-row gap-3 mt-6"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-4 sm:py-3 rounded-xl text-white font-bold active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-4 sm:py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95">Salvar</button></div>',1);function Rs(c,o){mt(o,!0);let l=Le(o,"isOpen",3,!1),i=Le(o,"characterData",3,null),r=X("");Vt(()=>{l()&&i()&&g(r,i().playerName||"",!0)});function n(){o.onSave({playerName:d(r)})}Ya(c,{get isOpen(){return l()},get onClose(){return o.onClose},title:"âš™ï¸ ConfiguraÃ§Ãµes do Personagem",maxWidth:"max-w-md",children:(s,v)=>{var _=Ls(),h=E(_),S=t(h),U=t(S),M=t(U);Ta(M,{size:12}),Re(),e(U);var W=a(U,2);ut(W),Re(2),e(S),e(h);var b=a(h,2),z=t(b);z.__click=function(...w){o.onClose?.apply(this,w)};var R=a(z,2);R.__click=n,e(b),pt(W,()=>d(r),w=>g(r,w)),u(s,_)},$$slots:{default:!0}}),ht()}bt(["click"]);const at=ca("idle"),Na=ca(null),ia=ca(null),Hs="701898444454-7ml9onnv529k99rkvgh1slhdj4a1arrm.apps.googleusercontent.com",La="https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/userinfo.profile",fe=ca({signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null,isInited:!1});let la,Ra=!1;const Bt="wwv_google_session";function Vs(){localStorage.removeItem(Bt),fe.update(c=>({...c,signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null})),console.log("Session cleared due to expired or invalid token")}async function da(){Vs(),console.warn("OAuth token expired or invalid. Please sign in again.")}async function Xa(c){try{const o=await fetch("https://www.googleapis.com/oauth2/v1/userinfo?alt=json",{headers:{Authorization:`Bearer ${c}`}});if(o.status===401){await da();return}if(o.ok){const l=await o.json();fe.update(i=>({...i,userProfile:{name:l.name,picture:l.picture}})),Za()}}catch(o){console.error("Failed to fetch user profile:",o)}}function qs(){try{const c=localStorage.getItem(Bt);if(c){const o=JSON.parse(c);if(o.accessToken)return o.tokenExpiry&&Date.now()>o.tokenExpiry?(console.log("Stored token is expired, clearing session"),localStorage.removeItem(Bt),!1):(fe.set({signedIn:!0,accessToken:o.accessToken,tokenExpiry:o.tokenExpiry||null,userProfile:o.userProfile||null,isInited:!0}),console.log("Restored session from localStorage"),Xa(o.accessToken),!0)}}catch(c){console.error("Failed to load stored session:",c)}return!1}function Za(){const c=Ee(fe);c.signedIn&&c.accessToken?localStorage.setItem(Bt,JSON.stringify({accessToken:c.accessToken,tokenExpiry:c.tokenExpiry,userProfile:c.userProfile})):localStorage.removeItem(Bt)}async function Ws(){const c=Hs;if(qs()){try{await Va(),la=google.accounts.oauth2.initTokenClient({client_id:c,scope:La,callback:Ha}),Ra=!0}catch(l){console.warn("Could not initialize GIS after restoring session:",l)}return}try{await Va(),la=google.accounts.oauth2.initTokenClient({client_id:c,scope:La,callback:Ha}),Ra=!0,fe.update(l=>({...l,isInited:!0})),console.log("Google Auth Initialized")}catch(l){console.error("Failed to initialize Google Auth:",l),ia.set("init_failed"),fe.update(i=>({...i,isInited:!0}))}}function Ha(c){if(c.error!==void 0){console.error("Google Auth Error:",c);return}console.log("Google Auth Success",c);const o=c.expires_in||3600,l=Date.now()+o*1e3;fe.update(i=>({...i,signedIn:!0,accessToken:c.access_token,tokenExpiry:l})),Za(),Xa(c.access_token)}let St=null;function Va(){return typeof window>"u"||typeof google<"u"&&google.accounts?Promise.resolve():St||(St=new Promise((c,o)=>{if(document.querySelector('script[src="https://accounts.google.com/gsi/client"]')){const r=setInterval(()=>{typeof google<"u"&&google.accounts&&(clearInterval(r),c())},100);setTimeout(()=>{clearInterval(r),(typeof google>"u"||!google.accounts)&&(St=null,o(new Error("Google Identity Services script found but failed to initialize")))},5e3);return}const i=document.createElement("script");i.src="https://accounts.google.com/gsi/client",i.async=!0,i.defer=!0,i.onload=()=>{const r=setInterval(()=>{typeof google<"u"&&google.accounts&&(clearInterval(r),c())},50);setTimeout(()=>{clearInterval(r),(typeof google>"u"||!google.accounts)&&(St=null,o(new Error("Google object not available after script load")))},5e3)},i.onerror=()=>{St=null;const n=!navigator.onLine?"Failed to load Google script: No internet connection":"Failed to load Google script: Blocked by browser or network error";o(new Error(n))},document.head.appendChild(i)}),St)}function Qa(){la?(ia.set(null),la.requestAccessToken()):(console.error("Google Auth not initialized"),ia.set("not_initialized"),at.set("error"))}function Ys(){const c=Ee(fe).accessToken;localStorage.removeItem(Bt),fe.update(o=>({...o,signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null})),c&&typeof google<"u"&&google.accounts&&google.accounts.oauth2.revoke(c,()=>{console.log("Access token revoked")})}async function es(){const c=Ee(fe),o=c.accessToken;if(!o)throw new Error("Not signed in");if(c.tokenExpiry&&Date.now()>c.tokenExpiry)throw await da(),new Error("Token expired, please sign in again");const i=`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent("name = 'weird-wizard-backup.json' and 'appDataFolder' in parents and trashed = false")}&spaces=appDataFolder&fields=files(id, name, modifiedTime, size)`,r=await fetch(i,{headers:{Authorization:`Bearer ${o}`}});if(r.status===401)throw await da(),new Error("Token expired, please sign in again");if(!r.ok)throw new Error("Failed to list backups: "+r.statusText);return(await r.json()).files||[]}async function Js(c){const o=Ee(fe).accessToken;if(!o)throw new Error("Not signed in");const l=JSON.stringify(c),i="weird-wizard-backup.json",r=await es(),n=r.length>0?r[0].id:null;if(n){const s=`https://www.googleapis.com/upload/drive/v3/files/${n}?uploadType=media`,v=await fetch(s,{method:"PATCH",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:l});if(!v.ok){const _=await v.text();throw console.error("Upload error details:",_),new Error("Upload failed: "+v.statusText)}return await v.json()}else{const s={name:i,mimeType:"application/json",parents:["appDataFolder"]},v=new FormData;v.append("metadata",new Blob([JSON.stringify(s)],{type:"application/json"})),v.append("file",new Blob([l],{type:"application/json"}));const h=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${o}`},body:v});if(!h.ok){const S=await h.text();throw console.error("Upload error details:",S),new Error("Upload failed: "+h.statusText)}return await h.json()}}async function Ks(c){const o=Ee(fe).accessToken;if(!o)throw new Error("Not signed in");const l=`https://www.googleapis.com/drive/v3/files/${c}?alt=media`,i=await fetch(l,{headers:{Authorization:`Bearer ${o}`}});if(i.status===401)throw await da(),new Error("Token expired, please sign in again");if(!i.ok)throw new Error("Download failed: "+i.statusText);return await i.json()}let wa;async function za(){if(Ee(fe).accessToken)try{console.log("Syncing from cloud..."),at.set("syncing");const o=await es();if(o.length===0){console.log("No backups found in cloud."),at.set("success");return}const l=o[0].id,i=await Ks(l),r=new Set;if(gt.forEach((n,s)=>{r.add(String(s)),console.log("[DEBUG] Local deleted ID entry:",{key:s,type:typeof s,val:n})}),console.log("[DEBUG] Total locally deleted IDs:",r.size),i.deletedIds&&Array.isArray(i.deletedIds)){console.log("[DEBUG] Cloud data deletedIds count:",i.deletedIds.length);for(const n of i.deletedIds){const s=String(n.id);gt.has(s)||(gt.set(s,n),console.log("[DEBUG] New deletion synced from cloud:",s)),r.add(s),n.type==="character"&&xe.has(s)&&(xe.delete(s),console.log("[DEBUG] Removed char locally based on cloud deletion:",s)),n.type==="campaign"&&_e.has(s)&&(_e.delete(s),console.log("[DEBUG] Removed camp locally based on cloud deletion:",s)),n.type==="enemy"&&ea.has(s)&&(ea.delete(s),console.log("[DEBUG] Removed enemy locally based on cloud deletion:",s)),n.type==="encounter"&&ta.has(s)&&(ta.delete(s),console.log("[DEBUG] Removed encounter locally based on cloud deletion:",s))}}if(i.characters&&Array.isArray(i.characters)){console.log("[DEBUG] Syncing",i.characters.length,"characters from cloud");for(const n of i.characters){const s=String(n.id);if(r.has(s)||gt.has(s)){console.log("[DEBUG] Skipping character because it is marked as deleted:",{id:s,name:n.name}),xe.has(s)&&(console.log("[DEBUG] Character found locally but marked deleted. Removing now:",s),xe.delete(s));for(const _ of xe.keys()){const h=xe.get(_);h&&h.id===s&&(console.log("[DEBUG] Mismatched key entry found for deleted char. Removing:",_),xe.delete(_))}continue}const v=xe.get(s);console.log("[DEBUG] Syncing character from cloud:",{id:s,name:n.name,status:v?"OVERWRITING":"ADDING"}),xe.set(s,n)}}if(i.campaigns&&Array.isArray(i.campaigns)){console.log("[DEBUG] Syncing",i.campaigns.length,"campaigns from cloud");for(const n of i.campaigns){const s=String(n.id);if(r.has(s)||gt.has(s)){console.log("[DEBUG] Skipping campaign because it is marked as deleted:",{id:s,name:n.name}),_e.has(s)&&(console.log("[DEBUG] Campaign found locally but marked deleted. Removing now:",s),_e.delete(s));for(const v of _e.keys()){const _=_e.get(v);_&&_.id===s&&(console.log("[DEBUG] Mismatched key entry found for deleted camp. Removing:",v),_e.delete(v))}continue}console.log("[DEBUG] Syncing campaign from cloud:",{id:s,name:n.name,status:_e.has(s)?"OVERWRITING":"ADDING"}),_e.set(s,n)}}if(i.enemies&&Array.isArray(i.enemies))for(const n of i.enemies){const s=String(n.id);!r.has(s)&&!ea.has(s)&&ea.set(s,n)}if(i.encounters&&Array.isArray(i.encounters))for(const n of i.encounters){const s=String(n.id);!r.has(s)&&!ta.has(s)&&ta.set(s,n)}if(i.images&&typeof i.images=="object"){console.log("[DEBUG] Syncing",Object.keys(i.images).length,"images from cloud");for(const[n,s]of Object.entries(i.images))Ca.has(n)||(Ca.set(n,s),console.log("[DEBUG] New image synced from cloud:",n))}i.appSettings&&(console.log("[DEBUG] Syncing app settings from cloud"),na.set(i.appSettings)),console.log("[DEBUG] Sync from cloud complete."),at.set("success"),Na.set(Date.now())}catch(o){console.error("Failed to sync from cloud:",o),at.set("error")}}async function ya(){Ee(fe).accessToken&&(wa&&clearTimeout(wa),wa=setTimeout(async()=>{try{console.log("Syncing to cloud..."),at.set("syncing");const o=[],l=new Set;gt.forEach((h,S)=>{o.push({id:S,...h}),l.add(String(S))});const i=Ee(Ka).filter(h=>!l.has(String(h.id))),r=Ee(Sa).filter(h=>!l.has(String(h.id))),n=Ee(cs).filter(h=>!l.has(String(h.id))),s=Ee(vs).filter(h=>!l.has(String(h.id))),v={};Ca.forEach((h,S)=>{v[S]=h});const _={characters:i,campaigns:r,enemies:n,encounters:s,images:v,deletedIds:o,appSettings:Ee(na),timestamp:Date.now(),version:1,appName:"WeirdWizardVault"};console.log("[DEBUG] Uploading to cloud:",{charactersCount:_.characters.length,campaignsCount:_.campaigns.length,enemiesCount:n.length,imagesCount:Object.keys(v).length,deletedIdsCount:o.length}),await Js(_),console.log("Sync to cloud complete."),at.set("success"),Na.set(Date.now())}catch(o){console.error("Failed to sync to cloud:",o),at.set("error")}},2e3))}var Xs=m('<img alt="Avatar" class="w-10 h-10 rounded-full border-2 border-indigo-500/50 shadow-lg object-cover"/>'),Zs=m('<div class="w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white border-2 border-indigo-400/30 shadow-lg"><span class="font-bold text-lg"><!></span></div>'),Qs=m('<div class="absolute right-0 top-full mt-2 w-48 bg-slate-800 rounded-xl shadow-xl border border-slate-700 p-2 z-50 animate-in fade-in slide-in-from-top-2"><div class="px-3 py-2 border-b border-slate-700 mb-2"><p class="text-xs text-slate-400"> </p> <p class="text-sm font-bold text-white truncate"> </p></div> <button class="w-full flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors text-sm"><!> </button></div>  <div class="fixed inset-0 z-40"></div>',1),eo=m('<div class="relative"><button><!> <div class="absolute bottom-1 right-1 w-3 h-3 bg-emerald-500 rounded-full border-2 border-slate-900"></div></button> <!></div>'),to=m('<div class="w-4 h-4 rounded-full border-2 border-slate-300 border-t-slate-600 animate-spin"></div>'),ao=rs('<svg class="w-4 h-4" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg>'),so=m("<button><!> <span> </span></button>");function oo(c,o){mt(o,!0);const l=()=>me(fe,"$googleSession",r),i=()=>me(qt,"$t",r),[r,n]=Wt();let s=Le(o,"className",3,""),v=X(!1);var _=oe(),h=E(_);{var S=M=>{var W=eo(),b=t(W);b.__click=()=>g(v,!d(v));var z=t(b);{var R=y=>{var x=Xs();L(()=>Fe(x,"src",l().userProfile.picture)),u(y,x)},w=y=>{var x=Zs(),C=t(x),j=t(C);{var N=Y=>{var G=ns();L(T=>f(G,T),[()=>l().userProfile.name[0].toUpperCase()]),u(Y,G)},re=Y=>{Ta(Y,{size:20})};$(j,Y=>{l().userProfile?.name?Y(N):Y(re,!1)})}e(C),e(x),u(y,x)};$(z,y=>{l().userProfile?.picture?y(R):y(w,!1)})}Re(2),e(b);var B=a(b,2);{var I=y=>{var x=Qs(),C=E(x),j=t(C),N=t(j),re=t(N,!0);e(N);var Y=a(N,2),G=t(Y,!0);e(Y),e(j);var T=a(j,2);T.__click=()=>{Ys(),g(v,!1)};var H=t(T);bs(H,{size:14});var te=a(H);e(T),e(C);var Z=a(C,2);Z.__click=()=>g(v,!1),L((J,V,ne)=>{f(re,J),f(G,V),f(te,` ${ne??""}`)},[()=>i()("common.auth.signed_in_as"),()=>l().userProfile?.name??i()("common.auth.user"),()=>i()("common.auth.logout")]),u(y,x)};$(B,y=>{d(v)&&y(I)})}e(W),L(y=>{ze(b,1,`flex items-center gap-2 p-1 rounded-full hover:bg-slate-800 transition-colors border border-transparent hover:border-slate-700 ${s()??""}`),Fe(b,"title",y)},[()=>l().userProfile?.name||i()("common.auth.user")]),u(M,W)},U=M=>{var W=so();W.__click=function(...I){Qa?.apply(this,I)};var b=t(W);{var z=I=>{var y=to();u(I,y)},R=I=>{var y=ao();u(I,y)};$(b,I=>{l().isInited?I(R,!1):I(z)})}var w=a(b,2),B=t(w,!0);e(w),e(W),L(I=>{W.disabled=!l().isInited,ze(W,1,`flex items-center gap-2 px-4 py-2 bg-white text-slate-900 hover:bg-slate-100 rounded-full font-bold text-xs transition-all shadow-lg hover:shadow-xl hover:scale-105 disabled:opacity-50 disabled:cursor-wait disabled:scale-100 disabled:shadow-none ${s()??""}`),f(B,I)},[()=>i()("common.auth.login")]),u(M,W)};$(h,M=>{l().signedIn?M(S):M(U,!1)})}u(c,_),ht(),n()}bt(["click"]);var ro=m('<span class="w-2 h-2 rounded-full bg-amber-500"></span> <span class="text-amber-400">Auth: Init Failed</span>',1),no=m('<span class="w-2 h-2 rounded-full bg-amber-500"></span> <span class="text-amber-400">Auth: Not Ready</span>',1),io=m('<span class="w-2 h-2 rounded-full bg-slate-600"></span> <span> </span>',1),lo=m('<span class="w-2 h-2 rounded-full bg-indigo-500 animate-pulse"></span> <span> </span>',1),co=m('<span class="w-2 h-2 rounded-full bg-emerald-500"></span> <span> </span>',1),vo=m('<span class="w-2 h-2 rounded-full bg-red-500"></span> <span> </span>',1),uo=m('<span class="w-2 h-2 rounded-full bg-slate-500"></span> <span> </span>',1),po=m('<div class="mt-1.5 pt-1.5 border-t border-slate-800 text-[9px] text-slate-400 opacity-80 font-medium flex justify-between items-center gap-4"><span> </span> <span> </span></div>'),go=m('<div class="mt-1 text-[9px] text-slate-400 opacity-60 italic"> </div>'),fo=m('<div class="absolute top-full right-0 mt-3 whitespace-nowrap bg-slate-900/95 backdrop-blur-md text-white text-[10px] font-bold py-2 px-3 rounded-lg shadow-2xl border border-slate-700/50 z-[100] pointer-events-none min-w-[120px]"><div class="flex items-center gap-2"><!></div> <!></div>'),mo=m('<div class="relative flex items-center"><button class="flex items-center justify-center p-2 rounded-xl hover:bg-slate-800/50 transition-all active:scale-95 group focus:outline-none"><!></button> <!></div>');function ho(c,o){mt(o,!0);const l=()=>me(fe,"$googleSession",v),i=()=>me(qt,"$t",v),r=()=>me(ia,"$authError",v),n=()=>me(at,"$syncStatus",v),s=()=>me(Na,"$lastSyncTime",v),[v,_]=Wt();let h=X(!1);function S(B){return new Date(B).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}var U=mo(),M=t(U);M.__click=()=>l().signedIn?za():Qa();var W=t(M);{var b=B=>{zs(B,{size:20,class:"text-amber-500"})},z=B=>{var I=oe(),y=E(I);{var x=j=>{ys(j,{size:20,class:"text-slate-600 group-hover:text-slate-400"})},C=j=>{var N=oe(),re=E(N);{var Y=T=>{Es(T,{size:20,class:"animate-spin text-indigo-400"})},G=T=>{var H=oe(),te=E(H);{var Z=V=>{ms(V,{size:20,class:"text-emerald-400 group-hover:text-emerald-300"})},J=V=>{var ne=oe(),P=E(ne);{var O=F=>{ws(F,{size:20,class:"text-red-400"})},q=F=>{ks(F,{size:20,class:"text-slate-400 group-hover:text-slate-300"})};$(P,F=>{n()==="error"?F(O):F(q,!1)},!0)}u(V,ne)};$(te,V=>{n()==="success"?V(Z):V(J,!1)},!0)}u(T,H)};$(re,T=>{n()==="syncing"?T(Y):T(G,!1)},!0)}u(j,N)};$(y,j=>{l().signedIn?j(C,!1):j(x)},!0)}u(B,I)};$(W,B=>{r()?B(b):B(z,!1)})}e(M);var R=a(M,2);{var w=B=>{var I=fo(),y=t(I),x=t(y);{var C=G=>{var T=ro();Re(2),u(G,T)},j=G=>{var T=oe(),H=E(T);{var te=J=>{var V=no();Re(2),u(J,V)},Z=J=>{var V=oe(),ne=E(V);{var P=q=>{var F=io(),le=a(E(F),2),ce=t(le,!0);e(le),L(he=>f(ce,he),[()=>i()("common.status.offline")]),u(q,F)},O=q=>{var F=oe(),le=E(F);{var ce=de=>{var ae=lo(),we=a(E(ae),2),ve=t(we,!0);e(we),L(ie=>f(ve,ie),[()=>i()("common.status.syncing")]),u(de,ae)},he=de=>{var ae=oe(),we=E(ae);{var ve=Q=>{var ye=co(),Ne=a(E(ye),2),$e=t(Ne,!0);e(Ne),L(Ye=>f($e,Ye),[()=>i()("common.status.saved")]),u(Q,ye)},ie=Q=>{var ye=oe(),Ne=E(ye);{var $e=Pe=>{var Ie=vo(),De=a(E(Ie),2),st=t(De,!0);e(De),L(Je=>f(st,Je),[()=>i()("common.status.error")]),u(Pe,Ie)},Ye=Pe=>{var Ie=uo(),De=a(E(Ie),2),st=t(De,!0);e(De),L(Je=>f(st,Je),[()=>i()("common.status.synced")]),u(Pe,Ie)};$(Ne,Pe=>{n()==="error"?Pe($e):Pe(Ye,!1)},!0)}u(Q,ye)};$(we,Q=>{n()==="success"?Q(ve):Q(ie,!1)},!0)}u(de,ae)};$(le,de=>{n()==="syncing"?de(ce):de(he,!1)},!0)}u(q,F)};$(ne,q=>{l().signedIn?q(O,!1):q(P)},!0)}u(J,V)};$(H,J=>{r()==="not_initialized"?J(te):J(Z,!1)},!0)}u(G,T)};$(x,G=>{r()==="init_failed"?G(C):G(j,!1)})}e(y);var N=a(y,2);{var re=G=>{var T=po(),H=t(T),te=t(H,!0);e(H);var Z=a(H,2),J=t(Z,!0);e(Z),e(T),L((V,ne)=>{f(te,V),f(J,ne)},[()=>i()("common.status.last_sync"),()=>S(s())]),u(G,T)},Y=G=>{var T=oe(),H=E(T);{var te=Z=>{var J=go(),V=t(J,!0);e(J),L(ne=>f(V,ne),[()=>i()("common.auth.login")]),u(Z,J)};$(H,Z=>{l().signedIn||Z(te)},!0)}u(G,T)};$(N,G=>{l().signedIn&&s()?G(re):G(Y,!1)})}e(I),ft(3,I,()=>Ja,()=>({duration:150})),u(B,I)};$(R,B=>{d(h)&&B(w)})}e(U),L(B=>Fe(M,"aria-label",B),[()=>i()("common.status.label")]),Ct("mouseenter",M,()=>g(h,!0)),Ct("mouseleave",M,()=>g(h,!1)),Ct("focus",M,()=>g(h,!0)),Ct("blur",M,()=>g(h,!1)),u(c,U),ht(),_()}bt(["click"]);var bo=m('<span class="text-[10px] text-slate-500 font-medium leading-tight mt-0.5"> </span>'),xo=m('<div class="flex flex-col"><span> </span> <!></div>'),_o=m('<div class="absolute inset-0 flex items-center justify-center"><div class="w-1.5 h-1.5 rounded-full bg-indigo-600"></div></div>'),wo=m("<div><!> <div><div><!></div></div></div>");function yo(c,o){mt(o,!0);let l=Le(o,"checked",3,!1),i=Le(o,"label",3,""),r=Le(o,"description",3,""),n=Le(o,"disabled",3,!1);function s(){n()||o.onToggle(!l())}var v=wo();v.__click=s;var _=t(v);{var h=b=>{var z=xo(),R=t(z),w=t(R,!0);e(R);var B=a(R,2);{var I=y=>{var x=bo(),C=t(x,!0);e(x),L(()=>f(C,r())),u(y,x)};$(B,y=>{r()&&y(I)})}e(z),L(()=>{ze(R,1,`text-sm font-black uppercase tracking-widest transition-colors ${l()?"text-indigo-400":"text-slate-300 group-hover:text-white"}`),f(w,i())}),u(b,z)};$(_,b=>{(i()||r())&&b(h)})}var S=a(_,2),U=t(S),M=t(U);{var W=b=>{var z=_o();u(b,z)};$(M,b=>{l()&&b(W)})}e(U),e(S),e(v),L(()=>{ze(v,1,`flex items-center justify-between gap-4 p-1 group ${n()?"opacity-50 grayscale":"cursor-pointer"}`),ze(S,1,`relative w-12 h-6 rounded-full transition-all duration-300 ease-in-out ${l()?"bg-indigo-600 shadow-[0_0_15px_rgba(79,70,229,0.4)]":"bg-slate-800 border border-white/5"}`),ze(U,1,`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-all duration-300 ease-[cubic-bezier(0.34,1.56,0.64,1)] shadow-md ${l()?"translate-x-6":"translate-x-0"}`)}),u(c,v),ht()}bt(["click"]);var ko=m('<button class="p-2 -ml-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all active:scale-95"><!></button>'),$o=m('<div class="p-2 bg-indigo-500/10 rounded-xl border border-indigo-500/20"><!></div>'),So=m('<button class="p-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all active:scale-95"><!></button>'),Co=m('<div class="p-4 bg-white/[0.02] border-t border-white/5"><button class="w-full bg-slate-800 hover:bg-slate-700 text-white font-black uppercase tracking-widest py-3 rounded-2xl transition-all active:scale-[0.98] text-sm"> </button></div>'),Eo=m('<div class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center md:p-4"><div class="bg-slate-900 border-white/10 w-full md:max-w-md md:rounded-3xl shadow-2xl overflow-hidden flex flex-col h-full md:h-auto md:max-h-[90vh]"><div class="px-6 py-6 border-b border-white/5 flex items-center justify-between bg-white/[0.02]"><div class="flex items-center gap-3"><!> <div><h2 class="text-lg font-black text-white uppercase tracking-tight"> </h2> <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </p></div></div> <!></div> <div class="flex-1 p-6 space-y-8 overflow-y-auto custom-scrollbar pb-32 md:pb-6 svelte-14b6qd9"><div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-indigo-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="space-y-6"><!></div></div> <div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-amber-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="grid grid-cols-1 gap-2"><button><div class="flex items-center gap-3"><span class="text-xl">ðŸ‡§ðŸ‡·</span> <span class="font-bold">PortuguÃªs (Brasil)</span></div> <!></button> <button><div class="flex items-center gap-3"><span class="text-xl">ðŸ‡ºðŸ‡¸</span> <span class="font-bold">English (US)</span></div> <!></button></div></div> <div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-emerald-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="bg-white/5 rounded-2xl p-4 border border-white/5"><div class="flex justify-between items-center opacity-50 cursor-not-allowed"><div class="flex flex-col"><span class="text-sm font-black uppercase tracking-widest text-slate-400"> </span> <span class="text-[10px] text-slate-500"> </span></div> <div class="w-12 h-6 bg-slate-800 rounded-full border border-white/5 p-1 relative"><div class="w-4 h-4 bg-slate-600 rounded-full"></div></div></div></div></div> <div class="pt-4 border-t border-white/5 flex flex-col items-center gap-4 text-center"><p class="text-[10px] text-slate-500 leading-relaxed max-w-[250px]"> </p></div></div> <!></div></div>');function zo(c,o){mt(o,!0);const l=()=>me(qt,"$t",n),i=()=>me(na,"$appSettings",n),r=()=>me(ka,"$locale",n),[n,s]=Wt();let v=Le(o,"isOpen",3,!1),_=X(!1);Ia(()=>{const b=()=>g(_,window.innerWidth<768);return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)});function h(b,z){na.update(R=>({...R,[b]:z}))}function S(b){ka.set(b),localStorage.setItem("user_locale",b)}var U=oe(),M=E(U);{var W=b=>{var z=Eo();z.__click=function(...D){o.onClose?.apply(this,D)};var R=t(z);R.__click=D=>D.stopPropagation();var w=t(R),B=t(w),I=t(B);{var y=D=>{var ee=ko();ee.__click=function(...Ge){o.onClose?.apply(this,Ge)};var ue=t(ee);xs(ue,{size:24}),e(ee),u(D,ee)},x=D=>{var ee=$o(),ue=t(ee);$a(ue,{size:20,class:"text-indigo-400"}),e(ee),u(D,ee)};$(I,D=>{d(_)?D(y):D(x,!1)})}var C=a(I,2),j=t(C),N=t(j,!0);e(j);var re=a(j,2),Y=t(re,!0);e(re),e(C),e(B);var G=a(B,2);{var T=D=>{var ee=So();ee.__click=function(...Ge){o.onClose?.apply(this,Ge)};var ue=t(ee);Wa(ue,{size:24}),e(ee),u(D,ee)};$(G,D=>{d(_)||D(T)})}e(w);var H=a(w,2),te=t(H),Z=t(te),J=t(Z);Ss(J,{size:16});var V=a(J,2),ne=t(V,!0);e(V),e(Z);var P=a(Z,2),O=t(P);{let D=Mt(()=>l()("settings.options.auto_open_history.label")),ee=Mt(()=>l()("settings.options.auto_open_history.description"));yo(O,{get checked(){return i().autoOpenHistory},onToggle:ue=>h("autoOpenHistory",ue),get label(){return d(D)},get description(){return d(ee)}})}e(P),e(te);var q=a(te,2),F=t(q),le=t(F);Ea(le,{size:16});var ce=a(le,2),he=t(ce,!0);e(ce),e(F);var de=a(F,2),ae=t(de);ae.__click=()=>S("pt");var we=a(t(ae),2);{var ve=D=>{Aa(D,{size:18,class:"text-indigo-400"})};$(we,D=>{r()==="pt"&&D(ve)})}e(ae);var ie=a(ae,2);ie.__click=()=>S("en");var Q=a(t(ie),2);{var ye=D=>{Aa(D,{size:18,class:"text-indigo-400"})};$(Q,D=>{r()==="en"&&D(ye)})}e(ie),e(de),e(q);var Ne=a(q,2),$e=t(Ne),Ye=t($e);Cs(Ye,{size:16});var Pe=a(Ye,2),Ie=t(Pe,!0);e(Pe),e($e);var De=a($e,2),st=t(De),Je=t(st),Et=t(Je),xt=t(Et,!0);e(Et);var Yt=a(Et,2),va=t(Yt,!0);e(Yt),e(Je),Re(2),e(st),e(De),e(Ne);var zt=a(Ne,2),At=t(zt),Jt=t(At,!0);e(At),e(zt),e(H);var _t=a(H,2);{var Kt=D=>{var ee=Co(),ue=t(ee);ue.__click=function(...ot){o.onClose?.apply(this,ot)};var Ge=t(ue,!0);e(ue),e(ee),L(ot=>f(Ge,ot),[()=>l()("common.buttons.close")]),u(D,ee)};$(_t,D=>{d(_)||D(Kt)})}e(R),e(z),L((D,ee,ue,Ge,ot,ua,Ut,pa)=>{f(N,D),f(Y,ee),f(ne,ue),f(he,Ge),ze(ae,1,`flex items-center justify-between px-4 py-3 rounded-2xl border transition-all ${r()==="pt"?"bg-indigo-600/10 border-indigo-500/50 text-white":"bg-white/5 border-white/5 text-slate-400 hover:bg-white/10"}`),ze(ie,1,`flex items-center justify-between px-4 py-3 rounded-2xl border transition-all ${r()==="en"?"bg-indigo-600/10 border-indigo-500/50 text-white":"bg-white/5 border-white/5 text-slate-400 hover:bg-white/10"}`),f(Ie,ot),f(xt,ua),f(va,Ut),f(Jt,pa)},[()=>l()("settings.title"),()=>l()("settings.description"),()=>l()("settings.sections.interface"),()=>l()("common.labels.language")||"Language",()=>l()("settings.sections.appearance"),()=>l()("settings.options.theme.label"),()=>l()("settings.options.theme.description"),()=>l()("settings.sync_info")]),ft(1,R,()=>Gt,()=>d(_)?{x:"100%",duration:600,easing:jt}:{y:20,duration:300}),ft(2,R,()=>Gt,()=>d(_)?{x:"100%",duration:600,easing:jt}:{y:20,duration:300}),ft(3,z,()=>Ja,()=>({duration:200})),u(b,z)};$(M,b=>{v()&&b(W)})}u(c,U),ht(),s()}bt(["click"]);var Io=m('<span class="text-[10px] text-slate-400 font-medium"> </span>'),To=m('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all relative group flex flex-col shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="flex justify-between items-start mb-4"><div class="flex-1"><h3 class="font-black text-xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate pr-16"> </h3> <div class="flex items-center gap-2 mt-1 flex-wrap"><span class="text-[10px] bg-indigo-500/10 text-indigo-400 font-black px-2 py-0.5 rounded uppercase tracking-wider"> </span> <span class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </span> <!></div> <div class="mt-2 flex items-center gap-2"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800 text-[9px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div></div></div> <div class="flex items-center gap-1"><button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button></div></div> <div class="space-y-3 mb-6"><div class="flex items-center justify-between text-xs text-slate-400"><span class="flex items-center gap-1.5 opacity-60"><!> </span> <span class="font-bold text-slate-300 truncate max-w-[150px]"> </span></div></div> <button class="w-full bg-slate-800 hover:bg-indigo-600 text-white py-3 rounded-2xl font-bold transition-all active:scale-[0.98] border border-slate-700 hover:border-indigo-400/30 flex items-center justify-center gap-2"> <!></button></div>'),No=m('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 col-start-1 row-start-1 w-full"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold"> </span></button></div>'),Po=m('<span class="text-[9px] bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded-full border border-emerald-500/20 font-black uppercase tracking-widest flex items-center gap-1"><!> </span>'),Do=m('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="mb-4"><div class="flex justify-between items-start mb-1"><h3 class="font-black text-2xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight"> </h3> <div class="flex items-center gap-1"><!> <button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button></div></div> <p class="text-indigo-400 text-[10px] font-black uppercase tracking-[0.2em] mb-3"> </p> <div class="mb-3"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800 text-[9px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div></div> <p class="text-sm text-slate-400 line-clamp-2 leading-relaxed h-10"> </p></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-2xl font-bold flex items-center justify-center gap-2 border border-indigo-400/20 shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98]"><!> </button></div>'),Mo=m('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-emerald-500/40 transition-all group relative flex flex-col justify-between shadow-xl border-t-white/5"><div><h3 class="font-black text-2xl text-white group-hover:text-emerald-400 mb-2 uppercase tracking-tight"> </h3> <div class="flex items-center gap-2 mb-4"><div class="px-2 py-0.5 bg-slate-800 rounded text-[9px] text-slate-400 font-black uppercase tracking-widest"> </div> <div class="flex items-center gap-1 px-2 py-0.5 bg-emerald-500/10 rounded text-[9px] text-emerald-400 font-black uppercase tracking-wider"><div class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></div> </div></div> <div class="mb-4"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800/50 text-[9px] text-slate-400 border border-slate-700/50 font-bold uppercase tracking-wider"><!> </div></div> <p class="text-sm text-slate-400 line-clamp-3 leading-relaxed mb-6 h-15"> </p></div> <button class="w-full bg-emerald-600 hover:bg-emerald-500 text-white py-3 rounded-2xl font-black uppercase text-xs tracking-[0.1em] flex items-center justify-center gap-2 border border-emerald-400/20 transition-all active:scale-[0.98] group"> <!></button></div>'),jo=m('<div class="col-span-full py-12 flex flex-col items-center text-center opacity-40"><div class="w-16 h-16 bg-slate-800/50 rounded-full flex items-center justify-center text-slate-600 mb-3 border border-slate-700 border-dashed"><!></div> <h3 class="text-lg font-black uppercase tracking-widest text-slate-500"> </h3> <p class="text-slate-600 max-w-sm mt-2 text-sm"> </p></div>'),Go=m('<div class="space-y-8 col-start-1 row-start-1 w-full"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold"> </span></button></div> <div><div class="flex items-center gap-3 mb-4"><div class="h-px flex-1 bg-slate-800"></div> <h3 class="text-xs font-black uppercase tracking-widest text-emerald-400 flex items-center gap-2"><!> </h3> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><!> <!></div></div></div>'),Bo=m('<div class="fixed top-0 left-0 w-full flex justify-center items-center pointer-events-none z-[100] transition-all duration-300"><div class="bg-indigo-600 rounded-full p-2.5 shadow-xl border border-indigo-500/50 text-white"><!></div></div> <div class="animate-in fade-in px-4 md:px-8 max-w-7xl mx-auto pb-32 md:pb-20"><header class="mb-8 flex justify-between items-center border-b border-slate-800/50 pt-4 md:pt-8 pb-4 sticky top-0 bg-slate-950/80 backdrop-blur-md z-40 -mx-4 px-4 md:-mx-8 md:px-8 transition-all"><div class="flex items-center gap-3"><img alt="Schwalb Vault Logo" class="h-10 md:h-14 w-auto rounded-xl"/> <h1 class="text-xl md:text-3xl font-bold text-white flex items-center gap-2 text-gradient m-0 leading-none"><span class="hidden md:inline">Schwalb Vault</span> <span class="md:hidden">Schwalb Vault</span></h1></div> <div class="hidden md:flex absolute left-1/2 -translate-x-1/2 bg-slate-900/50 p-1.5 rounded-2xl border border-slate-800 glass shadow-xl backdrop-blur-md"><div class="relative flex"><div class="absolute inset-y-0 w-1/2 bg-indigo-600 rounded-xl transition-transform duration-300 ease-out shadow-lg shadow-indigo-500/20"></div> <button><!> </button> <button><!> </button></div></div> <div class="flex items-center justify-end min-w-[40px] gap-3"><!> <button class="p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-all"><!></button> <!></div></header> <div class="md:hidden fixed bottom-0 left-0 right-0 bg-slate-900/90 backdrop-blur-xl border-t border-slate-800 shadow-2xl rounded-t-2xl z-50 p-2 pb-safe"><div class="relative flex justify-between"><div class="absolute inset-y-0 w-1/2 bg-indigo-600/20 rounded-xl transition-transform duration-300 ease-out"></div> <button><!> <span class="transition-all duration-300"> </span></button> <button><!> <span class="transition-all duration-300"> </span></button></div></div> <div class="min-h-[500px] grid items-start relative"><!></div> <!> <!> <!> <!> <!></div>',1);function Ao(c,o){mt(o,!0);const l=()=>me(fe,"$googleSession",v),i=()=>me(Ka,"$liveCharacters",v),r=()=>me(Sa,"$liveCampaigns",v),n=()=>me(qt,"$t",v),s=()=>me(ps,"$publicCampaigns",v),[v,_]=Wt();let h=X(0),S=X(0),U=X(!1),M=X(!1);const W=80;function b(p){window.scrollY===0&&(g(h,p.touches[0].clientY,!0),g(U,!0))}function z(p){if(!d(U))return;const K=p.touches[0].clientY-d(h);K>0&&window.scrollY<=0?g(S,Math.min(K*.4,120),!0):(g(U,!1),g(S,0))}async function R(){if(d(U))if(g(U,!1),d(S)>W){g(M,!0),g(S,60);try{navigator&&navigator.vibrate&&navigator.vibrate(50),await za()}finally{setTimeout(()=>{g(M,!1),g(S,0)},1e3)}}else g(S,0)}Ia(()=>{Ws();const p=localStorage.getItem("user_locale");return p&&ka.set(p),document.addEventListener("touchmove",z,{passive:!1}),()=>{document.removeEventListener("touchmove",z)}});let w=X("characters"),B=X("characters"),I=X(!1);Vt(()=>{d(w)!==d(B)&&g(B,d(w),!0)}),Vt(()=>{l().signedIn&&za()}),Vt(()=>{l().signedIn&&(i(),r(),ya())});let y=X(!1),x=X(null);function C(p){g(x,p,!0),g(y,!0)}function j(p){if(!d(x))return;const A=d(x).id,k={...xe.get(A),...p};xe.set(A,k),g(y,!1)}let N=X(!1),re=X("{}");const Y={name:"",playerName:"",ancestry:"Humano",novicePath:"",level:0,defense:8,health:5,system:tt};function G(){g(re,JSON.stringify(Y),!0),g(N,!0)}async function T(p){const A=Ba(),K={id:A,name:p.name,playerName:p.playerName||"",ancestry:p.ancestry,level:p.level,defense:p.defense,system:p.system||tt,paths:{novice:p.novicePath||"-",expert:"-",master:"-"},attributes:[{name:"ForÃ§a",value:10,key:"str"},{name:"Agilidade",value:10,key:"agi"},{name:"Intelecto",value:10,key:"int"},{name:"Vontade",value:10,key:"wil"}],speed:5,health:p.health,currentHealth:p.health,spells:[],talents:[],equipment:[],afflictions:[],effects:[],currency:{gp:0,sp:0,cp:0},languages:["Comum"]};xe.set(A,K),g(N,!1),aa(sa("/characters/[id]",{id:A}))}let H=X(!1),te=X(null),Z=X("{}");const J={name:"",description:"",gmName:"",system:tt};function V(p=null){g(te,p?p.id:null,!0),g(Z,JSON.stringify(p||J),!0),g(H,!0)}async function ne(p){const A=d(te)||Ba(),K=d(te)?_e.get(A):{},k={...K,id:A,name:p.name,description:p.description,gmName:p.gmName,players:K.players||[],backupEnabled:p.backupEnabled||!1,backupHash:p.backupHash||"",system:p.system||tt};p.removePassword?delete k.passwordHash:p.password&&(k.passwordHash=await _s(p.password)),_e.set(A,k),g(H,!1)}let P=X(!1),O=X(qa({title:"",message:"",onConfirm:()=>{}}));function q(p){g(O,{title:n()("dashboard.campaigns.delete_title"),message:n()("dashboard.campaigns.delete_message"),onConfirm:()=>{console.log("[DEBUG] Deleting campaign with ID:",p);let A=0;for(const K of _e.keys()){const k=_e.get(K);(K===p||k&&k.id===p)&&(console.log("[DEBUG] Found match for deletion - Key:",K,"Camp ID:",k?.id),_e.delete(K),A++)}console.log("[DEBUG] Total entries deleted from map:",A),gt.set(p,{type:"campaign",deletedAt:Date.now()}),console.log("[DEBUG] Deletion tracked in deletedIdsMap"),ya(),g(P,!1)}},!0),g(P,!0)}function F(p){g(O,{title:n()("dashboard.characters.delete_title"),message:n()("dashboard.characters.delete_message"),onConfirm:()=>{Ee(Sa).forEach(k=>{let pe=!1;k.members&&k.members.some(be=>be.id===p)&&(k.members=k.members.filter(be=>be.id!==p),pe=!0),k.sessionRoster&&k.sessionRoster.includes(p)&&(k.sessionRoster=k.sessionRoster.filter(be=>be!==p),pe=!0),k.activeEnemies&&k.activeEnemies.some(be=>be.id===p)&&(k.activeEnemies=k.activeEnemies.filter(be=>be.id!==p),pe=!0),pe&&_e.set(k.id,k)}),console.log("[DEBUG] Deleting character with ID:",p);let K=0;for(const k of xe.keys()){const pe=xe.get(k);(k===p||pe&&pe.id===p)&&(console.log("[DEBUG] Found match for deletion - Key:",k,"Char ID:",pe?.id),xe.delete(k),K++)}console.log("[DEBUG] Total entries deleted from map:",K),gt.set(p,{type:"character",deletedAt:Date.now()}),console.log("[DEBUG] Deletion tracked in deletedIdsMap"),ya(),g(P,!1)}},!0),g(P,!0)}var le=Bo();Ct("touchstart",ma,b),Ct("touchmove",ma,z),Ct("touchend",ma,R);var ce=E(le),he=t(ce),de=t(he);{let p=Mt(()=>d(M)?"animate-spin":""),A=Mt(()=>d(S)*2);$s(de,{get class(){return d(p)},size:20,get style(){return`transform: rotate(${d(A)??""}deg)`}})}e(he),e(ce);var ae=a(ce,2),we=t(ae),ve=t(we),ie=t(ve);Re(2),e(ve);var Q=a(ve,2),ye=t(Q),Ne=t(ye),$e=a(Ne,2);$e.__click=()=>g(w,"characters");var Ye=t($e);Ua(Ye,{size:18});var Pe=a(Ye);e($e);var Ie=a($e,2);Ie.__click=()=>g(w,"campaigns");var De=t(Ie);_a(De,{size:18});var st=a(De);e(Ie),e(ye),e(Q);var Je=a(Q,2),Et=t(Je);ho(Et,{});var xt=a(Et,2);xt.__click=()=>g(I,!0);var Yt=t(xt);$a(Yt,{size:20}),e(xt);var va=a(xt,2);oo(va,{}),e(Je),e(we);var zt=a(we,2),At=t(zt),Jt=t(At),_t=a(Jt,2);_t.__click=()=>g(w,"characters");var Kt=t(_t);{let p=Mt(()=>d(w)==="characters"?2.5:2);Ua(Kt,{size:20,get strokeWidth(){return d(p)},class:"transition-all duration-300"})}var D=a(Kt,2),ee=t(D,!0);e(D),e(_t);var ue=a(_t,2);ue.__click=()=>g(w,"campaigns");var Ge=t(ue);{let p=Mt(()=>d(w)==="campaigns"?2.5:2);_a(Ge,{size:20,get strokeWidth(){return d(p)},class:"transition-all duration-300"})}var ot=a(Ge,2),ua=t(ot,!0);e(ot),e(ue),e(At),e(zt);var Ut=a(zt,2),pa=t(Ut);{var ts=p=>{var A=No(),K=t(A);oa(K,1,i,wt=>wt.id,(wt,Se)=>{var yt=To(),It=t(yt),Tt=t(It),Ot=t(Tt),Qt=t(Ot,!0);e(Ot);var Nt=a(Ot,2),Ft=t(Nt),ga=t(Ft,!0);e(Ft);var ge=a(Ft,2),se=t(ge);e(ge);var Ce=a(ge,2);{var Me=Oe=>{var Qe=Io(),et=t(Qe);e(Qe),L(()=>f(et,`â€¢ ${d(Se).playerName??""}`)),u(Oe,Qe)};$(Ce,Oe=>{d(Se).playerName&&Oe(Me)})}e(Nt);var ke=a(Nt,2),Be=t(ke),je=t(Be);ra(je,{size:10});var Ae=a(je);e(Be),e(ke),e(Tt);var Ke=a(Tt,2),Te=t(Ke);Te.__click=()=>C(d(Se));var Xe=t(Te);$a(Xe,{size:16}),e(Te);var Ue=a(Te,2);Ue.__click=()=>F(d(Se).id);var Ze=t(Ue);Ga(Ze,{size:16}),e(Ue),e(Ke),e(It);var rt=a(It,2),nt=t(rt),it=t(nt),lt=t(it);_a(lt,{size:12});var dt=a(lt);e(it);var ct=a(it,2),Lt=t(ct,!0);e(ct),e(nt),e(rt);var vt=a(rt,2);vt.__click=()=>aa(sa("/characters/[id]",{id:d(Se).id}));var Pt=t(vt),kt=a(Pt);Oa(kt,{size:14,fill:"currentColor"}),e(vt),e(yt),L((Oe,Qe,et,$t,Dt,Rt)=>{f(Qt,d(Se).name),f(ga,d(Se).ancestry||"Humano"),f(se,`${Oe??""} ${d(Se).level??""}`),f(Ae,` ${Qe??""}`),Fe(Te,"title",et),Fe(Ue,"title",$t),f(dt,` ${Dt??""}`),f(Lt,d(Se).paths?.novice||"-"),f(Pt,`${Rt??""} `)},[()=>n()("common.labels.level"),()=>xa(d(Se).system).name,()=>n()("common.buttons.settings"),()=>n()("common.buttons.delete"),()=>n()("dashboard.characters.paths"),()=>n()("dashboard.characters.open_sheet")]),u(wt,yt)});var k=a(K,2);k.__click=()=>G();var pe=t(k),be=t(pe);ba(be,{size:32}),e(pe);var Xt=a(pe,2),Zt=t(Xt,!0);e(Xt),e(k),e(A),L(wt=>f(Zt,wt),[()=>n()("dashboard.characters.new_character")]),ft(1,A,()=>Gt,()=>({x:-100,duration:300,easing:jt})),ft(2,A,()=>Gt,()=>({x:-100,duration:300,easing:jt})),u(p,A)},as=p=>{var A=Go(),K=t(A),k=t(K);oa(k,1,r,ge=>ge.id,(ge,se)=>{var Ce=Do(),Me=t(Ce),ke=t(Me),Be=t(ke),je=t(Be,!0);e(Be);var Ae=a(Be,2),Ke=t(Ae);{var Te=et=>{var $t=Po(),Dt=t($t);Ea(Dt,{size:10});var Rt=a(Dt);e($t),L(fa=>f(Rt,` ${fa??""}`),[()=>n()("dashboard.campaigns.published")]),u(et,$t)};$(Ke,et=>{d(se).isPublished&&et(Te)})}var Xe=a(Ke,2);Xe.__click=()=>V(d(se));var Ue=t(Xe);ls(Ue,{size:16}),e(Xe);var Ze=a(Xe,2);Ze.__click=()=>q(d(se).id);var rt=t(Ze);Ga(rt,{size:16}),e(Ze),e(Ae),e(ke);var nt=a(ke,2),it=t(nt,!0);e(nt);var lt=a(nt,2),dt=t(lt),ct=t(dt);ra(ct,{size:10});var Lt=a(ct);e(dt),e(lt);var vt=a(lt,2),Pt=t(vt,!0);e(vt),e(Me);var kt=a(Me,2);kt.__click=()=>aa(sa("/campaigns/[id]",{id:d(se).id}));var Oe=t(kt);Oa(Oe,{size:18,fill:"currentColor"});var Qe=a(Oe);e(kt),e(Ce),L((et,$t,Dt,Rt,fa,os)=>{f(je,d(se).name),Fe(Xe,"title",et),Fe(Ze,"title",$t),f(it,Dt),f(Lt,` ${Rt??""}`),f(Pt,fa),f(Qe,` ${os??""}`)},[()=>n()("common.buttons.edit"),()=>n()("common.buttons.delete"),()=>d(se).gmName||n()("common.labels.master"),()=>xa(d(se).system||tt).name,()=>d(se).description||n()("dashboard.campaigns.no_description"),()=>n()("dashboard.campaigns.start_session")]),u(ge,Ce)});var pe=a(k,2);pe.__click=()=>V();var be=t(pe),Xt=t(be);ba(Xt,{size:32}),e(be);var Zt=a(be,2),wt=t(Zt,!0);e(Zt),e(pe),e(K);var Se=a(K,2),yt=t(Se),It=a(t(yt),2),Tt=t(It);Ea(Tt,{size:14});var Ot=a(Tt);e(It),Re(2),e(yt);var Qt=a(yt,2),Nt=t(Qt);oa(Nt,1,s,ge=>ge.id,(ge,se)=>{var Ce=Mo(),Me=t(Ce),ke=t(Me),Be=t(ke,!0);e(ke);var je=a(ke,2),Ae=t(je),Ke=t(Ae,!0);e(Ae);var Te=a(Ae,2),Xe=a(t(Te));e(Te),e(je);var Ue=a(je,2),Ze=t(Ue),rt=t(Ze);ra(rt,{size:10});var nt=a(rt);e(Ze),e(Ue);var it=a(Ue,2),lt=t(it,!0);e(it),e(Me);var dt=a(Me,2);dt.__click=()=>aa(sa("/campaigns/[id]/invite",{id:d(se).id}));var ct=t(dt),Lt=a(ct);ba(Lt,{size:18,class:"group-hover:rotate-90 transition-transform"}),e(dt),e(Ce),L((vt,Pt,kt,Oe,Qe)=>{f(Be,d(se).name),f(Ke,vt),f(Xe,` ${Pt??""}`),f(nt,` ${kt??""}`),f(lt,Oe),f(ct,`${Qe??""} `)},[()=>d(se).gmName||n()("common.labels.master"),()=>n()("dashboard.campaigns.online"),()=>xa(d(se).system||tt).name,()=>d(se).description||n()("dashboard.campaigns.public_description"),()=>n()("dashboard.campaigns.join_adventure")]),u(ge,Ce)});var Ft=a(Nt,2);{var ga=ge=>{var se=jo(),Ce=t(se),Me=t(Ce);fs(Me,{size:32}),e(Ce);var ke=a(Ce,2),Be=t(ke,!0);e(ke);var je=a(ke,2),Ae=t(je,!0);e(je),e(se),L((Ke,Te)=>{f(Be,Ke),f(Ae,Te)},[()=>n()("dashboard.campaigns.no_online_campaigns"),()=>n()("dashboard.campaigns.no_online_description")]),u(ge,se)};$(Ft,ge=>{s().length===0&&ge(ga)})}e(Qt),e(Se),e(A),L((ge,se)=>{f(wt,ge),f(Ot,` ${se??""}`)},[()=>n()("dashboard.campaigns.new_campaign"),()=>n()("dashboard.campaigns.public_campaigns")]),ft(1,A,()=>Gt,()=>({x:100,duration:300,easing:jt})),ft(2,A,()=>Gt,()=>({x:100,duration:300,easing:jt})),u(p,A)};$(pa,p=>{d(w)==="characters"?p(ts):p(as,!1)})}e(Ut);var Pa=a(Ut,2);Fs(Pa,{get isOpen(){return d(N)},get initialData(){return d(re)},onClose:()=>g(N,!1),onSave:T});var Da=a(Pa,2);hs(Da,{get isOpen(){return d(H)},get initialData(){return d(Z)},onClose:()=>g(H,!1),onSave:ne});var Ma=a(Da,2);us(Ma,{get isOpen(){return d(P)},get title(){return d(O).title},get message(){return d(O).message},get onConfirm(){return d(O).onConfirm},onCancel:()=>g(P,!1)});var ja=a(Ma,2);Rs(ja,{get isOpen(){return d(y)},get characterData(){return d(x)},onClose:()=>g(y,!1),onSave:j});var ss=a(ja,2);zo(ss,{get isOpen(){return d(I)},onClose:()=>g(I,!1)}),e(ae),L((p,A,K,k,pe)=>{ha(ce,`transform: translateY(${(d(M)?60:d(S))??""}px); opacity: ${d(S)>0?1:0}`),Fe(ie,"src",`${gs??""}/logo-black.webp`),ha(Ne,`transform: translateX(${d(w)==="campaigns"?"100%":"0%"})`),ze($e,1,`relative z-10 px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${d(w)==="characters"?"text-white":"text-slate-400 hover:text-white"}`),f(Pe,` ${p??""}`),ze(Ie,1,`relative z-10 px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${d(w)==="campaigns"?"text-white":"text-slate-400 hover:text-white"}`),f(st,` ${A??""}`),Fe(xt,"title",K),ha(Jt,`transform: translateX(${d(w)==="campaigns"?"100%":"0%"})`),ze(_t,1,`relative flex-1 py-3 rounded-xl text-xs font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 z-10 ${d(w)==="characters"?"text-indigo-400":"text-slate-500"}`),f(ee,k),ze(ue,1,`relative flex-1 py-3 rounded-xl text-xs font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 z-10 ${d(w)==="campaigns"?"text-indigo-400":"text-slate-500"}`),f(ua,pe)},[()=>n()("dashboard.tabs.characters"),()=>n()("dashboard.tabs.campaigns"),()=>n()("settings.title"),()=>n()("dashboard.tabs.characters"),()=>n()("dashboard.tabs.campaigns")]),u(c,le),ht(),_()}bt(["click"]);var Uo=m("<!> <!>",1);function or(c){var o=Uo(),l=E(o);Gs(l,{});var i=a(l,2);Ao(i,{}),u(c,o)}export{or as component};
