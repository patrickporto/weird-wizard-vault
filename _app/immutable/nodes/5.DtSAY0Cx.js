const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/Bg6V0DHS.js","../chunks/eilO8mxO.js","../chunks/Cv9CvP4l.js","../chunks/LAPZz738.js","../chunks/DsnmJJEf.js","../chunks/y8AhTvDO.js","../chunks/5P2UBWQH.js","../chunks/DN1kndjz.js","../chunks/C38PHlvC.js","../chunks/5XsrLGCt.js","../chunks/VjRhTPLG.js","../chunks/CDnODwqQ.js"])))=>i.map(i=>d[i]);
import{l as Ee,s as Me,i as f,_ as ze}from"../chunks/5XsrLGCt.js";import"../chunks/DsnmJJEf.js";import{d as Ae,o as Pe,s as x}from"../chunks/Cv9CvP4l.js";import{d as le,e as F,a as l,p as Oe,f as p,j as i,s as n,t as N,i as Ge,k as c,g as a,F as h,G as I,r as o,n as E,H as Ve}from"../chunks/LAPZz738.js";import{e as Be,s as ie,i as De,r as He}from"../chunks/DN1kndjz.js";import{b as Le}from"../chunks/CDnODwqQ.js";import{a as G,s as Re}from"../chunks/VjRhTPLG.js";import{p as Te}from"../chunks/CAAdNQy_.js";import{C as Je,l as Se}from"../chunks/CwyIb4K5.js";import{U as Ue,r as oe,j as We,c as Fe,i as qe,W as Ke}from"../chunks/Bg6V0DHS.js";import{g as ne}from"../chunks/eilO8mxO.js";import{v as Qe}from"../chunks/BYmFNSF7.js";import{C as Xe}from"../chunks/CTyek7pC.js";import"../chunks/y8AhTvDO.js";import{I as Ye,s as Ze}from"../chunks/5P2UBWQH.js";function de(V,M){const B=Ee(M,["children","$$slots","$$events","$$legacy"]);const w=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]];Ye(V,Me({name:"triangle-alert"},()=>B,{get iconNode(){return w},children:(g,q)=>{var b=le(),D=F(b);Ze(D,M,"default",{}),l(g,b)},$$slots:{default:!0}}))}var ea=p('<span class="block text-xs mt-1 uppercase tracking-widest text-slate-500 font-black"> </span>'),aa=p('<div class="mt-4 px-3 py-1 bg-amber-500/10 border border-amber-500/20 rounded-full text-[10px] text-amber-500 font-bold uppercase tracking-wider animate-pulse flex items-center gap-2"><!> Aguardando o Mestre ficar online...</div>'),ta=p('<div class="mb-6 bg-red-500/10 border border-red-500/20 rounded-xl p-3 flex items-center gap-3"><!> <p class="text-red-400 text-sm font-bold"> </p></div>'),ra=p('<p class="text-red-400 text-xs mt-1">Senha incorreta.</p>'),sa=p('<div class="mb-6 bg-slate-950/50 p-4 rounded-xl border border-slate-800"><label for="campaign-pwd-input" class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-indigo-500 animate-pulse"></div> Senha Necessária</label> <input id="campaign-pwd-input" type="password" placeholder="Digite a senha da campanha..."/> <!></div>'),ia=p('<button><div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-xs font-bold"> </div> <div class="flex-1 text-left"><div class="font-bold text-sm"> </div> <div class="text-[10px] opacity-60"> </div></div> <!></button>'),oa=p("<div>Nenhum personagem encontrado.</div> <div>Crie um personagem primeiro!</div>",1),na=p('<div class="flex flex-col items-center gap-2"><!> <div class="text-amber-500 font-bold">Todos os seus personagens já estão em campanhas.</div> <div class="text-xs text-slate-500">Crie um novo personagem ou saia de uma campanha existente.</div></div>'),da=p('<div class="text-center py-8 text-slate-600 italic text-sm space-y-2"><!></div>'),la=p('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> Validando...',1),ca=p('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> Carregando...',1),va=p('<div class="min-h-screen bg-slate-950 flex items-center justify-center p-4"><div class="max-w-md w-full bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl"><div class="flex flex-col items-center text-center mb-8"><div class="w-16 h-16 bg-indigo-600/20 rounded-full flex items-center justify-center text-indigo-400 mb-4 border border-indigo-500/30"><!></div> <h1 class="text-2xl font-bold text-white mb-2">Convite para Campanha</h1> <p class="text-slate-400">Você foi convidado para participar de <span class="text-indigo-400 font-bold"> </span> <!></p> <!></div> <!> <!> <div class="space-y-4 mb-8"><label for="char-selector" class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2">Escolha seu Personagem</label> <div id="char-selector" class="space-y-2 max-h-60 overflow-y-auto custom-scrollbar pr-2"><!> <!></div></div> <div class="flex gap-3"><button class="flex-1 py-3 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-bold transition-all">Recusar</button> <button class="flex-1 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold transition-all shadow-lg shadow-indigo-900/20 flex items-center justify-center gap-2"><!></button></div></div></div> <!>',1);function Na(V,M){Oe(M,!0);const B=()=>G(Te,"$page",b),w=()=>G(Fe,"$character",b),g=()=>G(Se,"$liveCharacters",b),q=()=>G(qe,"$isGmOnline",b),[b,D]=Re(),$=B().params.id;let y=I(()=>w().campaignName||"Buscando campanha..."),H=I(()=>w().gmName||"..."),z=I(()=>w().passwordHash),K=I(()=>g().filter(t=>!t.campaignId)),m=h(null),A=h(!1),C=h(""),k=h(!1),P=h(!1),_=h("");Pe(()=>{$&&We($,!1)});async function ce(){if(c(_,""),!a(m)||!$)return;if(g().find(e=>e.id===a(m))?.campaignId){c(_,"Este personagem já está em uma campanha!");return}if(a(z)){if(!a(C)){c(k,!0);return}c(P,!0);const e=await Qe(a(C),a(z));if(c(P,!1),!e){c(k,!0);return}}c(k,!1),c(A,!0)}function ve(){if(!a(m)||!$)return;const t=g().find(e=>e.id===a(m));if(t){if(t.campaignId){c(_,"Este personagem já está em uma campanha!"),c(A,!1);return}ze(async()=>{const{charactersMap:e}=await import("../chunks/Bg6V0DHS.js").then(r=>r.L);return{charactersMap:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url).then(({charactersMap:e})=>{e.set(a(m),{...t,campaignId:$,campaignName:a(y),gmName:a(H),campaignApproval:"pending"}),ne(oe("/characters/[id]",{id:a(m)}))})}}var Q=va(),L=F(Q),X=i(L),R=i(X),T=i(R),pe=i(T);Ue(pe,{size:32}),o(T);var J=n(T,4),S=n(i(J)),me=i(S,!0);o(S);var fe=n(S,2);{var ue=t=>{var e=ea(),r=i(e);o(e),N(()=>x(r,`Mestre: ${a(H)??""}`)),l(t,e)};f(fe,t=>{a(H)!=="..."&&t(ue)})}o(J);var ge=n(J,2);{var be=t=>{var e=aa(),r=i(e);Ke(r,{size:12}),E(),o(e),l(t,e)};f(ge,t=>{q()||t(be)})}o(R);var Y=n(R,2);{var _e=t=>{var e=ta(),r=i(e);de(r,{size:20,class:"text-red-500 mb-0.5"});var v=n(r,2),u=i(v,!0);o(v),o(e),N(()=>x(u,a(_))),l(t,e)};f(Y,t=>{a(_)&&t(_e)})}var Z=n(Y,2);{var xe=t=>{var e=sa(),r=n(i(e),2);He(r);var v=n(r,2);{var u=s=>{var d=ra();l(s,d)};f(v,s=>{a(k)&&s(u)})}o(e),N(()=>ie(r,1,`w-full bg-slate-900 border ${a(k)?"border-red-500":"border-slate-700"} rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors`)),Le(r,()=>a(C),s=>c(C,s)),l(t,e)};f(Z,t=>{a(z)&&t(xe)})}var U=n(Z,2),ee=n(i(U),2),ae=i(ee);Be(ae,17,()=>a(K),De,(t,e)=>{var r=ia();r.__click=()=>{c(m,a(e).id,!0),c(_,"")};var v=i(r),u=i(v,!0);o(v);var s=n(v,2),d=i(s),W=i(d,!0);o(d);var se=n(d,2),je=i(se);o(se),o(s);var Ne=n(s,2);{var Ie=j=>{Xe(j,{size:16,class:"text-indigo-400"})};f(Ne,j=>{a(m)===a(e).id&&j(Ie)})}o(r),N(j=>{ie(r,1,`w-full flex items-center gap-3 p-3 rounded-xl border transition-all ${a(m)===a(e).id?"bg-indigo-600/20 border-indigo-500 text-white":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-700"}`),x(u,j),x(W,a(e).name),x(je,`Lvl ${a(e).level??""} • ${a(e).ancestry??""}`)},[()=>a(e).name.charAt(0)]),l(t,r)});var he=n(ae,2);{var we=t=>{var e=da(),r=i(e);{var v=s=>{var d=oa();E(2),l(s,d)},u=s=>{var d=na(),W=i(d);de(W,{size:24,class:"text-amber-500"}),E(4),o(d),l(s,d)};f(r,s=>{g().length===0?s(v):s(u,!1)})}o(e),l(t,e)};f(he,t=>{a(K).length===0&&t(we)})}o(ee),o(U);var te=n(U,2),re=i(te);re.__click=()=>ne(oe("/"));var O=n(re,2);O.__click=ce;var $e=i(O);{var ye=t=>{var e=la();E(),l(t,e)},Ce=t=>{var e=le(),r=F(e);{var v=s=>{var d=ca();E(),l(s,d)},u=s=>{var d=Ve("Aceitar Convite");l(s,d)};f(r,s=>{a(y)==="Buscando campanha..."?s(v):s(u,!1)},!0)}l(t,e)};f($e,t=>{a(P)?t(ye):t(Ce,!1)})}o(O),o(te),o(X),o(L);var ke=n(L,2);{let t=I(()=>`Deseja entrar na campanha "${a(y)}" com o personagem "${g().find(e=>e.id===a(m))?.name}"?`);Je(ke,{get isOpen(){return a(A)},title:"Confirmar Participação",get message(){return a(t)},onConfirm:ve,onCancel:()=>c(A,!1)})}N(()=>{x(me,a(y)),O.disabled=!a(m)||a(P)||!!a(z)&&!a(C)||a(y)==="Buscando campanha..."}),l(V,Q),Ge(),D()}Ae(["click"]);export{Na as component};
