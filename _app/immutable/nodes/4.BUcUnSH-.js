import"../chunks/DsnmJJEf.js";import{v as rt,w as $e,k as d,x as Yt,z as ea,j as b,B as t,y as a,A as r,T as ne,I as e,t as f,L as $a,F as O,R as Be,n as Qt,a2 as Xt,ag as Ca}from"../chunks/CeQBZBfG.js";import{d as ta,s as i,o as Ea,g as ha,e as pa}from"../chunks/DGsQstmn.js";import{l as St,s as Tt,i as I,p as Rt}from"../chunks/CyF0tIdS.js";import{e as He,s as Ie,i as ot,$ as Ft,r as It,a as Ee,h as ya,g as Za}from"../chunks/Bf8fp1vJ.js";import{s as aa,a as it}from"../chunks/T6JPUUzi.js";import{p as Xa}from"../chunks/CZehKAsL.js";import{A as Ka,d as ja,m as _a,a as Ya,c as Ma,e as Et,n as wa,o as er,q as na,t as ma,u as xa,b as Nt,f as Oa,g as ga,v as tr,x as ar,y as rr}from"../chunks/7vkt-fou.js";import{C as Na,b as za,c as Ra,l as sr,a as ir}from"../chunks/DFSqulGQ.js";import{b as nr}from"../chunks/7CS22xGD.js";import{U as Sa,C as Ia,W as Ta,r as Pa}from"../chunks/B9DjeVgS.js";import{a as or,A as ka,T as lr,E as Aa,M as dr,G as fa,H as Da,C as Ha,b as vr,I as cr,s as ur,c as br,L as xr,S as La,d as mr,D as da,e as _r}from"../chunks/y28pjK5e.js";import{k as Ua}from"../chunks/DTalkrd5.js";import{M as fr,X as va,P as Kt,c as pr,T as ca,b as gr,a as hr}from"../chunks/oOtnmlXQ.js";import{C as qa,G as yr,P as Fa,a as wr}from"../chunks/CozXHEm3.js";import"../chunks/CzS45DwE.js";import{I as Pt,s as At}from"../chunks/PNmOa-dp.js";import{b as kr}from"../chunks/Due0NeAJ.js";import{g as $r}from"../chunks/BFtPuR4J.js";import{W as zr}from"../chunks/D5B_mf56.js";function Cr(M,s){const n=St(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"m6 9 6 6 6-6"}]];Pt(M,Tt({name:"chevron-down"},()=>n,{get iconNode(){return x},children:(z,Q)=>{var C=rt(),l=$e(C);At(l,s,"default",{}),d(z,C)},$$slots:{default:!0}}))}function Er(M,s){const n=St(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"m18 15-6-6-6 6"}]];Pt(M,Tt({name:"chevron-up"},()=>n,{get iconNode(){return x},children:(z,Q)=>{var C=rt(),l=$e(C);At(l,s,"default",{}),d(z,C)},$$slots:{default:!0}}))}function jr(M,s){const n=St(s,["children","$$slots","$$events","$$legacy"]);const x=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];Pt(M,Tt({name:"copy"},()=>n,{get iconNode(){return x},children:(z,Q)=>{var C=rt(),l=$e(C);At(l,s,"default",{}),d(z,C)},$$slots:{default:!0}}))}function Mr(M,s){const n=St(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4"}]];Pt(M,Tt({name:"flame"},()=>n,{get iconNode(){return x},children:(z,Q)=>{var C=rt(),l=$e(C);At(l,s,"default",{}),d(z,C)},$$slots:{default:!0}}))}function Or(M,s){const n=St(s,["children","$$slots","$$events","$$legacy"]);const x=[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]];Pt(M,Tt({name:"grip-vertical"},()=>n,{get iconNode(){return x},children:(z,Q)=>{var C=rt(),l=$e(C);At(l,s,"default",{}),d(z,C)},$$slots:{default:!0}}))}function Ba(M,s){const n=St(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"}]];Pt(M,Tt({name:"layers"},()=>n,{get iconNode(){return x},children:(z,Q)=>{var C=rt(),l=$e(C);At(l,s,"default",{}),d(z,C)},$$slots:{default:!0}}))}function Wa(M,s){const n=St(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"m16 6 4 14"}],["path",{d:"M12 6v14"}],["path",{d:"M8 8v12"}],["path",{d:"M4 4v16"}]];Pt(M,Tt({name:"library"},()=>n,{get iconNode(){return x},children:(z,Q)=>{var C=rt(),l=$e(C);At(l,s,"default",{}),d(z,C)},$$slots:{default:!0}}))}function Ir(M,s){const n=St(s,["children","$$slots","$$events","$$legacy"]);const x=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}],["path",{d:"M21 21v.01"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}],["path",{d:"M3 12h.01"}],["path",{d:"M12 3h.01"}],["path",{d:"M12 16v.01"}],["path",{d:"M16 12h1"}],["path",{d:"M21 12v.01"}],["path",{d:"M12 21v-1"}]];Pt(M,Tt({name:"qr-code"},()=>n,{get iconNode(){return x},children:(z,Q)=>{var C=rt(),l=$e(C);At(l,s,"default",{}),d(z,C)},$$slots:{default:!0}}))}function Nr(M,s){const n=St(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];Pt(M,Tt({name:"rotate-ccw"},()=>n,{get iconNode(){return x},children:(z,Q)=>{var C=rt(),l=$e(C);At(l,s,"default",{}),d(z,C)},$$slots:{default:!0}}))}function Va(M,s){const n=St(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];Pt(M,Tt({name:"save"},()=>n,{get iconNode(){return x},children:(z,Q)=>{var C=rt(),l=$e(C);At(l,s,"default",{}),d(z,C)},$$slots:{default:!0}}))}function Rr(M,s){const n=St(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"m12.5 17-.5-1-.5 1h1z"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"9",cy:"12",r:"1"}]];Pt(M,Tt({name:"skull"},()=>n,{get iconNode(){return x},children:(z,Q)=>{var C=rt(),l=$e(C);At(l,s,"default",{}),d(z,C)},$$slots:{default:!0}}))}function Ga(M,s){const n=St(s,["children","$$slots","$$events","$$legacy"]);const x=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21"}]];Pt(M,Tt({name:"swords"},()=>n,{get iconNode(){return x},children:(z,Q)=>{var C=rt(),l=$e(C);At(l,s,"default",{}),d(z,C)},$$slots:{default:!0}}))}function Sr(M){let s=!1;return document.body&&(document.body.appendChild(M),s=!0),{destroy(){s&&M.parentNode&&M.parentNode.removeChild(M)}}}var Tr=b("<button> <!></button>"),Pr=b('<p class="text-xs text-slate-600 italic"> </p>'),Ar=b('<div class="text-xs leading-tight"><span class="text-red-400 font-bold"> </span> <span class="text-slate-400"> </span></div>'),Dr=b('<div class="space-y-1"></div>'),Hr=b('<div class="grid grid-cols-2 gap-2 max-h-[60vh] overflow-y-auto custom-scrollbar p-1"></div> <div class="mt-4 pt-3 border-t border-slate-800 flex flex-col gap-2"><div class="p-3 bg-slate-900/50 rounded-lg border border-slate-700/50 min-h-[60px]"><p class="text-[10px] text-slate-500 uppercase font-bold mb-1"> </p> <!></div> <div class="flex justify-end mt-2"><button class="bg-indigo-600 text-white px-4 py-2 rounded-xl font-bold text-sm shadow hover:bg-indigo-500 transition-colors w-full sm:w-auto"> </button></div></div>',1),Lr=b("<div><!></div>");function Ur(M,s){Yt(s,!0);const n=()=>it(Ft,"$t",x),[x,z]=aa();var Q=rt(),C=$e(Q);{var l=E=>{var L=Lr(),oe=t(L);{let te=ne(()=>n()("session.affliction_modal.title"));fr(oe,{get isOpen(){return s.isOpen},get onClose(){return s.onClose},get title(){return a(te)},maxWidth:"max-w-md",children:(Se,ge)=>{var J=Hr(),xe=$e(J);He(xe,21,()=>Object.keys(Ka),ot,(X,W)=>{const je=ne(()=>s.afflictions.includes(a(W)));var ze=Tr();ze.__click=()=>s.onToggle(a(W));var Me=t(ze),Ce=r(Me);{var tt=Oe=>{qa(Oe,{size:14,class:"text-red-400"})};I(Ce,Oe=>{a(je)&&Oe(tt)})}e(ze),f(Oe=>{Ie(ze,1,`flex items-center justify-between px-3 py-2 rounded-lg border text-xs font-bold transition-all ${a(je)?"bg-red-500/20 border-red-500 text-red-100":"bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-750"}`),i(Me,`${Oe??""} `)},[()=>n()(`character.afflictions.${a(W)}`)]),d(X,ze)}),e(xe);var q=r(xe,2),Z=t(q),le=t(Z),Te=t(le,!0);e(le);var et=r(le,2);{var re=X=>{var W=Pr(),je=t(W,!0);e(W),f(ze=>i(je,ze),[()=>n()("session.affliction_modal.none_selected")]),d(X,W)},de=X=>{var W=Dr();He(W,21,()=>s.afflictions,ot,(je,ze)=>{var Me=Ar(),Ce=t(Me),tt=t(Ce);e(Ce);var Oe=r(Ce,2),Ve=t(Oe,!0);e(Oe),e(Me),f((ct,Ke)=>{i(tt,`${ct??""}:`),i(Ve,Ke)},[()=>n()(`character.afflictions.${a(ze)}`),()=>n()(`sofww.afflictions.${a(ze).toLowerCase().replace(" ","_")}.effect`)]),d(je,Me)}),e(W),d(X,W)};I(et,X=>{s.afflictions.length===0?X(re):X(de,!1)})}e(Z);var fe=r(Z,2),ye=t(fe);ye.__click=function(...X){s.onClose?.apply(this,X)};var We=t(ye,!0);e(ye),e(fe),e(q),f((X,W)=>{i(Te,X),i(We,W)},[()=>n()("session.affliction_modal.effects"),()=>n()("session.affliction_modal.done")]),d(Se,J)},$$slots:{default:!0}})}e(L),or(L,te=>Sr?.(te)),d(E,L)};I(C,E=>{s.isOpen&&E(l)})}d(M,Q),ea(),z()}ta(["click"]);var qr=b('<div class="absolute top-0 right-0 bg-gradient-to-l from-yellow-600/20 to-transparent border-l border-b border-yellow-500/30 text-yellow-500 text-[9px] font-black tracking-widest px-3 py-1 rounded-bl-xl z-20 uppercase shadow-[0_0_10px_rgba(234,179,8,0.2)]"> </div>'),Fr=b('<div class="absolute inset-0 bg-red-950/40 animate-pulse z-0 pointer-events-none"></div>'),Br=b('<span class="text-[9px] font-black bg-red-950/40 text-red-500 px-1.5 py-0.5 rounded border border-red-900/30 uppercase tracking-wider flex-shrink-0"> </span>'),Wr=b("<button><!></button>"),Vr=b('<button class="w-7 h-7 flex items-center justify-center rounded bg-slate-800/50 text-slate-600 hover:text-red-400 hover:bg-red-950/30 border border-slate-700/50 transition-colors"><!></button>'),Gr=b('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),Qr=b('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"><div class="absolute inset-0 bg-gradient-to-b from-white/10 to-transparent"></div></div>'),Jr=b('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-20"><span class="text-[9px] font-black uppercase text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] tracking-widest leading-none mt-0.5"> </span></div>'),Zr=b('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-20"><span class="text-[9px] font-black uppercase text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] tracking-widest leading-none mt-0.5"> </span></div>'),Xr=b('<button class="text-[9px] bg-red-500/10 text-red-400 px-1.5 py-0.5 rounded border border-red-500/20 hover:bg-red-500/20 hover:border-red-500/40 transition-all flex items-center gap-1 group/btn"> <!></button>'),Kr=b('<div class="bg-slate-900/50 p-2 rounded border border-slate-800/50 text-center"><span class="text-[9px] text-slate-500 uppercase font-black block mb-0.5"> </span> <div class="text-white font-bold font-mono text-lg leading-none"> </div> <div> </div></div>'),Yr=b("<!> ",1),es=b('<div><div class="text-emerald-500 text-[10px] font-black uppercase mb-2 flex items-center gap-2"> <span class="h-px flex-1 bg-current opacity-20"></span></div> <div class="flex flex-wrap gap-2"></div></div>'),ts=b('<div class="text-sm bg-slate-900/30 p-2 rounded border border-slate-800/30"><span class="font-bold text-slate-300"> </span> <span class="text-slate-400 text-xs block mt-1 leading-relaxed"> </span></div>'),as=b('<div><div> <span class="h-px flex-1 bg-current opacity-20"></span></div> <div class="grid gap-2"></div></div>'),rs=b('<div class="border-t border-slate-800/50 bg-slate-950/30 p-4"><div class="mb-4"><div class="text-slate-500 font-bold uppercase text-[10px] mb-2 flex items-center gap-2"><span> </span> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-4 gap-2"></div></div> <div class="grid grid-cols-3 gap-4 mb-4"><div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div> <div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div> <div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div></div> <div class="space-y-4"><!> <!></div></div>'),ss=b('<div><!> <!> <div class="relative z-10 p-4"><div class="flex items-start gap-4 mb-3"><div class="relative flex-shrink-0"><div><!></div> <button><!></button></div> <div class="flex-1 min-w-0"><div class="flex justify-between items-start mb-1"><div class="flex flex-col min-w-0 mr-2"><div class="flex items-center gap-2"><h3> </h3> <!></div></div> <div class="flex gap-1 flex-shrink-0"><button class="w-7 h-7 flex items-center justify-center rounded bg-slate-800 text-slate-500 hover:text-white hover:bg-slate-700 border border-slate-700/50 transition-colors"><!></button> <!></div></div>  <div class="relative w-full h-3.5 sm:h-4 bg-slate-950 rounded-full border border-white/5 overflow-hidden shadow-inner group-hover:border-white/20 transition-all mb-2"><div></div> <!> <!> <!></div> <div class="flex flex-col sm:flex-row gap-3"><div class="flex items-start gap-1.5"><div class="flex flex-col items-center justify-between bg-slate-900 border border-slate-700 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm"><span class="text-[9px] font-black text-slate-400 uppercase tracking-wider mb-0.5"> </span> <span class="text-xl font-bold text-white font-mono leading-none"> </span></div> <div class="flex flex-col items-center justify-between bg-red-950/30 border border-red-900/50 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm relative group/dmg"><span class="text-[9px] font-black text-red-400 uppercase tracking-wider mb-0.5"> </span> <input type="number" class="w-full bg-transparent text-center text-white font-mono font-bold text-xl focus:outline-none p-0 leading-none placeholder-red-800"/> <span class="absolute -top-1 -right-1 flex h-2 w-2 opacity-0 group-hover/dmg:opacity-100 transition-opacity"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span></span></div> <div><span> </span> <div class="flex items-baseline gap-0.5 justify-center w-full"><input type="number" class="w-full bg-transparent text-right text-white font-mono font-bold text-xl focus:outline-none p-0 leading-none"/> <span class="text-[10px] text-slate-500 font-mono self-end mb-0.5 opacity-70"> </span></div></div></div> <div class="flex flex-wrap gap-1.5 items-center flex-1"><!> <button class="text-[10px] sm:text-[9px] font-bold text-slate-500 hover:text-indigo-400 px-1.5 py-0.5 rounded border border-transparent hover:border-indigo-500/30 hover:bg-indigo-500/10 transition-all flex items-center gap-1 whitespace-nowrap"><!> </button></div></div></div></div></div>  <!> <!></div>');function is(M,s){Yt(s,!0);const n=()=>it(Ft,"$t",x),[x,z]=aa();let Q=Rt(s,"updateEnemy",3,(m,w)=>{}),C=Rt(s,"updatePlayer",3,(m,w)=>{}),l=Rt(s,"removeFromCombat",3,m=>{}),E=ne(()=>s.entity.type==="player"),L=ne(()=>s.entity.damage||0),oe=ne(()=>s.entity.normalHealth||s.entity.health||10),te=ne(()=>s.entity.currentHealth??a(oe)),Se=ne(()=>a(L)>=a(te)),ge=ne(()=>a(L)>=a(te)/2&&!a(Se)),J=ne(()=>a(te)>0?Math.min(100,Math.max(0,a(L)/a(te)*100)):100),xe=Be(!1),q=Be(!1);$a(()=>{const m=s.entity.afflictions||[],w=m.includes("Incapacitated");if(a(Se)&&!w){const be={afflictions:[...m,"Incapacitated"]};s.entity.type==="player"?Z(be):Q()(s.entity.instanceId,be)}else if(!a(Se)&&w){const be={afflictions:m.filter(qe=>qe!=="Incapacitated")};s.entity.type==="player"?Z(be):Q()(s.entity.instanceId,be)}});function Z(m){if(s.entity.type!=="player")return;const w=ja.get(s.entity.id);w&&ja.set(s.entity.id,{...w,...m}),C()(s.entity.id,m),_a({id:s.entity.id,...m})}function le(m){const w=parseInt(m.target.value);if(isNaN(w))return;const be={damage:Math.max(0,w)};s.entity.type==="player"?Z(be):Q()(s.entity.instanceId,be)}function Te(m){const w=parseInt(m.target.value);if(isNaN(w))return;const ce=Math.max(0,w);let be=a(L);ce<a(L)&&(be=ce);const qe={currentHealth:ce,damage:be};s.entity.type==="player"?Z(qe):Q()(s.entity.instanceId,qe)}function et(){const m=!s.entity.acted;s.entity.type==="player"?Z({acted:m}):Q()(s.entity.instanceId,{acted:m})}function re(){s.entity.type==="player"&&Z({initiative:!s.entity.initiative})}function de(m){const w=s.entity.afflictions||[],be={afflictions:w.includes(m)?w.filter(qe=>qe!==m):[...w,m]};s.entity.type==="player"?Z(be):Q()(s.entity.instanceId,be)}var fe=ss(),ye=t(fe);{var We=m=>{var w=qr(),ce=t(w,!0);e(w),f(be=>i(ce,be),[()=>n()("session.combat_card.initiative")]),d(m,w)};I(ye,m=>{a(E)&&s.entity.initiative&&m(We)})}var X=r(ye,2);{var W=m=>{var w=Fr();d(m,w)};I(X,m=>{a(Se)&&m(W)})}var je=r(X,2),ze=t(je),Me=t(ze),Ce=t(Me),tt=t(Ce);Ua(tt,()=>s.entity.imageUrl,m=>{{let w=ne(()=>s.entity.name.charAt(0));ka(m,{get hash(){return s.entity.imageUrl},get alt(){return s.entity.name},size:"custom",get fallbackText(){return a(w)}})}}),e(Ce);var Oe=r(Ce,2);Oe.__click=et;var Ve=t(Oe);{var ct=m=>{Rr(m,{size:14,class:""})},Ke=m=>{var w=rt(),ce=$e(w);{var be=ft=>{qa(ft,{size:14})},qe=ft=>{Ga(ft,{size:14})};I(ce,ft=>{s.entity.acted?ft(be):ft(qe,!1)},!0)}d(m,w)};I(Ve,m=>{a(Se)?m(ct):m(Ke,!1)})}e(Oe),e(Me);var wt=r(Me,2),lt=t(wt),U=t(lt),se=t(U),pe=t(se),Le=t(pe,!0);e(pe);var Ge=r(pe,2);{var Pe=m=>{var w=Br(),ce=t(w);e(w),f(()=>i(ce,`Dif ${s.entity.difficulty??""}`)),d(m,w)};I(Ge,m=>{a(E)||m(Pe)})}e(se),e(U);var B=r(U,2),me=t(B);me.__click=()=>O(xe,!a(xe));var D=t(me);{var K=m=>{Er(m,{size:14})},ve=m=>{Cr(m,{size:14})};I(D,m=>{a(xe)?m(K):m(ve,!1)})}e(me);var ue=r(me,2);{var _e=m=>{var w=Wr();w.__click=re;var ce=t(w);Mr(ce,{size:14}),e(w),f(be=>{Ie(w,1,`w-7 h-7 flex items-center justify-center rounded transition-all ${s.entity.initiative?"bg-yellow-500 text-yellow-950 shadow-lg shadow-yellow-500/20":"bg-slate-800 text-slate-500 hover:text-white hover:bg-slate-700"}`),Ee(w,"title",be)},[()=>n()("session.combat_card.initiative")]),d(m,w)},Ze=m=>{var w=Vr();w.__click=()=>l()(s.entity.instanceId);var ce=t(w);va(ce,{size:14}),e(w),d(m,w)};I(ue,m=>{a(E)?m(_e):m(Ze,!1)})}e(B),e(lt);var Ne=r(lt,2),k=t(Ne),$=r(k,2);{var ie=m=>{var w=Gr();f(()=>{Ie(w,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10
                            ${a(Se)?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":a(J)>=80?"bg-gradient-to-r from-red-600 to-rose-500":a(ge)?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),Za(w,`width: ${a(J)??""}%`)}),d(m,w)};I($,m=>{a(J)>0&&m(ie)})}var we=r($,2);{var Qe=m=>{var w=Qr();d(m,w)};I(we,m=>{a(L)===0&&m(Qe)})}var Ye=r(we,2);{var Ue=m=>{var w=Jr(),ce=t(w),be=t(ce,!0);e(ce),e(w),f(qe=>i(be,qe),[()=>n()("session.combat_card.incapacitated")]),d(m,w)},ut=m=>{var w=rt(),ce=$e(w);{var be=qe=>{var ft=Zr(),Wt=t(ft),Vt=t(Wt,!0);e(Wt),e(ft),f(o=>i(Vt,o),[()=>n()("session.combat_card.injured")]),d(qe,ft)};I(ce,qe=>{a(ge)&&qe(be)},!0)}d(m,w)};I(Ye,m=>{a(Se)?m(Ue):m(ut,!1)})}e(Ne);var Dt=r(Ne,2),jt=t(Dt),kt=t(jt),mt=t(kt),Mt=t(mt,!0);e(mt);var Ht=r(mt,2),$t=t(Ht,!0);e(Ht),e(kt);var zt=r(kt,2),Ae=t(zt),bt=t(Ae,!0);e(Ae);var Xe=r(Ae,2);It(Xe),Xe.__input=le,Qt(2),e(zt);var st=r(zt,2),xt=t(st),Ct=t(xt,!0);e(xt);var _t=r(xt,2),pt=t(_t);It(pt),pt.__input=Te;var Lt=r(pt,2),Bt=t(Lt);e(Lt),e(_t),e(st),e(jt);var Ut=r(jt,2),Jt=t(Ut);He(Jt,17,()=>s.entity.afflictions||[],ot,(m,w)=>{var ce=Xr();ce.__click=()=>de(a(w));var be=t(ce),qe=r(be);va(qe,{size:8,class:"opacity-50 group-hover/btn:opacity-100"}),e(ce),f(()=>i(be,`${a(w)??""} `)),d(m,ce)});var Gt=r(Jt,2);Gt.__click=()=>O(q,!0);var oa=t(Gt);Kt(oa,{size:10});var ra=r(oa);e(Gt),e(Ut),e(Dt),e(wt),e(ze),e(je);var Zt=r(je,2);{var sa=m=>{var w=rs(),ce=t(w),be=t(ce),qe=t(be),ft=t(qe,!0);e(qe),Qt(2),e(be);var Wt=r(be,2);He(Wt,20,()=>["str","agi","int","wil"],ot,(S,y)=>{var G=Kr(),ae=t(G),ke=t(ae,!0);e(ae);var he=r(ae,2),Je=t(he,!0);e(he);var Fe=r(he,2),nt=t(Fe);e(Fe),e(G),f(()=>{i(ke,y),i(Je,s.entity.stats?.[y]??s.entity.attributes?.[y]??10),Ie(Fe,1,`text-[9px] font-bold ${(s.entity.stats?.[y]??s.entity.attributes?.[y]??10)-10>=0?"text-emerald-500":"text-red-500"}`),i(nt,`${(s.entity.stats?.[y]??s.entity.attributes?.[y]??10)-10>=0?"+":""}${(s.entity.stats?.[y]??s.entity.attributes?.[y]??10)-10}`)}),d(S,G)}),e(Wt),e(ce);var Vt=r(ce,2),o=t(Vt),v=t(o),c=t(v,!0);e(v);var h=r(v,2),V=t(h,!0);e(h),e(o);var T=r(o,2),g=t(T),u=t(g,!0);e(g);var _=r(g,2),p=t(_,!0);e(_),e(T);var F=r(T,2),H=t(F),N=t(H,!0);e(H);var j=r(H,2),Y=t(j,!0);e(j),e(F),e(Vt);var P=r(Vt,2),R=t(P);{var A=S=>{var y=es(),G=t(y),ae=t(G);Qt(),e(G);var ke=r(G,2);He(ke,21,()=>s.entity.senses,ot,(he,Je)=>{const Fe=ne(()=>{const[gt,ht]=a(Je).split(":");return{key:gt,val:ht}}),nt=ne(()=>n()(`character.senses.list.${a(Fe).key}`)+(a(Fe).val?` ${a(Fe).val}`:"")),dt=ne(()=>n()(`character.senses.descriptions.${a(Fe).key}`));lr(he,{get text(){return a(dt)},class:"text-xs bg-emerald-950/30 text-emerald-200 px-3 py-1.5 rounded border border-emerald-900/50 font-bold flex items-center gap-2 cursor-help whitespace-nowrap",children:(gt,ht)=>{var De=Yr(),Re=$e(De);Aa(Re,{size:12,class:"text-emerald-500 flex-shrink-0"});var yt=r(Re);f(()=>i(yt,` ${a(nt)??""}`)),d(gt,De)},$$slots:{default:!0}})}),e(ke),e(y),f(he=>i(ae,`${he??""} `),[()=>n()("character.senses.title")]),d(S,y)};I(R,S=>{s.entity.senses&&s.entity.senses.length>0&&S(A)})}var ee=r(R,2);He(ee,16,()=>[{key:"traits",label:"Traços",color:"text-amber-500"},{key:"actions",label:"Ações",color:"text-red-400"},{key:"reactions",label:"Reações",color:"text-indigo-400"},{key:"end_of_round",label:"Fim da Rodada",color:"text-emerald-400"}],ot,(S,y)=>{var G=rt(),ae=$e(G);{var ke=he=>{var Je=as(),Fe=t(Je),nt=t(Fe);Qt(),e(Fe);var dt=r(Fe,2);He(dt,21,()=>s.entity[y.key],ot,(gt,ht)=>{var De=ts(),Re=t(De),yt=t(Re,!0);e(Re);var vt=r(Re,2),qt=t(vt,!0);e(vt),e(De),f(()=>{i(yt,a(ht).name),i(qt,a(ht).description||a(ht).effect)}),d(gt,De)}),e(dt),e(Je),f(()=>{Ie(Fe,1,`${y.color??""} text-[10px] font-black uppercase mb-2 flex items-center gap-2`),i(nt,`${y.label??""} `)}),d(he,Je)};I(ae,he=>{s.entity[y.key]&&s.entity[y.key].length>0&&he(ke)})}d(S,G)}),e(P),e(w),f((S,y,G,ae)=>{i(ft,S),i(c,y),i(V,s.entity.size||1),i(u,G),i(p,s.entity.speed||10),i(N,ae),i(Y,s.entity.defense||10)},[()=>n()("session.combat_card.attributes"),()=>n()("session.combat_card.size"),()=>n()("session.combat_card.speed"),()=>n()("session.combat_card.defense")]),d(m,w)};I(Zt,m=>{a(xe)&&m(sa)})}var la=r(Zt,2);{let m=ne(()=>s.entity.afflictions||[]);Ur(la,{get isOpen(){return a(q)},onClose:()=>O(q,!1),get afflictions(){return a(m)},onToggle:de})}e(fe),f((m,w,ce,be,qe)=>{Ie(fe,1,`group relative overflow-hidden transition-all duration-300 rounded-2xl border ${a(E)?"bg-slate-900/80 border-indigo-500/30 hover:border-indigo-500/50 hover:shadow-indigo-900/20":"bg-slate-950/80 border-red-900/30 hover:border-red-800/50 hover:shadow-red-900/10"} shadow-lg backdrop-blur-sm`),Ie(Ce,1,`w-14 h-14 rounded-2xl overflow-hidden border-2 shadow-xl transition-transform group-hover:scale-105 ${a(Se)?"border-red-600 grayscale brightness-50":a(E)?"border-indigo-500/50":"border-red-900/50"}`),Ie(Oe,1,`absolute -bottom-2 -right-2 w-7 h-7 rounded-lg flex items-center justify-center border shadow-lg transition-all hover:scale-110 z-20 ${s.entity.acted?"bg-slate-800 border-slate-600 text-slate-500":a(E)?"bg-indigo-600 border-indigo-400 text-white":"bg-red-600 border-red-400 text-white"}`),Ee(Oe,"title",m),Ie(pe,1,`text-base font-bold truncate leading-snug ${a(E)?"text-white":"text-red-100 font-serif tracking-wide"}`),i(Le,s.entity.name),Ie(k,1,`absolute inset-0 w-full ${a(L)===0?"bg-emerald-900/20":"bg-slate-900/50"}`),i(Mt,w),i($t,s.entity.defense||10),i(bt,ce),ya(Xe,a(L)),Ie(st,1,`flex flex-col items-center justify-between border rounded-lg p-1.5 w-[5.5rem] h-[3.75rem] shadow-sm relative transition-colors ${a(Se)?"bg-red-950/50 border-red-500":a(ge)?"bg-orange-950/30 border-orange-500":"bg-emerald-950/30 border-emerald-900/50"}`),Ie(xt,1,`text-[9px] font-black uppercase tracking-wider mb-0.5 ${a(Se)?"text-red-400":a(ge)?"text-orange-400":"text-emerald-400"}`),i(Ct,be),ya(pt,a(te)),i(Bt,`/${a(oe)??""}`),i(ra,` ${qe??""}`)},[()=>s.entity.acted?n()("session.combat_card.acted"):n()("session.combat_card.act"),()=>n()("session.combat_card.defense"),()=>n()("session.combat_card.damage"),()=>n()("session.combat_card.health"),()=>n()("session.combat_card.add_affliction")]),d(M,fe),ea(),z()}ta(["click","input"]);function ns(M,{from:s,to:n},x={}){var{delay:z=0,duration:Q=de=>Math.sqrt(de)*120,easing:C=pr}=x,l=getComputedStyle(M),E=l.transform==="none"?"":l.transform,[L,oe]=l.transformOrigin.split(" ").map(parseFloat);L/=M.clientWidth,oe/=M.clientHeight;var te=os(M),Se=M.clientWidth/n.width/te,ge=M.clientHeight/n.height/te,J=s.left+s.width*L,xe=s.top+s.height*oe,q=n.left+n.width*L,Z=n.top+n.height*oe,le=(J-q)*Se,Te=(xe-Z)*ge,et=s.width/n.width,re=s.height/n.height;return{delay:z,duration:typeof Q=="function"?Q(Math.sqrt(le*le+Te*Te)):Q,easing:C,css:(de,fe)=>{var ye=fe*le,We=fe*Te,X=de+fe*et,W=de+fe*re;return`transform: ${E} translate(${ye}px, ${We}px) scale(${X}, ${W});`}}}function os(M){if("currentCSSZoom"in M)return M.currentCSSZoom;for(var s=M,n=1;s!==null;)n*=+getComputedStyle(s).zoom,s=s.parentElement;return n}function ls(M,s=1,n=0){const x=[];let z=0;for(let E=0;E<s;E++){const L=Math.floor(Math.random()*M)+1;x.push(L),z+=L}let Q=`${s}d${M}`,C=[],l=0;if(n!==0)if(M===20){const E=Math.abs(n);for(let oe=0;oe<E;oe++)C.push(Math.floor(Math.random()*6)+1);const L=Math.max(...C);n>0?(l=L,z+=L,Q+=` + ${L} [Boon]`):(l=-L,z-=L,Q+=` - ${L} [Bane]`)}else l=n,z+=n,Q+=n>0?` + ${n}`:` - ${Math.abs(n)}`;return{total:z,results:x,bonusRolls:C,formula:Q,crit:M===20&&x.includes(20),modifierTotal:l}}var ds=b('<span class="text-[10px] bg-slate-800 text-slate-400 px-1.5 py-0.5 rounded-full"> </span>'),vs=b('<div class="p-3 rounded-xl border border-amber-500/30 bg-amber-500/5 flex items-center gap-3 transition-all hover:bg-amber-500/10 shadow-sm"><div class="flex-1"><div class="font-bold text-sm text-amber-200 leading-none"> </div> <div class="text-[9px] text-amber-500/60 font-medium mt-1 uppercase tracking-tighter"> </div></div> <div class="flex items-center gap-1.5"><button class="p-2 rounded-lg bg-green-600/20 text-green-400 hover:bg-green-600 hover:text-white transition-all shadow-lg active:scale-90" title="Aprovar"><!></button> <button class="p-2 rounded-lg bg-red-600/20 text-red-400 hover:bg-red-600 hover:text-white transition-all shadow-lg active:scale-90" title="Recusar"><!></button></div></div>'),cs=b('<div class="space-y-2 animate-in fade-in slide-in-from-top-2"><div class="flex items-center gap-2 px-1"><div class="w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"></div> <span class="text-[10px] font-black text-amber-500 uppercase tracking-wider"> </span></div> <!> <div class="h-px bg-slate-800/50 mx-2 my-2"></div></div>'),us=b('<span class="text-indigo-400 font-bold uppercase tracking-tighter mr-1"> </span>'),bs=b('<div><div></div> <div class="flex-1"><div> </div> <div class="text-[10px] text-slate-500 font-medium"><!> </div></div> <div class="flex items-center gap-1"><button><!></button> <button class="text-slate-600 hover:text-red-400 p-1.5 hover:bg-red-400/10 rounded-lg transition-all"><!></button></div></div>'),xs=b('<div class="text-xs text-slate-600 italic p-6 border-2 border-dashed border-slate-800 rounded-xl text-center"> </div>'),ms=b('<button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-black uppercase text-[10px] tracking-[0.2em] shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2"><!> </button> <p class="text-[9px] text-slate-600 text-center font-bold uppercase tracking-tighter"> </p>',1),_s=b('<div class="flex justify-center p-3 bg-white rounded-xl mb-2 animate-in zoom-in-95 duration-200 shadow-xl mx-auto w-32 h-32"><img class="w-24 h-24"/></div>'),fs=b('<div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-green-500 text-white text-[10px] font-bold rounded shadow-lg animate-in fade-in slide-in-from-bottom-1 whitespace-nowrap"><!> </div>'),ps=b('<div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-1"><!> </span></div> <button class="text-slate-500 hover:text-white transition-colors p-1"><!></button></div> <!> <div class="relative group"><div class="flex gap-1"><div class="flex-1 bg-slate-950 border border-slate-800 rounded-lg p-2 text-[10px] text-slate-400 font-mono truncate cursor-pointer hover:border-slate-700 transition-colors flex items-center"> </div> <button class="bg-indigo-600 hover:bg-indigo-500 text-white p-2 rounded-lg transition-all active:scale-95 shadow-lg shadow-indigo-900/20 relative"><!> <!></button></div></div> <button class="w-full text-[9px] text-slate-600 hover:text-red-400 font-bold uppercase tracking-widest transition-colors mt-1"> </button>',1),gs=b('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 group hover:border-indigo-500/30 transition-all"><div class="truncate flex-1 flex items-center gap-2"><!> <div><div class="text-sm font-bold text-white truncate"> </div> <div class="text-[10px] text-slate-500"> </div></div></div> <button class="text-slate-500 hover:text-indigo-400 p-1 ml-2 bg-slate-900 rounded border border-slate-800"><!></button></div>'),hs=b('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),ys=b("<!> <!>",1),ws=b('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 group hover:border-indigo-500/30 transition-all"><div class="truncate flex-1"><div class="text-sm font-bold text-white truncate"> </div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-slate-500 hover:text-indigo-400 p-1 ml-2 bg-slate-900 rounded border border-slate-800"><!></button></div>'),ks=b('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),$s=b("<!> <!>",1),zs=b('<button class="bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 shadow-lg shadow-green-900/20"><!> </button>'),Cs=b('<div class="flex items-center gap-4"><button class="p-2 hover:bg-slate-700 rounded text-slate-400"><!></button> <div class="text-center"><div class="text-[10px] font-bold text-slate-500 uppercase"> </div><div class="text-3xl font-mono font-bold text-white leading-none"> </div></div> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded font-bold flex items-center gap-2"><!> </button> <div class="h-8 w-px bg-slate-700 mx-2"></div> <button class="text-red-400 hover:text-red-300 text-xs font-bold px-3 py-2 border border-red-900/30 rounded bg-red-900/10"> </button></div>'),Es=b("<div><!></div>"),js=b('<div class="text-center text-slate-500 italic py-10"> </div>'),Ms=b('<div class="text-sm"><span class="font-bold text-yellow-500"> </span> <span class="text-slate-300"> </span></div>'),Os=b('<div class="bg-slate-900 border border-slate-700 rounded-lg p-4"><h4 class="font-bold text-white mb-2 pb-2 border-b border-slate-800 flex items-center gap-2"><!> </h4> <div class="space-y-2"></div></div>'),Is=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" aria-label="Fechar" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-lg border border-slate-700 shadow-2xl p-6 relative" role="dialog" aria-modal="true"><div class="flex items-center gap-3 mb-6"><div class="p-3 bg-yellow-900/20 rounded-full border border-yellow-500/30 text-yellow-500"><!></div> <div><h3 class="font-bold text-white text-xl"> </h3> <p class="text-slate-400 text-sm"> </p></div></div> <div class="space-y-4 mb-8 max-h-[60vh] overflow-y-auto custom-scrollbar"></div> <div class="flex gap-3"><button class="flex-1 py-1.5 rounded bg-slate-700 hover:bg-slate-600 text-white font-bold text-sm"> </button> <button class="flex-1 py-1.5 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold text-sm"> </button></div></div></div>'),Ns=b('<button class="w-full text-left flex items-center gap-3 p-3 bg-slate-900 border border-slate-700 hover:border-indigo-500 hover:bg-indigo-500/10 rounded-xl group transition-all"><div class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center text-sm font-bold text-slate-500 group-hover:text-indigo-400 border border-slate-700 group-hover:border-indigo-500/30"> </div> <div class="flex-1"><div class="font-bold text-white group-hover:text-indigo-300"> </div> <div class="text-[10px] text-slate-500"> </div></div> <div class="bg-slate-800 p-2 rounded-lg text-slate-500 group-hover:bg-indigo-500 group-hover:text-white transition-colors"><!></div></button>'),Rs=b('<div class="text-center py-8"><div class="w-12 h-12 bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-500"><!></div> <p class="text-slate-500 text-sm font-bold"> </p> <p class="text-[10px] text-slate-600 mt-1"> </p></div>'),Ss=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" aria-label="Fechar" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-md border border-slate-700 shadow-2xl p-6" role="dialog" aria-modal="true"><div class="flex justify-between items-center mb-6"><div><h3 class="font-bold text-white text-lg"> </h3> <p class="text-xs text-slate-400"> </p></div> <button class="bg-slate-700 hover:bg-slate-600 p-2 rounded-lg text-white transition-colors"><!></button></div> <div class="space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2"><!> <!></div></div></div>'),Ts=b('<div class="grid grid-cols-1 lg:grid-cols-4 gap-6 h-full relative"><div class="space-y-6"><div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex flex-col gap-4"><div class="flex justify-between items-center bg-slate-950/50 p-2 rounded-lg border border-slate-800"><h3 class="text-xs font-black text-slate-500 uppercase tracking-widest flex items-center gap-2"><!> <!></h3> <button class="text-[10px] bg-slate-800 hover:bg-slate-700 text-white px-2.5 py-1.5 rounded-md font-bold transition-all border border-slate-700 active:scale-95"> </button></div> <!> <div class="space-y-2 flex-1 overflow-y-auto max-h-[300px] custom-scrollbar pr-1"><div class="space-y-2"><!> <!></div></div> <div class="pt-4 border-t border-slate-800 space-y-3"><!></div></div> <div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex flex-col h-[400px]"><div class="flex items-center gap-2 mb-3 bg-slate-950 p-1 rounded-lg border border-slate-800"><button><!> </button> <button><!> </button></div> <div class="flex-1 overflow-y-auto pr-1 custom-scrollbar space-y-2"><!></div></div></div> <div class="lg:col-span-2 space-y-4"><div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex justify-between items-center shadow-lg sticky top-0 z-20"><div class="flex items-center gap-4"><!></div></div> <div class="space-y-3 pb-20"><!> <!></div></div> <div class="hidden lg:flex flex-col gap-4"></div></div> <!> <!> <!> <!>',1);function Ps(M,s){Yt(s,!0);const n=()=>it(sr,"$liveCharacters",l),x=()=>it(Ft,"$t",l),z=()=>it(za,"$liveEnemies",l),Q=()=>it(Ra,"$liveEncounters",l),C=()=>it(na,"$isHistoryOpen",l),[l,E]=aa();let L=Be(!1),oe=Be(!1),te=Be(!1);const Se={active:!1,round:1};let ge=Be("enemies"),J=Be(!1),xe=Be(Xt([])),q=Be(Xt({isOpen:!1,title:"",message:"",onConfirm:()=>{}}));Ea(()=>{if(s.campaign?.id){Ya(s.campaign.id,!0);const o=ha(Ft)("common.labels.master");Ma.update(c=>({...c,campaignId:s.campaign.id,name:s.campaign.gmName||o}));const v=setInterval(()=>{const c=Et.get(s.campaign.id)||s.campaign,h=ha(Ft)("common.labels.master");wa(s.campaign.id,{name:c.name,gmName:c.gmName||h})},3e4);return()=>{clearInterval(v),er(),Ma.update(c=>({...c,campaignId:null}))}}});const Z=ne(()=>typeof window<"u"?`${window.location.origin}${Pa("/campaigns/[id]/invite",{id:s.campaign?.id})}`:"");function le(){a(Z)&&(navigator.clipboard.writeText(a(Z)),O(oe,!0),setTimeout(()=>{O(oe,!1)},2e3))}let Te=ne(()=>s.campaign?.sessionRoster||[]),et=ne(()=>s.campaign?.combat||Se),re=ne(()=>s.campaign?.activeEnemies||[]),de=ne(()=>s.campaign?.members||[]),fe=ne(()=>Array.from(new Set([...a(Te),...a(de).map(v=>v.id)])).map(v=>{const c=n().find(V=>V.id===v),h=a(de).find(V=>V.id===v);return c&&h?{...c,...h,lastUpdate:h.lastUpdate}:c||h}).filter(Boolean)),ye=ne(()=>a(fe).filter(o=>!o.campaignApproval||o.campaignApproval==="approved")),We=ne(()=>a(fe).filter(o=>o.campaignApproval==="pending")),X=ne(()=>n().filter(o=>!a(Te).includes(o.id)&&!a(de).some(v=>v.id===o.id)));function W(o){if(!s.campaign?.id)return;const c={...Et.get(s.campaign.id)||s.campaign,...o};Et.set(s.campaign.id,c),o.combat&&ma(s.campaign.id,o.combat),(o.name||o.gmName)&&wa(s.campaign.id,{name:c.name,gmName:c.gmName})}function je(o){if(a(Te).includes(o)){const v=a(Te).filter(c=>c!==o);W({sessionRoster:v})}else{const v=[...a(Te),o];W({sessionRoster:v})}}function ze(o){Pe(o,{campaignApproval:"approved"}),_a({id:o,campaignApproval:"approved"})}function Me(o){_a({id:o,campaignApproval:"rejected",campaignId:null});const c=((Et.get(s.campaign.id)||s.campaign).members||[]).filter(h=>h.id!==o);W({members:c})}function Ce(o){const v=a(fe).find(c=>c.id===o);O(q,{isOpen:!0,title:x()("session.players.remove_title"),message:x()("session.players.remove_message",{values:{name:v?.name||"este personagem"}}),onConfirm:()=>{const c=Et.get(s.campaign.id)||s.campaign;_a({id:o,campaignId:null});const h=(c.sessionRoster||[]).filter(g=>g!==o),V=(c.members||[]).filter(g=>g.id!==o),T=(c.activeEnemies||[]).filter(g=>g.type!=="player"||g.id!==o);W({sessionRoster:h,members:V,activeEnemies:T}),a(q).isOpen=!1}},!0)}function tt(o){const c=(Et.get(s.campaign.id)||s.campaign).activeEnemies||[],h={...o,instanceId:xa(),damage:0,currentHealth:o.health,afflictions:[],acted:!1,initiative:!1};W({activeEnemies:[...c,h]})}function Oe(o){const c=(Et.get(s.campaign.id)||s.campaign).activeEnemies||[];let h=[];o.enemies.forEach(V=>{const T=z().find(g=>g.id===V.enemyId);if(T)for(let g=0;g<V.count;g++)h.push({...T,instanceId:xa(),damage:0,currentHealth:T.health,afflictions:[],acted:!1,initiative:!1})}),W({activeEnemies:[...c,...h]})}function Ve(){W({combat:{active:!0,round:1}}),ma(s.campaign.id,{active:!0,round:1})}function ct(){const o=a(re).filter(v=>v.damage<(v.currentHealth??v.health)&&v.endOfRound&&v.endOfRound.length>0).map(v=>({name:v.name,effects:v.endOfRound}));if(o.length>0){O(xe,o,!0),O(J,!0);return}Ke()}function Ke(){const o=Et.get(s.campaign.id)||s.campaign,v=(o.combat?.round||1)+1,c=(o.activeEnemies||[]).map(h=>({...h,acted:!1}));W({combat:{...o.combat,round:v},activeEnemies:c}),ma(s.campaign.id,{active:!0,round:v}),O(J,!1)}function wt(o){W({combat:{active:!1,round:1}}),ma(s.campaign.id,{active:!1,round:1})}function lt(o){const v=Et.get(s.campaign.id)||s.campaign;W({activeEnemies:(v.activeEnemies||[]).filter(c=>c.instanceId!==o)})}function U(o,v){const c=Et.get(s.campaign.id)||s.campaign;W({activeEnemies:(c.activeEnemies||[]).map(h=>h.instanceId===o?{...h,...v}:h)})}function se(){const o=Et.get(s.campaign.id)||s.campaign,v=o.combat?.round||1;v>1&&W({combat:{...o.combat,round:v-1}})}let pe=Be(Xt(Date.now()));Ea(()=>{const o=setInterval(()=>{O(pe,Date.now(),!0)},1e4);return()=>clearInterval(o)});let Le=ne(()=>(()=>{const o=a(ye).filter(g=>a(Te).includes(g.id)),v=o.filter(g=>g&&g.initiative).map(g=>({...g,type:"player"})),c=a(re).map(g=>({...g,type:"enemy"})),h=o.filter(g=>g&&!g.initiative).map(g=>({...g,type:"player"})),V=[...v,...c,...h],T=new Set;return V.filter(g=>{if(!g)return!1;const u=g.type==="player"?g.id:g.instanceId;return T.has(u)?!1:(T.add(u),!0)})})());function Ge(o){return o.lastUpdate?a(pe)-o.lastUpdate<6e4:!1}function Pe(o,v){const c=Et.get(s.campaign.id)||s.campaign,h=c.members||[],V=h.findIndex(p=>p.id===o);let T=h;V!==-1&&(T=[...h],T[V]={...T[V],...v});const g=c.activeEnemies||[],u=g.findIndex(p=>p.id===o&&p.type==="player");let _=g;u!==-1&&(_=[...g],_[u]={..._[u],...v}),W({members:T,activeEnemies:_})}var B=Ts(),me=$e(B),D=t(me),K=t(D),ve=t(K),ue=t(ve),_e=t(ue);Sa(_e,{size:14,class:"text-indigo-500"});var Ze=r(_e),Ne=r(Ze);{var k=o=>{var v=ds(),c=t(v,!0);e(v),f(()=>i(c,a(ye).length)),d(o,v)};I(Ne,o=>{a(ye).length>0&&o(k)})}e(ue);var $=r(ue,2);$.__click=()=>O(L,!a(L));var ie=t($,!0);e($),e(ve);var we=r(ve,2);{var Qe=o=>{var v=cs(),c=t(v),h=r(t(c),2),V=t(h);e(h),e(c);var T=r(c,2);He(T,17,()=>a(We),g=>g.id,(g,u)=>{var _=vs(),p=t(_),F=t(p),H=t(F,!0);e(F);var N=r(F,2),j=t(N,!0);e(N),e(p);var Y=r(p,2),P=t(Y);P.__click=()=>ze(a(u).id);var R=t(P);Ia(R,{size:14}),e(P);var A=r(P,2);A.__click=()=>Me(a(u).id);var ee=t(A);ca(ee,{size:14}),e(A),e(Y),e(_),f(S=>{i(H,a(u).name),i(j,S)},[()=>x()("session.players.new_request")]),d(g,_)}),Qt(2),e(v),f(g=>i(V,`${g??""} (${a(We).length??""})`),[()=>x()("session.players.waiting_approval")]),d(o,v)};I(we,o=>{a(We).length>0&&o(Qe)})}var Ye=r(we,2),Ue=t(Ye),ut=t(Ue);He(ut,17,()=>a(ye),o=>o.id,(o,v)=>{const c=ne(()=>Ge(a(v))),h=ne(()=>a(Te).includes(a(v).id));var V=bs(),T=t(V),g=r(T,2),u=t(g),_=t(u,!0);e(u);var p=r(u,2),F=t(p);{var H=y=>{var G=us(),ae=t(G,!0);e(G),f(ke=>i(ae,ke),[()=>x()("common.labels.session")]),d(y,G)};I(F,y=>{a(h)&&y(H)})}var N=r(F);e(p),e(g);var j=r(g,2),Y=t(j);Y.__click=()=>je(a(v).id);var P=t(Y);{var R=y=>{dr(y,{size:14})},A=y=>{Kt(y,{size:14})};I(P,y=>{a(h)?y(R):y(A,!1)})}e(Y);var ee=r(Y,2);ee.__click=()=>Ce(a(v).id);var S=t(ee);ca(S,{size:14}),e(ee),e(j),e(V),f((y,G,ae)=>{Ie(V,1,`p-2.5 rounded-xl border flex items-center gap-3 transition-all ${a(c)?"bg-indigo-900/10 border-indigo-500/20":"bg-slate-900/50 border-slate-800"} ${a(c)||a(h)?"opacity-100":"opacity-40"} hover:border-indigo-500/40 group shadow-sm`),Ie(T,1,`w-2 h-2 rounded-full ${a(c)?"bg-green-500 shadow-[0_0_8px_rgba(74,222,128,0.4)]":"bg-slate-700"}`),Ie(u,1,`font-bold text-sm ${a(c)?"text-white":"text-slate-500"} group-hover:text-indigo-300 transition-colors`),i(_,a(v).name),i(N,` ${y??""} ${a(v).level??""} • ${a(v).ancestry??""}`),Ie(Y,1,`p-1.5 rounded-lg transition-all ${a(h)?"text-amber-400 hover:bg-amber-400/10":"text-slate-500 hover:text-indigo-400 hover:bg-indigo-400/10"}`),Ee(Y,"title",G),Ee(ee,"title",ae)},[()=>x()("common.labels.level"),()=>a(h)?x()("session.players.remove_from_session"):x()("session.players.add_to_session"),()=>x()("session.players.kick_from_campaign")]),d(o,V)});var Dt=r(ut,2);{var jt=o=>{var v=xs(),c=t(v,!0);e(v),f(h=>i(c,h),[()=>x()("session.players.none")]),d(o,v)};I(Dt,o=>{a(ye).length===0&&o(jt)})}e(Ue),e(Ye);var kt=r(Ye,2),mt=t(kt);{var Mt=o=>{var v=ms(),c=$e(v);c.__click=()=>W({isPublished:!0});var h=t(c);yr(h,{size:14});var V=r(h);e(c);var T=r(c,2),g=t(T,!0);e(T),f((u,_)=>{i(V,` ${u??""}`),i(g,_)},[()=>x()("session.publish.publish_session"),()=>x()("session.publish.make_visible")]),d(o,v)},Ht=o=>{var v=ps(),c=$e(v),h=t(c),V=t(h),T=t(V);Ta(T,{size:10,class:"animate-pulse"});var g=r(T);e(V),e(h);var u=r(h,2);u.__click=()=>O(te,!a(te));var _=t(u);Ir(_,{size:14}),e(u),e(c);var p=r(c,2);{var F=G=>{var ae=_s(),ke=t(ae);e(ae),f((he,Je)=>{Ee(ke,"src",he),Ee(ke,"alt",Je)},[()=>`https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${encodeURIComponent(a(Z))}`,()=>x()("session.publish.qr_alt")]),d(G,ae)};I(p,G=>{a(te)&&G(F)})}var H=r(p,2),N=t(H),j=t(N);j.__click=le;var Y=t(j,!0);e(j);var P=r(j,2);P.__click=le;var R=t(P);{var A=G=>{var ae=fs(),ke=t(ae);Ia(ke,{size:10,class:"inline mr-1"});var he=r(ke);e(ae),f(Je=>i(he,` ${Je??""}`),[()=>x()("common.buttons.copied")]),d(G,ae)};I(R,G=>{a(oe)&&G(A)})}var ee=r(R,2);jr(ee,{size:14}),e(P),e(N),e(H);var S=r(H,2);S.__click=()=>W({isPublished:!1});var y=t(S,!0);e(S),f((G,ae,ke,he)=>{i(g,` ${G??""}`),Ee(u,"title",ae),i(Y,a(Z)),Ee(P,"aria-label",ke),i(y,he)},[()=>x()("session.publish.public_session"),()=>x()("session.publish.qr_code"),()=>x()("session.publish.copy_link"),()=>x()("session.publish.remove_public")]),d(o,v)};I(mt,o=>{s.campaign?.isPublished?o(Ht,!1):o(Mt)})}e(kt),e(K);var $t=r(K,2),zt=t($t),Ae=t(zt);Ae.__click=()=>O(ge,"enemies");var bt=t(Ae);fa(bt,{size:14});var Xe=r(bt);e(Ae);var st=r(Ae,2);st.__click=()=>O(ge,"encounters");var xt=t(st);Ba(xt,{size:14});var Ct=r(xt);e(st),e(zt);var _t=r(zt,2),pt=t(_t);{var Lt=o=>{var v=ys(),c=$e(v);He(c,1,z,T=>T.id,(T,g)=>{var u=gs(),_=t(u),p=t(_);Or(p,{size:12,class:"text-slate-600 cursor-grab"});var F=r(p,2),H=t(F),N=t(H,!0);e(H);var j=r(H,2),Y=t(j);e(j),e(F),e(_);var P=r(_,2);P.__click=()=>tt(a(g));var R=t(P);Kt(R,{size:16}),e(P),e(u),f(A=>{i(N,a(g).name),i(Y,`${A??""} ${a(g).difficulty??""}`)},[()=>x()("session.enemies.difficulty")]),d(T,u)});var h=r(c,2);{var V=T=>{var g=hs(),u=t(g,!0);e(g),f(_=>i(u,_),[()=>x()("session.enemies.none")]),d(T,g)};I(h,T=>{z().length===0&&T(V)})}d(o,v)},Bt=o=>{var v=$s(),c=$e(v);He(c,1,Q,T=>T.id,(T,g)=>{var u=ws(),_=t(u),p=t(_),F=t(p,!0);e(p);var H=r(p,2),N=t(H);e(H),e(_);var j=r(_,2);j.__click=()=>Oe(a(g));var Y=t(j);Fa(Y,{size:14}),e(j),e(u),f((P,R)=>{i(F,a(g).name),i(N,`${P??""} ${R??""}`)},[()=>a(g).enemies?.reduce((P,R)=>P+R.count,0)||0,()=>x()("session.enemies.title")]),d(T,u)});var h=r(c,2);{var V=T=>{var g=ks(),u=t(g,!0);e(g),f(_=>i(u,_),[()=>x()("session.enemies.no_encounters")]),d(T,g)};I(h,T=>{Q().length===0&&T(V)})}d(o,v)};I(pt,o=>{a(ge)==="enemies"?o(Lt):o(Bt,!1)})}e(_t),e($t),e(D);var Ut=r(D,2),Jt=t(Ut),Gt=t(Jt),oa=t(Gt);{var ra=o=>{var v=zs();v.__click=Ve;var c=t(v);Ga(c,{size:20});var h=r(c);e(v),f(V=>i(h,` ${V??""}`),[()=>x()("session.combat.start")]),d(o,v)},Zt=o=>{var v=Cs(),c=t(v);c.__click=se;var h=t(c);Ha(h,{size:20}),e(c);var V=r(c,2),T=t(V),g=t(T,!0);e(T);var u=r(T),_=t(u,!0);e(u),e(V);var p=r(V,2);p.__click=ct;var F=t(p);Nr(F,{size:16});var H=r(F);e(p);var N=r(p,4);N.__click=()=>wt();var j=t(N,!0);e(N),e(v),f((Y,P,R,A,ee)=>{Ee(c,"title",Y),i(g,P),i(_,a(et).round),Ee(p,"title",R),i(H,` ${A??""}`),i(j,ee)},[()=>x()("session.combat.previous"),()=>x()("session.combat.round"),()=>x()("session.combat.next"),()=>x()("session.combat.next"),()=>x()("session.combat.end")]),d(o,v)};I(oa,o=>{a(et).active?o(Zt,!1):o(ra)})}e(Gt),e(Jt);var sa=r(Jt,2),la=t(sa);He(la,25,()=>a(Le),o=>o.type==="player"?o.id:o.instanceId,(o,v)=>{var c=Es(),h=t(c);is(h,{get entity(){return a(v)},updateEnemy:U,removeFromCombat:lt,updatePlayer:Pe}),e(c),nr(c,()=>ns,()=>({duration:300})),d(o,c)});var m=r(la,2);{var w=o=>{var v=js(),c=t(v,!0);e(v),f(h=>i(c,h),[()=>x()("session.combat.empty")]),d(o,v)};I(m,o=>{a(Le).length===0&&o(w)})}e(sa),e(Ut),Qt(2),e(me);var ce=r(me,2);{var be=o=>{var v=Is();v.__click=A=>{A.target===A.currentTarget&&O(J,!1)};var c=t(v),h=t(c),V=t(h),T=t(V);vr(T,{size:24}),e(V);var g=r(V,2),u=t(g),_=t(u,!0);e(u);var p=r(u,2),F=t(p,!0);e(p),e(g),e(h);var H=r(h,2);He(H,21,()=>a(xe),ot,(A,ee)=>{var S=Os(),y=t(S),G=t(y);fa(G,{size:14,class:"text-slate-500"});var ae=r(G);e(y);var ke=r(y,2);He(ke,21,()=>a(ee).effects,ot,(he,Je)=>{var Fe=Ms(),nt=t(Fe),dt=t(nt);e(nt);var gt=r(nt,2),ht=t(gt,!0);e(gt),e(Fe),f(()=>{i(dt,`${a(Je).name??""}:`),i(ht,a(Je).desc)}),d(he,Fe)}),e(ke),e(S),f(()=>i(ae,` ${a(ee).name??""}`)),d(A,S)}),e(H);var N=r(H,2),j=t(N);j.__click=()=>O(J,!1);var Y=t(j,!0);e(j);var P=r(j,2);P.__click=Ke;var R=t(P,!0);e(P),e(N),e(c),e(v),f((A,ee,S,y)=>{i(_,A),i(F,ee),i(Y,S),i(R,y)},[()=>x()("session.end_of_round.title"),()=>x()("session.end_of_round.summary"),()=>x()("common.buttons.cancel"),()=>x()("session.end_of_round.advance")]),d(o,v)};I(ce,o=>{a(J)&&o(be)})}var qe=r(ce,2);{var ft=o=>{var v=Ss();v.__click=P=>{P.target===P.currentTarget&&O(L,!1)};var c=t(v),h=t(c),V=t(h),T=t(V),g=t(T,!0);e(T);var u=r(T,2),_=t(u,!0);e(u),e(V);var p=r(V,2);p.__click=()=>O(L,!1);var F=t(p);va(F,{size:16}),e(p),e(h);var H=r(h,2),N=t(H);He(N,17,()=>a(X),ot,(P,R)=>{var A=Ns();A.__click=()=>je(a(R).id);var ee=t(A),S=t(ee,!0);e(ee);var y=r(ee,2),G=t(y),ae=t(G,!0);e(G);var ke=r(G,2),he=t(ke);e(ke),e(y);var Je=r(y,2),Fe=t(Je);Kt(Fe,{size:16}),e(Je),e(A),f((nt,dt)=>{i(S,nt),i(ae,a(R).name),i(he,`${dt??""} ${a(R).level??""} • ${a(R).ancestry??""}`)},[()=>a(R).name.charAt(0),()=>x()("common.labels.level")]),d(P,A)});var j=r(N,2);{var Y=P=>{var R=Rs(),A=t(R),ee=t(A);fa(ee,{size:24}),e(A);var S=r(A,2),y=t(S,!0);e(S);var G=r(S,2),ae=t(G,!0);e(G),e(R),f((ke,he)=>{i(y,ke),i(ae,he)},[()=>x()("session.manage_session.no_available"),()=>x()("session.manage_session.all_in_session")]),d(P,R)};I(j,P=>{a(X).length===0&&P(Y)})}e(H),e(c),e(v),f((P,R)=>{i(g,P),i(_,R)},[()=>x()("session.manage_session.title"),()=>x()("session.manage_session.description")]),d(o,v)};I(qe,o=>{a(L)&&o(ft)})}var Wt=r(qe,2);Da(Wt,{get isOpen(){return C()},onClose:()=>na.set(!1)});var Vt=r(Wt,2);Na(Vt,{get isOpen(){return a(q).isOpen},get title(){return a(q).title},get message(){return a(q).message},get onConfirm(){return a(q).onConfirm},onCancel:()=>a(q).isOpen=!1}),f((o,v,c,h)=>{i(Ze,` ${o??""} `),i(ie,v),Ie(Ae,1,`flex-1 text-xs font-bold py-1.5 rounded flex items-center justify-center gap-2 transition-colors ${a(ge)==="enemies"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),i(Xe,` ${c??""}`),Ie(st,1,`flex-1 text-xs font-bold py-1.5 rounded flex items-center justify-center gap-2 transition-colors ${a(ge)==="encounters"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),i(Ct,` ${h??""}`)},[()=>x()("session.players.title"),()=>a(L)?x()("session.players.close"):x()("session.players.add"),()=>x()("session.enemies.title"),()=>x()("session.enemies.encounters")]),d(M,B),ea(),E()}ta(["click"]);var As=b('<div class="space-y-4"><div class="flex items-center gap-4"><div class="relative group cursor-pointer"><div class="w-16 h-16 rounded-xl overflow-hidden border border-slate-700"><!></div> <div class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"><!></div></div> <div class="flex-1"><label for="enemy-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold text-lg"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-diff" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-diff" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-size" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-size" type="number" step="0.5" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div><label for="enemy-desc" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <textarea id="enemy-desc" class="w-full bg-slate-900 border border-slate-700 rounded p-3 text-white text-sm min-h-[100px] resize-none focus:border-indigo-500 focus:outline-none transition-colors"></textarea></div> <div class="grid grid-cols-1"><div><label for="enemy-speed" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-speed" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div></div>'),Ds=b('<div class="bg-slate-900 p-2 rounded border border-slate-700 text-center"><label class="text-[10px] text-slate-500 uppercase font-bold block mb-1"> </label> <input type="number" class="w-full bg-transparent text-center font-bold text-white text-xl focus:outline-none mb-1"/> <div> </div></div>'),Hs=b('<div class="space-y-6"><div><h4 class="text-indigo-400 font-bold text-sm uppercase mb-3"> </h4> <div class="grid grid-cols-4 gap-3"></div></div> <div class="space-y-3"><div><label for="enemy-senses" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-senses" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-langs" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-langs" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-immune" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-immune" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div></div></div>'),Ls=b('<div class="flex gap-2 items-start animate-in fade-in slide-in-from-left-2"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600 focus:border-indigo-500 focus:outline-none" placeholder="Nome"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none focus:border-indigo-500 focus:outline-none" rows="2" placeholder="Descrição..."></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),Us=b('<div class="text-xs text-slate-600 italic text-center py-4 border-2 border-dashed border-slate-800 rounded"> </div>'),qs=b('<div><div class="flex justify-between items-center mb-3"><h4> </h4> <button class="text-xs bg-slate-800 px-2 py-1 rounded hover:bg-slate-700 text-white flex items-center gap-1 border border-slate-700"><!> </button></div> <div class="space-y-3"><!> <!></div></div>'),Fs=b('<div class="space-y-6"></div>'),Bs=b('<div class="w-16 h-16 rounded-lg overflow-hidden border border-slate-700 shadow-lg flex-shrink-0"><!></div>'),Ws=b('<div class="bg-slate-950 p-2 rounded border border-slate-800"><div class="text-[10px] text-slate-500 uppercase font-bold mb-1"> </div> <div class="text-white font-bold"> <span> </span></div></div>'),Vs=b('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),Gs=b('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),Qs=b('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),Js=b('<div class="mb-2 pl-3 border-l-2 border-indigo-900"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),Zs=b('<div><h4 class="font-bold text-indigo-400 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Xs=b('<div class="mb-2 pl-3 border-l-2 border-red-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),Ks=b('<div><h4 class="font-bold text-red-500 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Ys=b('<div class="mb-2 pl-3 border-l-2 border-orange-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),ei=b('<div><h4 class="font-bold text-orange-400 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),ti=b('<div class="mb-2 pl-3 border-l-2 border-yellow-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),ai=b('<div><h4 class="font-bold text-yellow-500 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),ri=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-6xl h-[90vh] border border-slate-700 shadow-2xl overflow-hidden flex flex-col lg:flex-row" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="w-full lg:w-1/2 flex flex-col h-full border-r border-slate-700"><div class="p-4 border-b border-slate-700 bg-slate-900 flex justify-between items-center"><h3 id="modal-title" class="font-bold text-white text-lg"> </h3> <button class="lg:hidden text-slate-400 hover:text-white"><!></button></div> <div class="flex border-b border-slate-700 bg-slate-900/50"><button> </button> <button> </button> <button> </button></div> <div class="flex-1 overflow-y-auto p-6 custom-scrollbar bg-slate-800/50"><!></div> <div class="p-4 border-t border-slate-700 bg-slate-900 flex justify-end gap-3"><button class="px-6 py-2 rounded bg-slate-800 hover:bg-slate-700 text-white font-bold transition-colors"> </button> <button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold flex items-center gap-2 transition-colors"><!> </button></div></div> <div class="hidden lg:flex w-1/2 bg-slate-950 flex-col border-l border-slate-800"><div class="p-4 border-b border-slate-800 bg-slate-950"><h3 class="font-bold text-slate-500 text-xs uppercase flex items-center gap-2"><!> </h3></div> <div class="flex-1 p-8 overflow-y-auto flex items-center justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-slate-950"><div class="w-full max-w-md bg-slate-900 border border-slate-700 rounded-xl p-5 shadow-2xl relative"><div class="absolute -top-3 -right-3 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-red-400"> </div> <div class="flex items-center gap-3 mb-4"><!> <div class="flex-1 min-w-0"><h2 class="text-2xl font-bold text-white mb-1 font-serif tracking-wide truncate"> </h2> <div class="h-1 w-20 bg-red-600 rounded-full"></div></div></div> <div class="grid grid-cols-2 gap-4 mb-4 text-sm"><div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold text-lg"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold text-lg"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold"> </span></div></div> <div class="grid grid-cols-4 gap-2 mb-6 text-center font-mono text-slate-300"></div> <div class="mb-6 space-y-2 text-xs"><!> <!> <!></div> <div class="space-y-5 text-sm"><!> <!> <!> <!></div></div></div></div></div></div> <input type="file" hidden="" accept="image/*"/> <!>',1);function si(M,s){Yt(s,!0);const n=()=>it(Ft,"$t",x),[x,z]=aa();let Q=Rt(s,"isOpen",3,!1),C=Rt(s,"initialData",3,"{}"),l=Be(Xt(J())),E=Be("stats"),L=Be(!1),oe=Be(""),te=Be(void 0);function Se(re){const de=re.target.files;if(de&&de.length>0){const fe=de[0],ye=new FileReader;ye.onload=()=>{O(oe,ye.result,!0),O(L,!0)},ye.readAsDataURL(fe)}re.target&&(re.target.value="")}async function ge(re){try{const de=await ur(re);a(l).imageUrl=de,O(L,!1)}catch(de){console.error(de),alert(de.message||"Erro ao salvar imagem")}}function J(){return{name:"",difficulty:1,defense:10,health:10,damage:0,size:1,speed:10,description:"",senses:"",languages:"",immune:"",imageUrl:"",stats:{str:10,agi:10,int:10,wil:10},traits:[],actions:[],reactions:[],endOfRound:[]}}$a(()=>{if(Q()&&C())try{const re=JSON.parse(C());Object.keys(re).length===0?O(l,J(),!0):O(l,{...J(),...re},!0)}catch{O(l,J(),!0)}});function xe(re){a(l)[re]=[...a(l)[re],{name:"",desc:""}]}function q(re,de){a(l)[re]=a(l)[re].filter((fe,ye)=>ye!==de)}function Z(re){}var le=rt(),Te=$e(le);{var et=re=>{var de=ri(),fe=$e(de);fe.__click=Z;var ye=t(fe),We=t(ye),X=t(We),W=t(X),je=t(W,!0);e(W);var ze=r(W,2);ze.__click=function(...u){s.onClose?.apply(this,u)};var Me=t(ze);va(Me,{size:20}),e(ze),e(X);var Ce=r(X,2),tt=t(Ce);tt.__click=()=>O(E,"stats");var Oe=t(tt,!0);e(tt);var Ve=r(tt,2);Ve.__click=()=>O(E,"attributes");var ct=t(Ve,!0);e(Ve);var Ke=r(Ve,2);Ke.__click=()=>O(E,"abilities");var wt=t(Ke,!0);e(Ke),e(Ce);var lt=r(Ce,2),U=t(lt);{var se=u=>{var _=As(),p=t(_),F=t(p);F.__click=()=>a(te)?.click();var H=t(F),N=t(H);Ua(N,()=>a(l).imageUrl,at=>{ka(at,{get hash(){return a(l).imageUrl},get alt(){return a(l).name},size:"custom",fallbackText:"?"})}),e(H);var j=r(H,2),Y=t(j);br(Y,{size:20,class:"text-white"}),e(j),e(F);var P=r(F,2),R=t(P),A=t(R,!0);e(R);var ee=r(R,2);It(ee),e(P),e(p);var S=r(p,2),y=t(S),G=t(y),ae=t(G,!0);e(G);var ke=r(G);It(ke),e(y);var he=r(y,2),Je=t(he),Fe=t(Je,!0);e(Je);var nt=r(Je);It(nt),e(he),e(S);var dt=r(S,2),gt=t(dt),ht=t(gt,!0);e(gt);var De=r(gt,2);Ca(De),e(dt);var Re=r(dt,2),yt=t(Re),vt=t(yt),qt=t(vt,!0);e(vt);var Ot=r(vt);It(Ot),e(yt),e(Re),e(_),f((at,ia,ua,ba,Qa,Ja)=>{i(A,at),i(ae,ia),i(Fe,ua),i(ht,ba),Ee(De,"placeholder",Qa),i(qt,Ja)},[()=>n()("session.enemy_modal.name"),()=>n()("session.enemy_modal.difficulty"),()=>n()("session.enemy_modal.size"),()=>n()("session.enemy_modal.description"),()=>n()("session.enemy_modal.description_placeholder"),()=>n()("session.enemy_modal.speed")]),Nt(ee,()=>a(l).name,at=>a(l).name=at),Nt(ke,()=>a(l).difficulty,at=>a(l).difficulty=at),Nt(nt,()=>a(l).size,at=>a(l).size=at),Nt(De,()=>a(l).description,at=>a(l).description=at),Nt(Ot,()=>a(l).speed,at=>a(l).speed=at),d(u,_)},pe=u=>{var _=rt(),p=$e(_);{var F=N=>{var j=Hs(),Y=t(j),P=t(Y),R=t(P,!0);e(P);var A=r(P,2);He(A,20,()=>["str","agi","int","wil"],ot,(De,Re)=>{var yt=Ds(),vt=t(yt),qt=t(vt,!0);e(vt);var Ot=r(vt,2);It(Ot);var at=r(Ot,2),ia=t(at);e(at),e(yt),f(()=>{Ee(vt,"for",`attr-${Re??""}`),i(qt,Re),Ee(Ot,"id",`attr-${Re??""}`),Ie(at,1,`text-xs font-bold ${a(l).stats[Re]-10>=0?"text-green-500":"text-red-500"}`),i(ia,`${a(l).stats[Re]-10>=0?"+":""}${a(l).stats[Re]-10}`)}),Nt(Ot,()=>a(l).stats[Re],ua=>a(l).stats[Re]=ua),d(De,yt)}),e(A),e(Y);var ee=r(Y,2),S=t(ee),y=t(S),G=t(y,!0);e(y);var ae=r(y);It(ae),e(S);var ke=r(S,2),he=t(ke),Je=t(he,!0);e(he);var Fe=r(he);It(Fe),e(ke);var nt=r(ke,2),dt=t(nt),gt=t(dt,!0);e(dt);var ht=r(dt);It(ht),e(nt),e(ee),e(j),f((De,Re,yt,vt,qt,Ot,at)=>{i(R,De),i(G,Re),Ee(ae,"placeholder",yt),i(Je,vt),Ee(Fe,"placeholder",qt),i(gt,Ot),Ee(ht,"placeholder",at)},[()=>n()("session.enemy_modal.main_attributes"),()=>n()("session.enemy_modal.senses"),()=>n()("session.enemy_modal.senses_placeholder"),()=>n()("session.enemy_modal.languages"),()=>n()("session.enemy_modal.languages_placeholder"),()=>n()("session.enemy_modal.immunities"),()=>n()("session.enemy_modal.immunities_placeholder")]),Nt(ae,()=>a(l).senses,De=>a(l).senses=De),Nt(Fe,()=>a(l).languages,De=>a(l).languages=De),Nt(ht,()=>a(l).immune,De=>a(l).immune=De),d(N,j)},H=N=>{var j=rt(),Y=$e(j);{var P=R=>{var A=Fs();He(A,20,()=>[{key:"traits",title:"Traços (Traits)",color:"text-indigo-400",border:"border-indigo-500/30"},{key:"actions",title:"Ações",color:"text-red-400",border:"border-red-500/30"},{key:"reactions",title:"Reações",color:"text-orange-400",border:"border-orange-500/30"},{key:"endOfRound",title:"Fim da Rodada",color:"text-yellow-400",border:"border-yellow-500/30"}],ot,(ee,S)=>{var y=qs(),G=t(y),ae=t(G),ke=t(ae,!0);e(ae);var he=r(ae,2);he.__click=()=>xe(S.key);var Je=t(he);Kt(Je,{size:12});var Fe=r(Je);e(he),e(G);var nt=r(G,2),dt=t(nt);He(dt,17,()=>a(l)[S.key],ot,(De,Re,yt)=>{var vt=Ls(),qt=t(vt),Ot=t(qt);It(Ot);var at=r(Ot,2);Ca(at),e(qt);var ia=r(qt,2);ia.__click=()=>q(S.key,yt);var ua=t(ia);ca(ua,{size:16}),e(ia),e(vt),Nt(Ot,()=>a(Re).name,ba=>a(Re).name=ba),Nt(at,()=>a(Re).desc,ba=>a(Re).desc=ba),d(De,vt)});var gt=r(dt,2);{var ht=De=>{var Re=Us(),yt=t(Re,!0);e(Re),f(vt=>i(yt,vt),[()=>n()("session.enemy_modal.empty")]),d(De,Re)};I(gt,De=>{a(l)[S.key].length===0&&De(ht)})}e(nt),e(y),f(De=>{Ie(y,1,`p-4 bg-slate-900 rounded border ${S.border??""}`),Ie(ae,1,`font-bold text-sm uppercase ${S.color??""}`),i(ke,S.title),i(Fe,` ${De??""}`)},[()=>n()("session.enemy_modal.add")]),d(ee,y)}),e(A),d(R,A)};I(Y,R=>{a(E)==="abilities"&&R(P)},!0)}d(N,j)};I(p,N=>{a(E)==="attributes"?N(F):N(H,!1)},!0)}d(u,_)};I(U,u=>{a(E)==="stats"?u(se):u(pe,!1)})}e(lt);var Le=r(lt,2),Ge=t(Le);Ge.__click=function(...u){s.onClose?.apply(this,u)};var Pe=t(Ge,!0);e(Ge);var B=r(Ge,2);B.__click=()=>s.onSave(a(l));var me=t(B);Va(me,{size:18});var D=r(me);e(B),e(Le),e(We);var K=r(We,2),ve=t(K),ue=t(ve),_e=t(ue);Aa(_e,{size:14});var Ze=r(_e);e(ue),e(ve);var Ne=r(ve,2),k=t(Ne),$=t(k),ie=t($);e($);var we=r($,2),Qe=t(we);{var Ye=u=>{var _=Bs(),p=t(_);ka(p,{get hash(){return a(l).imageUrl},get alt(){return a(l).name},size:"custom"}),e(_),d(u,_)};I(Qe,u=>{a(l).imageUrl&&u(Ye)})}var Ue=r(Qe,2),ut=t(Ue),Dt=t(ut,!0);e(ut),Qt(2),e(Ue),e(we);var jt=r(we,2),kt=t(jt),mt=t(kt),Mt=t(mt,!0);e(mt);var Ht=r(mt,2),$t=t(Ht,!0);e(Ht),e(kt);var zt=r(kt,2),Ae=t(zt),bt=t(Ae,!0);e(Ae);var Xe=r(Ae,2),st=t(Xe,!0);e(Xe),e(zt);var xt=r(zt,2),Ct=t(xt),_t=t(Ct,!0);e(Ct);var pt=r(Ct,2),Lt=t(pt,!0);e(pt),e(xt);var Bt=r(xt,2),Ut=t(Bt),Jt=t(Ut,!0);e(Ut);var Gt=r(Ut,2),oa=t(Gt,!0);e(Gt),e(Bt),e(jt);var ra=r(jt,2);He(ra,20,()=>["str","agi","int","wil"],ot,(u,_)=>{var p=Ws(),F=t(p),H=t(F,!0);e(F);var N=r(F,2),j=t(N),Y=r(j),P=t(Y);e(Y),e(N),e(p),f(()=>{i(H,_),i(j,`${a(l).stats[_]??""} `),Ie(Y,1,`text-xs ${a(l).stats[_]-10>=0?"text-green-500":"text-red-500"}`),i(P,`(${a(l).stats[_]-10>=0?"+":""}${a(l).stats[_]-10})`)}),d(u,p)}),e(ra);var Zt=r(ra,2),sa=t(Zt);{var la=u=>{var _=Vs(),p=t(_),F=t(p);e(p);var H=r(p,2),N=t(H,!0);e(H),e(_),f(j=>{i(F,`${j??""}:`),i(N,a(l).senses)},[()=>n()("session.enemy_modal.senses")]),d(u,_)};I(sa,u=>{a(l).senses&&u(la)})}var m=r(sa,2);{var w=u=>{var _=Gs(),p=t(_),F=t(p);e(p);var H=r(p,2),N=t(H,!0);e(H),e(_),f(j=>{i(F,`${j??""}:`),i(N,a(l).languages)},[()=>n()("session.enemy_modal.languages")]),d(u,_)};I(m,u=>{a(l).languages&&u(w)})}var ce=r(m,2);{var be=u=>{var _=Qs(),p=t(_),F=t(p);e(p);var H=r(p,2),N=t(H,!0);e(H),e(_),f(j=>{i(F,`${j??""}:`),i(N,a(l).immune)},[()=>n()("session.enemy_modal.immunities")]),d(u,_)};I(ce,u=>{a(l).immune&&u(be)})}e(Zt);var qe=r(Zt,2),ft=t(qe);{var Wt=u=>{var _=Zs(),p=t(_),F=t(p,!0);e(p);var H=r(p,2);He(H,17,()=>a(l).traits,ot,(N,j,Y,P)=>{var R=Js(),A=t(R),ee=t(A);e(A);var S=r(A,2),y=t(S,!0);e(S),e(R),f(()=>{i(ee,`${a(j).name??""}:`),i(y,a(j).desc)}),d(N,R)}),e(_),f(N=>i(F,N),[()=>n()("session.enemy_modal.traits")]),d(u,_)};I(ft,u=>{a(l).traits.length>0&&u(Wt)})}var Vt=r(ft,2);{var o=u=>{var _=Ks(),p=t(_),F=t(p,!0);e(p);var H=r(p,2);He(H,17,()=>a(l).actions,ot,(N,j,Y,P)=>{var R=Xs(),A=t(R),ee=t(A);e(A);var S=r(A,2),y=t(S,!0);e(S),e(R),f(()=>{i(ee,`${a(j).name??""}:`),i(y,a(j).desc)}),d(N,R)}),e(_),f(N=>i(F,N),[()=>n()("session.enemy_modal.actions")]),d(u,_)};I(Vt,u=>{a(l).actions.length>0&&u(o)})}var v=r(Vt,2);{var c=u=>{var _=ei(),p=t(_),F=t(p,!0);e(p);var H=r(p,2);He(H,17,()=>a(l).reactions,ot,(N,j,Y,P)=>{var R=Ys(),A=t(R),ee=t(A);e(A);var S=r(A,2),y=t(S,!0);e(S),e(R),f(()=>{i(ee,`${a(j).name??""}:`),i(y,a(j).desc)}),d(N,R)}),e(_),f(N=>i(F,N),[()=>n()("session.enemy_modal.reactions")]),d(u,_)};I(v,u=>{a(l).reactions.length>0&&u(c)})}var h=r(v,2);{var V=u=>{var _=ai(),p=t(_),F=t(p,!0);e(p);var H=r(p,2);He(H,17,()=>a(l).endOfRound,ot,(N,j,Y,P)=>{var R=ti(),A=t(R),ee=t(A);e(A);var S=r(A,2),y=t(S,!0);e(S),e(R),f(()=>{i(ee,`${a(j).name??""}:`),i(y,a(j).desc)}),d(N,R)}),e(_),f(N=>i(F,N),[()=>n()("session.enemy_modal.end_of_round")]),d(u,_)};I(h,u=>{a(l).endOfRound.length>0&&u(V)})}e(qe),e(k),e(Ne),e(K),e(ye),e(fe);var T=r(fe,2);T.__change=Se,kr(T,u=>O(te,u),()=>a(te));var g=r(T,2);cr(g,{get isOpen(){return a(L)},get imageUrl(){return a(oe)},onClose:()=>O(L,!1),onCrop:ge}),f((u,_,p,F,H,N,j,Y,P,R,A,ee,S,y)=>{Ee(fe,"aria-label",u),i(je,_),Ie(tt,1,`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a(E)==="stats"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(Oe,p),Ie(Ve,1,`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a(E)==="attributes"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(ct,F),Ie(Ke,1,`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a(E)==="abilities"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(wt,H),i(Pe,N),i(D,` ${j??""}`),i(Ze,` ${Y??""}`),i(ie,`${P??""} ${a(l).difficulty??""}`),i(Dt,R),i(Mt,A),i($t,a(l).defense),i(bt,ee),i(st,a(l).health),i(_t,S),i(Lt,a(l).size),i(Jt,y),i(oa,a(l).speed)},[()=>n()("session.enemy_modal.close"),()=>n()("session.enemy_modal.title"),()=>n()("session.enemy_modal.tab_general"),()=>n()("session.enemy_modal.tab_attributes"),()=>n()("session.enemy_modal.tab_abilities"),()=>n()("common.buttons.cancel"),()=>n()("common.buttons.save"),()=>n()("session.enemy_modal.preview"),()=>n()("session.enemy_modal.difficulty"),()=>a(l).name||n()("session.enemy_modal.enemy_default"),()=>n()("session.enemy_modal.defense"),()=>n()("session.enemy_modal.health"),()=>n()("session.enemy_modal.size"),()=>n()("session.enemy_modal.speed")]),d(re,de)};I(Te,re=>{Q()&&re(et)})}d(M,le),ea(),z()}ta(["click","change"]);var ii=b('<div class="flex justify-between items-center bg-slate-800 p-2 rounded border border-slate-700"><div class="flex-1"><div class="text-sm font-bold text-white"> </div> <div class="text-[10px] text-slate-400"> </div></div> <div class="flex items-center gap-2"><input type="number" min="1" class="w-12 bg-slate-900 border border-slate-600 rounded text-center text-white"/> <button class="text-red-400 hover:text-red-300"><!></button></div></div>'),ni=b('<div class="text-center text-slate-600 italic text-sm py-4"> </div>'),oi=b('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 hover:border-indigo-500/30 transition-colors"><div><div class="text-sm font-bold text-white max-w-[120px] truncate"> </div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-indigo-400 hover:text-white p-1 bg-slate-900 rounded border border-slate-800"><!></button></div>'),li=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-2xl p-6 border border-slate-700 shadow-2xl flex flex-col max-h-[90vh]" role="dialog" aria-modal="true" aria-labelledby="encounter-modal-title"><div class="flex justify-between items-center mb-6"><h3 id="encounter-modal-title" class="text-xl font-bold text-white"> </h3> <button class="text-slate-400 hover:text-white"><!></button></div> <div class="space-y-4 mb-6"><div><label for="encounter-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="encounter-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white outline-hidden focus:border-indigo-500"/></div></div> <div class="flex-1 flex gap-4 min-h-0"><div class="flex-1 bg-slate-900 border border-slate-800 rounded-lg p-3 flex flex-col"><h4 class="text-xs text-slate-500 uppercase font-bold mb-2"> </h4> <div class="flex-1 overflow-y-auto space-y-2 custom-scrollbar"><!> <!></div></div> <div class="flex-1 bg-slate-900 border border-slate-800 rounded-lg p-3 flex flex-col"><h4 class="text-xs text-slate-500 uppercase font-bold mb-2"> </h4> <div class="flex-1 overflow-y-auto space-y-2 custom-scrollbar"></div></div></div> <div class="flex gap-3 mt-6 pt-4 border-t border-slate-700"><button class="flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded font-bold"> </button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-2 rounded font-bold flex items-center justify-center gap-2"><!> </button></div></div></div>');function di(M,s){Yt(s,!0);const n=()=>it(Ft,"$t",z),x=()=>it(za,"$liveEnemies",z),[z,Q]=aa();let C=Rt(s,"isOpen",3,!1),l=Rt(s,"initialData",3,"{}"),E=Be(Xt({name:"",enemies:[]}));$a(()=>{if(C()&&l())try{const q=JSON.parse(l());O(E,{name:q.name||"",enemies:q.enemies||[]},!0)}catch{O(E,{name:"",enemies:[]},!0)}});function L(q){a(E).enemies.find(le=>le.enemyId===q)?a(E).enemies=a(E).enemies.map(le=>le.enemyId===q?{...le,count:le.count+1}:le):a(E).enemies=[...a(E).enemies,{enemyId:q,count:1}]}function oe(q){a(E).enemies=a(E).enemies.filter((Z,le)=>le!==q)}function te(q,Z){const le=Math.max(1,parseInt(Z)||1);a(E).enemies[q].count=le}function Se(q){}var ge=rt(),J=$e(ge);{var xe=q=>{var Z=li();Z.__click=Se;var le=t(Z),Te=t(le),et=t(Te),re=t(et,!0);e(et);var de=r(et,2);de.__click=function(...D){s.onClose?.apply(this,D)};var fe=t(de);va(fe,{size:20}),e(de),e(Te);var ye=r(Te,2),We=t(ye),X=t(We),W=t(X,!0);e(X);var je=r(X,2);It(je),e(We),e(ye);var ze=r(ye,2),Me=t(ze),Ce=t(Me),tt=t(Ce,!0);e(Ce);var Oe=r(Ce,2),Ve=t(Oe);He(Ve,17,()=>a(E).enemies,ot,(D,K,ve)=>{const ue=ne(()=>x().find(ut=>ut.id===a(K).enemyId));var _e=ii(),Ze=t(_e),Ne=t(Ze),k=t(Ne,!0);e(Ne);var $=r(Ne,2),ie=t($);e($),e(Ze);var we=r(Ze,2),Qe=t(we);It(Qe),Qe.__input=ut=>te(ve,ut.target.value);var Ye=r(Qe,2);Ye.__click=()=>oe(ve);var Ue=t(Ye);ca(Ue,{size:16}),e(Ye),e(we),e(_e),f(ut=>{i(k,ut),i(ie,`Dif ${(a(ue)?a(ue).difficulty:"?")??""}`),ya(Qe,a(K).count)},[()=>a(ue)?a(ue).name:n()("session.encounter_modal.unknown")]),d(D,_e)});var ct=r(Ve,2);{var Ke=D=>{var K=ni(),ve=t(K,!0);e(K),f(ue=>i(ve,ue),[()=>n()("session.encounter_modal.none_added")]),d(D,K)};I(ct,D=>{a(E).enemies.length===0&&D(Ke)})}e(Oe),e(Me);var wt=r(Me,2),lt=t(wt),U=t(lt,!0);e(lt);var se=r(lt,2);He(se,5,x,D=>D.id,(D,K)=>{var ve=oi(),ue=t(ve),_e=t(ue),Ze=t(_e,!0);e(_e);var Ne=r(_e,2),k=t(Ne);e(Ne),e(ue);var $=r(ue,2);$.__click=()=>L(a(K).id);var ie=t($);Kt(ie,{size:16}),e($),e(ve),f(()=>{i(Ze,a(K).name),i(k,`Dif ${a(K).difficulty??""}`)}),d(D,ve)}),e(se),e(wt),e(ze);var pe=r(ze,2),Le=t(pe);Le.__click=function(...D){s.onClose?.apply(this,D)};var Ge=t(Le,!0);e(Le);var Pe=r(Le,2);Pe.__click=()=>s.onSave(a(E));var B=t(Pe);Va(B,{size:18});var me=r(B);e(Pe),e(pe),e(le),e(Z),f((D,K,ve,ue,_e,Ze,Ne,k)=>{Ee(Z,"aria-label",D),i(re,K),i(W,ve),Ee(je,"placeholder",ue),i(tt,_e),i(U,Ze),i(Ge,Ne),i(me,` ${k??""}`)},[()=>n()("session.encounter_modal.close"),()=>n()("session.encounter_modal.title"),()=>n()("session.encounter_modal.name"),()=>n()("session.encounter_modal.name_placeholder"),()=>n()("session.encounter_modal.enemies_in_encounter"),()=>n()("session.encounter_modal.add_enemies"),()=>n()("common.buttons.cancel"),()=>n()("session.encounter_modal.save_encounter")]),Nt(je,()=>a(E).name,D=>a(E).name=D),d(q,Z)};I(J,q=>{C()&&q(xe)})}d(M,ge),ea(),Q()}ta(["click","input"]);var vi=b('<div class="text-[10px] text-slate-400 flex items-center gap-1.5 bg-slate-950 p-1 px-1.5 rounded-lg border border-slate-800/50"><span class="text-indigo-400 font-black"> </span> <span class="font-medium truncate max-w-[80px]"> </span></div>'),ci=b('<div class="text-[10px] text-slate-600 italic"> </div>'),ui=b('<div class="bg-slate-900 border border-slate-800 rounded-2xl p-4 transition-all hover:border-indigo-500/30 group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10" role="region"><div class="flex-1"><div class="font-bold text-white text-base mb-2 group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate"> </div> <div class="flex flex-wrap gap-1"><!> <!></div></div> <div class="flex gap-2 mt-3 pt-3 border-t border-slate-800/50"><button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-1.5 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition-all active:scale-95 shadow-lg shadow-indigo-900/20"><!> </button> <button class="p-1.5 text-slate-400 hover:text-white bg-slate-800/50 rounded-lg border border-slate-800 transition-all" title="Editar"><!></button> <button class="p-1.5 text-slate-400 hover:text-red-400 bg-slate-800/50 rounded-lg border border-slate-800 hover:border-red-900/30 transition-all"><!></button></div></div>'),bi=b('<button class="text-[10px] font-bold text-indigo-400 hover:text-indigo-300 mt-1 uppercase tracking-wider"> </button>'),xi=b('<div class="mb-4 flex-1"><p> </p> <!></div>'),mi=b('<div class="mb-4 flex-1 text-[10px] text-slate-600 italic"> </div>'),_i=b('<div class="bg-slate-900 border border-slate-800 rounded-2xl p-5 hover:border-indigo-500/30 transition-all relative group cursor-move hover:shadow-lg hover:shadow-indigo-500/10 active:scale-[0.98] flex flex-col" draggable="true" role="listitem"><div class="flex justify-between items-start mb-3"><h3 class="font-bold text-lg text-white group-hover:text-indigo-400 transition-colors"> </h3> <span class="text-[10px] font-black bg-indigo-500/10 text-indigo-400 border border-indigo-400/20 px-2 py-1 rounded-lg uppercase"> </span></div> <!> <div class="mt-auto flex gap-2 pt-4 border-t border-slate-800/50"><button class="flex-1 bg-slate-800/50 hover:bg-slate-800 text-white py-2 rounded-xl text-xs font-bold border border-slate-800 transition-all"> </button> <button class="bg-slate-800/50 hover:bg-red-900/20 text-slate-500 hover:text-red-400 px-3 rounded-xl border border-slate-800 hover:border-red-900/30 transition-all"><!></button></div></div>'),fi=b('<div class="text-center text-slate-500 italic col-span-3"> </div>'),pi=b('<div><div class="mb-12"><div class="flex justify-between items-center mb-6"><h3 class="text-sm font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2"><!> </h3></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><button class="min-h-[120px] border-2 border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-400 transition-all hover:bg-indigo-500/5 gap-2 group"><!> <span class="font-bold text-sm"> </span></button> <!></div></div> <div class="mb-6"><h3 class="text-sm font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2 mb-6"><!> </h3></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><button class="min-h-[180px] border-2 border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-400 transition-all hover:bg-indigo-500/5 gap-2 group"><!> <span class="font-bold text-sm"> </span></button> <!> <!></div> <!> <!> <!></div>');function gi(M,s){Yt(s,!0);const n=()=>it(za,"$liveEnemies",Q),x=()=>it(Ra,"$liveEncounters",Q),z=()=>it(Ft,"$t",Q),[Q,C]=aa();let l=Be(!1),E=Be(null),L=Be("{}"),oe=Be(!1),te=Be(null),Se=Be("{}"),ge=Be(Xt({isOpen:!1,title:"",message:"",onConfirm:()=>{}}));function J(){return{name:"",difficulty:1,defense:10,health:10,damage:0,size:1,speed:10,description:"",senses:"",languages:"",immune:"",stats:{str:10,agi:10,int:10,wil:10},traits:[],actions:[],reactions:[],endOfRound:[]}}function xe(k=null){O(E,k?k.id:null,!0),O(L,JSON.stringify(k||J()),!0),O(l,!0)}let q=Xt(new Set);function Z(k){q.has(k)?q.delete(k):q.add(k)}function le(k){const $=a(E)||xa();Oa.set($,{...k,id:$}),O(l,!1)}function Te(k){const $=n().find(ie=>ie.id===k);O(ge,{isOpen:!0,title:"Excluir Inimigo",message:`Tem certeza que deseja excluir permanentemente o inimigo "${$?.name||"este inimigo"}"?`,onConfirm:()=>{Oa.delete(k),a(ge).isOpen=!1}},!0)}function et(k=null){O(te,k?k.id:null,!0),O(Se,JSON.stringify(k||{name:"",enemies:[]}),!0),O(oe,!0)}function re(k){const $=a(te)||xa();ga.set($,{...k,id:$}),O(oe,!1)}function de(k){const $=x().find(ie=>ie.id===k);O(ge,{isOpen:!0,title:"Excluir Encontro",message:`Tem certeza que deseja excluir permanentemente o encontro "${$?.name||"este encontro"}"?`,onConfirm:()=>{ga.delete(k),a(ge).isOpen=!1}},!0)}function fe(k){const $=Et.get(s.campId);if(!$)return;const ie=$.activeEnemies||[];let we=[];k.enemies.forEach(Qe=>{const Ye=n().find(Ue=>Ue.id===Qe.enemyId);if(Ye)for(let Ue=0;Ue<Qe.count;Ue++)we.push({...Ye,instanceId:xa(),damage:0,currentHealth:Ye.health,afflictions:[],acted:!1,initiative:!1})}),Et.set(s.campId,{...$,activeEnemies:[...ie,...we]})}function ye(k,$){k.dataTransfer.setData("text/plain",$.id),k.dataTransfer.effectAllowed="copy"}function We(k){return k.preventDefault(),!1}function X(k,$){k.preventDefault();const ie=k.dataTransfer.getData("text/plain");if(!ie)return;const we=$.enemies||[],Qe=we.find(Ue=>Ue.enemyId===ie);let Ye;Qe?Ye=we.map(Ue=>Ue.enemyId===ie?{...Ue,count:Ue.count+1}:Ue):Ye=[...we,{enemyId:ie,count:1}],ga.set($.id,{...$,enemies:Ye})}var W=pi(),je=t(W),ze=t(je),Me=t(ze),Ce=t(Me);Ba(Ce,{size:16});var tt=r(Ce);e(Me),e(ze);var Oe=r(ze,2),Ve=t(Oe);Ve.__click=()=>et();var ct=t(Ve);Kt(ct,{size:28,class:"group-hover:scale-110 transition-transform"});var Ke=r(ct,2),wt=t(Ke,!0);e(Ke),e(Ve);var lt=r(Ve,2);He(lt,1,x,k=>k.id,(k,$)=>{var ie=ui(),we=t(ie),Qe=t(we),Ye=t(Qe,!0);e(Qe);var Ue=r(Qe,2),ut=t(Ue);He(ut,17,()=>a($).enemies||[],ot,(Xe,st)=>{const xt=ne(()=>n().find(Ut=>Ut.id===a(st).enemyId));var Ct=vi(),_t=t(Ct),pt=t(_t);e(_t);var Lt=r(_t,2),Bt=t(Lt,!0);e(Lt),e(Ct),f(()=>{i(pt,`${a(st).count??""}x`),i(Bt,a(xt)?a(xt).name:"...")}),d(Xe,Ct)});var Dt=r(ut,2);{var jt=Xe=>{var st=ci(),xt=t(st,!0);e(st),f(Ct=>i(xt,Ct),[()=>z()("session.bestiary.empty_encounter")]),d(Xe,st)};I(Dt,Xe=>{a($).enemies?.length||Xe(jt)})}e(Ue),e(we);var kt=r(we,2),mt=t(kt);mt.__click=()=>fe(a($));var Mt=t(mt);Fa(Mt,{size:12,fill:"currentColor"});var Ht=r(Mt);e(mt);var $t=r(mt,2);$t.__click=()=>et(a($));var zt=t($t);gr(zt,{size:14}),e($t);var Ae=r($t,2);Ae.__click=()=>de(a($).id);var bt=t(Ae);ca(bt,{size:14}),e(Ae),e(kt),e(ie),f(Xe=>{Ee(ie,"aria-label",`Encontro ${a($).name??""}`),i(Ye,a($).name),i(Ht,` ${Xe??""}`)},[()=>z()("session.bestiary.start")]),pa("dragover",ie,We),pa("drop",ie,Xe=>X(Xe,a($))),d(k,ie)}),e(Oe),e(je);var U=r(je,2),se=t(U),pe=t(se);fa(pe,{size:16});var Le=r(pe);e(se),e(U);var Ge=r(U,2),Pe=t(Ge);Pe.__click=()=>xe();var B=t(Pe);Kt(B,{size:32,class:"group-hover:scale-110 transition-transform"});var me=r(B,2),D=t(me,!0);e(me),e(Pe);var K=r(Pe,2);He(K,1,n,k=>k.id,(k,$)=>{var ie=_i(),we=t(ie),Qe=t(we),Ye=t(Qe,!0);e(Qe);var Ue=r(Qe,2),ut=t(Ue);e(Ue),e(we);var Dt=r(we,2);{var jt=Ae=>{var bt=xi(),Xe=t(bt),st=t(Xe,!0);e(Xe);var xt=r(Xe,2);{var Ct=_t=>{var pt=bi();pt.__click=()=>Z(a($).id);var Lt=t(pt,!0);e(pt),f(Bt=>i(Lt,Bt),[()=>q.has(a($).id)?z()("session.bestiary.see_less"):z()("session.bestiary.see_more")]),d(_t,pt)};I(xt,_t=>{a($).description.length>120&&_t(Ct)})}e(bt),f(_t=>{Ie(Xe,1,`text-xs text-slate-400 leading-relaxed ${_t??""}`),i(st,a($).description)},[()=>q.has(a($).id)?"":"line-clamp-3"]),d(Ae,bt)},kt=Ae=>{var bt=mi(),Xe=t(bt,!0);e(bt),f(st=>i(Xe,st),[()=>z()("session.bestiary.no_description")]),d(Ae,bt)};I(Dt,Ae=>{a($).description?Ae(jt):Ae(kt,!1)})}var mt=r(Dt,2),Mt=t(mt);Mt.__click=()=>xe(a($));var Ht=t(Mt,!0);e(Mt);var $t=r(Mt,2);$t.__click=()=>Te(a($).id);var zt=t($t);ca(zt,{size:14}),e($t),e(mt),e(ie),f((Ae,bt)=>{i(Ye,a($).name),i(ut,`${Ae??""} ${a($).difficulty??""}`),i(Ht,bt)},[()=>z()("session.bestiary.level"),()=>z()("common.buttons.edit")]),pa("dragstart",ie,Ae=>ye(Ae,a($))),d(k,ie)});var ve=r(K,2);{var ue=k=>{var $=fi(),ie=t($,!0);e($),f(we=>i(ie,we),[()=>z()("session.bestiary.no_enemies")]),d(k,$)};I(ve,k=>{n().length===0&&k(ue)})}e(Ge);var _e=r(Ge,2);si(_e,{get isOpen(){return a(l)},get initialData(){return a(L)},onClose:()=>O(l,!1),onSave:le});var Ze=r(_e,2);di(Ze,{get isOpen(){return a(oe)},get initialData(){return a(Se)},onClose:()=>O(oe,!1),onSave:re});var Ne=r(Ze,2);Na(Ne,{get isOpen(){return a(ge).isOpen},get title(){return a(ge).title},get message(){return a(ge).message},get onConfirm(){return a(ge).onConfirm},onCancel:()=>a(ge).isOpen=!1}),e(W),f((k,$,ie,we)=>{i(tt,` ${k??""}`),i(wt,$),i(Le,` ${ie??""}`),i(D,we)},[()=>z()("session.bestiary.encounters_title"),()=>z()("session.bestiary.new_encounter"),()=>z()("session.bestiary.title"),()=>z()("session.bestiary.new_enemy")]),d(M,W),ea(),C()}ta(["click"]);var hi=b('<div class="flex items-center gap-1 text-slate-400 ml-1"><!> <span class="text-xs"> </span></div>'),yi=b('<div class="flex items-center gap-1 text-emerald-400"><!> <span class="text-xs font-bold hidden sm:block"> </span></div> <!>',1),wi=b('<div class="flex items-center gap-1 text-slate-500"><!> <span class="text-xs hidden sm:block"> </span></div>'),ki=b('<span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border border-slate-900"></span></span>'),$i=b('<header class="bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-40 shadow-2xl"><div class="max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-3"><div class="flex items-center justify-between gap-2 sm:gap-4"><div class="flex items-center gap-1 sm:gap-3 shrink-0"><button class="p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all flex items-center gap-1 group"><!> <!></button> <div class="flex flex-col"><h1 class="text-base sm:text-lg font-black text-white leading-tight truncate max-w-[140px] sm:max-w-none"> </h1> <span class="text-xs text-indigo-400 font-mono font-black uppercase tracking-wider"> </span></div></div> <div class="hidden md:flex bg-slate-950/50 p-1 rounded-xl border border-white/5"><button><!> <span class="hidden min-[400px]:block"> </span></button> <button><!> <span class="hidden min-[400px]:block"> </span></button></div> <div class="flex items-center gap-1 sm:gap-2"><div class="flex items-center gap-2 mr-2 border-r border-white/10 pr-2"><!></div> <button class="p-2 sm:p-2.5 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-all"><!></button> <button class="p-2 sm:p-2.5 bg-indigo-600/10 text-indigo-400 border border-indigo-400/20 rounded-lg hover:bg-indigo-600 hover:text-white transition-all relative"><!> <!></button></div></div></div></header>');function zi(M,s){Yt(s,!0);const n=()=>it(Ft,"$t",C),x=()=>it(tr,"$syncState",C),z=()=>it(na,"$isHistoryOpen",C),Q=()=>it(ar,"$hasUnreadRolls",C),[C,l]=aa();let E=Rt(s,"campaignName",3,""),L=Rt(s,"gmName",3,"Mestre"),oe=Rt(s,"activeSubTab",3,"session"),te=Rt(s,"onTabChange",3,()=>{}),Se=Rt(s,"onOpenSettings",3,()=>{});var ge=$i(),J=t(ge),xe=t(J),q=t(xe),Z=t(q);Z.__click=()=>$r(Pa("/"));var le=t(Z);Ha(le,{size:20,class:"group-hover:-translate-x-0.5 transition-transform"});var Te=r(le,2);xr(Te,{size:18,class:"hidden sm:block opacity-50"}),e(Z);var et=r(Z,2),re=t(et),de=t(re,!0);e(re);var fe=r(re,2),ye=t(fe,!0);e(fe),e(et),e(q);var We=r(q,2),X=t(We);X.__click=()=>te()("session");var W=t(X);{let B=ne(()=>oe()==="session"?"opacity-100":"opacity-50");La(W,{size:14,get class(){return a(B)}})}var je=r(W,2),ze=t(je,!0);e(je),e(X);var Me=r(X,2);Me.__click=()=>te()("bestiary");var Ce=t(Me);{let B=ne(()=>oe()==="bestiary"?"opacity-100":"opacity-50");Wa(Ce,{size:14,get class(){return a(B)}})}var tt=r(Ce,2),Oe=t(tt,!0);e(tt),e(Me),e(We);var Ve=r(We,2),ct=t(Ve),Ke=t(ct);{var wt=B=>{var me=yi(),D=$e(me),K=t(D);Ta(K,{size:16});var ve=r(K,2),ue=t(ve,!0);e(ve),e(D);var _e=r(D,2);{var Ze=Ne=>{var k=hi(),$=t(k);Sa($,{size:14});var ie=r($,2),we=t(ie,!0);e(ie),e(k),f(Qe=>{Ee(k,"title",Qe),i(we,x().peers.length)},[()=>n()("common.status.peers",{count:x().peers.length})]),d(Ne,k)};I(_e,Ne=>{x().peers.length>0&&Ne(Ze)})}f((Ne,k)=>{Ee(D,"title",Ne),i(ue,k)},[()=>n()("common.status.connected"),()=>n()("common.status.connected")]),d(B,me)},lt=B=>{var me=wi(),D=t(me);zr(D,{size:16});var K=r(D,2),ve=t(K,!0);e(K),e(me),f((ue,_e)=>{Ee(me,"title",ue),i(ve,_e)},[()=>n()("common.status.offline"),()=>n()("common.status.offline")]),d(B,me)};I(Ke,B=>{x().isConnected?B(wt):B(lt,!1)})}e(ct);var U=r(ct,2);U.__click=function(...B){Se()?.apply(this,B)};var se=t(U);hr(se,{size:20}),e(U);var pe=r(U,2);pe.__click=()=>na.update(B=>!B);var Le=t(pe);mr(Le,{size:20});var Ge=r(Le,2);{var Pe=B=>{var me=ki();d(B,me)};I(Ge,B=>{Q()&&B(Pe)})}e(pe),e(Ve),e(xe),e(J),e(ge),f((B,me,D,K,ve,ue,_e,Ze)=>{Ee(Z,"aria-label",B),Ee(Z,"title",me),i(de,E()),i(ye,L()),Ie(X,1,`flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-lg text-xs font-black transition-all ${oe()==="session"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:text-slate-300"}`),Ee(X,"aria-pressed",oe()==="session"),i(ze,D),Ie(Me,1,`flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-lg text-xs font-black transition-all ${oe()==="bestiary"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:text-slate-300"}`),Ee(Me,"aria-pressed",oe()==="bestiary"),i(Oe,K),Ee(U,"aria-label",ve),Ee(U,"title",ue),Ee(pe,"aria-label",_e),Ee(pe,"title",Ze),Ee(pe,"aria-pressed",z())},[()=>n()("character.header.back_dashboard"),()=>n()("character.header.back_dashboard"),()=>n()("common.labels.session"),()=>n()("common.labels.bestiary"),()=>n()("common.buttons.settings"),()=>n()("common.buttons.settings"),()=>n()("character.header.history"),()=>n()("character.header.history")]),d(M,ge),ea(),l()}ta(["click"]);var Ci=b('<!> <!> <main class="max-w-7xl mx-auto p-4 md:p-8 animate-in slide-in-from-bottom-4 duration-500"><!></main>',1),Ei=b('<div class="flex flex-col items-center justify-center min-h-screen p-4 text-center"><div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ghost"><path d="M9 10h.01"></path><path d="M15 10h.01"></path><path d="M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"></path></svg></div> <h1 class="text-2xl font-black text-white mb-2 uppercase tracking-tight"> </h1> <p class="text-slate-400 mb-8 max-w-md"> </p> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-xl font-bold transition-all flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><path d="m12 19-7-7 7-7"></path><path d="19 12H5"></path></svg> </button></div>'),ji=b('<div class="flex items-center justify-center min-h-screen"><div class="relative w-16 h-16"><div class="absolute inset-0 border-4 border-indigo-500/20 rounded-full"></div> <div class="absolute inset-0 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div></div></div>'),Mi=b('<div class="fixed bottom-24 left-1/2 -translate-x-1/2 md:left-8 md:translate-x-0 z-[60] flex flex-col items-center gap-2"><div class="bg-slate-900/95 backdrop-blur-md border border-white/10 rounded-2xl p-2 flex items-center gap-2 shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 duration-200"><button class="bg-indigo-600/20 hover:bg-indigo-600 text-indigo-400 hover:text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-indigo-500/20"><span class="text-[10px] opacity-70">d20</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">1d6</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">2d6</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">3d6</span> <!></button> <div class="w-px h-8 bg-white/10 mx-1"></div> <button class="w-10 h-10 flex items-center justify-center text-slate-500 hover:text-white transition-colors"><!></button></div></div>  <div class="fixed inset-0 bg-black/40 z-[55]"></div>',1),Oi=b('<div class="min-h-screen bg-slate-950 text-slate-100 font-sans pb-20"><!> <!> <!> <div class="hidden md:block fixed bottom-8 left-8 z-[60]"><button class="w-16 h-16 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full shadow-[0_0_20px_rgba(79,70,229,0.4)] flex items-center justify-center transition-all active:scale-90 border-2 border-white/10 group" title="Rolagens Rápidas"><!></button></div> <nav class="md:hidden fixed bottom-0 left-0 right-0 z-50 px-4 pb-6 pt-2 pointer-events-none"><div class="max-w-md mx-auto relative h-16 pointer-events-auto"><div class="absolute inset-0 bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden"><div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-indigo-500/30 to-transparent"></div></div> <div class="relative h-full flex items-center justify-around px-2"><button><!> <span class="text-[9px] font-black uppercase tracking-widest leading-none">Sessão</span></button> <div class="relative w-16 h-16 -mt-10 flex items-center justify-center"><div class="absolute inset-0 bg-indigo-600/20 rounded-full blur-xl animate-pulse"></div> <button class="relative w-14 h-14 bg-indigo-600 rounded-full flex items-center justify-center shadow-[0_0_20px_rgba(79,70,229,0.5)] border-4 border-slate-900 transition-all active:scale-90 hover:bg-indigo-500 z-10" aria-label="Rolar Dados"><!></button></div> <button><!> <span class="text-[9px] font-black uppercase tracking-widest leading-none">Bestiário</span></button></div></div></nav> <!></div>');function Xi(M,s){Yt(s,!0);const n=()=>it(Xa,"$page",C),x=()=>it(ir,"$liveCampaigns",C),z=()=>it(Ft,"$t",C),Q=()=>it(na,"$isHistoryOpen",C),[C,l]=aa();let E=Be("session"),L=Be(!1),oe=ne(()=>n().params.id),te=ne(()=>x().find(U=>U.id===a(oe))),Se=ne(()=>!!a(te));function ge(U){if(!a(oe)||!a(te))return;const se={...a(te),...U};Et.set(a(oe),se),wa(a(oe),{name:se.name,gmName:se.gmName}),O(L,!1)}let J=Be(!1),xe=Be(Xt({isOpen:!1,sides:20,count:1,modifier:0}));function q(U,se=1){O(xe,{isOpen:!0,sides:U,count:se,modifier:0},!0)}function Z(U){if(!a(te))return;const se=ls(a(xe).sides,a(xe).count,U);let pe="";a(xe).count>1&&(pe+=`Dados: [${se.results.join(", ")}] `),se.bonusRolls?.length>0&&(pe+=`Bonus Rolls: [${se.bonusRolls.join(", ")}] -> ${Math.abs(se.modifierTotal)}`);const Le=a(te).gmName||ha(Ft)("common.labels.master");rr.addToHistory({source:"GM",charName:Le,name:`${a(xe).count}d${a(xe).sides} ${U?U>0?`+${U}`:U:""}`,description:pe.trim()||null,total:se.total,formula:se.formula,crit:se.crit}),na.set(!0),a(xe).isOpen=!1}var le=Oi(),Te=t(le);{var et=U=>{var se=Ci(),pe=$e(se);zi(pe,{get campaignName(){return a(te).name},get gmName(){return a(te).gmName},get activeSubTab(){return a(E)},onTabChange:D=>O(E,D,!0),onOpenSettings:()=>O(L,!0)});var Le=r(pe,2);{let D=ne(()=>JSON.stringify(a(te)));wr(Le,{get isOpen(){return a(L)},get initialData(){return a(D)},onClose:()=>O(L,!1),onSave:ge})}var Ge=r(Le,2),Pe=t(Ge);{var B=D=>{Ps(D,{get campaign(){return a(te)}})},me=D=>{var K=rt(),ve=$e(K);{var ue=_e=>{gi(_e,{get campId(){return a(oe)}})};I(ve,_e=>{a(E)==="bestiary"&&_e(ue)},!0)}d(D,K)};I(Pe,D=>{a(E)==="session"?D(B):D(me,!1)})}e(Ge),d(U,se)},re=U=>{var se=rt(),pe=$e(se);{var Le=Pe=>{var B=Ei(),me=r(t(B),2),D=t(me,!0);e(me);var K=r(me,2),ve=t(K,!0);e(K);var ue=r(K,2);ue.__click=()=>window.history.back();var _e=r(t(ue));e(ue),e(B),f((Ze,Ne,k)=>{i(D,Ze),i(ve,Ne),i(_e,` ${k??""}`)},[()=>z()("campaign.not_found.title"),()=>z()("campaign.not_found.message"),()=>z()("common.buttons.back")]),d(Pe,B)},Ge=Pe=>{var B=ji();d(Pe,B)};I(pe,Pe=>{a(Se)&&!a(te)?Pe(Le):Pe(Ge,!1)},!0)}d(U,se)};I(Te,U=>{a(Se)&&a(te)?U(et):U(re,!1)})}var de=r(Te,2);Da(de,{get isOpen(){return Q()},onClose:()=>na.set(!1)});var fe=r(de,2);{var ye=U=>{var se=Mi(),pe=$e(se),Le=t(pe),Ge=t(Le);Ge.__click=()=>{q(20),O(J,!1)};var Pe=r(t(Ge),2);da(Pe,{size:16}),e(Ge);var B=r(Ge,2);B.__click=()=>{q(6),O(J,!1)};var me=r(t(B),2);da(me,{size:16}),e(B);var D=r(B,2);D.__click=()=>{q(6,2),O(J,!1)};var K=r(t(D),2);da(K,{size:16}),e(D);var ve=r(D,2);ve.__click=()=>{q(6,3),O(J,!1)};var ue=r(t(ve),2);da(ue,{size:16}),e(ve);var _e=r(ve,4);_e.__click=()=>O(J,!1);var Ze=t(_e);va(Ze,{size:20}),e(_e),e(Le),e(pe);var Ne=r(pe,2);Ne.__click=()=>O(J,!1),d(U,se)};I(fe,U=>{a(J)&&U(ye)})}var We=r(fe,2),X=t(We);X.__click=()=>O(J,!a(J));var W=t(X);da(W,{size:32,class:"group-hover:rotate-12 transition-transform"}),e(X),e(We);var je=r(We,2),ze=t(je),Me=r(t(ze),2),Ce=t(Me);Ce.__click=()=>{O(E,"session"),O(J,!1)};var tt=t(Ce);{let U=ne(()=>a(E)==="session"?"animate-in zoom-in-75 duration-300":"");La(tt,{size:20,get class(){return a(U)}})}Qt(2),e(Ce);var Oe=r(Ce,2),Ve=r(t(Oe),2);Ve.__click=()=>O(J,!a(J));var ct=t(Ve);{let U=ne(()=>a(J)?"rotate-90":"rotate-0");da(ct,{size:28,get class(){return`text-white ${a(U)??""} transition-transform duration-300`}})}e(Ve),e(Oe);var Ke=r(Oe,2);Ke.__click=()=>{O(E,"bestiary"),O(J,!1)};var wt=t(Ke);{let U=ne(()=>a(E)==="bestiary"?"animate-in zoom-in-75 duration-300":"");Wa(wt,{size:20,get class(){return a(U)}})}Qt(2),e(Ke),e(Me),e(ze),e(je);var lt=r(je,2);{let U=ne(()=>`${z()("session.quick.roll_title")} (${a(xe).count}d${a(xe).sides})`),se=ne(()=>a(xe).sides===20?z()("session.quick.boons_banes"):z()("session.quick.fixed_modifier"));_r(lt,{get isOpen(){return a(xe).isOpen},get title(){return a(U)},get label(){return a(se)},onClose:()=>a(xe).isOpen=!1,onRoll:Z,initialModifier:0})}e(le),f(()=>{Ie(Ce,1,`flex flex-col items-center justify-center gap-1 flex-1 transition-all ${a(E)==="session"?"text-indigo-400":"text-slate-500 hover:text-slate-300"}`),Ie(Ke,1,`flex flex-col items-center justify-center gap-1 flex-1 transition-all ${a(E)==="bestiary"?"text-indigo-400":"text-slate-500 hover:text-slate-300"}`)}),d(M,le),ea(),l()}ta(["click"]);export{Xi as component};
