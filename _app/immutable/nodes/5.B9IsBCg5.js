const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/BqTPuKKD.js","../chunks/COX-Du3q.js","../chunks/B1e8pvGG.js","../chunks/-uljABfF.js"])))=>i.map(i=>d[i]);
import{a as H,s as He,_ as Je}from"../chunks/-uljABfF.js";import"../chunks/DsnmJJEf.js";import{d as Re,o as Te,s as v}from"../chunks/B1e8pvGG.js";import{d as _e,e as z,a as _,p as Ue,f as g,l as r,s as o,t as b,k as Ve,o as u,j as t,G as N,H as j,w as i,I as We}from"../chunks/COX-Du3q.js";import{e as qe,$ as Be,s as ce,i as De,r as Le,a as Se}from"../chunks/CEeMCE7T.js";import{l as Fe,s as Ke,i as h}from"../chunks/-cW7HwuZ.js";import{c as Qe,a as Xe,i as Ye,b as Ze}from"../chunks/BqTPuKKD.js";import{p as et}from"../chunks/BtklqfMH.js";import{C as tt,l as at}from"../chunks/D101yREh.js";import{g as pe}from"../chunks/B3QEisZr.js";import{U as rt,r as me,W as it}from"../chunks/BgSr5azW.js";import{v as st}from"../chunks/BYmFNSF7.js";import{C as ot}from"../chunks/yCfd3Xoi.js";import"../chunks/DRxX7t_H.js";import{I as nt,s as lt}from"../chunks/DJJOPez5.js";function fe(B,J){const D=Fe(J,["children","$$slots","$$events","$$legacy"]);const M=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]];nt(B,Ke({name:"triangle-alert"},()=>D,{get iconNode(){return M},children:(n,C)=>{var R=_e(),k=z(R);lt(k,J,"default",{}),_(n,R)},$$slots:{default:!0}}))}var dt=g('<span class="block text-xs mt-1 uppercase tracking-widest text-slate-500 font-black"> </span>'),vt=g('<div class="mt-4 px-3 py-1 bg-amber-500/10 border border-amber-500/20 rounded-full text-[10px] text-amber-500 font-bold uppercase tracking-wider animate-pulse flex items-center gap-2"><!> </div>'),ct=g('<div class="mb-6 bg-red-500/10 border border-red-500/20 rounded-xl p-3 flex items-center gap-3"><!> <p class="text-red-400 text-sm font-bold"> </p></div>'),pt=g('<p class="text-red-400 text-xs mt-1"> </p>'),mt=g('<div class="mb-6 bg-slate-950/50 p-4 rounded-xl border border-slate-800"><label for="campaign-pwd-input" class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-indigo-500 animate-pulse"></div> </label> <input id="campaign-pwd-input" type="password"/> <!></div>'),ft=g('<button><div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-xs font-bold"> </div> <div class="flex-1 text-left"><div class="font-bold text-sm"> </div> <div class="text-[10px] opacity-60"> </div></div> <!></button>'),_t=g("<div> </div> <div> </div>",1),ut=g('<div class="flex flex-col items-center gap-2"><!> <div class="text-amber-500 font-bold"> </div> <div class="text-xs text-slate-500"> </div></div>'),bt=g('<div class="text-center py-8 text-slate-600 italic text-sm space-y-2"><!></div>'),gt=g('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> ',1),xt=g('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> ',1),ht=g('<div class="min-h-screen bg-slate-950 flex items-center justify-center p-4"><div class="max-w-md w-full bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl"><div class="flex flex-col items-center text-center mb-8"><div class="w-16 h-16 bg-indigo-600/20 rounded-full flex items-center justify-center text-indigo-400 mb-4 border border-indigo-500/30"><!></div> <h1 class="text-2xl font-bold text-white mb-2"> </h1> <p class="text-slate-400"> <span class="text-indigo-400 font-bold"> </span> <!></p> <!></div> <!> <!> <div class="space-y-4 mb-8"><label for="char-selector" class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"> </label> <div id="char-selector" class="space-y-2 max-h-60 overflow-y-auto custom-scrollbar pr-2"><!> <!></div></div> <div class="flex gap-3"><button class="flex-1 py-3 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-bold transition-all"> </button> <button class="flex-1 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold transition-all shadow-lg shadow-indigo-900/20 flex items-center justify-center gap-2"><!></button></div></div></div> <!>',1);function Ht(B,J){Ue(J,!0);const D=()=>H(et,"$page",k),M=()=>H(Qe,"$character",k),n=()=>H(Be,"$t",k),C=()=>H(at,"$liveCharacters",k),R=()=>H(Ye,"$isGmOnline",k),[k,ue]=He(),O=D().params.id;let A=j(()=>M().campaignName||n()("invite.searching")),L=j(()=>M().gmName||"..."),T=j(()=>M().passwordHash),ae=j(()=>C().filter(a=>!a.campaignId)),x=N(null),U=N(!1),E=N(""),G=N(!1),V=N(!1),I=N("");Te(()=>{O&&Xe(O,!1)});async function be(){if(u(I,""),!t(x)||!O)return;if(C().find(e=>e.id===t(x))?.campaignId){u(I,n()("invite.already_in_campaign"),!0);return}if(t(T)){if(!t(E)){u(G,!0);return}u(V,!0);const e=await st(t(E),t(T));if(u(V,!1),!e){u(G,!0);return}}u(G,!1),u(U,!0)}function ge(){if(!t(x)||!O)return;const a=C().find(e=>e.id===t(x));if(a){if(a.campaignId){u(I,n()("invite.already_in_campaign"),!0),u(U,!1);return}Je(async()=>{const{charactersMap:e}=await import("../chunks/BqTPuKKD.js").then(s=>s.S);return{charactersMap:e}},__vite__mapDeps([0,1,2,3]),import.meta.url).then(({charactersMap:e})=>{e.set(t(x),{...a,campaignId:O,campaignName:t(A),gmName:t(L),campaignApproval:"pending"}),pe(me("/characters/[id]",{id:t(x)}))})}}var re=ht(),S=z(re),ie=r(S),F=r(ie),K=r(F),xe=r(K);rt(xe,{size:32}),i(K);var Q=o(K,2),he=r(Q,!0);i(Q);var X=o(Q,2),se=r(X),Y=o(se),we=r(Y,!0);i(Y);var $e=o(Y,2);{var ye=a=>{var e=dt(),s=r(e);i(e),b(l=>v(s,`${l??""}: ${t(L)??""}`),[()=>n()("common.labels.master")]),_(a,e)};h($e,a=>{t(L)!=="..."&&a(ye)})}i(X);var ke=o(X,2);{var Ce=a=>{var e=vt(),s=r(e);it(s,{size:12});var l=o(s);i(e),b(f=>v(l,` ${f??""}`),[()=>n()("invite.waiting_gm")]),_(a,e)};h(ke,a=>{R()||a(Ce)})}i(F);var oe=o(F,2);{var Ie=a=>{var e=ct(),s=r(e);fe(s,{size:20,class:"text-red-500 mb-0.5"});var l=o(s,2),f=r(l,!0);i(l),i(e),b(()=>v(f,t(I))),_(a,e)};h(oe,a=>{t(I)&&a(Ie)})}var ne=o(oe,2);{var Ne=a=>{var e=mt(),s=r(e),l=o(r(s));i(s);var f=o(s,2);Le(f);var c=o(f,2);{var p=d=>{var m=pt(),$=r(m,!0);i(m),b(y=>v($,y),[()=>n()("invite.password.incorrect")]),_(d,m)};h(c,d=>{t(G)&&d(p)})}i(e),b((d,m)=>{v(l,` ${d??""}`),Se(f,"placeholder",m),ce(f,1,`w-full bg-slate-900 border ${t(G)?"border-red-500":"border-slate-700"} rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors`)},[()=>n()("invite.password.required"),()=>n()("invite.password.placeholder")]),Ze(f,()=>t(E),d=>u(E,d)),_(a,e)};h(ne,a=>{t(T)&&a(Ne)})}var Z=o(ne,2),ee=r(Z),je=r(ee,!0);i(ee);var le=o(ee,2),de=r(le);qe(de,17,()=>t(ae),De,(a,e)=>{var s=ft();s.__click=()=>{u(x,t(e).id,!0),u(I,"")};var l=r(s),f=r(l,!0);i(l);var c=o(l,2),p=r(c),d=r(p,!0);i(p);var m=o(p,2),$=r(m);i(m),i(c);var y=o(c,2);{var P=w=>{ot(w,{size:16,class:"text-indigo-400"})};h(y,w=>{t(x)===t(e).id&&w(P)})}i(s),b((w,te)=>{ce(s,1,`w-full flex items-center gap-3 p-3 rounded-xl border transition-all ${t(x)===t(e).id?"bg-indigo-600/20 border-indigo-500 text-white":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-700"}`),v(f,w),v(d,t(e).name),v($,`${te??""} ${t(e).level??""} â€¢ ${t(e).ancestry??""}`)},[()=>t(e).name.charAt(0),()=>n()("common.labels.level")]),_(a,s)});var ze=o(de,2);{var Me=a=>{var e=bt(),s=r(e);{var l=c=>{var p=_t(),d=z(p),m=r(d,!0);i(d);var $=o(d,2),y=r($,!0);i($),b((P,w)=>{v(m,P),v(y,w)},[()=>n()("invite.no_characters"),()=>n()("invite.create_first")]),_(c,p)},f=c=>{var p=ut(),d=r(p);fe(d,{size:24,class:"text-amber-500"});var m=o(d,2),$=r(m,!0);i(m);var y=o(m,2),P=r(y,!0);i(y),i(p),b((w,te)=>{v($,w),v(P,te)},[()=>n()("invite.all_in_campaigns"),()=>n()("invite.create_or_leave")]),_(c,p)};h(s,c=>{C().length===0?c(l):c(f,!1)})}i(e),_(a,e)};h(ze,a=>{t(ae).length===0&&a(Me)})}i(le),i(Z);var ve=o(Z,2),W=r(ve);W.__click=()=>pe(me("/"));var Oe=r(W,!0);i(W);var q=o(W,2);q.__click=be;var Ae=r(q);{var Ee=a=>{var e=gt(),s=o(z(e));b(l=>v(s,` ${l??""}`),[()=>n()("invite.validating")]),_(a,e)},Ge=a=>{var e=_e(),s=z(e);{var l=c=>{var p=xt(),d=o(z(p));b(m=>v(d,` ${m??""}`),[()=>n()("invite.loading")]),_(c,p)},f=c=>{var p=We();b(d=>v(p,d),[()=>n()("invite.accept")]),_(c,p)};h(s,c=>{t(A)===n()("invite.searching")?c(l):c(f,!1)},!0)}_(a,e)};h(Ae,a=>{t(V)?a(Ee):a(Ge,!1)})}i(q),i(ve),i(ie),i(S);var Pe=o(S,2);{let a=j(()=>n()("invite.confirm_title")),e=j(()=>n()("invite.confirm_message",{values:{campaign:t(A),character:C().find(s=>s.id===t(x))?.name}}));tt(Pe,{get isOpen(){return t(U)},get title(){return t(a)},get message(){return t(e)},onConfirm:ge,onCancel:()=>u(U,!1)})}b((a,e,s,l)=>{v(he,a),v(se,`${e??""} `),v(we,t(A)),v(je,s),v(Oe,l),q.disabled=!t(x)||t(V)||!!t(T)&&!t(E)||t(A)==="Buscando campanha..."},[()=>n()("invite.title"),()=>n()("invite.invited_to"),()=>n()("invite.select_character"),()=>n()("invite.decline")]),_(B,re),Ve(),ue()}Re(["click"]);export{Ht as component};
