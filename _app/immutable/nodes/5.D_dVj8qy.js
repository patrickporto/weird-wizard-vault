const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/BBJan54K.js","../chunks/CeQBZBfG.js","../chunks/DGsQstmn.js","../chunks/T6JPUUzi.js","../chunks/DWuGQuIg.js"])))=>i.map(i=>d[i]);
import{a as D,s as qe,_ as Ye}from"../chunks/T6JPUUzi.js";import"../chunks/DsnmJJEf.js";import{d as Ke,o as Qe,s as l}from"../chunks/DGsQstmn.js";import{v as ke,w as E,k as _,x as Xe,j as g,B as r,A as i,t as u,z as Ze,F as x,y as e,R as A,T as C,I as s,U as et,n as tt}from"../chunks/CeQBZBfG.js";import{e as at,$ as rt,s as be,i as st,r as it,a as ot}from"../chunks/DWuGQuIg.js";import{l as nt,s as lt,i as w}from"../chunks/CyF0tIdS.js";import{c as dt,a as vt,i as ct,b as mt}from"../chunks/BBJan54K.js";import{p as pt}from"../chunks/CFy70mEs.js";import{G as he,C as _t,g as le,l as ft,D as Y}from"../chunks/BcAxbBos.js";import{g as we}from"../chunks/B_0yUJcU.js";import{U as ut,r as $e,W as xt}from"../chunks/D_0ujBgd.js";import{v as gt}from"../chunks/BYmFNSF7.js";import{C as bt}from"../chunks/D0RB_YFD.js";import"../chunks/CzS45DwE.js";import{I as ht,s as wt}from"../chunks/FItIFbhF.js";function ye(K,R){const Q=nt(R,["children","$$slots","$$events","$$legacy"]);const N=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]];ht(K,lt({name:"triangle-alert"},()=>Q,{get iconNode(){return N},children:(n,I)=>{var B=ke(),z=E(B);wt(z,R,"default",{}),_(n,B)},$$slots:{default:!0}}))}var $t=g('<span class="block text-xs mt-1 uppercase tracking-widest text-slate-500 font-black"> </span>'),yt=g('<div class="mt-4 px-3 py-1 bg-amber-500/10 border border-amber-500/20 rounded-full text-[10px] text-amber-500 font-bold uppercase tracking-wider animate-pulse flex items-center gap-2"><!> </div>'),kt=g('<div class="mb-6 bg-red-500/10 border border-red-500/20 rounded-xl p-3 flex items-center gap-3"><!> <p class="text-red-400 text-sm font-bold"> </p></div>'),Ct=g('<p class="text-red-400 text-xs mt-1"> </p>'),It=g('<div class="mb-6 bg-slate-950/50 p-4 rounded-xl border border-slate-800"><label for="campaign-pwd-input" class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-indigo-500 animate-pulse"></div> </label> <input id="campaign-pwd-input" type="password"/> <!></div>'),zt=g('<button><div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-xs font-bold"> </div> <div class="flex-1 text-left"><div class="font-bold text-sm"> </div> <div class="text-[10px] opacity-60 flex items-center gap-1"> <span class="w-1 h-1 rounded-full bg-slate-600"></span> <!> </div></div> <!></button>'),Nt=g("<div> </div> <div> </div>",1),jt=g('<div class="text-xs text-slate-500 max-w-[200px]">Você tem personagens, mas eles são de outro sistema de jogo. Crie um personagem para <strong> </strong>.</div>'),Mt=g('<div class="text-xs text-slate-500"> </div>'),At=g('<div class="flex flex-col items-center gap-2"><!> <div class="text-amber-500 font-bold"> </div> <!></div>'),Et=g('<div class="text-center py-8 text-slate-600 italic text-sm space-y-2"><!></div>'),Gt=g('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> ',1),Ot=g('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> ',1),St=g('<div class="min-h-screen bg-slate-950 flex items-center justify-center p-4"><div class="max-w-md w-full bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl"><div class="flex flex-col items-center text-center mb-8"><div class="w-16 h-16 bg-indigo-600/20 rounded-full flex items-center justify-center text-indigo-400 mb-4 border border-indigo-500/30"><!></div> <h1 class="text-2xl font-bold text-white mb-2"> </h1> <p class="text-slate-400"> <span class="text-indigo-400 font-bold"> </span> <!></p> <div class="mt-4 inline-flex items-center gap-1.5 px-3 py-1 rounded bg-slate-800 text-[10px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div> <!></div> <!> <!> <div class="space-y-4 mb-8"><label for="char-selector" class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"> </label> <div id="char-selector" class="space-y-2 max-h-60 overflow-y-auto custom-scrollbar pr-2"><!> <!></div></div> <div class="flex gap-3"><button class="flex-1 py-3 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-bold transition-all"> </button> <button class="flex-1 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold transition-all shadow-lg shadow-indigo-900/20 flex items-center justify-center gap-2"><!></button></div></div></div> <!>',1);function Qt(K,R){Xe(R,!0);const Q=()=>D(pt,"$page",z),N=()=>D(dt,"$character",z),n=()=>D(rt,"$t",z),I=()=>D(ft,"$liveCharacters",z),B=()=>D(ct,"$isGmOnline",z),[z,Ce]=qe(),G=Q().params.id;let O=C(()=>N().campaignName||n()("invite.searching")),X=C(()=>N().gmName||"..."),F=C(()=>N().passwordHash),H=C(()=>N().system||Y),de=C(()=>I().filter(a=>!a.campaignId&&(a.system||Y)===e(H))),Ie=C(()=>I().some(a=>!a.campaignId&&(a.system||Y)!==e(H))),h=A(null),J=A(!1),S=A(""),T=A(!1),L=A(!1),j=A("");Qe(()=>{G&&vt(G,!1)});async function ze(){if(x(j,""),!e(h)||!G)return;if(I().find(t=>t.id===e(h))?.campaignId){x(j,n()("invite.already_in_campaign"),!0);return}if(e(F)){if(!e(S)){x(T,!0);return}x(L,!0);const t=await gt(e(S),e(F));if(x(L,!1),!t){x(T,!0);return}}x(T,!1),x(J,!0)}function Ne(){if(!e(h)||!G)return;const a=I().find(t=>t.id===e(h));if(a){if(a.campaignId){x(j,n()("invite.already_in_campaign"),!0),x(J,!1);return}Ye(async()=>{const{charactersMap:t}=await import("../chunks/BBJan54K.js").then(o=>o.V);return{charactersMap:t}},__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(({charactersMap:t})=>{t.set(e(h),{...a,campaignId:G,campaignName:e(O),gmName:e(X),campaignApproval:"pending"}),we($e("/characters/[id]",{id:e(h)}))})}}var ve=St(),Z=E(ve),ce=r(Z),ee=r(ce),te=r(ee),je=r(te);ut(je,{size:32}),s(te);var ae=i(te,2),Me=r(ae,!0);s(ae);var re=i(ae,2),me=r(re),se=i(me),Ae=r(se,!0);s(se);var Ee=i(se,2);{var Ge=a=>{var t=$t(),o=r(t);s(t),u(d=>l(o,`${d??""}: ${e(X)??""}`),[()=>n()("common.labels.master")]),_(a,t)};w(Ee,a=>{e(X)!=="..."&&a(Ge)})}s(re);var ie=i(re,2),pe=r(ie);he(pe,{size:12});var Oe=i(pe);s(ie);var Se=i(ie,2);{var Te=a=>{var t=yt(),o=r(t);xt(o,{size:12});var d=i(o);s(t),u(p=>l(d,` ${p??""}`),[()=>n()("invite.waiting_gm")]),_(a,t)};w(Se,a=>{B()||a(Te)})}s(ee);var _e=i(ee,2);{var Pe=a=>{var t=kt(),o=r(t);ye(o,{size:20,class:"text-red-500 mb-0.5"});var d=i(o,2),p=r(d,!0);s(d),s(t),u(()=>l(p,e(j))),_(a,t)};w(_e,a=>{e(j)&&a(Pe)})}var fe=i(_e,2);{var Ue=a=>{var t=It(),o=r(t),d=i(r(o));s(o);var p=i(o,2);it(p);var c=i(p,2);{var m=v=>{var f=Ct(),y=r(f,!0);s(f),u(k=>l(y,k),[()=>n()("invite.password.incorrect")]),_(v,f)};w(c,v=>{e(T)&&v(m)})}s(t),u((v,f)=>{l(d,` ${v??""}`),ot(p,"placeholder",f),be(p,1,`w-full bg-slate-900 border ${e(T)?"border-red-500":"border-slate-700"} rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors`)},[()=>n()("invite.password.required"),()=>n()("invite.password.placeholder")]),mt(p,()=>e(S),v=>x(S,v)),_(a,t)};w(fe,a=>{e(F)&&a(Ue)})}var oe=i(fe,2),ne=r(oe),Ve=r(ne,!0);s(ne);var ue=i(ne,2),xe=r(ue);at(xe,17,()=>e(de),st,(a,t)=>{var o=zt();o.__click=()=>{x(h,e(t).id,!0),x(j,"")};var d=r(o),p=r(d,!0);s(d);var c=i(d,2),m=r(c),v=r(m,!0);s(m);var f=i(m,2),y=r(f),k=i(y,3);he(k,{size:8});var P=i(k);s(f),s(c);var U=i(c,2);{var $=b=>{bt(b,{size:16,class:"text-indigo-400"})};w(U,b=>{e(h)===e(t).id&&b($)})}s(o),u((b,M,V)=>{be(o,1,`w-full flex items-center gap-3 p-3 rounded-xl border transition-all ${e(h)===e(t).id?"bg-indigo-600/20 border-indigo-500 text-white":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-700"}`),l(p,b),l(v,e(t).name),l(y,`${M??""} ${e(t).level??""} • ${e(t).ancestry??""} `),l(P,` ${V??""}`)},[()=>e(t).name.charAt(0),()=>n()("common.labels.level"),()=>le(e(t).system||Y).name]),_(a,o)});var De=i(xe,2);{var Re=a=>{var t=Et(),o=r(t);{var d=c=>{var m=Nt(),v=E(m),f=r(v,!0);s(v);var y=i(v,2),k=r(y,!0);s(y),u((P,U)=>{l(f,P),l(k,U)},[()=>n()("invite.no_characters"),()=>n()("invite.create_first")]),_(c,m)},p=c=>{var m=At(),v=r(m);ye(v,{size:24,class:"text-amber-500"});var f=i(v,2),y=r(f,!0);s(f);var k=i(f,2);{var P=$=>{var b=jt(),M=i(r(b)),V=r(M,!0);s(M),tt(),s(b),u(We=>l(V,We),[()=>le(e(H)).name]),_($,b)},U=$=>{var b=Mt(),M=r(b,!0);s(b),u(V=>l(M,V),[()=>n()("invite.create_or_leave")]),_($,b)};w(k,$=>{e(Ie)?$(P):$(U,!1)})}s(m),u($=>l(y,$),[()=>n()("invite.all_in_campaigns")]),_(c,m)};w(o,c=>{I().length===0?c(d):c(p,!1)})}s(t),_(a,t)};w(De,a=>{e(de).length===0&&a(Re)})}s(ue),s(oe);var ge=i(oe,2),W=r(ge);W.__click=()=>we($e("/"));var Be=r(W,!0);s(W);var q=i(W,2);q.__click=ze;var Fe=r(q);{var He=a=>{var t=Gt(),o=i(E(t));u(d=>l(o,` ${d??""}`),[()=>n()("invite.validating")]),_(a,t)},Je=a=>{var t=ke(),o=E(t);{var d=c=>{var m=Ot(),v=i(E(m));u(f=>l(v,` ${f??""}`),[()=>n()("invite.loading")]),_(c,m)},p=c=>{var m=et();u(v=>l(m,v),[()=>n()("invite.accept")]),_(c,m)};w(o,c=>{e(O)===n()("invite.searching")?c(d):c(p,!1)},!0)}_(a,t)};w(Fe,a=>{e(L)?a(He):a(Je,!1)})}s(q),s(ge),s(ce),s(Z);var Le=i(Z,2);{let a=C(()=>n()("invite.confirm_title")),t=C(()=>n()("invite.confirm_message",{values:{campaign:e(O),character:I().find(o=>o.id===e(h))?.name}}));_t(Le,{get isOpen(){return e(J)},get title(){return e(a)},get message(){return e(t)},onConfirm:Ne,onCancel:()=>x(J,!1)})}u((a,t,o,d,p)=>{l(Me,a),l(me,`${t??""} `),l(Ae,e(O)),l(Oe,` ${o??""}`),l(Ve,d),l(Be,p),q.disabled=!e(h)||e(L)||!!e(F)&&!e(S)||e(O)==="Buscando campanha..."},[()=>n()("invite.title"),()=>n()("invite.invited_to"),()=>le(e(H)).name,()=>n()("invite.select_character"),()=>n()("invite.decline")]),_(K,ve),Ze(),Ce()}Ke(["click"]);export{Qt as component};
