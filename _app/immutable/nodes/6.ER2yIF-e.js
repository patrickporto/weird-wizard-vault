import"../chunks/DsnmJJEf.js";import{d as se,e as G,a as i,p as it,i as lt,f as l,j as t,r as e,s as r,g as a,G as St,t as C,n as ue,H as ea,F as Lt,S as la,x as oa,k as Le,aj as Zt,ai as ha,u as $a,y as wa}from"../chunks/LAPZz738.js";import{d as pt,s as w,g as Ht}from"../chunks/Cv9CvP4l.js";import{l as Be,s as We,p as ya,i as h}from"../chunks/5XsrLGCt.js";import{a as ce,s as ut,b as Fa}from"../chunks/VjRhTPLG.js";import{c as Oe,U as ka,f as ge,i as Ga,W as Va,r as Ea,k as va,m as Ba,n as Wa,o as Yt,q as ca,t as Ya,u as Ka,g as Qa,v as Fe,I as zt,x as Kt,y as Qt,z as Xa,G as pa,M as Ja,D as Ta,A as Pa,B as Tt,C as Aa,E as Za,F as ua,H as er,J as Ct,a as na,s as za,w as tr,K as ar,j as rr}from"../chunks/Bg6V0DHS.js";import{p as sr}from"../chunks/CAAdNQy_.js";import{g as ja}from"../chunks/eilO8mxO.js";import"../chunks/y8AhTvDO.js";import{s as pe,g as or,r as Ne,e as je,i as Ie,d as De,h as Bt}from"../chunks/DN1kndjz.js";import{i as Nt}from"../chunks/C38PHlvC.js";import{I as Ye,s as Ke}from"../chunks/5P2UBWQH.js";import{a as Ia,C as ir,L as lr,D as nr,b as dr,M as ta,S as aa,G as vr,H as cr}from"../chunks/BJJJEuEd.js";import{W as pr}from"../chunks/FWDUqzmq.js";import{b as me,a as ur}from"../chunks/CDnODwqQ.js";import{M as br,T as Wt,P as ct,a as sa,S as xr,X as ga}from"../chunks/Whl0iriK.js";import{C as Sa}from"../chunks/CTyek7pC.js";import{c as da}from"../chunks/Dqn2xdCA.js";import{t as ba,a as Ca,s as fr}from"../chunks/GX1DoYTZ.js";function ia(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];Ye(S,We({name:"activity"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function gr(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];Ye(S,We({name:"arrow-left"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function xa(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z"}],["path",{d:"M8 10h8"}],["path",{d:"M8 18h8"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"}]];Ye(S,We({name:"backpack"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function _r(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["circle",{cx:"11",cy:"13",r:"9"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95"}],["path",{d:"m22 2-1.5 1.5"}]];Ye(S,We({name:"bomb"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function Ma(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]];Ye(S,We({name:"book"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function _a(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"M16.17 7.83 2 22"}],["path",{d:"M4.02 12a2.827 2.827 0 1 1 3.81-4.17A2.827 2.827 0 1 1 12 4.02a2.827 2.827 0 1 1 4.17 3.81A2.827 2.827 0 1 1 19.98 12a2.827 2.827 0 1 1-3.81 4.17A2.827 2.827 0 1 1 12 19.98a2.827 2.827 0 1 1-4.17-3.81A1 1 0 1 1 4 12"}],["path",{d:"m7.83 7.83 8.34 8.34"}]];Ye(S,We({name:"clover"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function mr(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["circle",{cx:"8",cy:"8",r:"6"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18"}],["path",{d:"M7 6h1v4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82"}]];Ye(S,We({name:"coins"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function hr(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]];Ye(S,We({name:"ellipsis"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function $r(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21"}],["path",{d:"m5.082 11.09 8.828 8.828"}]];Ye(S,We({name:"eraser"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function wr(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z"}]];Ye(S,We({name:"fast-forward"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function Na(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];Ye(S,We({name:"file-text"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function yr(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8"}]];Ye(S,We({name:"infinity"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function kr(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"m5 8 6 6"}],["path",{d:"m4 14 6-6 2-3"}],["path",{d:"M2 5h12"}],["path",{d:"M7 2h1"}],["path",{d:"m22 22-5-10-5 10"}],["path",{d:"M14 18h6"}]];Ye(S,We({name:"languages"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function Da(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"m16 17 5-5-5-5"}],["path",{d:"M21 12H9"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}]];Ye(S,We({name:"log-out"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function Ar(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"}]];Ye(S,We({name:"moon"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function zr(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z"}]];Ye(S,We({name:"rewind"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function Sr(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];Ye(S,We({name:"user"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function ra(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"}],["path",{d:"m14 7 3 3"}],["path",{d:"M5 6v4"}],["path",{d:"M19 14v4"}],["path",{d:"M10 2v2"}],["path",{d:"M7 8H3"}],["path",{d:"M21 16h-4"}],["path",{d:"M11 3H9"}]];Ye(S,We({name:"wand-sparkles"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}function Mt(S,u){const s=Be(u,["children","$$slots","$$events","$$legacy"]);const b=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]];Ye(S,We({name:"zap"},()=>s,{get iconNode(){return b},children:($,z)=>{var n=se(),m=G(n);Ke(m,u,"default",{}),i($,n)},$$slots:{default:!0}}))}const Mr=!1,gi=Object.freeze(Object.defineProperty({__proto__:null,prerender:Mr},Symbol.toStringTag,{value:"Module"}));var Nr=l('<div class="text-[9px] font-black text-amber-500 uppercase tracking-tighter mt-1 animate-pulse">Aguardando Aprovação</div>'),Dr=l('<div class="text-[10px] text-slate-400 mt-0.5 font-medium flex items-center gap-1"><span class="opacity-50 font-bold uppercase tracking-tighter">Mestre:</span> <span class="text-indigo-300"> </span></div>'),Er=l('<div><div class="flex items-center gap-3"><div class="relative"><div><!></div> <div></div></div> <div><div>Campanha Ativa</div> <div class="font-bold text-white text-base leading-tight"> </div> <!></div></div> <button class="bg-slate-900 border border-slate-700 p-2.5 rounded-xl text-slate-500 hover:text-red-400 transition-all active:scale-95" title="Sair"><!></button></div>'),Tr=l("<div><div></div> <span> </span></div>"),Pr=l('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><div><!></div> <h3 class="text-[11px] font-black text-slate-400 uppercase tracking-[0.15em]">Campanha Ativa</h3></div> <button class="p-2 text-slate-600 hover:text-red-400 hover:bg-red-400/5 rounded-lg transition-all opacity-0 group-hover:opacity-100" title="Abandonar Campanha"><!></button></div> <div class="space-y-1"><div class="font-bold text-white text-lg tracking-tight leading-tight"> </div> <div class="text-[10px] font-medium text-slate-500 flex items-center gap-1.5 pt-0.5"><span class="uppercase tracking-tighter opacity-70">Mestre:</span> <span class="text-indigo-400 font-bold"> </span></div></div> <div class="flex items-center justify-between pt-3 border-t border-white/5"><div class="flex items-center gap-2"><div></div> <span> </span></div> <div class="flex items-center gap-1 text-[10px] text-slate-600 font-mono"><!> </div></div></div>');function fa(S,u){it(u,!0);const s=()=>ce(Oe,"$character",$),b=()=>ce(Ga,"$isGmOnline",$),[$,z]=ut();let n=ya(u,"compact",3,!1),m=ya(u,"banner",3,!1);var P=se(),Q=G(P);{var o=g=>{const A=St(()=>s().campaignApproval==="pending");var B=se(),E=G(B);{var H=O=>{var c=Er(),R=t(c),_=t(R),p=t(_),d=t(p);ka(d,{size:20}),e(p);var x=r(p,2);e(_);var f=r(_,2),v=t(f),y=r(v,2),j=t(y,!0);e(y);var q=r(y,2);{var W=F=>{var ae=Nr();i(F,ae)},X=F=>{var ae=Dr(),te=r(t(ae),2),Z=t(te,!0);e(te),e(ae),C(()=>w(Z,s().gmName)),i(F,ae)};h(q,F=>{a(A)?F(W):F(X,!1)})}e(f),e(R);var U=r(R,2);U.__click=()=>{confirm("Sair da campanha?")&&ge.leaveCampaign()};var k=t(U);Da(k,{size:18}),e(U),e(c),C(()=>{pe(c,1,`bg-indigo-600/10 backdrop-blur-md border border-indigo-500/20 rounded-2xl p-4 flex items-center justify-between shadow-xl shadow-indigo-950/20 ${a(A)?"border-amber-500/30 bg-amber-500/5":""}`),pe(p,1,`w-10 h-10 ${a(A)?"bg-amber-600/20 text-amber-400 border-amber-500/30":"bg-indigo-600/20 text-indigo-400 border-indigo-500/30"} rounded-xl flex items-center justify-center`),pe(x,1,`absolute -top-1 -right-1 w-3 h-3 ${a(A)?"bg-amber-500 animate-pulse":b()?"bg-green-500 animate-pulse":"bg-slate-600"} rounded-full border-2 border-slate-950 shadow-[0_0_8px_rgba(34,197,94,0.6)]`),pe(v,1,`text-[10px] ${a(A)?"text-amber-500/70":"text-indigo-400/70"} font-black uppercase tracking-[0.2em] leading-none mb-1`),w(j,s().campaignName)}),i(O,c)},T=O=>{var c=se(),R=G(c);{var _=d=>{var x=Tr(),f=t(x),v=r(f,2),y=t(v,!0);e(v),e(x),C(()=>{pe(x,1,`inline-flex items-center gap-2 px-3 py-1 ${a(A)?"bg-amber-500/10 border-amber-500/20":"bg-indigo-500/10 border-indigo-500/20"} rounded-full shadow-sm glass`),pe(f,1,`w-1.5 h-1.5 rounded-full ${a(A)?"bg-amber-500 animate-pulse":b()?"bg-green-500 animate-pulse":"bg-slate-600"} shadow-[0_0_8px_rgba(34,197,94,0.4)]`),pe(v,1,`text-[9px] font-black ${a(A)?"text-amber-500":"text-indigo-400"} uppercase tracking-widest truncate max-w-[150px]`),w(y,s().campaignName)}),i(d,x)},p=d=>{var x=Pr(),f=t(x),v=t(f),y=t(v),j=t(y);ka(j,{size:16}),e(y),ue(2),e(v);var q=r(v,2);q.__click=function(...ne){ge.leaveCampaign?.apply(this,ne)};var W=t(q);Da(W,{size:14}),e(q),e(f);var X=r(f,2),U=t(X),k=t(U,!0);e(U);var F=r(U,2),ae=r(t(F),2),te=t(ae,!0);e(ae),e(F),e(X);var Z=r(X,2),Y=t(Z),re=t(Y),oe=r(re,2),be=t(oe,!0);e(oe),e(Y);var J=r(Y,2),ie=t(J);{var he=ne=>{Ia(ne,{size:10,class:"opacity-40 animate-spin",style:"animation-duration: 3s"})},ke=ne=>{var de=se(),$e=G(de);{var we=fe=>{Va(fe,{size:10,class:"opacity-40"})},Ae=fe=>{pr(fe,{size:10,class:"opacity-40 text-red-500/50"})};h($e,fe=>{b()?fe(we):fe(Ae,!1)},!0)}i(ne,de)};h(ie,ne=>{a(A)?ne(he):ne(ke,!1)})}var Ee=r(ie);e(J),e(Z),e(x),C(()=>{pe(x,1,`bg-slate-900/50 border border-slate-800 rounded-2xl p-5 space-y-4 shadow-lg backdrop-blur-sm group hover:border-indigo-500/30 transition-all duration-300 ${!b()&&!a(A)?"opacity-60 saturate-50":""} ${a(A)?"border-amber-500/20":""}`),pe(y,1,`p-1.5 ${a(A)?"bg-amber-500/10 text-amber-500":b()?"bg-indigo-500/10 text-indigo-400":"bg-slate-800 text-slate-500"} rounded-lg`),w(k,s().campaignName),w(te,s().gmName),pe(re,1,`w-1.5 h-1.5 rounded-full ${a(A)?"bg-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.4)] animate-pulse":b()?"bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.4)] animate-pulse":"bg-slate-700"}`),pe(oe,1,`text-[11px] font-bold uppercase tracking-wider ${a(A)?"text-amber-500":b()?"text-slate-400":"text-slate-600"}`),w(be,a(A)?"Pendente de Aprovação":b()?"Online":"Offline"),w(Ee,` ${a(A)?"PENDENTE":b()?"SYNCED":"WAITING"}`)}),i(d,x)};h(R,d=>{n()?d(_):d(p,!1)},!0)}i(O,c)};h(E,O=>{m()?O(H):O(T,!1)})}i(g,B)};h(Q,g=>{s().campaignId&&g(o)})}i(S,P),lt(),z()}pt(["click"]);var jr=l('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),Ir=l('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"><div class="absolute inset-0 bg-gradient-to-b from-white/10 to-transparent"></div></div>'),Cr=l('<div class="absolute top-0 left-0 w-full h-full z-20 bg-cyan-400/20 pointer-events-none animate-pulse"></div>'),Or=l('<span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border border-slate-900"></span></span>'),Hr=l('<header class="bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-40 shadow-2xl"><div class="max-w-6xl mx-auto px-2 sm:px-4 py-2 sm:py-3"><div class="flex items-center justify-between gap-2 sm:gap-4"><div class="flex items-center gap-1 sm:gap-3"><button class="p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all flex items-center gap-1 group" aria-label="Voltar para Dashboard" title="Voltar para Dashboard"><!> <!></button> <button class="flex items-center gap-2 group text-left" aria-label="Informações do Personagem"><div class="w-8 h-8 sm:w-10 sm:h-10 bg-indigo-600 rounded-lg sm:rounded-full border border-white/10 flex items-center justify-center text-sm sm:text-lg font-black shadow-lg shadow-indigo-500/20 group-hover:scale-105 transition-transform"> </div> <div class="hidden xs:block svelte-fpzs02"><div class="flex items-center gap-2"><h1 class="text-xs sm:text-sm font-bold text-white leading-tight truncate max-w-[80px] sm:max-w-none group-hover:text-indigo-400 transition-colors"> </h1></div> <p class="text-[10px] text-slate-500 font-medium"> </p></div></button></div> <button class="flex-1 max-w-md cursor-pointer group px-2 sm:px-0 text-left" aria-label="Estado de Saúde"><div class="flex justify-between text-[10px] sm:text-xs mb-1.5 px-1"><span><!></span> <span class="text-slate-400 font-mono flex items-center gap-1 group-hover:text-white transition-colors"><span> </span><span class="opacity-30">/</span><span class="text-white font-bold"> </span></span></div> <div class="h-3 sm:h-5 w-full bg-slate-950 rounded-full border border-white/5 relative overflow-hidden group-hover:border-white/20 transition-all shadow-inner"><div></div> <!> <!> <!></div></button> <div class="flex items-center gap-1 sm:gap-2"><button class="p-2 text-slate-400 hover:text-indigo-400 hover:bg-indigo-400/10 rounded-full transition-all" title="Descanso"><!></button> <button class="p-2 bg-indigo-600/10 text-indigo-400 border border-indigo-400/20 rounded-lg hover:bg-indigo-600 hover:text-white transition-all relative" title="Histórico"><!> <!></button> <button class="hidden sm:flex p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all" title="Configurações"><!></button></div></div></div></header>');function Rr(S,u){it(u,!1);const s=()=>ce(Oe,"$character",o),b=()=>ce(Ba,"$isIncapacitated",o),$=()=>ce(Wa,"$isInjured",o),z=()=>ce(Yt,"$damage",o),n=()=>ce(ca,"$effectiveMaxHealth",o),m=()=>ce(Ya,"$damagePercentage",o),P=()=>ce(Ka,"$tempHealth",o),Q=()=>ce(Qa,"$rollHistory",o),[o,g]=ut();function A(D){Fe.update(I=>({...I,type:D,isOpen:!0}))}Nt();var B=Hr(),E=t(B),H=t(E),T=t(H),O=t(T);O.__click=()=>ja(Ea("/"));var c=t(O);ir(c,{size:20,class:"group-hover:-translate-x-0.5 transition-transform"});var R=r(c,2);lr(R,{size:18,class:"hidden sm:block opacity-50"}),e(O);var _=r(O,2);_.__click=()=>A("character_info");var p=t(_),d=t(p,!0);e(p);var x=r(p,2),f=t(x),v=t(f),y=t(v,!0);e(v),e(f);var j=r(f,2),q=t(j);e(j),e(x),e(_),e(T);var W=r(T,2);W.__click=()=>A("health");var X=t(W),U=t(X),k=t(U);{var F=D=>{var I=ea("INCAPACITADO");i(D,I)},ae=D=>{var I=se(),xe=G(I);{var ye=M=>{var ee=ea("FERIDO");i(M,ee)},Ce=M=>{var ee=se(),N=G(ee);{var ve=_e=>{},le=_e=>{var Te=ea("SAUDÁVEL");i(_e,Te)};h(N,_e=>{z()>0?_e(ve):_e(le,!1)},!0)}i(M,ee)};h(xe,M=>{$()?M(ye):M(Ce,!1)},!0)}i(D,I)};h(k,D=>{b()?D(F):D(ae,!1)})}e(U);var te=r(U,2),Z=t(te),Y=t(Z,!0);e(Z);var re=r(Z,2),oe=t(re,!0);e(re),e(te),e(X);var be=r(X,2),J=t(be),ie=r(J,2);{var he=D=>{var I=jr();C(()=>{pe(I,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10 ${b()?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":m()>=80?"bg-gradient-to-r from-red-600 to-rose-500":$()?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),or(I,`width: ${m()??""}%`)}),i(D,I)};h(ie,D=>{m()>0&&D(he)})}var ke=r(ie,2);{var Ee=D=>{var I=Ir();i(D,I)};h(ke,D=>{z()===0&&D(Ee)})}var ne=r(ke,2);{var de=D=>{var I=Cr();i(D,I)};h(ne,D=>{P()>0&&D(de)})}e(be),e(W);var $e=r(W,2),we=t($e);we.__click=()=>A("rest_confirm");var Ae=t(we);Ar(Ae,{size:18}),e(we);var fe=r(we,2);fe.__click=()=>va.update(D=>!D);var ze=t(fe);nr(ze,{size:18});var Se=r(ze,2);{var L=D=>{var I=Or();i(D,I)};h(Se,D=>{Q().length>0&&D(L)})}e(fe);var K=r(fe,2);K.__click=()=>A("character_info");var V=t(K);dr(V,{size:18}),e(K),e($e),e(H),e(E),e(B),C(D=>{w(d,D),w(y,s().name),w(q,`Nv ${s().level??""}`),pe(U,1,`font-black uppercase tracking-wider ${b()?"text-red-500 animate-pulse":$()?"text-amber-500":z()>0?"text-slate-400":"text-emerald-500"}`),pe(Z,1,`${z()===0?"text-emerald-400":b()?"text-red-400":$()?"text-amber-400":"text-orange-400"} font-bold group-hover:text-red-300`),w(Y,z()),w(oe,n()),pe(J,1,`absolute top-0 left-0 h-full w-full ${z()===0?"bg-emerald-900/20":"bg-slate-900/50"}`)},[()=>s().name.charAt(0)]),i(S,B),lt(),g()}pt(["click"]);var qr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Ur=l("<option> </option>"),Lr=l("<option> </option>"),Fr=l('<div class="grid grid-cols-3 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Dano</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Dano (d6)"/></label> <label class="block col-span-2"><span class="text-[10px] text-slate-500 uppercase font-bold">Traits</span> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Traits"/></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Empunhadura</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <label class="block col-span-2"><span class="text-[10px] text-slate-500 uppercase font-bold">Alcance</span> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Range"/></label></div>'),Gr=l('<div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Def. Fixa</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Fixed Def"/></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Def. Mod</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Mod Def"/></label></div>'),Vr=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),Br=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tipo</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Qtd</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Qtd"/></label></div> <!> <!> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),Wr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Yr=l("<option> </option>"),Kr=l("<option> </option>"),Qr=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),Xr=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tier</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <div class="relative"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tradição</span> <input list="traditions" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Tradição"/></label> <datalist id="traditions"></datalist></div></div> <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700"><label for="maxCastings" class="text-xs text-slate-400 uppercase">Castings</label> <input id="maxCastings" type="number" class="w-16 bg-slate-800 border border-slate-600 rounded p-1 text-white text-center"/></div> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase">Efeito Associado</span> <button> </button></div> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),Jr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Zr=l('<div class="flex items-center gap-2 border-l border-slate-700 pl-2"><label for="maxUses" class="text-xs text-slate-400 uppercase">Max Uses</label> <input id="maxUses" type="number" class="w-16 bg-slate-800 border border-slate-600 rounded p-1 text-white text-center"/></div>'),es=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),ts=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700"><input type="checkbox" id="isPassive" class="w-4 h-4 rounded bg-slate-800 border-slate-600 text-indigo-600 focus:ring-indigo-500"/> <label for="isPassive" class="text-xs text-slate-400 uppercase font-bold flex-1 cursor-pointer">Passivo / Ilimitado</label> <!></div> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase">Efeito Associado</span> <button> </button></div> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),as=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),rs=l('<div><label for="effectName" class="text-xs font-bold text-slate-400 uppercase">Nome</label> <input id="effectName" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/> <!></div>'),ss=l('<div class="text-center text-xs text-slate-500 italic mb-2">Nome e Descrição herdados do item pai.</div>'),os=l("<option> </option>"),is=l('<input type="number" class="bg-slate-900 border border-slate-700 rounded p-2 text-white"/>'),ls=l("<option> </option>"),ns=l('<div class="flex gap-1 items-center"><select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/3"></select> <select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4"><option>Add (+/-)</option><option>Set (=)</option><option>Mult (x)</option></select> <input type="number" class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4 text-center"/> <button class="text-slate-600 hover:text-red-400 p-1" aria-label="Remover Modificador"><!></button></div>'),ds=l('<div><label class="text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"></textarea></label></div>'),vs=l('<div class="space-y-4"><!> <div><label for="effectDuration" class="text-xs font-bold text-slate-400 uppercase">Duração</label> <div class="grid grid-cols-2 gap-2"><select id="effectDuration" class="bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"></select> <!></div></div> <div class="bg-slate-950 p-3 rounded border border-slate-800"><div class="flex justify-between items-center mb-2"><span class="text-xs font-bold text-indigo-400 uppercase">Modificadores</span> <button class="text-[10px] bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600 flex items-center gap-1"><!> Add</button></div> <div class="space-y-2"></div></div> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar Efeito</button></div>'),cs=l('<div class="space-y-4"><h3 class="text-white font-bold text-lg"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold">Valor Base <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div>'),ps=l('<div class="space-y-4"><h3 class="text-white font-bold text-lg uppercase"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold">Valor Base <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div>'),us=l('<div class="space-y-4"><div class="grid grid-cols-2 gap-4"><div><label class="text-xs text-slate-400 uppercase font-bold">Vida Normal <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs text-slate-400 uppercase font-bold">Vida Atual <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div><label class="text-xs text-red-400 uppercase font-bold">Dano <input type="number" class="w-full bg-slate-900 border border-red-900/50 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Atualizar</button></div>'),bs=l('<div class="space-y-4"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div class="grid grid-cols-2 gap-4"><div><label class="text-xs font-bold text-slate-400 uppercase">Nível <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs font-bold text-slate-400 uppercase">Ancestralidade <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div class="pt-2 border-t border-slate-700 space-y-3"><div><label class="text-[10px] font-bold text-slate-400 uppercase">Novice <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Expert <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Master <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded mt-2">Salvar</button></div>'),xs=l('<div class="mt-4 p-3 bg-green-900/20 border border-green-900/50 rounded-lg"><div class="flex items-center gap-2 mb-1 text-[10px] font-bold text-green-400 uppercase tracking-wider">Efeito Associado</div> <div class="text-xs text-green-200/70"> </div></div>'),fs=l('<button class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> APLICAR EFEITO E USAR</button> <button class="w-full bg-slate-700 hover:bg-slate-600 text-slate-300 font-bold py-2 rounded-lg text-sm transition-colors">USAR SEM APLICAR EFEITO</button>',1),gs=l('<button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> CONFIRMAR USO</button>'),_s=l('<div class="space-y-4"><div class="bg-slate-900 p-4 rounded-lg border border-slate-700"><p class="text-indigo-300 font-bold text-2xl mb-1 text-center"> </p> <p class="text-slate-400 text-sm italic mb-4 text-center"> </p> <!></div> <div class="flex flex-col gap-2 pt-2"><!> <button class="w-full text-slate-500 hover:text-slate-300 text-xs font-bold uppercase tracking-widest py-2 transition-colors mt-2">CANCELAR</button></div></div>'),ms=l('<div class="text-center space-y-6"><div class="flex justify-center"><!></div> <div><p class="text-lg text-white font-bold">Realizar Descanso?</p></div> <div class="flex gap-4 justify-center"><button class="px-6 py-2 rounded bg-slate-700 hover:bg-slate-600 text-white font-bold">Cancelar</button><button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold">Descansar</button></div></div>'),hs=l('<div class="space-y-4"><h3 class="text-center font-bold text-white uppercase mb-2">Rolagem</h3> <div class="bg-slate-900 p-4 rounded-lg border border-slate-700 text-center"><div class="flex justify-center items-center gap-6 mb-2"><button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-red-900 flex items-center justify-center text-slate-300 hover:text-white border border-slate-700" aria-label="Diminuir Modificador"><!></button> <span> </span> <button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-green-900 flex items-center justify-center text-slate-300 hover:text-white border border-slate-700" aria-label="Aumentar Modificador"><!></button></div> <div class="text-xs text-slate-500"> </div></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2">ROLAR</button></div>'),$s=l('<div class="space-y-6 text-center"><div class="bg-indigo-900/20 border border-indigo-500/30 p-4 rounded-xl"><h3 class="text-2xl font-bold text-white mb-1"> </h3> <p class="text-xs text-indigo-300 uppercase tracking-widest font-bold"> </p></div> <div class="grid grid-cols-2 gap-4"><button class="flex flex-col items-center justify-center p-6 bg-slate-900/80 hover:bg-indigo-600 border border-slate-700 hover:border-indigo-400 rounded-2xl transition-all group"><div class="p-3 rounded-full bg-slate-800 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white mb-3 shadow-lg"><!></div> <span class="font-black text-white tracking-widest uppercase text-sm">Ataque</span></button> <button class="flex flex-col items-center justify-center p-6 bg-slate-900/80 hover:bg-red-600 border border-slate-700 hover:border-red-400 rounded-2xl transition-all group"><div class="p-3 rounded-full bg-slate-800 text-red-500 group-hover:bg-red-500 group-hover:text-white mb-3 shadow-lg"><!></div> <span class="font-black text-white tracking-widest uppercase text-sm">Dano</span></button></div> <button class="text-slate-500 hover:text-slate-300 text-[10px] font-bold uppercase tracking-[0.2em]">Voltar</button></div>'),ws=l('<span class="text-[10px] text-slate-500 uppercase font-black tracking-widest">Passivo</span>'),ys=l("<span></span>"),ks=l('<span class="block text-[10px] text-slate-500 uppercase font-bold text-center">Cargas</span> <p class="flex items-center justify-center gap-1"></p> <span> </span>',1),As=l('<button class="w-full text-left p-4 bg-slate-900/50 border border-slate-700 rounded-xl hover:bg-yellow-900/20 hover:border-yellow-600/50 flex items-center justify-between transition-all group disabled:opacity-30 disabled:hover:bg-slate-900/50 disabled:hover:border-slate-700 active:scale-[0.99]"><div class="flex items-center gap-4"><div class="p-2.5 rounded-lg bg-slate-800 text-yellow-500 group-hover:scale-110 transition-transform"><!></div> <div><p class="text-white font-bold"> </p> <p class="text-[10px] text-slate-500 italic max-w-xs"> </p></div></div> <div class="text-right shrink-0"><!></div></button>'),zs=l('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm">Nenhum talento disponível.</p></div>'),Ss=l('<div class="space-y-3 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1"></div>'),Ms=l("<div></div>"),Ns=l('<button class="w-full text-left p-4 bg-slate-900/50 border border-slate-700 rounded-xl hover:bg-indigo-900/20 hover:border-indigo-600 text-indigo-400/0 hover:text-indigo-400 flex items-center justify-between transition-all group disabled:opacity-30 active:scale-[0.99]"><div class="flex items-center gap-4"><div class="p-2.5 rounded-lg bg-slate-800 text-indigo-400 group-hover:scale-110 transition-all border border-transparent group-hover:border-indigo-500/30"><!></div> <div><p class="text-white font-bold group-hover:text-indigo-300 transition-colors"> </p> <p class="text-[10px] text-slate-500 uppercase font-bold tracking-tight"> </p></div></div> <div class="text-right shrink-0"><span class="block text-[10px] text-slate-500 uppercase font-bold text-center mb-1">Casts</span> <div class="flex gap-0.5"></div></div></button>'),Ds=l('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm">Grimório vazio.</p></div>'),Es=l('<div class="space-y-3 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1"></div>'),Ts=l("<button> <!></button>"),Ps=l('<div class="text-xs"><span class="text-red-400 font-bold"> </span> <span class="text-slate-400"> </span></div>'),js=l('<p class="text-xs text-slate-600 italic text-center">Nenhuma aflição selecionada.</p>'),Is=l('<div class="grid grid-cols-2 gap-2"></div> <div class="mt-6 p-4 bg-slate-900/50 rounded-lg border border-slate-700"><p class="text-[10px] text-slate-500 uppercase font-bold mb-2">Resumo dos Efeitos</p> <div class="space-y-2"><!> <!></div></div>',1),Cs=l('<div class="p-6 overflow-y-auto custom-scrollbar"><!></div>');function Os(S,u){it(u,!0);const s=()=>ce(Fe,"$modalState",P),b=()=>ce(Yt,"$damage",P),$=()=>ce(Kt,"$normalHealth",P),z=()=>ce(Qt,"$currentHealth",P),n=()=>ce(Oe,"$character",P),m=()=>ce(Xa,"$activeEffects",P),[P,Q]=ut();let o=Lt(la({})),g=Lt(la({})),A=Lt(0),B=Lt(la([]));oa(()=>{if(s().isOpen){const{type:v,data:y}=s();v==="item"&&Le(o,y?{...y}:{name:"",type:zt.OTHER,quantity:1,price:0,description:"",availability:"Common",quality:"Standard"},!0),v==="spell"&&Le(o,y?{...y}:{name:"",tier:"Novice",tradition:"Destruction",type:"Attack",castings:1,maxCastings:1,description:"",effect:null},!0),v==="talent"&&Le(o,y?{...y}:{name:"",description:"",uses:0,maxUses:0,isPassive:!1,effect:null},!0),v==="attribute"&&Le(o,{...y},!0),v==="health"&&Le(o,{d:b(),nh:$(),ch:z()},!0),v==="character_info"&&Le(o,{name:n().name,level:n().level,ancestry:n().ancestry,novicePath:n().paths.novice,expertPath:n().paths.expert,masterPath:n().paths.master,normalHealth:$(),currentHealth:z()},!0),v==="stat"&&(y==="defense"?Le(o,{key:"naturalDefense",name:"Defesa Natural",value:n().naturalDefense},!0):y==="speed"&&Le(o,{key:"speed",name:"Velocidade",value:n().speed},!0)),v==="pre_roll"&&(Le(B,m().map(j=>j.id),!0),Le(A,0)),v==="effect"&&(y&&y.parentType?Le(g,y.parentData.effect||{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0):y?(Le(g,{...y},!0),Array.isArray(a(g).modifiers)||(a(g).modifiers=[])):Le(g,{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0))}});function E(){Fe.update(v=>({...v,type:null,isOpen:!1,data:null}))}function H(){if(!a(o).name?.trim())return alert("Nome é obrigatório");const v={...a(o),id:a(o).id||Date.now()};s().data?ge.updateItem(v):ge.addItem(v),E()}function T(){if(!a(o).name?.trim())return alert("Nome é obrigatório");const v={...a(o),id:a(o).id||Date.now()};s().data?ge.updateSpell(v):ge.addSpell(v),E()}function O(){if(!a(o).name?.trim())return alert("Nome é obrigatório");const v={...a(o),id:a(o).id||Date.now()};a(o).isPassive?(v.maxUses=0,v.uses=0):!s().data&&a(o).maxUses>0&&(v.uses=a(o).maxUses),s().data?ge.updateTalent(v):ge.addTalent(v),E()}function c(){const v=a(g);if(!s().data?.parentType&&!v.name?.trim())return alert("Nome do efeito é obrigatório");const y={...v,initialRounds:v.duration==="ROUNDS"?v.roundsLeft:0};if(s().data?.parentType){const j={...s().data.parentData,effect:y};Fe.update(q=>({...q,type:s().data.parentType,data:j}));return}v.id&&n().effects.some(j=>j.id===v.id)?ge.updateEffect(y):ge.addEffect({...y,id:Date.now(),isActive:!0}),E()}function R(){Oe.update(v=>({...v,attributes:v.attributes.map(y=>y.key===a(o).key?{...y,value:parseInt(a(o).value)}:y)})),E()}function _(){Yt.set(Math.max(0,parseInt(a(o).d))),Kt.set(Math.max(1,parseInt(a(o).nh))),Qt.set(Math.max(0,parseInt(a(o).ch))),E()}function p(){Oe.update(v=>({...v,name:a(o).name,level:parseInt(a(o).level)||0,ancestry:a(o).ancestry,paths:{novice:a(o).novicePath,expert:a(o).expertPath,master:a(o).masterPath}})),Kt.set(parseInt(a(o).normalHealth)),Qt.set(parseInt(a(o).currentHealth)),E()}function d(){Oe.update(v=>({...v,[a(o).key]:parseInt(a(o).value)||0})),E()}function x(){a(g).modifiers=[...a(g).modifiers||[],{target:"str",type:Tt.ADD,value:1}]}function f(v){a(g).modifiers=a(g).modifiers.filter((y,j)=>j!==v)}{let v=St(()=>s().type==="item"?"Editor de Item":s().type==="spell"?"Editar Magia":s().type==="talent"?"Editar Talento":s().type==="effect"?"Gerenciar Efeito":s().type==="pre_roll"?"Confirmar Rolagem":s().type==="confirm_spell"?"Confirmar Conjuração":s().type==="confirm_talent"?"Confirmar Ativação":s().type==="cast_spell"?"Grimório":s().type==="select_talent"?"Seus Talentos":s().type==="weapon_menu"?"Opções de Ataque":s().type==="character_info"?"Informações do Personagem":s().type==="health"?"Vigor & Dano":s().type==="attribute"?"Atributo":s().type==="stat"?a(o).name:s().type==="affliction"?"Gerenciar Aflições":"Informação");br(S,{get isOpen(){return s().isOpen},onClose:E,maxWidth:"max-w-lg",get title(){return a(v)},children:(y,j)=>{var q=Cs(),W=t(q);{var X=k=>{var F=Br(),ae=t(F),te=t(ae),Z=r(t(te));Ne(Z),e(te);var Y=r(te,2);{var re=L=>{var K=qr();i(L,K)};h(Y,L=>{a(o).name||L(re)})}e(ae);var oe=r(ae,2),be=t(oe),J=r(t(be),2);je(J,21,()=>Object.values(zt),Ie,(L,K)=>{var V=Ur(),D=t(V,!0);e(V);var I={};C(()=>{w(D,a(K)),I!==(I=a(K))&&(V.value=(V.__value=a(K))??"")}),i(L,V)}),e(J),e(be);var ie=r(be,2),he=r(t(ie),2);Ne(he),e(ie),e(oe);var ke=r(oe,2);{var Ee=L=>{var K=Fr(),V=t(K),D=r(t(V),2);Ne(D),e(V);var I=r(V,2),xe=r(t(I),2);Ne(xe),e(I);var ye=r(I,2),Ce=r(t(ye),2);je(Ce,21,()=>Object.values(pa),Ie,(N,ve)=>{var le=Lr(),_e=t(le,!0);e(le);var Te={};C(()=>{w(_e,a(ve)),Te!==(Te=a(ve))&&(le.value=(le.__value=a(ve))??"")}),i(N,le)}),e(Ce),e(ye);var M=r(ye,2),ee=r(t(M),2);Ne(ee),e(M),e(K),me(D,()=>a(o).damageDice,N=>a(o).damageDice=N),me(xe,()=>a(o).traits,N=>a(o).traits=N),Bt(Ce,()=>a(o).grip,N=>a(o).grip=N),me(ee,()=>a(o).range,N=>a(o).range=N),i(L,K)};h(ke,L=>{a(o).type===zt.WEAPON&&L(Ee)})}var ne=r(ke,2);{var de=L=>{var K=Gr(),V=t(K),D=r(t(V),2);Ne(D),e(V);var I=r(V,2),xe=r(t(I),2);Ne(xe),e(I),e(K),me(D,()=>a(o).defenseFixed,ye=>a(o).defenseFixed=ye),me(xe,()=>a(o).defenseMod,ye=>a(o).defenseMod=ye),i(L,K)};h(ne,L=>{a(o).type===zt.ARMOR&&L(de)})}var $e=r(ne,2),we=r(t($e));Zt(we),De(we,"rows",3),e($e);var Ae=r($e,2),fe=t(Ae);{var ze=L=>{var K=Vr();K.__click=()=>{ge.deleteItem(s().data.id),E()};var V=t(K);Wt(V,{size:18}),e(K),i(L,K)};h(fe,L=>{s().data&&L(ze)})}var Se=r(fe,2);Se.__click=H,e(Ae),e(F),me(Z,()=>a(o).name,L=>a(o).name=L),Bt(J,()=>a(o).type,L=>a(o).type=L),me(he,()=>a(o).quantity,L=>a(o).quantity=L),me(we,()=>a(o).description,L=>a(o).description=L),i(k,F)},U=k=>{var F=se(),ae=G(F);{var te=Y=>{var re=Xr(),oe=t(re),be=t(oe),J=r(t(be));Ne(J),e(be);var ie=r(be,2);{var he=M=>{var ee=Wr();i(M,ee)};h(ie,M=>{a(o).name||M(he)})}e(oe);var ke=r(oe,2),Ee=t(ke),ne=r(t(Ee),2);je(ne,20,()=>["Novice","Expert","Master"],Ie,(M,ee)=>{var N=Yr(),ve=t(N,!0);e(N);var le={};C(()=>{w(ve,ee),le!==(le=ee)&&(N.value=(N.__value=ee)??"")}),i(M,N)}),e(ne),e(Ee);var de=r(Ee,2),$e=t(de),we=r(t($e),2);Ne(we),e($e);var Ae=r($e,2);je(Ae,21,()=>Ja,Ie,(M,ee)=>{var N=Kr(),ve=t(N,!0);e(N);var le={};C(()=>{w(ve,a(ee)),le!==(le=a(ee))&&(N.value=(N.__value=a(ee))??"")}),i(M,N)}),e(Ae),e(de),e(ke);var fe=r(ke,2),ze=r(t(fe),2);Ne(ze),ze.__input=()=>a(o).castings=a(o).maxCastings,e(fe);var Se=r(fe,2),L=r(t(Se),2);L.__click=()=>Fe.update(M=>({...M,type:"effect",data:{parentType:"spell",parentData:a(o)}}));var K=t(L,!0);e(L),e(Se);var V=r(Se,2),D=r(t(V));Zt(D),De(D,"rows",4),e(V);var I=r(V,2),xe=t(I);{var ye=M=>{var ee=Qr();ee.__click=()=>{ge.deleteSpell(s().data.id),E()};var N=t(ee);Wt(N,{size:18}),e(ee),i(M,ee)};h(xe,M=>{s().data&&M(ye)})}var Ce=r(xe,2);Ce.__click=T,e(I),e(re),C(()=>{pe(L,1,`text-[10px] px-2 py-1 rounded border ${a(o).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),w(K,a(o).effect?"Configurado":"Nenhum")}),me(J,()=>a(o).name,M=>a(o).name=M),Bt(ne,()=>a(o).tier,M=>a(o).tier=M),me(we,()=>a(o).tradition,M=>a(o).tradition=M),me(ze,()=>a(o).maxCastings,M=>a(o).maxCastings=M),me(D,()=>a(o).description,M=>a(o).description=M),i(Y,re)},Z=Y=>{var re=se(),oe=G(re);{var be=ie=>{var he=ts(),ke=t(he),Ee=t(ke),ne=r(t(Ee));Ne(ne),e(Ee);var de=r(Ee,2);{var $e=M=>{var ee=Jr();i(M,ee)};h(de,M=>{a(o).name||M($e)})}e(ke);var we=r(ke,2),Ae=t(we);Ne(Ae);var fe=r(Ae,4);{var ze=M=>{var ee=Zr(),N=r(t(ee),2);Ne(N),e(ee),me(N,()=>a(o).maxUses,ve=>a(o).maxUses=ve),i(M,ee)};h(fe,M=>{a(o).isPassive||M(ze)})}e(we);var Se=r(we,2),L=r(t(Se),2);L.__click=()=>Fe.update(M=>({...M,type:"effect",data:{parentType:"talent",parentData:a(o)}}));var K=t(L,!0);e(L),e(Se);var V=r(Se,2),D=r(t(V));Zt(D),De(D,"rows",4),e(V);var I=r(V,2),xe=t(I);{var ye=M=>{var ee=es();ee.__click=()=>{ge.deleteTalent(s().data.id),E()};var N=t(ee);Wt(N,{size:18}),e(ee),i(M,ee)};h(xe,M=>{s().data&&M(ye)})}var Ce=r(xe,2);Ce.__click=O,e(I),e(he),C(()=>{pe(L,1,`text-[10px] px-2 py-1 rounded border ${a(o).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),w(K,a(o).effect?"Configurado":"Nenhum")}),me(ne,()=>a(o).name,M=>a(o).name=M),ur(Ae,()=>a(o).isPassive,M=>a(o).isPassive=M),me(D,()=>a(o).description,M=>a(o).description=M),i(ie,he)},J=ie=>{var he=se(),ke=G(he);{var Ee=de=>{var $e=vs(),we=t($e);{var Ae=ve=>{var le=rs(),_e=r(t(le),2);Ne(_e);var Te=r(_e,2);{var Ge=He=>{var nt=as();i(He,nt)};h(Te,He=>{a(g).name||He(Ge)})}e(le),me(_e,()=>a(g).name,He=>a(g).name=He),i(ve,le)},fe=ve=>{var le=ss();i(ve,le)};h(we,ve=>{s().data?.parentType?ve(fe,!1):ve(Ae)})}var ze=r(we,2),Se=r(t(ze),2),L=t(Se);je(L,21,()=>Object.entries(Ta),Ie,(ve,le)=>{var _e=St(()=>ha(a(le),2));let Te=()=>a(_e)[0],Ge=()=>a(_e)[1];var He=os(),nt=t(He,!0);e(He);var Ve={};C(()=>{w(nt,Ge()),Ve!==(Ve=Te())&&(He.value=(He.__value=Te())??"")}),i(ve,He)}),e(L);var K=r(L,2);{var V=ve=>{var le=is();Ne(le),me(le,()=>a(g).roundsLeft,_e=>a(g).roundsLeft=_e),i(ve,le)};h(K,ve=>{a(g).duration==="ROUNDS"&&ve(V)})}e(Se),e(ze);var D=r(ze,2),I=t(D),xe=r(t(I),2);xe.__click=x;var ye=t(xe);ct(ye,{size:10}),ue(),e(xe),e(I);var Ce=r(I,2);je(Ce,21,()=>a(g).modifiers,Ie,(ve,le,_e)=>{var Te=ns(),Ge=t(Te);je(Ge,21,()=>Object.entries(Pa),Ie,(at,$t)=>{var Xe=St(()=>ha(a($t),2));let rt=()=>a(Xe)[0],xt=()=>a(Xe)[1];var dt=ls(),Ue=t(dt,!0);e(dt);var Pe={};C(()=>{w(Ue,xt()),Pe!==(Pe=rt())&&(dt.value=(dt.__value=rt())??"")}),i(at,dt)}),e(Ge);var He=r(Ge,2),nt=t(He),Ve={},et=r(nt),_t={},tt=r(et),Ot={};e(He);var Qe=r(He,2);Ne(Qe);var bt=r(Qe,2);bt.__click=()=>f(_e);var mt=t(bt);Wt(mt,{size:12}),e(bt),e(Te),C(()=>{Ve!==(Ve=Tt.ADD)&&(nt.value=(nt.__value=Tt.ADD)??""),_t!==(_t=Tt.SET)&&(et.value=(et.__value=Tt.SET)??""),Ot!==(Ot=Tt.MULT)&&(tt.value=(tt.__value=Tt.MULT)??""),De(Qe,"step",a(le).type===Tt.MULT?"0.1":"1")}),Bt(Ge,()=>a(le).target,at=>a(le).target=at),Bt(He,()=>a(le).type,at=>a(le).type=at),me(Qe,()=>a(le).value,at=>a(le).value=at),i(ve,Te)}),e(Ce),e(D);var M=r(D,2);{var ee=ve=>{var le=ds(),_e=t(le),Te=r(t(_e));Zt(Te),e(_e),e(le),me(Te,()=>a(g).description,Ge=>a(g).description=Ge),i(ve,le)};h(M,ve=>{s().data?.parentType||ve(ee)})}var N=r(M,2);N.__click=c,e($e),Bt(L,()=>a(g).duration,ve=>a(g).duration=ve),i(de,$e)},ne=de=>{var $e=se(),we=G($e);{var Ae=ze=>{var Se=cs(),L=t(Se),K=t(L,!0);e(L);var V=r(L,2),D=t(V),I=r(t(D));Ne(I),e(D),e(V);var xe=r(V,2);xe.__click=R,e(Se),C(()=>w(K,a(o).name)),me(I,()=>a(o).value,ye=>a(o).value=ye),i(ze,Se)},fe=ze=>{var Se=se(),L=G(Se);{var K=D=>{var I=ps(),xe=t(I),ye=t(xe,!0);e(xe);var Ce=r(xe,2),M=t(Ce),ee=r(t(M));Ne(ee),e(M),e(Ce);var N=r(Ce,2);N.__click=d,e(I),C(()=>w(ye,a(o).name)),me(ee,()=>a(o).value,ve=>a(o).value=ve),i(D,I)},V=D=>{var I=se(),xe=G(I);{var ye=M=>{var ee=us(),N=t(ee),ve=t(N),le=t(ve),_e=r(t(le));Ne(_e),e(le),e(ve);var Te=r(ve,2),Ge=t(Te),He=r(t(Ge));Ne(He),e(Ge),e(Te),e(N);var nt=r(N,2),Ve=t(nt),et=r(t(Ve));Ne(et),e(Ve),e(nt);var _t=r(nt,2);_t.__click=_,e(ee),me(_e,()=>a(o).nh,tt=>a(o).nh=tt),me(He,()=>a(o).ch,tt=>a(o).ch=tt),me(et,()=>a(o).d,tt=>a(o).d=tt),i(M,ee)},Ce=M=>{var ee=se(),N=G(ee);{var ve=_e=>{var Te=bs(),Ge=t(Te),He=t(Ge),nt=r(t(He));Ne(nt),e(He),e(Ge);var Ve=r(Ge,2),et=t(Ve),_t=t(et),tt=r(t(_t));Ne(tt),e(_t),e(et);var Ot=r(et,2),Qe=t(Ot),bt=r(t(Qe));Ne(bt),e(Qe),e(Ot),e(Ve);var mt=r(Ve,2),at=t(mt),$t=t(at),Xe=r(t($t));Ne(Xe),e($t),e(at);var rt=r(at,2),xt=t(rt),dt=r(t(xt));Ne(dt),e(xt),e(rt);var Ue=r(rt,2),Pe=t(Ue),Re=r(t(Pe));Ne(Re),e(Pe),e(Ue),e(mt);var ht=r(mt,2);ht.__click=p,e(Te),me(nt,()=>a(o).name,qe=>a(o).name=qe),me(tt,()=>a(o).level,qe=>a(o).level=qe),me(bt,()=>a(o).ancestry,qe=>a(o).ancestry=qe),me(Xe,()=>a(o).novicePath,qe=>a(o).novicePath=qe),me(dt,()=>a(o).expertPath,qe=>a(o).expertPath=qe),me(Re,()=>a(o).masterPath,qe=>a(o).masterPath=qe),i(_e,Te)},le=_e=>{var Te=se(),Ge=G(Te);{var He=Ve=>{var et=_s(),_t=t(et),tt=t(_t),Ot=t(tt,!0);e(tt);var Qe=r(tt,2),bt=t(Qe,!0);e(Qe);var mt=r(Qe,2);{var at=Ue=>{var Pe=xs(),Re=r(t(Pe),2),ht=t(Re);e(Re),e(Pe),C(()=>w(ht,`${s().data.effect.name??""}: ${s().data.effect.description??""}`)),i(Ue,Pe)};h(mt,Ue=>{s().data.effect&&Ue(at)})}e(_t);var $t=r(_t,2),Xe=t($t);{var rt=Ue=>{var Pe=fs(),Re=G(Pe);Re.__click=()=>{ge.applyEffectToCharacter(s().data.effect,s().data),s().type==="confirm_spell"?ge.commitSpellCast(s().data):ge.commitTalentUse(s().data)};var ht=t(Re);Sa(ht,{size:18}),ue(),e(Re);var qe=r(Re,2);qe.__click=()=>{s().type==="confirm_spell"?ge.commitSpellCast(s().data):ge.commitTalentUse(s().data)},i(Ue,Pe)},xt=Ue=>{var Pe=gs();Pe.__click=()=>{s().type==="confirm_spell"?ge.commitSpellCast(s().data):ge.commitTalentUse(s().data)};var Re=t(Pe);Mt(Re,{size:18}),ue(),e(Pe),i(Ue,Pe)};h(Xe,Ue=>{s().data.effect?Ue(rt):Ue(xt,!1)})}var dt=r(Xe,2);dt.__click=E,e($t),e(et),C(()=>{w(Ot,s().data.name),w(bt,s().data.description)}),i(Ve,et)},nt=Ve=>{var et=se(),_t=G(et);{var tt=Qe=>{var bt=ms(),mt=t(bt),at=t(mt);Wt(at,{size:48,class:"text-indigo-400"}),e(mt);var $t=r(mt,4),Xe=t($t);Xe.__click=E;var rt=r(Xe);rt.__click=function(...xt){ge.confirmRest?.apply(this,xt)},e($t),e(bt),i(Qe,bt)},Ot=Qe=>{var bt=se(),mt=G(bt);{var at=Xe=>{var rt=hs(),xt=r(t(rt),2),dt=t(xt),Ue=t(dt);Ue.__click=()=>$a(A,-1);var Pe=t(Ue);ta(Pe,{size:24}),e(Ue);var Re=r(Ue,2),ht=t(Re);e(Re);var qe=r(Re,2);qe.__click=()=>$a(A);var Xt=t(qe);ct(Xt,{size:24}),e(qe),e(dt);var wt=r(dt,2),Pt=t(wt,!0);e(wt),e(xt);var Dt=r(xt,2);Dt.__click=()=>ge.finalizeRoll(s().data,a(A),m().filter(Me=>a(B).includes(Me.id)).map(Me=>Me.name)),e(rt),C(()=>{pe(Re,1,`text-4xl font-bold ${a(A)>0?"text-green-400":a(A)<0?"text-red-400":"text-slate-500"}`),w(ht,`${a(A)>0?"+":""}${a(A)??""}`),w(Pt,s().data.type==="weapon_damage"?"Dados Extras":"Boons/Banes")}),i(Xe,rt)},$t=Xe=>{var rt=se(),xt=G(rt);{var dt=Pe=>{var Re=$s(),ht=t(Re),qe=t(ht),Xt=t(qe,!0);e(qe);var wt=r(qe,2),Pt=t(wt,!0);e(wt),e(ht);var Dt=r(ht,2),Me=t(Dt);Me.__click=()=>Fe.update(At=>({...At,type:"pre_roll",data:{type:"weapon_attack",source:s().data}}));var yt=t(Me),kt=t(yt);Mt(kt,{size:24}),e(yt),ue(2),e(Me);var ft=r(Me,2);ft.__click=()=>Fe.update(At=>({...At,type:"pre_roll",data:{type:"weapon_damage",source:s().data}}));var jt=t(ft),Je=t(jt);ct(Je,{size:24}),e(jt),ue(2),e(ft),e(Dt);var st=r(Dt,2);st.__click=E,e(Re),C(()=>{w(Xt,s().data.name),w(Pt,s().data.traits||"Sem Atributos")}),i(Pe,Re)},Ue=Pe=>{var Re=se(),ht=G(Re);{var qe=wt=>{var Pt=Ss();je(Pt,5,()=>n().talents,Ie,(Dt,Me)=>{var yt=As();yt.__click=()=>Fe.update(Ze=>({...Ze,type:"confirm_talent",data:a(Me)}));var kt=t(yt),ft=t(kt),jt=t(ft);Mt(jt,{size:20}),e(ft);var Je=r(ft,2),st=t(Je),At=t(st,!0);e(st);var It=r(st,2),Ft=t(It,!0);e(It),e(Je),e(kt);var Rt=r(kt,2),qt=t(Rt);{var Jt=Ze=>{var ot=ws();i(Ze,ot)},Gt=Ze=>{var ot=ks(),vt=r(G(ot),2);je(vt,21,()=>Array(a(Me).maxUses),Ie,(Ut,Et,La)=>{var ma=ys();C(()=>pe(ma,1,`w-1.5 h-1.5 rounded-full ${La<a(Me).uses?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.5)]":"bg-slate-700"}`)),i(Ut,ma)}),e(vt);var gt=r(vt,2),Vt=t(gt);e(gt),C(()=>{pe(gt,1,`font-mono font-bold text-xs ${a(Me).uses>0?"text-green-400":"text-red-400"}`),w(Vt,`${a(Me).uses??""}/${a(Me).maxUses??""}`)}),i(Ze,ot)};h(qt,Ze=>{a(Me).isPassive?Ze(Jt):Ze(Gt,!1)})}e(Rt),e(yt),C(()=>{yt.disabled=!a(Me).isPassive&&a(Me).maxUses>0&&a(Me).uses===0,w(At,a(Me).name),w(Ft,a(Me).description)}),i(Dt,yt)},Dt=>{var Me=zs(),yt=t(Me);Mt(yt,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"}),ue(2),e(Me),i(Dt,Me)}),e(Pt),i(wt,Pt)},Xt=wt=>{var Pt=se(),Dt=G(Pt);{var Me=kt=>{var ft=Es();je(ft,5,()=>n().spells,Ie,(jt,Je)=>{var st=Ns();st.__click=()=>Fe.update(gt=>({...gt,type:"confirm_spell",data:a(Je)}));var At=t(st),It=t(At),Ft=t(It);ra(Ft,{size:20}),e(It);var Rt=r(It,2),qt=t(Rt),Jt=t(qt,!0);e(qt);var Gt=r(qt,2),Ze=t(Gt);e(Gt),e(Rt),e(At);var ot=r(At,2),vt=r(t(ot),2);je(vt,21,()=>Array(a(Je).maxCastings),Ie,(gt,Vt,Ut)=>{var Et=Ms();C(()=>pe(Et,1,`w-3 h-1 rounded-full ${Ut<a(Je).castings?"bg-indigo-500":"bg-slate-700"}`)),i(gt,Et)}),e(vt),e(ot),e(st),C(()=>{st.disabled=a(Je).castings===0,w(Jt,a(Je).name),w(Ze,`${a(Je).tradition??""} • ${a(Je).tier??""}`)}),i(jt,st)},jt=>{var Je=Ds(),st=t(Je);ra(st,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"}),ue(2),e(Je),i(jt,Je)}),e(ft),i(kt,ft)},yt=kt=>{var ft=se(),jt=G(ft);{var Je=st=>{var At=Is(),It=G(At);je(It,21,()=>Object.keys(Aa),Ie,(Ze,ot)=>{var vt=Ts();vt.__click=()=>ge.toggleAffliction(a(ot));var gt=t(vt),Vt=r(gt);{var Ut=Et=>{Sa(Et,{size:14})};h(Vt,Et=>{n().afflictions.includes(a(ot))&&Et(Ut)})}e(vt),C(Et=>{pe(vt,1,`p-3 rounded-lg border text-sm font-bold transition-all text-left flex justify-between items-center ${Et??""}`),w(gt,`${a(ot)??""} `)},[()=>n().afflictions.includes(a(ot))?"bg-red-900/40 border-red-500 text-red-200 shadow-lg shadow-red-900/20":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-500 hover:bg-slate-850"]),i(Ze,vt)}),e(It);var Ft=r(It,2),Rt=r(t(Ft),2),qt=t(Rt);je(qt,1,()=>n().afflictions,Ie,(Ze,ot)=>{var vt=Ps(),gt=t(vt),Vt=t(gt);e(gt);var Ut=r(gt,2),Et=t(Ut,!0);e(Ut),e(vt),C(()=>{w(Vt,`${a(ot)??""}:`),w(Et,Aa[a(ot)]?.effect||"")}),i(Ze,vt)});var Jt=r(qt,2);{var Gt=Ze=>{var ot=js();i(Ze,ot)};h(Jt,Ze=>{n().afflictions.length===0&&Ze(Gt)})}e(Rt),e(Ft),i(st,At)};h(jt,st=>{s().type==="affliction"&&st(Je)},!0)}i(kt,ft)};h(Dt,kt=>{s().type==="cast_spell"?kt(Me):kt(yt,!1)},!0)}i(wt,Pt)};h(ht,wt=>{s().type==="select_talent"?wt(qe):wt(Xt,!1)},!0)}i(Pe,Re)};h(xt,Pe=>{s().type==="weapon_menu"?Pe(dt):Pe(Ue,!1)},!0)}i(Xe,rt)};h(mt,Xe=>{s().type==="pre_roll"?Xe(at):Xe($t,!1)},!0)}i(Qe,bt)};h(_t,Qe=>{s().type==="rest_confirm"?Qe(tt):Qe(Ot,!1)},!0)}i(Ve,et)};h(Ge,Ve=>{s().type==="confirm_spell"||s().type==="confirm_talent"?Ve(He):Ve(nt,!1)},!0)}i(_e,Te)};h(N,_e=>{s().type==="character_info"?_e(ve):_e(le,!1)},!0)}i(M,ee)};h(xe,M=>{s().type==="health"?M(ye):M(Ce,!1)},!0)}i(D,I)};h(L,D=>{s().type==="stat"?D(K):D(V,!1)},!0)}i(ze,Se)};h(we,ze=>{s().type==="attribute"?ze(Ae):ze(fe,!1)},!0)}i(de,$e)};h(ke,de=>{s().type==="effect"?de(Ee):de(ne,!1)},!0)}i(ie,he)};h(oe,ie=>{s().type==="talent"?ie(be):ie(J,!1)},!0)}i(Y,re)};h(ae,Y=>{s().type==="spell"?Y(te):Y(Z,!1)},!0)}i(k,F)};h(W,k=>{s().type==="item"?k(X):k(U,!1)})}e(q),i(y,q)},$$slots:{default:!0}})}lt(),Q()}pt(["click","input"]);var Hs=l("<div> </div>"),Rs=l('<div class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 text-center transition-all hover:bg-slate-800 active:scale-[0.98] group relative shadow-lg shadow-black/20 cursor-pointer" role="button" tabindex="0"><div class="py-2.5 px-2"><div class="text-[9px] uppercase text-slate-500 font-black tracking-widest group-hover:text-indigo-400 transition-colors mb-1"> </div> <div class="flex items-center justify-center gap-1.5 mb-1.5"><div class="text-2xl font-black text-white leading-none"> </div> <!></div> <div class="inline-flex px-2 py-0.5 bg-indigo-500/10 rounded-lg"><div class="text-xs text-indigo-400 font-black tracking-tight"> </div></div></div> <button class="absolute top-1.5 right-1.5 p-1 text-slate-700 hover:text-white hover:bg-white/5 rounded-md transition-all"><!></button></div>'),qs=l('<div class="grid grid-cols-2 gap-3"></div>');function Oa(S,u){it(u,!1);const s=()=>ce(Oe,"$character",$),b=()=>ce(Za,"$derivedStats",$),[$,z]=ut();function n(o,g){Fe.update(A=>({...A,type:o,isOpen:!0,data:g}))}function m(o){n("pre_roll",{type:"attribute",source:o})}function P(o,g){o.stopPropagation(),n("attribute",g)}Nt();var Q=qs();je(Q,5,()=>s().attributes,Ie,(o,g)=>{var A=Rs();A.__click=()=>m(a(g));var B=t(A),E=t(B),H=t(E,!0);e(E);var T=r(E,2),O=t(T),c=t(O,!0);e(O);var R=r(O,2);{var _=y=>{var j=Hs(),q=t(j);e(j),C(()=>{pe(j,1,`text-[11px] font-bold ${b()[a(g).key]>a(g).value?"text-green-500 bg-green-500/10":"text-red-500 bg-red-500/10"} px-1 rounded-md`),w(q,`${b()[a(g).key]>a(g).value?"+":""}${b()[a(g).key]-a(g).value}`)}),i(y,j)};h(R,y=>{b()[a(g).key]!==a(g).value&&y(_)})}e(T);var p=r(T,2),d=t(p),x=t(d);e(d),e(p),e(B);var f=r(B,2);f.__click=y=>P(y,a(g));var v=t(f);sa(v,{size:12}),e(f),e(A),C(()=>{De(A,"aria-label",`Rolar teste de ${a(g).name}`),w(H,a(g).name),w(c,b()[a(g).key]),w(x,`+${b()[a(g).key]-10}`),De(f,"aria-label",`Editar ${a(g).name??""}`)}),i(o,A)}),e(Q),i(S,Q),lt(),z()}pt(["click"]);var Us=l('<div class="p-1 bg-red-500/10 rounded"><!></div>'),Ls=l('<div class="space-y-3"><div class="grid grid-cols-2 gap-3"><button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> Defesa</div> <div class="flex items-baseline gap-1"><span class="text-3xl font-black text-white leading-none"> </span></div></button> <button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> Speed</div> <div class="flex items-baseline justify-between w-full"><span> </span> <!></div></button></div> <div class="bg-slate-900 rounded-2xl border border-slate-800 p-4 shadow-lg shadow-black/20"><span class="text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] flex items-center gap-2"><!> Bônus de Dano</span> <div class="flex items-center justify-between bg-black/40 rounded-xl p-1.5 border border-white/5"><button class="w-10 h-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg transition-all active:scale-90" aria-label="Diminuir Dano Bônus"><!></button> <div class="flex flex-col items-center"><span class="text-2xl font-black text-white leading-none tracking-tighter"> </span> <span class="text-[9px] text-slate-600 font-bold uppercase mt-1">Dados Extras</span></div> <button class="w-10 h-10 flex items-center justify-center bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-all active:scale-90 shadow-lg shadow-indigo-500/20" aria-label="Aumentar Dano Bônus"><!></button></div></div></div>');function Ha(S,u){it(u,!1);const s=()=>ce(ua,"$totalDefense",z),b=()=>ce(er,"$effectiveSpeed",z),$=()=>ce(Oe,"$character",z),[z,n]=ut();function m(Y,re){Fe.update(oe=>({...oe,type:Y,isOpen:!0,data:re}))}function P(){Oe.update(Y=>({...Y,bonusDamage:Math.max(0,(Y.bonusDamage||0)-1)}))}function Q(){Oe.update(Y=>({...Y,bonusDamage:(Y.bonusDamage||0)+1}))}Nt();var o=Ls(),g=t(o),A=t(g);A.__click=()=>m("stat","defense");var B=t(A),E=t(B);xr(E,{size:12}),ue(),e(B);var H=r(B,2),T=t(H),O=t(T,!0);e(T),e(H),e(A);var c=r(A,2);c.__click=()=>m("stat","speed");var R=t(c),_=t(R);Mt(_,{size:12}),ue(),e(R);var p=r(R,2),d=t(p),x=t(d,!0);e(d);var f=r(d,2);{var v=Y=>{var re=Us(),oe=t(re);ia(oe,{size:10,class:"text-red-500"}),e(re),i(Y,re)};h(f,Y=>{b()<$().speed&&Y(v)})}e(p),e(c),e(g);var y=r(g,2),j=t(y),q=t(j);aa(q,{size:14,class:"text-indigo-500"}),ue(),e(j);var W=r(j,2),X=t(W);X.__click=P;var U=t(X);ta(U,{size:18}),e(X);var k=r(X,2),F=t(k),ae=t(F);e(F),ue(2),e(k);var te=r(k,2);te.__click=Q;var Z=t(te);ct(Z,{size:18}),e(te),e(W),e(y),e(o),C(()=>{w(O,s()),pe(d,1,`text-3xl font-black ${b()<$().speed?"text-red-400":"text-white"} leading-none`),w(x,b()),w(ae,`${($().bonusDamage||0)??""}d6`)}),i(S,o),lt(),n()}pt(["click"]);var Fs=l('<div class="bg-slate-900 p-3 rounded-2xl border border-slate-800 shadow-xl shadow-black/20"><div class="flex justify-between items-center mb-3"><h4 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-1.5"><!> Moedas</h4></div> <div class="grid grid-cols-3 gap-2"><div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-yellow-500 font-black uppercase tracking-tight relative z-10">GP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir GP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar GP"><!></button></div></div> <div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-slate-300 font-black uppercase tracking-tight relative z-10">SP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir SP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar SP"><!></button></div></div> <div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-orange-700/80 font-black uppercase tracking-tight relative z-10">CP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir CP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar CP"><!></button></div></div></div></div>');function Ra(S,u){it(u,!1);const s=()=>ce(Oe,"$character",b),[b,$]=ut(),{updateCurrency:z}=ge;Nt();var n=Fs(),m=t(n),P=t(m),Q=t(P);mr(Q,{size:14,class:"text-yellow-500"}),ue(),e(P),e(m);var o=r(m,2),g=t(o),A=r(t(g),2),B=t(A);B.__click=()=>z("gp",-1);var E=t(B);ta(E,{size:14}),e(B);var H=r(B,2),T=t(H,!0);e(H);var O=r(H,2);O.__click=()=>z("gp",1);var c=t(O);ct(c,{size:14}),e(O),e(A),e(g);var R=r(g,2),_=r(t(R),2),p=t(_);p.__click=()=>z("sp",-1);var d=t(p);ta(d,{size:14}),e(p);var x=r(p,2),f=t(x,!0);e(x);var v=r(x,2);v.__click=()=>z("sp",1);var y=t(v);ct(y,{size:14}),e(v),e(_),e(R);var j=r(R,2),q=r(t(j),2),W=t(q);W.__click=()=>z("cp",-1);var X=t(W);ta(X,{size:14}),e(W);var U=r(W,2),k=t(U,!0);e(U);var F=r(U,2);F.__click=()=>z("cp",1);var ae=t(F);ct(ae,{size:14}),e(F),e(q),e(j),e(o),e(n),C(()=>{w(T,s().currency.gp),w(f,s().currency.sp),w(k,s().currency.cp)}),i(S,n),lt(),$()}pt(["click"]);var Gs=l('<div class="bg-slate-950 border border-slate-700 text-slate-200 px-3 py-1.5 rounded-xl text-sm font-bold flex items-center gap-2 group transition-all hover:border-indigo-500/50"> <button class="text-slate-500 hover:text-red-400 p-1 rounded-full hover:bg-red-400/10 transition-all"><!></button></div>'),Vs=l('<span class="text-sm text-slate-500 italic py-2 px-1">Nenhum idioma registrado.</span>'),Bs=l('<div class="bg-slate-900 p-4 rounded-2xl border border-slate-800 shadow-xl shadow-black/20"><div class="flex justify-between items-center mb-4"><h4 class="text-xs font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-2"><!> Idiomas</h4></div> <div class="flex flex-wrap gap-2 mb-4"><!> <!></div> <div class="relative group"><input type="text" placeholder="Adicionar novo idioma..." class="w-full bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500 transition-all placeholder:text-slate-600 focus:ring-1 focus:ring-indigo-500/20" aria-label="Adicionar novo idioma"/> <div class="absolute right-3 top-1/2 -translate-y-1/2 p-1.5 bg-slate-800 rounded-lg text-slate-500 group-focus-within:text-indigo-400 group-focus-within:bg-indigo-400/10 transition-all"><!></div></div></div>');function qa(S,u){it(u,!1);const s=()=>ce(Oe,"$character",b),[b,$]=ut(),{addLanguage:z,removeLanguage:n}=ge;function m(_){if(_.key==="Enter"){const p=_.target,d=p.value.trim();d!==""&&(z(d),p.value="")}}Nt();var P=Bs(),Q=t(P),o=t(Q),g=t(o);kr(g,{size:16,class:"text-indigo-500"}),ue(),e(o),e(Q);var A=r(Q,2),B=t(A);je(B,1,()=>s().languages,Ie,(_,p,d)=>{var x=Gs(),f=t(x),v=r(f);v.__click=()=>n(d);var y=t(v);ga(y,{size:14}),e(v),e(x),C(()=>{w(f,`${a(p)??""} `),De(v,"aria-label",`Remover idioma ${a(p)??""}`)}),i(_,x)});var E=r(B,2);{var H=_=>{var p=Vs();i(_,p)};h(E,_=>{s().languages.length===0&&_(H)})}e(A);var T=r(A,2),O=t(T);O.__keydown=m;var c=r(O,2),R=t(c);ct(R,{size:16}),e(c),e(T),e(P),i(S,P),lt(),$()}pt(["click","keydown"]);var Ws=l('<span class="text-xs text-slate-500 italic">Nenhuma aflição ativa.</span>'),Ys=l('<div class="group relative"><div class="text-xs bg-red-900/30 border border-red-700 text-red-200 px-2 py-1 rounded flex items-center gap-1 cursor-help" title="Aflição Ativa"> <button class="ml-1 text-red-400 hover:text-white"><!></button></div></div>'),Ks=l('<div class="bg-slate-900 p-3 rounded-xl border border-slate-800"><div class="flex justify-between items-center mb-2"><h4 class="text-[10px] font-bold text-slate-400 uppercase flex items-center gap-1"><!> Aflições</h4> <button class="text-slate-500 hover:text-white" aria-label="Adicionar Aflição"><!></button></div> <div class="flex flex-wrap gap-2"><!> <!></div></div>');function Ua(S,u){it(u,!1);const s=()=>ce(Oe,"$character",b),[b,$]=ut(),{toggleAffliction:z}=ge;function n(){Fe.update(c=>({...c,type:"affliction",isOpen:!0}))}function m(c,R){c.stopPropagation(),z(R)}Nt();var P=Ks(),Q=t(P),o=t(Q),g=t(o);ia(g,{size:12}),ue(),e(o);var A=r(o,2);A.__click=n;var B=t(A);ct(B,{size:14}),e(A),e(Q);var E=r(Q,2),H=t(E);{var T=c=>{var R=Ws();i(c,R)};h(H,c=>{s().afflictions.length===0&&c(T)})}var O=r(H,2);je(O,1,()=>s().afflictions,Ie,(c,R)=>{var _=Ys(),p=t(_),d=t(p),x=r(d);x.__click=v=>m(v,a(R));var f=t(x);ga(f,{size:10}),e(x),e(p),e(_),C(()=>{w(d,`${a(R)??""} `),De(x,"aria-label",`Remover aflição ${a(R)??""}`)}),i(c,_)}),e(E),e(P),i(S,P),lt(),$()}pt(["click"]);var Qs=l('<button><!> <span class="text-[10px] font-bold uppercase tracking-wide"> </span></button>'),Xs=l('<div class="md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-[60]"></div> <div class="md:hidden fixed bottom-0 left-0 right-0 z-[70] bg-slate-900 border-t border-slate-700 rounded-t-3xl shadow-2xl safe-area-pb"><div class="flex justify-between items-center px-6 py-4 border-b border-slate-800"><h3 class="text-sm font-black text-white uppercase tracking-wider">Mais Opções</h3> <button class="p-2 rounded-full bg-slate-800 text-slate-400 hover:text-white transition-colors"><!></button></div> <div class="grid grid-cols-3 gap-2 p-4"></div></div>',1),Js=l('<button role="tab"><!> <span class="text-[9px] font-bold uppercase tracking-wide"> </span></button>'),Zs=l('<div class="absolute inset-x-0 bottom-0 h-0.5 bg-indigo-400 shadow-[0_0_8px_rgba(129,140,248,0.5)]"></div>'),eo=l('<button role="tab"><!> <span class="tracking-widest uppercase"> </span> <!></button>'),to=l('<!> <div class="md:hidden fixed bottom-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-lg border-t border-slate-800 safe-area-pb" role="tablist"><div class="flex justify-around items-center py-2"><!> <button role="tab"><!> <span class="text-[9px] font-bold uppercase tracking-wide">MAIS</span></button></div></div> <div class="hidden md:flex bg-slate-900/80 backdrop-blur-md border-b border-slate-800 overflow-x-auto no-scrollbar sticky top-[60px] z-30" role="tablist"></div> <div class="h-4 bg-slate-950 hidden md:block"></div>',1);function ao(S,u){it(u,!0);const s=()=>ce(Ct,"$activeTab",b),[b,$]=ut(),z=[{id:"acoes",label:"AÇÕES",icon:aa},{id:"magias",label:"MAGIAS",icon:Ma},{id:"talentos",label:"TALENTOS",icon:Mt},{id:"equipamento",label:"ITENS",icon:xa},{id:"notas",label:"NOTAS",icon:Na},{id:"efeitos",label:"EFEITOS",icon:ia}],n=[{id:"stats",label:"STATS",icon:Sr},{id:"acoes",label:"AÇÕES",icon:aa},{id:"notas",label:"NOTAS",icon:Na},{id:"equipamento",label:"ITENS",icon:xa}],m=[{id:"magias",label:"MAGIAS",icon:Ma},{id:"talentos",label:"TALENTOS",icon:Mt},{id:"efeitos",label:"EFEITOS",icon:ia}];let P=Lt(!1);function Q(_){Ct.set(_),Le(P,!1)}let o=St(()=>m.some(_=>_.id===s()));var g=to(),A=G(g);{var B=_=>{var p=Xs(),d=G(p);d.__click=()=>Le(P,!1);var x=r(d,2),f=t(x),v=r(t(f),2);v.__click=()=>Le(P,!1);var y=t(v);ga(y,{size:18}),e(v),e(f);var j=r(f,2);je(j,21,()=>m,Ie,(q,W)=>{var X=Qs();X.__click=()=>Q(a(W).id);var U=t(X);da(U,()=>a(W).icon,(ae,te)=>{te(ae,{size:24})});var k=r(U,2),F=t(k,!0);e(k),e(X),C(()=>{pe(X,1,`flex flex-col items-center gap-2 p-4 rounded-2xl transition-all active:scale-95 ${s()===a(W).id?"bg-indigo-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`),w(F,a(W).label)}),i(q,X)}),e(j),e(x),ba(3,d,()=>Ca,()=>({duration:150})),ba(3,x,()=>fr,()=>({duration:200})),i(_,p)};h(A,_=>{a(P)&&_(B)})}var E=r(A,2),H=t(E),T=t(H);je(T,17,()=>n,Ie,(_,p)=>{var d=Js();d.__click=()=>Q(a(p).id);var x=t(d);{let y=St(()=>s()===a(p).id?"text-indigo-400":"text-slate-500");da(x,()=>a(p).icon,(j,q)=>{q(j,{size:20,get class(){return a(y)}})})}var f=r(x,2),v=t(f,!0);e(f),e(d),C(()=>{pe(d,1,`flex flex-col items-center gap-0.5 px-3 py-2 transition-all ${s()===a(p).id?"text-indigo-400":"text-slate-500"}`),De(d,"aria-selected",s()===a(p).id),w(v,a(p).label)}),i(_,d)});var O=r(T,2);O.__click=()=>Le(P,!a(P));var c=t(O);{let _=St(()=>a(o)||a(P)?"text-indigo-400":"text-slate-500");hr(c,{size:20,get class(){return a(_)}})}ue(2),e(O),e(H),e(E);var R=r(E,2);je(R,21,()=>z,Ie,(_,p)=>{var d=eo();d.__click=()=>Ct.set(a(p).id);var x=t(d);{let q=St(()=>s()===a(p).id?"text-indigo-400":"text-slate-500");da(x,()=>a(p).icon,(W,X)=>{X(W,{size:14,get class(){return`${a(q)??""} group-hover:scale-110 transition-transform`}})})}var f=r(x,2),v=t(f,!0);e(f);var y=r(f,2);{var j=q=>{var W=Zs();i(q,W)};h(y,q=>{s()===a(p).id&&q(j)})}e(d),C(()=>{pe(d,1,`px-5 lg:px-6 py-4 flex items-center gap-2 font-black text-xs transition-all whitespace-nowrap border-b-2 relative group ${s()===a(p).id?"text-indigo-400 border-indigo-500 bg-indigo-500/5":"text-slate-500 border-transparent hover:text-slate-300"}`),De(d,"aria-selected",s()===a(p).id),w(v,a(p).label)}),i(_,d)}),e(R),ue(2),C(()=>{pe(O,1,`flex flex-col items-center gap-0.5 px-3 py-2 transition-all ${a(o)||a(P)?"text-indigo-400":"text-slate-500"}`),De(O,"aria-expanded",a(P))}),i(S,g),lt(),$()}pt(["click"]);var ro=l('<span class="text-[10px] bg-indigo-900 text-indigo-200 px-1 rounded uppercase"> </span>'),so=l('<button class="text-xs bg-red-900/50 text-red-200 px-3 py-1 rounded border border-red-800 hover:bg-red-900 flex items-center gap-1"><!> </button>'),oo=l('<div class="flex flex-col sm:flex-row justify-between p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-900 cursor-pointer transition-colors gap-4 active:scale-[0.99]" role="button" tabindex="0"><div class="flex items-start gap-3"><div class="bg-slate-800 p-2 rounded text-slate-400 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2"> <!></p> <p class="text-xs text-slate-500"> </p></div></div> <div class="flex flex-col items-end gap-2"><div class="flex items-center gap-4 bg-slate-900 p-2 rounded-lg border border-slate-800"><div class="text-center px-2"><span class="block text-[10px] font-bold text-slate-500 uppercase">Dano</span> <span class="text-xl font-mono text-white font-bold"> </span></div></div> <!></div></div>'),io=l('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-500 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-indigo-900/50 p-2 rounded text-indigo-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-indigo-300 transition-colors">Conjurar Magia</p> <p class="text-xs text-slate-500">Selecione uma magia do grimório para lançar.</p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-indigo-400 uppercase tracking-wider border border-slate-800">Selecionar</div></div></div>'),lo=l('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-yellow-600 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-yellow-900/30 p-2 rounded text-yellow-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-yellow-300 transition-colors">Usar Talento</p> <p class="text-xs text-slate-500">Ative uma habilidade ou talento especial.</p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-yellow-500 uppercase tracking-wider border border-slate-800">Selecionar</div></div></div>'),no=l('<div class="flex flex-col items-center justify-center py-16 px-6 text-center bg-gradient-to-b from-slate-900/50 to-slate-950/50 rounded-[2.5rem] border border-dashed border-slate-800 shadow-2xl relative overflow-hidden group mt-4"><div class="absolute -top-24 -right-24 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full"></div> <div class="absolute -bottom-24 -left-24 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full"></div> <div class="relative"><div class="w-20 h-20 bg-slate-800 rounded-3xl flex items-center justify-center text-indigo-400 mb-6 mx-auto transform group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 shadow-xl border border-slate-700"><!></div> <h3 class="text-2xl font-black text-white mb-3 uppercase tracking-tight">Pronto para o Combate?</h3> <p class="text-slate-400 mb-8 max-w-sm mx-auto leading-relaxed">Sua lista de ações rápidas está vazia. Equipe seu herói para ver armas, magias e talentos ativos aqui.</p> <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 w-full max-w-md"><button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300">Inventário</span></button> <button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300">Magias</span></button> <button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300">Talentos</span></button></div></div></div>'),vo=l('<div class="space-y-4"><!> <!> <!> <!></div>');function co(S,u){it(u,!0);const s=()=>ce(Oe,"$character",b),[b,$]=ut(),{useConsumable:z}=ge;let n=St(()=>s().equipment.filter(_=>_.type===zt.WEAPON&&_.equippedState||_.type===zt.EXPLOSIVE)),m=St(()=>s().spells.length>0),P=St(()=>s().talents.length>0),Q=St(()=>a(n).length===0&&!a(m)&&!a(P));function o(_,p=null){Fe.update(d=>({...d,type:_,isOpen:!0,data:p}))}function g(_,p){_.stopPropagation(),z(p)}var A=vo(),B=t(A);je(B,17,()=>a(n),Ie,(_,p)=>{var d=oo();d.__click=()=>o("weapon_menu",a(p));var x=t(d),f=t(x),v=t(f);aa(v,{size:20}),e(f);var y=r(f,2),j=t(y),q=t(j),W=r(q);{var X=be=>{var J=ro(),ie=t(J,!0);e(J),C(()=>w(ie,a(p).equippedState)),i(be,J)};h(W,be=>{a(p).equippedState&&be(X)})}e(j);var U=r(j,2),k=t(U);e(U),e(y),e(x);var F=r(x,2),ae=t(F),te=t(ae),Z=r(t(te),2),Y=t(Z);e(Z),e(te),e(ae);var re=r(ae,2);{var oe=be=>{var J=so();J.__click=ke=>g(ke,a(p));var ie=t(J);_r(ie,{size:12});var he=r(ie);e(J),C(()=>{De(J,"aria-label",`Usar ${a(p).name??""}`),w(he,` Throw (${a(p).quantity??""})`)}),i(be,J)};h(re,be=>{a(p).type===zt.EXPLOSIVE&&be(oe)})}e(F),e(d),C(()=>{De(d,"aria-label",`Opções para ${a(p).name??""}`),w(q,`${a(p).name??""} `),w(k,`${(a(p).traits||"-")??""} • ${(a(p).range||"-")??""}`),w(Y,`${(a(p).damageDice||0)??""}d6`)}),i(_,d)});var E=r(B,2);{var H=_=>{var p=io();p.__click=()=>o("cast_spell");var d=t(p),x=t(d),f=t(x);ra(f,{size:20}),e(x),ue(2),e(d),ue(2),e(p),i(_,p)};h(E,_=>{a(m)&&_(H)})}var T=r(E,2);{var O=_=>{var p=lo();p.__click=()=>o("select_talent");var d=t(p),x=t(d),f=t(x);Mt(f,{size:20}),e(x),ue(2),e(d),ue(2),e(p),i(_,p)};h(T,_=>{a(P)&&_(O)})}var c=r(T,2);{var R=_=>{var p=no(),d=r(t(p),4),x=t(d),f=t(x);aa(f,{size:40,class:"opacity-80"}),e(x);var v=r(x,6),y=t(v);y.__click=()=>Ct.set("equipamento");var j=t(y),q=t(j);xa(q,{size:20}),e(j),ue(2),e(y);var W=r(y,2);W.__click=()=>Ct.set("magias");var X=t(W),U=t(X);ra(U,{size:20}),e(X),ue(2),e(W);var k=r(W,2);k.__click=()=>Ct.set("talentos");var F=t(k),ae=t(F);Mt(ae,{size:20}),e(F),ue(2),e(k),e(v),e(d),e(p),ba(1,p,()=>Ca,()=>({duration:300})),i(_,p)};h(c,_=>{a(Q)&&_(R)})}e(A),i(S,A),lt(),$()}pt(["click"]);var po=l('<div class="p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl group hover:border-indigo-500/50 transition-all duration-300"><div class="flex justify-between items-start mb-3"><div><div class="font-bold text-white text-lg group-hover:text-indigo-300 transition-colors uppercase tracking-tight"> </div> <div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div></div> <button class="text-slate-600 hover:text-white p-1 hover:bg-slate-800 rounded-md transition-all"><!></button></div> <div class="text-sm text-slate-400 mb-4 line-clamp-2 leading-relaxed h-10"> </div> <div class="flex items-center justify-between bg-slate-950/50 p-3 rounded-xl border border-slate-800/50"><span class="text-[10px] font-black text-slate-500 uppercase tracking-widest">Usos Mágicos</span> <div class="flex items-center gap-3"><span> </span> <button class="bg-indigo-600 disabled:opacity-20 text-white text-[10px] font-black px-4 py-1.5 rounded-lg hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-900/40 active:scale-95 uppercase tracking-wider">Cast</button></div></div></div>'),uo=l('<div class="space-y-3"><h4 class="text-[10px] font-black text-indigo-400 uppercase tracking-[0.2em] flex items-center gap-2"><span class="w-8 h-px bg-indigo-500/30"></span> <span class="flex-1 h-px bg-indigo-500/30"></span></h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div>'),bo=l('<div class="text-center py-16 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium">Seu grimório está vazio.</p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> Adicionar Primeira Magia</button></div>'),xo=l('<div class="space-y-8"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight">Grimório Arcano</h3> <p class="text-xs text-slate-500">Seus feitiços e magias conhecidas.</p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95" aria-label="Adicionar Nova Magia"><!> Nova Magia</button></div> <!> <!></div>');function fo(S,u){it(u,!1);const s=()=>ce(Oe,"$character",b),[b,$]=ut();function z(B,E=null){Fe.update(H=>({...H,type:B,isOpen:!0,data:E}))}Nt();var n=xo(),m=t(n),P=r(t(m),2);P.__click=()=>z("spell");var Q=t(P);ct(Q,{size:16}),ue(),e(P),e(m);var o=r(m,2);je(o,0,()=>["Novice","Expert","Master"],Ie,(B,E)=>{var H=se(),T=G(H);{var O=c=>{var R=uo(),_=t(R),p=r(t(_));ue(),e(_);var d=r(_,2);je(d,5,()=>s().spells.filter(x=>x.tier===E),Ie,(x,f)=>{var v=po(),y=t(v),j=t(y),q=t(j),W=t(q,!0);e(q);var X=r(q,2),U=t(X);e(X),e(j);var k=r(j,2);k.__click=()=>z("spell",a(f));var F=t(k);sa(F,{size:14}),e(k),e(y);var ae=r(y,2),te=t(ae,!0);e(ae);var Z=r(ae,2),Y=r(t(Z),2),re=t(Y),oe=t(re);e(re);var be=r(re,2);be.__click=()=>z("confirm_spell",a(f)),e(Y),e(Z),e(v),C(()=>{w(W,a(f).name),w(U,`${a(f).tradition??""} • ${a(f).type??""}`),De(k,"aria-label",`Editar ${a(f).name??""}`),w(te,a(f).description),pe(re,1,`text-sm font-mono font-bold ${a(f).castings===0?"text-red-500":"text-indigo-400"}`),w(oe,`${a(f).castings??""}/${a(f).maxCastings??""}`),be.disabled=a(f).castings===0}),i(x,v)}),e(d),e(R),C(()=>w(p,` ${E??""} Spells `)),i(c,R)};h(T,c=>{s().spells.some(R=>R.tier===E)&&c(O)})}i(B,H)});var g=r(o,2);{var A=B=>{var E=bo(),H=t(E);ra(H,{size:48,class:"mx-auto text-slate-800 mb-3"});var T=r(H,4);T.__click=()=>z("spell");var O=t(T);ct(O,{size:14}),ue(),e(T),e(E),i(B,E)};h(g,B=>{s().spells.length===0&&B(A)})}e(n),i(S,n),lt(),$()}pt(["click"]);var go=l('<div class="text-2xl font-mono font-bold text-white leading-tight"> </div>'),_o=l('<div class="text-sm font-bold text-slate-500 uppercase tracking-tighter mt-1 italic">Fora de Combate</div>'),mo=l('<div class="text-center text-slate-500 italic py-4">Nenhum efeito ativo.</div>'),ho=l("<span> </span>"),$o=l('<div class="flex flex-wrap gap-1 mt-1"></div>'),wo=l('<button class="bg-yellow-900/40 hover:bg-yellow-800/40 text-yellow-500 border border-yellow-800 px-2 py-0.5 rounded flex items-center gap-1 transition-colors" aria-label="Sortear encerramento do efeito"><!> Sorte Encerra</button>'),yo=l('<div><div class="flex justify-between items-start"><div class="flex items-center gap-2"><button><div></div></button> <span class="font-bold text-white tracking-tight"> </span></div> <div class="flex gap-2"><button class="text-slate-500 hover:text-white p-1 hover:bg-slate-800 rounded transition-colors"><!></button> <button class="text-slate-500 hover:text-red-400 p-1 hover:bg-slate-800 rounded transition-colors"><!></button></div></div> <div class="text-xs text-slate-400 leading-relaxed"> </div> <!> <div class="flex justify-between items-center text-[10px] text-slate-500 font-mono mt-1 border-t border-slate-800/50 pt-2"><span class="flex items-center gap-1"><!> </span> <!></div></div>'),ko=l('<div class="space-y-4"><div class="flex justify-between items-center bg-slate-900 p-3 rounded-lg border border-slate-800"><div class="flex items-center gap-4"><button class="p-2 hover:bg-slate-700 rounded text-slate-400 disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Voltar Rodada"><!></button> <div class="text-center min-w-[80px]"><div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div> <!></div> <button class="p-2 hover:bg-slate-700 rounded text-white disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Avançar Rodada"><!></button></div> <div class="flex gap-2"><button class="bg-slate-800 hover:bg-red-900/50 text-slate-400 hover:text-red-300 px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1 border border-slate-700"><!> Limpar Inativos</button> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1"><!> Novo Efeito</button></div></div> <div class="space-y-2"><!> <!></div></div>');function Ao(S,u){it(u,!1);const s=()=>ce(Oe,"$character",b),[b,$]=ut(),{advanceRound:z,deleteEffect:n,checkLuckEnds:m}=ge;function P(U,k=null){Fe.update(F=>({...F,type:U,isOpen:!0,data:k}))}Nt();var Q=ko(),o=t(Q),g=t(o),A=t(g);A.__click=()=>z("prev");var B=t(A);zr(B,{size:20}),e(A);var E=r(A,2),H=t(E),T=t(H,!0);e(H);var O=r(H,2);{var c=U=>{var k=go(),F=t(k,!0);e(k),C(()=>w(F,s().currentRound||1)),i(U,k)},R=U=>{var k=_o();i(U,k)};h(O,U=>{s().combatActive?U(c):U(R,!1)})}e(E);var _=r(E,2);_.__click=()=>z("next");var p=t(_);wr(p,{size:20}),e(_),e(g);var d=r(g,2),x=t(d);x.__click=function(...U){ge.cleanInactiveEffects?.apply(this,U)};var f=t(x);$r(f,{size:14}),ue(),e(x);var v=r(x,2);v.__click=()=>P("effect");var y=t(v);ct(y,{size:14}),ue(),e(v),e(d),e(o);var j=r(o,2),q=t(j);{var W=U=>{var k=mo();i(U,k)};h(q,U=>{s().effects.length===0&&U(W)})}var X=r(q,2);je(X,1,()=>s().effects,Ie,(U,k)=>{var F=yo(),ae=t(F),te=t(ae),Z=t(te);Z.__click=()=>ge.toggleEffect(a(k).id);var Y=t(Z);e(Z);var re=r(Z,2),oe=t(re,!0);e(re),e(te);var be=r(te,2),J=t(be);J.__click=()=>P("effect",a(k));var ie=t(J);sa(ie,{size:14}),e(J);var he=r(J,2);he.__click=()=>n(a(k).id);var ke=t(he);Wt(ke,{size:14}),e(he),e(be),e(ae);var Ee=r(ae,2),ne=t(Ee,!0);e(Ee);var de=r(Ee,2);{var $e=K=>{var V=$o();je(V,5,()=>a(k).modifiers,Ie,(D,I)=>{var xe=ho(),ye=t(xe);e(xe),C(()=>{pe(xe,1,`text-[9px] px-1.5 py-0.5 rounded border ${a(I).type===Tt.SET?"bg-yellow-900/30 text-yellow-200 border-yellow-800":"bg-slate-800 text-slate-300 border-slate-700"} font-medium`),w(ye,`${(Pa[a(I).target]||a(I).target)??""}: ${a(I).type===Tt.SET?"=":a(I).type===Tt.MULT?"x":a(I).value>0?"+":""}${a(I).value??""}`)}),i(D,xe)}),e(V),i(K,V)};h(de,K=>{a(k).isActive&&Array.isArray(a(k).modifiers)&&a(k).modifiers.length>0&&K($e)})}var we=r(de,2),Ae=t(we),fe=t(Ae);Ia(fe,{size:10,class:"text-indigo-400"});var ze=r(fe);e(Ae);var Se=r(Ae,2);{var L=K=>{var V=wo();V.__click=()=>m(a(k).id);var D=t(V);_a(D,{size:10}),ue(),e(V),i(K,V)};h(Se,K=>{a(k).duration==="LUCK_ENDS"&&a(k).isActive&&K(L)})}e(we),e(F),C(()=>{pe(F,1,`p-3 rounded border flex flex-col gap-2 transition-all ${a(k).isActive?"bg-slate-900 border-indigo-900 shadow-lg shadow-indigo-950/20":"bg-slate-950 border-slate-800 opacity-60"}`),pe(Z,1,`w-8 h-4 rounded-full relative transition-colors ${a(k).isActive?"bg-green-500":"bg-slate-600"}`),De(Z,"aria-label",a(k).isActive?"Desativar efeito {eff.name}":"Ativar efeito {eff.name}"),De(Z,"aria-pressed",a(k).isActive),pe(Y,1,`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${a(k).isActive?"left-4.5":"left-0.5"}`),w(oe,a(k).name),De(J,"aria-label",`Editar ${a(k).name??""}`),De(he,"aria-label",`Excluir ${a(k).name??""}`),w(ne,a(k).description),w(ze,` ${Ta[a(k).duration]??""} ${a(k).duration==="ROUNDS"?`(${a(k).roundsLeft})`:""}`)}),i(U,F)}),e(j),e(Q),C(()=>{A.disabled=!!s().campaignId,w(T,s().combatActive?"Rodada Atual":"Status"),_.disabled=!!s().campaignId}),i(S,Q),lt(),$()}pt(["click"]);var zo=l('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1">Tipo</span> <span class="font-bold text-slate-300 text-xs flex items-center justify-center gap-1.5 bg-slate-800 px-2 py-1 rounded-md"><!> Passivo</span>',1),So=l('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1">Usos</span> <span> <span class="text-slate-600 text-sm"> </span></span>',1),Mo=l('<div class="flex gap-2"><button title="Recuperar Uso" class="bg-slate-800 disabled:opacity-20 hover:bg-green-600/20 text-green-400 p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-green-500/50"><!></button> <button title="Usar Talento" class="bg-slate-800 disabled:opacity-20 hover:bg-indigo-600/20 text-white p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-indigo-500/50"><!></button></div>'),No=l('<div class="p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl flex flex-col md:flex-row md:items-center gap-6 group hover:border-indigo-500/50 hover:bg-slate-900/60 transition-all duration-300"><div class="flex-1"><div class="flex items-center gap-3 mb-2"><div class="p-2 rounded-lg bg-slate-800 text-yellow-500 group-hover:scale-110 transition-transform shadow-inner"><!></div> <h4 class="font-bold text-white text-lg tracking-tight uppercase tracking-tight"> </h4> <button class="text-slate-600 hover:text-indigo-400 opacity-0 group-hover:opacity-100 transition-all transform hover:scale-110"><!></button></div> <p class="text-sm text-slate-400 leading-relaxed max-w-2xl"> </p></div> <div class="shrink-0 flex items-center gap-4 bg-slate-950/50 p-3 rounded-xl border border-slate-800 shadow-inner"><div class="text-center px-2 border-r border-slate-800 pr-4 min-w-[80px]"><!></div> <!></div></div>'),Do=l('<div class="text-center py-12 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium">Você ainda não possui talentos cadastrados.</p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> Adicionar Primeiro Talento</button></div>'),Eo=l('<div class="space-y-6"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight">Talentos & Habilidades</h3> <p class="text-xs text-slate-500">Suas capacidades especiais e passivas.</p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95" aria-label="Adicionar Novo Talento"><!> Novo Talento</button></div> <div class="grid grid-cols-1 gap-4"><!> <!></div></div>');function To(S,u){it(u,!1);const s=()=>ce(Oe,"$character",b),[b,$]=ut(),{recoverTalent:z}=ge;function n(H,T=null){Fe.update(O=>({...O,type:H,isOpen:!0,data:T}))}Nt();var m=Eo(),P=t(m),Q=r(t(P),2);Q.__click=()=>n("talent");var o=t(Q);ct(o,{size:16}),ue(),e(Q),e(P);var g=r(P,2),A=t(g);je(A,1,()=>s().talents,Ie,(H,T)=>{var O=No(),c=t(O),R=t(c),_=t(R),p=t(_);Mt(p,{size:18}),e(_);var d=r(_,2),x=t(d,!0);e(d);var f=r(d,2);f.__click=()=>n("talent",a(T));var v=t(f);sa(v,{size:14}),e(f),e(R);var y=r(R,2),j=t(y,!0);e(y),e(c);var q=r(c,2),W=t(q),X=t(W);{var U=te=>{var Z=zo(),Y=r(G(Z),2),re=t(Y);yr(re,{size:12,class:"text-indigo-400"}),ue(),e(Y),i(te,Z)},k=te=>{var Z=So(),Y=r(G(Z),2),re=t(Y,!0),oe=r(re),be=t(oe);e(oe),e(Y),C(()=>{pe(Y,1,`font-mono font-bold text-lg ${a(T).uses===0?"text-red-400":"text-white"}`),w(re,a(T).uses),w(be,`/${a(T).maxUses??""}`)}),i(te,Z)};h(X,te=>{a(T).isPassive?te(U):te(k,!1)})}e(W);var F=r(W,2);{var ae=te=>{var Z=Mo(),Y=t(Z);Y.__click=()=>z(a(T).id);var re=t(Y);ct(re,{size:18}),e(Y);var oe=r(Y,2);oe.__click=()=>n("confirm_talent",a(T));var be=t(oe);Mt(be,{size:18}),e(oe),e(Z),C(()=>{Y.disabled=a(T).uses>=a(T).maxUses,De(Y,"aria-label",`Recuperar uso de ${a(T).name??""}`),oe.disabled=a(T).uses===0,De(oe,"aria-label",`Usar ${a(T).name??""}`)}),i(te,Z)};h(F,te=>{a(T).isPassive||te(ae)})}e(q),e(O),C(()=>{w(x,a(T).name),De(f,"aria-label",`Editar ${a(T).name??""}`),w(j,a(T).description)}),i(H,O)});var B=r(A,2);{var E=H=>{var T=Do(),O=t(T);Mt(O,{size:48,class:"mx-auto text-slate-800 mb-3"});var c=r(O,4);c.__click=()=>n("talent");var R=t(c);ct(R,{size:14}),ue(),e(c),e(T),i(H,T)};h(B,H=>{s().talents.length===0&&H(E)})}e(g),e(m),i(S,m),lt(),$()}pt(["click"]);var Po=l('<span class="block italic text-slate-400"> </span>'),jo=l("• Def <!>",1),Io=l('<button class="text-xs bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600">Usar</button>'),Co=l("<button> </button>"),Oo=l("<button>2H</button>"),Ho=l("<button>Main</button>"),Ro=l("<!> <button>Off</button>",1),qo=l('<div class="flex justify-center gap-1"><!></div>'),Uo=l('<tr class="hover:bg-slate-900/50"><td class="p-3"><div class="font-bold text-white"> </div> <div class="text-[10px] text-slate-500"> <!> <!></div></td><td class="p-3"><span class="text-[10px] border border-slate-700 px-1 rounded uppercase bg-slate-900"> </span></td><td class="p-3 text-center"><!></td><td class="p-3 text-right font-mono"> </td><td class="p-3 text-right"><button class="text-slate-500 hover:text-white"><!></button></td></tr>'),Lo=l('<div class="space-y-4"><div class="lg:hidden"><!></div> <div class="flex justify-between items-center"><h3 class="text-xs font-bold text-slate-500 uppercase">Inventário</h3> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-3 py-1.5 rounded text-white font-bold flex items-center gap-1"><!> Novo Item</button></div> <div class="bg-slate-950 rounded-lg border border-slate-800 overflow-hidden"><table class="w-full text-sm text-left"><thead class="bg-slate-900 text-slate-400 font-bold uppercase text-[10px]"><tr><th class="p-3">Item</th><th class="p-3">Tipo</th><th class="p-3 text-center">Ações / Equipar</th><th class="p-3 text-right">Qtd</th><th class="p-3 w-8"></th></tr></thead><tbody class="divide-y divide-slate-800 text-slate-300"></tbody></table></div></div>');function Fo(S,u){it(u,!1);const s=()=>ce(Oe,"$character",b),[b,$]=ut(),{useConsumable:z,equipItem:n}=ge;function m(O,c=null){Fe.update(R=>({...R,type:O,isOpen:!0,data:c}))}Nt();var P=Lo(),Q=t(P),o=t(Q);Ra(o,{}),e(Q);var g=r(Q,2),A=r(t(g),2);A.__click=()=>m("item");var B=t(A);ct(B,{size:14}),ue(),e(A),e(g);var E=r(g,2),H=t(E),T=r(t(H));je(T,5,()=>s().equipment,Ie,(O,c)=>{var R=Uo(),_=t(R),p=t(_),d=t(p,!0);e(p);var x=r(p,2),f=t(x),v=r(f);{var y=J=>{var ie=Po(),he=t(ie,!0);e(ie),C(()=>w(he,a(c).notes)),i(J,ie)};h(v,J=>{a(c).notes&&J(y)})}var j=r(v,2);{var q=J=>{var ie=jo(),he=r(G(ie));{var ke=ne=>{var de=ea();C(()=>w(de,`Fixed ${a(c).defenseFixed??""}`)),i(ne,de)},Ee=ne=>{var de=ea();C(()=>w(de,`+${a(c).defenseMod??""}`)),i(ne,de)};h(he,ne=>{a(c).defenseFixed?ne(ke):ne(Ee,!1)})}i(J,ie)};h(j,J=>{a(c).type===zt.ARMOR&&J(q)})}e(x),e(_);var W=r(_),X=t(W),U=t(X,!0);e(X),e(W);var k=r(W),F=t(k);{var ae=J=>{var ie=Io();ie.__click=()=>z(a(c)),C(()=>{ie.disabled=a(c).quantity<=0,De(ie,"aria-label",`Usar ${a(c).name??""}`)}),i(J,ie)},te=J=>{var ie=se(),he=G(ie);{var ke=ne=>{var de=Co();de.__click=()=>n(a(c));var $e=t(de,!0);e(de),C(()=>{pe(de,1,`text-xs px-2 py-1 rounded border transition-colors ${a(c).equipped?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-400"}`),De(de,"aria-label",a(c).equipped?"Desequipar armadura":"Equipar armadura"),w($e,a(c).equipped?"Equipado":"Equipar")}),i(ne,de)},Ee=ne=>{var de=se(),$e=G(de);{var we=Ae=>{var fe=qo(),ze=t(fe);{var Se=K=>{var V=Oo();V.__click=()=>n(a(c),a(c).equippedState?null:"two"),C(()=>{pe(V,1,`text-[10px] px-2 py-1 rounded border ${a(c).equippedState==="two"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),De(V,"aria-label",a(c).equippedState==="two"?"Desequipar 2H":"Equipar 2H")}),i(K,V)},L=K=>{var V=Ro(),D=G(V);{var I=ye=>{var Ce=Ho();Ce.__click=()=>n(a(c),a(c).equippedState==="main"?null:"main"),C(()=>{pe(Ce,1,`text-[10px] px-2 py-1 rounded border ${a(c).equippedState==="main"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),De(Ce,"aria-label",a(c).equippedState==="main"?"Desequipar Main Hand":"Equipar Main Hand")}),i(ye,Ce)};h(D,ye=>{a(c).grip!==pa.OFF&&ye(I)})}var xe=r(D,2);xe.__click=()=>n(a(c),a(c).equippedState==="off"?null:"off"),C(()=>{pe(xe,1,`text-[10px] px-2 py-1 rounded border ${a(c).equippedState==="off"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),De(xe,"aria-label",a(c).equippedState==="off"?"Desequipar Off Hand":"Equipar Off Hand")}),i(K,V)};h(ze,K=>{a(c).grip===pa.TWO?K(Se):K(L,!1)})}e(fe),i(Ae,fe)};h($e,Ae=>{(a(c).type===zt.WEAPON||a(c).type===zt.SHIELD)&&Ae(we)},!0)}i(ne,de)};h(he,ne=>{a(c).type===zt.ARMOR?ne(ke):ne(Ee,!1)},!0)}i(J,ie)};h(F,J=>{a(c).type===zt.CONSUMABLE?J(ae):J(te,!1)})}e(k);var Z=r(k),Y=t(Z,!0);e(Z);var re=r(Z),oe=t(re);oe.__click=()=>m("item",a(c));var be=t(oe);sa(be,{size:14}),e(oe),e(re),e(R),C(()=>{w(d,a(c).name),w(f,`${a(c).quality??""} • ${a(c).availability??""} • ${a(c).price??""}gp `),w(U,a(c).type),w(Y,a(c).quantity),De(oe,"aria-label",`Editar ${a(c).name??""}`)}),i(O,R)}),e(T),e(H),e(E),e(P),i(S,P),lt(),$()}pt(["click"]);var Go=l('<div class="space-y-6"><div class="lg:hidden"><!></div> <div class="space-y-4"><div class="flex justify-between items-center mb-2"><h3 class="text-xs font-bold text-slate-500 uppercase">Anotações do Personagem</h3> <span class="text-[10px] text-slate-600 italic">Salvo automaticamente</span></div> <textarea class="w-full h-[50vh] bg-slate-950 border border-slate-800 rounded p-4 text-white resize-none focus:border-indigo-500 focus:outline-none custom-scrollbar leading-relaxed font-mono text-sm" placeholder="Escreva aqui a história, anotações de campanha, NPCs importantes, segredos..." aria-label="Anotações do personagem"></textarea></div></div>');function Vo(S,u){it(u,!1);const s=()=>ce(Oe,"$character",b),[b,$]=ut();Nt();var z=Go(),n=t(z),m=t(n);qa(m,{}),e(n);var P=r(n,2),Q=r(t(P),2);Zt(Q),e(P),e(z),me(Q,()=>s().notes,o=>Fa(Oe,wa(s).notes=o,wa(s))),i(S,z),lt(),$()}var Bo=l('<div class="space-y-4 flex-1 flex flex-col"><!> <button class="w-full bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 p-4 rounded-2xl border border-emerald-500/30 flex items-center justify-center gap-3 group transition-all shadow-lg shadow-emerald-900/30 hover:shadow-emerald-500/20 active:scale-[0.98] cursor-pointer"><div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform"><!></div> <span class="font-black text-white uppercase tracking-wider text-sm">Teste de Sorte</span></button> <!> <!> <div class="lg:hidden mt-auto pt-6"><!></div></div>');function Wo(S,u){it(u,!1),Nt();var s=Bo(),b=t(s);Oa(b,{});var $=r(b,2);$.__click=()=>Fe.set({type:"pre_roll",isOpen:!0,data:{type:"luck",source:{name:"Sorte"}}});var z=t($),n=t(z);_a(n,{size:24,class:"text-white"}),e(z),ue(2),e($);var m=r($,2);Ha(m,{});var P=r(m,2);Ua(P,{});var Q=r(P,2),o=t(Q);fa(o,{banner:!0}),e(Q),e(s),i(S,s),lt()}pt(["click"]);var Yo=l('<div class="min-h-screen flex flex-col items-center justify-center p-4"><div class="bg-slate-900 border border-slate-800 rounded-3xl p-8 max-w-md w-full text-center shadow-2xl"><div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-600"><!></div> <h1 class="text-2xl font-black text-white mb-2 uppercase tracking-tight">Personagem Não Encontrado</h1> <p class="text-slate-400 mb-8">Este personagem não existe na sua base local. Crie um novo personagem através da página inicial.</p> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all"><!> Voltar ao Início</button></div></div>'),Ko=l('<!> <!> <!> <main class="max-w-6xl mx-auto md:px-4 mt-6 lg:mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6"><aside class="hidden lg:block lg:col-span-3 space-y-4"><!> <button class="w-full bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 p-4 rounded-2xl border border-emerald-500/30 flex items-center justify-center gap-3 group transition-all shadow-lg shadow-emerald-900/30 hover:shadow-emerald-500/20 active:scale-[0.98] cursor-pointer"><div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform"><!></div> <span class="font-black text-white uppercase tracking-wider text-sm">Teste de Sorte</span></button> <!> <!> <!> <!> <div class="pt-2"><!></div></aside> <section class="lg:col-span-9"><div class="bg-slate-900 md:rounded-xl md:border md:border-slate-800 min-h-[calc(100vh-200px)] md:min-h-[60vh] flex flex-col"><!> <div class="p-4 md:p-6 flex-1 flex flex-col"><!> <!> <!> <!> <!> <!> <!></div></div></section></main> <div class="hidden"><!></div>',1),Qo=l('<div class="flex items-center justify-center min-h-screen"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"></div></div>'),Xo=l('<div class="min-h-screen bg-slate-950 text-slate-100 font-sans pb-28 md:pb-20 relative overflow-x-hidden"><!></div> ```',1);function _i(S,u){it(u,!0);const s=()=>ce(Oe,"$character",g),b=()=>ce(Kt,"$normalHealth",g),$=()=>ce(Qt,"$currentHealth",g),z=()=>ce(Yt,"$damage",g),n=()=>ce(ua,"$totalDefense",g),m=()=>ce(ca,"$effectiveMaxHealth",g),P=()=>ce(sr,"$page",g),Q=()=>ce(va,"$isHistoryOpen",g),o=()=>ce(Ct,"$activeTab",g),[g,A]=ut();let B=Lt(!1),E=Lt(!1),H=Lt(null);oa(()=>{if(!a(B)||a(E)||!a(H))return;const d=s(),x=b(),f=$(),v=z(),y=n(),j=m(),q={...d,normalHealth:x,currentHealth:f,damage:v};na.set(a(H),q),d.campaignId&&za({id:a(H),type:"player",name:d.name,level:d.level,ancestry:d.ancestry,damage:v,currentHealth:f,normalHealth:x,health:j,defense:y,initiative:d.initiative,acted:d.acted,afflictions:d.afflictions||[],campaignApproval:d.campaignApproval})}),oa(()=>{if(!a(B)||a(E)||!a(H)||!Ht(Oe).campaignId)return;const x=setInterval(()=>{const f=Ht(Oe);za({id:a(H),type:"player",name:f.name,level:f.level,ancestry:f.ancestry,damage:Ht(Yt),currentHealth:Ht(Qt),normalHealth:Ht(Kt),health:Ht(ca),defense:Ht(ua),initiative:f.initiative,acted:f.acted,afflictions:f.afflictions||[],campaignApproval:f.campaignApproval})},3e4);return()=>clearInterval(x)}),oa(()=>{const d=P().params.id;d&&d!==a(H)&&T(d)});async function T(d){if(Le(B,!1),Le(E,!1),Le(H,d,!0),await tr(),na.has(d)){const x=na.get(d);Oe.set({...ar,...x,id:d}),x.normalHealth!==void 0&&Kt.set(x.normalHealth),x.currentHealth!==void 0&&Qt.set(x.currentHealth),x.damage!==void 0&&Yt.set(x.damage);const f=Ht(Oe);f.campaignId&&rr(f.campaignId,!1,a(H))}else Le(E,!0);window.innerWidth<768?Ct.set("stats"):Ht(Ct)==="stats"&&Ct.set("acoes"),Le(B,!0)}var O=Xo(),c=G(O),R=t(c);{var _=d=>{var x=se(),f=G(x);{var v=j=>{var q=Yo(),W=t(q),X=t(W),U=t(X);vr(U,{size:40}),e(X);var k=r(X,6);k.__click=()=>ja(Ea("/"));var F=t(k);gr(F,{size:18}),ue(),e(k),e(W),e(q),i(j,q)},y=j=>{var q=Ko(),W=G(q);cr(W,{get isOpen(){return Q()},onClose:()=>va.set(!1)});var X=r(W,2);Os(X,{});var U=r(X,2);Rr(U,{});var k=r(U,2),F=t(k),ae=t(F);Oa(ae,{});var te=r(ae,2);te.__click=()=>Fe.set({type:"pre_roll",isOpen:!0,data:{type:"luck",source:{name:"Sorte"}}});var Z=t(te),Y=t(Z);_a(Y,{size:24,class:"text-white"}),e(Z),ue(2),e(te);var re=r(te,2);Ha(re,{});var oe=r(re,2);Ra(oe,{});var be=r(oe,2);qa(be,{});var J=r(be,2);Ua(J,{});var ie=r(J,2),he=t(ie);fa(he,{}),e(ie),e(F);var ke=r(F,2),Ee=t(ke),ne=t(Ee);ao(ne,{});var de=r(ne,2),$e=t(de);{var we=N=>{Wo(N,{})};h($e,N=>{o()==="stats"&&N(we)})}var Ae=r($e,2);{var fe=N=>{co(N,{})};h(Ae,N=>{o()==="acoes"&&N(fe)})}var ze=r(Ae,2);{var Se=N=>{Ao(N,{})};h(ze,N=>{o()==="efeitos"&&N(Se)})}var L=r(ze,2);{var K=N=>{fo(N,{})};h(L,N=>{o()==="magias"&&N(K)})}var V=r(L,2);{var D=N=>{To(N,{})};h(V,N=>{o()==="talentos"&&N(D)})}var I=r(V,2);{var xe=N=>{Fo(N,{})};h(I,N=>{o()==="equipamento"&&N(xe)})}var ye=r(I,2);{var Ce=N=>{Vo(N,{})};h(ye,N=>{o()==="notas"&&N(Ce)})}e(de),e(Ee),e(ke),e(k);var M=r(k,2),ee=t(M);fa(ee,{banner:!0}),e(M),i(j,q)};h(f,j=>{a(E)?j(v):j(y,!1)})}i(d,x)},p=d=>{var x=Qo();i(d,x)};h(R,d=>{a(B)?d(_):d(p,!1)})}e(c),ue(),i(S,O),lt(),A()}pt(["click"]);export{_i as component,gi as universal};
