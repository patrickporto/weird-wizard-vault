import"../chunks/DsnmJJEf.js";import"../chunks/CzS45DwE.js";import{v as oe,w as E,k as u,x as mt,j as m,z as ht,F as g,R as X,y as d,A as a,B as t,I as e,t as L,a2 as Va,L as Ht,n as Re,aq as os,U as rs,T as Pt,b7 as fa}from"../chunks/CeQBZBfG.js";import{d as bt,o as za,s as f,w as da,g as Ee,e as St}from"../chunks/DGsQstmn.js";import{l as He,s as Ve,i as $,p as Le}from"../chunks/CyF0tIdS.js";import{h as Rt}from"../chunks/lCLb9LXD.js";import{a as Fe,$ as Vt,e as sa,s as ze,i as ns,r as ut,f as ya,g as ma}from"../chunks/Bf8fp1vJ.js";import{s as Wt,a as me}from"../chunks/T6JPUUzi.js";import{I as We,s as Ye}from"../chunks/PNmOa-dp.js";import{X as Wa,M as Ya,q as jt,a as ka,T as Ma,P as ha,b as is}from"../chunks/oOtnmlXQ.js";import{t as ft,a as qa,f as Mt}from"../chunks/7CS22xGD.js";import{D as tt,G as oa,S as ls,l as Ja,a as $a,b as ds,c as cs,C as vs,g as ba}from"../chunks/DFSqulGQ.js";import{b as pt,h as gt,d as xe,e as _e,f as Qt,g as ea,k as Sa,l as ra,u as Ba,p as us}from"../chunks/7vkt-fou.js";import{b as ps,g as ta}from"../chunks/BFtPuR4J.js";import{C as Ga,U as Aa,r as aa,W as gs}from"../chunks/B9DjeVgS.js";import{C as fs,G as Ca,a as ms,P as Ua}from"../chunks/CozXHEm3.js";import{U as Ia,L as hs,A as bs}from"../chunks/bjtA0hWe.js";import{h as xs}from"../chunks/BYmFNSF7.js";function _s(c,o){const r=He(o,["children","$$slots","$$events","$$legacy"]);const l=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];We(c,Ve({name:"circle-alert"},()=>r,{get iconNode(){return l},children:(i,n)=>{var s=oe(),v=E(s);Ye(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function ws(c,o){const r=He(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"m2 2 20 20"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07"}]];We(c,Ve({name:"cloud-off"},()=>r,{get iconNode(){return l},children:(i,n)=>{var s=oe(),v=E(s);Ye(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function ys(c,o){const r=He(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"}]];We(c,Ve({name:"cloud"},()=>r,{get iconNode(){return l},children:(i,n)=>{var s=oe(),v=E(s);Ye(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function Oa(c,o){const r=He(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];We(c,Ve({name:"download"},()=>r,{get iconNode(){return l},children:(i,n)=>{var s=oe(),v=E(s);Ye(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function ks(c,o){const r=He(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];We(c,Ve({name:"loader-circle"},()=>r,{get iconNode(){return l},children:(i,n)=>{var s=oe(),v=E(s);Ye(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function $s(c,o){const r=He(o,["children","$$slots","$$events","$$legacy"]);const l=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21"}]];We(c,Ve({name:"monitor"},()=>r,{get iconNode(){return l},children:(i,n)=>{var s=oe(),v=E(s);Ye(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function Ss(c,o){const r=He(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}]];We(c,Ve({name:"palette"},()=>r,{get iconNode(){return l},children:(i,n)=>{var s=oe(),v=E(s);Ye(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function Cs(c,o){const r=He(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];We(c,Ve({name:"refresh-cw"},()=>r,{get iconNode(){return l},children:(i,n)=>{var s=oe(),v=E(s);Ye(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function xa(c,o){const r=He(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3"}]];We(c,Ve({name:"scroll"},()=>r,{get iconNode(){return l},children:(i,n)=>{var s=oe(),v=E(s);Ye(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function Es(c,o){const r=He(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}],["path",{d:"M12 8v4"}],["path",{d:"M12 16h.01"}]];We(c,Ve({name:"shield-alert"},()=>r,{get iconNode(){return l},children:(i,n)=>{var s=oe(),v=E(s);Ye(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}var zs=m('<button class="fixed bottom-28 md:bottom-6 right-6 z-[60] bg-indigo-600 hover:bg-indigo-500 text-white h-14 px-4 rounded-full shadow-2xl shadow-indigo-900/50 flex items-center justify-center font-bold animate-pulse hover:animate-none transition-all active:scale-95 group"><!> <span class="text-sm uppercase tracking-wider max-w-0 overflow-hidden ml-0 group-hover:max-w-xs group-hover:ml-2 transition-all duration-300 md:max-w-xs md:ml-2 md:inline"> </span></button>'),Is=m("<div><!></div>"),Ts=m("<div><!></div>"),Ns=m('<li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">1</span> <!></li> <li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">2</span> <div><!></div></li>',1),Ds=m('<li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">1</span> <div><!></div></li> <li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">2</span> <div><!></div></li>',1),Ps=m('<div class="fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-end sm:items-center justify-center p-4 animate-in fade-in"><div class="bg-slate-900 border border-slate-700 rounded-2xl p-6 max-w-sm w-full relative shadow-2xl mb-4 sm:mb-0 animate-in slide-in-from-bottom-10 sm:slide-in-from-bottom-0 sm:zoom-in-95"><button class="absolute top-4 right-4 text-slate-400 hover:text-white p-1"><!></button> <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2"><!> </h3> <ol class="space-y-4 text-slate-300 text-sm"><!></ol> <div class="mt-6 text-center"><button class="text-indigo-400 text-sm font-bold hover:text-indigo-300"> </button></div></div></div>'),js=m("<!> <!>",1);function Ms(c,o){mt(o,!0);const r=()=>me(Vt,"$t",l),[l,i]=Wt();let n=X(null),s=X(!1),v=X(!1),_=X(!1),h=X(!1);za(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone){g(s,!1);return}const C=window.navigator.userAgent;g(_,/iPad|iPhone|iPod/.test(C)&&!window.MSStream,!0),g(h,/CriOS/i.test(C),!0),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(C)&&g(s,!0),window.addEventListener("beforeinstallprompt",N=>{N.preventDefault(),g(n,N,!0),g(s,!0)}),window.addEventListener("appinstalled",()=>{g(n,null),g(s,!1),g(v,!1)})});async function S(){if(d(n)){d(n).prompt();const{outcome:x}=await d(n).userChoice;x==="accepted"&&(g(n,null),g(s,!1))}else g(v,!0)}const U="inline w-3.5 h-3.5",j=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${U}"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" x2="12" y1="2" y2="15"/></svg>`,Y=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${U}"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M8 12h8"/><path d="M12 8v8"/></svg>`,b=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${U}"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>`;function z(x,C){const M=r()(x),N=`<span class="inline-flex items-center justify-center bg-slate-800 p-1 rounded mx-1 align-middle">${C}</span>`;return M.replace("{icon}",N)}var R=js(),w=E(R);{var G=x=>{var C=zs();C.__click=S;var M=t(C);Oa(M,{size:24});var N=a(M,2),re=t(N,!0);e(N),e(C),L((q,B)=>{Fe(C,"aria-label",q),f(re,B)},[()=>r()("home.install.button"),()=>r()("home.install.button")]),u(x,C)};$(w,x=>{d(s)&&x(G)})}var I=a(w,2);{var y=x=>{var C=Ps(),M=t(C),N=t(M);N.__click=()=>g(v,!1);var re=t(N);Wa(re,{size:20}),e(N);var q=a(N,2),B=t(q);Oa(B,{size:24,class:"text-indigo-500"});var T=a(B);e(q);var H=a(q,2),te=t(H);{var Z=O=>{var W=Ns(),F=E(W),le=a(t(F),2);{var ce=ve=>{var ie=Is(),Q=t(ie);Rt(Q,()=>z("home.install.ios_chrome_step1",j)),e(ie),u(ve,ie)},he=ve=>{var ie=Ts(),Q=t(ie);Rt(Q,()=>z("home.install.ios_step1",j)),e(ie),u(ve,ie)};$(le,ve=>{d(h)?ve(ce):ve(he,!1)})}e(F);var de=a(F,2),ae=a(t(de),2),we=t(ae);Rt(we,()=>z("home.install.ios_step2",Y)),e(ae),e(de),u(O,W)},J=O=>{var W=Ds(),F=E(W),le=a(t(F),2),ce=t(le);Rt(ce,()=>z("home.install.android_step1",b)),e(le),e(F);var he=a(F,2),de=a(t(he),2),ae=t(de);Rt(ae,()=>r()("home.install.android_step2")),e(de),e(he),u(O,W)};$(te,O=>{d(_)?O(Z):O(J,!1)})}e(H);var V=a(H,2),ne=t(V);ne.__click=()=>g(v,!1);var D=t(ne,!0);e(ne),e(V),e(M),e(C),L((O,W)=>{f(T,` ${O??""}`),f(D,W)},[()=>r()("home.install.title"),()=>r()("home.install.close")]),u(x,C)};$(I,x=>{d(v)&&x(y)})}u(c,R),ht(),i()}bt(["click"]);var Bs=m('<span class="text-[9px] bg-slate-800 text-slate-400 px-1.5 py-0.5 rounded uppercase tracking-wider">Em Breve</span>'),Gs=m('<div class="w-2 h-2 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]"></div>'),As=m('<button><div class="flex-1"><div class="font-bold text-sm flex items-center gap-2"> <!></div> <div class="text-[10px] opacity-60 mt-0.5"> </div></div> <!></button>'),Us=m('<div class="space-y-4"><div><label class="text-xs text-slate-500 uppercase font-black block mb-2 tracking-widest flex items-center gap-1"><!> Sistema de Jogo</label> <div class="grid grid-cols-1 gap-2"></div></div> <div><label for="char-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nome do Personagem</label> <input id="char-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Alaric, o Errante"/></div> <div><label for="char-player" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> Nome do Jogador</label> <input id="char-player" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-ancestry" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Ancestralidade</label> <input id="char-ancestry" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Humano"/></div> <div><label for="char-level" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">NÃ­vel</label> <input id="char-level" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div> <div><label for="char-path" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Trilha Inicial (Novice)</label> <input id="char-path" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Guerreiro, Mago"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-defense" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Defesa</label> <input id="char-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div> <div><label for="char-health" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Vida MÃ¡xima</label> <input id="char-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div></div> <div class="flex gap-3 mt-8"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-3 rounded-xl text-white font-bold active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95">Criar Personagem</button></div>',1);function Os(c,o){mt(o,!0);let r=Le(o,"isOpen",3,!1),l=Le(o,"initialData",3,"{}"),i=Va({name:"",playerName:"",ancestry:"",novicePath:"",level:1,defense:10,health:24,system:tt});Ht(()=>{if(r()&&l())try{const s=JSON.parse(l());i.name=s.name||"",i.playerName=s.playerName||"",i.ancestry=s.ancestry||"",i.novicePath=s.paths&&s.paths.novice?s.paths.novice:"",i.level=s.level||1,i.defense=s.defense||10,i.health=s.health||s.normalHealth||24,i.system=s.system||tt}catch{i.name="",i.playerName="",i.ancestry="",i.novicePath="",i.level=1,i.defense=10,i.health=24,i.system=tt}});function n(){o.onSave({...i})}Ya(c,{get isOpen(){return r()},get onClose(){return o.onClose},title:"Novo Personagem",maxWidth:"max-w-md",children:(s,v)=>{var _=Us(),h=E(_),S=t(h),U=t(S),j=t(U);oa(j,{size:12}),Re(),e(U);var Y=a(U,2);sa(Y,21,()=>ls,ns,(D,O)=>{var W=As();W.__click=()=>!d(O).disabled&&(i.system=d(O).id);var F=t(W),le=t(F),ce=t(le),he=a(ce);{var de=Q=>{var ye=Bs();u(Q,ye)};$(he,Q=>{d(O).comingSoon&&Q(de)})}e(le);var ae=a(le,2),we=t(ae,!0);e(ae),e(F);var ve=a(F,2);{var ie=Q=>{var ye=Gs();u(Q,ye)};$(ve,Q=>{i.system===d(O).id&&Q(ie)})}e(W),L(()=>{ze(W,1,`relative flex items-center p-3 rounded-lg border text-left transition-all ${i.system===d(O).id?"bg-indigo-600/20 border-indigo-500 text-white":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"} ${d(O).disabled?"opacity-60 cursor-not-allowed":""}`),W.disabled=d(O).disabled,f(ce,`${d(O).name??""} `),f(we,d(O).description)}),u(D,W)}),e(Y),e(S);var b=a(S,2),z=a(t(b),2);ut(z),e(b);var R=a(b,2),w=t(R),G=t(w);Ia(G,{size:12}),Re(),e(w);var I=a(w,2);ut(I),e(R);var y=a(R,2),x=t(y),C=a(t(x),2);ut(C),e(x);var M=a(x,2),N=a(t(M),2);ut(N),e(M),e(y);var re=a(y,2),q=a(t(re),2);ut(q),e(re);var B=a(re,2),T=t(B),H=a(t(T),2);ut(H),e(T);var te=a(T,2),Z=a(t(te),2);ut(Z),e(te),e(B),e(h);var J=a(h,2),V=t(J);V.__click=function(...D){o.onClose?.apply(this,D)};var ne=a(V,2);ne.__click=n,e(J),pt(z,()=>i.name,D=>i.name=D),pt(I,()=>i.playerName,D=>i.playerName=D),pt(C,()=>i.ancestry,D=>i.ancestry=D),pt(N,()=>i.level,D=>i.level=D),pt(q,()=>i.novicePath,D=>i.novicePath=D),pt(H,()=>i.defense,D=>i.defense=D),pt(Z,()=>i.health,D=>i.health=D),u(s,_)},$$slots:{default:!0}}),ht()}bt(["click"]);var Fs=m('<div class="space-y-5"><div><label for="settings-player-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> Nome do Jogador</label> <input id="settings-player-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/> <p class="text-[10px] text-slate-500 mt-1">O nome do jogador associado a este personagem.</p></div></div> <div class="flex flex-col-reverse sm:flex-row gap-3 mt-6"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-4 sm:py-3 rounded-xl text-white font-bold active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-4 sm:py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95">Salvar</button></div>',1);function Ls(c,o){mt(o,!0);let r=Le(o,"isOpen",3,!1),l=Le(o,"characterData",3,null),i=X("");Ht(()=>{r()&&l()&&g(i,l().playerName||"",!0)});function n(){o.onSave({playerName:d(i)})}Ya(c,{get isOpen(){return r()},get onClose(){return o.onClose},title:"âš™ï¸ ConfiguraÃ§Ãµes do Personagem",maxWidth:"max-w-md",children:(s,v)=>{var _=Fs(),h=E(_),S=t(h),U=t(S),j=t(U);Ia(j,{size:12}),Re(),e(U);var Y=a(U,2);ut(Y),Re(2),e(S),e(h);var b=a(h,2),z=t(b);z.__click=function(...w){o.onClose?.apply(this,w)};var R=a(z,2);R.__click=n,e(b),pt(Y,()=>d(i),w=>g(i,w)),u(s,_)},$$slots:{default:!0}}),ht()}bt(["click"]);const at=da("idle"),Ta=da(null),na=da(null),Rs="701898444454-7ml9onnv529k99rkvgh1slhdj4a1arrm.apps.googleusercontent.com",Fa="https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/userinfo.profile",fe=da({signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null,isInited:!1});let ia,La=!1;const Bt="wwv_google_session";function Hs(){localStorage.removeItem(Bt),fe.update(c=>({...c,signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null})),console.log("Session cleared due to expired or invalid token")}async function la(){Hs(),console.warn("OAuth token expired or invalid. Please sign in again.")}async function Ka(c){try{const o=await fetch("https://www.googleapis.com/oauth2/v1/userinfo?alt=json",{headers:{Authorization:`Bearer ${c}`}});if(o.status===401){await la();return}if(o.ok){const r=await o.json();fe.update(l=>({...l,userProfile:{name:r.name,picture:r.picture}})),Xa()}}catch(o){console.error("Failed to fetch user profile:",o)}}function Vs(){try{const c=localStorage.getItem(Bt);if(c){const o=JSON.parse(c);if(o.accessToken)return o.tokenExpiry&&Date.now()>o.tokenExpiry?(console.log("Stored token is expired, clearing session"),localStorage.removeItem(Bt),!1):(fe.set({signedIn:!0,accessToken:o.accessToken,tokenExpiry:o.tokenExpiry||null,userProfile:o.userProfile||null,isInited:!0}),console.log("Restored session from localStorage"),Ka(o.accessToken),!0)}}catch(c){console.error("Failed to load stored session:",c)}return!1}function Xa(){const c=Ee(fe);c.signedIn&&c.accessToken?localStorage.setItem(Bt,JSON.stringify({accessToken:c.accessToken,tokenExpiry:c.tokenExpiry,userProfile:c.userProfile})):localStorage.removeItem(Bt)}async function Ws(){const c=Rs;if(Vs()){try{await Ha(),ia=google.accounts.oauth2.initTokenClient({client_id:c,scope:Fa,callback:Ra}),La=!0}catch(r){console.warn("Could not initialize GIS after restoring session:",r)}return}try{await Ha(),ia=google.accounts.oauth2.initTokenClient({client_id:c,scope:Fa,callback:Ra}),La=!0,fe.update(r=>({...r,isInited:!0})),console.log("Google Auth Initialized")}catch(r){console.error("Failed to initialize Google Auth:",r),na.set("init_failed"),fe.update(l=>({...l,isInited:!0}))}}function Ra(c){if(c.error!==void 0){console.error("Google Auth Error:",c);return}console.log("Google Auth Success",c);const o=c.expires_in||3600,r=Date.now()+o*1e3;fe.update(l=>({...l,signedIn:!0,accessToken:c.access_token,tokenExpiry:r})),Xa(),Ka(c.access_token)}function Ha(){return new Promise((c,o)=>{if(typeof google<"u"&&google.accounts){c();return}const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0,r.onload=()=>{const l=setInterval(()=>{typeof google<"u"&&google.accounts&&(clearInterval(l),c())},50);setTimeout(()=>{clearInterval(l),(typeof google>"u"||!google.accounts)&&o(new Error("Google object not available after script load"))},3e3)},r.onerror=()=>{o(new Error("Failed to load Google Identity Services script"))},document.head.appendChild(r)})}function Za(){ia?(na.set(null),ia.requestAccessToken()):(console.error("Google Auth not initialized"),na.set("not_initialized"),at.set("error"))}function Ys(){const c=Ee(fe).accessToken;localStorage.removeItem(Bt),fe.update(o=>({...o,signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null})),c&&typeof google<"u"&&google.accounts&&google.accounts.oauth2.revoke(c,()=>{console.log("Access token revoked")})}async function Qa(){const c=Ee(fe),o=c.accessToken;if(!o)throw new Error("Not signed in");if(c.tokenExpiry&&Date.now()>c.tokenExpiry)throw await la(),new Error("Token expired, please sign in again");const l=`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent("name = 'weird-wizard-backup.json' and 'appDataFolder' in parents and trashed = false")}&spaces=appDataFolder&fields=files(id, name, modifiedTime, size)`,i=await fetch(l,{headers:{Authorization:`Bearer ${o}`}});if(i.status===401)throw await la(),new Error("Token expired, please sign in again");if(!i.ok)throw new Error("Failed to list backups: "+i.statusText);return(await i.json()).files||[]}async function qs(c){const o=Ee(fe).accessToken;if(!o)throw new Error("Not signed in");const r=JSON.stringify(c),l="weird-wizard-backup.json",i=await Qa(),n=i.length>0?i[0].id:null;if(n){const s=`https://www.googleapis.com/upload/drive/v3/files/${n}?uploadType=media`,v=await fetch(s,{method:"PATCH",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:r});if(!v.ok){const _=await v.text();throw console.error("Upload error details:",_),new Error("Upload failed: "+v.statusText)}return await v.json()}else{const s={name:l,mimeType:"application/json",parents:["appDataFolder"]},v=new FormData;v.append("metadata",new Blob([JSON.stringify(s)],{type:"application/json"})),v.append("file",new Blob([r],{type:"application/json"}));const h=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${o}`},body:v});if(!h.ok){const S=await h.text();throw console.error("Upload error details:",S),new Error("Upload failed: "+h.statusText)}return await h.json()}}async function Js(c){const o=Ee(fe).accessToken;if(!o)throw new Error("Not signed in");const r=`https://www.googleapis.com/drive/v3/files/${c}?alt=media`,l=await fetch(r,{headers:{Authorization:`Bearer ${o}`}});if(l.status===401)throw await la(),new Error("Token expired, please sign in again");if(!l.ok)throw new Error("Download failed: "+l.statusText);return await l.json()}let _a;async function Ea(){if(Ee(fe).accessToken)try{console.log("Syncing from cloud..."),at.set("syncing");const o=await Qa();if(o.length===0){console.log("No backups found in cloud."),at.set("success");return}const r=o[0].id,l=await Js(r),i=new Set;if(gt.forEach((n,s)=>{i.add(String(s)),console.log("[DEBUG] Local deleted ID entry:",{key:s,type:typeof s,val:n})}),console.log("[DEBUG] Total locally deleted IDs:",i.size),l.deletedIds&&Array.isArray(l.deletedIds)){console.log("[DEBUG] Cloud data deletedIds count:",l.deletedIds.length);for(const n of l.deletedIds){const s=String(n.id);gt.has(s)||(gt.set(s,n),console.log("[DEBUG] New deletion synced from cloud:",s)),i.add(s),n.type==="character"&&xe.has(s)&&(xe.delete(s),console.log("[DEBUG] Removed char locally based on cloud deletion:",s)),n.type==="campaign"&&_e.has(s)&&(_e.delete(s),console.log("[DEBUG] Removed camp locally based on cloud deletion:",s)),n.type==="enemy"&&Qt.has(s)&&(Qt.delete(s),console.log("[DEBUG] Removed enemy locally based on cloud deletion:",s)),n.type==="encounter"&&ea.has(s)&&(ea.delete(s),console.log("[DEBUG] Removed encounter locally based on cloud deletion:",s))}}if(l.characters&&Array.isArray(l.characters)){console.log("[DEBUG] Syncing",l.characters.length,"characters from cloud");for(const n of l.characters){const s=String(n.id);if(i.has(s)||gt.has(s)){console.log("[DEBUG] Skipping character because it is marked as deleted:",{id:s,name:n.name}),xe.has(s)&&(console.log("[DEBUG] Character found locally but marked deleted. Removing now:",s),xe.delete(s));for(const _ of xe.keys()){const h=xe.get(_);h&&h.id===s&&(console.log("[DEBUG] Mismatched key entry found for deleted char. Removing:",_),xe.delete(_))}continue}const v=xe.get(s);console.log("[DEBUG] Syncing character from cloud:",{id:s,name:n.name,status:v?"OVERWRITING":"ADDING"}),xe.set(s,n)}}if(l.campaigns&&Array.isArray(l.campaigns)){console.log("[DEBUG] Syncing",l.campaigns.length,"campaigns from cloud");for(const n of l.campaigns){const s=String(n.id);if(i.has(s)||gt.has(s)){console.log("[DEBUG] Skipping campaign because it is marked as deleted:",{id:s,name:n.name}),_e.has(s)&&(console.log("[DEBUG] Campaign found locally but marked deleted. Removing now:",s),_e.delete(s));for(const v of _e.keys()){const _=_e.get(v);_&&_.id===s&&(console.log("[DEBUG] Mismatched key entry found for deleted camp. Removing:",v),_e.delete(v))}continue}console.log("[DEBUG] Syncing campaign from cloud:",{id:s,name:n.name,status:_e.has(s)?"OVERWRITING":"ADDING"}),_e.set(s,n)}}if(l.enemies&&Array.isArray(l.enemies))for(const n of l.enemies){const s=String(n.id);!i.has(s)&&!Qt.has(s)&&Qt.set(s,n)}if(l.encounters&&Array.isArray(l.encounters))for(const n of l.encounters){const s=String(n.id);!i.has(s)&&!ea.has(s)&&ea.set(s,n)}if(l.images&&typeof l.images=="object"){console.log("[DEBUG] Syncing",Object.keys(l.images).length,"images from cloud");for(const[n,s]of Object.entries(l.images))Sa.has(n)||(Sa.set(n,s),console.log("[DEBUG] New image synced from cloud:",n))}l.appSettings&&(console.log("[DEBUG] Syncing app settings from cloud"),ra.set(l.appSettings)),console.log("[DEBUG] Sync from cloud complete."),at.set("success"),Ta.set(Date.now())}catch(o){console.error("Failed to sync from cloud:",o),at.set("error")}}async function wa(){Ee(fe).accessToken&&(_a&&clearTimeout(_a),_a=setTimeout(async()=>{try{console.log("Syncing to cloud..."),at.set("syncing");const o=[],r=new Set;gt.forEach((h,S)=>{o.push({id:S,...h}),r.add(String(S))});const l=Ee(Ja).filter(h=>!r.has(String(h.id))),i=Ee($a).filter(h=>!r.has(String(h.id))),n=Ee(ds).filter(h=>!r.has(String(h.id))),s=Ee(cs).filter(h=>!r.has(String(h.id))),v={};Sa.forEach((h,S)=>{v[S]=h});const _={characters:l,campaigns:i,enemies:n,encounters:s,images:v,deletedIds:o,appSettings:Ee(ra),timestamp:Date.now(),version:1,appName:"WeirdWizardVault"};console.log("[DEBUG] Uploading to cloud:",{charactersCount:_.characters.length,campaignsCount:_.campaigns.length,enemiesCount:n.length,imagesCount:Object.keys(v).length,deletedIdsCount:o.length}),await qs(_),console.log("Sync to cloud complete."),at.set("success"),Ta.set(Date.now())}catch(o){console.error("Failed to sync to cloud:",o),at.set("error")}},2e3))}var Ks=m('<img alt="Avatar" class="w-10 h-10 rounded-full border-2 border-indigo-500/50 shadow-lg object-cover"/>'),Xs=m('<div class="w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white border-2 border-indigo-400/30 shadow-lg"><span class="font-bold text-lg"><!></span></div>'),Zs=m('<div class="absolute right-0 top-full mt-2 w-48 bg-slate-800 rounded-xl shadow-xl border border-slate-700 p-2 z-50 animate-in fade-in slide-in-from-top-2"><div class="px-3 py-2 border-b border-slate-700 mb-2"><p class="text-xs text-slate-400"> </p> <p class="text-sm font-bold text-white truncate"> </p></div> <button class="w-full flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors text-sm"><!> </button></div>  <div class="fixed inset-0 z-40"></div>',1),Qs=m('<div class="relative"><button><!> <div class="absolute bottom-1 right-1 w-3 h-3 bg-emerald-500 rounded-full border-2 border-slate-900"></div></button> <!></div>'),eo=m('<div class="w-4 h-4 rounded-full border-2 border-slate-300 border-t-slate-600 animate-spin"></div>'),to=os('<svg class="w-4 h-4" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg>'),ao=m("<button><!> <span> </span></button>");function so(c,o){mt(o,!0);const r=()=>me(fe,"$googleSession",i),l=()=>me(Vt,"$t",i),[i,n]=Wt();let s=Le(o,"className",3,""),v=X(!1);var _=oe(),h=E(_);{var S=j=>{var Y=Qs(),b=t(Y);b.__click=()=>g(v,!d(v));var z=t(b);{var R=y=>{var x=Ks();L(()=>Fe(x,"src",r().userProfile.picture)),u(y,x)},w=y=>{var x=Xs(),C=t(x),M=t(C);{var N=q=>{var B=rs();L(T=>f(B,T),[()=>r().userProfile.name[0].toUpperCase()]),u(q,B)},re=q=>{Ia(q,{size:20})};$(M,q=>{r().userProfile?.name?q(N):q(re,!1)})}e(C),e(x),u(y,x)};$(z,y=>{r().userProfile?.picture?y(R):y(w,!1)})}Re(2),e(b);var G=a(b,2);{var I=y=>{var x=Zs(),C=E(x),M=t(C),N=t(M),re=t(N,!0);e(N);var q=a(N,2),B=t(q,!0);e(q),e(M);var T=a(M,2);T.__click=()=>{Ys(),g(v,!1)};var H=t(T);hs(H,{size:14});var te=a(H);e(T),e(C);var Z=a(C,2);Z.__click=()=>g(v,!1),L((J,V,ne)=>{f(re,J),f(B,V),f(te,` ${ne??""}`)},[()=>l()("common.auth.signed_in_as"),()=>r().userProfile?.name??l()("common.auth.user"),()=>l()("common.auth.logout")]),u(y,x)};$(G,y=>{d(v)&&y(I)})}e(Y),L(y=>{ze(b,1,`flex items-center gap-2 p-1 rounded-full hover:bg-slate-800 transition-colors border border-transparent hover:border-slate-700 ${s()??""}`),Fe(b,"title",y)},[()=>r().userProfile?.name||l()("common.auth.user")]),u(j,Y)},U=j=>{var Y=ao();Y.__click=function(...I){Za?.apply(this,I)};var b=t(Y);{var z=I=>{var y=eo();u(I,y)},R=I=>{var y=to();u(I,y)};$(b,I=>{r().isInited?I(R,!1):I(z)})}var w=a(b,2),G=t(w,!0);e(w),e(Y),L(I=>{Y.disabled=!r().isInited,ze(Y,1,`flex items-center gap-2 px-4 py-2 bg-white text-slate-900 hover:bg-slate-100 rounded-full font-bold text-xs transition-all shadow-lg hover:shadow-xl hover:scale-105 disabled:opacity-50 disabled:cursor-wait disabled:scale-100 disabled:shadow-none ${s()??""}`),f(G,I)},[()=>l()("common.auth.login")]),u(j,Y)};$(h,j=>{r().signedIn?j(S):j(U,!1)})}u(c,_),ht(),n()}bt(["click"]);var oo=m('<span class="w-2 h-2 rounded-full bg-amber-500"></span> <span class="text-amber-400">Auth: Init Failed</span>',1),ro=m('<span class="w-2 h-2 rounded-full bg-amber-500"></span> <span class="text-amber-400">Auth: Not Ready</span>',1),no=m('<span class="w-2 h-2 rounded-full bg-slate-600"></span> <span> </span>',1),io=m('<span class="w-2 h-2 rounded-full bg-indigo-500 animate-pulse"></span> <span> </span>',1),lo=m('<span class="w-2 h-2 rounded-full bg-emerald-500"></span> <span> </span>',1),co=m('<span class="w-2 h-2 rounded-full bg-red-500"></span> <span> </span>',1),vo=m('<span class="w-2 h-2 rounded-full bg-slate-500"></span> <span> </span>',1),uo=m('<div class="mt-1.5 pt-1.5 border-t border-slate-800 text-[9px] text-slate-400 opacity-80 font-medium flex justify-between items-center gap-4"><span> </span> <span> </span></div>'),po=m('<div class="mt-1 text-[9px] text-slate-400 opacity-60 italic"> </div>'),go=m('<div class="absolute top-full right-0 mt-3 whitespace-nowrap bg-slate-900/95 backdrop-blur-md text-white text-[10px] font-bold py-2 px-3 rounded-lg shadow-2xl border border-slate-700/50 z-[100] pointer-events-none min-w-[120px]"><div class="flex items-center gap-2"><!></div> <!></div>'),fo=m('<div class="relative flex items-center"><button class="flex items-center justify-center p-2 rounded-xl hover:bg-slate-800/50 transition-all active:scale-95 group focus:outline-none"><!></button> <!></div>');function mo(c,o){mt(o,!0);const r=()=>me(fe,"$googleSession",v),l=()=>me(Vt,"$t",v),i=()=>me(na,"$authError",v),n=()=>me(at,"$syncStatus",v),s=()=>me(Ta,"$lastSyncTime",v),[v,_]=Wt();let h=X(!1);function S(G){return new Date(G).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}var U=fo(),j=t(U);j.__click=()=>r().signedIn?Ea():Za();var Y=t(j);{var b=G=>{Es(G,{size:20,class:"text-amber-500"})},z=G=>{var I=oe(),y=E(I);{var x=M=>{ws(M,{size:20,class:"text-slate-600 group-hover:text-slate-400"})},C=M=>{var N=oe(),re=E(N);{var q=T=>{Cs(T,{size:20,class:"animate-spin text-indigo-400"})},B=T=>{var H=oe(),te=E(H);{var Z=V=>{fs(V,{size:20,class:"text-emerald-400 group-hover:text-emerald-300"})},J=V=>{var ne=oe(),D=E(ne);{var O=F=>{_s(F,{size:20,class:"text-red-400"})},W=F=>{ys(F,{size:20,class:"text-slate-400 group-hover:text-slate-300"})};$(D,F=>{n()==="error"?F(O):F(W,!1)},!0)}u(V,ne)};$(te,V=>{n()==="success"?V(Z):V(J,!1)},!0)}u(T,H)};$(re,T=>{n()==="syncing"?T(q):T(B,!1)},!0)}u(M,N)};$(y,M=>{r().signedIn?M(C,!1):M(x)},!0)}u(G,I)};$(Y,G=>{i()?G(b):G(z,!1)})}e(j);var R=a(j,2);{var w=G=>{var I=go(),y=t(I),x=t(y);{var C=B=>{var T=oo();Re(2),u(B,T)},M=B=>{var T=oe(),H=E(T);{var te=J=>{var V=ro();Re(2),u(J,V)},Z=J=>{var V=oe(),ne=E(V);{var D=W=>{var F=no(),le=a(E(F),2),ce=t(le,!0);e(le),L(he=>f(ce,he),[()=>l()("common.status.offline")]),u(W,F)},O=W=>{var F=oe(),le=E(F);{var ce=de=>{var ae=io(),we=a(E(ae),2),ve=t(we,!0);e(we),L(ie=>f(ve,ie),[()=>l()("common.status.syncing")]),u(de,ae)},he=de=>{var ae=oe(),we=E(ae);{var ve=Q=>{var ye=lo(),Ne=a(E(ye),2),$e=t(Ne,!0);e(Ne),L(qe=>f($e,qe),[()=>l()("common.status.saved")]),u(Q,ye)},ie=Q=>{var ye=oe(),Ne=E(ye);{var $e=De=>{var Ie=co(),Pe=a(E(Ie),2),st=t(Pe,!0);e(Pe),L(Je=>f(st,Je),[()=>l()("common.status.error")]),u(De,Ie)},qe=De=>{var Ie=vo(),Pe=a(E(Ie),2),st=t(Pe,!0);e(Pe),L(Je=>f(st,Je),[()=>l()("common.status.synced")]),u(De,Ie)};$(Ne,De=>{n()==="error"?De($e):De(qe,!1)},!0)}u(Q,ye)};$(we,Q=>{n()==="success"?Q(ve):Q(ie,!1)},!0)}u(de,ae)};$(le,de=>{n()==="syncing"?de(ce):de(he,!1)},!0)}u(W,F)};$(ne,W=>{r().signedIn?W(O,!1):W(D)},!0)}u(J,V)};$(H,J=>{i()==="not_initialized"?J(te):J(Z,!1)},!0)}u(B,T)};$(x,B=>{i()==="init_failed"?B(C):B(M,!1)})}e(y);var N=a(y,2);{var re=B=>{var T=uo(),H=t(T),te=t(H,!0);e(H);var Z=a(H,2),J=t(Z,!0);e(Z),e(T),L((V,ne)=>{f(te,V),f(J,ne)},[()=>l()("common.status.last_sync"),()=>S(s())]),u(B,T)},q=B=>{var T=oe(),H=E(T);{var te=Z=>{var J=po(),V=t(J,!0);e(J),L(ne=>f(V,ne),[()=>l()("common.auth.login")]),u(Z,J)};$(H,Z=>{r().signedIn||Z(te)},!0)}u(B,T)};$(N,B=>{r().signedIn&&s()?B(re):B(q,!1)})}e(I),ft(3,I,()=>qa,()=>({duration:150})),u(G,I)};$(R,G=>{d(h)&&G(w)})}e(U),L(G=>Fe(j,"aria-label",G),[()=>l()("common.status.label")]),St("mouseenter",j,()=>g(h,!0)),St("mouseleave",j,()=>g(h,!1)),St("focus",j,()=>g(h,!0)),St("blur",j,()=>g(h,!1)),u(c,U),ht(),_()}bt(["click"]);var ho=m('<span class="text-[10px] text-slate-500 font-medium leading-tight mt-0.5"> </span>'),bo=m('<div class="flex flex-col"><span> </span> <!></div>'),xo=m('<div class="absolute inset-0 flex items-center justify-center"><div class="w-1.5 h-1.5 rounded-full bg-indigo-600"></div></div>'),_o=m("<div><!> <div><div><!></div></div></div>");function wo(c,o){mt(o,!0);let r=Le(o,"checked",3,!1),l=Le(o,"label",3,""),i=Le(o,"description",3,""),n=Le(o,"disabled",3,!1);function s(){n()||o.onToggle(!r())}var v=_o();v.__click=s;var _=t(v);{var h=b=>{var z=bo(),R=t(z),w=t(R,!0);e(R);var G=a(R,2);{var I=y=>{var x=ho(),C=t(x,!0);e(x),L(()=>f(C,i())),u(y,x)};$(G,y=>{i()&&y(I)})}e(z),L(()=>{ze(R,1,`text-sm font-black uppercase tracking-widest transition-colors ${r()?"text-indigo-400":"text-slate-300 group-hover:text-white"}`),f(w,l())}),u(b,z)};$(_,b=>{(l()||i())&&b(h)})}var S=a(_,2),U=t(S),j=t(U);{var Y=b=>{var z=xo();u(b,z)};$(j,b=>{r()&&b(Y)})}e(U),e(S),e(v),L(()=>{ze(v,1,`flex items-center justify-between gap-4 p-1 group ${n()?"opacity-50 grayscale":"cursor-pointer"}`),ze(S,1,`relative w-12 h-6 rounded-full transition-all duration-300 ease-in-out ${r()?"bg-indigo-600 shadow-[0_0_15px_rgba(79,70,229,0.4)]":"bg-slate-800 border border-white/5"}`),ze(U,1,`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-all duration-300 ease-[cubic-bezier(0.34,1.56,0.64,1)] shadow-md ${r()?"translate-x-6":"translate-x-0"}`)}),u(c,v),ht()}bt(["click"]);var yo=m('<button class="p-2 -ml-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all active:scale-95"><!></button>'),ko=m('<div class="p-2 bg-indigo-500/10 rounded-xl border border-indigo-500/20"><!></div>'),$o=m('<button class="p-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all active:scale-95"><!></button>'),So=m('<div class="p-4 bg-white/[0.02] border-t border-white/5"><button class="w-full bg-slate-800 hover:bg-slate-700 text-white font-black uppercase tracking-widest py-3 rounded-2xl transition-all active:scale-[0.98] text-sm"> </button></div>'),Co=m('<div class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center md:p-4"><div class="bg-slate-900 border-white/10 w-full md:max-w-md md:rounded-3xl shadow-2xl overflow-hidden flex flex-col h-full md:h-auto md:max-h-[90vh]"><div class="px-6 py-6 border-b border-white/5 flex items-center justify-between bg-white/[0.02]"><div class="flex items-center gap-3"><!> <div><h2 class="text-lg font-black text-white uppercase tracking-tight"> </h2> <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </p></div></div> <!></div> <div class="flex-1 p-6 space-y-8 overflow-y-auto custom-scrollbar pb-32 md:pb-6 svelte-14b6qd9"><div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-indigo-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="space-y-6"><!></div></div> <div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-amber-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="grid grid-cols-1 gap-2"><button><div class="flex items-center gap-3"><span class="text-xl">ðŸ‡§ðŸ‡·</span> <span class="font-bold">PortuguÃªs (Brasil)</span></div> <!></button> <button><div class="flex items-center gap-3"><span class="text-xl">ðŸ‡ºðŸ‡¸</span> <span class="font-bold">English (US)</span></div> <!></button></div></div> <div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-emerald-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="bg-white/5 rounded-2xl p-4 border border-white/5"><div class="flex justify-between items-center opacity-50 cursor-not-allowed"><div class="flex flex-col"><span class="text-sm font-black uppercase tracking-widest text-slate-400"> </span> <span class="text-[10px] text-slate-500"> </span></div> <div class="w-12 h-6 bg-slate-800 rounded-full border border-white/5 p-1 relative"><div class="w-4 h-4 bg-slate-600 rounded-full"></div></div></div></div></div> <div class="pt-4 border-t border-white/5 flex flex-col items-center gap-4 text-center"><p class="text-[10px] text-slate-500 leading-relaxed max-w-[250px]"> </p></div></div> <!></div></div>');function Eo(c,o){mt(o,!0);const r=()=>me(Vt,"$t",n),l=()=>me(ra,"$appSettings",n),i=()=>me(ya,"$locale",n),[n,s]=Wt();let v=Le(o,"isOpen",3,!1),_=X(!1);za(()=>{const b=()=>g(_,window.innerWidth<768);return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)});function h(b,z){ra.update(R=>({...R,[b]:z}))}function S(b){ya.set(b),localStorage.setItem("user_locale",b)}var U=oe(),j=E(U);{var Y=b=>{var z=Co();z.__click=function(...P){o.onClose?.apply(this,P)};var R=t(z);R.__click=P=>P.stopPropagation();var w=t(R),G=t(w),I=t(G);{var y=P=>{var ee=yo();ee.__click=function(...Be){o.onClose?.apply(this,Be)};var ue=t(ee);bs(ue,{size:24}),e(ee),u(P,ee)},x=P=>{var ee=ko(),ue=t(ee);ka(ue,{size:20,class:"text-indigo-400"}),e(ee),u(P,ee)};$(I,P=>{d(_)?P(y):P(x,!1)})}var C=a(I,2),M=t(C),N=t(M,!0);e(M);var re=a(M,2),q=t(re,!0);e(re),e(C),e(G);var B=a(G,2);{var T=P=>{var ee=$o();ee.__click=function(...Be){o.onClose?.apply(this,Be)};var ue=t(ee);Wa(ue,{size:24}),e(ee),u(P,ee)};$(B,P=>{d(_)||P(T)})}e(w);var H=a(w,2),te=t(H),Z=t(te),J=t(Z);$s(J,{size:16});var V=a(J,2),ne=t(V,!0);e(V),e(Z);var D=a(Z,2),O=t(D);{let P=Pt(()=>r()("settings.options.auto_open_history.label")),ee=Pt(()=>r()("settings.options.auto_open_history.description"));wo(O,{get checked(){return l().autoOpenHistory},onToggle:ue=>h("autoOpenHistory",ue),get label(){return d(P)},get description(){return d(ee)}})}e(D),e(te);var W=a(te,2),F=t(W),le=t(F);Ca(le,{size:16});var ce=a(le,2),he=t(ce,!0);e(ce),e(F);var de=a(F,2),ae=t(de);ae.__click=()=>S("pt");var we=a(t(ae),2);{var ve=P=>{Ga(P,{size:18,class:"text-indigo-400"})};$(we,P=>{i()==="pt"&&P(ve)})}e(ae);var ie=a(ae,2);ie.__click=()=>S("en");var Q=a(t(ie),2);{var ye=P=>{Ga(P,{size:18,class:"text-indigo-400"})};$(Q,P=>{i()==="en"&&P(ye)})}e(ie),e(de),e(W);var Ne=a(W,2),$e=t(Ne),qe=t($e);Ss(qe,{size:16});var De=a(qe,2),Ie=t(De,!0);e(De),e($e);var Pe=a($e,2),st=t(Pe),Je=t(st),Ct=t(Je),xt=t(Ct,!0);e(Ct);var Yt=a(Ct,2),ca=t(Yt,!0);e(Yt),e(Je),Re(2),e(st),e(Pe),e(Ne);var Et=a(Ne,2),Gt=t(Et),qt=t(Gt,!0);e(Gt),e(Et),e(H);var _t=a(H,2);{var Jt=P=>{var ee=So(),ue=t(ee);ue.__click=function(...ot){o.onClose?.apply(this,ot)};var Be=t(ue,!0);e(ue),e(ee),L(ot=>f(Be,ot),[()=>r()("common.buttons.close")]),u(P,ee)};$(_t,P=>{d(_)||P(Jt)})}e(R),e(z),L((P,ee,ue,Be,ot,va,At,ua)=>{f(N,P),f(q,ee),f(ne,ue),f(he,Be),ze(ae,1,`flex items-center justify-between px-4 py-3 rounded-2xl border transition-all ${i()==="pt"?"bg-indigo-600/10 border-indigo-500/50 text-white":"bg-white/5 border-white/5 text-slate-400 hover:bg-white/10"}`),ze(ie,1,`flex items-center justify-between px-4 py-3 rounded-2xl border transition-all ${i()==="en"?"bg-indigo-600/10 border-indigo-500/50 text-white":"bg-white/5 border-white/5 text-slate-400 hover:bg-white/10"}`),f(Ie,ot),f(xt,va),f(ca,At),f(qt,ua)},[()=>r()("settings.title"),()=>r()("settings.description"),()=>r()("settings.sections.interface"),()=>r()("common.labels.language")||"Language",()=>r()("settings.sections.appearance"),()=>r()("settings.options.theme.label"),()=>r()("settings.options.theme.description"),()=>r()("settings.sync_info")]),ft(1,R,()=>Mt,()=>d(_)?{x:"100%",duration:600,easing:jt}:{y:20,duration:300}),ft(2,R,()=>Mt,()=>d(_)?{x:"100%",duration:600,easing:jt}:{y:20,duration:300}),ft(3,z,()=>qa,()=>({duration:200})),u(b,z)};$(j,b=>{v()&&b(Y)})}u(c,U),ht(),s()}bt(["click"]);var zo=m('<span class="text-[10px] text-slate-400 font-medium"> </span>'),Io=m('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all relative group flex flex-col shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="flex justify-between items-start mb-4"><div class="flex-1"><h3 class="font-black text-xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate pr-16"> </h3> <div class="flex items-center gap-2 mt-1 flex-wrap"><span class="text-[10px] bg-indigo-500/10 text-indigo-400 font-black px-2 py-0.5 rounded uppercase tracking-wider"> </span> <span class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </span> <!></div> <div class="mt-2 flex items-center gap-2"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800 text-[9px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div></div></div> <div class="flex items-center gap-1"><button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button></div></div> <div class="space-y-3 mb-6"><div class="flex items-center justify-between text-xs text-slate-400"><span class="flex items-center gap-1.5 opacity-60"><!> </span> <span class="font-bold text-slate-300 truncate max-w-[150px]"> </span></div></div> <button class="w-full bg-slate-800 hover:bg-indigo-600 text-white py-3 rounded-2xl font-bold transition-all active:scale-[0.98] border border-slate-700 hover:border-indigo-400/30 flex items-center justify-center gap-2"> <!></button></div>'),To=m('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 col-start-1 row-start-1 w-full"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold"> </span></button></div>'),No=m('<span class="text-[9px] bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded-full border border-emerald-500/20 font-black uppercase tracking-widest flex items-center gap-1"><!> </span>'),Do=m('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="mb-4"><div class="flex justify-between items-start mb-1"><h3 class="font-black text-2xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight"> </h3> <div class="flex items-center gap-1"><!> <button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button></div></div> <p class="text-indigo-400 text-[10px] font-black uppercase tracking-[0.2em] mb-3"> </p> <div class="mb-3"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800 text-[9px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div></div> <p class="text-sm text-slate-400 line-clamp-2 leading-relaxed h-10"> </p></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-2xl font-bold flex items-center justify-center gap-2 border border-indigo-400/20 shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98]"><!> </button></div>'),Po=m('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-emerald-500/40 transition-all group relative flex flex-col justify-between shadow-xl border-t-white/5"><div><h3 class="font-black text-2xl text-white group-hover:text-emerald-400 mb-2 uppercase tracking-tight"> </h3> <div class="flex items-center gap-2 mb-4"><div class="px-2 py-0.5 bg-slate-800 rounded text-[9px] text-slate-400 font-black uppercase tracking-widest"> </div> <div class="flex items-center gap-1 px-2 py-0.5 bg-emerald-500/10 rounded text-[9px] text-emerald-400 font-black uppercase tracking-wider"><div class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></div> </div></div> <div class="mb-4"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800/50 text-[9px] text-slate-400 border border-slate-700/50 font-bold uppercase tracking-wider"><!> </div></div> <p class="text-sm text-slate-400 line-clamp-3 leading-relaxed mb-6 h-15"> </p></div> <button class="w-full bg-emerald-600 hover:bg-emerald-500 text-white py-3 rounded-2xl font-black uppercase text-xs tracking-[0.1em] flex items-center justify-center gap-2 border border-emerald-400/20 transition-all active:scale-[0.98] group"> <!></button></div>'),jo=m('<div class="col-span-full py-12 flex flex-col items-center text-center opacity-40"><div class="w-16 h-16 bg-slate-800/50 rounded-full flex items-center justify-center text-slate-600 mb-3 border border-slate-700 border-dashed"><!></div> <h3 class="text-lg font-black uppercase tracking-widest text-slate-500"> </h3> <p class="text-slate-600 max-w-sm mt-2 text-sm"> </p></div>'),Mo=m('<div class="space-y-8 col-start-1 row-start-1 w-full"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold"> </span></button></div> <div><div class="flex items-center gap-3 mb-4"><div class="h-px flex-1 bg-slate-800"></div> <h3 class="text-xs font-black uppercase tracking-widest text-emerald-400 flex items-center gap-2"><!> </h3> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><!> <!></div></div></div>'),Bo=m('<div class="fixed top-0 left-0 w-full flex justify-center items-center pointer-events-none z-[100] transition-all duration-300"><div class="bg-indigo-600 rounded-full p-2.5 shadow-xl border border-indigo-500/50 text-white"><!></div></div> <div class="animate-in fade-in px-4 md:px-8 max-w-7xl mx-auto pb-32 md:pb-20"><header class="mb-8 flex justify-between items-center border-b border-slate-800/50 pt-4 md:pt-8 pb-4 sticky top-0 bg-slate-950/80 backdrop-blur-md z-40 -mx-4 px-4 md:-mx-8 md:px-8 transition-all"><div class="flex items-center gap-3"><img alt="Schwalb Vault Logo" class="h-10 md:h-14 w-auto rounded-xl"/> <h1 class="text-xl md:text-3xl font-bold text-white flex items-center gap-2 text-gradient m-0 leading-none"><span class="hidden md:inline">Schwalb Vault</span> <span class="md:hidden">Schwalb Vault</span></h1></div> <div class="hidden md:flex absolute left-1/2 -translate-x-1/2 bg-slate-900/50 p-1.5 rounded-2xl border border-slate-800 glass shadow-xl backdrop-blur-md"><div class="relative flex"><div class="absolute inset-y-0 w-1/2 bg-indigo-600 rounded-xl transition-transform duration-300 ease-out shadow-lg shadow-indigo-500/20"></div> <button><!> </button> <button><!> </button></div></div> <div class="flex items-center justify-end min-w-[40px] gap-3"><!> <button class="p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-all"><!></button> <!></div></header> <div class="md:hidden fixed bottom-0 left-0 right-0 bg-slate-900/90 backdrop-blur-xl border-t border-slate-800 shadow-2xl rounded-t-2xl z-50 p-2 pb-safe"><div class="relative flex justify-between"><div class="absolute inset-y-0 w-1/2 bg-indigo-600/20 rounded-xl transition-transform duration-300 ease-out"></div> <button><!> <span class="transition-all duration-300"> </span></button> <button><!> <span class="transition-all duration-300"> </span></button></div></div> <div class="min-h-[500px] grid items-start relative"><!></div> <!> <!> <!> <!> <!></div>',1);function Go(c,o){mt(o,!0);const r=()=>me(fe,"$googleSession",v),l=()=>me(Ja,"$liveCharacters",v),i=()=>me($a,"$liveCampaigns",v),n=()=>me(Vt,"$t",v),s=()=>me(us,"$publicCampaigns",v),[v,_]=Wt();let h=X(0),S=X(0),U=X(!1),j=X(!1);const Y=80;function b(p){window.scrollY===0&&(g(h,p.touches[0].clientY,!0),g(U,!0))}function z(p){if(!d(U))return;const K=p.touches[0].clientY-d(h);K>0&&window.scrollY<=0?g(S,Math.min(K*.4,120),!0):(g(U,!1),g(S,0))}async function R(){if(d(U))if(g(U,!1),d(S)>Y){g(j,!0),g(S,60);try{navigator&&navigator.vibrate&&navigator.vibrate(50),await Ea()}finally{setTimeout(()=>{g(j,!1),g(S,0)},1e3)}}else g(S,0)}za(()=>{Ws();const p=localStorage.getItem("user_locale");return p&&ya.set(p),document.addEventListener("touchmove",z,{passive:!1}),()=>{document.removeEventListener("touchmove",z)}});let w=X("characters"),G=X("characters"),I=X(!1);Ht(()=>{d(w)!==d(G)&&g(G,d(w),!0)}),Ht(()=>{r().signedIn&&Ea()}),Ht(()=>{r().signedIn&&(l(),i(),wa())});let y=X(!1),x=X(null);function C(p){g(x,p,!0),g(y,!0)}function M(p){if(!d(x))return;const A=d(x).id,k={...xe.get(A),...p};xe.set(A,k),g(y,!1)}let N=X(!1),re=X("{}");const q={name:"",playerName:"",ancestry:"Humano",novicePath:"",level:0,defense:8,health:5,system:tt};function B(){g(re,JSON.stringify(q),!0),g(N,!0)}async function T(p){const A=Ba(),K={id:A,name:p.name,playerName:p.playerName||"",ancestry:p.ancestry,level:p.level,defense:p.defense,system:p.system||tt,paths:{novice:p.novicePath||"-",expert:"-",master:"-"},attributes:[{name:"ForÃ§a",value:10,key:"str"},{name:"Agilidade",value:10,key:"agi"},{name:"Intelecto",value:10,key:"int"},{name:"Vontade",value:10,key:"wil"}],speed:5,health:p.health,currentHealth:p.health,spells:[],talents:[],equipment:[],afflictions:[],effects:[],currency:{gp:0,sp:0,cp:0},languages:["Comum"]};xe.set(A,K),g(N,!1),ta(aa("/characters/[id]",{id:A}))}let H=X(!1),te=X(null),Z=X("{}");const J={name:"",description:"",gmName:"",system:tt};function V(p=null){g(te,p?p.id:null,!0),g(Z,JSON.stringify(p||J),!0),g(H,!0)}async function ne(p){const A=d(te)||Ba(),K=d(te)?_e.get(A):{},k={...K,id:A,name:p.name,description:p.description,gmName:p.gmName,players:K.players||[],backupEnabled:p.backupEnabled||!1,backupHash:p.backupHash||"",system:p.system||tt};p.removePassword?delete k.passwordHash:p.password&&(k.passwordHash=await xs(p.password)),_e.set(A,k),g(H,!1)}let D=X(!1),O=X(Va({title:"",message:"",onConfirm:()=>{}}));function W(p){g(O,{title:n()("dashboard.campaigns.delete_title"),message:n()("dashboard.campaigns.delete_message"),onConfirm:()=>{console.log("[DEBUG] Deleting campaign with ID:",p);let A=0;for(const K of _e.keys()){const k=_e.get(K);(K===p||k&&k.id===p)&&(console.log("[DEBUG] Found match for deletion - Key:",K,"Camp ID:",k?.id),_e.delete(K),A++)}console.log("[DEBUG] Total entries deleted from map:",A),gt.set(p,{type:"campaign",deletedAt:Date.now()}),console.log("[DEBUG] Deletion tracked in deletedIdsMap"),wa(),g(D,!1)}},!0),g(D,!0)}function F(p){g(O,{title:n()("dashboard.characters.delete_title"),message:n()("dashboard.characters.delete_message"),onConfirm:()=>{Ee($a).forEach(k=>{let pe=!1;k.members&&k.members.some(be=>be.id===p)&&(k.members=k.members.filter(be=>be.id!==p),pe=!0),k.sessionRoster&&k.sessionRoster.includes(p)&&(k.sessionRoster=k.sessionRoster.filter(be=>be!==p),pe=!0),k.activeEnemies&&k.activeEnemies.some(be=>be.id===p)&&(k.activeEnemies=k.activeEnemies.filter(be=>be.id!==p),pe=!0),pe&&_e.set(k.id,k)}),console.log("[DEBUG] Deleting character with ID:",p);let K=0;for(const k of xe.keys()){const pe=xe.get(k);(k===p||pe&&pe.id===p)&&(console.log("[DEBUG] Found match for deletion - Key:",k,"Char ID:",pe?.id),xe.delete(k),K++)}console.log("[DEBUG] Total entries deleted from map:",K),gt.set(p,{type:"character",deletedAt:Date.now()}),console.log("[DEBUG] Deletion tracked in deletedIdsMap"),wa(),g(D,!1)}},!0),g(D,!0)}var le=Bo();St("touchstart",fa,b),St("touchmove",fa,z),St("touchend",fa,R);var ce=E(le),he=t(ce),de=t(he);{let p=Pt(()=>d(j)?"animate-spin":""),A=Pt(()=>d(S)*2);ks(de,{get class(){return d(p)},size:20,get style(){return`transform: rotate(${d(A)??""}deg)`}})}e(he),e(ce);var ae=a(ce,2),we=t(ae),ve=t(we),ie=t(ve);Re(2),e(ve);var Q=a(ve,2),ye=t(Q),Ne=t(ye),$e=a(Ne,2);$e.__click=()=>g(w,"characters");var qe=t($e);Aa(qe,{size:18});var De=a(qe);e($e);var Ie=a($e,2);Ie.__click=()=>g(w,"campaigns");var Pe=t(Ie);xa(Pe,{size:18});var st=a(Pe);e(Ie),e(ye),e(Q);var Je=a(Q,2),Ct=t(Je);mo(Ct,{});var xt=a(Ct,2);xt.__click=()=>g(I,!0);var Yt=t(xt);ka(Yt,{size:20}),e(xt);var ca=a(xt,2);so(ca,{}),e(Je),e(we);var Et=a(we,2),Gt=t(Et),qt=t(Gt),_t=a(qt,2);_t.__click=()=>g(w,"characters");var Jt=t(_t);{let p=Pt(()=>d(w)==="characters"?2.5:2);Aa(Jt,{size:20,get strokeWidth(){return d(p)},class:"transition-all duration-300"})}var P=a(Jt,2),ee=t(P,!0);e(P),e(_t);var ue=a(_t,2);ue.__click=()=>g(w,"campaigns");var Be=t(ue);{let p=Pt(()=>d(w)==="campaigns"?2.5:2);xa(Be,{size:20,get strokeWidth(){return d(p)},class:"transition-all duration-300"})}var ot=a(Be,2),va=t(ot,!0);e(ot),e(ue),e(Gt),e(Et);var At=a(Et,2),ua=t(At);{var es=p=>{var A=To(),K=t(A);sa(K,1,l,wt=>wt.id,(wt,Se)=>{var yt=Io(),zt=t(yt),It=t(zt),Ut=t(It),Zt=t(Ut,!0);e(Ut);var Tt=a(Ut,2),Ot=t(Tt),pa=t(Ot,!0);e(Ot);var ge=a(Ot,2),se=t(ge);e(ge);var Ce=a(ge,2);{var je=Oe=>{var Qe=zo(),et=t(Qe);e(Qe),L(()=>f(et,`â€¢ ${d(Se).playerName??""}`)),u(Oe,Qe)};$(Ce,Oe=>{d(Se).playerName&&Oe(je)})}e(Tt);var ke=a(Tt,2),Ge=t(ke),Me=t(Ge);oa(Me,{size:10});var Ae=a(Me);e(Ge),e(ke),e(It);var Ke=a(It,2),Te=t(Ke);Te.__click=()=>C(d(Se));var Xe=t(Te);ka(Xe,{size:16}),e(Te);var Ue=a(Te,2);Ue.__click=()=>F(d(Se).id);var Ze=t(Ue);Ma(Ze,{size:16}),e(Ue),e(Ke),e(zt);var rt=a(zt,2),nt=t(rt),it=t(nt),lt=t(it);xa(lt,{size:12});var dt=a(lt);e(it);var ct=a(it,2),Ft=t(ct,!0);e(ct),e(nt),e(rt);var vt=a(rt,2);vt.__click=()=>ta(aa("/characters/[id]",{id:d(Se).id}));var Nt=t(vt),kt=a(Nt);Ua(kt,{size:14,fill:"currentColor"}),e(vt),e(yt),L((Oe,Qe,et,$t,Dt,Lt)=>{f(Zt,d(Se).name),f(pa,d(Se).ancestry||"Humano"),f(se,`${Oe??""} ${d(Se).level??""}`),f(Ae,` ${Qe??""}`),Fe(Te,"title",et),Fe(Ue,"title",$t),f(dt,` ${Dt??""}`),f(Ft,d(Se).paths?.novice||"-"),f(Nt,`${Lt??""} `)},[()=>n()("common.labels.level"),()=>ba(d(Se).system).name,()=>n()("common.buttons.settings"),()=>n()("common.buttons.delete"),()=>n()("dashboard.characters.paths"),()=>n()("dashboard.characters.open_sheet")]),u(wt,yt)});var k=a(K,2);k.__click=()=>B();var pe=t(k),be=t(pe);ha(be,{size:32}),e(pe);var Kt=a(pe,2),Xt=t(Kt,!0);e(Kt),e(k),e(A),L(wt=>f(Xt,wt),[()=>n()("dashboard.characters.new_character")]),ft(1,A,()=>Mt,()=>({x:-100,duration:300,easing:jt})),ft(2,A,()=>Mt,()=>({x:-100,duration:300,easing:jt})),u(p,A)},ts=p=>{var A=Mo(),K=t(A),k=t(K);sa(k,1,i,ge=>ge.id,(ge,se)=>{var Ce=Do(),je=t(Ce),ke=t(je),Ge=t(ke),Me=t(Ge,!0);e(Ge);var Ae=a(Ge,2),Ke=t(Ae);{var Te=et=>{var $t=No(),Dt=t($t);Ca(Dt,{size:10});var Lt=a(Dt);e($t),L(ga=>f(Lt,` ${ga??""}`),[()=>n()("dashboard.campaigns.published")]),u(et,$t)};$(Ke,et=>{d(se).isPublished&&et(Te)})}var Xe=a(Ke,2);Xe.__click=()=>V(d(se));var Ue=t(Xe);is(Ue,{size:16}),e(Xe);var Ze=a(Xe,2);Ze.__click=()=>W(d(se).id);var rt=t(Ze);Ma(rt,{size:16}),e(Ze),e(Ae),e(ke);var nt=a(ke,2),it=t(nt,!0);e(nt);var lt=a(nt,2),dt=t(lt),ct=t(dt);oa(ct,{size:10});var Ft=a(ct);e(dt),e(lt);var vt=a(lt,2),Nt=t(vt,!0);e(vt),e(je);var kt=a(je,2);kt.__click=()=>ta(aa("/campaigns/[id]",{id:d(se).id}));var Oe=t(kt);Ua(Oe,{size:18,fill:"currentColor"});var Qe=a(Oe);e(kt),e(Ce),L((et,$t,Dt,Lt,ga,ss)=>{f(Me,d(se).name),Fe(Xe,"title",et),Fe(Ze,"title",$t),f(it,Dt),f(Ft,` ${Lt??""}`),f(Nt,ga),f(Qe,` ${ss??""}`)},[()=>n()("common.buttons.edit"),()=>n()("common.buttons.delete"),()=>d(se).gmName||n()("common.labels.master"),()=>ba(d(se).system||tt).name,()=>d(se).description||n()("dashboard.campaigns.no_description"),()=>n()("dashboard.campaigns.start_session")]),u(ge,Ce)});var pe=a(k,2);pe.__click=()=>V();var be=t(pe),Kt=t(be);ha(Kt,{size:32}),e(be);var Xt=a(be,2),wt=t(Xt,!0);e(Xt),e(pe),e(K);var Se=a(K,2),yt=t(Se),zt=a(t(yt),2),It=t(zt);Ca(It,{size:14});var Ut=a(It);e(zt),Re(2),e(yt);var Zt=a(yt,2),Tt=t(Zt);sa(Tt,1,s,ge=>ge.id,(ge,se)=>{var Ce=Po(),je=t(Ce),ke=t(je),Ge=t(ke,!0);e(ke);var Me=a(ke,2),Ae=t(Me),Ke=t(Ae,!0);e(Ae);var Te=a(Ae,2),Xe=a(t(Te));e(Te),e(Me);var Ue=a(Me,2),Ze=t(Ue),rt=t(Ze);oa(rt,{size:10});var nt=a(rt);e(Ze),e(Ue);var it=a(Ue,2),lt=t(it,!0);e(it),e(je);var dt=a(je,2);dt.__click=()=>ta(aa("/campaigns/[id]/invite",{id:d(se).id}));var ct=t(dt),Ft=a(ct);ha(Ft,{size:18,class:"group-hover:rotate-90 transition-transform"}),e(dt),e(Ce),L((vt,Nt,kt,Oe,Qe)=>{f(Ge,d(se).name),f(Ke,vt),f(Xe,` ${Nt??""}`),f(nt,` ${kt??""}`),f(lt,Oe),f(ct,`${Qe??""} `)},[()=>d(se).gmName||n()("common.labels.master"),()=>n()("dashboard.campaigns.online"),()=>ba(d(se).system||tt).name,()=>d(se).description||n()("dashboard.campaigns.public_description"),()=>n()("dashboard.campaigns.join_adventure")]),u(ge,Ce)});var Ot=a(Tt,2);{var pa=ge=>{var se=jo(),Ce=t(se),je=t(Ce);gs(je,{size:32}),e(Ce);var ke=a(Ce,2),Ge=t(ke,!0);e(ke);var Me=a(ke,2),Ae=t(Me,!0);e(Me),e(se),L((Ke,Te)=>{f(Ge,Ke),f(Ae,Te)},[()=>n()("dashboard.campaigns.no_online_campaigns"),()=>n()("dashboard.campaigns.no_online_description")]),u(ge,se)};$(Ot,ge=>{s().length===0&&ge(pa)})}e(Zt),e(Se),e(A),L((ge,se)=>{f(wt,ge),f(Ut,` ${se??""}`)},[()=>n()("dashboard.campaigns.new_campaign"),()=>n()("dashboard.campaigns.public_campaigns")]),ft(1,A,()=>Mt,()=>({x:100,duration:300,easing:jt})),ft(2,A,()=>Mt,()=>({x:100,duration:300,easing:jt})),u(p,A)};$(ua,p=>{d(w)==="characters"?p(es):p(ts,!1)})}e(At);var Na=a(At,2);Os(Na,{get isOpen(){return d(N)},get initialData(){return d(re)},onClose:()=>g(N,!1),onSave:T});var Da=a(Na,2);ms(Da,{get isOpen(){return d(H)},get initialData(){return d(Z)},onClose:()=>g(H,!1),onSave:ne});var Pa=a(Da,2);vs(Pa,{get isOpen(){return d(D)},get title(){return d(O).title},get message(){return d(O).message},get onConfirm(){return d(O).onConfirm},onCancel:()=>g(D,!1)});var ja=a(Pa,2);Ls(ja,{get isOpen(){return d(y)},get characterData(){return d(x)},onClose:()=>g(y,!1),onSave:M});var as=a(ja,2);Eo(as,{get isOpen(){return d(I)},onClose:()=>g(I,!1)}),e(ae),L((p,A,K,k,pe)=>{ma(ce,`transform: translateY(${(d(j)?60:d(S))??""}px); opacity: ${d(S)>0?1:0}`),Fe(ie,"src",`${ps??""}/logo-black.webp`),ma(Ne,`transform: translateX(${d(w)==="campaigns"?"100%":"0%"})`),ze($e,1,`relative z-10 px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${d(w)==="characters"?"text-white":"text-slate-400 hover:text-white"}`),f(De,` ${p??""}`),ze(Ie,1,`relative z-10 px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${d(w)==="campaigns"?"text-white":"text-slate-400 hover:text-white"}`),f(st,` ${A??""}`),Fe(xt,"title",K),ma(qt,`transform: translateX(${d(w)==="campaigns"?"100%":"0%"})`),ze(_t,1,`relative flex-1 py-3 rounded-xl text-xs font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 z-10 ${d(w)==="characters"?"text-indigo-400":"text-slate-500"}`),f(ee,k),ze(ue,1,`relative flex-1 py-3 rounded-xl text-xs font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 z-10 ${d(w)==="campaigns"?"text-indigo-400":"text-slate-500"}`),f(va,pe)},[()=>n()("dashboard.tabs.characters"),()=>n()("dashboard.tabs.campaigns"),()=>n()("settings.title"),()=>n()("dashboard.tabs.characters"),()=>n()("dashboard.tabs.campaigns")]),u(c,le),ht(),_()}bt(["click"]);var Ao=m("<!> <!>",1);function sr(c){var o=Ao(),r=E(o);Ms(r,{});var l=a(r,2);Go(l,{}),u(c,o)}export{sr as component};
