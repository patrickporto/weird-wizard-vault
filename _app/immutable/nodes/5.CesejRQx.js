const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/BSm8FYfm.js","../chunks/CeF9Pysg.js","../chunks/s5ZUjNrT.js","../chunks/BuEkqW-1.js","../chunks/CzlvztmG.js"])))=>i.map(i=>d[i]);
import{s as P,a as We,_ as Fe}from"../chunks/BuEkqW-1.js";import"../chunks/DsnmJJEf.js";import{d as Ye,o as Ke,s as l}from"../chunks/s5ZUjNrT.js";import{p as Qe,j as g,o as U,q as r,u as s,t as x,k as f,v as Xe,w as u,x as e,y as E,z as C,A as i,B as Ze,D as et,n as tt}from"../chunks/CeF9Pysg.js";import{e as at,$ as rt,s as fe,i as it,r as st,a as ot}from"../chunks/CzlvztmG.js";import{i as w}from"../chunks/BO4Hk4Jc.js";import{c as nt,j as lt,i as dt,b as vt}from"../chunks/BSm8FYfm.js";import{p as ct}from"../chunks/ioKWfQC8.js";import{G as xe,C as mt,g as ie,l as pt,D as W}from"../chunks/B1kp5yei.js";import{g as ue}from"../chunks/1ng8vGR5.js";import{U as _t,r as ge,C as ft,W as xt}from"../chunks/CFQtJdlB.js";import{v as ut}from"../chunks/BYmFNSF7.js";import{T as be}from"../chunks/BdpCSWQX.js";var gt=g('<span class="block text-xs mt-1 uppercase tracking-widest text-slate-500 font-black"> </span>'),bt=g('<div class="mt-4 px-3 py-1 bg-amber-500/10 border border-amber-500/20 rounded-full text-[10px] text-amber-500 font-bold uppercase tracking-wider animate-pulse flex items-center gap-2"><!> </div>'),ht=g('<div class="mb-6 bg-red-500/10 border border-red-500/20 rounded-xl p-3 flex items-center gap-3"><!> <p class="text-red-400 text-sm font-bold"> </p></div>'),wt=g('<p class="text-red-400 text-xs mt-1"> </p>'),yt=g('<div class="mb-6 bg-slate-950/50 p-4 rounded-xl border border-slate-800"><label for="campaign-pwd-input" class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-indigo-500 animate-pulse"></div> </label> <input id="campaign-pwd-input" type="password"/> <!></div>'),$t=g('<button><div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-xs font-bold"> </div> <div class="flex-1 text-left"><div class="font-bold text-sm"> </div> <div class="text-[10px] opacity-60 flex items-center gap-1"> <span class="w-1 h-1 rounded-full bg-slate-600"></span> <!> </div></div> <!></button>'),kt=g("<div> </div> <div> </div>",1),Ct=g('<div class="text-xs text-slate-500 max-w-[200px]">Você tem personagens, mas eles são de outro sistema de jogo. Crie um personagem para <strong> </strong>.</div>'),jt=g('<div class="text-xs text-slate-500"> </div>'),zt=g('<div class="flex flex-col items-center gap-2"><!> <div class="text-amber-500 font-bold"> </div> <!></div>'),It=g('<div class="text-center py-8 text-slate-600 italic text-sm space-y-2"><!></div>'),Et=g('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> ',1),Nt=g('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> ',1),At=g('<div class="min-h-screen bg-slate-950 flex items-center justify-center p-4"><div class="max-w-md w-full bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl"><div class="flex flex-col items-center text-center mb-8"><div class="w-16 h-16 bg-indigo-600/20 rounded-full flex items-center justify-center text-indigo-400 mb-4 border border-indigo-500/30"><!></div> <h1 class="text-2xl font-bold text-white mb-2"> </h1> <p class="text-slate-400"> <span class="text-indigo-400 font-bold"> </span> <!></p> <div class="mt-4 inline-flex items-center gap-1.5 px-3 py-1 rounded bg-slate-800 text-[10px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div> <!></div> <!> <!> <div class="space-y-4 mb-8"><label for="char-selector" class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"> </label> <div id="char-selector" class="space-y-2 max-h-60 overflow-y-auto custom-scrollbar pr-2"><!> <!></div></div> <div class="flex gap-3"><button class="flex-1 py-3 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-bold transition-all"> </button> <button class="flex-1 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold transition-all shadow-lg shadow-indigo-900/20 flex items-center justify-center gap-2"><!></button></div></div></div> <!>',1);function Lt(he,we){Qe(we,!0);const ye=()=>P(ct,"$page",N),V=()=>P(nt,"$character",N),n=()=>P(rt,"$t",N),j=()=>P(pt,"$liveCharacters",N),$e=()=>P(dt,"$isGmOnline",N),[N,ke]=We(),A=ye().params.id;let G=C(()=>V().campaignName||n()("invite.searching")),F=C(()=>V().gmName||"..."),q=C(()=>V().passwordHash),B=C(()=>V().system||W),se=C(()=>j().filter(a=>!a.campaignId&&(a.system||W)===e(B))),Ce=C(()=>j().some(a=>!a.campaignId&&(a.system||W)!==e(B))),h=E(null),H=E(!1),M=E(""),O=E(!1),J=E(!1),z=E("");Ke(()=>{A&&lt(A,!1)});async function je(){if(u(z,""),!e(h)||!A)return;if(j().find(t=>t.id===e(h))?.campaignId){u(z,n()("invite.already_in_campaign"),!0);return}if(e(q)){if(!e(M)){u(O,!0);return}u(J,!0);const t=await ut(e(M),e(q));if(u(J,!1),!t){u(O,!0);return}}u(O,!1),u(H,!0)}function ze(){if(!e(h)||!A)return;const a=j().find(t=>t.id===e(h));if(a){if(a.campaignId){u(z,n()("invite.already_in_campaign"),!0),u(H,!1);return}Fe(async()=>{const{charactersMap:t}=await import("../chunks/BSm8FYfm.js").then(o=>o.a4);return{charactersMap:t}},__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(({charactersMap:t})=>{t.set(e(h),{...a,campaignId:A,campaignName:e(G),gmName:e(F),campaignApproval:"pending"}),ue(ge("/characters/[id]",{id:e(h)}))})}}var oe=At(),Y=U(oe),ne=r(Y),K=r(ne),Q=r(K),Ie=r(Q);_t(Ie,{size:32}),i(Q);var X=s(Q,2),Ee=r(X,!0);i(X);var Z=s(X,2),le=r(Z),ee=s(le),Ne=r(ee,!0);i(ee);var Ae=s(ee,2);{var Ge=a=>{var t=gt(),o=r(t);i(t),x(d=>l(o,`${d??""}: ${e(F)??""}`),[()=>n()("common.labels.master")]),f(a,t)};w(Ae,a=>{e(F)!=="..."&&a(Ge)})}i(Z);var te=s(Z,2),de=r(te);xe(de,{size:12});var Me=s(de);i(te);var Oe=s(te,2);{var Se=a=>{var t=bt(),o=r(t);xt(o,{size:12});var d=s(o);i(t),x(p=>l(d,` ${p??""}`),[()=>n()("invite.waiting_gm")]),f(a,t)};w(Oe,a=>{$e()||a(Se)})}i(K);var ve=s(K,2);{var Te=a=>{var t=ht(),o=r(t);be(o,{size:20,class:"text-red-500 mb-0.5"});var d=s(o,2),p=r(d,!0);i(d),i(t),x(()=>l(p,e(z))),f(a,t)};w(ve,a=>{e(z)&&a(Te)})}var ce=s(ve,2);{var De=a=>{var t=yt(),o=r(t),d=s(r(o));i(o);var p=s(o,2);st(p);var c=s(p,2);{var m=v=>{var _=wt(),$=r(_,!0);i(_),x(k=>l($,k),[()=>n()("invite.password.incorrect")]),f(v,_)};w(c,v=>{e(O)&&v(m)})}i(t),x((v,_)=>{l(d,` ${v??""}`),ot(p,"placeholder",_),fe(p,1,`w-full bg-slate-900 border ${e(O)?"border-red-500":"border-slate-700"} rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors`)},[()=>n()("invite.password.required"),()=>n()("invite.password.placeholder")]),vt(p,()=>e(M),v=>u(M,v)),f(a,t)};w(ce,a=>{e(q)&&a(De)})}var ae=s(ce,2),re=r(ae),Pe=r(re,!0);i(re);var me=s(re,2),pe=r(me);at(pe,17,()=>e(se),it,(a,t)=>{var o=$t();o.__click=()=>{u(h,e(t).id,!0),u(z,"")};var d=r(o),p=r(d,!0);i(d);var c=s(d,2),m=r(c),v=r(m,!0);i(m);var _=s(m,2),$=r(_),k=s($,3);xe(k,{size:8});var S=s(k);i(_),i(c);var T=s(c,2);{var y=b=>{ft(b,{size:16,class:"text-indigo-400"})};w(T,b=>{e(h)===e(t).id&&b(y)})}i(o),x((b,I,D)=>{fe(o,1,`w-full flex items-center gap-3 p-3 rounded-xl border transition-all ${e(h)===e(t).id?"bg-indigo-600/20 border-indigo-500 text-white":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-700"}`),l(p,b),l(v,e(t).name),l($,`${I??""} ${e(t).level??""} • ${e(t).ancestry??""} `),l(S,` ${D??""}`)},[()=>e(t).name.charAt(0),()=>n()("common.labels.level"),()=>ie(e(t).system||W).name]),f(a,o)});var Ue=s(pe,2);{var Ve=a=>{var t=It(),o=r(t);{var d=c=>{var m=kt(),v=U(m),_=r(v,!0);i(v);var $=s(v,2),k=r($,!0);i($),x((S,T)=>{l(_,S),l(k,T)},[()=>n()("invite.no_characters"),()=>n()("invite.create_first")]),f(c,m)},p=c=>{var m=zt(),v=r(m);be(v,{size:24,class:"text-amber-500"});var _=s(v,2),$=r(_,!0);i(_);var k=s(_,2);{var S=y=>{var b=Ct(),I=s(r(b)),D=r(I,!0);i(I),tt(),i(b),x(Re=>l(D,Re),[()=>ie(e(B)).name]),f(y,b)},T=y=>{var b=jt(),I=r(b,!0);i(b),x(D=>l(I,D),[()=>n()("invite.create_or_leave")]),f(y,b)};w(k,y=>{e(Ce)?y(S):y(T,!1)})}i(m),x(y=>l($,y),[()=>n()("invite.all_in_campaigns")]),f(c,m)};w(o,c=>{j().length===0?c(d):c(p,!1)})}i(t),f(a,t)};w(Ue,a=>{e(se).length===0&&a(Ve)})}i(me),i(ae);var _e=s(ae,2),L=r(_e);L.__click=()=>ue(ge("/"));var qe=r(L,!0);i(L);var R=s(L,2);R.__click=je;var Be=r(R);{var He=a=>{var t=Et(),o=s(U(t));x(d=>l(o,` ${d??""}`),[()=>n()("invite.validating")]),f(a,t)},Je=a=>{var t=Ze(),o=U(t);{var d=c=>{var m=Nt(),v=s(U(m));x(_=>l(v,` ${_??""}`),[()=>n()("invite.loading")]),f(c,m)},p=c=>{var m=et();x(v=>l(m,v),[()=>n()("invite.accept")]),f(c,m)};w(o,c=>{e(G)===n()("invite.searching")?c(d):c(p,!1)},!0)}f(a,t)};w(Be,a=>{e(J)?a(He):a(Je,!1)})}i(R),i(_e),i(ne),i(Y);var Le=s(Y,2);{let a=C(()=>n()("invite.confirm_title")),t=C(()=>n()("invite.confirm_message",{values:{campaign:e(G),character:j().find(o=>o.id===e(h))?.name}}));mt(Le,{get isOpen(){return e(H)},get title(){return e(a)},get message(){return e(t)},onConfirm:ze,onCancel:()=>u(H,!1)})}x((a,t,o,d,p)=>{l(Ee,a),l(le,`${t??""} `),l(Ne,e(G)),l(Me,` ${o??""}`),l(Pe,d),l(qe,p),R.disabled=!e(h)||e(J)||!!e(q)&&!e(M)||e(G)==="Buscando campanha..."},[()=>n()("invite.title"),()=>n()("invite.invited_to"),()=>ie(e(B)).name,()=>n()("invite.select_character"),()=>n()("invite.decline")]),f(he,oe),Xe(),ke()}Ye(["click"]);export{Lt as component};
