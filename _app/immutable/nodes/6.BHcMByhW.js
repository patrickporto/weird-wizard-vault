import"../chunks/DsnmJJEf.js";import{c as ae,b as U,a as i,p as it,d as lt,f as l,e as t,r as e,s as r,g as a,C as ta,t as O,n as be,D as Jt,B as qt,S as la,q as aa,h as Ke,aj as Xt,ai as fa,u as _a,U as ga,v as ma}from"../chunks/jP6WwoMK.js";import{d as pt,s as h,g as Rt}from"../chunks/CXO0ygpU.js";import{l as Qe,s as Xe,p as ha,i as g}from"../chunks/AyRiqjkq.js";import{a as le,s as ut,b as Ua}from"../chunks/C0R4K3qO.js";import{c as Oe,U as $a,f as fe,i as La,W as Fa,r as Na,k as da,m as Ga,n as Va,o as Bt,q as va,t as Ba,u as Wa,g as Ya,v as Le,I as St,x as Wt,y as Yt,z as Ka,G as ca,M as Qa,D as Da,A as Ea,B as Dt,C as wa,E as Xa,F as pa,H as Ja,J as ra,a as na,s as ya,w as Za,K as er,j as tr}from"../chunks/CN7-Of_u.js";import{p as ar}from"../chunks/CsA1nCrk.js";import{g as Ta}from"../chunks/BD5tHgVx.js";import"../chunks/CTvB2Po6.js";import{s as ue,g as rr,r as Me,e as Ie,i as Ce,d as Pe,h as Gt}from"../chunks/LRkey9YK.js";import{i as gt}from"../chunks/BIvGbCjs.js";import{I as Je,s as Ze}from"../chunks/7Og-jIZB.js";import{a as Pa,C as sr,L as or,D as ir,b as lr,M as Zt,S as sa,G as nr,H as dr}from"../chunks/BV5Q7KCQ.js";import{W as vr}from"../chunks/CpySd1Zq.js";import{b as ge,a as cr}from"../chunks/Crg2OtD8.js";import{M as pr,T as Vt,P as ct,a as ea,S as ur,X as ja}from"../chunks/BPuODlaL.js";import{C as ka}from"../chunks/BzUzmChH.js";function oa(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];Je(A,Xe({name:"activity"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function br(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];Je(A,Xe({name:"arrow-left"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function Aa(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z"}],["path",{d:"M8 10h8"}],["path",{d:"M8 18h8"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"}]];Je(A,Xe({name:"backpack"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function xr(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["circle",{cx:"11",cy:"13",r:"9"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95"}],["path",{d:"m22 2-1.5 1.5"}]];Je(A,Xe({name:"bomb"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function za(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]];Je(A,Xe({name:"book"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function ba(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M16.17 7.83 2 22"}],["path",{d:"M4.02 12a2.827 2.827 0 1 1 3.81-4.17A2.827 2.827 0 1 1 12 4.02a2.827 2.827 0 1 1 4.17 3.81A2.827 2.827 0 1 1 19.98 12a2.827 2.827 0 1 1-3.81 4.17A2.827 2.827 0 1 1 12 19.98a2.827 2.827 0 1 1-4.17-3.81A1 1 0 1 1 4 12"}],["path",{d:"m7.83 7.83 8.34 8.34"}]];Je(A,Xe({name:"clover"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function fr(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["circle",{cx:"8",cy:"8",r:"6"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18"}],["path",{d:"M7 6h1v4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82"}]];Je(A,Xe({name:"coins"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function _r(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21"}],["path",{d:"m5.082 11.09 8.828 8.828"}]];Je(A,Xe({name:"eraser"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function gr(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z"}]];Je(A,Xe({name:"fast-forward"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function Sa(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];Je(A,Xe({name:"file-text"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function mr(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8"}]];Je(A,Xe({name:"infinity"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function hr(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m5 8 6 6"}],["path",{d:"m4 14 6-6 2-3"}],["path",{d:"M2 5h12"}],["path",{d:"M7 2h1"}],["path",{d:"m22 22-5-10-5 10"}],["path",{d:"M14 18h6"}]];Je(A,Xe({name:"languages"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function Ma(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m16 17 5-5-5-5"}],["path",{d:"M21 12H9"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}]];Je(A,Xe({name:"log-out"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function $r(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"}]];Je(A,Xe({name:"moon"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function wr(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z"}]];Je(A,Xe({name:"rewind"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function yr(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];Je(A,Xe({name:"user"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function ia(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"}],["path",{d:"m14 7 3 3"}],["path",{d:"M5 6v4"}],["path",{d:"M19 14v4"}],["path",{d:"M10 2v2"}],["path",{d:"M7 8H3"}],["path",{d:"M21 16h-4"}],["path",{d:"M11 3H9"}]];Je(A,Xe({name:"wand-sparkles"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}function Et(A,c){const s=Qe(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]];Je(A,Xe({name:"zap"},()=>s,{get iconNode(){return p},children:(m,k)=>{var n=ae(),f=U(n);Ze(f,c,"default",{}),i(m,n)},$$slots:{default:!0}}))}const kr=!1,ni=Object.freeze(Object.defineProperty({__proto__:null,prerender:kr},Symbol.toStringTag,{value:"Module"}));var Ar=l('<div class="text-[9px] font-black text-amber-500 uppercase tracking-tighter mt-1 animate-pulse">Aguardando Aprovação</div>'),zr=l('<div class="text-[10px] text-slate-400 mt-0.5 font-medium flex items-center gap-1"><span class="opacity-50 font-bold uppercase tracking-tighter">Mestre:</span> <span class="text-indigo-300"> </span></div>'),Sr=l('<div><div class="flex items-center gap-3"><div class="relative"><div><!></div> <div></div></div> <div><div>Campanha Ativa</div> <div class="font-bold text-white text-base leading-tight"> </div> <!></div></div> <button class="bg-slate-900 border border-slate-700 p-2.5 rounded-xl text-slate-500 hover:text-red-400 transition-all active:scale-95" title="Sair"><!></button></div>'),Mr=l("<div><div></div> <span> </span></div>"),Nr=l('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><div><!></div> <h3 class="text-[11px] font-black text-slate-400 uppercase tracking-[0.15em]">Campanha Ativa</h3></div> <button class="p-2 text-slate-600 hover:text-red-400 hover:bg-red-400/5 rounded-lg transition-all opacity-0 group-hover:opacity-100" title="Abandonar Campanha"><!></button></div> <div class="space-y-1"><div class="font-bold text-white text-lg tracking-tight leading-tight"> </div> <div class="text-[10px] font-medium text-slate-500 flex items-center gap-1.5 pt-0.5"><span class="uppercase tracking-tighter opacity-70">Mestre:</span> <span class="text-indigo-400 font-bold"> </span></div></div> <div class="flex items-center justify-between pt-3 border-t border-white/5"><div class="flex items-center gap-2"><div></div> <span> </span></div> <div class="flex items-center gap-1 text-[10px] text-slate-600 font-mono"><!> </div></div></div>');function ua(A,c){it(c,!0);const s=()=>le(Oe,"$character",m),p=()=>le(La,"$isGmOnline",m),[m,k]=ut();let n=ha(c,"compact",3,!1),f=ha(c,"banner",3,!1);var C=ae(),W=U(C);{var o=u=>{const b=ta(()=>s().campaignApproval==="pending");var P=ae(),_=U(P);{var x=T=>{var d=Sr(),j=t(d),H=t(j),G=t(H),w=t(G);$a(w,{size:20}),e(G);var N=r(G,2);e(H);var z=r(H,2),v=t(z),D=r(v,2),V=t(D,!0);e(D);var J=r(D,2);{var ne=Q=>{var Z=Ar();i(Q,Z)},de=Q=>{var Z=zr(),L=r(t(Z),2),Y=t(L,!0);e(L),e(Z),O(()=>h(Y,s().gmName)),i(Q,Z)};g(J,Q=>{a(b)?Q(ne):Q(de,!1)})}e(z),e(j);var B=r(j,2);B.__click=()=>{confirm("Sair da campanha?")&&fe.leaveCampaign()};var y=t(B);Ma(y,{size:18}),e(B),e(d),O(()=>{ue(d,1,`bg-indigo-600/10 backdrop-blur-md border border-indigo-500/20 rounded-2xl p-4 flex items-center justify-between shadow-xl shadow-indigo-950/20 ${a(b)?"border-amber-500/30 bg-amber-500/5":""}`),ue(G,1,`w-10 h-10 ${a(b)?"bg-amber-600/20 text-amber-400 border-amber-500/30":"bg-indigo-600/20 text-indigo-400 border-indigo-500/30"} rounded-xl flex items-center justify-center`),ue(N,1,`absolute -top-1 -right-1 w-3 h-3 ${a(b)?"bg-amber-500 animate-pulse":p()?"bg-green-500 animate-pulse":"bg-slate-600"} rounded-full border-2 border-slate-950 shadow-[0_0_8px_rgba(34,197,94,0.6)]`),ue(v,1,`text-[10px] ${a(b)?"text-amber-500/70":"text-indigo-400/70"} font-black uppercase tracking-[0.2em] leading-none mb-1`),h(V,s().campaignName)}),i(T,d)},$=T=>{var d=ae(),j=U(d);{var H=w=>{var N=Mr(),z=t(N),v=r(z,2),D=t(v,!0);e(v),e(N),O(()=>{ue(N,1,`inline-flex items-center gap-2 px-3 py-1 ${a(b)?"bg-amber-500/10 border-amber-500/20":"bg-indigo-500/10 border-indigo-500/20"} rounded-full shadow-sm glass`),ue(z,1,`w-1.5 h-1.5 rounded-full ${a(b)?"bg-amber-500 animate-pulse":p()?"bg-green-500 animate-pulse":"bg-slate-600"} shadow-[0_0_8px_rgba(34,197,94,0.4)]`),ue(v,1,`text-[9px] font-black ${a(b)?"text-amber-500":"text-indigo-400"} uppercase tracking-widest truncate max-w-[150px]`),h(D,s().campaignName)}),i(w,N)},G=w=>{var N=Nr(),z=t(N),v=t(z),D=t(v),V=t(D);$a(V,{size:16}),e(D),be(2),e(v);var J=r(v,2);J.__click=function(...re){fe.leaveCampaign?.apply(this,re)};var ne=t(J);Ma(ne,{size:14}),e(J),e(z);var de=r(z,2),B=t(de),y=t(B,!0);e(B);var Q=r(B,2),Z=r(t(Q),2),L=t(Z,!0);e(Z),e(Q),e(de);var Y=r(de,2),F=t(Y),ee=t(F),se=r(ee,2),he=t(se,!0);e(se),e(F);var ve=r(F,2),ce=t(ve);{var ye=re=>{Pa(re,{size:10,class:"opacity-40 animate-spin",style:"animation-duration: 3s"})},Ne=re=>{var oe=ae(),me=U(oe);{var $e=xe=>{Fa(xe,{size:10,class:"opacity-40"})},ke=xe=>{vr(xe,{size:10,class:"opacity-40 text-red-500/50"})};g(me,xe=>{p()?xe($e):xe(ke,!1)},!0)}i(re,oe)};g(ce,re=>{a(b)?re(ye):re(Ne,!1)})}var De=r(ce);e(ve),e(Y),e(N),O(()=>{ue(N,1,`bg-slate-900/50 border border-slate-800 rounded-2xl p-5 space-y-4 shadow-lg backdrop-blur-sm group hover:border-indigo-500/30 transition-all duration-300 ${!p()&&!a(b)?"opacity-60 saturate-50":""} ${a(b)?"border-amber-500/20":""}`),ue(D,1,`p-1.5 ${a(b)?"bg-amber-500/10 text-amber-500":p()?"bg-indigo-500/10 text-indigo-400":"bg-slate-800 text-slate-500"} rounded-lg`),h(y,s().campaignName),h(L,s().gmName),ue(ee,1,`w-1.5 h-1.5 rounded-full ${a(b)?"bg-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.4)] animate-pulse":p()?"bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.4)] animate-pulse":"bg-slate-700"}`),ue(se,1,`text-[11px] font-bold uppercase tracking-wider ${a(b)?"text-amber-500":p()?"text-slate-400":"text-slate-600"}`),h(he,a(b)?"Pendente de Aprovação":p()?"Online":"Offline"),h(De,` ${a(b)?"PENDENTE":p()?"SYNCED":"WAITING"}`)}),i(w,N)};g(j,w=>{n()?w(H):w(G,!1)},!0)}i(T,d)};g(_,T=>{f()?T(x):T($,!1)})}i(u,P)};g(W,u=>{s().campaignId&&u(o)})}i(A,C),lt(),k()}pt(["click"]);var Dr=l('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),Er=l('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"><div class="absolute inset-0 bg-gradient-to-b from-white/10 to-transparent"></div></div>'),Tr=l('<div class="absolute top-0 left-0 w-full h-full z-20 bg-cyan-400/20 pointer-events-none animate-pulse"></div>'),Pr=l('<span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border border-slate-900"></span></span>'),jr=l('<header class="bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-40 shadow-2xl"><div class="max-w-6xl mx-auto px-2 sm:px-4 py-2 sm:py-3"><div class="flex items-center justify-between gap-2 sm:gap-4"><div class="flex items-center gap-1 sm:gap-3"><button class="p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all flex items-center gap-1 group" aria-label="Voltar para Dashboard" title="Voltar para Dashboard"><!> <!></button> <button class="flex items-center gap-2 group text-left" aria-label="Informações do Personagem"><div class="w-8 h-8 sm:w-10 sm:h-10 bg-indigo-600 rounded-lg sm:rounded-full border border-white/10 flex items-center justify-center text-sm sm:text-lg font-black shadow-lg shadow-indigo-500/20 group-hover:scale-105 transition-transform"> </div> <div class="hidden xs:block svelte-fpzs02"><div class="flex items-center gap-2"><h1 class="text-xs sm:text-sm font-bold text-white leading-tight truncate max-w-[80px] sm:max-w-none group-hover:text-indigo-400 transition-colors"> </h1></div> <p class="text-[10px] text-slate-500 font-medium"> </p></div></button></div> <button class="flex-1 max-w-md cursor-pointer group px-2 sm:px-0 text-left" aria-label="Estado de Saúde"><div class="flex justify-between text-[10px] sm:text-xs mb-1.5 px-1"><span><!></span> <span class="text-slate-400 font-mono flex items-center gap-1 group-hover:text-white transition-colors"><span> </span><span class="opacity-30">/</span><span class="text-white font-bold"> </span></span></div> <div class="h-3 sm:h-5 w-full bg-slate-950 rounded-full border border-white/5 relative overflow-hidden group-hover:border-white/20 transition-all shadow-inner"><div></div> <!> <!> <!></div></button> <div class="flex items-center gap-1 sm:gap-2"><button class="p-2 text-slate-400 hover:text-indigo-400 hover:bg-indigo-400/10 rounded-full transition-all" title="Descanso"><!></button> <button class="p-2 bg-indigo-600/10 text-indigo-400 border border-indigo-400/20 rounded-lg hover:bg-indigo-600 hover:text-white transition-all relative" title="Histórico"><!> <!></button> <button class="hidden sm:flex p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all" title="Configurações"><!></button></div></div></div></header>');function Ir(A,c){it(c,!1);const s=()=>le(Oe,"$character",o),p=()=>le(Ga,"$isIncapacitated",o),m=()=>le(Va,"$isInjured",o),k=()=>le(Bt,"$damage",o),n=()=>le(va,"$effectiveMaxHealth",o),f=()=>le(Ba,"$damagePercentage",o),C=()=>le(Wa,"$tempHealth",o),W=()=>le(Ya,"$rollHistory",o),[o,u]=ut();function b(E){Le.update(I=>({...I,type:E,isOpen:!0}))}gt();var P=jr(),_=t(P),x=t(_),$=t(x),T=t($);T.__click=()=>Ta(Na("/"));var d=t(T);sr(d,{size:20,class:"group-hover:-translate-x-0.5 transition-transform"});var j=r(d,2);or(j,{size:18,class:"hidden sm:block opacity-50"}),e(T);var H=r(T,2);H.__click=()=>b("character_info");var G=t(H),w=t(G,!0);e(G);var N=r(G,2),z=t(N),v=t(z),D=t(v,!0);e(v),e(z);var V=r(z,2),J=t(V);e(V),e(N),e(H),e($);var ne=r($,2);ne.__click=()=>b("health");var de=t(ne),B=t(de),y=t(B);{var Q=E=>{var I=Jt("INCAPACITADO");i(E,I)},Z=E=>{var I=ae(),pe=U(I);{var we=S=>{var X=Jt("FERIDO");i(S,X)},je=S=>{var X=ae(),M=U(X);{var ie=_e=>{},te=_e=>{var Ee=Jt("SAUDÁVEL");i(_e,Ee)};g(M,_e=>{k()>0?_e(ie):_e(te,!1)},!0)}i(S,X)};g(pe,S=>{m()?S(we):S(je,!1)},!0)}i(E,I)};g(y,E=>{p()?E(Q):E(Z,!1)})}e(B);var L=r(B,2),Y=t(L),F=t(Y,!0);e(Y);var ee=r(Y,2),se=t(ee,!0);e(ee),e(L),e(de);var he=r(de,2),ve=t(he),ce=r(ve,2);{var ye=E=>{var I=Dr();O(()=>{ue(I,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10 ${p()?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":f()>=80?"bg-gradient-to-r from-red-600 to-rose-500":m()?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),rr(I,`width: ${f()??""}%`)}),i(E,I)};g(ce,E=>{f()>0&&E(ye)})}var Ne=r(ce,2);{var De=E=>{var I=Er();i(E,I)};g(Ne,E=>{k()===0&&E(De)})}var re=r(Ne,2);{var oe=E=>{var I=Tr();i(E,I)};g(re,E=>{C()>0&&E(oe)})}e(he),e(ne);var me=r(ne,2),$e=t(me);$e.__click=()=>b("rest_confirm");var ke=t($e);$r(ke,{size:18}),e($e);var xe=r($e,2);xe.__click=()=>da.update(E=>!E);var Ae=t(xe);ir(Ae,{size:18});var ze=r(Ae,2);{var R=E=>{var I=Pr();i(E,I)};g(ze,E=>{W().length>0&&E(R)})}e(xe);var K=r(xe,2);K.__click=()=>b("character_info");var q=t(K);lr(q,{size:18}),e(K),e(me),e(x),e(_),e(P),O(E=>{h(w,E),h(D,s().name),h(J,`Nv ${s().level??""}`),ue(B,1,`font-black uppercase tracking-wider ${p()?"text-red-500 animate-pulse":m()?"text-amber-500":k()>0?"text-slate-400":"text-emerald-500"}`),ue(Y,1,`${k()===0?"text-emerald-400":p()?"text-red-400":m()?"text-amber-400":"text-orange-400"} font-bold group-hover:text-red-300`),h(F,k()),h(se,n()),ue(ve,1,`absolute top-0 left-0 h-full w-full ${k()===0?"bg-emerald-900/20":"bg-slate-900/50"}`)},[()=>s().name.charAt(0)]),i(A,P),lt(),u()}pt(["click"]);var Cr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Or=l("<option> </option>"),Hr=l("<option> </option>"),Rr=l('<div class="grid grid-cols-3 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Dano</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Dano (d6)"/></label> <label class="block col-span-2"><span class="text-[10px] text-slate-500 uppercase font-bold">Traits</span> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Traits"/></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Empunhadura</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <label class="block col-span-2"><span class="text-[10px] text-slate-500 uppercase font-bold">Alcance</span> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Range"/></label></div>'),qr=l('<div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Def. Fixa</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Fixed Def"/></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Def. Mod</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Mod Def"/></label></div>'),Ur=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),Lr=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tipo</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Qtd</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Qtd"/></label></div> <!> <!> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),Fr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Gr=l("<option> </option>"),Vr=l("<option> </option>"),Br=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),Wr=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tier</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <div class="relative"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tradição</span> <input list="traditions" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Tradição"/></label> <datalist id="traditions"></datalist></div></div> <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700"><label for="maxCastings" class="text-xs text-slate-400 uppercase">Castings</label> <input id="maxCastings" type="number" class="w-16 bg-slate-800 border border-slate-600 rounded p-1 text-white text-center"/></div> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase">Efeito Associado</span> <button> </button></div> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),Yr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Kr=l('<div class="flex items-center gap-2 border-l border-slate-700 pl-2"><label for="maxUses" class="text-xs text-slate-400 uppercase">Max Uses</label> <input id="maxUses" type="number" class="w-16 bg-slate-800 border border-slate-600 rounded p-1 text-white text-center"/></div>'),Qr=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),Xr=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700"><input type="checkbox" id="isPassive" class="w-4 h-4 rounded bg-slate-800 border-slate-600 text-indigo-600 focus:ring-indigo-500"/> <label for="isPassive" class="text-xs text-slate-400 uppercase font-bold flex-1 cursor-pointer">Passivo / Ilimitado</label> <!></div> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase">Efeito Associado</span> <button> </button></div> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),Jr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Zr=l('<div><label for="effectName" class="text-xs font-bold text-slate-400 uppercase">Nome</label> <input id="effectName" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/> <!></div>'),es=l('<div class="text-center text-xs text-slate-500 italic mb-2">Nome e Descrição herdados do item pai.</div>'),ts=l("<option> </option>"),as=l('<input type="number" class="bg-slate-900 border border-slate-700 rounded p-2 text-white"/>'),rs=l("<option> </option>"),ss=l('<div class="flex gap-1 items-center"><select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/3"></select> <select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4"><option>Add (+/-)</option><option>Set (=)</option><option>Mult (x)</option></select> <input type="number" class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4 text-center"/> <button class="text-slate-600 hover:text-red-400 p-1" aria-label="Remover Modificador"><!></button></div>'),os=l('<div><label class="text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"></textarea></label></div>'),is=l('<div class="space-y-4"><!> <div><label for="effectDuration" class="text-xs font-bold text-slate-400 uppercase">Duração</label> <div class="grid grid-cols-2 gap-2"><select id="effectDuration" class="bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"></select> <!></div></div> <div class="bg-slate-950 p-3 rounded border border-slate-800"><div class="flex justify-between items-center mb-2"><span class="text-xs font-bold text-indigo-400 uppercase">Modificadores</span> <button class="text-[10px] bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600 flex items-center gap-1"><!> Add</button></div> <div class="space-y-2"></div></div> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar Efeito</button></div>'),ls=l('<div class="space-y-4"><h3 class="text-white font-bold text-lg"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold">Valor Base <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div>'),ns=l('<div class="space-y-4"><h3 class="text-white font-bold text-lg uppercase"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold">Valor Base <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div>'),ds=l('<div class="space-y-4"><div class="grid grid-cols-2 gap-4"><div><label class="text-xs text-slate-400 uppercase font-bold">Vida Normal <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs text-slate-400 uppercase font-bold">Vida Atual <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div><label class="text-xs text-red-400 uppercase font-bold">Dano <input type="number" class="w-full bg-slate-900 border border-red-900/50 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Atualizar</button></div>'),vs=l('<div class="space-y-4"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div class="grid grid-cols-2 gap-4"><div><label class="text-xs font-bold text-slate-400 uppercase">Nível <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs font-bold text-slate-400 uppercase">Ancestralidade <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div class="pt-2 border-t border-slate-700 space-y-3"><div><label class="text-[10px] font-bold text-slate-400 uppercase">Novice <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Expert <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Master <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded mt-2">Salvar</button></div>'),cs=l('<div class="mt-4 p-3 bg-green-900/20 border border-green-900/50 rounded-lg"><div class="flex items-center gap-2 mb-1 text-[10px] font-bold text-green-400 uppercase tracking-wider">Efeito Associado</div> <div class="text-xs text-green-200/70"> </div></div>'),ps=l('<button class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> APLICAR EFEITO E USAR</button> <button class="w-full bg-slate-700 hover:bg-slate-600 text-slate-300 font-bold py-2 rounded-lg text-sm transition-colors">USAR SEM APLICAR EFEITO</button>',1),us=l('<button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> CONFIRMAR USO</button>'),bs=l('<div class="space-y-4"><div class="bg-slate-900 p-4 rounded-lg border border-slate-700"><p class="text-indigo-300 font-bold text-2xl mb-1 text-center"> </p> <p class="text-slate-400 text-sm italic mb-4 text-center"> </p> <!></div> <div class="flex flex-col gap-2 pt-2"><!> <button class="w-full text-slate-500 hover:text-slate-300 text-xs font-bold uppercase tracking-widest py-2 transition-colors mt-2">CANCELAR</button></div></div>'),xs=l('<div class="text-center space-y-6"><div class="flex justify-center"><!></div> <div><p class="text-lg text-white font-bold">Realizar Descanso?</p></div> <div class="flex gap-4 justify-center"><button class="px-6 py-2 rounded bg-slate-700 hover:bg-slate-600 text-white font-bold">Cancelar</button><button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold">Descansar</button></div></div>'),fs=l('<div class="space-y-4"><h3 class="text-center font-bold text-white uppercase mb-2">Rolagem</h3> <div class="bg-slate-900 p-4 rounded-lg border border-slate-700 text-center"><div class="flex justify-center items-center gap-6 mb-2"><button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-red-900 flex items-center justify-center text-slate-300 hover:text-white border border-slate-700" aria-label="Diminuir Modificador"><!></button> <span> </span> <button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-green-900 flex items-center justify-center text-slate-300 hover:text-white border border-slate-700" aria-label="Aumentar Modificador"><!></button></div> <div class="text-xs text-slate-500"> </div></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2">ROLAR</button></div>'),_s=l('<div class="space-y-6 text-center"><div class="bg-indigo-900/20 border border-indigo-500/30 p-4 rounded-xl"><h3 class="text-2xl font-bold text-white mb-1"> </h3> <p class="text-xs text-indigo-300 uppercase tracking-widest font-bold"> </p></div> <div class="grid grid-cols-2 gap-4"><button class="flex flex-col items-center justify-center p-6 bg-slate-900/80 hover:bg-indigo-600 border border-slate-700 hover:border-indigo-400 rounded-2xl transition-all group"><div class="p-3 rounded-full bg-slate-800 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white mb-3 shadow-lg"><!></div> <span class="font-black text-white tracking-widest uppercase text-sm">Ataque</span></button> <button class="flex flex-col items-center justify-center p-6 bg-slate-900/80 hover:bg-red-600 border border-slate-700 hover:border-red-400 rounded-2xl transition-all group"><div class="p-3 rounded-full bg-slate-800 text-red-500 group-hover:bg-red-500 group-hover:text-white mb-3 shadow-lg"><!></div> <span class="font-black text-white tracking-widest uppercase text-sm">Dano</span></button></div> <button class="text-slate-500 hover:text-slate-300 text-[10px] font-bold uppercase tracking-[0.2em]">Voltar</button></div>'),gs=l('<span class="text-[10px] text-slate-500 uppercase font-black tracking-widest">Passivo</span>'),ms=l("<span></span>"),hs=l('<span class="block text-[10px] text-slate-500 uppercase font-bold text-center">Cargas</span> <p class="flex items-center justify-center gap-1"></p> <span> </span>',1),$s=l('<button class="w-full text-left p-4 bg-slate-900/50 border border-slate-700 rounded-xl hover:bg-yellow-900/20 hover:border-yellow-600/50 flex items-center justify-between transition-all group disabled:opacity-30 disabled:hover:bg-slate-900/50 disabled:hover:border-slate-700 active:scale-[0.99]"><div class="flex items-center gap-4"><div class="p-2.5 rounded-lg bg-slate-800 text-yellow-500 group-hover:scale-110 transition-transform"><!></div> <div><p class="text-white font-bold"> </p> <p class="text-[10px] text-slate-500 italic max-w-xs"> </p></div></div> <div class="text-right shrink-0"><!></div></button>'),ws=l('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm">Nenhum talento disponível.</p></div>'),ys=l('<div class="space-y-3 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1"></div>'),ks=l("<div></div>"),As=l('<button class="w-full text-left p-4 bg-slate-900/50 border border-slate-700 rounded-xl hover:bg-indigo-900/20 hover:border-indigo-600 text-indigo-400/0 hover:text-indigo-400 flex items-center justify-between transition-all group disabled:opacity-30 active:scale-[0.99]"><div class="flex items-center gap-4"><div class="p-2.5 rounded-lg bg-slate-800 text-indigo-400 group-hover:scale-110 transition-all border border-transparent group-hover:border-indigo-500/30"><!></div> <div><p class="text-white font-bold group-hover:text-indigo-300 transition-colors"> </p> <p class="text-[10px] text-slate-500 uppercase font-bold tracking-tight"> </p></div></div> <div class="text-right shrink-0"><span class="block text-[10px] text-slate-500 uppercase font-bold text-center mb-1">Casts</span> <div class="flex gap-0.5"></div></div></button>'),zs=l('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm">Grimório vazio.</p></div>'),Ss=l('<div class="space-y-3 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1"></div>'),Ms=l("<button> <!></button>"),Ns=l('<div class="text-xs"><span class="text-red-400 font-bold"> </span> <span class="text-slate-400"> </span></div>'),Ds=l('<p class="text-xs text-slate-600 italic text-center">Nenhuma aflição selecionada.</p>'),Es=l('<div class="grid grid-cols-2 gap-2"></div> <div class="mt-6 p-4 bg-slate-900/50 rounded-lg border border-slate-700"><p class="text-[10px] text-slate-500 uppercase font-bold mb-2">Resumo dos Efeitos</p> <div class="space-y-2"><!> <!></div></div>',1),Ts=l('<div class="p-6 overflow-y-auto custom-scrollbar"><!></div>');function Ps(A,c){it(c,!0);const s=()=>le(Le,"$modalState",C),p=()=>le(Bt,"$damage",C),m=()=>le(Wt,"$normalHealth",C),k=()=>le(Yt,"$currentHealth",C),n=()=>le(Oe,"$character",C),f=()=>le(Ka,"$activeEffects",C),[C,W]=ut();let o=qt(la({})),u=qt(la({})),b=qt(0),P=qt(la([]));aa(()=>{if(s().isOpen){const{type:v,data:D}=s();v==="item"&&Ke(o,D?{...D}:{name:"",type:St.OTHER,quantity:1,price:0,description:"",availability:"Common",quality:"Standard"},!0),v==="spell"&&Ke(o,D?{...D}:{name:"",tier:"Novice",tradition:"Destruction",type:"Attack",castings:1,maxCastings:1,description:"",effect:null},!0),v==="talent"&&Ke(o,D?{...D}:{name:"",description:"",uses:0,maxUses:0,isPassive:!1,effect:null},!0),v==="attribute"&&Ke(o,{...D},!0),v==="health"&&Ke(o,{d:p(),nh:m(),ch:k()},!0),v==="character_info"&&Ke(o,{name:n().name,level:n().level,ancestry:n().ancestry,novicePath:n().paths.novice,expertPath:n().paths.expert,masterPath:n().paths.master,normalHealth:m(),currentHealth:k()},!0),v==="stat"&&(D==="defense"?Ke(o,{key:"naturalDefense",name:"Defesa Natural",value:n().naturalDefense},!0):D==="speed"&&Ke(o,{key:"speed",name:"Velocidade",value:n().speed},!0)),v==="pre_roll"&&(Ke(P,f().map(V=>V.id),!0),Ke(b,0)),v==="effect"&&(D&&D.parentType?Ke(u,D.parentData.effect||{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0):D?(Ke(u,{...D},!0),Array.isArray(a(u).modifiers)||(a(u).modifiers=[])):Ke(u,{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0))}});function _(){Le.update(v=>({...v,type:null,isOpen:!1,data:null}))}function x(){if(!a(o).name?.trim())return alert("Nome é obrigatório");const v={...a(o),id:a(o).id||Date.now()};s().data?fe.updateItem(v):fe.addItem(v),_()}function $(){if(!a(o).name?.trim())return alert("Nome é obrigatório");const v={...a(o),id:a(o).id||Date.now()};s().data?fe.updateSpell(v):fe.addSpell(v),_()}function T(){if(!a(o).name?.trim())return alert("Nome é obrigatório");const v={...a(o),id:a(o).id||Date.now()};a(o).isPassive?(v.maxUses=0,v.uses=0):!s().data&&a(o).maxUses>0&&(v.uses=a(o).maxUses),s().data?fe.updateTalent(v):fe.addTalent(v),_()}function d(){const v=a(u);if(!s().data?.parentType&&!v.name?.trim())return alert("Nome do efeito é obrigatório");const D={...v,initialRounds:v.duration==="ROUNDS"?v.roundsLeft:0};if(s().data?.parentType){const V={...s().data.parentData,effect:D};Le.update(J=>({...J,type:s().data.parentType,data:V}));return}v.id&&n().effects.some(V=>V.id===v.id)?fe.updateEffect(D):fe.addEffect({...D,id:Date.now(),isActive:!0}),_()}function j(){Oe.update(v=>({...v,attributes:v.attributes.map(D=>D.key===a(o).key?{...D,value:parseInt(a(o).value)}:D)})),_()}function H(){Bt.set(Math.max(0,parseInt(a(o).d))),Wt.set(Math.max(1,parseInt(a(o).nh))),Yt.set(Math.max(0,parseInt(a(o).ch))),_()}function G(){Oe.update(v=>({...v,name:a(o).name,level:parseInt(a(o).level)||0,ancestry:a(o).ancestry,paths:{novice:a(o).novicePath,expert:a(o).expertPath,master:a(o).masterPath}})),Wt.set(parseInt(a(o).normalHealth)),Yt.set(parseInt(a(o).currentHealth)),_()}function w(){Oe.update(v=>({...v,[a(o).key]:parseInt(a(o).value)||0})),_()}function N(){a(u).modifiers=[...a(u).modifiers||[],{target:"str",type:Dt.ADD,value:1}]}function z(v){a(u).modifiers=a(u).modifiers.filter((D,V)=>V!==v)}{let v=ta(()=>s().type==="item"?"Editor de Item":s().type==="spell"?"Editar Magia":s().type==="talent"?"Editar Talento":s().type==="effect"?"Gerenciar Efeito":s().type==="pre_roll"?"Confirmar Rolagem":s().type==="confirm_spell"?"Confirmar Conjuração":s().type==="confirm_talent"?"Confirmar Ativação":s().type==="cast_spell"?"Grimório":s().type==="select_talent"?"Seus Talentos":s().type==="weapon_menu"?"Opções de Ataque":s().type==="character_info"?"Informações do Personagem":s().type==="health"?"Vigor & Dano":s().type==="attribute"?"Atributo":s().type==="stat"?a(o).name:s().type==="affliction"?"Gerenciar Aflições":"Informação");pr(A,{get isOpen(){return s().isOpen},onClose:_,maxWidth:"max-w-lg",get title(){return a(v)},children:(D,V)=>{var J=Ts(),ne=t(J);{var de=y=>{var Q=Lr(),Z=t(Q),L=t(Z),Y=r(t(L));Me(Y),e(L);var F=r(L,2);{var ee=R=>{var K=Cr();i(R,K)};g(F,R=>{a(o).name||R(ee)})}e(Z);var se=r(Z,2),he=t(se),ve=r(t(he),2);Ie(ve,21,()=>Object.values(St),Ce,(R,K)=>{var q=Or(),E=t(q,!0);e(q);var I={};O(()=>{h(E,a(K)),I!==(I=a(K))&&(q.value=(q.__value=a(K))??"")}),i(R,q)}),e(ve),e(he);var ce=r(he,2),ye=r(t(ce),2);Me(ye),e(ce),e(se);var Ne=r(se,2);{var De=R=>{var K=Rr(),q=t(K),E=r(t(q),2);Me(E),e(q);var I=r(q,2),pe=r(t(I),2);Me(pe),e(I);var we=r(I,2),je=r(t(we),2);Ie(je,21,()=>Object.values(ca),Ce,(M,ie)=>{var te=Hr(),_e=t(te,!0);e(te);var Ee={};O(()=>{h(_e,a(ie)),Ee!==(Ee=a(ie))&&(te.value=(te.__value=a(ie))??"")}),i(M,te)}),e(je),e(we);var S=r(we,2),X=r(t(S),2);Me(X),e(S),e(K),ge(E,()=>a(o).damageDice,M=>a(o).damageDice=M),ge(pe,()=>a(o).traits,M=>a(o).traits=M),Gt(je,()=>a(o).grip,M=>a(o).grip=M),ge(X,()=>a(o).range,M=>a(o).range=M),i(R,K)};g(Ne,R=>{a(o).type===St.WEAPON&&R(De)})}var re=r(Ne,2);{var oe=R=>{var K=qr(),q=t(K),E=r(t(q),2);Me(E),e(q);var I=r(q,2),pe=r(t(I),2);Me(pe),e(I),e(K),ge(E,()=>a(o).defenseFixed,we=>a(o).defenseFixed=we),ge(pe,()=>a(o).defenseMod,we=>a(o).defenseMod=we),i(R,K)};g(re,R=>{a(o).type===St.ARMOR&&R(oe)})}var me=r(re,2),$e=r(t(me));Xt($e),Pe($e,"rows",3),e(me);var ke=r(me,2),xe=t(ke);{var Ae=R=>{var K=Ur();K.__click=()=>{fe.deleteItem(s().data.id),_()};var q=t(K);Vt(q,{size:18}),e(K),i(R,K)};g(xe,R=>{s().data&&R(Ae)})}var ze=r(xe,2);ze.__click=x,e(ke),e(Q),ge(Y,()=>a(o).name,R=>a(o).name=R),Gt(ve,()=>a(o).type,R=>a(o).type=R),ge(ye,()=>a(o).quantity,R=>a(o).quantity=R),ge($e,()=>a(o).description,R=>a(o).description=R),i(y,Q)},B=y=>{var Q=ae(),Z=U(Q);{var L=F=>{var ee=Wr(),se=t(ee),he=t(se),ve=r(t(he));Me(ve),e(he);var ce=r(he,2);{var ye=S=>{var X=Fr();i(S,X)};g(ce,S=>{a(o).name||S(ye)})}e(se);var Ne=r(se,2),De=t(Ne),re=r(t(De),2);Ie(re,20,()=>["Novice","Expert","Master"],Ce,(S,X)=>{var M=Gr(),ie=t(M,!0);e(M);var te={};O(()=>{h(ie,X),te!==(te=X)&&(M.value=(M.__value=X)??"")}),i(S,M)}),e(re),e(De);var oe=r(De,2),me=t(oe),$e=r(t(me),2);Me($e),e(me);var ke=r(me,2);Ie(ke,21,()=>Qa,Ce,(S,X)=>{var M=Vr(),ie=t(M,!0);e(M);var te={};O(()=>{h(ie,a(X)),te!==(te=a(X))&&(M.value=(M.__value=a(X))??"")}),i(S,M)}),e(ke),e(oe),e(Ne);var xe=r(Ne,2),Ae=r(t(xe),2);Me(Ae),Ae.__input=()=>a(o).castings=a(o).maxCastings,e(xe);var ze=r(xe,2),R=r(t(ze),2);R.__click=()=>Le.update(S=>({...S,type:"effect",data:{parentType:"spell",parentData:a(o)}}));var K=t(R,!0);e(R),e(ze);var q=r(ze,2),E=r(t(q));Xt(E),Pe(E,"rows",4),e(q);var I=r(q,2),pe=t(I);{var we=S=>{var X=Br();X.__click=()=>{fe.deleteSpell(s().data.id),_()};var M=t(X);Vt(M,{size:18}),e(X),i(S,X)};g(pe,S=>{s().data&&S(we)})}var je=r(pe,2);je.__click=$,e(I),e(ee),O(()=>{ue(R,1,`text-[10px] px-2 py-1 rounded border ${a(o).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),h(K,a(o).effect?"Configurado":"Nenhum")}),ge(ve,()=>a(o).name,S=>a(o).name=S),Gt(re,()=>a(o).tier,S=>a(o).tier=S),ge($e,()=>a(o).tradition,S=>a(o).tradition=S),ge(Ae,()=>a(o).maxCastings,S=>a(o).maxCastings=S),ge(E,()=>a(o).description,S=>a(o).description=S),i(F,ee)},Y=F=>{var ee=ae(),se=U(ee);{var he=ce=>{var ye=Xr(),Ne=t(ye),De=t(Ne),re=r(t(De));Me(re),e(De);var oe=r(De,2);{var me=S=>{var X=Yr();i(S,X)};g(oe,S=>{a(o).name||S(me)})}e(Ne);var $e=r(Ne,2),ke=t($e);Me(ke);var xe=r(ke,4);{var Ae=S=>{var X=Kr(),M=r(t(X),2);Me(M),e(X),ge(M,()=>a(o).maxUses,ie=>a(o).maxUses=ie),i(S,X)};g(xe,S=>{a(o).isPassive||S(Ae)})}e($e);var ze=r($e,2),R=r(t(ze),2);R.__click=()=>Le.update(S=>({...S,type:"effect",data:{parentType:"talent",parentData:a(o)}}));var K=t(R,!0);e(R),e(ze);var q=r(ze,2),E=r(t(q));Xt(E),Pe(E,"rows",4),e(q);var I=r(q,2),pe=t(I);{var we=S=>{var X=Qr();X.__click=()=>{fe.deleteTalent(s().data.id),_()};var M=t(X);Vt(M,{size:18}),e(X),i(S,X)};g(pe,S=>{s().data&&S(we)})}var je=r(pe,2);je.__click=T,e(I),e(ye),O(()=>{ue(R,1,`text-[10px] px-2 py-1 rounded border ${a(o).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),h(K,a(o).effect?"Configurado":"Nenhum")}),ge(re,()=>a(o).name,S=>a(o).name=S),cr(ke,()=>a(o).isPassive,S=>a(o).isPassive=S),ge(E,()=>a(o).description,S=>a(o).description=S),i(ce,ye)},ve=ce=>{var ye=ae(),Ne=U(ye);{var De=oe=>{var me=is(),$e=t(me);{var ke=ie=>{var te=Zr(),_e=r(t(te),2);Me(_e);var Ee=r(_e,2);{var Fe=He=>{var nt=Jr();i(He,nt)};g(Ee,He=>{a(u).name||He(Fe)})}e(te),ge(_e,()=>a(u).name,He=>a(u).name=He),i(ie,te)},xe=ie=>{var te=es();i(ie,te)};g($e,ie=>{s().data?.parentType?ie(xe,!1):ie(ke)})}var Ae=r($e,2),ze=r(t(Ae),2),R=t(ze);Ie(R,21,()=>Object.entries(Da),Ce,(ie,te)=>{var _e=ta(()=>fa(a(te),2));let Ee=()=>a(_e)[0],Fe=()=>a(_e)[1];var He=ts(),nt=t(He,!0);e(He);var Ge={};O(()=>{h(nt,Fe()),Ge!==(Ge=Ee())&&(He.value=(He.__value=Ee())??"")}),i(ie,He)}),e(R);var K=r(R,2);{var q=ie=>{var te=as();Me(te),ge(te,()=>a(u).roundsLeft,_e=>a(u).roundsLeft=_e),i(ie,te)};g(K,ie=>{a(u).duration==="ROUNDS"&&ie(q)})}e(ze),e(Ae);var E=r(Ae,2),I=t(E),pe=r(t(I),2);pe.__click=N;var we=t(pe);ct(we,{size:10}),be(),e(pe),e(I);var je=r(I,2);Ie(je,21,()=>a(u).modifiers,Ce,(ie,te,_e)=>{var Ee=ss(),Fe=t(Ee);Ie(Fe,21,()=>Object.entries(Ea),Ce,(at,wt)=>{var Be=ta(()=>fa(a(wt),2));let rt=()=>a(Be)[0],xt=()=>a(Be)[1];var dt=rs(),Ue=t(dt,!0);e(dt);var Te={};O(()=>{h(Ue,xt()),Te!==(Te=rt())&&(dt.value=(dt.__value=rt())??"")}),i(at,dt)}),e(Fe);var He=r(Fe,2),nt=t(He),Ge={},et=r(nt),mt={},tt=r(et),It={};e(He);var Ve=r(He,2);Me(Ve);var bt=r(Ve,2);bt.__click=()=>z(_e);var ht=t(bt);Vt(ht,{size:12}),e(bt),e(Ee),O(()=>{Ge!==(Ge=Dt.ADD)&&(nt.value=(nt.__value=Dt.ADD)??""),mt!==(mt=Dt.SET)&&(et.value=(et.__value=Dt.SET)??""),It!==(It=Dt.MULT)&&(tt.value=(tt.__value=Dt.MULT)??""),Pe(Ve,"step",a(te).type===Dt.MULT?"0.1":"1")}),Gt(Fe,()=>a(te).target,at=>a(te).target=at),Gt(He,()=>a(te).type,at=>a(te).type=at),ge(Ve,()=>a(te).value,at=>a(te).value=at),i(ie,Ee)}),e(je),e(E);var S=r(E,2);{var X=ie=>{var te=os(),_e=t(te),Ee=r(t(_e));Xt(Ee),e(_e),e(te),ge(Ee,()=>a(u).description,Fe=>a(u).description=Fe),i(ie,te)};g(S,ie=>{s().data?.parentType||ie(X)})}var M=r(S,2);M.__click=d,e(me),Gt(R,()=>a(u).duration,ie=>a(u).duration=ie),i(oe,me)},re=oe=>{var me=ae(),$e=U(me);{var ke=Ae=>{var ze=ls(),R=t(ze),K=t(R,!0);e(R);var q=r(R,2),E=t(q),I=r(t(E));Me(I),e(E),e(q);var pe=r(q,2);pe.__click=j,e(ze),O(()=>h(K,a(o).name)),ge(I,()=>a(o).value,we=>a(o).value=we),i(Ae,ze)},xe=Ae=>{var ze=ae(),R=U(ze);{var K=E=>{var I=ns(),pe=t(I),we=t(pe,!0);e(pe);var je=r(pe,2),S=t(je),X=r(t(S));Me(X),e(S),e(je);var M=r(je,2);M.__click=w,e(I),O(()=>h(we,a(o).name)),ge(X,()=>a(o).value,ie=>a(o).value=ie),i(E,I)},q=E=>{var I=ae(),pe=U(I);{var we=S=>{var X=ds(),M=t(X),ie=t(M),te=t(ie),_e=r(t(te));Me(_e),e(te),e(ie);var Ee=r(ie,2),Fe=t(Ee),He=r(t(Fe));Me(He),e(Fe),e(Ee),e(M);var nt=r(M,2),Ge=t(nt),et=r(t(Ge));Me(et),e(Ge),e(nt);var mt=r(nt,2);mt.__click=H,e(X),ge(_e,()=>a(o).nh,tt=>a(o).nh=tt),ge(He,()=>a(o).ch,tt=>a(o).ch=tt),ge(et,()=>a(o).d,tt=>a(o).d=tt),i(S,X)},je=S=>{var X=ae(),M=U(X);{var ie=_e=>{var Ee=vs(),Fe=t(Ee),He=t(Fe),nt=r(t(He));Me(nt),e(He),e(Fe);var Ge=r(Fe,2),et=t(Ge),mt=t(et),tt=r(t(mt));Me(tt),e(mt),e(et);var It=r(et,2),Ve=t(It),bt=r(t(Ve));Me(bt),e(Ve),e(It),e(Ge);var ht=r(Ge,2),at=t(ht),wt=t(at),Be=r(t(wt));Me(Be),e(wt),e(at);var rt=r(at,2),xt=t(rt),dt=r(t(xt));Me(dt),e(xt),e(rt);var Ue=r(rt,2),Te=t(Ue),Re=r(t(Te));Me(Re),e(Te),e(Ue),e(ht);var $t=r(ht,2);$t.__click=G,e(Ee),ge(nt,()=>a(o).name,qe=>a(o).name=qe),ge(tt,()=>a(o).level,qe=>a(o).level=qe),ge(bt,()=>a(o).ancestry,qe=>a(o).ancestry=qe),ge(Be,()=>a(o).novicePath,qe=>a(o).novicePath=qe),ge(dt,()=>a(o).expertPath,qe=>a(o).expertPath=qe),ge(Re,()=>a(o).masterPath,qe=>a(o).masterPath=qe),i(_e,Ee)},te=_e=>{var Ee=ae(),Fe=U(Ee);{var He=Ge=>{var et=bs(),mt=t(et),tt=t(mt),It=t(tt,!0);e(tt);var Ve=r(tt,2),bt=t(Ve,!0);e(Ve);var ht=r(Ve,2);{var at=Ue=>{var Te=cs(),Re=r(t(Te),2),$t=t(Re);e(Re),e(Te),O(()=>h($t,`${s().data.effect.name??""}: ${s().data.effect.description??""}`)),i(Ue,Te)};g(ht,Ue=>{s().data.effect&&Ue(at)})}e(mt);var wt=r(mt,2),Be=t(wt);{var rt=Ue=>{var Te=ps(),Re=U(Te);Re.__click=()=>{fe.applyEffectToCharacter(s().data.effect,s().data),s().type==="confirm_spell"?fe.commitSpellCast(s().data):fe.commitTalentUse(s().data)};var $t=t(Re);ka($t,{size:18}),be(),e(Re);var qe=r(Re,2);qe.__click=()=>{s().type==="confirm_spell"?fe.commitSpellCast(s().data):fe.commitTalentUse(s().data)},i(Ue,Te)},xt=Ue=>{var Te=us();Te.__click=()=>{s().type==="confirm_spell"?fe.commitSpellCast(s().data):fe.commitTalentUse(s().data)};var Re=t(Te);Et(Re,{size:18}),be(),e(Te),i(Ue,Te)};g(Be,Ue=>{s().data.effect?Ue(rt):Ue(xt,!1)})}var dt=r(Be,2);dt.__click=_,e(wt),e(et),O(()=>{h(It,s().data.name),h(bt,s().data.description)}),i(Ge,et)},nt=Ge=>{var et=ae(),mt=U(et);{var tt=Ve=>{var bt=xs(),ht=t(bt),at=t(ht);Vt(at,{size:48,class:"text-indigo-400"}),e(ht);var wt=r(ht,4),Be=t(wt);Be.__click=_;var rt=r(Be);rt.__click=function(...xt){fe.confirmRest?.apply(this,xt)},e(wt),e(bt),i(Ve,bt)},It=Ve=>{var bt=ae(),ht=U(bt);{var at=Be=>{var rt=fs(),xt=r(t(rt),2),dt=t(xt),Ue=t(dt);Ue.__click=()=>_a(b,-1);var Te=t(Ue);Zt(Te,{size:24}),e(Ue);var Re=r(Ue,2),$t=t(Re);e(Re);var qe=r(Re,2);qe.__click=()=>_a(b);var Kt=t(qe);ct(Kt,{size:24}),e(qe),e(dt);var yt=r(dt,2),Tt=t(yt,!0);e(yt),e(xt);var Mt=r(xt,2);Mt.__click=()=>fe.finalizeRoll(s().data,a(b),f().filter(Se=>a(P).includes(Se.id)).map(Se=>Se.name)),e(rt),O(()=>{ue(Re,1,`text-4xl font-bold ${a(b)>0?"text-green-400":a(b)<0?"text-red-400":"text-slate-500"}`),h($t,`${a(b)>0?"+":""}${a(b)??""}`),h(Tt,s().data.type==="weapon_damage"?"Dados Extras":"Boons/Banes")}),i(Be,rt)},wt=Be=>{var rt=ae(),xt=U(rt);{var dt=Te=>{var Re=_s(),$t=t(Re),qe=t($t),Kt=t(qe,!0);e(qe);var yt=r(qe,2),Tt=t(yt,!0);e(yt),e($t);var Mt=r($t,2),Se=t(Mt);Se.__click=()=>Le.update(zt=>({...zt,type:"pre_roll",data:{type:"weapon_attack",source:s().data}}));var kt=t(Se),At=t(kt);Et(At,{size:24}),e(kt),be(2),e(Se);var ft=r(Se,2);ft.__click=()=>Le.update(zt=>({...zt,type:"pre_roll",data:{type:"weapon_damage",source:s().data}}));var Pt=t(ft),We=t(Pt);ct(We,{size:24}),e(Pt),be(2),e(ft),e(Mt);var st=r(Mt,2);st.__click=_,e(Re),O(()=>{h(Kt,s().data.name),h(Tt,s().data.traits||"Sem Atributos")}),i(Te,Re)},Ue=Te=>{var Re=ae(),$t=U(Re);{var qe=yt=>{var Tt=ys();Ie(Tt,5,()=>n().talents,Ce,(Mt,Se)=>{var kt=$s();kt.__click=()=>Le.update(Ye=>({...Ye,type:"confirm_talent",data:a(Se)}));var At=t(kt),ft=t(At),Pt=t(ft);Et(Pt,{size:20}),e(ft);var We=r(ft,2),st=t(We),zt=t(st,!0);e(st);var jt=r(st,2),Ut=t(jt,!0);e(jt),e(We),e(At);var Ct=r(At,2),Ot=t(Ct);{var Qt=Ye=>{var ot=gs();i(Ye,ot)},Lt=Ye=>{var ot=hs(),vt=r(U(ot),2);Ie(vt,21,()=>Array(a(Se).maxUses),Ce,(Ht,Nt,qa)=>{var xa=ms();O(()=>ue(xa,1,`w-1.5 h-1.5 rounded-full ${qa<a(Se).uses?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.5)]":"bg-slate-700"}`)),i(Ht,xa)}),e(vt);var _t=r(vt,2),Ft=t(_t);e(_t),O(()=>{ue(_t,1,`font-mono font-bold text-xs ${a(Se).uses>0?"text-green-400":"text-red-400"}`),h(Ft,`${a(Se).uses??""}/${a(Se).maxUses??""}`)}),i(Ye,ot)};g(Ot,Ye=>{a(Se).isPassive?Ye(Qt):Ye(Lt,!1)})}e(Ct),e(kt),O(()=>{kt.disabled=!a(Se).isPassive&&a(Se).maxUses>0&&a(Se).uses===0,h(zt,a(Se).name),h(Ut,a(Se).description)}),i(Mt,kt)},Mt=>{var Se=ws(),kt=t(Se);Et(kt,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"}),be(2),e(Se),i(Mt,Se)}),e(Tt),i(yt,Tt)},Kt=yt=>{var Tt=ae(),Mt=U(Tt);{var Se=At=>{var ft=Ss();Ie(ft,5,()=>n().spells,Ce,(Pt,We)=>{var st=As();st.__click=()=>Le.update(_t=>({..._t,type:"confirm_spell",data:a(We)}));var zt=t(st),jt=t(zt),Ut=t(jt);ia(Ut,{size:20}),e(jt);var Ct=r(jt,2),Ot=t(Ct),Qt=t(Ot,!0);e(Ot);var Lt=r(Ot,2),Ye=t(Lt);e(Lt),e(Ct),e(zt);var ot=r(zt,2),vt=r(t(ot),2);Ie(vt,21,()=>Array(a(We).maxCastings),Ce,(_t,Ft,Ht)=>{var Nt=ks();O(()=>ue(Nt,1,`w-3 h-1 rounded-full ${Ht<a(We).castings?"bg-indigo-500":"bg-slate-700"}`)),i(_t,Nt)}),e(vt),e(ot),e(st),O(()=>{st.disabled=a(We).castings===0,h(Qt,a(We).name),h(Ye,`${a(We).tradition??""} • ${a(We).tier??""}`)}),i(Pt,st)},Pt=>{var We=zs(),st=t(We);ia(st,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"}),be(2),e(We),i(Pt,We)}),e(ft),i(At,ft)},kt=At=>{var ft=ae(),Pt=U(ft);{var We=st=>{var zt=Es(),jt=U(zt);Ie(jt,21,()=>Object.keys(wa),Ce,(Ye,ot)=>{var vt=Ms();vt.__click=()=>fe.toggleAffliction(a(ot));var _t=t(vt),Ft=r(_t);{var Ht=Nt=>{ka(Nt,{size:14})};g(Ft,Nt=>{n().afflictions.includes(a(ot))&&Nt(Ht)})}e(vt),O(Nt=>{ue(vt,1,`p-3 rounded-lg border text-sm font-bold transition-all text-left flex justify-between items-center ${Nt??""}`),h(_t,`${a(ot)??""} `)},[()=>n().afflictions.includes(a(ot))?"bg-red-900/40 border-red-500 text-red-200 shadow-lg shadow-red-900/20":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-500 hover:bg-slate-850"]),i(Ye,vt)}),e(jt);var Ut=r(jt,2),Ct=r(t(Ut),2),Ot=t(Ct);Ie(Ot,1,()=>n().afflictions,Ce,(Ye,ot)=>{var vt=Ns(),_t=t(vt),Ft=t(_t);e(_t);var Ht=r(_t,2),Nt=t(Ht,!0);e(Ht),e(vt),O(()=>{h(Ft,`${a(ot)??""}:`),h(Nt,wa[a(ot)]?.effect||"")}),i(Ye,vt)});var Qt=r(Ot,2);{var Lt=Ye=>{var ot=Ds();i(Ye,ot)};g(Qt,Ye=>{n().afflictions.length===0&&Ye(Lt)})}e(Ct),e(Ut),i(st,zt)};g(Pt,st=>{s().type==="affliction"&&st(We)},!0)}i(At,ft)};g(Mt,At=>{s().type==="cast_spell"?At(Se):At(kt,!1)},!0)}i(yt,Tt)};g($t,yt=>{s().type==="select_talent"?yt(qe):yt(Kt,!1)},!0)}i(Te,Re)};g(xt,Te=>{s().type==="weapon_menu"?Te(dt):Te(Ue,!1)},!0)}i(Be,rt)};g(ht,Be=>{s().type==="pre_roll"?Be(at):Be(wt,!1)},!0)}i(Ve,bt)};g(mt,Ve=>{s().type==="rest_confirm"?Ve(tt):Ve(It,!1)},!0)}i(Ge,et)};g(Fe,Ge=>{s().type==="confirm_spell"||s().type==="confirm_talent"?Ge(He):Ge(nt,!1)},!0)}i(_e,Ee)};g(M,_e=>{s().type==="character_info"?_e(ie):_e(te,!1)},!0)}i(S,X)};g(pe,S=>{s().type==="health"?S(we):S(je,!1)},!0)}i(E,I)};g(R,E=>{s().type==="stat"?E(K):E(q,!1)},!0)}i(Ae,ze)};g($e,Ae=>{s().type==="attribute"?Ae(ke):Ae(xe,!1)},!0)}i(oe,me)};g(Ne,oe=>{s().type==="effect"?oe(De):oe(re,!1)},!0)}i(ce,ye)};g(se,ce=>{s().type==="talent"?ce(he):ce(ve,!1)},!0)}i(F,ee)};g(Z,F=>{s().type==="spell"?F(L):F(Y,!1)},!0)}i(y,Q)};g(ne,y=>{s().type==="item"?y(de):y(B,!1)})}e(J),i(D,J)},$$slots:{default:!0}})}lt(),W()}pt(["click","input"]);var js=l("<div> </div>"),Is=l('<div class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 text-center transition-all hover:bg-slate-800 active:scale-[0.98] group relative shadow-lg shadow-black/20 cursor-pointer" role="button" tabindex="0"><div class="py-2.5 px-2"><div class="text-[9px] uppercase text-slate-500 font-black tracking-widest group-hover:text-indigo-400 transition-colors mb-1"> </div> <div class="flex items-center justify-center gap-1.5 mb-1.5"><div class="text-2xl font-black text-white leading-none"> </div> <!></div> <div class="inline-flex px-2 py-0.5 bg-indigo-500/10 rounded-lg"><div class="text-xs text-indigo-400 font-black tracking-tight"> </div></div></div> <button class="absolute top-1.5 right-1.5 p-1 text-slate-700 hover:text-white hover:bg-white/5 rounded-md transition-all"><!></button></div>'),Cs=l('<div class="grid grid-cols-2 gap-3"></div>');function Ia(A,c){it(c,!1);const s=()=>le(Oe,"$character",m),p=()=>le(Xa,"$derivedStats",m),[m,k]=ut();function n(o,u){Le.update(b=>({...b,type:o,isOpen:!0,data:u}))}function f(o){n("pre_roll",{type:"attribute",source:o})}function C(o,u){o.stopPropagation(),n("attribute",u)}gt();var W=Cs();Ie(W,5,()=>s().attributes,Ce,(o,u)=>{var b=Is();b.__click=()=>f(a(u));var P=t(b),_=t(P),x=t(_,!0);e(_);var $=r(_,2),T=t($),d=t(T,!0);e(T);var j=r(T,2);{var H=D=>{var V=js(),J=t(V);e(V),O(()=>{ue(V,1,`text-[11px] font-bold ${p()[a(u).key]>a(u).value?"text-green-500 bg-green-500/10":"text-red-500 bg-red-500/10"} px-1 rounded-md`),h(J,`${p()[a(u).key]>a(u).value?"+":""}${p()[a(u).key]-a(u).value}`)}),i(D,V)};g(j,D=>{p()[a(u).key]!==a(u).value&&D(H)})}e($);var G=r($,2),w=t(G),N=t(w);e(w),e(G),e(P);var z=r(P,2);z.__click=D=>C(D,a(u));var v=t(z);ea(v,{size:12}),e(z),e(b),O(()=>{Pe(b,"aria-label",`Rolar teste de ${a(u).name}`),h(x,a(u).name),h(d,p()[a(u).key]),h(N,`+${p()[a(u).key]-10}`),Pe(z,"aria-label",`Editar ${a(u).name??""}`)}),i(o,b)}),e(W),i(A,W),lt(),k()}pt(["click"]);var Os=l('<div class="p-1 bg-red-500/10 rounded"><!></div>'),Hs=l('<div class="space-y-3"><div class="grid grid-cols-2 gap-3"><button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> Defesa</div> <div class="flex items-baseline gap-1"><span class="text-3xl font-black text-white leading-none"> </span></div></button> <button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> Speed</div> <div class="flex items-baseline justify-between w-full"><span> </span> <!></div></button></div> <div class="bg-slate-900 rounded-2xl border border-slate-800 p-4 shadow-lg shadow-black/20"><span class="text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] flex items-center gap-2"><!> Bônus de Dano</span> <div class="flex items-center justify-between bg-black/40 rounded-xl p-1.5 border border-white/5"><button class="w-10 h-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg transition-all active:scale-90" aria-label="Diminuir Dano Bônus"><!></button> <div class="flex flex-col items-center"><span class="text-2xl font-black text-white leading-none tracking-tighter"> </span> <span class="text-[9px] text-slate-600 font-bold uppercase mt-1">Dados Extras</span></div> <button class="w-10 h-10 flex items-center justify-center bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-all active:scale-90 shadow-lg shadow-indigo-500/20" aria-label="Aumentar Dano Bônus"><!></button></div></div></div>');function Ca(A,c){it(c,!1);const s=()=>le(pa,"$totalDefense",k),p=()=>le(Ja,"$effectiveSpeed",k),m=()=>le(Oe,"$character",k),[k,n]=ut();function f(F,ee){Le.update(se=>({...se,type:F,isOpen:!0,data:ee}))}function C(){Oe.update(F=>({...F,bonusDamage:Math.max(0,(F.bonusDamage||0)-1)}))}function W(){Oe.update(F=>({...F,bonusDamage:(F.bonusDamage||0)+1}))}gt();var o=Hs(),u=t(o),b=t(u);b.__click=()=>f("stat","defense");var P=t(b),_=t(P);ur(_,{size:12}),be(),e(P);var x=r(P,2),$=t(x),T=t($,!0);e($),e(x),e(b);var d=r(b,2);d.__click=()=>f("stat","speed");var j=t(d),H=t(j);Et(H,{size:12}),be(),e(j);var G=r(j,2),w=t(G),N=t(w,!0);e(w);var z=r(w,2);{var v=F=>{var ee=Os(),se=t(ee);oa(se,{size:10,class:"text-red-500"}),e(ee),i(F,ee)};g(z,F=>{p()<m().speed&&F(v)})}e(G),e(d),e(u);var D=r(u,2),V=t(D),J=t(V);sa(J,{size:14,class:"text-indigo-500"}),be(),e(V);var ne=r(V,2),de=t(ne);de.__click=C;var B=t(de);Zt(B,{size:18}),e(de);var y=r(de,2),Q=t(y),Z=t(Q);e(Q),be(2),e(y);var L=r(y,2);L.__click=W;var Y=t(L);ct(Y,{size:18}),e(L),e(ne),e(D),e(o),O(()=>{h(T,s()),ue(w,1,`text-3xl font-black ${p()<m().speed?"text-red-400":"text-white"} leading-none`),h(N,p()),h(Z,`${(m().bonusDamage||0)??""}d6`)}),i(A,o),lt(),n()}pt(["click"]);var Rs=l('<div class="bg-slate-900 p-3 rounded-2xl border border-slate-800 shadow-xl shadow-black/20"><div class="flex justify-between items-center mb-3"><h4 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-1.5"><!> Moedas</h4></div> <div class="grid grid-cols-3 gap-2"><div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-yellow-500 font-black uppercase tracking-tight relative z-10">GP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir GP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar GP"><!></button></div></div> <div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-slate-300 font-black uppercase tracking-tight relative z-10">SP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir SP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar SP"><!></button></div></div> <div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-orange-700/80 font-black uppercase tracking-tight relative z-10">CP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir CP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar CP"><!></button></div></div></div></div>');function Oa(A,c){it(c,!1);const s=()=>le(Oe,"$character",p),[p,m]=ut(),{updateCurrency:k}=fe;gt();var n=Rs(),f=t(n),C=t(f),W=t(C);fr(W,{size:14,class:"text-yellow-500"}),be(),e(C),e(f);var o=r(f,2),u=t(o),b=r(t(u),2),P=t(b);P.__click=()=>k("gp",-1);var _=t(P);Zt(_,{size:14}),e(P);var x=r(P,2),$=t(x,!0);e(x);var T=r(x,2);T.__click=()=>k("gp",1);var d=t(T);ct(d,{size:14}),e(T),e(b),e(u);var j=r(u,2),H=r(t(j),2),G=t(H);G.__click=()=>k("sp",-1);var w=t(G);Zt(w,{size:14}),e(G);var N=r(G,2),z=t(N,!0);e(N);var v=r(N,2);v.__click=()=>k("sp",1);var D=t(v);ct(D,{size:14}),e(v),e(H),e(j);var V=r(j,2),J=r(t(V),2),ne=t(J);ne.__click=()=>k("cp",-1);var de=t(ne);Zt(de,{size:14}),e(ne);var B=r(ne,2),y=t(B,!0);e(B);var Q=r(B,2);Q.__click=()=>k("cp",1);var Z=t(Q);ct(Z,{size:14}),e(Q),e(J),e(V),e(o),e(n),O(()=>{h($,s().currency.gp),h(z,s().currency.sp),h(y,s().currency.cp)}),i(A,n),lt(),m()}pt(["click"]);var qs=l('<div class="bg-slate-950 border border-slate-700 text-slate-200 px-3 py-1.5 rounded-xl text-sm font-bold flex items-center gap-2 group transition-all hover:border-indigo-500/50"> <button class="text-slate-500 hover:text-red-400 p-1 rounded-full hover:bg-red-400/10 transition-all"><!></button></div>'),Us=l('<span class="text-sm text-slate-500 italic py-2 px-1">Nenhum idioma registrado.</span>'),Ls=l('<div class="bg-slate-900 p-4 rounded-2xl border border-slate-800 shadow-xl shadow-black/20"><div class="flex justify-between items-center mb-4"><h4 class="text-xs font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-2"><!> Idiomas</h4></div> <div class="flex flex-wrap gap-2 mb-4"><!> <!></div> <div class="relative group"><input type="text" placeholder="Adicionar novo idioma..." class="w-full bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500 transition-all placeholder:text-slate-600 focus:ring-1 focus:ring-indigo-500/20" aria-label="Adicionar novo idioma"/> <div class="absolute right-3 top-1/2 -translate-y-1/2 p-1.5 bg-slate-800 rounded-lg text-slate-500 group-focus-within:text-indigo-400 group-focus-within:bg-indigo-400/10 transition-all"><!></div></div></div>');function Ha(A,c){it(c,!1);const s=()=>le(Oe,"$character",p),[p,m]=ut(),{addLanguage:k,removeLanguage:n}=fe;function f(H){if(H.key==="Enter"){const G=H.target,w=G.value.trim();w!==""&&(k(w),G.value="")}}gt();var C=Ls(),W=t(C),o=t(W),u=t(o);hr(u,{size:16,class:"text-indigo-500"}),be(),e(o),e(W);var b=r(W,2),P=t(b);Ie(P,1,()=>s().languages,Ce,(H,G,w)=>{var N=qs(),z=t(N),v=r(z);v.__click=()=>n(w);var D=t(v);ja(D,{size:14}),e(v),e(N),O(()=>{h(z,`${a(G)??""} `),Pe(v,"aria-label",`Remover idioma ${a(G)??""}`)}),i(H,N)});var _=r(P,2);{var x=H=>{var G=Us();i(H,G)};g(_,H=>{s().languages.length===0&&H(x)})}e(b);var $=r(b,2),T=t($);T.__keydown=f;var d=r(T,2),j=t(d);ct(j,{size:16}),e(d),e($),e(C),i(A,C),lt(),m()}pt(["click","keydown"]);var Fs=l('<span class="text-xs text-slate-500 italic">Nenhuma aflição ativa.</span>'),Gs=l('<div class="group relative"><div class="text-xs bg-red-900/30 border border-red-700 text-red-200 px-2 py-1 rounded flex items-center gap-1 cursor-help" title="Aflição Ativa"> <button class="ml-1 text-red-400 hover:text-white"><!></button></div></div>'),Vs=l('<div class="bg-slate-900 p-3 rounded-xl border border-slate-800"><div class="flex justify-between items-center mb-2"><h4 class="text-[10px] font-bold text-slate-400 uppercase flex items-center gap-1"><!> Aflições</h4> <button class="text-slate-500 hover:text-white" aria-label="Adicionar Aflição"><!></button></div> <div class="flex flex-wrap gap-2"><!> <!></div></div>');function Ra(A,c){it(c,!1);const s=()=>le(Oe,"$character",p),[p,m]=ut(),{toggleAffliction:k}=fe;function n(){Le.update(d=>({...d,type:"affliction",isOpen:!0}))}function f(d,j){d.stopPropagation(),k(j)}gt();var C=Vs(),W=t(C),o=t(W),u=t(o);oa(u,{size:12}),be(),e(o);var b=r(o,2);b.__click=n;var P=t(b);ct(P,{size:14}),e(b),e(W);var _=r(W,2),x=t(_);{var $=d=>{var j=Fs();i(d,j)};g(x,d=>{s().afflictions.length===0&&d($)})}var T=r(x,2);Ie(T,1,()=>s().afflictions,Ce,(d,j)=>{var H=Gs(),G=t(H),w=t(G),N=r(w);N.__click=v=>f(v,a(j));var z=t(N);ja(z,{size:10}),e(N),e(G),e(H),O(()=>{h(w,`${a(j)??""} `),Pe(N,"aria-label",`Remover aflição ${a(j)??""}`)}),i(d,H)}),e(_),e(C),i(A,C),lt(),m()}pt(["click"]);var Bs=l('<button role="tab"><!> <span class="text-[9px] font-bold uppercase tracking-wide"> </span></button>'),Ws=l('<div class="absolute inset-x-0 bottom-0 h-0.5 bg-indigo-400 shadow-[0_0_8px_rgba(129,140,248,0.5)]"></div>'),Ys=l('<button role="tab"><!> <span class="tracking-widest uppercase"> </span> <!></button>'),Ks=l('<div class="md:hidden fixed bottom-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-lg border-t border-slate-800 safe-area-pb" role="tablist"><div class="flex justify-around items-center py-2"></div></div> <div class="hidden md:flex bg-slate-900/80 backdrop-blur-md border-b border-slate-800 overflow-x-auto no-scrollbar sticky top-[60px] z-30" role="tablist"></div> <div class="h-4 bg-slate-950 hidden md:block"></div>',1);function Qs(A,c){it(c,!1);const s=()=>le(ra,"$activeTab",p),[p,m]=ut(),k=[{id:"acoes",label:"AÇÕES",icon:sa},{id:"magias",label:"MAGIAS",icon:za},{id:"talentos",label:"TALENTOS",icon:Et},{id:"equipamento",label:"ITENS",icon:Aa},{id:"notas",label:"NOTAS",icon:Sa},{id:"efeitos",label:"EFEITOS",icon:oa}],n=[{id:"stats",label:"STATS",icon:yr},{id:"acoes",label:"AÇÕES",icon:sa},{id:"magias",label:"MAGIAS",icon:za},{id:"talentos",label:"TALENTOS",icon:Et},{id:"equipamento",label:"ITENS",icon:Aa},{id:"notas",label:"NOTAS",icon:Sa},{id:"efeitos",label:"EFEITOS",icon:oa}];gt();var f=Ks(),C=U(f),W=t(C);Ie(W,5,()=>n,Ce,(u,b)=>{var P=Bs();P.__click=()=>ra.set(a(b).id);var _=t(P);{let T=ga(()=>s()===a(b).id?"text-indigo-400":"text-slate-500");a(b).icon(_,{size:20,get class(){return a(T)}})}var x=r(_,2),$=t(x,!0);e(x),e(P),O(()=>{ue(P,1,`flex flex-col items-center gap-0.5 px-3 py-2 transition-all ${s()===a(b).id?"text-indigo-400":"text-slate-500"}`),Pe(P,"aria-selected",s()===a(b).id),h($,a(b).label)}),i(u,P)}),e(W),e(C);var o=r(C,2);Ie(o,5,()=>k,Ce,(u,b)=>{var P=Ys();P.__click=()=>ra.set(a(b).id);var _=t(P);{let j=ga(()=>s()===a(b).id?"text-indigo-400":"text-slate-500");a(b).icon(_,{size:14,get class(){return`${a(j)??""} group-hover:scale-110 transition-transform`}})}var x=r(_,2),$=t(x,!0);e(x);var T=r(x,2);{var d=j=>{var H=Ws();i(j,H)};g(T,j=>{s()===a(b).id&&j(d)})}e(P),O(()=>{ue(P,1,`px-5 lg:px-6 py-4 flex items-center gap-2 font-black text-xs transition-all whitespace-nowrap border-b-2 relative group ${s()===a(b).id?"text-indigo-400 border-indigo-500 bg-indigo-500/5":"text-slate-500 border-transparent hover:text-slate-300"}`),Pe(P,"aria-selected",s()===a(b).id),h($,a(b).label)}),i(u,P)}),e(o),be(2),i(A,f),lt(),m()}pt(["click"]);var Xs=l('<span class="text-[10px] bg-indigo-900 text-indigo-200 px-1 rounded uppercase"> </span>'),Js=l('<button class="text-xs bg-red-900/50 text-red-200 px-3 py-1 rounded border border-red-800 hover:bg-red-900 flex items-center gap-1"><!> </button>'),Zs=l('<div class="flex flex-col sm:flex-row justify-between p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-900 cursor-pointer transition-colors gap-4 active:scale-[0.99]" role="button" tabindex="0"><div class="flex items-start gap-3"><div class="bg-slate-800 p-2 rounded text-slate-400 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2"> <!></p> <p class="text-xs text-slate-500"> </p></div></div> <div class="flex flex-col items-end gap-2"><div class="flex items-center gap-4 bg-slate-900 p-2 rounded-lg border border-slate-800"><div class="text-center px-2"><span class="block text-[10px] font-bold text-slate-500 uppercase">Dano</span> <span class="text-xl font-mono text-white font-bold"> </span></div></div> <!></div></div>'),eo=l('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-500 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-indigo-900/50 p-2 rounded text-indigo-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-indigo-300 transition-colors">Conjurar Magia</p> <p class="text-xs text-slate-500">Selecione uma magia do grimório para lançar.</p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-indigo-400 uppercase tracking-wider border border-slate-800">Selecionar</div></div></div>'),to=l('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-yellow-600 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-yellow-900/30 p-2 rounded text-yellow-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-yellow-300 transition-colors">Usar Talento</p> <p class="text-xs text-slate-500">Ative uma habilidade ou talento especial.</p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-yellow-500 uppercase tracking-wider border border-slate-800">Selecionar</div></div></div>'),ao=l('<div class="space-y-4"><!> <!> <!></div>');function ro(A,c){it(c,!1);const s=()=>le(Oe,"$character",p),[p,m]=ut(),{useConsumable:k}=fe;function n(_,x=null){Le.update($=>({...$,type:_,isOpen:!0,data:x}))}function f(_,x){_.stopPropagation(),k(x)}gt();var C=ao(),W=t(C);Ie(W,1,()=>s().equipment.filter(_=>_.type===St.WEAPON&&_.equippedState||_.type===St.EXPLOSIVE),Ce,(_,x)=>{var $=Zs();$.__click=()=>n("weapon_menu",a(x));var T=t($),d=t(T),j=t(d);sa(j,{size:20}),e(d);var H=r(d,2),G=t(H),w=t(G),N=r(w);{var z=Z=>{var L=Xs(),Y=t(L,!0);e(L),O(()=>h(Y,a(x).equippedState)),i(Z,L)};g(N,Z=>{a(x).equippedState&&Z(z)})}e(G);var v=r(G,2),D=t(v);e(v),e(H),e(T);var V=r(T,2),J=t(V),ne=t(J),de=r(t(ne),2),B=t(de);e(de),e(ne),e(J);var y=r(J,2);{var Q=Z=>{var L=Js();L.__click=ee=>f(ee,a(x));var Y=t(L);xr(Y,{size:12});var F=r(Y);e(L),O(()=>{Pe(L,"aria-label",`Usar ${a(x).name??""}`),h(F,` Throw (${a(x).quantity??""})`)}),i(Z,L)};g(y,Z=>{a(x).type===St.EXPLOSIVE&&Z(Q)})}e(V),e($),O(()=>{Pe($,"aria-label",`Opções para ${a(x).name??""}`),h(w,`${a(x).name??""} `),h(D,`${(a(x).traits||"-")??""} • ${(a(x).range||"-")??""}`),h(B,`${(a(x).damageDice||0)??""}d6`)}),i(_,$)});var o=r(W,2);{var u=_=>{var x=eo();x.__click=()=>n("cast_spell");var $=t(x),T=t($),d=t(T);ia(d,{size:20}),e(T),be(2),e($),be(2),e(x),i(_,x)};g(o,_=>{s().spells.length>0&&_(u)})}var b=r(o,2);{var P=_=>{var x=to();x.__click=()=>n("select_talent");var $=t(x),T=t($),d=t(T);Et(d,{size:20}),e(T),be(2),e($),be(2),e(x),i(_,x)};g(b,_=>{s().talents.length>0&&_(P)})}e(C),i(A,C),lt(),m()}pt(["click"]);var so=l('<div class="p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl group hover:border-indigo-500/50 transition-all duration-300"><div class="flex justify-between items-start mb-3"><div><div class="font-bold text-white text-lg group-hover:text-indigo-300 transition-colors uppercase tracking-tight"> </div> <div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div></div> <button class="text-slate-600 hover:text-white p-1 hover:bg-slate-800 rounded-md transition-all"><!></button></div> <div class="text-sm text-slate-400 mb-4 line-clamp-2 leading-relaxed h-10"> </div> <div class="flex items-center justify-between bg-slate-950/50 p-3 rounded-xl border border-slate-800/50"><span class="text-[10px] font-black text-slate-500 uppercase tracking-widest">Usos Mágicos</span> <div class="flex items-center gap-3"><span> </span> <button class="bg-indigo-600 disabled:opacity-20 text-white text-[10px] font-black px-4 py-1.5 rounded-lg hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-900/40 active:scale-95 uppercase tracking-wider">Cast</button></div></div></div>'),oo=l('<div class="space-y-3"><h4 class="text-[10px] font-black text-indigo-400 uppercase tracking-[0.2em] flex items-center gap-2"><span class="w-8 h-px bg-indigo-500/30"></span> <span class="flex-1 h-px bg-indigo-500/30"></span></h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div>'),io=l('<div class="text-center py-16 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium">Seu grimório está vazio.</p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> Adicionar Primeira Magia</button></div>'),lo=l('<div class="space-y-8"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight">Grimório Arcano</h3> <p class="text-xs text-slate-500">Seus feitiços e magias conhecidas.</p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95" aria-label="Adicionar Nova Magia"><!> Nova Magia</button></div> <!> <!></div>');function no(A,c){it(c,!1);const s=()=>le(Oe,"$character",p),[p,m]=ut();function k(P,_=null){Le.update(x=>({...x,type:P,isOpen:!0,data:_}))}gt();var n=lo(),f=t(n),C=r(t(f),2);C.__click=()=>k("spell");var W=t(C);ct(W,{size:16}),be(),e(C),e(f);var o=r(f,2);Ie(o,0,()=>["Novice","Expert","Master"],Ce,(P,_)=>{var x=ae(),$=U(x);{var T=d=>{var j=oo(),H=t(j),G=r(t(H));be(),e(H);var w=r(H,2);Ie(w,5,()=>s().spells.filter(N=>N.tier===_),Ce,(N,z)=>{var v=so(),D=t(v),V=t(D),J=t(V),ne=t(J,!0);e(J);var de=r(J,2),B=t(de);e(de),e(V);var y=r(V,2);y.__click=()=>k("spell",a(z));var Q=t(y);ea(Q,{size:14}),e(y),e(D);var Z=r(D,2),L=t(Z,!0);e(Z);var Y=r(Z,2),F=r(t(Y),2),ee=t(F),se=t(ee);e(ee);var he=r(ee,2);he.__click=()=>k("confirm_spell",a(z)),e(F),e(Y),e(v),O(()=>{h(ne,a(z).name),h(B,`${a(z).tradition??""} • ${a(z).type??""}`),Pe(y,"aria-label",`Editar ${a(z).name??""}`),h(L,a(z).description),ue(ee,1,`text-sm font-mono font-bold ${a(z).castings===0?"text-red-500":"text-indigo-400"}`),h(se,`${a(z).castings??""}/${a(z).maxCastings??""}`),he.disabled=a(z).castings===0}),i(N,v)}),e(w),e(j),O(()=>h(G,` ${_??""} Spells `)),i(d,j)};g($,d=>{s().spells.some(j=>j.tier===_)&&d(T)})}i(P,x)});var u=r(o,2);{var b=P=>{var _=io(),x=t(_);ia(x,{size:48,class:"mx-auto text-slate-800 mb-3"});var $=r(x,4);$.__click=()=>k("spell");var T=t($);ct(T,{size:14}),be(),e($),e(_),i(P,_)};g(u,P=>{s().spells.length===0&&P(b)})}e(n),i(A,n),lt(),m()}pt(["click"]);var vo=l('<div class="text-2xl font-mono font-bold text-white leading-tight"> </div>'),co=l('<div class="text-sm font-bold text-slate-500 uppercase tracking-tighter mt-1 italic">Fora de Combate</div>'),po=l('<div class="text-center text-slate-500 italic py-4">Nenhum efeito ativo.</div>'),uo=l("<span> </span>"),bo=l('<div class="flex flex-wrap gap-1 mt-1"></div>'),xo=l('<button class="bg-yellow-900/40 hover:bg-yellow-800/40 text-yellow-500 border border-yellow-800 px-2 py-0.5 rounded flex items-center gap-1 transition-colors" aria-label="Sortear encerramento do efeito"><!> Sorte Encerra</button>'),fo=l('<div><div class="flex justify-between items-start"><div class="flex items-center gap-2"><button><div></div></button> <span class="font-bold text-white tracking-tight"> </span></div> <div class="flex gap-2"><button class="text-slate-500 hover:text-white p-1 hover:bg-slate-800 rounded transition-colors"><!></button> <button class="text-slate-500 hover:text-red-400 p-1 hover:bg-slate-800 rounded transition-colors"><!></button></div></div> <div class="text-xs text-slate-400 leading-relaxed"> </div> <!> <div class="flex justify-between items-center text-[10px] text-slate-500 font-mono mt-1 border-t border-slate-800/50 pt-2"><span class="flex items-center gap-1"><!> </span> <!></div></div>'),_o=l('<div class="space-y-4"><div class="flex justify-between items-center bg-slate-900 p-3 rounded-lg border border-slate-800"><div class="flex items-center gap-4"><button class="p-2 hover:bg-slate-700 rounded text-slate-400 disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Voltar Rodada"><!></button> <div class="text-center min-w-[80px]"><div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div> <!></div> <button class="p-2 hover:bg-slate-700 rounded text-white disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Avançar Rodada"><!></button></div> <div class="flex gap-2"><button class="bg-slate-800 hover:bg-red-900/50 text-slate-400 hover:text-red-300 px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1 border border-slate-700"><!> Limpar Inativos</button> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1"><!> Novo Efeito</button></div></div> <div class="space-y-2"><!> <!></div></div>');function go(A,c){it(c,!1);const s=()=>le(Oe,"$character",p),[p,m]=ut(),{advanceRound:k,deleteEffect:n,checkLuckEnds:f}=fe;function C(B,y=null){Le.update(Q=>({...Q,type:B,isOpen:!0,data:y}))}gt();var W=_o(),o=t(W),u=t(o),b=t(u);b.__click=()=>k("prev");var P=t(b);wr(P,{size:20}),e(b);var _=r(b,2),x=t(_),$=t(x,!0);e(x);var T=r(x,2);{var d=B=>{var y=vo(),Q=t(y,!0);e(y),O(()=>h(Q,s().currentRound||1)),i(B,y)},j=B=>{var y=co();i(B,y)};g(T,B=>{s().combatActive?B(d):B(j,!1)})}e(_);var H=r(_,2);H.__click=()=>k("next");var G=t(H);gr(G,{size:20}),e(H),e(u);var w=r(u,2),N=t(w);N.__click=function(...B){fe.cleanInactiveEffects?.apply(this,B)};var z=t(N);_r(z,{size:14}),be(),e(N);var v=r(N,2);v.__click=()=>C("effect");var D=t(v);ct(D,{size:14}),be(),e(v),e(w),e(o);var V=r(o,2),J=t(V);{var ne=B=>{var y=po();i(B,y)};g(J,B=>{s().effects.length===0&&B(ne)})}var de=r(J,2);Ie(de,1,()=>s().effects,Ce,(B,y)=>{var Q=fo(),Z=t(Q),L=t(Z),Y=t(L);Y.__click=()=>fe.toggleEffect(a(y).id);var F=t(Y);e(Y);var ee=r(Y,2),se=t(ee,!0);e(ee),e(L);var he=r(L,2),ve=t(he);ve.__click=()=>C("effect",a(y));var ce=t(ve);ea(ce,{size:14}),e(ve);var ye=r(ve,2);ye.__click=()=>n(a(y).id);var Ne=t(ye);Vt(Ne,{size:14}),e(ye),e(he),e(Z);var De=r(Z,2),re=t(De,!0);e(De);var oe=r(De,2);{var me=K=>{var q=bo();Ie(q,5,()=>a(y).modifiers,Ce,(E,I)=>{var pe=uo(),we=t(pe);e(pe),O(()=>{ue(pe,1,`text-[9px] px-1.5 py-0.5 rounded border ${a(I).type===Dt.SET?"bg-yellow-900/30 text-yellow-200 border-yellow-800":"bg-slate-800 text-slate-300 border-slate-700"} font-medium`),h(we,`${(Ea[a(I).target]||a(I).target)??""}: ${a(I).type===Dt.SET?"=":a(I).type===Dt.MULT?"x":a(I).value>0?"+":""}${a(I).value??""}`)}),i(E,pe)}),e(q),i(K,q)};g(oe,K=>{a(y).isActive&&Array.isArray(a(y).modifiers)&&a(y).modifiers.length>0&&K(me)})}var $e=r(oe,2),ke=t($e),xe=t(ke);Pa(xe,{size:10,class:"text-indigo-400"});var Ae=r(xe);e(ke);var ze=r(ke,2);{var R=K=>{var q=xo();q.__click=()=>f(a(y).id);var E=t(q);ba(E,{size:10}),be(),e(q),i(K,q)};g(ze,K=>{a(y).duration==="LUCK_ENDS"&&a(y).isActive&&K(R)})}e($e),e(Q),O(()=>{ue(Q,1,`p-3 rounded border flex flex-col gap-2 transition-all ${a(y).isActive?"bg-slate-900 border-indigo-900 shadow-lg shadow-indigo-950/20":"bg-slate-950 border-slate-800 opacity-60"}`),ue(Y,1,`w-8 h-4 rounded-full relative transition-colors ${a(y).isActive?"bg-green-500":"bg-slate-600"}`),Pe(Y,"aria-label",a(y).isActive?"Desativar efeito {eff.name}":"Ativar efeito {eff.name}"),Pe(Y,"aria-pressed",a(y).isActive),ue(F,1,`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${a(y).isActive?"left-4.5":"left-0.5"}`),h(se,a(y).name),Pe(ve,"aria-label",`Editar ${a(y).name??""}`),Pe(ye,"aria-label",`Excluir ${a(y).name??""}`),h(re,a(y).description),h(Ae,` ${Da[a(y).duration]??""} ${a(y).duration==="ROUNDS"?`(${a(y).roundsLeft})`:""}`)}),i(B,Q)}),e(V),e(W),O(()=>{b.disabled=!!s().campaignId,h($,s().combatActive?"Rodada Atual":"Status"),H.disabled=!!s().campaignId}),i(A,W),lt(),m()}pt(["click"]);var mo=l('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1">Tipo</span> <span class="font-bold text-slate-300 text-xs flex items-center justify-center gap-1.5 bg-slate-800 px-2 py-1 rounded-md"><!> Passivo</span>',1),ho=l('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1">Usos</span> <span> <span class="text-slate-600 text-sm"> </span></span>',1),$o=l('<div class="flex gap-2"><button title="Recuperar Uso" class="bg-slate-800 disabled:opacity-20 hover:bg-green-600/20 text-green-400 p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-green-500/50"><!></button> <button title="Usar Talento" class="bg-slate-800 disabled:opacity-20 hover:bg-indigo-600/20 text-white p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-indigo-500/50"><!></button></div>'),wo=l('<div class="p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl flex flex-col md:flex-row md:items-center gap-6 group hover:border-indigo-500/50 hover:bg-slate-900/60 transition-all duration-300"><div class="flex-1"><div class="flex items-center gap-3 mb-2"><div class="p-2 rounded-lg bg-slate-800 text-yellow-500 group-hover:scale-110 transition-transform shadow-inner"><!></div> <h4 class="font-bold text-white text-lg tracking-tight uppercase tracking-tight"> </h4> <button class="text-slate-600 hover:text-indigo-400 opacity-0 group-hover:opacity-100 transition-all transform hover:scale-110"><!></button></div> <p class="text-sm text-slate-400 leading-relaxed max-w-2xl"> </p></div> <div class="shrink-0 flex items-center gap-4 bg-slate-950/50 p-3 rounded-xl border border-slate-800 shadow-inner"><div class="text-center px-2 border-r border-slate-800 pr-4 min-w-[80px]"><!></div> <!></div></div>'),yo=l('<div class="text-center py-12 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium">Você ainda não possui talentos cadastrados.</p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> Adicionar Primeiro Talento</button></div>'),ko=l('<div class="space-y-6"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight">Talentos & Habilidades</h3> <p class="text-xs text-slate-500">Suas capacidades especiais e passivas.</p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95" aria-label="Adicionar Novo Talento"><!> Novo Talento</button></div> <div class="grid grid-cols-1 gap-4"><!> <!></div></div>');function Ao(A,c){it(c,!1);const s=()=>le(Oe,"$character",p),[p,m]=ut(),{recoverTalent:k}=fe;function n(x,$=null){Le.update(T=>({...T,type:x,isOpen:!0,data:$}))}gt();var f=ko(),C=t(f),W=r(t(C),2);W.__click=()=>n("talent");var o=t(W);ct(o,{size:16}),be(),e(W),e(C);var u=r(C,2),b=t(u);Ie(b,1,()=>s().talents,Ce,(x,$)=>{var T=wo(),d=t(T),j=t(d),H=t(j),G=t(H);Et(G,{size:18}),e(H);var w=r(H,2),N=t(w,!0);e(w);var z=r(w,2);z.__click=()=>n("talent",a($));var v=t(z);ea(v,{size:14}),e(z),e(j);var D=r(j,2),V=t(D,!0);e(D),e(d);var J=r(d,2),ne=t(J),de=t(ne);{var B=L=>{var Y=mo(),F=r(U(Y),2),ee=t(F);mr(ee,{size:12,class:"text-indigo-400"}),be(),e(F),i(L,Y)},y=L=>{var Y=ho(),F=r(U(Y),2),ee=t(F,!0),se=r(ee),he=t(se);e(se),e(F),O(()=>{ue(F,1,`font-mono font-bold text-lg ${a($).uses===0?"text-red-400":"text-white"}`),h(ee,a($).uses),h(he,`/${a($).maxUses??""}`)}),i(L,Y)};g(de,L=>{a($).isPassive?L(B):L(y,!1)})}e(ne);var Q=r(ne,2);{var Z=L=>{var Y=$o(),F=t(Y);F.__click=()=>k(a($).id);var ee=t(F);ct(ee,{size:18}),e(F);var se=r(F,2);se.__click=()=>n("confirm_talent",a($));var he=t(se);Et(he,{size:18}),e(se),e(Y),O(()=>{F.disabled=a($).uses>=a($).maxUses,Pe(F,"aria-label",`Recuperar uso de ${a($).name??""}`),se.disabled=a($).uses===0,Pe(se,"aria-label",`Usar ${a($).name??""}`)}),i(L,Y)};g(Q,L=>{a($).isPassive||L(Z)})}e(J),e(T),O(()=>{h(N,a($).name),Pe(z,"aria-label",`Editar ${a($).name??""}`),h(V,a($).description)}),i(x,T)});var P=r(b,2);{var _=x=>{var $=yo(),T=t($);Et(T,{size:48,class:"mx-auto text-slate-800 mb-3"});var d=r(T,4);d.__click=()=>n("talent");var j=t(d);ct(j,{size:14}),be(),e(d),e($),i(x,$)};g(P,x=>{s().talents.length===0&&x(_)})}e(u),e(f),i(A,f),lt(),m()}pt(["click"]);var zo=l('<span class="block italic text-slate-400"> </span>'),So=l("• Def <!>",1),Mo=l('<button class="text-xs bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600">Usar</button>'),No=l("<button> </button>"),Do=l("<button>2H</button>"),Eo=l("<button>Main</button>"),To=l("<!> <button>Off</button>",1),Po=l('<div class="flex justify-center gap-1"><!></div>'),jo=l('<tr class="hover:bg-slate-900/50"><td class="p-3"><div class="font-bold text-white"> </div> <div class="text-[10px] text-slate-500"> <!> <!></div></td><td class="p-3"><span class="text-[10px] border border-slate-700 px-1 rounded uppercase bg-slate-900"> </span></td><td class="p-3 text-center"><!></td><td class="p-3 text-right font-mono"> </td><td class="p-3 text-right"><button class="text-slate-500 hover:text-white"><!></button></td></tr>'),Io=l('<div class="space-y-4"><div class="lg:hidden"><!></div> <div class="flex justify-between items-center"><h3 class="text-xs font-bold text-slate-500 uppercase">Inventário</h3> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-3 py-1.5 rounded text-white font-bold flex items-center gap-1"><!> Novo Item</button></div> <div class="bg-slate-950 rounded-lg border border-slate-800 overflow-hidden"><table class="w-full text-sm text-left"><thead class="bg-slate-900 text-slate-400 font-bold uppercase text-[10px]"><tr><th class="p-3">Item</th><th class="p-3">Tipo</th><th class="p-3 text-center">Ações / Equipar</th><th class="p-3 text-right">Qtd</th><th class="p-3 w-8"></th></tr></thead><tbody class="divide-y divide-slate-800 text-slate-300"></tbody></table></div></div>');function Co(A,c){it(c,!1);const s=()=>le(Oe,"$character",p),[p,m]=ut(),{useConsumable:k,equipItem:n}=fe;function f(T,d=null){Le.update(j=>({...j,type:T,isOpen:!0,data:d}))}gt();var C=Io(),W=t(C),o=t(W);Oa(o,{}),e(W);var u=r(W,2),b=r(t(u),2);b.__click=()=>f("item");var P=t(b);ct(P,{size:14}),be(),e(b),e(u);var _=r(u,2),x=t(_),$=r(t(x));Ie($,5,()=>s().equipment,Ce,(T,d)=>{var j=jo(),H=t(j),G=t(H),w=t(G,!0);e(G);var N=r(G,2),z=t(N),v=r(z);{var D=ve=>{var ce=zo(),ye=t(ce,!0);e(ce),O(()=>h(ye,a(d).notes)),i(ve,ce)};g(v,ve=>{a(d).notes&&ve(D)})}var V=r(v,2);{var J=ve=>{var ce=So(),ye=r(U(ce));{var Ne=re=>{var oe=Jt();O(()=>h(oe,`Fixed ${a(d).defenseFixed??""}`)),i(re,oe)},De=re=>{var oe=Jt();O(()=>h(oe,`+${a(d).defenseMod??""}`)),i(re,oe)};g(ye,re=>{a(d).defenseFixed?re(Ne):re(De,!1)})}i(ve,ce)};g(V,ve=>{a(d).type===St.ARMOR&&ve(J)})}e(N),e(H);var ne=r(H),de=t(ne),B=t(de,!0);e(de),e(ne);var y=r(ne),Q=t(y);{var Z=ve=>{var ce=Mo();ce.__click=()=>k(a(d)),O(()=>{ce.disabled=a(d).quantity<=0,Pe(ce,"aria-label",`Usar ${a(d).name??""}`)}),i(ve,ce)},L=ve=>{var ce=ae(),ye=U(ce);{var Ne=re=>{var oe=No();oe.__click=()=>n(a(d));var me=t(oe,!0);e(oe),O(()=>{ue(oe,1,`text-xs px-2 py-1 rounded border transition-colors ${a(d).equipped?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-400"}`),Pe(oe,"aria-label",a(d).equipped?"Desequipar armadura":"Equipar armadura"),h(me,a(d).equipped?"Equipado":"Equipar")}),i(re,oe)},De=re=>{var oe=ae(),me=U(oe);{var $e=ke=>{var xe=Po(),Ae=t(xe);{var ze=K=>{var q=Do();q.__click=()=>n(a(d),a(d).equippedState?null:"two"),O(()=>{ue(q,1,`text-[10px] px-2 py-1 rounded border ${a(d).equippedState==="two"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),Pe(q,"aria-label",a(d).equippedState==="two"?"Desequipar 2H":"Equipar 2H")}),i(K,q)},R=K=>{var q=To(),E=U(q);{var I=we=>{var je=Eo();je.__click=()=>n(a(d),a(d).equippedState==="main"?null:"main"),O(()=>{ue(je,1,`text-[10px] px-2 py-1 rounded border ${a(d).equippedState==="main"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),Pe(je,"aria-label",a(d).equippedState==="main"?"Desequipar Main Hand":"Equipar Main Hand")}),i(we,je)};g(E,we=>{a(d).grip!==ca.OFF&&we(I)})}var pe=r(E,2);pe.__click=()=>n(a(d),a(d).equippedState==="off"?null:"off"),O(()=>{ue(pe,1,`text-[10px] px-2 py-1 rounded border ${a(d).equippedState==="off"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),Pe(pe,"aria-label",a(d).equippedState==="off"?"Desequipar Off Hand":"Equipar Off Hand")}),i(K,q)};g(Ae,K=>{a(d).grip===ca.TWO?K(ze):K(R,!1)})}e(xe),i(ke,xe)};g(me,ke=>{(a(d).type===St.WEAPON||a(d).type===St.SHIELD)&&ke($e)},!0)}i(re,oe)};g(ye,re=>{a(d).type===St.ARMOR?re(Ne):re(De,!1)},!0)}i(ve,ce)};g(Q,ve=>{a(d).type===St.CONSUMABLE?ve(Z):ve(L,!1)})}e(y);var Y=r(y),F=t(Y,!0);e(Y);var ee=r(Y),se=t(ee);se.__click=()=>f("item",a(d));var he=t(se);ea(he,{size:14}),e(se),e(ee),e(j),O(()=>{h(w,a(d).name),h(z,`${a(d).quality??""} • ${a(d).availability??""} • ${a(d).price??""}gp `),h(B,a(d).type),h(F,a(d).quantity),Pe(se,"aria-label",`Editar ${a(d).name??""}`)}),i(T,j)}),e($),e(x),e(_),e(C),i(A,C),lt(),m()}pt(["click"]);var Oo=l('<div class="space-y-6"><div class="lg:hidden"><!></div> <div class="space-y-4"><div class="flex justify-between items-center mb-2"><h3 class="text-xs font-bold text-slate-500 uppercase">Anotações do Personagem</h3> <span class="text-[10px] text-slate-600 italic">Salvo automaticamente</span></div> <textarea class="w-full h-[50vh] bg-slate-950 border border-slate-800 rounded p-4 text-white resize-none focus:border-indigo-500 focus:outline-none custom-scrollbar leading-relaxed font-mono text-sm" placeholder="Escreva aqui a história, anotações de campanha, NPCs importantes, segredos..." aria-label="Anotações do personagem"></textarea></div></div>');function Ho(A,c){it(c,!1);const s=()=>le(Oe,"$character",p),[p,m]=ut();gt();var k=Oo(),n=t(k),f=t(n);Ha(f,{}),e(n);var C=r(n,2),W=r(t(C),2);Xt(W),e(C),e(k),ge(W,()=>s().notes,o=>Ua(Oe,ma(s).notes=o,ma(s))),i(A,k),lt(),m()}var Ro=l('<div class="space-y-4 flex-1 flex flex-col"><!> <button class="w-full bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 p-4 rounded-2xl border border-emerald-500/30 flex items-center justify-center gap-3 group transition-all shadow-lg shadow-emerald-900/30 hover:shadow-emerald-500/20 active:scale-[0.98] cursor-pointer"><div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform"><!></div> <span class="font-black text-white uppercase tracking-wider text-sm">Teste de Sorte</span></button> <!> <!> <div class="lg:hidden mt-auto pt-6"><!></div></div>');function qo(A,c){it(c,!1),gt();var s=Ro(),p=t(s);Ia(p,{});var m=r(p,2);m.__click=()=>Le.set({type:"pre_roll",isOpen:!0,data:{type:"luck",source:{name:"Sorte"}}});var k=t(m),n=t(k);ba(n,{size:24,class:"text-white"}),e(k),be(2),e(m);var f=r(m,2);Ca(f,{});var C=r(f,2);Ra(C,{});var W=r(C,2),o=t(W);ua(o,{banner:!0}),e(W),e(s),i(A,s),lt()}pt(["click"]);var Uo=l('<div class="min-h-screen flex flex-col items-center justify-center p-4"><div class="bg-slate-900 border border-slate-800 rounded-3xl p-8 max-w-md w-full text-center shadow-2xl"><div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-600"><!></div> <h1 class="text-2xl font-black text-white mb-2 uppercase tracking-tight">Personagem Não Encontrado</h1> <p class="text-slate-400 mb-8">Este personagem não existe na sua base local. Crie um novo personagem através da página inicial.</p> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all"><!> Voltar ao Início</button></div></div>'),Lo=l('<!> <!> <!> <main class="max-w-6xl mx-auto md:px-4 mt-6 lg:mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6"><aside class="hidden lg:block lg:col-span-3 space-y-4"><!> <button class="w-full bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 p-4 rounded-2xl border border-emerald-500/30 flex items-center justify-center gap-3 group transition-all shadow-lg shadow-emerald-900/30 hover:shadow-emerald-500/20 active:scale-[0.98] cursor-pointer"><div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform"><!></div> <span class="font-black text-white uppercase tracking-wider text-sm">Teste de Sorte</span></button> <!> <!> <!> <!> <div class="pt-2"><!></div></aside> <section class="lg:col-span-9"><div class="bg-slate-900 md:rounded-xl md:border md:border-slate-800 min-h-[calc(100vh-200px)] md:min-h-[60vh] flex flex-col"><!> <div class="p-4 md:p-6 flex-1 flex flex-col"><!> <!> <!> <!> <!> <!> <!></div></div></section></main> <div class="hidden"><!></div>',1),Fo=l('<div class="flex items-center justify-center min-h-screen"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"></div></div>'),Go=l('<div class="min-h-screen bg-slate-950 text-slate-100 font-sans pb-28 md:pb-20 relative overflow-x-hidden"><!></div> ```',1);function di(A,c){it(c,!0);const s=()=>le(Oe,"$character",u),p=()=>le(Wt,"$normalHealth",u),m=()=>le(Yt,"$currentHealth",u),k=()=>le(Bt,"$damage",u),n=()=>le(pa,"$totalDefense",u),f=()=>le(va,"$effectiveMaxHealth",u),C=()=>le(ar,"$page",u),W=()=>le(da,"$isHistoryOpen",u),o=()=>le(ra,"$activeTab",u),[u,b]=ut();let P=qt(!1),_=qt(!1),x=qt(null);aa(()=>{if(!a(P)||a(_)||!a(x))return;const w=s(),N=p(),z=m(),v=k(),D=n(),V=f(),J={...w,normalHealth:N,currentHealth:z,damage:v};na.set(a(x),J),w.campaignId&&ya({id:a(x),type:"player",name:w.name,level:w.level,ancestry:w.ancestry,damage:v,currentHealth:z,normalHealth:N,health:V,defense:D,initiative:w.initiative,acted:w.acted,afflictions:w.afflictions||[],campaignApproval:w.campaignApproval})}),aa(()=>{if(!a(P)||a(_)||!a(x)||!Rt(Oe).campaignId)return;const N=setInterval(()=>{const z=Rt(Oe);ya({id:a(x),type:"player",name:z.name,level:z.level,ancestry:z.ancestry,damage:Rt(Bt),currentHealth:Rt(Yt),normalHealth:Rt(Wt),health:Rt(va),defense:Rt(pa),initiative:z.initiative,acted:z.acted,afflictions:z.afflictions||[],campaignApproval:z.campaignApproval})},3e4);return()=>clearInterval(N)}),aa(()=>{const w=C().params.id;w&&w!==a(x)&&$(w)});async function $(w){if(Ke(P,!1),Ke(_,!1),Ke(x,w,!0),await Za(),na.has(w)){const N=na.get(w);Oe.set({...er,...N,id:w}),N.normalHealth!==void 0&&Wt.set(N.normalHealth),N.currentHealth!==void 0&&Yt.set(N.currentHealth),N.damage!==void 0&&Bt.set(N.damage);const z=Rt(Oe);z.campaignId&&tr(z.campaignId,!1,a(x))}else Ke(_,!0);Ke(P,!0)}var T=Go(),d=U(T),j=t(d);{var H=w=>{var N=ae(),z=U(N);{var v=V=>{var J=Uo(),ne=t(J),de=t(ne),B=t(de);nr(B,{size:40}),e(de);var y=r(de,6);y.__click=()=>Ta(Na("/"));var Q=t(y);br(Q,{size:18}),be(),e(y),e(ne),e(J),i(V,J)},D=V=>{var J=Lo(),ne=U(J);dr(ne,{get isOpen(){return W()},onClose:()=>da.set(!1)});var de=r(ne,2);Ps(de,{});var B=r(de,2);Ir(B,{});var y=r(B,2),Q=t(y),Z=t(Q);Ia(Z,{});var L=r(Z,2);L.__click=()=>Le.set({type:"pre_roll",isOpen:!0,data:{type:"luck",source:{name:"Sorte"}}});var Y=t(L),F=t(Y);ba(F,{size:24,class:"text-white"}),e(Y),be(2),e(L);var ee=r(L,2);Ca(ee,{});var se=r(ee,2);Oa(se,{});var he=r(se,2);Ha(he,{});var ve=r(he,2);Ra(ve,{});var ce=r(ve,2),ye=t(ce);ua(ye,{}),e(ce),e(Q);var Ne=r(Q,2),De=t(Ne),re=t(De);Qs(re,{});var oe=r(re,2),me=t(oe);{var $e=M=>{qo(M,{})};g(me,M=>{o()==="stats"&&M($e)})}var ke=r(me,2);{var xe=M=>{ro(M,{})};g(ke,M=>{o()==="acoes"&&M(xe)})}var Ae=r(ke,2);{var ze=M=>{go(M,{})};g(Ae,M=>{o()==="efeitos"&&M(ze)})}var R=r(Ae,2);{var K=M=>{no(M,{})};g(R,M=>{o()==="magias"&&M(K)})}var q=r(R,2);{var E=M=>{Ao(M,{})};g(q,M=>{o()==="talentos"&&M(E)})}var I=r(q,2);{var pe=M=>{Co(M,{})};g(I,M=>{o()==="equipamento"&&M(pe)})}var we=r(I,2);{var je=M=>{Ho(M,{})};g(we,M=>{o()==="notas"&&M(je)})}e(oe),e(De),e(Ne),e(y);var S=r(y,2),X=t(S);ua(X,{banner:!0}),e(S),i(V,J)};g(z,V=>{a(_)?V(v):V(D,!1)})}i(w,N)},G=w=>{var N=Fo();i(w,N)};g(j,w=>{a(P)?w(H):w(G,!1)})}e(d),be(),i(A,T),lt(),b()}pt(["click"]);export{di as component,ni as universal};
