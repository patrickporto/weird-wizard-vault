const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/2Gu058ss.js","../chunks/B3FtJd8P.js","../chunks/EigO5Itq.js","../chunks/CE5Oy5gg.js"])))=>i.map(i=>d[i]);
import{_ as Ve}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{d as qe,o as Be,s as l}from"../chunks/CE5Oy5gg.js";import{w as Ye,j as u,v as W,x as r,y as o,t as x,k as _,z as Qe,A as g,B as t,D as j,E as C,F as i,u as Xe,G as Ze}from"../chunks/EigO5Itq.js";import{e as et,$ as tt,s as fe,i as at,r as rt,a as it}from"../chunks/B3FtJd8P.js";import{i as w}from"../chunks/EUrPnace.js";import{c as st,j as ot,i as nt,b as lt}from"../chunks/D-px-r2z.js";import{s as K,a as dt}from"../chunks/x7t77AVd.js";import{p as vt}from"../chunks/Besq1sGQ.js";import{l as ct}from"../chunks/BPReyIlN.js";import{G as xe,C as mt,g as ie,D as V}from"../chunks/pDEUQP3R.js";import{g as ue}from"../chunks/BKk7sOUi.js";import{U as pt,r as ge,C as _t,W as ft}from"../chunks/jSS4on-d.js";import{v as xt}from"../chunks/BYmFNSF7.js";import{W as ut}from"../chunks/B4GIR-C0.js";import{T as be}from"../chunks/D8_GHRxH.js";var gt=u('<span class="block text-xs mt-1 uppercase tracking-widest text-slate-500 font-black"> </span>'),bt=u('<div class="mt-4 px-3 py-1 bg-green-500/10 border border-green-500/20 rounded-full text-[10px] text-green-500 font-bold uppercase tracking-wider flex items-center gap-2"><!> </div>'),ht=u('<div class="mt-4 px-3 py-1 bg-amber-500/10 border border-amber-500/20 rounded-full text-[10px] text-amber-500 font-bold uppercase tracking-wider animate-pulse flex items-center gap-2"><!> </div>'),wt=u('<div class="mb-6 bg-red-500/10 border border-red-500/20 rounded-xl p-3 flex items-center gap-3"><!> <p class="text-red-400 text-sm font-bold"> </p></div>'),yt=u('<p class="text-red-400 text-xs mt-1"> </p>'),$t=u('<div class="mb-6 bg-slate-950/50 p-4 rounded-xl border border-slate-800"><label for="campaign-pwd-input" class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-indigo-500 animate-pulse"></div> </label> <input id="campaign-pwd-input" type="password"/> <!></div>'),kt=u('<button><div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-xs font-bold"> </div> <div class="flex-1 text-left"><div class="font-bold text-sm"> </div> <div class="text-[10px] opacity-60 flex items-center gap-1"> <span class="w-1 h-1 rounded-full bg-slate-600"></span> <!> </div></div> <!></button>'),Ct=u("<div> </div> <div> </div>",1),zt=u('<div class="text-xs text-slate-500 max-w-[200px]"> </div>'),It=u('<div class="text-xs text-slate-500"> </div>'),jt=u('<div class="flex flex-col items-center gap-2"><!> <div class="text-amber-500 font-bold"> </div> <!></div>'),Et=u('<div class="text-center py-8 text-slate-600 italic text-sm space-y-2"><!></div>'),Gt=u('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> ',1),Nt=u('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> ',1),At=u('<div class="min-h-screen bg-slate-950 flex items-center justify-center p-4"><div class="max-w-md w-full bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl"><div class="flex flex-col items-center text-center mb-8"><div class="w-16 h-16 bg-indigo-600/20 rounded-full flex items-center justify-center text-indigo-400 mb-4 border border-indigo-500/30"><!></div> <h1 class="text-2xl font-bold text-white mb-2"> </h1> <p class="text-slate-400"> <span class="text-indigo-400 font-bold"> </span> <!></p> <div class="mt-4 inline-flex items-center gap-1.5 px-3 py-1 rounded bg-slate-800 text-[10px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div> <!></div> <!> <!> <div class="space-y-4 mb-8"><label for="char-selector" class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"> </label> <div id="char-selector" class="space-y-2 max-h-60 overflow-y-auto custom-scrollbar pr-2"><!> <!></div></div> <div class="flex gap-3"><button class="flex-1 py-3 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-bold transition-all"> </button> <button class="flex-1 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold transition-all shadow-lg shadow-indigo-900/20 flex items-center justify-center gap-2"><!></button></div></div></div> <!>',1);function Bt(he,we){Ye(we,!0);const ye=()=>K(vt,"$page",E),P=()=>K(st,"$character",E),n=()=>K(tt,"$t",E),z=()=>K(ct,"$liveCharacters",E),$e=()=>K(nt,"$isGmOnline",E),[E,ke]=dt(),G=ye().params.id;let N=C(()=>P().campaignName||n()("invite.searching")),q=C(()=>P().gmName||"..."),U=C(()=>P().passwordHash),F=C(()=>P().system||V),se=C(()=>z().filter(a=>!a.campaignId&&(a.system||V)===t(F))),Ce=C(()=>z().some(a=>!a.campaignId&&(a.system||V)!==t(F))),h=j(null),H=j(!1),A=j(""),M=j(!1),J=j(!1),I=j("");Be(()=>{G&&ot(G,!1)});async function ze(){if(g(I,""),!t(h)||!G)return;if(z().find(e=>e.id===t(h))?.campaignId){g(I,n()("invite.already_in_campaign"),!0);return}if(t(U)){if(!t(A)){g(M,!0);return}g(J,!0);const e=await xt(t(A),t(U));if(g(J,!1),!e){g(M,!0);return}}g(M,!1),g(H,!0)}function Ie(){if(!t(h)||!G)return;const a=z().find(e=>e.id===t(h));if(a){if(a.campaignId){g(I,n()("invite.already_in_campaign"),!0),g(H,!1);return}Ve(async()=>{const{charactersMap:e}=await import("../chunks/2Gu058ss.js").then(s=>s.g);return{charactersMap:e}},__vite__mapDeps([0,1,2,3]),import.meta.url).then(({charactersMap:e})=>{e.set(t(h),{...a,campaignId:G,campaignName:t(N),gmName:t(q),campaignApproval:"pending"}),ue(ge("/characters/[id]",{id:t(h)}))})}}var oe=At(),B=W(oe),ne=r(B),Y=r(ne),Q=r(Y),je=r(Q);pt(je,{size:32}),i(Q);var X=o(Q,2),Ee=r(X,!0);i(X);var Z=o(X,2),le=r(Z),ee=o(le),Ge=r(ee,!0);i(ee);var Ne=o(ee,2);{var Ae=a=>{var e=gt(),s=r(e);i(e),x(d=>l(s,`${d??""}: ${t(q)??""}`),[()=>n()("common.labels.master")]),_(a,e)};w(Ne,a=>{t(q)!=="..."&&a(Ae)})}i(Z);var te=o(Z,2),de=r(te);xe(de,{size:12});var Me=o(de);i(te);var Oe=o(te,2);{var Se=a=>{var e=bt(),s=r(e);ft(s,{size:12});var d=o(s);i(e),x(m=>l(d,` ${m??""}`),[()=>n()("invite.gm_online")]),_(a,e)},Te=a=>{var e=ht(),s=r(e);ut(s,{size:12});var d=o(s);i(e),x(m=>l(d,` ${m??""}`),[()=>n()("invite.waiting_gm")]),_(a,e)};w(Oe,a=>{$e()?a(Se):a(Te,!1)})}i(Y);var ve=o(Y,2);{var De=a=>{var e=wt(),s=r(e);be(s,{size:20,class:"text-red-500 mb-0.5"});var d=o(s,2),m=r(d,!0);i(d),i(e),x(()=>l(m,t(I))),_(a,e)};w(ve,a=>{t(I)&&a(De)})}var ce=o(ve,2);{var We=a=>{var e=$t(),s=r(e),d=o(r(s));i(s);var m=o(s,2);rt(m);var v=o(m,2);{var p=c=>{var f=yt(),$=r(f,!0);i(f),x(k=>l($,k),[()=>n()("invite.password.incorrect")]),_(c,f)};w(v,c=>{t(M)&&c(p)})}i(e),x((c,f)=>{l(d,` ${c??""}`),it(m,"placeholder",f),fe(m,1,`w-full bg-slate-900 border ${t(M)?"border-red-500":"border-slate-700"} rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors`)},[()=>n()("invite.password.required"),()=>n()("invite.password.placeholder")]),lt(m,()=>t(A),c=>g(A,c)),_(a,e)};w(ce,a=>{t(U)&&a(We)})}var ae=o(ce,2),re=r(ae),Ke=r(re,!0);i(re);var me=o(re,2),pe=r(me);et(pe,17,()=>t(se),at,(a,e)=>{var s=kt();s.__click=()=>{g(h,t(e).id,!0),g(I,"")};var d=r(s),m=r(d,!0);i(d);var v=o(d,2),p=r(v),c=r(p,!0);i(p);var f=o(p,2),$=r(f),k=o($,3);xe(k,{size:8});var O=o(k);i(f),i(v);var S=o(v,2);{var y=b=>{_t(b,{size:16,class:"text-indigo-400"})};w(S,b=>{t(h)===t(e).id&&b(y)})}i(s),x((b,T,D)=>{fe(s,1,`w-full flex items-center gap-3 p-3 rounded-xl border transition-all ${t(h)===t(e).id?"bg-indigo-600/20 border-indigo-500 text-white":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-700"}`),l(m,b),l(c,t(e).name),l($,`${T??""} ${t(e).level??""} â€¢ ${t(e).ancestry??""} `),l(O,` ${D??""}`)},[()=>t(e).name.charAt(0),()=>n()("common.labels.level"),()=>n()(ie(t(e).system||V).nameKey)]),_(a,s)});var Pe=o(pe,2);{var Ue=a=>{var e=Et(),s=r(e);{var d=v=>{var p=Ct(),c=W(p),f=r(c,!0);i(c);var $=o(c,2),k=r($,!0);i($),x((O,S)=>{l(f,O),l(k,S)},[()=>n()("invite.no_characters"),()=>n()("invite.create_first")]),_(v,p)},m=v=>{var p=jt(),c=r(p);be(c,{size:24,class:"text-amber-500"});var f=o(c,2),$=r(f,!0);i(f);var k=o(f,2);{var O=y=>{var b=zt(),T=r(b,!0);i(b),x(D=>l(T,D),[()=>n()("invite.system_mismatch_info",{values:{system:n()(ie(t(F)).nameKey)}})]),_(y,b)},S=y=>{var b=It(),T=r(b,!0);i(b),x(D=>l(T,D),[()=>n()("invite.create_or_leave")]),_(y,b)};w(k,y=>{t(Ce)?y(O):y(S,!1)})}i(p),x(y=>l($,y),[()=>n()("invite.all_in_campaigns")]),_(v,p)};w(s,v=>{z().length===0?v(d):v(m,!1)})}i(e),_(a,e)};w(Pe,a=>{t(se).length===0&&a(Ue)})}i(me),i(ae);var _e=o(ae,2),L=r(_e);L.__click=()=>ue(ge("/"));var Fe=r(L,!0);i(L);var R=o(L,2);R.__click=ze;var He=r(R);{var Je=a=>{var e=Gt(),s=o(W(e));x(d=>l(s,` ${d??""}`),[()=>n()("invite.validating")]),_(a,e)},Le=a=>{var e=Xe(),s=W(e);{var d=v=>{var p=Nt(),c=o(W(p));x(f=>l(c,` ${f??""}`),[()=>n()("invite.loading")]),_(v,p)},m=v=>{var p=Ze();x(c=>l(p,c),[()=>n()("invite.accept")]),_(v,p)};w(s,v=>{t(N)===n()("invite.searching")?v(d):v(m,!1)},!0)}_(a,e)};w(He,a=>{t(J)?a(Je):a(Le,!1)})}i(R),i(_e),i(ne),i(B);var Re=o(B,2);{let a=C(()=>n()("invite.confirm_title")),e=C(()=>n()("invite.confirm_message",{values:{campaign:t(N),character:z().find(s=>s.id===t(h))?.name}}));mt(Re,{get isOpen(){return t(H)},get title(){return t(a)},get message(){return t(e)},onConfirm:Ie,onCancel:()=>g(H,!1)})}x((a,e,s,d,m,v)=>{l(Ee,a),l(le,`${e??""} `),l(Ge,t(N)),l(Me,` ${s??""}`),l(Ke,d),l(Fe,m),R.disabled=v},[()=>n()("invite.title"),()=>n()("invite.invited_to"),()=>n()(ie(t(F)).nameKey),()=>n()("invite.select_character"),()=>n()("invite.decline"),()=>!t(h)||t(J)||!!t(U)&&!t(A)||t(N)===n()("invite.searching")]),_(he,oe),Qe(),ke()}qe(["click"]);export{Bt as component};
