import"../chunks/DsnmJJEf.js";import"../chunks/y8AhTvDO.js";import{d as Ce,e as X,a as _,p as Ae,i as Fe,k as n,F as P,g as s,f as z,j as e,n as w,r as t,S as De,x as bt,s as a,t as _e}from"../chunks/LAPZz738.js";import{d as Te,o as ht,s as j,g as mt}from"../chunks/Cv9CvP4l.js";import{l as et,s as tt,i as ve,p as Je}from"../chunks/5XsrLGCt.js";import{I as at,s as rt}from"../chunks/5P2UBWQH.js";import{r as K,s as Le,e as Se}from"../chunks/DN1kndjz.js";import{s as ft,a as Ee}from"../chunks/VjRhTPLG.js";import{C as xt,a as Be,l as _t}from"../chunks/CwyIb4K5.js";import{S as wt,C as yt,u as Ke,P as Qe,G as Xe}from"../chunks/BUWBi9bD.js";import{U as kt,a as He,r as we,b as ye,p as Ct,W as $t}from"../chunks/Bg6V0DHS.js";import{g as ke}from"../chunks/eilO8mxO.js";import{b as Q}from"../chunks/CDnODwqQ.js";import{M as Pt,T as Ye,P as Ie,a as zt}from"../chunks/Whl0iriK.js";import{h as Mt}from"../chunks/BYmFNSF7.js";function jt($,v){const p=et(v,["children","$$slots","$$events","$$legacy"]);const m=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];at($,tt({name:"download"},()=>p,{get iconNode(){return m},children:(i,d)=>{var M=Ce(),f=X(M);rt(f,v,"default",{}),_(i,M)},$$slots:{default:!0}}))}function Ze($,v){const p=et(v,["children","$$slots","$$events","$$legacy"]);const m=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3"}]];at($,tt({name:"scroll"},()=>p,{get iconNode(){return m},children:(i,d)=>{var M=Ce(),f=X(M);rt(f,v,"default",{}),_(i,M)},$$slots:{default:!0}}))}var Nt=z('<button class="fixed bottom-6 right-6 z-40 bg-indigo-600 hover:bg-indigo-500 text-white p-4 rounded-full shadow-2xl shadow-indigo-900/50 flex items-center gap-2 font-bold animate-pulse hover:animate-none transition-all active:scale-95"><!> <span class="text-sm uppercase tracking-wider hidden sm:inline">Instalar App</span></button>');function Ot($,v){Ae(v,!0);let p=P(null),m=P(!1);ht(()=>{window.addEventListener("beforeinstallprompt",u=>{u.preventDefault(),n(p,u,!0),n(m,!0)}),window.addEventListener("appinstalled",()=>{n(p,null),n(m,!1)})});async function i(){if(!s(p))return;s(p).prompt();const{outcome:u}=await s(p).userChoice;u==="accepted"&&(n(p,null),n(m,!1))}var d=Ce(),M=X(d);{var f=u=>{var x=Nt();x.__click=i;var A=e(x);jt(A,{size:24}),w(2),t(x),_(u,x)};ve(M,u=>{s(m)&&u(f)})}_($,d),Fe()}Te(["click"]);var St=z('<div class="space-y-4"><div><label for="char-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nome</label> <input id="char-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Alaric"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-ancestry" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Ancestralidade</label> <input id="char-ancestry" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Humano"/></div> <div><label for="char-level" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nível</label> <input id="char-level" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div> <div><label for="char-path" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Trilha Inicial (Novice)</label> <input id="char-path" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Guerreiro, Mago"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-defense" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Defesa</label> <input id="char-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div> <div><label for="char-health" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Vida Máxima</label> <input id="char-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div></div> <div class="flex gap-3 mt-8"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-3 rounded-xl text-white font-bold active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95">Salvar</button></div>',1);function Et($,v){Ae(v,!0);let p=Je(v,"isOpen",3,!1),m=Je(v,"initialData",3,"{}"),i=De({name:"",ancestry:"",novicePath:"",level:1,defense:10,health:24});bt(()=>{if(p()&&m())try{const d=JSON.parse(m());i.name=d.name||"",i.ancestry=d.ancestry||"",i.novicePath=d.paths&&d.paths.novice?d.paths.novice:"",i.level=d.level||1,i.defense=d.defense||10,i.health=d.health||d.normalHealth||24}catch{i.name="",i.ancestry="",i.novicePath="",i.level=1,i.defense=10,i.health=24}}),Pt($,{get isOpen(){return p()},get onClose(){return v.onClose},title:"Configurações do Personagem",maxWidth:"max-w-md",children:(d,M)=>{var f=St(),u=X(f),x=e(u),A=a(e(x),2);K(A),t(x);var Y=a(x,2),Z=e(Y),pe=a(e(Z),2);K(pe),t(Z);var F=a(Z,2),q=a(e(F),2);K(q),t(F),t(Y);var G=a(Y,2),ue=a(e(G),2);K(ue),t(G);var D=a(G,2),ee=e(D),N=a(e(ee),2);K(N),t(ee);var E=a(ee,2),ge=a(e(E),2);K(ge),t(E),t(D),t(u);var be=a(u,2),R=e(be);R.__click=function(...g){v.onClose?.apply(this,g)};var te=a(R,2);te.__click=()=>v.onSave({...i}),t(be),Q(A,()=>i.name,g=>i.name=g),Q(pe,()=>i.ancestry,g=>i.ancestry=g),Q(q,()=>i.level,g=>i.level=g),Q(ue,()=>i.novicePath,g=>i.novicePath=g),Q(N,()=>i.defense,g=>i.defense=g),Q(ge,()=>i.health,g=>i.health=g),_(d,f)},$$slots:{default:!0}}),Fe()}Te(["click"]);var Ht=z('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all relative group flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="flex justify-between items-start mb-4"><div class="flex-1"><h3 class="font-black text-xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate pr-8"> </h3> <div class="flex items-center gap-2 mt-1"><span class="text-[10px] bg-indigo-500/10 text-indigo-400 font-black px-2 py-0.5 rounded uppercase tracking-wider"> </span> <span class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </span></div></div> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button></div> <div class="space-y-3 mb-6"><div class="flex items-center justify-between text-xs text-slate-400"><span class="flex items-center gap-1.5 opacity-60"><!> Trilhas</span> <span class="font-bold text-slate-300 truncate max-w-[150px]"> </span></div></div> <button class="w-full bg-slate-800 hover:bg-indigo-600 text-white py-3 rounded-2xl font-bold transition-all active:scale-[0.98] border border-slate-700 hover:border-indigo-400/30 flex items-center justify-center gap-2">Abrir Ficha <!></button></div>'),It=z('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold">Novo Personagem</span></button></div>'),At=z('<span class="text-[9px] bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded-full border border-emerald-500/20 font-black uppercase tracking-widest flex items-center gap-1"><!> Publicada</span>'),Ft=z('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="mb-4"><div class="flex justify-between items-start mb-1"><h3 class="font-black text-2xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight"> </h3> <!></div> <p class="text-indigo-400 text-[10px] font-black uppercase tracking-[0.2em] mb-3"> </p> <p class="text-sm text-slate-400 line-clamp-2 leading-relaxed h-10"> </p></div> <div class="flex gap-3 mt-4"><button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-2xl font-bold flex items-center justify-center gap-2 border border-indigo-400/20 shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98]"><!> Iniciar Sessão</button> <div class="flex gap-2"><button class="p-3 text-slate-400 hover:text-white bg-slate-800/50 rounded-2xl border border-slate-800 hover:border-slate-700 transition-all" title="Editar"><!></button> <button class="p-3 text-slate-400 hover:text-red-400 bg-slate-800/50 rounded-2xl border border-slate-800 hover:border-red-900/30 transition-all" title="Excluir"><!></button></div></div></div>'),Tt=z('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-emerald-500/40 transition-all group relative flex flex-col justify-between shadow-xl border-t-white/5"><div><h3 class="font-black text-2xl text-white group-hover:text-emerald-400 mb-2 uppercase tracking-tight"> </h3> <div class="flex items-center gap-2 mb-4"><div class="px-2 py-0.5 bg-slate-800 rounded text-[9px] text-slate-400 font-black uppercase tracking-widest"> </div> <div class="flex items-center gap-1 px-2 py-0.5 bg-emerald-500/10 rounded text-[9px] text-emerald-400 font-black uppercase tracking-wider"><div class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></div> Online</div></div> <p class="text-sm text-slate-400 line-clamp-3 leading-relaxed mb-6 h-15"> </p></div> <button class="w-full bg-emerald-600 hover:bg-emerald-500 text-white py-3 rounded-2xl font-black uppercase text-xs tracking-[0.1em] flex items-center justify-center gap-2 border border-emerald-400/20 transition-all active:scale-[0.98] group">Participar da Aventura <!></button></div>'),Vt=z('<div class="col-span-full py-12 flex flex-col items-center text-center opacity-40"><div class="w-16 h-16 bg-slate-800/50 rounded-full flex items-center justify-center text-slate-600 mb-3 border border-slate-700 border-dashed"><!></div> <h3 class="text-lg font-black uppercase tracking-widest text-slate-500">Nenhuma Campanha Online</h3> <p class="text-slate-600 max-w-sm mt-2 text-sm">Os Mestres precisam publicar suas sessões para aparecerem aqui.</p></div>'),Wt=z('<div class="space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold">Nova Campanha</span></button></div> <div><div class="flex items-center gap-3 mb-4"><div class="h-px flex-1 bg-slate-800"></div> <h3 class="text-xs font-black uppercase tracking-widest text-emerald-400 flex items-center gap-2"><!> Campanhas Públicas</h3> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><!> <!></div></div></div>'),qt=z('<div class="animate-in fade-in p-4 md:p-8 max-w-7xl mx-auto pb-20"><header class="mb-8 flex flex-col md:flex-row justify-between items-center gap-4 border-b border-slate-800 pb-6"><div><h1 class="text-3xl font-bold text-white flex items-center gap-2 text-gradient"><!> Weird Wizard Vault</h1> <p class="text-slate-400 mt-1">Gestor de Personagens e Campanhas</p></div> <div class="flex bg-slate-900 p-1 rounded-xl border border-slate-800 glass shadow-xl"><button><!> Personagens</button> <button><!> Campanhas</button></div></header> <div class="min-h-[500px]"><!></div> <!> <!> <!></div>');function Gt($,v){Ae(v,!0);const p=()=>Ee(_t,"$liveCharacters",d),m=()=>Ee(Be,"$liveCampaigns",d),i=()=>Ee(Ct,"$publicCampaigns",d),[d,M]=ft();let f=P("characters"),u=P(!1),x=P(null),A=P("{}");const Y={name:"",ancestry:"Humano",novicePath:"",level:0,defense:8,health:5};function Z(r=null){n(x,r?r.id:null,!0),n(A,JSON.stringify(r||Y),!0),n(u,!0)}function pe(r){const b=s(x)||Ke(),l=s(x)?He.get(b):{},o={...l,id:b,name:r.name,ancestry:r.ancestry,level:r.level,defense:r.defense,paths:{novice:r.novicePath||l.paths?.novice||"-",expert:l.paths?.expert||"-",master:l.paths?.master||"-"},attributes:l.attributes||[{name:"Força",value:10,key:"str"},{name:"Agilidade",value:10,key:"agi"},{name:"Intelecto",value:10,key:"int"},{name:"Vontade",value:10,key:"wil"}],speed:l.speed||5,health:r.health,currentHealth:s(x)&&l.currentHealth||r.health};s(x)||(o.spells=[],o.talents=[],o.equipment=[],o.afflictions=[],o.effects=[],o.currency={gp:0,sp:0,cp:0},o.languages=["Comum"]),He.set(b,o),n(u,!1),s(x)||ke(we("/characters/[id]",{id:b}))}let F=P(!1),q=P(null),G=P("{}");const ue={name:"",description:"",gmName:""};function D(r=null){n(q,r?r.id:null,!0),n(G,JSON.stringify(r||ue),!0),n(F,!0)}async function ee(r){const b=s(q)||Ke(),l=s(q)?ye.get(b):{},o={...l,id:b,name:r.name,description:r.description,gmName:r.gmName,players:l.players||[]};r.removePassword?delete o.passwordHash:r.password&&(o.passwordHash=await Mt(r.password)),ye.set(b,o),n(F,!1)}let N=P(!1),E=P(De({title:"",message:"",onConfirm:()=>{}}));function ge(r){n(E,{title:"Excluir Campanha",message:"Tem certeza que deseja apagar esta campanha permanentemente?",onConfirm:()=>{ye.delete(r),n(N,!1)}},!0),n(N,!0)}function be(r){n(E,{title:"Excluir Personagem",message:"Tem certeza que deseja apagar este personagem permanentemente?",onConfirm:()=>{mt(Be).forEach(l=>{let o=!1;l.members&&l.members.some(h=>h.id===r)&&(l.members=l.members.filter(h=>h.id!==r),o=!0),l.sessionRoster&&l.sessionRoster.includes(r)&&(l.sessionRoster=l.sessionRoster.filter(h=>h!==r),o=!0),l.activeEnemies&&l.activeEnemies.some(h=>h.id===r)&&(l.activeEnemies=l.activeEnemies.filter(h=>h.id!==r),o=!0),o&&ye.set(l.id,l)}),He.delete(r),n(N,!1)}},!0),n(N,!0)}var R=qt(),te=e(R),g=e(te),Ve=e(g),st=e(Ve);wt(st,{class:"text-indigo-500"}),w(),t(Ve),w(2),t(g);var We=a(g,2),ae=e(We);ae.__click=()=>n(f,"characters");var it=e(ae);kt(it,{size:16}),w(),t(ae);var he=a(ae,2);he.__click=()=>n(f,"campaigns");var lt=e(he);Ze(lt,{size:16}),w(),t(he),t(We),t(te);var $e=a(te,2),nt=e($e);{var ot=r=>{var b=It(),l=e(b);Se(l,1,p,T=>T.id,(T,O)=>{var V=Ht(),U=e(V),se=e(U),J=e(se),ie=e(J,!0);t(J);var le=a(J,2),ne=e(le),me=e(ne,!0);t(ne);var oe=a(ne,2),Pe=e(oe);t(oe),t(le),t(se);var de=a(se,2);de.__click=()=>be(s(O).id);var y=e(de);Ye(y,{size:16}),t(de),t(U);var c=a(U,2),k=e(c),C=e(k),S=e(C);Ze(S,{size:12}),w(),t(C);var H=a(C,2),W=e(H,!0);t(H),t(k),t(c);var I=a(c,2);I.__click=()=>ke(we("/characters/[id]",{id:s(O).id}));var ce=a(e(I));Qe(ce,{size:14,fill:"currentColor"}),t(I),t(V),_e(()=>{j(ie,s(O).name),j(me,s(O).ancestry||"Humano"),j(Pe,`Nível ${s(O).level??""}`),j(W,s(O).paths?.novice||"-")}),_(T,V)});var o=a(l,2);o.__click=()=>Z();var h=e(o),re=e(h);Ie(re,{size:32}),t(h),w(2),t(o),t(b),_(r,b)},dt=r=>{var b=Ce(),l=X(b);{var o=h=>{var re=Wt(),T=e(re),O=e(T);Se(O,1,m,y=>y.id,(y,c)=>{var k=Ft(),C=e(k),S=e(C),H=e(S),W=e(H,!0);t(H);var I=a(H,2);{var ce=Ne=>{var Oe=At(),gt=e(Oe);Xe(gt,{size:10}),w(),t(Oe),_(Ne,Oe)};ve(I,Ne=>{s(c).isPublished&&Ne(ce)})}t(S);var L=a(S,2),ze=e(L,!0);t(L);var B=a(L,2),Me=e(B,!0);t(B),t(C);var Re=a(C,2),fe=e(Re);fe.__click=()=>ke(we("/campaigns/[id]",{id:s(c).id}));var vt=e(fe);Qe(vt,{size:18,fill:"currentColor"}),w(),t(fe);var Ue=a(fe,2),xe=e(Ue);xe.__click=()=>D(s(c));var pt=e(xe);zt(pt,{size:20}),t(xe);var je=a(xe,2);je.__click=()=>ge(s(c).id);var ut=e(je);Ye(ut,{size:20}),t(je),t(Ue),t(Re),t(k),_e(()=>{j(W,s(c).name),j(ze,s(c).gmName||"Mestre"),j(Me,s(c).description||"Uma jornada sem descrição ainda.")}),_(y,k)});var V=a(O,2);V.__click=()=>D();var U=e(V),se=e(U);Ie(se,{size:32}),t(U),w(2),t(V),t(T);var J=a(T,2),ie=e(J),le=a(e(ie),2),ne=e(le);Xe(ne,{size:14}),w(),t(le),w(2),t(ie);var me=a(ie,2),oe=e(me);Se(oe,1,i,y=>y.id,(y,c)=>{var k=Tt(),C=e(k),S=e(C),H=e(S,!0);t(S);var W=a(S,2),I=e(W),ce=e(I,!0);t(I),w(2),t(W);var L=a(W,2),ze=e(L,!0);t(L),t(C);var B=a(C,2);B.__click=()=>ke(we("/campaigns/[id]/invite",{id:s(c).id}));var Me=a(e(B));Ie(Me,{size:18,class:"group-hover:rotate-90 transition-transform"}),t(B),t(k),_e(()=>{j(H,s(c).name),j(ce,s(c).gmName||"Mestre"),j(ze,s(c).description||"Uma jornada por terras desconhecidas aguarada heróis.")}),_(y,k)});var Pe=a(oe,2);{var de=y=>{var c=Vt(),k=e(c),C=e(k);$t(C,{size:32}),t(k),w(4),t(c),_(y,c)};ve(Pe,y=>{i().length===0&&y(de)})}t(me),t(J),t(re),_(h,re)};ve(l,h=>{s(f)==="campaigns"&&h(o)},!0)}_(r,b)};ve(nt,r=>{s(f)==="characters"?r(ot):r(dt,!1)})}t($e);var qe=a($e,2);Et(qe,{get isOpen(){return s(u)},get initialData(){return s(A)},onClose:()=>n(u,!1),onSave:pe});var Ge=a(qe,2);yt(Ge,{get isOpen(){return s(F)},get initialData(){return s(G)},onClose:()=>n(F,!1),onSave:ee});var ct=a(Ge,2);xt(ct,{get isOpen(){return s(N)},get title(){return s(E).title},get message(){return s(E).message},get onConfirm(){return s(E).onConfirm},onCancel:()=>n(N,!1)}),t(R),_e(()=>{Le(ae,1,`px-5 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${s(f)==="characters"?"bg-indigo-600 text-white shadow-[0_0_20px_rgba(79,70,229,0.4)]":"text-slate-400 hover:text-white hover:bg-slate-800"}`),Le(he,1,`px-5 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${s(f)==="campaigns"?"bg-indigo-600 text-white shadow-[0_0_20px_rgba(79,70,229,0.4)]":"text-slate-400 hover:text-white hover:bg-slate-800"}`)}),_($,R),Fe(),M()}Te(["click"]);var Rt=z("<!> <!>",1);function ia($){var v=Rt(),p=X(v);Ot(p,{});var m=a(p,2);Gt(m,{}),_($,v)}export{ia as component};
