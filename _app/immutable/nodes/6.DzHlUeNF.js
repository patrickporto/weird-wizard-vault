import"../chunks/DsnmJJEf.js";import{d as ne,e as W,a as i,p as at,i as rt,f as l,j as t,r as e,s as r,g as a,C as St,t as C,n as ue,D as ea,B as Lt,O as la,q as oa,k as Le,aj as Zt,ai as ha,u as wa,v as $a}from"../chunks/DMifMBhm.js";import{d as pt,s as w,g as Ht}from"../chunks/Dp-glvE3.js";import{l as st,s as ot,p as ya,i as m}from"../chunks/COuqRsV2.js";import{a as ce,s as ut,b as Fa}from"../chunks/Bb2EGTyq.js";import{c as Oe,h as ge,i as Ga,n as va,q as Va,t as Ba,u as Yt,v as ca,x as Wa,y as Ya,k as Ka,z as Fe,I as zt,b as me,A as Kt,B as Qt,C as Qa,G as pa,M as Xa,D as Ja,E as Ea,F as Ta,H as Tt,J as ka,K as Za,L as ua,N as er,O as Ct,d as na,l as Aa,w as tr,P as ar,a as rr}from"../chunks/DkdmLFCq.js";import{p as sr}from"../chunks/D0w_JB7G.js";import{g as Pa}from"../chunks/CV7-XOrz.js";import{U as za,W as or,r as ja}from"../chunks/CRUYibrV.js";import"../chunks/BwJf7g35.js";import{s as pe,g as ir,r as Ne,e as je,i as Ie,d as De,h as Bt}from"../chunks/TsqZmrQj.js";import{i as Nt}from"../chunks/kbRnSmNT.js";import{L as Sa,U as lr}from"../chunks/DzFlpWzd.js";import{a as Ia,C as nr,L as dr,D as vr,M as ta,S as aa,G as cr,H as pr}from"../chunks/CLZFM6AL.js";import{W as ur}from"../chunks/CbiPAw9S.js";import{I as it,s as lt}from"../chunks/ChfAoN8L.js";import{a as br,M as xr,T as Wt,P as ct,b as sa,S as fr,X as ga}from"../chunks/BBdcRB6a.js";import{C as Ma}from"../chunks/BqMHeLcl.js";import{c as da}from"../chunks/nfyJHDiN.js";import{t as ba,a as Ca,s as gr}from"../chunks/0Pv_1eal.js";function ia(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];it(N,ot({name:"activity"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function _r(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];it(N,ot({name:"arrow-left"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function xa(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z"}],["path",{d:"M8 10h8"}],["path",{d:"M8 18h8"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"}]];it(N,ot({name:"backpack"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function mr(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["circle",{cx:"11",cy:"13",r:"9"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95"}],["path",{d:"m22 2-1.5 1.5"}]];it(N,ot({name:"bomb"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function Na(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]];it(N,ot({name:"book"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function _a(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"M16.17 7.83 2 22"}],["path",{d:"M4.02 12a2.827 2.827 0 1 1 3.81-4.17A2.827 2.827 0 1 1 12 4.02a2.827 2.827 0 1 1 4.17 3.81A2.827 2.827 0 1 1 19.98 12a2.827 2.827 0 1 1-3.81 4.17A2.827 2.827 0 1 1 12 19.98a2.827 2.827 0 1 1-4.17-3.81A1 1 0 1 1 4 12"}],["path",{d:"m7.83 7.83 8.34 8.34"}]];it(N,ot({name:"clover"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function hr(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["circle",{cx:"8",cy:"8",r:"6"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18"}],["path",{d:"M7 6h1v4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82"}]];it(N,ot({name:"coins"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function wr(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]];it(N,ot({name:"ellipsis"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function $r(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21"}],["path",{d:"m5.082 11.09 8.828 8.828"}]];it(N,ot({name:"eraser"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function yr(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z"}]];it(N,ot({name:"fast-forward"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function Da(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];it(N,ot({name:"file-text"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function kr(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8"}]];it(N,ot({name:"infinity"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function Ar(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"m5 8 6 6"}],["path",{d:"m4 14 6-6 2-3"}],["path",{d:"M2 5h12"}],["path",{d:"M7 2h1"}],["path",{d:"m22 22-5-10-5 10"}],["path",{d:"M14 18h6"}]];it(N,ot({name:"languages"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function zr(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"}]];it(N,ot({name:"moon"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function Sr(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z"}]];it(N,ot({name:"rewind"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function ra(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"}],["path",{d:"m14 7 3 3"}],["path",{d:"M5 6v4"}],["path",{d:"M19 14v4"}],["path",{d:"M10 2v2"}],["path",{d:"M7 8H3"}],["path",{d:"M21 16h-4"}],["path",{d:"M11 3H9"}]];it(N,ot({name:"wand-sparkles"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}function Mt(N,f){const o=st(f,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]];it(N,ot({name:"zap"},()=>o,{get iconNode(){return g},children:(k,z)=>{var n=ne(),h=W(n);lt(h,f,"default",{}),i(k,n)},$$slots:{default:!0}}))}const Mr=!1,_i=Object.freeze(Object.defineProperty({__proto__:null,prerender:Mr},Symbol.toStringTag,{value:"Module"}));var Nr=l('<div class="text-[9px] font-black text-amber-500 uppercase tracking-tighter mt-1 animate-pulse">Aguardando Aprovação</div>'),Dr=l('<div class="text-[10px] text-slate-400 mt-0.5 font-medium flex items-center gap-1"><span class="opacity-50 font-bold uppercase tracking-tighter">Mestre:</span> <span class="text-indigo-300"> </span></div>'),Er=l('<div><div class="flex items-center gap-3"><div class="relative"><div><!></div> <div></div></div> <div><div>Campanha Ativa</div> <div class="font-bold text-white text-base leading-tight"> </div> <!></div></div> <button class="bg-slate-900 border border-slate-700 p-2.5 rounded-xl text-slate-500 hover:text-red-400 transition-all active:scale-95" title="Sair"><!></button></div>'),Tr=l("<div><div></div> <span> </span></div>"),Pr=l('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><div><!></div> <h3 class="text-[11px] font-black text-slate-400 uppercase tracking-[0.15em]">Campanha Ativa</h3></div> <button class="p-2 text-slate-600 hover:text-red-400 hover:bg-red-400/5 rounded-lg transition-all opacity-0 group-hover:opacity-100" title="Abandonar Campanha"><!></button></div> <div class="space-y-1"><div class="font-bold text-white text-lg tracking-tight leading-tight"> </div> <div class="text-[10px] font-medium text-slate-500 flex items-center gap-1.5 pt-0.5"><span class="uppercase tracking-tighter opacity-70">Mestre:</span> <span class="text-indigo-400 font-bold"> </span></div></div> <div class="flex items-center justify-between pt-3 border-t border-white/5"><div class="flex items-center gap-2"><div></div> <span> </span></div> <div class="flex items-center gap-1 text-[10px] text-slate-600 font-mono"><!> </div></div></div>');function fa(N,f){at(f,!0);const o=()=>ce(Oe,"$character",k),g=()=>ce(Ga,"$isGmOnline",k),[k,z]=ut();let n=ya(f,"compact",3,!1),h=ya(f,"banner",3,!1);var P=ne(),Q=W(P);{var s=x=>{const A=St(()=>o().campaignApproval==="pending");var V=ne(),E=W(V);{var H=O=>{var c=Er(),R=t(c),_=t(R),p=t(_),d=t(p);za(d,{size:20}),e(p);var u=r(p,2);e(_);var b=r(_,2),v=t(b),$=r(v,2),j=t($,!0);e($);var q=r($,2);{var B=F=>{var ae=Nr();i(F,ae)},X=F=>{var ae=Dr(),te=r(t(ae),2),Z=t(te,!0);e(te),e(ae),C(()=>w(Z,o().gmName)),i(F,ae)};m(q,F=>{a(A)?F(B):F(X,!1)})}e(b),e(R);var U=r(R,2);U.__click=()=>{confirm("Sair da campanha?")&&ge.leaveCampaign()};var y=t(U);Sa(y,{size:18}),e(U),e(c),C(()=>{pe(c,1,`bg-indigo-600/10 backdrop-blur-md border border-indigo-500/20 rounded-2xl p-4 flex items-center justify-between shadow-xl shadow-indigo-950/20 ${a(A)?"border-amber-500/30 bg-amber-500/5":""}`),pe(p,1,`w-10 h-10 ${a(A)?"bg-amber-600/20 text-amber-400 border-amber-500/30":"bg-indigo-600/20 text-indigo-400 border-indigo-500/30"} rounded-xl flex items-center justify-center`),pe(u,1,`absolute -top-1 -right-1 w-3 h-3 ${a(A)?"bg-amber-500 animate-pulse":g()?"bg-green-500 animate-pulse":"bg-slate-600"} rounded-full border-2 border-slate-950 shadow-[0_0_8px_rgba(34,197,94,0.6)]`),pe(v,1,`text-[10px] ${a(A)?"text-amber-500/70":"text-indigo-400/70"} font-black uppercase tracking-[0.2em] leading-none mb-1`),w(j,o().campaignName)}),i(O,c)},T=O=>{var c=ne(),R=W(c);{var _=d=>{var u=Tr(),b=t(u),v=r(b,2),$=t(v,!0);e(v),e(u),C(()=>{pe(u,1,`inline-flex items-center gap-2 px-3 py-1 ${a(A)?"bg-amber-500/10 border-amber-500/20":"bg-indigo-500/10 border-indigo-500/20"} rounded-full shadow-sm glass`),pe(b,1,`w-1.5 h-1.5 rounded-full ${a(A)?"bg-amber-500 animate-pulse":g()?"bg-green-500 animate-pulse":"bg-slate-600"} shadow-[0_0_8px_rgba(34,197,94,0.4)]`),pe(v,1,`text-[9px] font-black ${a(A)?"text-amber-500":"text-indigo-400"} uppercase tracking-widest truncate max-w-[150px]`),w($,o().campaignName)}),i(d,u)},p=d=>{var u=Pr(),b=t(u),v=t(b),$=t(v),j=t($);za(j,{size:16}),e($),ue(2),e(v);var q=r(v,2);q.__click=function(...le){ge.leaveCampaign?.apply(this,le)};var B=t(q);Sa(B,{size:14}),e(q),e(b);var X=r(b,2),U=t(X),y=t(U,!0);e(U);var F=r(U,2),ae=r(t(F),2),te=t(ae,!0);e(ae),e(F),e(X);var Z=r(X,2),Y=t(Z),re=t(Y),se=r(re,2),be=t(se,!0);e(se),e(Y);var J=r(Y,2),oe=t(J);{var he=le=>{Ia(le,{size:10,class:"opacity-40 animate-spin",style:"animation-duration: 3s"})},ke=le=>{var de=ne(),we=W(de);{var $e=fe=>{or(fe,{size:10,class:"opacity-40"})},Ae=fe=>{ur(fe,{size:10,class:"opacity-40 text-red-500/50"})};m(we,fe=>{g()?fe($e):fe(Ae,!1)},!0)}i(le,de)};m(oe,le=>{a(A)?le(he):le(ke,!1)})}var Ee=r(oe);e(J),e(Z),e(u),C(()=>{pe(u,1,`bg-slate-900/50 border border-slate-800 rounded-2xl p-5 space-y-4 shadow-lg backdrop-blur-sm group hover:border-indigo-500/30 transition-all duration-300 ${!g()&&!a(A)?"opacity-60 saturate-50":""} ${a(A)?"border-amber-500/20":""}`),pe($,1,`p-1.5 ${a(A)?"bg-amber-500/10 text-amber-500":g()?"bg-indigo-500/10 text-indigo-400":"bg-slate-800 text-slate-500"} rounded-lg`),w(y,o().campaignName),w(te,o().gmName),pe(re,1,`w-1.5 h-1.5 rounded-full ${a(A)?"bg-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.4)] animate-pulse":g()?"bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.4)] animate-pulse":"bg-slate-700"}`),pe(se,1,`text-[11px] font-bold uppercase tracking-wider ${a(A)?"text-amber-500":g()?"text-slate-400":"text-slate-600"}`),w(be,a(A)?"Pendente de Aprovação":g()?"Online":"Offline"),w(Ee,` ${a(A)?"PENDENTE":g()?"SYNCED":"WAITING"}`)}),i(d,u)};m(R,d=>{n()?d(_):d(p,!1)},!0)}i(O,c)};m(E,O=>{h()?O(H):O(T,!1)})}i(x,V)};m(Q,x=>{o().campaignId&&x(s)})}i(N,P),rt(),z()}pt(["click"]);var jr=l('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),Ir=l('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"><div class="absolute inset-0 bg-gradient-to-b from-white/10 to-transparent"></div></div>'),Cr=l('<div class="absolute top-0 left-0 w-full h-full z-20 bg-cyan-400/20 pointer-events-none animate-pulse"></div>'),Or=l('<span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border border-slate-900"></span></span>'),Hr=l('<header class="bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-40 shadow-2xl"><div class="max-w-6xl mx-auto px-2 sm:px-4 py-2 sm:py-3"><div class="flex items-center justify-between gap-2 sm:gap-4"><div class="flex items-center gap-1 sm:gap-3"><button class="p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all flex items-center gap-1 group" aria-label="Voltar para Dashboard" title="Voltar para Dashboard"><!> <!></button> <button class="flex items-center gap-2 group text-left" aria-label="Informações do Personagem"><div class="w-8 h-8 sm:w-10 sm:h-10 bg-indigo-600 rounded-lg sm:rounded-full border border-white/10 flex items-center justify-center text-sm sm:text-lg font-black shadow-lg shadow-indigo-500/20 group-hover:scale-105 transition-transform"> </div> <div class="hidden xs:block svelte-fpzs02"><div class="flex items-center gap-2"><h1 class="text-xs sm:text-sm font-bold text-white leading-tight truncate max-w-[80px] sm:max-w-none group-hover:text-indigo-400 transition-colors"> </h1></div> <p class="text-[10px] text-slate-500 font-medium"> </p></div></button></div> <button class="flex-1 max-w-md cursor-pointer group px-2 sm:px-0 text-left" aria-label="Estado de Saúde"><div class="flex justify-between text-[10px] sm:text-xs mb-1.5 px-1"><span><!></span> <span class="text-slate-400 font-mono flex items-center gap-1 group-hover:text-white transition-colors"><span> </span><span class="opacity-30">/</span><span class="text-white font-bold"> </span></span></div> <div class="h-3 sm:h-5 w-full bg-slate-950 rounded-full border border-white/5 relative overflow-hidden group-hover:border-white/20 transition-all shadow-inner"><div></div> <!> <!> <!></div></button> <div class="flex items-center gap-1 sm:gap-2"><button class="p-2 text-slate-400 hover:text-indigo-400 hover:bg-indigo-400/10 rounded-full transition-all" title="Descanso"><!></button> <button class="p-2 bg-indigo-600/10 text-indigo-400 border border-indigo-400/20 rounded-lg hover:bg-indigo-600 hover:text-white transition-all relative" title="Histórico"><!> <!></button> <button class="hidden sm:flex p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all" title="Configurações"><!></button></div></div></div></header>');function Rr(N,f){at(f,!1);const o=()=>ce(Oe,"$character",s),g=()=>ce(Va,"$isIncapacitated",s),k=()=>ce(Ba,"$isInjured",s),z=()=>ce(Yt,"$damage",s),n=()=>ce(ca,"$effectiveMaxHealth",s),h=()=>ce(Wa,"$damagePercentage",s),P=()=>ce(Ya,"$tempHealth",s),Q=()=>ce(Ka,"$rollHistory",s),[s,x]=ut();function A(D){Fe.update(I=>({...I,type:D,isOpen:!0}))}Nt();var V=Hr(),E=t(V),H=t(E),T=t(H),O=t(T);O.__click=()=>Pa(ja("/"));var c=t(O);nr(c,{size:20,class:"group-hover:-translate-x-0.5 transition-transform"});var R=r(c,2);dr(R,{size:18,class:"hidden sm:block opacity-50"}),e(O);var _=r(O,2);_.__click=()=>A("character_info");var p=t(_),d=t(p,!0);e(p);var u=r(p,2),b=t(u),v=t(b),$=t(v,!0);e(v),e(b);var j=r(b,2),q=t(j);e(j),e(u),e(_),e(T);var B=r(T,2);B.__click=()=>A("health");var X=t(B),U=t(X),y=t(U);{var F=D=>{var I=ea("INCAPACITADO");i(D,I)},ae=D=>{var I=ne(),xe=W(I);{var ye=S=>{var ee=ea("FERIDO");i(S,ee)},Ce=S=>{var ee=ne(),M=W(ee);{var ve=_e=>{},ie=_e=>{var Te=ea("SAUDÁVEL");i(_e,Te)};m(M,_e=>{z()>0?_e(ve):_e(ie,!1)},!0)}i(S,ee)};m(xe,S=>{k()?S(ye):S(Ce,!1)},!0)}i(D,I)};m(y,D=>{g()?D(F):D(ae,!1)})}e(U);var te=r(U,2),Z=t(te),Y=t(Z,!0);e(Z);var re=r(Z,2),se=t(re,!0);e(re),e(te),e(X);var be=r(X,2),J=t(be),oe=r(J,2);{var he=D=>{var I=jr();C(()=>{pe(I,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10 ${g()?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":h()>=80?"bg-gradient-to-r from-red-600 to-rose-500":k()?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),ir(I,`width: ${h()??""}%`)}),i(D,I)};m(oe,D=>{h()>0&&D(he)})}var ke=r(oe,2);{var Ee=D=>{var I=Ir();i(D,I)};m(ke,D=>{z()===0&&D(Ee)})}var le=r(ke,2);{var de=D=>{var I=Cr();i(D,I)};m(le,D=>{P()>0&&D(de)})}e(be),e(B);var we=r(B,2),$e=t(we);$e.__click=()=>A("rest_confirm");var Ae=t($e);zr(Ae,{size:18}),e($e);var fe=r($e,2);fe.__click=()=>va.update(D=>!D);var ze=t(fe);vr(ze,{size:18});var Se=r(ze,2);{var L=D=>{var I=Or();i(D,I)};m(Se,D=>{Q().length>0&&D(L)})}e(fe);var K=r(fe,2);K.__click=()=>A("character_info");var G=t(K);br(G,{size:18}),e(K),e(we),e(H),e(E),e(V),C(D=>{w(d,D),w($,o().name),w(q,`Nv ${o().level??""}`),pe(U,1,`font-black uppercase tracking-wider ${g()?"text-red-500 animate-pulse":k()?"text-amber-500":z()>0?"text-slate-400":"text-emerald-500"}`),pe(Z,1,`${z()===0?"text-emerald-400":g()?"text-red-400":k()?"text-amber-400":"text-orange-400"} font-bold group-hover:text-red-300`),w(Y,z()),w(se,n()),pe(J,1,`absolute top-0 left-0 h-full w-full ${z()===0?"bg-emerald-900/20":"bg-slate-900/50"}`)},[()=>o().name.charAt(0)]),i(N,V),rt(),x()}pt(["click"]);var qr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Ur=l("<option> </option>"),Lr=l("<option> </option>"),Fr=l('<div class="grid grid-cols-3 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Dano</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Dano (d6)"/></label> <label class="block col-span-2"><span class="text-[10px] text-slate-500 uppercase font-bold">Traits</span> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Traits"/></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Empunhadura</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <label class="block col-span-2"><span class="text-[10px] text-slate-500 uppercase font-bold">Alcance</span> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Range"/></label></div>'),Gr=l('<div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Def. Fixa</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Fixed Def"/></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Def. Mod</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Mod Def"/></label></div>'),Vr=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),Br=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tipo</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Qtd</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Qtd"/></label></div> <!> <!> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),Wr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Yr=l("<option> </option>"),Kr=l("<option> </option>"),Qr=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),Xr=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tier</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <div class="relative"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tradição</span> <input list="traditions" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Tradição"/></label> <datalist id="traditions"></datalist></div></div> <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700"><label for="maxCastings" class="text-xs text-slate-400 uppercase">Castings</label> <input id="maxCastings" type="number" class="w-16 bg-slate-800 border border-slate-600 rounded p-1 text-white text-center"/></div> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase">Efeito Associado</span> <button> </button></div> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),Jr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Zr=l('<div class="flex items-center gap-2 border-l border-slate-700 pl-2"><label for="maxUses" class="text-xs text-slate-400 uppercase">Max Uses</label> <input id="maxUses" type="number" class="w-16 bg-slate-800 border border-slate-600 rounded p-1 text-white text-center"/></div>'),es=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),ts=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700"><input type="checkbox" id="isPassive" class="w-4 h-4 rounded bg-slate-800 border-slate-600 text-indigo-600 focus:ring-indigo-500"/> <label for="isPassive" class="text-xs text-slate-400 uppercase font-bold flex-1 cursor-pointer">Passivo / Ilimitado</label> <!></div> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase">Efeito Associado</span> <button> </button></div> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),as=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),rs=l('<div><label for="effectName" class="text-xs font-bold text-slate-400 uppercase">Nome</label> <input id="effectName" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/> <!></div>'),ss=l('<div class="text-center text-xs text-slate-500 italic mb-2">Nome e Descrição herdados do item pai.</div>'),os=l("<option> </option>"),is=l('<input type="number" class="bg-slate-900 border border-slate-700 rounded p-2 text-white"/>'),ls=l("<option> </option>"),ns=l('<div class="flex gap-1 items-center"><select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/3"></select> <select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4"><option>Add (+/-)</option><option>Set (=)</option><option>Mult (x)</option></select> <input type="number" class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4 text-center"/> <button class="text-slate-600 hover:text-red-400 p-1" aria-label="Remover Modificador"><!></button></div>'),ds=l('<div><label class="text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"></textarea></label></div>'),vs=l('<div class="space-y-4"><!> <div><label for="effectDuration" class="text-xs font-bold text-slate-400 uppercase">Duração</label> <div class="grid grid-cols-2 gap-2"><select id="effectDuration" class="bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"></select> <!></div></div> <div class="bg-slate-950 p-3 rounded border border-slate-800"><div class="flex justify-between items-center mb-2"><span class="text-xs font-bold text-indigo-400 uppercase">Modificadores</span> <button class="text-[10px] bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600 flex items-center gap-1"><!> Add</button></div> <div class="space-y-2"></div></div> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar Efeito</button></div>'),cs=l('<div class="space-y-4"><h3 class="text-white font-bold text-lg"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold">Valor Base <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div>'),ps=l('<div class="space-y-4"><h3 class="text-white font-bold text-lg uppercase"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold">Valor Base <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div>'),us=l('<div class="space-y-4"><div class="grid grid-cols-2 gap-4"><div><label class="text-xs text-slate-400 uppercase font-bold">Vida Normal <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs text-slate-400 uppercase font-bold">Vida Atual <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div><label class="text-xs text-red-400 uppercase font-bold">Dano <input type="number" class="w-full bg-slate-900 border border-red-900/50 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Atualizar</button></div>'),bs=l('<div class="space-y-4"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div class="grid grid-cols-2 gap-4"><div><label class="text-xs font-bold text-slate-400 uppercase">Nível <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs font-bold text-slate-400 uppercase">Ancestralidade <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div class="pt-2 border-t border-slate-700 space-y-3"><div><label class="text-[10px] font-bold text-slate-400 uppercase">Novice <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Expert <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Master <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded mt-2">Salvar</button></div>'),xs=l('<div class="mt-4 p-3 bg-green-900/20 border border-green-900/50 rounded-lg"><div class="flex items-center gap-2 mb-1 text-[10px] font-bold text-green-400 uppercase tracking-wider">Efeito Associado</div> <div class="text-xs text-green-200/70"> </div></div>'),fs=l('<button class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> APLICAR EFEITO E USAR</button> <button class="w-full bg-slate-700 hover:bg-slate-600 text-slate-300 font-bold py-2 rounded-lg text-sm transition-colors">USAR SEM APLICAR EFEITO</button>',1),gs=l('<button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> CONFIRMAR USO</button>'),_s=l('<div class="space-y-4"><div class="bg-slate-900 p-4 rounded-lg border border-slate-700"><p class="text-indigo-300 font-bold text-2xl mb-1 text-center"> </p> <p class="text-slate-400 text-sm italic mb-4 text-center"> </p> <!></div> <div class="flex flex-col gap-2 pt-2"><!> <button class="w-full text-slate-500 hover:text-slate-300 text-xs font-bold uppercase tracking-widest py-2 transition-colors mt-2">CANCELAR</button></div></div>'),ms=l('<div class="text-center space-y-6"><div class="flex justify-center"><!></div> <div><p class="text-lg text-white font-bold">Realizar Descanso?</p></div> <div class="flex gap-4 justify-center"><button class="px-6 py-2 rounded bg-slate-700 hover:bg-slate-600 text-white font-bold">Cancelar</button><button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold">Descansar</button></div></div>'),hs=l('<div class="space-y-4"><h3 class="text-center font-bold text-white uppercase mb-2">Rolagem</h3> <div class="bg-slate-900 p-4 rounded-lg border border-slate-700 text-center"><div class="flex justify-center items-center gap-6 mb-2"><button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-red-900 flex items-center justify-center text-slate-300 hover:text-white border border-slate-700" aria-label="Diminuir Modificador"><!></button> <span> </span> <button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-green-900 flex items-center justify-center text-slate-300 hover:text-white border border-slate-700" aria-label="Aumentar Modificador"><!></button></div> <div class="text-xs text-slate-500"> </div></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2">ROLAR</button></div>'),ws=l('<div class="space-y-6 text-center"><div class="bg-indigo-900/20 border border-indigo-500/30 p-4 rounded-xl"><h3 class="text-2xl font-bold text-white mb-1"> </h3> <p class="text-xs text-indigo-300 uppercase tracking-widest font-bold"> </p></div> <div class="grid grid-cols-2 gap-4"><button class="flex flex-col items-center justify-center p-6 bg-slate-900/80 hover:bg-indigo-600 border border-slate-700 hover:border-indigo-400 rounded-2xl transition-all group"><div class="p-3 rounded-full bg-slate-800 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white mb-3 shadow-lg"><!></div> <span class="font-black text-white tracking-widest uppercase text-sm">Ataque</span></button> <button class="flex flex-col items-center justify-center p-6 bg-slate-900/80 hover:bg-red-600 border border-slate-700 hover:border-red-400 rounded-2xl transition-all group"><div class="p-3 rounded-full bg-slate-800 text-red-500 group-hover:bg-red-500 group-hover:text-white mb-3 shadow-lg"><!></div> <span class="font-black text-white tracking-widest uppercase text-sm">Dano</span></button></div> <button class="text-slate-500 hover:text-slate-300 text-[10px] font-bold uppercase tracking-[0.2em]">Voltar</button></div>'),$s=l('<span class="text-[10px] text-slate-500 uppercase font-black tracking-widest">Passivo</span>'),ys=l("<span></span>"),ks=l('<span class="block text-[10px] text-slate-500 uppercase font-bold text-center">Cargas</span> <p class="flex items-center justify-center gap-1"></p> <span> </span>',1),As=l('<button class="w-full text-left p-4 bg-slate-900/50 border border-slate-700 rounded-xl hover:bg-yellow-900/20 hover:border-yellow-600/50 flex items-center justify-between transition-all group disabled:opacity-30 disabled:hover:bg-slate-900/50 disabled:hover:border-slate-700 active:scale-[0.99]"><div class="flex items-center gap-4"><div class="p-2.5 rounded-lg bg-slate-800 text-yellow-500 group-hover:scale-110 transition-transform"><!></div> <div><p class="text-white font-bold"> </p> <p class="text-[10px] text-slate-500 italic max-w-xs"> </p></div></div> <div class="text-right shrink-0"><!></div></button>'),zs=l('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm">Nenhum talento disponível.</p></div>'),Ss=l('<div class="space-y-3 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1"></div>'),Ms=l("<div></div>"),Ns=l('<button class="w-full text-left p-4 bg-slate-900/50 border border-slate-700 rounded-xl hover:bg-indigo-900/20 hover:border-indigo-600 text-indigo-400/0 hover:text-indigo-400 flex items-center justify-between transition-all group disabled:opacity-30 active:scale-[0.99]"><div class="flex items-center gap-4"><div class="p-2.5 rounded-lg bg-slate-800 text-indigo-400 group-hover:scale-110 transition-all border border-transparent group-hover:border-indigo-500/30"><!></div> <div><p class="text-white font-bold group-hover:text-indigo-300 transition-colors"> </p> <p class="text-[10px] text-slate-500 uppercase font-bold tracking-tight"> </p></div></div> <div class="text-right shrink-0"><span class="block text-[10px] text-slate-500 uppercase font-bold text-center mb-1">Casts</span> <div class="flex gap-0.5"></div></div></button>'),Ds=l('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm">Grimório vazio.</p></div>'),Es=l('<div class="space-y-3 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1"></div>'),Ts=l("<button> <!></button>"),Ps=l('<div class="text-xs"><span class="text-red-400 font-bold"> </span> <span class="text-slate-400"> </span></div>'),js=l('<p class="text-xs text-slate-600 italic text-center">Nenhuma aflição selecionada.</p>'),Is=l('<div class="grid grid-cols-2 gap-2"></div> <div class="mt-6 p-4 bg-slate-900/50 rounded-lg border border-slate-700"><p class="text-[10px] text-slate-500 uppercase font-bold mb-2">Resumo dos Efeitos</p> <div class="space-y-2"><!> <!></div></div>',1),Cs=l('<div class="p-6 overflow-y-auto custom-scrollbar"><!></div>');function Os(N,f){at(f,!0);const o=()=>ce(Fe,"$modalState",P),g=()=>ce(Yt,"$damage",P),k=()=>ce(Kt,"$normalHealth",P),z=()=>ce(Qt,"$currentHealth",P),n=()=>ce(Oe,"$character",P),h=()=>ce(Qa,"$activeEffects",P),[P,Q]=ut();let s=Lt(la({})),x=Lt(la({})),A=Lt(0),V=Lt(la([]));oa(()=>{if(o().isOpen){const{type:v,data:$}=o();v==="item"&&Le(s,$?{...$}:{name:"",type:zt.OTHER,quantity:1,price:0,description:"",availability:"Common",quality:"Standard"},!0),v==="spell"&&Le(s,$?{...$}:{name:"",tier:"Novice",tradition:"Destruction",type:"Attack",castings:1,maxCastings:1,description:"",effect:null},!0),v==="talent"&&Le(s,$?{...$}:{name:"",description:"",uses:0,maxUses:0,isPassive:!1,effect:null},!0),v==="attribute"&&Le(s,{...$},!0),v==="health"&&Le(s,{d:g(),nh:k(),ch:z()},!0),v==="character_info"&&Le(s,{name:n().name,level:n().level,ancestry:n().ancestry,novicePath:n().paths.novice,expertPath:n().paths.expert,masterPath:n().paths.master,normalHealth:k(),currentHealth:z()},!0),v==="stat"&&($==="defense"?Le(s,{key:"naturalDefense",name:"Defesa Natural",value:n().naturalDefense},!0):$==="speed"&&Le(s,{key:"speed",name:"Velocidade",value:n().speed},!0)),v==="pre_roll"&&(Le(V,h().map(j=>j.id),!0),Le(A,0)),v==="effect"&&($&&$.parentType?Le(x,$.parentData.effect||{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0):$?(Le(x,{...$},!0),Array.isArray(a(x).modifiers)||(a(x).modifiers=[])):Le(x,{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0))}});function E(){Fe.update(v=>({...v,type:null,isOpen:!1,data:null}))}function H(){if(!a(s).name?.trim())return alert("Nome é obrigatório");const v={...a(s),id:a(s).id||Date.now()};o().data?ge.updateItem(v):ge.addItem(v),E()}function T(){if(!a(s).name?.trim())return alert("Nome é obrigatório");const v={...a(s),id:a(s).id||Date.now()};o().data?ge.updateSpell(v):ge.addSpell(v),E()}function O(){if(!a(s).name?.trim())return alert("Nome é obrigatório");const v={...a(s),id:a(s).id||Date.now()};a(s).isPassive?(v.maxUses=0,v.uses=0):!o().data&&a(s).maxUses>0&&(v.uses=a(s).maxUses),o().data?ge.updateTalent(v):ge.addTalent(v),E()}function c(){const v=a(x);if(!o().data?.parentType&&!v.name?.trim())return alert("Nome do efeito é obrigatório");const $={...v,initialRounds:v.duration==="ROUNDS"?v.roundsLeft:0};if(o().data?.parentType){const j={...o().data.parentData,effect:$};Fe.update(q=>({...q,type:o().data.parentType,data:j}));return}v.id&&n().effects.some(j=>j.id===v.id)?ge.updateEffect($):ge.addEffect({...$,id:Date.now(),isActive:!0}),E()}function R(){Oe.update(v=>({...v,attributes:v.attributes.map($=>$.key===a(s).key?{...$,value:parseInt(a(s).value)}:$)})),E()}function _(){Yt.set(Math.max(0,parseInt(a(s).d))),Kt.set(Math.max(1,parseInt(a(s).nh))),Qt.set(Math.max(0,parseInt(a(s).ch))),E()}function p(){Oe.update(v=>({...v,name:a(s).name,level:parseInt(a(s).level)||0,ancestry:a(s).ancestry,paths:{novice:a(s).novicePath,expert:a(s).expertPath,master:a(s).masterPath}})),Kt.set(parseInt(a(s).normalHealth)),Qt.set(parseInt(a(s).currentHealth)),E()}function d(){Oe.update(v=>({...v,[a(s).key]:parseInt(a(s).value)||0})),E()}function u(){a(x).modifiers=[...a(x).modifiers||[],{target:"str",type:Tt.ADD,value:1}]}function b(v){a(x).modifiers=a(x).modifiers.filter(($,j)=>j!==v)}{let v=St(()=>o().type==="item"?"Editor de Item":o().type==="spell"?"Editar Magia":o().type==="talent"?"Editar Talento":o().type==="effect"?"Gerenciar Efeito":o().type==="pre_roll"?"Confirmar Rolagem":o().type==="confirm_spell"?"Confirmar Conjuração":o().type==="confirm_talent"?"Confirmar Ativação":o().type==="cast_spell"?"Grimório":o().type==="select_talent"?"Seus Talentos":o().type==="weapon_menu"?"Opções de Ataque":o().type==="character_info"?"Informações do Personagem":o().type==="health"?"Vigor & Dano":o().type==="attribute"?"Atributo":o().type==="stat"?a(s).name:o().type==="affliction"?"Gerenciar Aflições":"Informação");xr(N,{get isOpen(){return o().isOpen},onClose:E,maxWidth:"max-w-lg",get title(){return a(v)},children:($,j)=>{var q=Cs(),B=t(q);{var X=y=>{var F=Br(),ae=t(F),te=t(ae),Z=r(t(te));Ne(Z),e(te);var Y=r(te,2);{var re=L=>{var K=qr();i(L,K)};m(Y,L=>{a(s).name||L(re)})}e(ae);var se=r(ae,2),be=t(se),J=r(t(be),2);je(J,21,()=>Object.values(zt),Ie,(L,K)=>{var G=Ur(),D=t(G,!0);e(G);var I={};C(()=>{w(D,a(K)),I!==(I=a(K))&&(G.value=(G.__value=a(K))??"")}),i(L,G)}),e(J),e(be);var oe=r(be,2),he=r(t(oe),2);Ne(he),e(oe),e(se);var ke=r(se,2);{var Ee=L=>{var K=Fr(),G=t(K),D=r(t(G),2);Ne(D),e(G);var I=r(G,2),xe=r(t(I),2);Ne(xe),e(I);var ye=r(I,2),Ce=r(t(ye),2);je(Ce,21,()=>Object.values(pa),Ie,(M,ve)=>{var ie=Lr(),_e=t(ie,!0);e(ie);var Te={};C(()=>{w(_e,a(ve)),Te!==(Te=a(ve))&&(ie.value=(ie.__value=a(ve))??"")}),i(M,ie)}),e(Ce),e(ye);var S=r(ye,2),ee=r(t(S),2);Ne(ee),e(S),e(K),me(D,()=>a(s).damageDice,M=>a(s).damageDice=M),me(xe,()=>a(s).traits,M=>a(s).traits=M),Bt(Ce,()=>a(s).grip,M=>a(s).grip=M),me(ee,()=>a(s).range,M=>a(s).range=M),i(L,K)};m(ke,L=>{a(s).type===zt.WEAPON&&L(Ee)})}var le=r(ke,2);{var de=L=>{var K=Gr(),G=t(K),D=r(t(G),2);Ne(D),e(G);var I=r(G,2),xe=r(t(I),2);Ne(xe),e(I),e(K),me(D,()=>a(s).defenseFixed,ye=>a(s).defenseFixed=ye),me(xe,()=>a(s).defenseMod,ye=>a(s).defenseMod=ye),i(L,K)};m(le,L=>{a(s).type===zt.ARMOR&&L(de)})}var we=r(le,2),$e=r(t(we));Zt($e),De($e,"rows",3),e(we);var Ae=r(we,2),fe=t(Ae);{var ze=L=>{var K=Vr();K.__click=()=>{ge.deleteItem(o().data.id),E()};var G=t(K);Wt(G,{size:18}),e(K),i(L,K)};m(fe,L=>{o().data&&L(ze)})}var Se=r(fe,2);Se.__click=H,e(Ae),e(F),me(Z,()=>a(s).name,L=>a(s).name=L),Bt(J,()=>a(s).type,L=>a(s).type=L),me(he,()=>a(s).quantity,L=>a(s).quantity=L),me($e,()=>a(s).description,L=>a(s).description=L),i(y,F)},U=y=>{var F=ne(),ae=W(F);{var te=Y=>{var re=Xr(),se=t(re),be=t(se),J=r(t(be));Ne(J),e(be);var oe=r(be,2);{var he=S=>{var ee=Wr();i(S,ee)};m(oe,S=>{a(s).name||S(he)})}e(se);var ke=r(se,2),Ee=t(ke),le=r(t(Ee),2);je(le,20,()=>["Novice","Expert","Master"],Ie,(S,ee)=>{var M=Yr(),ve=t(M,!0);e(M);var ie={};C(()=>{w(ve,ee),ie!==(ie=ee)&&(M.value=(M.__value=ee)??"")}),i(S,M)}),e(le),e(Ee);var de=r(Ee,2),we=t(de),$e=r(t(we),2);Ne($e),e(we);var Ae=r(we,2);je(Ae,21,()=>Xa,Ie,(S,ee)=>{var M=Kr(),ve=t(M,!0);e(M);var ie={};C(()=>{w(ve,a(ee)),ie!==(ie=a(ee))&&(M.value=(M.__value=a(ee))??"")}),i(S,M)}),e(Ae),e(de),e(ke);var fe=r(ke,2),ze=r(t(fe),2);Ne(ze),ze.__input=()=>a(s).castings=a(s).maxCastings,e(fe);var Se=r(fe,2),L=r(t(Se),2);L.__click=()=>Fe.update(S=>({...S,type:"effect",data:{parentType:"spell",parentData:a(s)}}));var K=t(L,!0);e(L),e(Se);var G=r(Se,2),D=r(t(G));Zt(D),De(D,"rows",4),e(G);var I=r(G,2),xe=t(I);{var ye=S=>{var ee=Qr();ee.__click=()=>{ge.deleteSpell(o().data.id),E()};var M=t(ee);Wt(M,{size:18}),e(ee),i(S,ee)};m(xe,S=>{o().data&&S(ye)})}var Ce=r(xe,2);Ce.__click=T,e(I),e(re),C(()=>{pe(L,1,`text-[10px] px-2 py-1 rounded border ${a(s).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),w(K,a(s).effect?"Configurado":"Nenhum")}),me(J,()=>a(s).name,S=>a(s).name=S),Bt(le,()=>a(s).tier,S=>a(s).tier=S),me($e,()=>a(s).tradition,S=>a(s).tradition=S),me(ze,()=>a(s).maxCastings,S=>a(s).maxCastings=S),me(D,()=>a(s).description,S=>a(s).description=S),i(Y,re)},Z=Y=>{var re=ne(),se=W(re);{var be=oe=>{var he=ts(),ke=t(he),Ee=t(ke),le=r(t(Ee));Ne(le),e(Ee);var de=r(Ee,2);{var we=S=>{var ee=Jr();i(S,ee)};m(de,S=>{a(s).name||S(we)})}e(ke);var $e=r(ke,2),Ae=t($e);Ne(Ae);var fe=r(Ae,4);{var ze=S=>{var ee=Zr(),M=r(t(ee),2);Ne(M),e(ee),me(M,()=>a(s).maxUses,ve=>a(s).maxUses=ve),i(S,ee)};m(fe,S=>{a(s).isPassive||S(ze)})}e($e);var Se=r($e,2),L=r(t(Se),2);L.__click=()=>Fe.update(S=>({...S,type:"effect",data:{parentType:"talent",parentData:a(s)}}));var K=t(L,!0);e(L),e(Se);var G=r(Se,2),D=r(t(G));Zt(D),De(D,"rows",4),e(G);var I=r(G,2),xe=t(I);{var ye=S=>{var ee=es();ee.__click=()=>{ge.deleteTalent(o().data.id),E()};var M=t(ee);Wt(M,{size:18}),e(ee),i(S,ee)};m(xe,S=>{o().data&&S(ye)})}var Ce=r(xe,2);Ce.__click=O,e(I),e(he),C(()=>{pe(L,1,`text-[10px] px-2 py-1 rounded border ${a(s).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),w(K,a(s).effect?"Configurado":"Nenhum")}),me(le,()=>a(s).name,S=>a(s).name=S),Ja(Ae,()=>a(s).isPassive,S=>a(s).isPassive=S),me(D,()=>a(s).description,S=>a(s).description=S),i(oe,he)},J=oe=>{var he=ne(),ke=W(he);{var Ee=de=>{var we=vs(),$e=t(we);{var Ae=ve=>{var ie=rs(),_e=r(t(ie),2);Ne(_e);var Te=r(_e,2);{var Ge=He=>{var nt=as();i(He,nt)};m(Te,He=>{a(x).name||He(Ge)})}e(ie),me(_e,()=>a(x).name,He=>a(x).name=He),i(ve,ie)},fe=ve=>{var ie=ss();i(ve,ie)};m($e,ve=>{o().data?.parentType?ve(fe,!1):ve(Ae)})}var ze=r($e,2),Se=r(t(ze),2),L=t(Se);je(L,21,()=>Object.entries(Ea),Ie,(ve,ie)=>{var _e=St(()=>ha(a(ie),2));let Te=()=>a(_e)[0],Ge=()=>a(_e)[1];var He=os(),nt=t(He,!0);e(He);var Ve={};C(()=>{w(nt,Ge()),Ve!==(Ve=Te())&&(He.value=(He.__value=Te())??"")}),i(ve,He)}),e(L);var K=r(L,2);{var G=ve=>{var ie=is();Ne(ie),me(ie,()=>a(x).roundsLeft,_e=>a(x).roundsLeft=_e),i(ve,ie)};m(K,ve=>{a(x).duration==="ROUNDS"&&ve(G)})}e(Se),e(ze);var D=r(ze,2),I=t(D),xe=r(t(I),2);xe.__click=u;var ye=t(xe);ct(ye,{size:10}),ue(),e(xe),e(I);var Ce=r(I,2);je(Ce,21,()=>a(x).modifiers,Ie,(ve,ie,_e)=>{var Te=ns(),Ge=t(Te);je(Ge,21,()=>Object.entries(Ta),Ie,(Je,wt)=>{var We=St(()=>ha(a(wt),2));let Ze=()=>a(We)[0],xt=()=>a(We)[1];var dt=ls(),Ue=t(dt,!0);e(dt);var Pe={};C(()=>{w(Ue,xt()),Pe!==(Pe=Ze())&&(dt.value=(dt.__value=Ze())??"")}),i(Je,dt)}),e(Ge);var He=r(Ge,2),nt=t(He),Ve={},Qe=r(nt),_t={},Xe=r(Qe),Ot={};e(He);var Be=r(He,2);Ne(Be);var bt=r(Be,2);bt.__click=()=>b(_e);var mt=t(bt);Wt(mt,{size:12}),e(bt),e(Te),C(()=>{Ve!==(Ve=Tt.ADD)&&(nt.value=(nt.__value=Tt.ADD)??""),_t!==(_t=Tt.SET)&&(Qe.value=(Qe.__value=Tt.SET)??""),Ot!==(Ot=Tt.MULT)&&(Xe.value=(Xe.__value=Tt.MULT)??""),De(Be,"step",a(ie).type===Tt.MULT?"0.1":"1")}),Bt(Ge,()=>a(ie).target,Je=>a(ie).target=Je),Bt(He,()=>a(ie).type,Je=>a(ie).type=Je),me(Be,()=>a(ie).value,Je=>a(ie).value=Je),i(ve,Te)}),e(Ce),e(D);var S=r(D,2);{var ee=ve=>{var ie=ds(),_e=t(ie),Te=r(t(_e));Zt(Te),e(_e),e(ie),me(Te,()=>a(x).description,Ge=>a(x).description=Ge),i(ve,ie)};m(S,ve=>{o().data?.parentType||ve(ee)})}var M=r(S,2);M.__click=c,e(we),Bt(L,()=>a(x).duration,ve=>a(x).duration=ve),i(de,we)},le=de=>{var we=ne(),$e=W(we);{var Ae=ze=>{var Se=cs(),L=t(Se),K=t(L,!0);e(L);var G=r(L,2),D=t(G),I=r(t(D));Ne(I),e(D),e(G);var xe=r(G,2);xe.__click=R,e(Se),C(()=>w(K,a(s).name)),me(I,()=>a(s).value,ye=>a(s).value=ye),i(ze,Se)},fe=ze=>{var Se=ne(),L=W(Se);{var K=D=>{var I=ps(),xe=t(I),ye=t(xe,!0);e(xe);var Ce=r(xe,2),S=t(Ce),ee=r(t(S));Ne(ee),e(S),e(Ce);var M=r(Ce,2);M.__click=d,e(I),C(()=>w(ye,a(s).name)),me(ee,()=>a(s).value,ve=>a(s).value=ve),i(D,I)},G=D=>{var I=ne(),xe=W(I);{var ye=S=>{var ee=us(),M=t(ee),ve=t(M),ie=t(ve),_e=r(t(ie));Ne(_e),e(ie),e(ve);var Te=r(ve,2),Ge=t(Te),He=r(t(Ge));Ne(He),e(Ge),e(Te),e(M);var nt=r(M,2),Ve=t(nt),Qe=r(t(Ve));Ne(Qe),e(Ve),e(nt);var _t=r(nt,2);_t.__click=_,e(ee),me(_e,()=>a(s).nh,Xe=>a(s).nh=Xe),me(He,()=>a(s).ch,Xe=>a(s).ch=Xe),me(Qe,()=>a(s).d,Xe=>a(s).d=Xe),i(S,ee)},Ce=S=>{var ee=ne(),M=W(ee);{var ve=_e=>{var Te=bs(),Ge=t(Te),He=t(Ge),nt=r(t(He));Ne(nt),e(He),e(Ge);var Ve=r(Ge,2),Qe=t(Ve),_t=t(Qe),Xe=r(t(_t));Ne(Xe),e(_t),e(Qe);var Ot=r(Qe,2),Be=t(Ot),bt=r(t(Be));Ne(bt),e(Be),e(Ot),e(Ve);var mt=r(Ve,2),Je=t(mt),wt=t(Je),We=r(t(wt));Ne(We),e(wt),e(Je);var Ze=r(Je,2),xt=t(Ze),dt=r(t(xt));Ne(dt),e(xt),e(Ze);var Ue=r(Ze,2),Pe=t(Ue),Re=r(t(Pe));Ne(Re),e(Pe),e(Ue),e(mt);var ht=r(mt,2);ht.__click=p,e(Te),me(nt,()=>a(s).name,qe=>a(s).name=qe),me(Xe,()=>a(s).level,qe=>a(s).level=qe),me(bt,()=>a(s).ancestry,qe=>a(s).ancestry=qe),me(We,()=>a(s).novicePath,qe=>a(s).novicePath=qe),me(dt,()=>a(s).expertPath,qe=>a(s).expertPath=qe),me(Re,()=>a(s).masterPath,qe=>a(s).masterPath=qe),i(_e,Te)},ie=_e=>{var Te=ne(),Ge=W(Te);{var He=Ve=>{var Qe=_s(),_t=t(Qe),Xe=t(_t),Ot=t(Xe,!0);e(Xe);var Be=r(Xe,2),bt=t(Be,!0);e(Be);var mt=r(Be,2);{var Je=Ue=>{var Pe=xs(),Re=r(t(Pe),2),ht=t(Re);e(Re),e(Pe),C(()=>w(ht,`${o().data.effect.name??""}: ${o().data.effect.description??""}`)),i(Ue,Pe)};m(mt,Ue=>{o().data.effect&&Ue(Je)})}e(_t);var wt=r(_t,2),We=t(wt);{var Ze=Ue=>{var Pe=fs(),Re=W(Pe);Re.__click=()=>{ge.applyEffectToCharacter(o().data.effect,o().data),o().type==="confirm_spell"?ge.commitSpellCast(o().data):ge.commitTalentUse(o().data)};var ht=t(Re);Ma(ht,{size:18}),ue(),e(Re);var qe=r(Re,2);qe.__click=()=>{o().type==="confirm_spell"?ge.commitSpellCast(o().data):ge.commitTalentUse(o().data)},i(Ue,Pe)},xt=Ue=>{var Pe=gs();Pe.__click=()=>{o().type==="confirm_spell"?ge.commitSpellCast(o().data):ge.commitTalentUse(o().data)};var Re=t(Pe);Mt(Re,{size:18}),ue(),e(Pe),i(Ue,Pe)};m(We,Ue=>{o().data.effect?Ue(Ze):Ue(xt,!1)})}var dt=r(We,2);dt.__click=E,e(wt),e(Qe),C(()=>{w(Ot,o().data.name),w(bt,o().data.description)}),i(Ve,Qe)},nt=Ve=>{var Qe=ne(),_t=W(Qe);{var Xe=Be=>{var bt=ms(),mt=t(bt),Je=t(mt);Wt(Je,{size:48,class:"text-indigo-400"}),e(mt);var wt=r(mt,4),We=t(wt);We.__click=E;var Ze=r(We);Ze.__click=function(...xt){ge.confirmRest?.apply(this,xt)},e(wt),e(bt),i(Be,bt)},Ot=Be=>{var bt=ne(),mt=W(bt);{var Je=We=>{var Ze=hs(),xt=r(t(Ze),2),dt=t(xt),Ue=t(dt);Ue.__click=()=>wa(A,-1);var Pe=t(Ue);ta(Pe,{size:24}),e(Ue);var Re=r(Ue,2),ht=t(Re);e(Re);var qe=r(Re,2);qe.__click=()=>wa(A);var Xt=t(qe);ct(Xt,{size:24}),e(qe),e(dt);var $t=r(dt,2),Pt=t($t,!0);e($t),e(xt);var Dt=r(xt,2);Dt.__click=()=>ge.finalizeRoll(o().data,a(A),h().filter(Me=>a(V).includes(Me.id)).map(Me=>Me.name)),e(Ze),C(()=>{pe(Re,1,`text-4xl font-bold ${a(A)>0?"text-green-400":a(A)<0?"text-red-400":"text-slate-500"}`),w(ht,`${a(A)>0?"+":""}${a(A)??""}`),w(Pt,o().data.type==="weapon_damage"?"Dados Extras":"Boons/Banes")}),i(We,Ze)},wt=We=>{var Ze=ne(),xt=W(Ze);{var dt=Pe=>{var Re=ws(),ht=t(Re),qe=t(ht),Xt=t(qe,!0);e(qe);var $t=r(qe,2),Pt=t($t,!0);e($t),e(ht);var Dt=r(ht,2),Me=t(Dt);Me.__click=()=>Fe.update(At=>({...At,type:"pre_roll",data:{type:"weapon_attack",source:o().data}}));var yt=t(Me),kt=t(yt);Mt(kt,{size:24}),e(yt),ue(2),e(Me);var ft=r(Me,2);ft.__click=()=>Fe.update(At=>({...At,type:"pre_roll",data:{type:"weapon_damage",source:o().data}}));var jt=t(ft),Ye=t(jt);ct(Ye,{size:24}),e(jt),ue(2),e(ft),e(Dt);var et=r(Dt,2);et.__click=E,e(Re),C(()=>{w(Xt,o().data.name),w(Pt,o().data.traits||"Sem Atributos")}),i(Pe,Re)},Ue=Pe=>{var Re=ne(),ht=W(Re);{var qe=$t=>{var Pt=Ss();je(Pt,5,()=>n().talents,Ie,(Dt,Me)=>{var yt=As();yt.__click=()=>Fe.update(Ke=>({...Ke,type:"confirm_talent",data:a(Me)}));var kt=t(yt),ft=t(kt),jt=t(ft);Mt(jt,{size:20}),e(ft);var Ye=r(ft,2),et=t(Ye),At=t(et,!0);e(et);var It=r(et,2),Ft=t(It,!0);e(It),e(Ye),e(kt);var Rt=r(kt,2),qt=t(Rt);{var Jt=Ke=>{var tt=$s();i(Ke,tt)},Gt=Ke=>{var tt=ks(),vt=r(W(tt),2);je(vt,21,()=>Array(a(Me).maxUses),Ie,(Ut,Et,La)=>{var ma=ys();C(()=>pe(ma,1,`w-1.5 h-1.5 rounded-full ${La<a(Me).uses?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.5)]":"bg-slate-700"}`)),i(Ut,ma)}),e(vt);var gt=r(vt,2),Vt=t(gt);e(gt),C(()=>{pe(gt,1,`font-mono font-bold text-xs ${a(Me).uses>0?"text-green-400":"text-red-400"}`),w(Vt,`${a(Me).uses??""}/${a(Me).maxUses??""}`)}),i(Ke,tt)};m(qt,Ke=>{a(Me).isPassive?Ke(Jt):Ke(Gt,!1)})}e(Rt),e(yt),C(()=>{yt.disabled=!a(Me).isPassive&&a(Me).maxUses>0&&a(Me).uses===0,w(At,a(Me).name),w(Ft,a(Me).description)}),i(Dt,yt)},Dt=>{var Me=zs(),yt=t(Me);Mt(yt,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"}),ue(2),e(Me),i(Dt,Me)}),e(Pt),i($t,Pt)},Xt=$t=>{var Pt=ne(),Dt=W(Pt);{var Me=kt=>{var ft=Es();je(ft,5,()=>n().spells,Ie,(jt,Ye)=>{var et=Ns();et.__click=()=>Fe.update(gt=>({...gt,type:"confirm_spell",data:a(Ye)}));var At=t(et),It=t(At),Ft=t(It);ra(Ft,{size:20}),e(It);var Rt=r(It,2),qt=t(Rt),Jt=t(qt,!0);e(qt);var Gt=r(qt,2),Ke=t(Gt);e(Gt),e(Rt),e(At);var tt=r(At,2),vt=r(t(tt),2);je(vt,21,()=>Array(a(Ye).maxCastings),Ie,(gt,Vt,Ut)=>{var Et=Ms();C(()=>pe(Et,1,`w-3 h-1 rounded-full ${Ut<a(Ye).castings?"bg-indigo-500":"bg-slate-700"}`)),i(gt,Et)}),e(vt),e(tt),e(et),C(()=>{et.disabled=a(Ye).castings===0,w(Jt,a(Ye).name),w(Ke,`${a(Ye).tradition??""} • ${a(Ye).tier??""}`)}),i(jt,et)},jt=>{var Ye=Ds(),et=t(Ye);ra(et,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"}),ue(2),e(Ye),i(jt,Ye)}),e(ft),i(kt,ft)},yt=kt=>{var ft=ne(),jt=W(ft);{var Ye=et=>{var At=Is(),It=W(At);je(It,21,()=>Object.keys(ka),Ie,(Ke,tt)=>{var vt=Ts();vt.__click=()=>ge.toggleAffliction(a(tt));var gt=t(vt),Vt=r(gt);{var Ut=Et=>{Ma(Et,{size:14})};m(Vt,Et=>{n().afflictions.includes(a(tt))&&Et(Ut)})}e(vt),C(Et=>{pe(vt,1,`p-3 rounded-lg border text-sm font-bold transition-all text-left flex justify-between items-center ${Et??""}`),w(gt,`${a(tt)??""} `)},[()=>n().afflictions.includes(a(tt))?"bg-red-900/40 border-red-500 text-red-200 shadow-lg shadow-red-900/20":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-500 hover:bg-slate-850"]),i(Ke,vt)}),e(It);var Ft=r(It,2),Rt=r(t(Ft),2),qt=t(Rt);je(qt,1,()=>n().afflictions,Ie,(Ke,tt)=>{var vt=Ps(),gt=t(vt),Vt=t(gt);e(gt);var Ut=r(gt,2),Et=t(Ut,!0);e(Ut),e(vt),C(()=>{w(Vt,`${a(tt)??""}:`),w(Et,ka[a(tt)]?.effect||"")}),i(Ke,vt)});var Jt=r(qt,2);{var Gt=Ke=>{var tt=js();i(Ke,tt)};m(Jt,Ke=>{n().afflictions.length===0&&Ke(Gt)})}e(Rt),e(Ft),i(et,At)};m(jt,et=>{o().type==="affliction"&&et(Ye)},!0)}i(kt,ft)};m(Dt,kt=>{o().type==="cast_spell"?kt(Me):kt(yt,!1)},!0)}i($t,Pt)};m(ht,$t=>{o().type==="select_talent"?$t(qe):$t(Xt,!1)},!0)}i(Pe,Re)};m(xt,Pe=>{o().type==="weapon_menu"?Pe(dt):Pe(Ue,!1)},!0)}i(We,Ze)};m(mt,We=>{o().type==="pre_roll"?We(Je):We(wt,!1)},!0)}i(Be,bt)};m(_t,Be=>{o().type==="rest_confirm"?Be(Xe):Be(Ot,!1)},!0)}i(Ve,Qe)};m(Ge,Ve=>{o().type==="confirm_spell"||o().type==="confirm_talent"?Ve(He):Ve(nt,!1)},!0)}i(_e,Te)};m(M,_e=>{o().type==="character_info"?_e(ve):_e(ie,!1)},!0)}i(S,ee)};m(xe,S=>{o().type==="health"?S(ye):S(Ce,!1)},!0)}i(D,I)};m(L,D=>{o().type==="stat"?D(K):D(G,!1)},!0)}i(ze,Se)};m($e,ze=>{o().type==="attribute"?ze(Ae):ze(fe,!1)},!0)}i(de,we)};m(ke,de=>{o().type==="effect"?de(Ee):de(le,!1)},!0)}i(oe,he)};m(se,oe=>{o().type==="talent"?oe(be):oe(J,!1)},!0)}i(Y,re)};m(ae,Y=>{o().type==="spell"?Y(te):Y(Z,!1)},!0)}i(y,F)};m(B,y=>{o().type==="item"?y(X):y(U,!1)})}e(q),i($,q)},$$slots:{default:!0}})}rt(),Q()}pt(["click","input"]);var Hs=l("<div> </div>"),Rs=l('<div class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 text-center transition-all hover:bg-slate-800 active:scale-[0.98] group relative shadow-lg shadow-black/20 cursor-pointer" role="button" tabindex="0"><div class="py-2.5 px-2"><div class="text-[9px] uppercase text-slate-500 font-black tracking-widest group-hover:text-indigo-400 transition-colors mb-1"> </div> <div class="flex items-center justify-center gap-1.5 mb-1.5"><div class="text-2xl font-black text-white leading-none"> </div> <!></div> <div class="inline-flex px-2 py-0.5 bg-indigo-500/10 rounded-lg"><div class="text-xs text-indigo-400 font-black tracking-tight"> </div></div></div> <button class="absolute top-1.5 right-1.5 p-1 text-slate-700 hover:text-white hover:bg-white/5 rounded-md transition-all"><!></button></div>'),qs=l('<div class="grid grid-cols-2 gap-3"></div>');function Oa(N,f){at(f,!1);const o=()=>ce(Oe,"$character",k),g=()=>ce(Za,"$derivedStats",k),[k,z]=ut();function n(s,x){Fe.update(A=>({...A,type:s,isOpen:!0,data:x}))}function h(s){n("pre_roll",{type:"attribute",source:s})}function P(s,x){s.stopPropagation(),n("attribute",x)}Nt();var Q=qs();je(Q,5,()=>o().attributes,Ie,(s,x)=>{var A=Rs();A.__click=()=>h(a(x));var V=t(A),E=t(V),H=t(E,!0);e(E);var T=r(E,2),O=t(T),c=t(O,!0);e(O);var R=r(O,2);{var _=$=>{var j=Hs(),q=t(j);e(j),C(()=>{pe(j,1,`text-[11px] font-bold ${g()[a(x).key]>a(x).value?"text-green-500 bg-green-500/10":"text-red-500 bg-red-500/10"} px-1 rounded-md`),w(q,`${g()[a(x).key]>a(x).value?"+":""}${g()[a(x).key]-a(x).value}`)}),i($,j)};m(R,$=>{g()[a(x).key]!==a(x).value&&$(_)})}e(T);var p=r(T,2),d=t(p),u=t(d);e(d),e(p),e(V);var b=r(V,2);b.__click=$=>P($,a(x));var v=t(b);sa(v,{size:12}),e(b),e(A),C(()=>{De(A,"aria-label",`Rolar teste de ${a(x).name}`),w(H,a(x).name),w(c,g()[a(x).key]),w(u,`+${g()[a(x).key]-10}`),De(b,"aria-label",`Editar ${a(x).name??""}`)}),i(s,A)}),e(Q),i(N,Q),rt(),z()}pt(["click"]);var Us=l('<div class="p-1 bg-red-500/10 rounded"><!></div>'),Ls=l('<div class="space-y-3"><div class="grid grid-cols-2 gap-3"><button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> Defesa</div> <div class="flex items-baseline gap-1"><span class="text-3xl font-black text-white leading-none"> </span></div></button> <button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> Speed</div> <div class="flex items-baseline justify-between w-full"><span> </span> <!></div></button></div> <div class="bg-slate-900 rounded-2xl border border-slate-800 p-4 shadow-lg shadow-black/20"><span class="text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] flex items-center gap-2"><!> Bônus de Dano</span> <div class="flex items-center justify-between bg-black/40 rounded-xl p-1.5 border border-white/5"><button class="w-10 h-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg transition-all active:scale-90" aria-label="Diminuir Dano Bônus"><!></button> <div class="flex flex-col items-center"><span class="text-2xl font-black text-white leading-none tracking-tighter"> </span> <span class="text-[9px] text-slate-600 font-bold uppercase mt-1">Dados Extras</span></div> <button class="w-10 h-10 flex items-center justify-center bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-all active:scale-90 shadow-lg shadow-indigo-500/20" aria-label="Aumentar Dano Bônus"><!></button></div></div></div>');function Ha(N,f){at(f,!1);const o=()=>ce(ua,"$totalDefense",z),g=()=>ce(er,"$effectiveSpeed",z),k=()=>ce(Oe,"$character",z),[z,n]=ut();function h(Y,re){Fe.update(se=>({...se,type:Y,isOpen:!0,data:re}))}function P(){Oe.update(Y=>({...Y,bonusDamage:Math.max(0,(Y.bonusDamage||0)-1)}))}function Q(){Oe.update(Y=>({...Y,bonusDamage:(Y.bonusDamage||0)+1}))}Nt();var s=Ls(),x=t(s),A=t(x);A.__click=()=>h("stat","defense");var V=t(A),E=t(V);fr(E,{size:12}),ue(),e(V);var H=r(V,2),T=t(H),O=t(T,!0);e(T),e(H),e(A);var c=r(A,2);c.__click=()=>h("stat","speed");var R=t(c),_=t(R);Mt(_,{size:12}),ue(),e(R);var p=r(R,2),d=t(p),u=t(d,!0);e(d);var b=r(d,2);{var v=Y=>{var re=Us(),se=t(re);ia(se,{size:10,class:"text-red-500"}),e(re),i(Y,re)};m(b,Y=>{g()<k().speed&&Y(v)})}e(p),e(c),e(x);var $=r(x,2),j=t($),q=t(j);aa(q,{size:14,class:"text-indigo-500"}),ue(),e(j);var B=r(j,2),X=t(B);X.__click=P;var U=t(X);ta(U,{size:18}),e(X);var y=r(X,2),F=t(y),ae=t(F);e(F),ue(2),e(y);var te=r(y,2);te.__click=Q;var Z=t(te);ct(Z,{size:18}),e(te),e(B),e($),e(s),C(()=>{w(O,o()),pe(d,1,`text-3xl font-black ${g()<k().speed?"text-red-400":"text-white"} leading-none`),w(u,g()),w(ae,`${(k().bonusDamage||0)??""}d6`)}),i(N,s),rt(),n()}pt(["click"]);var Fs=l('<div class="bg-slate-900 p-3 rounded-2xl border border-slate-800 shadow-xl shadow-black/20"><div class="flex justify-between items-center mb-3"><h4 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-1.5"><!> Moedas</h4></div> <div class="grid grid-cols-3 gap-2"><div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-yellow-500 font-black uppercase tracking-tight relative z-10">GP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir GP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar GP"><!></button></div></div> <div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-slate-300 font-black uppercase tracking-tight relative z-10">SP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir SP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar SP"><!></button></div></div> <div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-orange-700/80 font-black uppercase tracking-tight relative z-10">CP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir CP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar CP"><!></button></div></div></div></div>');function Ra(N,f){at(f,!1);const o=()=>ce(Oe,"$character",g),[g,k]=ut(),{updateCurrency:z}=ge;Nt();var n=Fs(),h=t(n),P=t(h),Q=t(P);hr(Q,{size:14,class:"text-yellow-500"}),ue(),e(P),e(h);var s=r(h,2),x=t(s),A=r(t(x),2),V=t(A);V.__click=()=>z("gp",-1);var E=t(V);ta(E,{size:14}),e(V);var H=r(V,2),T=t(H,!0);e(H);var O=r(H,2);O.__click=()=>z("gp",1);var c=t(O);ct(c,{size:14}),e(O),e(A),e(x);var R=r(x,2),_=r(t(R),2),p=t(_);p.__click=()=>z("sp",-1);var d=t(p);ta(d,{size:14}),e(p);var u=r(p,2),b=t(u,!0);e(u);var v=r(u,2);v.__click=()=>z("sp",1);var $=t(v);ct($,{size:14}),e(v),e(_),e(R);var j=r(R,2),q=r(t(j),2),B=t(q);B.__click=()=>z("cp",-1);var X=t(B);ta(X,{size:14}),e(B);var U=r(B,2),y=t(U,!0);e(U);var F=r(U,2);F.__click=()=>z("cp",1);var ae=t(F);ct(ae,{size:14}),e(F),e(q),e(j),e(s),e(n),C(()=>{w(T,o().currency.gp),w(b,o().currency.sp),w(y,o().currency.cp)}),i(N,n),rt(),k()}pt(["click"]);var Gs=l('<div class="bg-slate-950 border border-slate-700 text-slate-200 px-3 py-1.5 rounded-xl text-sm font-bold flex items-center gap-2 group transition-all hover:border-indigo-500/50"> <button class="text-slate-500 hover:text-red-400 p-1 rounded-full hover:bg-red-400/10 transition-all"><!></button></div>'),Vs=l('<span class="text-sm text-slate-500 italic py-2 px-1">Nenhum idioma registrado.</span>'),Bs=l('<div class="bg-slate-900 p-4 rounded-2xl border border-slate-800 shadow-xl shadow-black/20"><div class="flex justify-between items-center mb-4"><h4 class="text-xs font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-2"><!> Idiomas</h4></div> <div class="flex flex-wrap gap-2 mb-4"><!> <!></div> <div class="relative group"><input type="text" placeholder="Adicionar novo idioma..." class="w-full bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500 transition-all placeholder:text-slate-600 focus:ring-1 focus:ring-indigo-500/20" aria-label="Adicionar novo idioma"/> <div class="absolute right-3 top-1/2 -translate-y-1/2 p-1.5 bg-slate-800 rounded-lg text-slate-500 group-focus-within:text-indigo-400 group-focus-within:bg-indigo-400/10 transition-all"><!></div></div></div>');function qa(N,f){at(f,!1);const o=()=>ce(Oe,"$character",g),[g,k]=ut(),{addLanguage:z,removeLanguage:n}=ge;function h(_){if(_.key==="Enter"){const p=_.target,d=p.value.trim();d!==""&&(z(d),p.value="")}}Nt();var P=Bs(),Q=t(P),s=t(Q),x=t(s);Ar(x,{size:16,class:"text-indigo-500"}),ue(),e(s),e(Q);var A=r(Q,2),V=t(A);je(V,1,()=>o().languages,Ie,(_,p,d)=>{var u=Gs(),b=t(u),v=r(b);v.__click=()=>n(d);var $=t(v);ga($,{size:14}),e(v),e(u),C(()=>{w(b,`${a(p)??""} `),De(v,"aria-label",`Remover idioma ${a(p)??""}`)}),i(_,u)});var E=r(V,2);{var H=_=>{var p=Vs();i(_,p)};m(E,_=>{o().languages.length===0&&_(H)})}e(A);var T=r(A,2),O=t(T);O.__keydown=h;var c=r(O,2),R=t(c);ct(R,{size:16}),e(c),e(T),e(P),i(N,P),rt(),k()}pt(["click","keydown"]);var Ws=l('<span class="text-xs text-slate-500 italic">Nenhuma aflição ativa.</span>'),Ys=l('<div class="group relative"><div class="text-xs bg-red-900/30 border border-red-700 text-red-200 px-2 py-1 rounded flex items-center gap-1 cursor-help" title="Aflição Ativa"> <button class="ml-1 text-red-400 hover:text-white"><!></button></div></div>'),Ks=l('<div class="bg-slate-900 p-3 rounded-xl border border-slate-800"><div class="flex justify-between items-center mb-2"><h4 class="text-[10px] font-bold text-slate-400 uppercase flex items-center gap-1"><!> Aflições</h4> <button class="text-slate-500 hover:text-white" aria-label="Adicionar Aflição"><!></button></div> <div class="flex flex-wrap gap-2"><!> <!></div></div>');function Ua(N,f){at(f,!1);const o=()=>ce(Oe,"$character",g),[g,k]=ut(),{toggleAffliction:z}=ge;function n(){Fe.update(c=>({...c,type:"affliction",isOpen:!0}))}function h(c,R){c.stopPropagation(),z(R)}Nt();var P=Ks(),Q=t(P),s=t(Q),x=t(s);ia(x,{size:12}),ue(),e(s);var A=r(s,2);A.__click=n;var V=t(A);ct(V,{size:14}),e(A),e(Q);var E=r(Q,2),H=t(E);{var T=c=>{var R=Ws();i(c,R)};m(H,c=>{o().afflictions.length===0&&c(T)})}var O=r(H,2);je(O,1,()=>o().afflictions,Ie,(c,R)=>{var _=Ys(),p=t(_),d=t(p),u=r(d);u.__click=v=>h(v,a(R));var b=t(u);ga(b,{size:10}),e(u),e(p),e(_),C(()=>{w(d,`${a(R)??""} `),De(u,"aria-label",`Remover aflição ${a(R)??""}`)}),i(c,_)}),e(E),e(P),i(N,P),rt(),k()}pt(["click"]);var Qs=l('<button><!> <span class="text-[10px] font-bold uppercase tracking-wide"> </span></button>'),Xs=l('<div class="md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-[60]"></div> <div class="md:hidden fixed bottom-0 left-0 right-0 z-[70] bg-slate-900 border-t border-slate-700 rounded-t-3xl shadow-2xl safe-area-pb"><div class="flex justify-between items-center px-6 py-4 border-b border-slate-800"><h3 class="text-sm font-black text-white uppercase tracking-wider">Mais Opções</h3> <button class="p-2 rounded-full bg-slate-800 text-slate-400 hover:text-white transition-colors"><!></button></div> <div class="grid grid-cols-3 gap-2 p-4"></div></div>',1),Js=l('<button role="tab"><!> <span class="text-[9px] font-bold uppercase tracking-wide"> </span></button>'),Zs=l('<div class="absolute inset-x-0 bottom-0 h-0.5 bg-indigo-400 shadow-[0_0_8px_rgba(129,140,248,0.5)]"></div>'),eo=l('<button role="tab"><!> <span class="tracking-widest uppercase"> </span> <!></button>'),to=l('<!> <div class="md:hidden fixed bottom-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-lg border-t border-slate-800 safe-area-pb" role="tablist"><div class="flex justify-around items-center py-2"><!> <button role="tab"><!> <span class="text-[9px] font-bold uppercase tracking-wide">MAIS</span></button></div></div> <div class="hidden md:flex bg-slate-900/80 backdrop-blur-md border-b border-slate-800 overflow-x-auto no-scrollbar sticky top-[60px] z-30" role="tablist"></div> <div class="h-4 bg-slate-950 hidden md:block"></div>',1);function ao(N,f){at(f,!0);const o=()=>ce(Ct,"$activeTab",g),[g,k]=ut(),z=[{id:"acoes",label:"AÇÕES",icon:aa},{id:"magias",label:"MAGIAS",icon:Na},{id:"talentos",label:"TALENTOS",icon:Mt},{id:"equipamento",label:"ITENS",icon:xa},{id:"notas",label:"NOTAS",icon:Da},{id:"efeitos",label:"EFEITOS",icon:ia}],n=[{id:"stats",label:"STATS",icon:lr},{id:"acoes",label:"AÇÕES",icon:aa},{id:"notas",label:"NOTAS",icon:Da},{id:"equipamento",label:"ITENS",icon:xa}],h=[{id:"magias",label:"MAGIAS",icon:Na},{id:"talentos",label:"TALENTOS",icon:Mt},{id:"efeitos",label:"EFEITOS",icon:ia}];let P=Lt(!1);function Q(_){Ct.set(_),Le(P,!1)}let s=St(()=>h.some(_=>_.id===o()));var x=to(),A=W(x);{var V=_=>{var p=Xs(),d=W(p);d.__click=()=>Le(P,!1);var u=r(d,2),b=t(u),v=r(t(b),2);v.__click=()=>Le(P,!1);var $=t(v);ga($,{size:18}),e(v),e(b);var j=r(b,2);je(j,21,()=>h,Ie,(q,B)=>{var X=Qs();X.__click=()=>Q(a(B).id);var U=t(X);da(U,()=>a(B).icon,(ae,te)=>{te(ae,{size:24})});var y=r(U,2),F=t(y,!0);e(y),e(X),C(()=>{pe(X,1,`flex flex-col items-center gap-2 p-4 rounded-2xl transition-all active:scale-95 ${o()===a(B).id?"bg-indigo-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`),w(F,a(B).label)}),i(q,X)}),e(j),e(u),ba(3,d,()=>Ca,()=>({duration:150})),ba(3,u,()=>gr,()=>({duration:200})),i(_,p)};m(A,_=>{a(P)&&_(V)})}var E=r(A,2),H=t(E),T=t(H);je(T,17,()=>n,Ie,(_,p)=>{var d=Js();d.__click=()=>Q(a(p).id);var u=t(d);{let $=St(()=>o()===a(p).id?"text-indigo-400":"text-slate-500");da(u,()=>a(p).icon,(j,q)=>{q(j,{size:20,get class(){return a($)}})})}var b=r(u,2),v=t(b,!0);e(b),e(d),C(()=>{pe(d,1,`flex flex-col items-center gap-0.5 px-3 py-2 transition-all ${o()===a(p).id?"text-indigo-400":"text-slate-500"}`),De(d,"aria-selected",o()===a(p).id),w(v,a(p).label)}),i(_,d)});var O=r(T,2);O.__click=()=>Le(P,!a(P));var c=t(O);{let _=St(()=>a(s)||a(P)?"text-indigo-400":"text-slate-500");wr(c,{size:20,get class(){return a(_)}})}ue(2),e(O),e(H),e(E);var R=r(E,2);je(R,21,()=>z,Ie,(_,p)=>{var d=eo();d.__click=()=>Ct.set(a(p).id);var u=t(d);{let q=St(()=>o()===a(p).id?"text-indigo-400":"text-slate-500");da(u,()=>a(p).icon,(B,X)=>{X(B,{size:14,get class(){return`${a(q)??""} group-hover:scale-110 transition-transform`}})})}var b=r(u,2),v=t(b,!0);e(b);var $=r(b,2);{var j=q=>{var B=Zs();i(q,B)};m($,q=>{o()===a(p).id&&q(j)})}e(d),C(()=>{pe(d,1,`px-5 lg:px-6 py-4 flex items-center gap-2 font-black text-xs transition-all whitespace-nowrap border-b-2 relative group ${o()===a(p).id?"text-indigo-400 border-indigo-500 bg-indigo-500/5":"text-slate-500 border-transparent hover:text-slate-300"}`),De(d,"aria-selected",o()===a(p).id),w(v,a(p).label)}),i(_,d)}),e(R),ue(2),C(()=>{pe(O,1,`flex flex-col items-center gap-0.5 px-3 py-2 transition-all ${a(s)||a(P)?"text-indigo-400":"text-slate-500"}`),De(O,"aria-expanded",a(P))}),i(N,x),rt(),k()}pt(["click"]);var ro=l('<span class="text-[10px] bg-indigo-900 text-indigo-200 px-1 rounded uppercase"> </span>'),so=l('<button class="text-xs bg-red-900/50 text-red-200 px-3 py-1 rounded border border-red-800 hover:bg-red-900 flex items-center gap-1"><!> </button>'),oo=l('<div class="flex flex-col sm:flex-row justify-between p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-900 cursor-pointer transition-colors gap-4 active:scale-[0.99]" role="button" tabindex="0"><div class="flex items-start gap-3"><div class="bg-slate-800 p-2 rounded text-slate-400 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2"> <!></p> <p class="text-xs text-slate-500"> </p></div></div> <div class="flex flex-col items-end gap-2"><div class="flex items-center gap-4 bg-slate-900 p-2 rounded-lg border border-slate-800"><div class="text-center px-2"><span class="block text-[10px] font-bold text-slate-500 uppercase">Dano</span> <span class="text-xl font-mono text-white font-bold"> </span></div></div> <!></div></div>'),io=l('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-500 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-indigo-900/50 p-2 rounded text-indigo-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-indigo-300 transition-colors">Conjurar Magia</p> <p class="text-xs text-slate-500">Selecione uma magia do grimório para lançar.</p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-indigo-400 uppercase tracking-wider border border-slate-800">Selecionar</div></div></div>'),lo=l('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-yellow-600 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-yellow-900/30 p-2 rounded text-yellow-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-yellow-300 transition-colors">Usar Talento</p> <p class="text-xs text-slate-500">Ative uma habilidade ou talento especial.</p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-yellow-500 uppercase tracking-wider border border-slate-800">Selecionar</div></div></div>'),no=l('<div class="flex flex-col items-center justify-center py-16 px-6 text-center bg-gradient-to-b from-slate-900/50 to-slate-950/50 rounded-[2.5rem] border border-dashed border-slate-800 shadow-2xl relative overflow-hidden group mt-4"><div class="absolute -top-24 -right-24 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full"></div> <div class="absolute -bottom-24 -left-24 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full"></div> <div class="relative"><div class="w-20 h-20 bg-slate-800 rounded-3xl flex items-center justify-center text-indigo-400 mb-6 mx-auto transform group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 shadow-xl border border-slate-700"><!></div> <h3 class="text-2xl font-black text-white mb-3 uppercase tracking-tight">Pronto para o Combate?</h3> <p class="text-slate-400 mb-8 max-w-sm mx-auto leading-relaxed">Sua lista de ações rápidas está vazia. Equipe seu herói para ver armas, magias e talentos ativos aqui.</p> <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 w-full max-w-md"><button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300">Inventário</span></button> <button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300">Magias</span></button> <button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300">Talentos</span></button></div></div></div>'),vo=l('<div class="space-y-4"><!> <!> <!> <!></div>');function co(N,f){at(f,!0);const o=()=>ce(Oe,"$character",g),[g,k]=ut(),{useConsumable:z}=ge;let n=St(()=>o().equipment.filter(_=>_.type===zt.WEAPON&&_.equippedState||_.type===zt.EXPLOSIVE)),h=St(()=>o().spells.length>0),P=St(()=>o().talents.length>0),Q=St(()=>a(n).length===0&&!a(h)&&!a(P));function s(_,p=null){Fe.update(d=>({...d,type:_,isOpen:!0,data:p}))}function x(_,p){_.stopPropagation(),z(p)}var A=vo(),V=t(A);je(V,17,()=>a(n),Ie,(_,p)=>{var d=oo();d.__click=()=>s("weapon_menu",a(p));var u=t(d),b=t(u),v=t(b);aa(v,{size:20}),e(b);var $=r(b,2),j=t($),q=t(j),B=r(q);{var X=be=>{var J=ro(),oe=t(J,!0);e(J),C(()=>w(oe,a(p).equippedState)),i(be,J)};m(B,be=>{a(p).equippedState&&be(X)})}e(j);var U=r(j,2),y=t(U);e(U),e($),e(u);var F=r(u,2),ae=t(F),te=t(ae),Z=r(t(te),2),Y=t(Z);e(Z),e(te),e(ae);var re=r(ae,2);{var se=be=>{var J=so();J.__click=ke=>x(ke,a(p));var oe=t(J);mr(oe,{size:12});var he=r(oe);e(J),C(()=>{De(J,"aria-label",`Usar ${a(p).name??""}`),w(he,` Throw (${a(p).quantity??""})`)}),i(be,J)};m(re,be=>{a(p).type===zt.EXPLOSIVE&&be(se)})}e(F),e(d),C(()=>{De(d,"aria-label",`Opções para ${a(p).name??""}`),w(q,`${a(p).name??""} `),w(y,`${(a(p).traits||"-")??""} • ${(a(p).range||"-")??""}`),w(Y,`${(a(p).damageDice||0)??""}d6`)}),i(_,d)});var E=r(V,2);{var H=_=>{var p=io();p.__click=()=>s("cast_spell");var d=t(p),u=t(d),b=t(u);ra(b,{size:20}),e(u),ue(2),e(d),ue(2),e(p),i(_,p)};m(E,_=>{a(h)&&_(H)})}var T=r(E,2);{var O=_=>{var p=lo();p.__click=()=>s("select_talent");var d=t(p),u=t(d),b=t(u);Mt(b,{size:20}),e(u),ue(2),e(d),ue(2),e(p),i(_,p)};m(T,_=>{a(P)&&_(O)})}var c=r(T,2);{var R=_=>{var p=no(),d=r(t(p),4),u=t(d),b=t(u);aa(b,{size:40,class:"opacity-80"}),e(u);var v=r(u,6),$=t(v);$.__click=()=>Ct.set("equipamento");var j=t($),q=t(j);xa(q,{size:20}),e(j),ue(2),e($);var B=r($,2);B.__click=()=>Ct.set("magias");var X=t(B),U=t(X);ra(U,{size:20}),e(X),ue(2),e(B);var y=r(B,2);y.__click=()=>Ct.set("talentos");var F=t(y),ae=t(F);Mt(ae,{size:20}),e(F),ue(2),e(y),e(v),e(d),e(p),ba(1,p,()=>Ca,()=>({duration:300})),i(_,p)};m(c,_=>{a(Q)&&_(R)})}e(A),i(N,A),rt(),k()}pt(["click"]);var po=l('<div class="p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl group hover:border-indigo-500/50 transition-all duration-300"><div class="flex justify-between items-start mb-3"><div><div class="font-bold text-white text-lg group-hover:text-indigo-300 transition-colors uppercase tracking-tight"> </div> <div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div></div> <button class="text-slate-600 hover:text-white p-1 hover:bg-slate-800 rounded-md transition-all"><!></button></div> <div class="text-sm text-slate-400 mb-4 line-clamp-2 leading-relaxed h-10"> </div> <div class="flex items-center justify-between bg-slate-950/50 p-3 rounded-xl border border-slate-800/50"><span class="text-[10px] font-black text-slate-500 uppercase tracking-widest">Usos Mágicos</span> <div class="flex items-center gap-3"><span> </span> <button class="bg-indigo-600 disabled:opacity-20 text-white text-[10px] font-black px-4 py-1.5 rounded-lg hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-900/40 active:scale-95 uppercase tracking-wider">Cast</button></div></div></div>'),uo=l('<div class="space-y-3"><h4 class="text-[10px] font-black text-indigo-400 uppercase tracking-[0.2em] flex items-center gap-2"><span class="w-8 h-px bg-indigo-500/30"></span> <span class="flex-1 h-px bg-indigo-500/30"></span></h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div>'),bo=l('<div class="text-center py-16 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium">Seu grimório está vazio.</p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> Adicionar Primeira Magia</button></div>'),xo=l('<div class="space-y-8"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight">Grimório Arcano</h3> <p class="text-xs text-slate-500">Seus feitiços e magias conhecidas.</p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95" aria-label="Adicionar Nova Magia"><!> Nova Magia</button></div> <!> <!></div>');function fo(N,f){at(f,!1);const o=()=>ce(Oe,"$character",g),[g,k]=ut();function z(V,E=null){Fe.update(H=>({...H,type:V,isOpen:!0,data:E}))}Nt();var n=xo(),h=t(n),P=r(t(h),2);P.__click=()=>z("spell");var Q=t(P);ct(Q,{size:16}),ue(),e(P),e(h);var s=r(h,2);je(s,0,()=>["Novice","Expert","Master"],Ie,(V,E)=>{var H=ne(),T=W(H);{var O=c=>{var R=uo(),_=t(R),p=r(t(_));ue(),e(_);var d=r(_,2);je(d,5,()=>o().spells.filter(u=>u.tier===E),Ie,(u,b)=>{var v=po(),$=t(v),j=t($),q=t(j),B=t(q,!0);e(q);var X=r(q,2),U=t(X);e(X),e(j);var y=r(j,2);y.__click=()=>z("spell",a(b));var F=t(y);sa(F,{size:14}),e(y),e($);var ae=r($,2),te=t(ae,!0);e(ae);var Z=r(ae,2),Y=r(t(Z),2),re=t(Y),se=t(re);e(re);var be=r(re,2);be.__click=()=>z("confirm_spell",a(b)),e(Y),e(Z),e(v),C(()=>{w(B,a(b).name),w(U,`${a(b).tradition??""} • ${a(b).type??""}`),De(y,"aria-label",`Editar ${a(b).name??""}`),w(te,a(b).description),pe(re,1,`text-sm font-mono font-bold ${a(b).castings===0?"text-red-500":"text-indigo-400"}`),w(se,`${a(b).castings??""}/${a(b).maxCastings??""}`),be.disabled=a(b).castings===0}),i(u,v)}),e(d),e(R),C(()=>w(p,` ${E??""} Spells `)),i(c,R)};m(T,c=>{o().spells.some(R=>R.tier===E)&&c(O)})}i(V,H)});var x=r(s,2);{var A=V=>{var E=bo(),H=t(E);ra(H,{size:48,class:"mx-auto text-slate-800 mb-3"});var T=r(H,4);T.__click=()=>z("spell");var O=t(T);ct(O,{size:14}),ue(),e(T),e(E),i(V,E)};m(x,V=>{o().spells.length===0&&V(A)})}e(n),i(N,n),rt(),k()}pt(["click"]);var go=l('<div class="text-2xl font-mono font-bold text-white leading-tight"> </div>'),_o=l('<div class="text-sm font-bold text-slate-500 uppercase tracking-tighter mt-1 italic">Fora de Combate</div>'),mo=l('<div class="text-center text-slate-500 italic py-4">Nenhum efeito ativo.</div>'),ho=l("<span> </span>"),wo=l('<div class="flex flex-wrap gap-1 mt-1"></div>'),$o=l('<button class="bg-yellow-900/40 hover:bg-yellow-800/40 text-yellow-500 border border-yellow-800 px-2 py-0.5 rounded flex items-center gap-1 transition-colors" aria-label="Sortear encerramento do efeito"><!> Sorte Encerra</button>'),yo=l('<div><div class="flex justify-between items-start"><div class="flex items-center gap-2"><button><div></div></button> <span class="font-bold text-white tracking-tight"> </span></div> <div class="flex gap-2"><button class="text-slate-500 hover:text-white p-1 hover:bg-slate-800 rounded transition-colors"><!></button> <button class="text-slate-500 hover:text-red-400 p-1 hover:bg-slate-800 rounded transition-colors"><!></button></div></div> <div class="text-xs text-slate-400 leading-relaxed"> </div> <!> <div class="flex justify-between items-center text-[10px] text-slate-500 font-mono mt-1 border-t border-slate-800/50 pt-2"><span class="flex items-center gap-1"><!> </span> <!></div></div>'),ko=l('<div class="space-y-4"><div class="flex justify-between items-center bg-slate-900 p-3 rounded-lg border border-slate-800"><div class="flex items-center gap-4"><button class="p-2 hover:bg-slate-700 rounded text-slate-400 disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Voltar Rodada"><!></button> <div class="text-center min-w-[80px]"><div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div> <!></div> <button class="p-2 hover:bg-slate-700 rounded text-white disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Avançar Rodada"><!></button></div> <div class="flex gap-2"><button class="bg-slate-800 hover:bg-red-900/50 text-slate-400 hover:text-red-300 px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1 border border-slate-700"><!> Limpar Inativos</button> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1"><!> Novo Efeito</button></div></div> <div class="space-y-2"><!> <!></div></div>');function Ao(N,f){at(f,!1);const o=()=>ce(Oe,"$character",g),[g,k]=ut(),{advanceRound:z,deleteEffect:n,checkLuckEnds:h}=ge;function P(U,y=null){Fe.update(F=>({...F,type:U,isOpen:!0,data:y}))}Nt();var Q=ko(),s=t(Q),x=t(s),A=t(x);A.__click=()=>z("prev");var V=t(A);Sr(V,{size:20}),e(A);var E=r(A,2),H=t(E),T=t(H,!0);e(H);var O=r(H,2);{var c=U=>{var y=go(),F=t(y,!0);e(y),C(()=>w(F,o().currentRound||1)),i(U,y)},R=U=>{var y=_o();i(U,y)};m(O,U=>{o().combatActive?U(c):U(R,!1)})}e(E);var _=r(E,2);_.__click=()=>z("next");var p=t(_);yr(p,{size:20}),e(_),e(x);var d=r(x,2),u=t(d);u.__click=function(...U){ge.cleanInactiveEffects?.apply(this,U)};var b=t(u);$r(b,{size:14}),ue(),e(u);var v=r(u,2);v.__click=()=>P("effect");var $=t(v);ct($,{size:14}),ue(),e(v),e(d),e(s);var j=r(s,2),q=t(j);{var B=U=>{var y=mo();i(U,y)};m(q,U=>{o().effects.length===0&&U(B)})}var X=r(q,2);je(X,1,()=>o().effects,Ie,(U,y)=>{var F=yo(),ae=t(F),te=t(ae),Z=t(te);Z.__click=()=>ge.toggleEffect(a(y).id);var Y=t(Z);e(Z);var re=r(Z,2),se=t(re,!0);e(re),e(te);var be=r(te,2),J=t(be);J.__click=()=>P("effect",a(y));var oe=t(J);sa(oe,{size:14}),e(J);var he=r(J,2);he.__click=()=>n(a(y).id);var ke=t(he);Wt(ke,{size:14}),e(he),e(be),e(ae);var Ee=r(ae,2),le=t(Ee,!0);e(Ee);var de=r(Ee,2);{var we=K=>{var G=wo();je(G,5,()=>a(y).modifiers,Ie,(D,I)=>{var xe=ho(),ye=t(xe);e(xe),C(()=>{pe(xe,1,`text-[9px] px-1.5 py-0.5 rounded border ${a(I).type===Tt.SET?"bg-yellow-900/30 text-yellow-200 border-yellow-800":"bg-slate-800 text-slate-300 border-slate-700"} font-medium`),w(ye,`${(Ta[a(I).target]||a(I).target)??""}: ${a(I).type===Tt.SET?"=":a(I).type===Tt.MULT?"x":a(I).value>0?"+":""}${a(I).value??""}`)}),i(D,xe)}),e(G),i(K,G)};m(de,K=>{a(y).isActive&&Array.isArray(a(y).modifiers)&&a(y).modifiers.length>0&&K(we)})}var $e=r(de,2),Ae=t($e),fe=t(Ae);Ia(fe,{size:10,class:"text-indigo-400"});var ze=r(fe);e(Ae);var Se=r(Ae,2);{var L=K=>{var G=$o();G.__click=()=>h(a(y).id);var D=t(G);_a(D,{size:10}),ue(),e(G),i(K,G)};m(Se,K=>{a(y).duration==="LUCK_ENDS"&&a(y).isActive&&K(L)})}e($e),e(F),C(()=>{pe(F,1,`p-3 rounded border flex flex-col gap-2 transition-all ${a(y).isActive?"bg-slate-900 border-indigo-900 shadow-lg shadow-indigo-950/20":"bg-slate-950 border-slate-800 opacity-60"}`),pe(Z,1,`w-8 h-4 rounded-full relative transition-colors ${a(y).isActive?"bg-green-500":"bg-slate-600"}`),De(Z,"aria-label",a(y).isActive?"Desativar efeito {eff.name}":"Ativar efeito {eff.name}"),De(Z,"aria-pressed",a(y).isActive),pe(Y,1,`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${a(y).isActive?"left-4.5":"left-0.5"}`),w(se,a(y).name),De(J,"aria-label",`Editar ${a(y).name??""}`),De(he,"aria-label",`Excluir ${a(y).name??""}`),w(le,a(y).description),w(ze,` ${Ea[a(y).duration]??""} ${a(y).duration==="ROUNDS"?`(${a(y).roundsLeft})`:""}`)}),i(U,F)}),e(j),e(Q),C(()=>{A.disabled=!!o().campaignId,w(T,o().combatActive?"Rodada Atual":"Status"),_.disabled=!!o().campaignId}),i(N,Q),rt(),k()}pt(["click"]);var zo=l('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1">Tipo</span> <span class="font-bold text-slate-300 text-xs flex items-center justify-center gap-1.5 bg-slate-800 px-2 py-1 rounded-md"><!> Passivo</span>',1),So=l('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1">Usos</span> <span> <span class="text-slate-600 text-sm"> </span></span>',1),Mo=l('<div class="flex gap-2"><button title="Recuperar Uso" class="bg-slate-800 disabled:opacity-20 hover:bg-green-600/20 text-green-400 p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-green-500/50"><!></button> <button title="Usar Talento" class="bg-slate-800 disabled:opacity-20 hover:bg-indigo-600/20 text-white p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-indigo-500/50"><!></button></div>'),No=l('<div class="p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl flex flex-col md:flex-row md:items-center gap-6 group hover:border-indigo-500/50 hover:bg-slate-900/60 transition-all duration-300"><div class="flex-1"><div class="flex items-center gap-3 mb-2"><div class="p-2 rounded-lg bg-slate-800 text-yellow-500 group-hover:scale-110 transition-transform shadow-inner"><!></div> <h4 class="font-bold text-white text-lg tracking-tight uppercase tracking-tight"> </h4> <button class="text-slate-600 hover:text-indigo-400 opacity-0 group-hover:opacity-100 transition-all transform hover:scale-110"><!></button></div> <p class="text-sm text-slate-400 leading-relaxed max-w-2xl"> </p></div> <div class="shrink-0 flex items-center gap-4 bg-slate-950/50 p-3 rounded-xl border border-slate-800 shadow-inner"><div class="text-center px-2 border-r border-slate-800 pr-4 min-w-[80px]"><!></div> <!></div></div>'),Do=l('<div class="text-center py-12 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium">Você ainda não possui talentos cadastrados.</p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> Adicionar Primeiro Talento</button></div>'),Eo=l('<div class="space-y-6"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight">Talentos & Habilidades</h3> <p class="text-xs text-slate-500">Suas capacidades especiais e passivas.</p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95" aria-label="Adicionar Novo Talento"><!> Novo Talento</button></div> <div class="grid grid-cols-1 gap-4"><!> <!></div></div>');function To(N,f){at(f,!1);const o=()=>ce(Oe,"$character",g),[g,k]=ut(),{recoverTalent:z}=ge;function n(H,T=null){Fe.update(O=>({...O,type:H,isOpen:!0,data:T}))}Nt();var h=Eo(),P=t(h),Q=r(t(P),2);Q.__click=()=>n("talent");var s=t(Q);ct(s,{size:16}),ue(),e(Q),e(P);var x=r(P,2),A=t(x);je(A,1,()=>o().talents,Ie,(H,T)=>{var O=No(),c=t(O),R=t(c),_=t(R),p=t(_);Mt(p,{size:18}),e(_);var d=r(_,2),u=t(d,!0);e(d);var b=r(d,2);b.__click=()=>n("talent",a(T));var v=t(b);sa(v,{size:14}),e(b),e(R);var $=r(R,2),j=t($,!0);e($),e(c);var q=r(c,2),B=t(q),X=t(B);{var U=te=>{var Z=zo(),Y=r(W(Z),2),re=t(Y);kr(re,{size:12,class:"text-indigo-400"}),ue(),e(Y),i(te,Z)},y=te=>{var Z=So(),Y=r(W(Z),2),re=t(Y,!0),se=r(re),be=t(se);e(se),e(Y),C(()=>{pe(Y,1,`font-mono font-bold text-lg ${a(T).uses===0?"text-red-400":"text-white"}`),w(re,a(T).uses),w(be,`/${a(T).maxUses??""}`)}),i(te,Z)};m(X,te=>{a(T).isPassive?te(U):te(y,!1)})}e(B);var F=r(B,2);{var ae=te=>{var Z=Mo(),Y=t(Z);Y.__click=()=>z(a(T).id);var re=t(Y);ct(re,{size:18}),e(Y);var se=r(Y,2);se.__click=()=>n("confirm_talent",a(T));var be=t(se);Mt(be,{size:18}),e(se),e(Z),C(()=>{Y.disabled=a(T).uses>=a(T).maxUses,De(Y,"aria-label",`Recuperar uso de ${a(T).name??""}`),se.disabled=a(T).uses===0,De(se,"aria-label",`Usar ${a(T).name??""}`)}),i(te,Z)};m(F,te=>{a(T).isPassive||te(ae)})}e(q),e(O),C(()=>{w(u,a(T).name),De(b,"aria-label",`Editar ${a(T).name??""}`),w(j,a(T).description)}),i(H,O)});var V=r(A,2);{var E=H=>{var T=Do(),O=t(T);Mt(O,{size:48,class:"mx-auto text-slate-800 mb-3"});var c=r(O,4);c.__click=()=>n("talent");var R=t(c);ct(R,{size:14}),ue(),e(c),e(T),i(H,T)};m(V,H=>{o().talents.length===0&&H(E)})}e(x),e(h),i(N,h),rt(),k()}pt(["click"]);var Po=l('<span class="block italic text-slate-400"> </span>'),jo=l("• Def <!>",1),Io=l('<button class="text-xs bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600">Usar</button>'),Co=l("<button> </button>"),Oo=l("<button>2H</button>"),Ho=l("<button>Main</button>"),Ro=l("<!> <button>Off</button>",1),qo=l('<div class="flex justify-center gap-1"><!></div>'),Uo=l('<tr class="hover:bg-slate-900/50"><td class="p-3"><div class="font-bold text-white"> </div> <div class="text-[10px] text-slate-500"> <!> <!></div></td><td class="p-3"><span class="text-[10px] border border-slate-700 px-1 rounded uppercase bg-slate-900"> </span></td><td class="p-3 text-center"><!></td><td class="p-3 text-right font-mono"> </td><td class="p-3 text-right"><button class="text-slate-500 hover:text-white"><!></button></td></tr>'),Lo=l('<div class="space-y-4"><div class="lg:hidden"><!></div> <div class="flex justify-between items-center"><h3 class="text-xs font-bold text-slate-500 uppercase">Inventário</h3> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-3 py-1.5 rounded text-white font-bold flex items-center gap-1"><!> Novo Item</button></div> <div class="bg-slate-950 rounded-lg border border-slate-800 overflow-hidden"><table class="w-full text-sm text-left"><thead class="bg-slate-900 text-slate-400 font-bold uppercase text-[10px]"><tr><th class="p-3">Item</th><th class="p-3">Tipo</th><th class="p-3 text-center">Ações / Equipar</th><th class="p-3 text-right">Qtd</th><th class="p-3 w-8"></th></tr></thead><tbody class="divide-y divide-slate-800 text-slate-300"></tbody></table></div></div>');function Fo(N,f){at(f,!1);const o=()=>ce(Oe,"$character",g),[g,k]=ut(),{useConsumable:z,equipItem:n}=ge;function h(O,c=null){Fe.update(R=>({...R,type:O,isOpen:!0,data:c}))}Nt();var P=Lo(),Q=t(P),s=t(Q);Ra(s,{}),e(Q);var x=r(Q,2),A=r(t(x),2);A.__click=()=>h("item");var V=t(A);ct(V,{size:14}),ue(),e(A),e(x);var E=r(x,2),H=t(E),T=r(t(H));je(T,5,()=>o().equipment,Ie,(O,c)=>{var R=Uo(),_=t(R),p=t(_),d=t(p,!0);e(p);var u=r(p,2),b=t(u),v=r(b);{var $=J=>{var oe=Po(),he=t(oe,!0);e(oe),C(()=>w(he,a(c).notes)),i(J,oe)};m(v,J=>{a(c).notes&&J($)})}var j=r(v,2);{var q=J=>{var oe=jo(),he=r(W(oe));{var ke=le=>{var de=ea();C(()=>w(de,`Fixed ${a(c).defenseFixed??""}`)),i(le,de)},Ee=le=>{var de=ea();C(()=>w(de,`+${a(c).defenseMod??""}`)),i(le,de)};m(he,le=>{a(c).defenseFixed?le(ke):le(Ee,!1)})}i(J,oe)};m(j,J=>{a(c).type===zt.ARMOR&&J(q)})}e(u),e(_);var B=r(_),X=t(B),U=t(X,!0);e(X),e(B);var y=r(B),F=t(y);{var ae=J=>{var oe=Io();oe.__click=()=>z(a(c)),C(()=>{oe.disabled=a(c).quantity<=0,De(oe,"aria-label",`Usar ${a(c).name??""}`)}),i(J,oe)},te=J=>{var oe=ne(),he=W(oe);{var ke=le=>{var de=Co();de.__click=()=>n(a(c));var we=t(de,!0);e(de),C(()=>{pe(de,1,`text-xs px-2 py-1 rounded border transition-colors ${a(c).equipped?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-400"}`),De(de,"aria-label",a(c).equipped?"Desequipar armadura":"Equipar armadura"),w(we,a(c).equipped?"Equipado":"Equipar")}),i(le,de)},Ee=le=>{var de=ne(),we=W(de);{var $e=Ae=>{var fe=qo(),ze=t(fe);{var Se=K=>{var G=Oo();G.__click=()=>n(a(c),a(c).equippedState?null:"two"),C(()=>{pe(G,1,`text-[10px] px-2 py-1 rounded border ${a(c).equippedState==="two"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),De(G,"aria-label",a(c).equippedState==="two"?"Desequipar 2H":"Equipar 2H")}),i(K,G)},L=K=>{var G=Ro(),D=W(G);{var I=ye=>{var Ce=Ho();Ce.__click=()=>n(a(c),a(c).equippedState==="main"?null:"main"),C(()=>{pe(Ce,1,`text-[10px] px-2 py-1 rounded border ${a(c).equippedState==="main"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),De(Ce,"aria-label",a(c).equippedState==="main"?"Desequipar Main Hand":"Equipar Main Hand")}),i(ye,Ce)};m(D,ye=>{a(c).grip!==pa.OFF&&ye(I)})}var xe=r(D,2);xe.__click=()=>n(a(c),a(c).equippedState==="off"?null:"off"),C(()=>{pe(xe,1,`text-[10px] px-2 py-1 rounded border ${a(c).equippedState==="off"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),De(xe,"aria-label",a(c).equippedState==="off"?"Desequipar Off Hand":"Equipar Off Hand")}),i(K,G)};m(ze,K=>{a(c).grip===pa.TWO?K(Se):K(L,!1)})}e(fe),i(Ae,fe)};m(we,Ae=>{(a(c).type===zt.WEAPON||a(c).type===zt.SHIELD)&&Ae($e)},!0)}i(le,de)};m(he,le=>{a(c).type===zt.ARMOR?le(ke):le(Ee,!1)},!0)}i(J,oe)};m(F,J=>{a(c).type===zt.CONSUMABLE?J(ae):J(te,!1)})}e(y);var Z=r(y),Y=t(Z,!0);e(Z);var re=r(Z),se=t(re);se.__click=()=>h("item",a(c));var be=t(se);sa(be,{size:14}),e(se),e(re),e(R),C(()=>{w(d,a(c).name),w(b,`${a(c).quality??""} • ${a(c).availability??""} • ${a(c).price??""}gp `),w(U,a(c).type),w(Y,a(c).quantity),De(se,"aria-label",`Editar ${a(c).name??""}`)}),i(O,R)}),e(T),e(H),e(E),e(P),i(N,P),rt(),k()}pt(["click"]);var Go=l('<div class="space-y-6"><div class="lg:hidden"><!></div> <div class="space-y-4"><div class="flex justify-between items-center mb-2"><h3 class="text-xs font-bold text-slate-500 uppercase">Anotações do Personagem</h3> <span class="text-[10px] text-slate-600 italic">Salvo automaticamente</span></div> <textarea class="w-full h-[50vh] bg-slate-950 border border-slate-800 rounded p-4 text-white resize-none focus:border-indigo-500 focus:outline-none custom-scrollbar leading-relaxed font-mono text-sm" placeholder="Escreva aqui a história, anotações de campanha, NPCs importantes, segredos..." aria-label="Anotações do personagem"></textarea></div></div>');function Vo(N,f){at(f,!1);const o=()=>ce(Oe,"$character",g),[g,k]=ut();Nt();var z=Go(),n=t(z),h=t(n);qa(h,{}),e(n);var P=r(n,2),Q=r(t(P),2);Zt(Q),e(P),e(z),me(Q,()=>o().notes,s=>Fa(Oe,$a(o).notes=s,$a(o))),i(N,z),rt(),k()}var Bo=l('<div class="space-y-4 flex-1 flex flex-col"><!> <button class="w-full bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 p-4 rounded-2xl border border-emerald-500/30 flex items-center justify-center gap-3 group transition-all shadow-lg shadow-emerald-900/30 hover:shadow-emerald-500/20 active:scale-[0.98] cursor-pointer"><div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform"><!></div> <span class="font-black text-white uppercase tracking-wider text-sm">Teste de Sorte</span></button> <!> <!> <div class="lg:hidden mt-auto pt-6"><!></div></div>');function Wo(N,f){at(f,!1),Nt();var o=Bo(),g=t(o);Oa(g,{});var k=r(g,2);k.__click=()=>Fe.set({type:"pre_roll",isOpen:!0,data:{type:"luck",source:{name:"Sorte"}}});var z=t(k),n=t(z);_a(n,{size:24,class:"text-white"}),e(z),ue(2),e(k);var h=r(k,2);Ha(h,{});var P=r(h,2);Ua(P,{});var Q=r(P,2),s=t(Q);fa(s,{banner:!0}),e(Q),e(o),i(N,o),rt()}pt(["click"]);var Yo=l('<div class="min-h-screen flex flex-col items-center justify-center p-4"><div class="bg-slate-900 border border-slate-800 rounded-3xl p-8 max-w-md w-full text-center shadow-2xl"><div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-600"><!></div> <h1 class="text-2xl font-black text-white mb-2 uppercase tracking-tight">Personagem Não Encontrado</h1> <p class="text-slate-400 mb-8">Este personagem não existe na sua base local. Crie um novo personagem através da página inicial.</p> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all"><!> Voltar ao Início</button></div></div>'),Ko=l('<!> <!> <!> <main class="max-w-6xl mx-auto md:px-4 mt-6 lg:mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6"><aside class="hidden lg:block lg:col-span-3 space-y-4"><!> <button class="w-full bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 p-4 rounded-2xl border border-emerald-500/30 flex items-center justify-center gap-3 group transition-all shadow-lg shadow-emerald-900/30 hover:shadow-emerald-500/20 active:scale-[0.98] cursor-pointer"><div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform"><!></div> <span class="font-black text-white uppercase tracking-wider text-sm">Teste de Sorte</span></button> <!> <!> <!> <!> <div class="pt-2"><!></div></aside> <section class="lg:col-span-9"><div class="bg-slate-900 md:rounded-xl md:border md:border-slate-800 min-h-[calc(100vh-200px)] md:min-h-[60vh] flex flex-col"><!> <div class="p-4 md:p-6 flex-1 flex flex-col"><!> <!> <!> <!> <!> <!> <!></div></div></section></main> <div class="hidden"><!></div>',1),Qo=l('<div class="flex items-center justify-center min-h-screen"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"></div></div>'),Xo=l('<div class="min-h-screen bg-slate-950 text-slate-100 font-sans pb-28 md:pb-20 relative overflow-x-hidden"><!></div> ```',1);function mi(N,f){at(f,!0);const o=()=>ce(Oe,"$character",x),g=()=>ce(Kt,"$normalHealth",x),k=()=>ce(Qt,"$currentHealth",x),z=()=>ce(Yt,"$damage",x),n=()=>ce(ua,"$totalDefense",x),h=()=>ce(ca,"$effectiveMaxHealth",x),P=()=>ce(sr,"$page",x),Q=()=>ce(va,"$isHistoryOpen",x),s=()=>ce(Ct,"$activeTab",x),[x,A]=ut();let V=Lt(!1),E=Lt(!1),H=Lt(null);oa(()=>{if(!a(V)||a(E)||!a(H))return;const d=o(),u=g(),b=k(),v=z(),$=n(),j=h(),q={...d,normalHealth:u,currentHealth:b,damage:v};na.set(a(H),q),d.campaignId&&Aa({id:a(H),type:"player",name:d.name,level:d.level,ancestry:d.ancestry,damage:v,currentHealth:b,normalHealth:u,health:j,defense:$,initiative:d.initiative,acted:d.acted,afflictions:d.afflictions||[],campaignApproval:d.campaignApproval})}),oa(()=>{if(!a(V)||a(E)||!a(H)||!Ht(Oe).campaignId)return;const u=setInterval(()=>{const b=Ht(Oe);Aa({id:a(H),type:"player",name:b.name,level:b.level,ancestry:b.ancestry,damage:Ht(Yt),currentHealth:Ht(Qt),normalHealth:Ht(Kt),health:Ht(ca),defense:Ht(ua),initiative:b.initiative,acted:b.acted,afflictions:b.afflictions||[],campaignApproval:b.campaignApproval})},3e4);return()=>clearInterval(u)}),oa(()=>{const d=P().params.id;d&&d!==a(H)&&T(d)});async function T(d){if(Le(V,!1),Le(E,!1),Le(H,d,!0),await tr(),na.has(d)){const u=na.get(d);Oe.set({...ar,...u,id:d}),u.normalHealth!==void 0&&Kt.set(u.normalHealth),u.currentHealth!==void 0&&Qt.set(u.currentHealth),u.damage!==void 0&&Yt.set(u.damage);const b=Ht(Oe);b.campaignId&&rr(b.campaignId,!1,a(H))}else Le(E,!0);window.innerWidth<768?Ct.set("stats"):Ht(Ct)==="stats"&&Ct.set("acoes"),Le(V,!0)}var O=Xo(),c=W(O),R=t(c);{var _=d=>{var u=ne(),b=W(u);{var v=j=>{var q=Yo(),B=t(q),X=t(B),U=t(X);cr(U,{size:40}),e(X);var y=r(X,6);y.__click=()=>Pa(ja("/"));var F=t(y);_r(F,{size:18}),ue(),e(y),e(B),e(q),i(j,q)},$=j=>{var q=Ko(),B=W(q);pr(B,{get isOpen(){return Q()},onClose:()=>va.set(!1)});var X=r(B,2);Os(X,{});var U=r(X,2);Rr(U,{});var y=r(U,2),F=t(y),ae=t(F);Oa(ae,{});var te=r(ae,2);te.__click=()=>Fe.set({type:"pre_roll",isOpen:!0,data:{type:"luck",source:{name:"Sorte"}}});var Z=t(te),Y=t(Z);_a(Y,{size:24,class:"text-white"}),e(Z),ue(2),e(te);var re=r(te,2);Ha(re,{});var se=r(re,2);Ra(se,{});var be=r(se,2);qa(be,{});var J=r(be,2);Ua(J,{});var oe=r(J,2),he=t(oe);fa(he,{}),e(oe),e(F);var ke=r(F,2),Ee=t(ke),le=t(Ee);ao(le,{});var de=r(le,2),we=t(de);{var $e=M=>{Wo(M,{})};m(we,M=>{s()==="stats"&&M($e)})}var Ae=r(we,2);{var fe=M=>{co(M,{})};m(Ae,M=>{s()==="acoes"&&M(fe)})}var ze=r(Ae,2);{var Se=M=>{Ao(M,{})};m(ze,M=>{s()==="efeitos"&&M(Se)})}var L=r(ze,2);{var K=M=>{fo(M,{})};m(L,M=>{s()==="magias"&&M(K)})}var G=r(L,2);{var D=M=>{To(M,{})};m(G,M=>{s()==="talentos"&&M(D)})}var I=r(G,2);{var xe=M=>{Fo(M,{})};m(I,M=>{s()==="equipamento"&&M(xe)})}var ye=r(I,2);{var Ce=M=>{Vo(M,{})};m(ye,M=>{s()==="notas"&&M(Ce)})}e(de),e(Ee),e(ke),e(y);var S=r(y,2),ee=t(S);fa(ee,{banner:!0}),e(S),i(j,q)};m(b,j=>{a(E)?j(v):j($,!1)})}i(d,u)},p=d=>{var u=Qo();i(d,u)};m(R,d=>{a(V)?d(_):d(p,!1)})}e(c),ue(),i(N,O),rt(),A()}pt(["click"]);export{mi as component,_i as universal};
