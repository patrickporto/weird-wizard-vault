import"../chunks/DsnmJJEf.js";import"../chunks/BwJf7g35.js";import{d as fe,e as D,a as f,p as Te,i as Pe,k as u,B as O,g as l,f as $,j as e,n as y,r as t,O as wt,q as Be,s,t as re,ah as Gt}from"../chunks/DMifMBhm.js";import{d as Ie,o as et,g as q,w as Ht,s as H}from"../chunks/Dp-glvE3.js";import{l as at,s as ot,i as Q,p as ze}from"../chunks/COuqRsV2.js";import{I as st,s as rt}from"../chunks/ChfAoN8L.js";import{r as Y,s as qe,e as Ze}from"../chunks/TsqZmrQj.js";import{s as yt,a as $e}from"../chunks/Bb2EGTyq.js";import{a as tt,l as kt,C as Bt}from"../chunks/CdqG5YMz.js";import{S as qt,C as Ut,u as vt,P as pt,G as gt}from"../chunks/EPpsHNXP.js";import{b as Z,d as pe,e as ge,p as Vt}from"../chunks/DkdmLFCq.js";import{g as Ge}from"../chunks/CV7-XOrz.js";import{U as Jt,r as He,W as Wt}from"../chunks/CRUYibrV.js";import{M as Ct,a as Dt,T as ft,P as Qe,b as Rt}from"../chunks/BBdcRB6a.js";import{U as St,L as Lt}from"../chunks/DzFlpWzd.js";import{h as Kt}from"../chunks/BYmFNSF7.js";function Yt(r,a){const n=at(a,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"}]];st(r,ot({name:"cloud"},()=>n,{get iconNode(){return i},children:(o,b)=>{var c=fe(),m=D(c);rt(m,a,"default",{}),f(o,c)},$$slots:{default:!0}}))}function Zt(r,a){const n=at(a,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];st(r,ot({name:"download"},()=>n,{get iconNode(){return i},children:(o,b)=>{var c=fe(),m=D(c);rt(m,a,"default",{}),f(o,c)},$$slots:{default:!0}}))}function mt(r,a){const n=at(a,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3"}]];st(r,ot({name:"scroll"},()=>n,{get iconNode(){return i},children:(o,b)=>{var c=fe(),m=D(c);rt(m,a,"default",{}),f(o,c)},$$slots:{default:!0}}))}var Qt=$('<button class="fixed bottom-6 right-6 z-40 bg-indigo-600 hover:bg-indigo-500 text-white p-4 rounded-full shadow-2xl shadow-indigo-900/50 flex items-center gap-2 font-bold animate-pulse hover:animate-none transition-all active:scale-95"><!> <span class="text-sm uppercase tracking-wider hidden sm:inline">Instalar App</span></button>');function Xt(r,a){Te(a,!0);let n=O(null),i=O(!1);et(()=>{window.addEventListener("beforeinstallprompt",v=>{v.preventDefault(),u(n,v,!0),u(i,!0)}),window.addEventListener("appinstalled",()=>{u(n,null),u(i,!1)})});async function o(){if(!l(n))return;l(n).prompt();const{outcome:v}=await l(n).userChoice;v==="accepted"&&(u(n,null),u(i,!1))}var b=fe(),c=D(b);{var m=v=>{var g=Qt();g.__click=o;var h=e(g);Zt(h,{size:24}),y(2),t(g),f(v,g)};Q(c,v=>{l(i)&&v(m)})}f(r,b),Pe()}Ie(["click"]);var ea=$('<div class="space-y-4"><div><label for="char-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nome do Personagem</label> <input id="char-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Alaric, o Errante"/></div> <div><label for="char-player" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> Nome do Jogador</label> <input id="char-player" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-ancestry" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Ancestralidade</label> <input id="char-ancestry" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Humano"/></div> <div><label for="char-level" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nível</label> <input id="char-level" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div> <div><label for="char-path" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Trilha Inicial (Novice)</label> <input id="char-path" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Guerreiro, Mago"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-defense" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Defesa</label> <input id="char-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div> <div><label for="char-health" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Vida Máxima</label> <input id="char-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div></div> <div class="flex gap-3 mt-8"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-3 rounded-xl text-white font-bold active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95">Criar Personagem</button></div>',1);function ta(r,a){Te(a,!0);let n=ze(a,"isOpen",3,!1),i=ze(a,"initialData",3,"{}"),o=wt({name:"",playerName:"",ancestry:"",novicePath:"",level:1,defense:10,health:24});Be(()=>{if(n()&&i())try{const c=JSON.parse(i());o.name=c.name||"",o.playerName=c.playerName||"",o.ancestry=c.ancestry||"",o.novicePath=c.paths&&c.paths.novice?c.paths.novice:"",o.level=c.level||1,o.defense=c.defense||10,o.health=c.health||c.normalHealth||24}catch{o.name="",o.playerName="",o.ancestry="",o.novicePath="",o.level=1,o.defense=10,o.health=24}});function b(){a.onSave({...o})}Ct(r,{get isOpen(){return n()},get onClose(){return a.onClose},title:"Novo Personagem",maxWidth:"max-w-md",children:(c,m)=>{var v=ea(),g=D(v),h=e(g),x=s(e(h),2);Y(x),t(h);var I=s(h,2),z=e(I),j=e(z);St(j,{size:12}),y(),t(z);var k=s(z,2);Y(k),t(I);var E=s(I,2),U=e(E),X=s(e(U),2);Y(X),t(U);var ne=s(U,2),me=s(e(ne),2);Y(me),t(ne),t(E);var he=s(E,2),be=s(e(he),2);Y(be),t(he);var je=s(he,2),B=e(je),R=s(e(B),2);Y(R),t(B);var Ee=s(B,2),Ae=s(e(Ee),2);Y(Ae),t(Ee),t(je),t(g);var ie=s(g,2),le=e(ie);le.__click=function(..._){a.onClose?.apply(this,_)};var xe=s(le,2);xe.__click=b,t(ie),Z(x,()=>o.name,_=>o.name=_),Z(k,()=>o.playerName,_=>o.playerName=_),Z(X,()=>o.ancestry,_=>o.ancestry=_),Z(me,()=>o.level,_=>o.level=_),Z(be,()=>o.novicePath,_=>o.novicePath=_),Z(R,()=>o.defense,_=>o.defense=_),Z(Ae,()=>o.health,_=>o.health=_),f(c,v)},$$slots:{default:!0}}),Pe()}Ie(["click"]);var aa=$('<div class="space-y-5"><div><label for="settings-player-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> Nome do Jogador</label> <input id="settings-player-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/> <p class="text-[10px] text-slate-500 mt-1">O nome do jogador associado a este personagem.</p></div></div> <div class="flex flex-col-reverse sm:flex-row gap-3 mt-6"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-4 sm:py-3 rounded-xl text-white font-bold active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-4 sm:py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95">Salvar</button></div>',1);function oa(r,a){Te(a,!0);let n=ze(a,"isOpen",3,!1),i=ze(a,"characterData",3,null),o=O("");Be(()=>{n()&&i()&&u(o,i().playerName||"",!0)});function b(){a.onSave({playerName:l(o)})}Ct(r,{get isOpen(){return n()},get onClose(){return a.onClose},title:"⚙️ Configurações do Personagem",maxWidth:"max-w-md",children:(c,m)=>{var v=aa(),g=D(v),h=e(g),x=e(h),I=e(x);St(I,{size:12}),y(),t(x);var z=s(x,2);Y(z),y(2),t(h),t(g);var j=s(g,2),k=e(j);k.__click=function(...U){a.onClose?.apply(this,U)};var E=s(k,2);E.__click=b,t(j),Z(z,()=>l(o),U=>u(o,U)),f(c,v)},$$slots:{default:!0}}),Pe()}Ie(["click"]);const sa="701898444454-7ml9onnv529k99rkvgh1slhdj4a1arrm.apps.googleusercontent.com",ht="https://www.googleapis.com/auth/drive.appdata",P=Ht({signedIn:!1,accessToken:null,userProfile:null,isInited:!1});let Ue,bt=!1;const Ve="wwv_google_session";function ra(){try{const r=localStorage.getItem(Ve);if(r){const a=JSON.parse(r);if(a.accessToken)return P.set({signedIn:!0,accessToken:a.accessToken,userProfile:a.userProfile||null,isInited:!0}),console.log("Restored session from localStorage"),!0}}catch(r){console.error("Failed to load stored session:",r)}return!1}function na(){const r=q(P);r.signedIn&&r.accessToken?localStorage.setItem(Ve,JSON.stringify({accessToken:r.accessToken,userProfile:r.userProfile})):localStorage.removeItem(Ve)}async function ia(){const r=sa;if(ra()){try{await _t(),Ue=google.accounts.oauth2.initTokenClient({client_id:r,scope:ht,callback:xt}),bt=!0}catch(n){console.warn("Could not initialize GIS after restoring session:",n)}return}try{await _t(),Ue=google.accounts.oauth2.initTokenClient({client_id:r,scope:ht,callback:xt}),bt=!0,P.update(n=>({...n,isInited:!0})),console.log("Google Auth Initialized")}catch(n){console.error("Failed to initialize Google Auth:",n),P.update(i=>({...i,isInited:!0})),alert("Falha ao inicializar Google Auth. Verifique sua conexão/Console.")}}function xt(r){if(r.error!==void 0){console.error("Google Auth Error:",r);return}console.log("Google Auth Success",r),P.update(a=>({...a,signedIn:!0,accessToken:r.access_token})),na()}function _t(){return new Promise((r,a)=>{if(typeof google<"u"&&google.accounts){r();return}const n=document.createElement("script");n.src="https://accounts.google.com/gsi/client",n.async=!0,n.defer=!0,n.onload=()=>{const i=setInterval(()=>{typeof google<"u"&&google.accounts&&(clearInterval(i),r())},50);setTimeout(()=>{clearInterval(i),(typeof google>"u"||!google.accounts)&&a(new Error("Google object not available after script load"))},3e3)},n.onerror=()=>{a(new Error("Failed to load Google Identity Services script"))},document.head.appendChild(n)})}function la(){Ue?Ue.requestAccessToken():(console.error("Google Auth not initialized"),alert("Google Auth ainda não inicializou. Tente novamente em alguns segundos."))}function da(){const r=q(P).accessToken;localStorage.removeItem(Ve),P.update(a=>({...a,signedIn:!1,accessToken:null,userProfile:null})),r&&typeof google<"u"&&google.accounts&&google.accounts.oauth2.revoke(r,()=>{console.log("Access token revoked")})}async function Nt(){const r=q(P).accessToken;if(!r)throw new Error("Not signed in");const n=`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent("name = 'weird-wizard-backup.json' and 'appDataFolder' in parents and trashed = false")}&spaces=appDataFolder&fields=files(id, name, modifiedTime, size)`,i=await fetch(n,{headers:{Authorization:`Bearer ${r}`}});if(!i.ok)throw new Error("Failed to list backups: "+i.statusText);return(await i.json()).files||[]}async function ca(r){const a=q(P).accessToken;if(!a)throw new Error("Not signed in");const n=JSON.stringify(r),i="weird-wizard-backup.json",o=await Nt(),b=o.length>0?o[0].id:null;if(b){const c=`https://www.googleapis.com/upload/drive/v3/files/${b}?uploadType=media`,m=await fetch(c,{method:"PATCH",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:n});if(!m.ok){const v=await m.text();throw console.error("Upload error details:",v),new Error("Upload failed: "+m.statusText)}return await m.json()}else{const c={name:i,mimeType:"application/json",parents:["appDataFolder"]},m=new FormData;m.append("metadata",new Blob([JSON.stringify(c)],{type:"application/json"})),m.append("file",new Blob([n],{type:"application/json"}));const g=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${a}`},body:m});if(!g.ok){const h=await g.text();throw console.error("Upload error details:",h),new Error("Upload failed: "+g.statusText)}return await g.json()}}async function ua(r){const a=q(P).accessToken;if(!a)throw new Error("Not signed in");const n=`https://www.googleapis.com/drive/v3/files/${r}?alt=media`,i=await fetch(n,{headers:{Authorization:`Bearer ${a}`}});if(!i.ok)throw new Error("Download failed: "+i.statusText);return await i.json()}let Xe;async function va(){if(q(P).accessToken)try{console.log("Syncing from cloud...");const a=await Nt();if(a.length===0){console.log("No backups found in cloud.");return}const n=a[0].id,i=await ua(n);if(i.characters&&Array.isArray(i.characters))for(const o of i.characters)pe.get(o.id)||(pe.set(o.id,o),console.log("Added character from cloud:",o.name));if(i.campaigns&&Array.isArray(i.campaigns))for(const o of i.campaigns)ge.get(o.id)||(ge.set(o.id,o),console.log("Added campaign from cloud:",o.name));console.log("Sync from cloud complete.")}catch(a){console.error("Failed to sync from cloud:",a)}}async function pa(){q(P).accessToken&&(Xe&&clearTimeout(Xe),Xe=setTimeout(async()=>{try{console.log("Syncing to cloud...");const a={characters:q(kt),campaigns:q(tt),timestamp:Date.now(),version:1,appName:"WeirdWizardVault"};await ca(a),console.log("Sync to cloud complete.")}catch(a){console.error("Failed to sync to cloud:",a)}},2e3))}var ga=$('<div><div class="flex items-center gap-2 px-3 py-1.5 bg-emerald-500/10 text-emerald-400 rounded-lg border border-emerald-500/20 text-xs font-bold"><!> <span>Conectado</span></div> <button class="p-1.5 text-slate-400 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-colors" title="Sair do Google Drive"><!></button></div>'),fa=$('<div class="w-4 h-4 rounded-full border-2 border-white/30 border-t-white animate-spin"></div>'),ma=Gt('<svg class="w-4 h-4 bg-white rounded-full p-0.5" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg>'),ha=$("<button><!> <span>Entrar com Google</span></button>");function ba(r,a){Te(a,!0);const n=()=>$e(P,"$googleSession",i),[i,o]=yt();let b=ze(a,"className",3,"");var c=fe(),m=D(c);{var v=h=>{var x=ga(),I=e(x),z=e(I);Yt(z,{size:14}),y(2),t(I);var j=s(I,2);j.__click=function(...E){da?.apply(this,E)};var k=e(j);Lt(k,{size:14}),t(j),t(x),re(()=>qe(x,1,`flex items-center gap-2 ${b()??""}`)),f(h,x)},g=h=>{var x=ha();x.__click=function(...k){la?.apply(this,k)};var I=e(x);{var z=k=>{var E=fa();f(k,E)},j=k=>{var E=ma();f(k,E)};Q(I,k=>{n().isInited?k(j,!1):k(z)})}y(2),t(x),re(()=>{x.disabled=!n().isInited,qe(x,1,`flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold text-xs transition-all shadow-lg shadow-indigo-900/20 disabled:opacity-50 disabled:cursor-wait ${b()??""}`)}),f(h,x)};Q(m,h=>{n().signedIn?h(v):h(g,!1)})}f(r,c),Pe(),o()}Ie(["click"]);var xa=$('<span class="text-[10px] text-slate-400 font-medium"> </span>'),_a=$('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all relative group flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="flex justify-between items-start mb-4"><div class="flex-1"><h3 class="font-black text-xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate pr-16"> </h3> <div class="flex items-center gap-2 mt-1 flex-wrap"><span class="text-[10px] bg-indigo-500/10 text-indigo-400 font-black px-2 py-0.5 rounded uppercase tracking-wider"> </span> <span class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </span> <!></div></div> <div class="flex items-center gap-1"><button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100" title="Configurações"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100" title="Excluir"><!></button></div></div> <div class="space-y-3 mb-6"><div class="flex items-center justify-between text-xs text-slate-400"><span class="flex items-center gap-1.5 opacity-60"><!> Trilhas</span> <span class="font-bold text-slate-300 truncate max-w-[150px]"> </span></div></div> <button class="w-full bg-slate-800 hover:bg-indigo-600 text-white py-3 rounded-2xl font-bold transition-all active:scale-[0.98] border border-slate-700 hover:border-indigo-400/30 flex items-center justify-center gap-2">Abrir Ficha <!></button></div>'),wa=$('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold">Novo Personagem</span></button></div>'),ya=$('<span class="text-[9px] bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded-full border border-emerald-500/20 font-black uppercase tracking-widest flex items-center gap-1"><!> Publicada</span>'),ka=$('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="mb-4"><div class="flex justify-between items-start mb-1"><h3 class="font-black text-2xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight"> </h3> <div class="flex items-center gap-1"><!> <button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100" title="Editar"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100" title="Excluir"><!></button></div></div> <p class="text-indigo-400 text-[10px] font-black uppercase tracking-[0.2em] mb-3"> </p> <p class="text-sm text-slate-400 line-clamp-2 leading-relaxed h-10"> </p></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-2xl font-bold flex items-center justify-center gap-2 border border-indigo-400/20 shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98]"><!> Iniciar Sessão</button></div>'),Ca=$('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-emerald-500/40 transition-all group relative flex flex-col justify-between shadow-xl border-t-white/5"><div><h3 class="font-black text-2xl text-white group-hover:text-emerald-400 mb-2 uppercase tracking-tight"> </h3> <div class="flex items-center gap-2 mb-4"><div class="px-2 py-0.5 bg-slate-800 rounded text-[9px] text-slate-400 font-black uppercase tracking-widest"> </div> <div class="flex items-center gap-1 px-2 py-0.5 bg-emerald-500/10 rounded text-[9px] text-emerald-400 font-black uppercase tracking-wider"><div class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></div> Online</div></div> <p class="text-sm text-slate-400 line-clamp-3 leading-relaxed mb-6 h-15"> </p></div> <button class="w-full bg-emerald-600 hover:bg-emerald-500 text-white py-3 rounded-2xl font-black uppercase text-xs tracking-[0.1em] flex items-center justify-center gap-2 border border-emerald-400/20 transition-all active:scale-[0.98] group">Participar da Aventura <!></button></div>'),Sa=$('<div class="col-span-full py-12 flex flex-col items-center text-center opacity-40"><div class="w-16 h-16 bg-slate-800/50 rounded-full flex items-center justify-center text-slate-600 mb-3 border border-slate-700 border-dashed"><!></div> <h3 class="text-lg font-black uppercase tracking-widest text-slate-500">Nenhuma Campanha Online</h3> <p class="text-slate-600 max-w-sm mt-2 text-sm">Os Mestres precisam publicar suas sessões para aparecerem aqui.</p></div>'),Na=$('<div class="space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold">Nova Campanha</span></button></div> <div><div class="flex items-center gap-3 mb-4"><div class="h-px flex-1 bg-slate-800"></div> <h3 class="text-xs font-black uppercase tracking-widest text-emerald-400 flex items-center gap-2"><!> Campanhas Públicas</h3> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><!> <!></div></div></div>'),$a=$('<div class="animate-in fade-in p-4 md:p-8 max-w-7xl mx-auto pb-20"><header class="mb-8 flex flex-col gap-6 border-b border-slate-800 pb-6"><div class="flex flex-col sm:flex-row justify-between items-center gap-4"><div class="text-center sm:text-left"><h1 class="text-3xl font-bold text-white flex items-center justify-center sm:justify-start gap-2 text-gradient"><!> Weird Wizard Vault</h1> <p class="text-slate-400 mt-1 text-sm">Gestor de Personagens e Campanhas</p></div> <!></div> <div class="flex justify-center sm:justify-start"><div class="flex w-full sm:w-auto bg-slate-900 p-1 rounded-2xl border border-slate-800 glass shadow-xl"><button><!> Personagens</button> <button><!> Campanhas</button></div></div></header> <div class="min-h-[500px]"><!></div> <!> <!> <!> <!></div>');function za(r,a){Te(a,!0);const n=()=>$e(P,"$googleSession",c),i=()=>$e(kt,"$liveCharacters",c),o=()=>$e(tt,"$liveCampaigns",c),b=()=>$e(Vt,"$publicCampaigns",c),[c,m]=yt();et(()=>{ia()});let v=O("characters");Be(()=>{n().signedIn&&va()}),Be(()=>{n().signedIn&&(i(),o(),pa())});let g=O(!1),h=O(null);function x(d){u(h,d,!0),u(g,!0)}function I(d){if(!l(h))return;const C=l(h).id,S={...pe.get(C),...d};pe.set(C,S),u(g,!1)}let z=O(!1),j=O("{}");const k={name:"",playerName:"",ancestry:"Humano",novicePath:"",level:0,defense:8,health:5};function E(){u(j,JSON.stringify(k),!0),u(z,!0)}async function U(d){const C=vt(),p={id:C,name:d.name,playerName:d.playerName||"",ancestry:d.ancestry,level:d.level,defense:d.defense,paths:{novice:d.novicePath||"-",expert:"-",master:"-"},attributes:[{name:"Força",value:10,key:"str"},{name:"Agilidade",value:10,key:"agi"},{name:"Intelecto",value:10,key:"int"},{name:"Vontade",value:10,key:"wil"}],speed:5,health:d.health,currentHealth:d.health,spells:[],talents:[],equipment:[],afflictions:[],effects:[],currency:{gp:0,sp:0,cp:0},languages:["Comum"]};pe.set(C,p),u(z,!1),Ge(He("/characters/[id]",{id:C}))}let X=O(!1),ne=O(null),me=O("{}");const he={name:"",description:"",gmName:""};function be(d=null){u(ne,d?d.id:null,!0),u(me,JSON.stringify(d||he),!0),u(X,!0)}async function je(d){const C=l(ne)||vt(),p=l(ne)?ge.get(C):{},S={...p,id:C,name:d.name,description:d.description,gmName:d.gmName,players:p.players||[],backupEnabled:d.backupEnabled||!1,backupHash:d.backupHash||""};d.removePassword?delete S.passwordHash:d.password&&(S.passwordHash=await Kt(d.password)),ge.set(C,S),u(X,!1)}let B=O(!1),R=O(wt({title:"",message:"",onConfirm:()=>{}}));function Ee(d){u(R,{title:"Excluir Campanha",message:"Tem certeza que deseja apagar esta campanha permanentemente?",onConfirm:()=>{ge.delete(d),u(B,!1)}},!0),u(B,!0)}function Ae(d){u(R,{title:"Excluir Personagem",message:"Tem certeza que deseja apagar este personagem permanentemente?",onConfirm:()=>{q(tt).forEach(p=>{let S=!1;p.members&&p.members.some(N=>N.id===d)&&(p.members=p.members.filter(N=>N.id!==d),S=!0),p.sessionRoster&&p.sessionRoster.includes(d)&&(p.sessionRoster=p.sessionRoster.filter(N=>N!==d),S=!0),p.activeEnemies&&p.activeEnemies.some(N=>N.id===d)&&(p.activeEnemies=p.activeEnemies.filter(N=>N.id!==d),S=!0),S&&ge.set(p.id,p)}),pe.delete(d),u(B,!1)}},!0),u(B,!0)}et(()=>{});var ie=$a(),le=e(ie),xe=e(le),_=e(xe),nt=e(_),$t=e(nt);qt($t,{class:"text-indigo-500"}),y(),t(nt),y(2),t(_);var zt=s(_,2);ba(zt,{className:"w-full sm:w-auto justify-center"}),t(xe);var it=s(xe,2),lt=e(it),_e=e(lt);_e.__click=()=>u(v,"characters");var Tt=e(_e);Jt(Tt,{size:18}),y(),t(_e);var Oe=s(_e,2);Oe.__click=()=>u(v,"campaigns");var Pt=e(Oe);mt(Pt,{size:18}),y(),t(Oe),t(lt),t(it),t(le);var Je=s(le,2),It=e(Je);{var jt=d=>{var C=wa(),p=e(C);Ze(p,1,i,ee=>ee.id,(ee,M)=>{var te=_a(),de=e(te),ye=e(de),ce=e(ye),ke=e(ce,!0);t(ce);var Ce=s(ce,2),Se=e(Ce),Me=e(Se,!0);t(Se);var ue=s(Se,2),We=e(ue);t(ue);var De=s(ue,2);{var A=se=>{var Ne=xa(),Fe=e(Ne);t(Ne),re(()=>H(Fe,`• ${l(M).playerName??""}`)),f(se,Ne)};Q(De,se=>{l(M).playerName&&se(A)})}t(Ce),t(ye);var w=s(ye,2),T=e(w);T.__click=()=>x(l(M));var F=e(T);Dt(F,{size:16}),t(T);var G=s(T,2);G.__click=()=>Ae(l(M).id);var ae=e(G);ft(ae,{size:16}),t(G),t(w),t(de);var V=s(de,2),L=e(V),K=e(L),ve=e(K);mt(ve,{size:12}),y(),t(K);var J=s(K,2),oe=e(J,!0);t(J),t(L),t(V);var W=s(V,2);W.__click=()=>Ge(He("/characters/[id]",{id:l(M).id}));var Re=s(e(W));pt(Re,{size:14,fill:"currentColor"}),t(W),t(te),re(()=>{H(ke,l(M).name),H(Me,l(M).ancestry||"Humano"),H(We,`Nível ${l(M).level??""}`),H(oe,l(M).paths?.novice||"-")}),f(ee,te)});var S=s(p,2);S.__click=()=>E();var N=e(S),we=e(N);Qe(we,{size:32}),t(N),y(2),t(S),t(C),f(d,C)},Et=d=>{var C=fe(),p=D(C);{var S=N=>{var we=Na(),ee=e(we),M=e(ee);Ze(M,1,o,A=>A.id,(A,w)=>{var T=ka(),F=e(T),G=e(F),ae=e(G),V=e(ae,!0);t(ae);var L=s(ae,2),K=e(L);{var ve=Ke=>{var Ye=ya(),Ft=e(Ye);gt(Ft,{size:10}),y(),t(Ye),f(Ke,Ye)};Q(K,Ke=>{l(w).isPublished&&Ke(ve)})}var J=s(K,2);J.__click=()=>be(l(w));var oe=e(J);Rt(oe,{size:16}),t(J);var W=s(J,2);W.__click=()=>Ee(l(w).id);var Re=e(W);ft(Re,{size:16}),t(W),t(L),t(G);var se=s(G,2),Ne=e(se,!0);t(se);var Fe=s(se,2),Ot=e(Fe,!0);t(Fe),t(F);var Le=s(F,2);Le.__click=()=>Ge(He("/campaigns/[id]",{id:l(w).id}));var Mt=e(Le);pt(Mt,{size:18,fill:"currentColor"}),y(),t(Le),t(T),re(()=>{H(V,l(w).name),H(Ne,l(w).gmName||"Mestre"),H(Ot,l(w).description||"Uma jornada sem descrição ainda.")}),f(A,T)});var te=s(M,2);te.__click=()=>be();var de=e(te),ye=e(de);Qe(ye,{size:32}),t(de),y(2),t(te),t(ee);var ce=s(ee,2),ke=e(ce),Ce=s(e(ke),2),Se=e(Ce);gt(Se,{size:14}),y(),t(Ce),y(2),t(ke);var Me=s(ke,2),ue=e(Me);Ze(ue,1,b,A=>A.id,(A,w)=>{var T=Ca(),F=e(T),G=e(F),ae=e(G,!0);t(G);var V=s(G,2),L=e(V),K=e(L,!0);t(L),y(2),t(V);var ve=s(V,2),J=e(ve,!0);t(ve),t(F);var oe=s(F,2);oe.__click=()=>Ge(He("/campaigns/[id]/invite",{id:l(w).id}));var W=s(e(oe));Qe(W,{size:18,class:"group-hover:rotate-90 transition-transform"}),t(oe),t(T),re(()=>{H(ae,l(w).name),H(K,l(w).gmName||"Mestre"),H(J,l(w).description||"Uma jornada por terras desconhecidas aguarada heróis.")}),f(A,T)});var We=s(ue,2);{var De=A=>{var w=Sa(),T=e(w),F=e(T);Wt(F,{size:32}),t(T),y(4),t(w),f(A,w)};Q(We,A=>{b().length===0&&A(De)})}t(Me),t(ce),t(we),f(N,we)};Q(p,N=>{l(v)==="campaigns"&&N(S)},!0)}f(d,C)};Q(It,d=>{l(v)==="characters"?d(jt):d(Et,!1)})}t(Je);var dt=s(Je,2);ta(dt,{get isOpen(){return l(z)},get initialData(){return l(j)},onClose:()=>u(z,!1),onSave:U});var ct=s(dt,2);Ut(ct,{get isOpen(){return l(X)},get initialData(){return l(me)},onClose:()=>u(X,!1),onSave:je});var ut=s(ct,2);Bt(ut,{get isOpen(){return l(B)},get title(){return l(R).title},get message(){return l(R).message},get onConfirm(){return l(R).onConfirm},onCancel:()=>u(B,!1)});var At=s(ut,2);oa(At,{get isOpen(){return l(g)},get characterData(){return l(h)},onClose:()=>u(g,!1),onSave:I}),t(ie),re(()=>{qe(_e,1,`flex-1 sm:flex-none justify-center px-6 py-3 rounded-xl text-sm font-bold transition-all flex items-center gap-2 ${l(v)==="characters"?"bg-indigo-600 text-white shadow-[0_0_20px_rgba(79,70,229,0.4)]":"text-slate-400 hover:text-white hover:bg-slate-800"}`),qe(Oe,1,`flex-1 sm:flex-none justify-center px-6 py-3 rounded-xl text-sm font-bold transition-all flex items-center gap-2 ${l(v)==="campaigns"?"bg-indigo-600 text-white shadow-[0_0_20px_rgba(79,70,229,0.4)]":"text-slate-400 hover:text-white hover:bg-slate-800"}`)}),f(r,ie),Pe(),m()}Ie(["click"]);var Ta=$("<!> <!>",1);function Da(r){var a=Ta(),n=D(a);Xt(n,{});var i=s(n,2);za(i,{}),f(r,a)}export{Da as component};
