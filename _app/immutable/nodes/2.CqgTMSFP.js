import"../chunks/DsnmJJEf.js";import"../chunks/CXShgV-E.js";import{B as ge,o as T,k as u,p as yt,j as b,v as kt,w as h,y as Ce,x as r,u as a,q as t,A as e,t as k,n as Dt,a2 as Ca,O as sa,at as _r,z as wt,ap as xr,D as wr,bt as Ia}from"../chunks/CcABsDcH.js";import{d as $t,o as qa,s as d,w as Ea,g as lt,e as aa}from"../chunks/Bmlnf0CH.js";import{l as gt,s as ft,i as x,p as pt}from"../chunks/CD_b0ITR.js";import{h as fa}from"../chunks/BQucJUbt.js";import{a as Re,$ as Nt,e as ct,s as Le,i as Pt,r as at,f as yr,j as Ba,g as Ma}from"../chunks/DDsCrrC-.js";import{a as It,s as Fe}from"../chunks/BwRHsyw7.js";import{I as ht,s as bt}from"../chunks/BmiOSreM.js";import{X as nr,C as Da,D as Ua,S as kr,M as lr,e as $r,a as Sr,q as da,b as Ka,P as ja,d as zr}from"../chunks/DAiMaFGB.js";import{t as Ve,a as it,s as Ya,f as ca}from"../chunks/BjwwgMo_.js";import{S as dr,l as cr,e as La,c as Cr,d as Er,a as Pr,b as Nr,D as ra,G as ya,C as Ir,g as Ta}from"../chunks/Bn2Mahcd.js";import{x as Xt,d as tt,e as ot,f as ma,g as _a,y as Ra,v as oa,b as rt,u as Ja,z as Mr}from"../chunks/CQsRno8O.js";import{b as jr,g as xa}from"../chunks/B7ESwN4Q.js";import{C as ka,U as Xa,r as wa,W as Tr}from"../chunks/A4wWk2dZ.js";import{C as Or,G as Fa,S as Ha,a as Ar,P as Za}from"../chunks/CdK-dsCl.js";import{L as Gr,U as ba,S as Qa,a as Br,A as Dr}from"../chunks/DIzA9R4Y.js";import{c as Ur}from"../chunks/Dql-KisJ.js";import{h as Lr}from"../chunks/BYmFNSF7.js";function ha(f,l){const n=gt(l,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];ht(f,ft({name:"arrow-right"},()=>n,{get iconNode(){return p},children:(o,c)=>{var i=ge(),v=T(i);bt(v,l,"default",{}),u(o,i)},$$slots:{default:!0}}))}function vr(f,l){const n=gt(l,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];ht(f,ft({name:"book-open"},()=>n,{get iconNode(){return p},children:(o,c)=>{var i=ge(),v=T(i);bt(v,l,"default",{}),u(o,i)},$$slots:{default:!0}}))}function Rr(f,l){const n=gt(l,["children","$$slots","$$events","$$legacy"]);const p=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];ht(f,ft({name:"circle-alert"},()=>n,{get iconNode(){return p},children:(o,c)=>{var i=ge(),v=T(i);bt(v,l,"default",{}),u(o,i)},$$slots:{default:!0}}))}function Fr(f,l){const n=gt(l,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m2 2 20 20"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07"}]];ht(f,ft({name:"cloud-off"},()=>n,{get iconNode(){return p},children:(o,c)=>{var i=ge(),v=T(i);bt(v,l,"default",{}),u(o,i)},$$slots:{default:!0}}))}function Hr(f,l){const n=gt(l,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"}]];ht(f,ft({name:"cloud"},()=>n,{get iconNode(){return p},children:(o,c)=>{var i=ge(),v=T(i);bt(v,l,"default",{}),u(o,i)},$$slots:{default:!0}}))}function er(f,l){const n=gt(l,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];ht(f,ft({name:"download"},()=>n,{get iconNode(){return p},children:(o,c)=>{var i=ge(),v=T(i);bt(v,l,"default",{}),u(o,i)},$$slots:{default:!0}}))}function Wr(f,l){const n=gt(l,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];ht(f,ft({name:"loader-circle"},()=>n,{get iconNode(){return p},children:(o,c)=>{var i=ge(),v=T(i);bt(v,l,"default",{}),u(o,i)},$$slots:{default:!0}}))}function qr(f,l){const n=gt(l,["children","$$slots","$$events","$$legacy"]);const p=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21"}]];ht(f,ft({name:"monitor"},()=>n,{get iconNode(){return p},children:(o,c)=>{var i=ge(),v=T(i);bt(v,l,"default",{}),u(o,i)},$$slots:{default:!0}}))}function Vr(f,l){const n=gt(l,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}]];ht(f,ft({name:"palette"},()=>n,{get iconNode(){return p},children:(o,c)=>{var i=ge(),v=T(i);bt(v,l,"default",{}),u(o,i)},$$slots:{default:!0}}))}function Kr(f,l){const n=gt(l,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];ht(f,ft({name:"refresh-cw"},()=>n,{get iconNode(){return p},children:(o,c)=>{var i=ge(),v=T(i);bt(v,l,"default",{}),u(o,i)},$$slots:{default:!0}}))}function Oa(f,l){const n=gt(l,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3"}]];ht(f,ft({name:"scroll"},()=>n,{get iconNode(){return p},children:(o,c)=>{var i=ge(),v=T(i);bt(v,l,"default",{}),u(o,i)},$$slots:{default:!0}}))}function Yr(f,l){const n=gt(l,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}],["path",{d:"M12 8v4"}],["path",{d:"M12 16h.01"}]];ht(f,ft({name:"shield-alert"},()=>n,{get iconNode(){return p},children:(o,c)=>{var i=ge(),v=T(i);bt(v,l,"default",{}),u(o,i)},$$slots:{default:!0}}))}var Jr=b('<button class="fixed bottom-28 md:bottom-6 right-6 z-[60] bg-indigo-600 hover:bg-indigo-500 text-white h-14 px-4 rounded-full shadow-2xl shadow-indigo-900/50 flex items-center justify-center font-bold animate-pulse hover:animate-none transition-all active:scale-95 group"><!> <span class="text-sm uppercase tracking-wider max-w-0 overflow-hidden ml-0 group-hover:max-w-xs group-hover:ml-2 transition-all duration-300 md:max-w-xs md:ml-2 md:inline"> </span></button>'),Xr=b("<div><!></div>"),Zr=b("<div><!></div>"),Qr=b('<li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">1</span> <!></li> <li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">2</span> <div><!></div></li>',1),es=b('<li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">1</span> <div><!></div></li> <li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">2</span> <div><!></div></li>',1),ts=b('<div class="fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-end sm:items-center justify-center p-4 animate-in fade-in"><div class="bg-slate-900 border border-slate-700 rounded-2xl p-6 max-w-sm w-full relative shadow-2xl mb-4 sm:mb-0 animate-in slide-in-from-bottom-10 sm:slide-in-from-bottom-0 sm:zoom-in-95"><button class="absolute top-4 right-4 text-slate-400 hover:text-white p-1"><!></button> <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2"><!> </h3> <ol class="space-y-4 text-slate-300 text-sm"><!></ol> <div class="mt-6 text-center"><button class="text-indigo-400 text-sm font-bold hover:text-indigo-300"> </button></div></div></div>'),as=b("<!> <!>",1);function rs(f,l){yt(l,!0);const n=()=>Fe(Nt,"$t",p),[p,o]=It();let c=Ce(null),i=Ce(!1),v=Ce(!1),m=Ce(!1),s=Ce(!1);qa(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone){h(i,!1);return}const H=window.navigator.userAgent;h(m,/iPad|iPhone|iPod/.test(H)&&!window.MSStream,!0),h(s,/CriOS/i.test(H),!0),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(H)&&h(i,!0),window.addEventListener("beforeinstallprompt",$=>{$.preventDefault(),h(c,$,!0),h(i,!0)}),window.addEventListener("appinstalled",()=>{h(c,null),h(i,!1),h(v,!1)})});async function P(){if(r(c)){r(c).prompt();const{outcome:N}=await r(c).userChoice;N==="accepted"&&(h(c,null),h(i,!1))}else h(v,!0)}const R="inline w-3.5 h-3.5",C=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${R}"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" x2="12" y1="2" y2="15"/></svg>`,fe=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${R}"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M8 12h8"/><path d="M12 8v8"/></svg>`,Y=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${R}"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>`;function O(N,H){const J=n()(N),$=`<span class="inline-flex items-center justify-center bg-slate-800 p-1 rounded mx-1 align-middle">${H}</span>`;return J.replace("{icon}",$)}var ne=as(),B=T(ne);{var D=N=>{var H=Jr();H.__click=P;var J=t(H);er(J,{size:24});var $=a(J,2),E=t($,!0);e($),e(H),k((z,w)=>{Re(H,"aria-label",z),d(E,w)},[()=>n()("home.install.button"),()=>n()("home.install.button")]),u(N,H)};x(B,N=>{r(i)&&N(D)})}var F=a(B,2);{var I=N=>{var H=ts(),J=t(H),$=t(J);$.__click=()=>h(v,!1);var E=t($);nr(E,{size:20}),e($);var z=a($,2),w=t(z);er(w,{size:24,class:"text-indigo-500"});var y=a(w);e(z);var X=a(z,2),re=t(X);{var se=M=>{var q=Qr(),xe=T(q),Ee=a(t(xe),2);{var be=Z=>{var V=Xr(),Q=t(V);fa(Q,()=>O("home.install.ios_chrome_step1",C)),e(V),u(Z,V)},U=Z=>{var V=Zr(),Q=t(V);fa(Q,()=>O("home.install.ios_step1",C)),e(V),u(Z,V)};x(Ee,Z=>{r(s)?Z(be):Z(U,!1)})}e(xe);var L=a(xe,2),ae=a(t(L),2),Ue=t(ae);fa(Ue,()=>O("home.install.ios_step2",fe)),e(ae),e(L),u(M,q)},he=M=>{var q=es(),xe=T(q),Ee=a(t(xe),2),be=t(Ee);fa(be,()=>O("home.install.android_step1",Y)),e(Ee),e(xe);var U=a(xe,2),L=a(t(U),2),ae=t(L);fa(ae,()=>n()("home.install.android_step2")),e(L),e(U),u(M,q)};x(re,M=>{r(m)?M(se):M(he,!1)})}e(X);var oe=a(X,2),Se=t(oe);Se.__click=()=>h(v,!1);var G=t(Se,!0);e(Se),e(oe),e(J),e(H),k((M,q)=>{d(y,` ${M??""}`),d(G,q)},[()=>n()("home.install.title"),()=>n()("home.install.close")]),u(N,H)};x(F,N=>{r(v)&&N(I)})}u(f,ne),kt(),o()}$t(["click"]);var ss=b('<div class="absolute top-4 right-4 bg-black/50 p-2 rounded-full backdrop-blur-sm border border-white/10"><!></div>'),os=b('<div class="absolute top-4 right-4 bg-indigo-500 p-2 rounded-full shadow-lg shadow-indigo-500/40 animate-in zoom-in duration-200"><!></div>'),is=b('<div><div class="absolute inset-0 bg-slate-900"><img/> <div class="absolute inset-0 bg-gradient-to-t from-black via-black/80 to-transparent"></div></div> <div class="relative p-6 h-full flex flex-col justify-end min-h-[200px]"><!> <!> <div><h3 class="text-xl font-black text-white uppercase leading-tight mb-2 group-hover:text-indigo-400 transition-colors"> </h3> <p class="text-xs text-slate-400 font-medium leading-relaxed max-w-[90%]"> </p></div></div> <div class="absolute inset-0 bg-indigo-500/10 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"></div></div>'),ns=b('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>');function ur(f,l){yt(l,!0);const n=()=>Fe(Nt,"$t",p),[p,o]=It(),c={sofdl:"/artworks/books/sofdl-core.webp",sofww:"/artworks/books/sofww-core.webp",dle:"/artworks/books/dle-core.webp"},i={dle:"object-[center_75%]",sofww:"object-center",sofdl:"object-center"};function v(P){return c[P]||""}function m(P){return i[P]||"object-center"}var s=ns();ct(s,21,()=>dr,Pt,(P,R)=>{var C=is();C.__click=()=>!r(R).disabled&&l.onSelect(r(R).id);var fe=t(C),Y=t(fe);Dt(2),e(fe);var O=a(fe,2),ne=t(O);{var B=E=>{var z=ss(),w=t(z);Gr(w,{size:16,class:"text-slate-400"}),e(z),u(E,z)};x(ne,E=>{r(R).disabled&&E(B)})}var D=a(ne,2);{var F=E=>{var z=os(),w=t(z);ka(w,{size:16,class:"text-white"}),e(z),u(E,z)};x(D,E=>{l.selectedSystem===r(R).id&&E(F)})}var I=a(D,2),N=t(I),H=t(N,!0);e(N);var J=a(N,2),$=t(J,!0);e(J),e(I),e(O),Dt(2),e(C),k((E,z,w,y,X)=>{Le(C,1,`group relative rounded-2xl overflow-hidden cursor-pointer transition-all duration-300 border-2
            ${l.selectedSystem===r(R).id?"border-indigo-500 ring-2 ring-indigo-500/50 scale-[1.02]":"border-transparent hover:border-white/20 hover:scale-[1.01]"}
            ${r(R).disabled?"opacity-50 cursor-not-allowed grayscale":""}`),Re(Y,"src",E),Re(Y,"alt",z),Le(Y,1,`w-full h-full object-cover ${w??""} opacity-40 group-hover:opacity-60 transition-opacity duration-500`),d(H,y),d($,X)},[()=>v(r(R).id),()=>n()(r(R).nameKey),()=>m(r(R).id),()=>n()(r(R).nameKey),()=>n()(r(R).descriptionKey)]),u(P,C)}),e(s),u(f,s),kt(),o()}$t(["click"]);const ls=["Alistair","Baelor","Caelum","Daeron","Eldric","Fenris","Gareth","Havelock","Ignis","Jarek","Kaelen","Lucius","Malacor","Nyx","Orion","Pireus","Quintus","Rurik","Severus","Thorne","Ulric","Valerius","Wulfric","Xander","Yoric","Zephyr","Azura","Bellatrix","Celeste","Dahlia"],ds=["Aethelgard","Bramble","Cinder","Driftwood","Ember","Fable","Gossamer","Hollow","Ivy","Juniper","Kestrel","Lark","Moss","Nettle","Omen","Pebble","Quill","Rowan","Sage","Thistle","Umber","Vesper","Willow","Yarrow","Zephyr","Ash","Birch","Crow","Dusk"],tr=["the Brave","the Cursed","the Swift","the Wise","the Fool","the Strong","the Shadow","the Light","of the North","of the South","the Wanderer","the Lost","the Broken","the Eternal","the Mad"];function pr(f="person"){const l=Math.random()>.5?ls:ds,n=l[Math.floor(Math.random()*l.length)];if(f==="person")return Math.random()>.7?`${n} ${tr[Math.floor(Math.random()*tr.length)]}`:n;{const p=["Shadow","Legacy","Curse","Fall","Rise","Revenge","Secret","Tale","Legend","Doom"],o=["of","of the","from","and"];return`The ${p[Math.floor(Math.random()*p.length)]} ${o[Math.floor(Math.random()*o.length)]} ${n}`}}const Bt=Ea("idle"),Va=Ea(null),$a=Ea(null),cs="701898444454-7ml9onnv529k99rkvgh1slhdj4a1arrm.apps.googleusercontent.com",ar="https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/userinfo.profile",Ye=Ea({signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null,isInited:!1});let Sa,rr=!1;const va="wwv_google_session";function vs(){localStorage.removeItem(va),Ye.update(f=>({...f,signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null})),console.log("Session cleared due to expired or invalid token")}async function za(){vs(),console.warn("OAuth token expired or invalid. Please sign in again.")}async function gr(f){try{const l=await fetch("https://www.googleapis.com/oauth2/v1/userinfo?alt=json",{headers:{Authorization:`Bearer ${f}`}});if(l.status===401){await za();return}if(l.ok){const n=await l.json();Ye.update(p=>({...p,userProfile:{name:n.name,picture:n.picture}})),fr()}}catch(l){console.error("Failed to fetch user profile:",l)}}function us(){try{const f=localStorage.getItem(va);if(f){const l=JSON.parse(f);if(l.accessToken)return l.tokenExpiry&&Date.now()>l.tokenExpiry?(console.log("Stored token is expired, clearing session"),localStorage.removeItem(va),!1):(Ye.set({signedIn:!0,accessToken:l.accessToken,tokenExpiry:l.tokenExpiry||null,userProfile:l.userProfile||null,isInited:!0}),console.log("Restored session from localStorage"),gr(l.accessToken),!0)}}catch(f){console.error("Failed to load stored session:",f)}return!1}function fr(){const f=lt(Ye);f.signedIn&&f.accessToken?localStorage.setItem(va,JSON.stringify({accessToken:f.accessToken,tokenExpiry:f.tokenExpiry,userProfile:f.userProfile})):localStorage.removeItem(va)}async function ps(){const f=cs;if(us()){try{await or(),Sa=google.accounts.oauth2.initTokenClient({client_id:f,scope:ar,callback:sr}),rr=!0}catch(n){console.warn("Could not initialize GIS after restoring session:",n)}return}try{await or(),Sa=google.accounts.oauth2.initTokenClient({client_id:f,scope:ar,callback:sr}),rr=!0,Ye.update(n=>({...n,isInited:!0})),console.log("Google Auth Initialized")}catch(n){console.error("Failed to initialize Google Auth:",n),$a.set("init_failed"),Ye.update(p=>({...p,isInited:!0}))}}function sr(f){if(f.error!==void 0){console.error("Google Auth Error:",f);return}console.log("Google Auth Success",f);const l=f.expires_in||3600,n=Date.now()+l*1e3;Ye.update(p=>({...p,signedIn:!0,accessToken:f.access_token,tokenExpiry:n})),fr(),gr(f.access_token)}let ta=null;function or(){return typeof window>"u"||typeof google<"u"&&google.accounts?Promise.resolve():ta||(ta=new Promise((f,l)=>{if(document.querySelector('script[src="https://accounts.google.com/gsi/client"]')){const o=setInterval(()=>{typeof google<"u"&&google.accounts&&(clearInterval(o),f())},100);setTimeout(()=>{clearInterval(o),(typeof google>"u"||!google.accounts)&&(ta=null,l(new Error("Google Identity Services script found but failed to initialize")))},5e3);return}const p=document.createElement("script");p.src="https://accounts.google.com/gsi/client",p.async=!0,p.defer=!0,p.onload=()=>{const o=setInterval(()=>{typeof google<"u"&&google.accounts&&(clearInterval(o),f())},50);setTimeout(()=>{clearInterval(o),(typeof google>"u"||!google.accounts)&&(ta=null,l(new Error("Google object not available after script load")))},5e3)},p.onerror=()=>{ta=null;const c=!navigator.onLine?"Failed to load Google script: No internet connection":"Failed to load Google script: Blocked by browser or network error";l(new Error(c))},document.head.appendChild(p)}),ta)}function hr(){Sa?($a.set(null),Sa.requestAccessToken()):(console.error("Google Auth not initialized"),$a.set("not_initialized"),Bt.set("error"))}function gs(){const f=lt(Ye).accessToken;localStorage.removeItem(va),Ye.update(l=>({...l,signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null})),f&&typeof google<"u"&&google.accounts&&google.accounts.oauth2.revoke(f,()=>{console.log("Access token revoked")})}async function br(){const f=lt(Ye),l=f.accessToken;if(!l)throw new Error("Not signed in");if(f.tokenExpiry&&Date.now()>f.tokenExpiry)throw await za(),new Error("Token expired, please sign in again");const p=`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent("name = 'weird-wizard-backup.json' and 'appDataFolder' in parents and trashed = false")}&spaces=appDataFolder&fields=files(id, name, modifiedTime, size)`,o=await fetch(p,{headers:{Authorization:`Bearer ${l}`}});if(o.status===401)throw await za(),new Error("Token expired, please sign in again");if(!o.ok)throw new Error("Failed to list backups: "+o.statusText);return(await o.json()).files||[]}async function fs(f){const l=lt(Ye).accessToken;if(!l)throw new Error("Not signed in");const n=JSON.stringify(f),p="weird-wizard-backup.json",o=await br(),c=o.length>0?o[0].id:null;if(c){const i=`https://www.googleapis.com/upload/drive/v3/files/${c}?uploadType=media`,v=await fetch(i,{method:"PATCH",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:n});if(!v.ok){const m=await v.text();throw console.error("Upload error details:",m),new Error("Upload failed: "+v.statusText)}return await v.json()}else{const i={name:p,mimeType:"application/json",parents:["appDataFolder"]},v=new FormData;v.append("metadata",new Blob([JSON.stringify(i)],{type:"application/json"})),v.append("file",new Blob([n],{type:"application/json"}));const s=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${l}`},body:v});if(!s.ok){const P=await s.text();throw console.error("Upload error details:",P),new Error("Upload failed: "+s.statusText)}return await s.json()}}async function hs(f){const l=lt(Ye).accessToken;if(!l)throw new Error("Not signed in");const n=`https://www.googleapis.com/drive/v3/files/${f}?alt=media`,p=await fetch(n,{headers:{Authorization:`Bearer ${l}`}});if(p.status===401)throw await za(),new Error("Token expired, please sign in again");if(!p.ok)throw new Error("Download failed: "+p.statusText);return await p.json()}let Aa;async function Wa(){if(lt(Ye).accessToken)try{console.log("Syncing from cloud..."),Bt.set("syncing");const l=await br();if(l.length===0){console.log("No backups found in cloud."),Bt.set("success");return}const n=l[0].id,p=await hs(n),o=new Set;if(Xt.forEach((c,i)=>{o.add(String(i)),console.log("[DEBUG] Local deleted ID entry:",{key:i,type:typeof i,val:c})}),console.log("[DEBUG] Total locally deleted IDs:",o.size),p.deletedIds&&Array.isArray(p.deletedIds)){console.log("[DEBUG] Cloud data deletedIds count:",p.deletedIds.length);for(const c of p.deletedIds){const i=String(c.id);Xt.has(i)||(Xt.set(i,c),console.log("[DEBUG] New deletion synced from cloud:",i)),o.add(i),c.type==="character"&&tt.has(i)&&(tt.delete(i),console.log("[DEBUG] Removed char locally based on cloud deletion:",i)),c.type==="campaign"&&ot.has(i)&&(ot.delete(i),console.log("[DEBUG] Removed camp locally based on cloud deletion:",i)),c.type==="enemy"&&ma.has(i)&&(ma.delete(i),console.log("[DEBUG] Removed enemy locally based on cloud deletion:",i)),c.type==="encounter"&&_a.has(i)&&(_a.delete(i),console.log("[DEBUG] Removed encounter locally based on cloud deletion:",i))}}if(p.characters&&Array.isArray(p.characters)){console.log("[DEBUG] Syncing",p.characters.length,"characters from cloud");for(const c of p.characters){const i=String(c.id);if(o.has(i)||Xt.has(i)){console.log("[DEBUG] Skipping character because it is marked as deleted:",{id:i,name:c.name}),tt.has(i)&&(console.log("[DEBUG] Character found locally but marked deleted. Removing now:",i),tt.delete(i));for(const m of tt.keys()){const s=tt.get(m);s&&s.id===i&&(console.log("[DEBUG] Mismatched key entry found for deleted char. Removing:",m),tt.delete(m))}continue}const v=tt.get(i);console.log("[DEBUG] Syncing character from cloud:",{id:i,name:c.name,status:v?"OVERWRITING":"ADDING"}),tt.set(i,c)}}if(p.campaigns&&Array.isArray(p.campaigns)){console.log("[DEBUG] Syncing",p.campaigns.length,"campaigns from cloud");for(const c of p.campaigns){const i=String(c.id);if(o.has(i)||Xt.has(i)){console.log("[DEBUG] Skipping campaign because it is marked as deleted:",{id:i,name:c.name}),ot.has(i)&&(console.log("[DEBUG] Campaign found locally but marked deleted. Removing now:",i),ot.delete(i));for(const v of ot.keys()){const m=ot.get(v);m&&m.id===i&&(console.log("[DEBUG] Mismatched key entry found for deleted camp. Removing:",v),ot.delete(v))}continue}console.log("[DEBUG] Syncing campaign from cloud:",{id:i,name:c.name,status:ot.has(i)?"OVERWRITING":"ADDING"}),ot.set(i,c)}}if(p.enemies&&Array.isArray(p.enemies))for(const c of p.enemies){const i=String(c.id);!o.has(i)&&!ma.has(i)&&ma.set(i,c)}if(p.encounters&&Array.isArray(p.encounters))for(const c of p.encounters){const i=String(c.id);!o.has(i)&&!_a.has(i)&&_a.set(i,c)}if(p.images&&typeof p.images=="object"){console.log("[DEBUG] Syncing",Object.keys(p.images).length,"images from cloud");for(const[c,i]of Object.entries(p.images))Ra.has(c)||(Ra.set(c,i),console.log("[DEBUG] New image synced from cloud:",c))}if(p.appSettings){console.log("[DEBUG] Syncing app settings from cloud");const c=lt(oa),i={...p.appSettings};!i.userName&&(i.defaultPlayerName||i.defaultGmName)&&(i.userName=i.defaultPlayerName||i.defaultGmName||"",console.log("[DEBUG] Migrated legacy settings to userName:",i.userName)),delete i.defaultPlayerName,delete i.defaultGmName;const v={...i,...c};console.log("[DEBUG] Merged settings:",{current:c,cloud:i,merged:v}),oa.set(v)}console.log("[DEBUG] Sync from cloud complete."),Bt.set("success"),Va.set(Date.now())}catch(l){console.error("Failed to sync from cloud:",l),Bt.set("error")}}async function Ga(){lt(Ye).accessToken&&(Aa&&clearTimeout(Aa),Aa=setTimeout(async()=>{try{console.log("Syncing to cloud..."),Bt.set("syncing");const l=[],n=new Set;Xt.forEach((s,P)=>{l.push({id:P,...s}),n.add(String(P))});const p=lt(cr).filter(s=>!n.has(String(s.id))),o=lt(La).filter(s=>!n.has(String(s.id))),c=lt(Cr).filter(s=>!n.has(String(s.id))),i=lt(Er).filter(s=>!n.has(String(s.id))),v={};Ra.forEach((s,P)=>{v[P]=s});const m={characters:p,campaigns:o,enemies:c,encounters:i,images:v,deletedIds:l,appSettings:lt(oa),timestamp:Date.now(),version:1,appName:"WeirdWizardVault"};console.log("[DEBUG] Uploading to cloud:",{charactersCount:m.characters.length,campaignsCount:m.campaigns.length,enemiesCount:c.length,imagesCount:Object.keys(v).length,deletedIdsCount:l.length}),await fs(m),console.log("Sync to cloud complete."),Bt.set("success"),Va.set(Date.now())}catch(l){console.error("Failed to sync to cloud:",l),Bt.set("error")}},2e3))}var bs=b('<button class="p-2 -ml-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all"><!></button>'),ms=b("<div></div>"),_s=b('<div class="space-y-6 text-center"><h3 class="text-3xl md:text-4xl font-black text-white uppercase tracking-tight mb-2"> </h3> <p class="text-slate-400 max-w-lg mx-auto mb-8"> </p> <!></div>'),xs=b('<div class="space-y-8 w-full max-w-lg mx-auto"><div class="text-center"><h3 class="text-3xl font-black text-white uppercase tracking-tight mb-2"> </h3> <p class="text-slate-400"> </p></div> <div class="space-y-6"><div><label class="text-xs text-slate-500 uppercase font-black block mb-2 tracking-widest"> </label> <div class="relative"><input class="w-full bg-slate-900 border-2 border-slate-800 hover:border-slate-700 focus:border-indigo-500 rounded-xl p-4 text-lg font-bold text-white outline-none transition-all placeholder:text-slate-600"/> <button class="absolute right-3 top-1/2 -translate-y-1/2 p-2 text-slate-500 hover:text-indigo-400 hover:bg-indigo-500/10 rounded-lg transition-all"><!></button></div></div> <div><label class="text-xs text-slate-500 uppercase font-black block mb-2 tracking-widest"> </label> <input class="w-full bg-slate-900 border-2 border-slate-800 hover:border-slate-700 focus:border-indigo-500 rounded-xl p-4 font-medium text-white outline-none transition-all placeholder:text-slate-600"/></div> <div><label class="text-xs text-slate-500 uppercase font-black block mb-2 tracking-widest"> </label> <textarea class="w-full bg-slate-900 border-2 border-slate-800 hover:border-slate-700 focus:border-indigo-500 rounded-xl p-4 text-white outline-none transition-all resize-none placeholder:text-slate-600" rows="4"></textarea></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white text-lg font-black uppercase tracking-widest py-4 rounded-xl shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2"> <!></button></div></div>'),ws=b('<div class="w-6 h-6 rounded-full bg-indigo-500 flex items-center justify-center shadow-[0_0_10px_rgba(99,102,241,0.5)]"><!></div>'),ys=b('<button><div class="flex-1"><div> </div> <div class="text-xs opacity-60 mt-1 font-medium"> </div></div> <!></button>'),ks=b('<div class="space-y-8 w-full max-w-lg mx-auto"><div class="text-center"><h3 class="text-3xl font-black text-white uppercase tracking-tight mb-2"> </h3> <p class="text-slate-400"> </p></div> <div class="space-y-3"></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white text-lg font-black uppercase tracking-widest py-4 rounded-xl shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2"> <!></button></div>'),$s=b('<div class="space-y-8 w-full max-w-lg mx-auto"><div class="text-center"><h3 class="text-3xl font-black text-white uppercase tracking-tight mb-2"> </h3> <p class="text-slate-400"> </p></div> <div class="bg-slate-900/50 border border-slate-800 rounded-2xl p-6 space-y-4"><label class="text-xs text-slate-500 uppercase font-black block mb-2 tracking-widest flex items-center gap-2"><!> </label> <input type="password" class="w-full bg-slate-950 border border-slate-700 rounded-xl p-4 text-white outline-none focus:border-indigo-500 transition-all placeholder:text-slate-700 font-mono text-center tracking-widest text-lg" placeholder="••••••••"/> <p class="text-xs text-slate-500 leading-relaxed text-center px-4"> </p></div> <button class="w-full bg-emerald-500 hover:bg-emerald-400 text-white text-lg font-black uppercase tracking-widest py-4 rounded-xl shadow-lg shadow-emerald-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2"> </button></div>'),Ss=b('<div class="fixed inset-0 bg-slate-950/95 backdrop-blur-md z-[100] flex flex-col overflow-hidden"><div class="px-6 py-4 flex items-center justify-between border-b border-white/5 bg-white/[0.02]"><div class="flex items-center gap-4"><!> <div><h2 class="text-xl font-black text-white uppercase tracking-tight"> </h2> <div class="flex items-center gap-2 mt-1"></div></div></div> <button class="text-slate-500 hover:text-white font-bold text-xs uppercase tracking-widest px-4 py-2 hover:bg-white/5 rounded-lg transition-all"> </button></div> <div class="flex-1 overflow-y-auto custom-scrollbar p-6 flex flex-col items-center svelte-1uk72qn"><div class="w-full max-w-2xl py-8"><!></div></div></div>');function zs(f,l){yt(l,!0);const n=()=>Fe(oa,"$appSettings",c),p=()=>Fe(Ye,"$googleSession",c),o=()=>Fe(Nt,"$t",c),[c,i]=It();let v=pt(l,"isOpen",3,!1),m=Ce(1),s=Ca({name:"",description:"",gmName:"",password:"",system:"",tier:"starting"});sa(()=>{v()&&(h(m,1),s.system="",s.tier="starting",s.name="",s.description="",s.gmName=n().userName||p().userProfile?.name||"",s.password="")});function P(){h(m,r(m)+1)}function R(){r(m)>1&&h(m,r(m)-1)}function C(D){s.system=D,s.tier=Pr(D),P()}function fe(){l.onSave({...s})}function Y(){s.name=pr("campaign")}var O=ge(),ne=T(O);{var B=D=>{var F=Ss(),I=t(F),N=t(I),H=t(N);{var J=G=>{var M=bs();M.__click=R;var q=t(M);Da(q,{size:24}),e(M),u(G,M)};x(H,G=>{r(m)>1&&G(J)})}var $=a(H,2),E=t($),z=t(E,!0);e(E);var w=a(E,2);ct(w,20,()=>[1,2,3,4],Pt,(G,M)=>{var q=ms();k(()=>Le(q,1,`h-1 rounded-full transition-all duration-500 ${M<=r(m)?"w-8 bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]":"w-2 bg-slate-800"}`)),u(G,q)}),e(w),e($),e(N);var y=a(N,2);y.__click=function(...G){l.onClose?.apply(this,G)};var X=t(y,!0);e(y),e(I);var re=a(I,2),se=t(re),he=t(se);{var oe=G=>{var M=_s(),q=t(M),xe=t(q,!0);e(q);var Ee=a(q,2),be=t(Ee,!0);e(Ee);var U=a(Ee,2);ur(U,{get selectedSystem(){return s.system},onSelect:C}),e(M),k((L,ae)=>{d(xe,L),d(be,ae)},[()=>o()("wizard.campaign.step1_title"),()=>o()("wizard.campaign.step1_subtitle")]),Ve(1,M,()=>it,()=>({duration:300,delay:100})),u(G,M)},Se=G=>{var M=ge(),q=T(M);{var xe=be=>{var U=xs(),L=t(U),ae=t(L),Ue=t(ae,!0);e(ae);var Z=a(ae,2),V=t(Z,!0);e(Z),e(L);var Q=a(L,2),we=t(Q),Ie=t(we),Te=t(Ie,!0);e(Ie);var Pe=a(Ie,2),ie=t(Pe);at(ie);var le=a(ie,2);le.__click=Y;var ze=t(le);Ua(ze,{size:20}),e(le),e(Pe),e(we);var qe=a(we,2),de=t(qe),ye=t(de,!0);e(de);var S=a(de,2);at(S),e(qe);var Ne=a(qe,2),Me=t(Ne),je=t(Me,!0);e(Me);var ce=a(Me,2);_r(ce),e(Ne);var ee=a(Ne,2);ee.__click=P;var te=t(ee),Oe=a(te);ha(Oe,{size:20}),e(ee),e(Q),e(U),k((K,pe,Ae,Be,et,Xe,me,ke,ve,_e)=>{d(Ue,K),d(V,pe),d(Te,Ae),Re(ie,"placeholder",Be),Re(le,"title",et),d(ye,Xe),Re(S,"placeholder",me),d(je,ke),Re(ce,"placeholder",ve),ee.disabled=!s.name,d(te,`${_e??""} `)},[()=>o()("wizard.campaign.step2_title"),()=>o()("wizard.campaign.step2_subtitle"),()=>o()("wizard.campaign.step2_name_label"),()=>o()("wizard.campaign.step2_name_placeholder"),()=>o()("wizard.campaign.step2_random_name_tooltip"),()=>o()("wizard.campaign.step2_gm_label"),()=>o()("wizard.campaign.step2_gm_placeholder"),()=>o()("wizard.campaign.step2_description_label"),()=>o()("wizard.campaign.step2_description_placeholder"),()=>o()("wizard.campaign.continue")]),rt(ie,()=>s.name,K=>s.name=K),rt(S,()=>s.gmName,K=>s.gmName=K),rt(ce,()=>s.description,K=>s.description=K),Ve(1,U,()=>it,()=>({duration:300,delay:100})),u(be,U)},Ee=be=>{var U=ge(),L=T(U);{var ae=Z=>{var V=ks(),Q=t(V),we=t(Q),Ie=t(we,!0);e(we);var Te=a(we,2),Pe=t(Te,!0);e(Te),e(Q);var ie=a(Q,2);ct(ie,21,()=>Nr(s.system),Pt,(de,ye)=>{var S=ys();S.__click=()=>s.tier=r(ye).value;var Ne=t(S),Me=t(Ne),je=t(Me,!0);e(Me);var ce=a(Me,2),ee=t(ce,!0);e(ce),e(Ne);var te=a(Ne,2);{var Oe=K=>{var pe=ws(),Ae=t(pe);ka(Ae,{size:14,class:"text-white"}),e(pe),u(K,pe)};x(te,K=>{s.tier===r(ye).value&&K(Oe)})}e(S),k((K,pe)=>{Le(S,1,`w-full relative flex items-center p-4 rounded-xl border-2 text-left transition-all ${s.tier===r(ye).value?"bg-indigo-600/10 border-indigo-500 ring-1 ring-indigo-500/50":"bg-slate-900/50 border-slate-800 text-slate-400 hover:border-slate-600 hover:bg-slate-900"}`),Le(Me,1,`font-black uppercase tracking-wide text-lg ${s.tier===r(ye).value?"text-indigo-400":"text-slate-300"}`),d(je,K),d(ee,pe)},[()=>o()(r(ye).labelKey),()=>o()("wizard.campaign.step3_tier_description")]),u(de,S)}),e(ie);var le=a(ie,2);le.__click=P;var ze=t(le),qe=a(ze);ha(qe,{size:20}),e(le),e(V),k((de,ye,S)=>{d(Ie,de),d(Pe,ye),d(ze,`${S??""} `)},[()=>o()("wizard.campaign.step3_title"),()=>o()("wizard.campaign.step3_subtitle"),()=>o()("wizard.campaign.continue")]),Ve(1,V,()=>it,()=>({duration:300,delay:100})),u(Z,V)},Ue=Z=>{var V=ge(),Q=T(V);{var we=Ie=>{var Te=$s(),Pe=t(Te),ie=t(Pe),le=t(ie,!0);e(ie);var ze=a(ie,2),qe=t(ze,!0);e(ze),e(Pe);var de=a(Pe,2),ye=t(de),S=t(ye);kr(S,{size:14});var Ne=a(S);e(ye);var Me=a(ye,2);at(Me);var je=a(Me,2),ce=t(je,!0);e(je),e(de);var ee=a(de,2);ee.__click=fe;var te=t(ee,!0);e(ee),e(Te),k((Oe,K,pe,Ae,Be)=>{d(le,Oe),d(qe,K),d(Ne,` ${pe??""}`),d(ce,Ae),d(te,Be)},[()=>o()("wizard.campaign.step4_title"),()=>o()("wizard.campaign.step4_subtitle"),()=>o()("wizard.campaign.step4_password_label"),()=>o()("wizard.campaign.step4_password_info"),()=>o()("wizard.campaign.create")]),rt(Me,()=>s.password,Oe=>s.password=Oe),Ve(1,Te,()=>it,()=>({duration:300,delay:100})),u(Ie,Te)};x(Q,Ie=>{r(m)===4&&Ie(we)},!0)}u(Z,V)};x(L,Z=>{r(m)===3?Z(ae):Z(Ue,!1)},!0)}u(be,U)};x(q,be=>{r(m)===2?be(xe):be(Ee,!1)},!0)}u(G,M)};x(he,G=>{r(m)===1?G(oe):G(Se,!1)})}e(se),e(re),e(F),k((G,M)=>{d(z,G),d(X,M)},[()=>o()("wizard.campaign.title"),()=>o()("wizard.campaign.cancel")]),Ve(3,F,()=>it,()=>({duration:200})),u(D,F)};x(ne,D=>{v()&&D(B)})}u(f,O),kt(),i()}$t(["click"]);var Cs=b('<div class="space-y-4"><div><label class="text-xs text-slate-500 uppercase font-black block mb-2 tracking-widest flex items-center gap-1"><!> </label> <div class="p-3 bg-slate-800 rounded-lg border border-slate-700 text-slate-300 text-sm font-bold flex items-center gap-2"> <span class="text-[9px] bg-slate-700 text-slate-400 px-1.5 py-0.5 rounded uppercase tracking-wider ml-auto"> </span></div></div> <div><label for="char-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest"> </label> <input id="char-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div> <div><label for="char-player" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> </label> <input id="char-player" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-ancestry" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest"> </label> <input id="char-ancestry" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div> <div><label for="char-level" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest"> </label> <input id="char-level" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div> <div><label for="char-path" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest"> </label> <input id="char-path" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-defense" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest"> </label> <input id="char-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div> <div><label for="char-health" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest"> </label> <input id="char-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div></div> <div class="flex gap-3 mt-8"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-3 rounded-xl text-white font-bold active:scale-95"> </button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95"> </button></div>',1);function Es(f,l){yt(l,!0);const n=()=>Fe(Nt,"$t",p),[p,o]=It();let c=pt(l,"isOpen",3,!1),i=pt(l,"initialData",3,"{}"),v=Ca({name:"",playerName:"",ancestry:"",novicePath:"",level:1,defense:10,health:24,system:ra});sa(()=>{if(c()&&i())try{const s=JSON.parse(i());v.name=s.name||"",v.playerName=s.playerName||"",v.ancestry=s.ancestry||"",v.novicePath=s.paths&&s.paths.novice?s.paths.novice:"",v.level=s.level||1,v.defense=s.defense||10,v.health=s.health||s.normalHealth||24,v.system=s.system||ra}catch{v.name="",v.playerName="",v.ancestry="",v.novicePath="",v.level=1,v.defense=10,v.health=24,v.system=ra}});function m(){l.onSave({...v})}{let s=wt(()=>n()("character.settings.title"));lr(f,{get isOpen(){return c()},get onClose(){return l.onClose},get title(){return r(s)},maxWidth:"max-w-md",children:(P,R)=>{var C=Cs(),fe=T(C),Y=t(fe),O=t(Y),ne=t(O);ya(ne,{size:12});var B=a(ne);e(O);var D=a(O,2),F=t(D),I=a(F),N=t(I,!0);e(I),e(D),e(Y);var H=a(Y,2),J=t(H),$=t(J,!0);e(J);var E=a(J,2);at(E),e(H);var z=a(H,2),w=t(z),y=t(w);ba(y,{size:12});var X=a(y);e(w);var re=a(w,2);at(re),e(z);var se=a(z,2),he=t(se),oe=t(he),Se=t(oe,!0);e(oe);var G=a(oe,2);at(G),e(he);var M=a(he,2),q=t(M),xe=t(q,!0);e(q);var Ee=a(q,2);at(Ee),e(M),e(se);var be=a(se,2),U=t(be),L=t(U,!0);e(U);var ae=a(U,2);at(ae),e(be);var Ue=a(be,2),Z=t(Ue),V=t(Z),Q=t(V,!0);e(V);var we=a(V,2);at(we),e(Z);var Ie=a(Z,2),Te=t(Ie),Pe=t(Te,!0);e(Te);var ie=a(Te,2);at(ie),e(Ie),e(Ue),e(fe);var le=a(fe,2),ze=t(le);ze.__click=function(...S){l.onClose?.apply(this,S)};var qe=t(ze,!0);e(ze);var de=a(ze,2);de.__click=m;var ye=t(de,!0);e(de),e(le),k((S,Ne,Me,je,ce,ee,te,Oe,K,pe,Ae,Be,et,Xe,me,ke)=>{d(B,` ${S??""}`),d(F,`${Ne??""} `),d(N,Me),d($,je),Re(E,"placeholder",ce),d(X,` ${ee??""}`),Re(re,"placeholder",te),d(Se,Oe),Re(G,"placeholder",K),d(xe,pe),d(L,Ae),Re(ae,"placeholder",Be),d(Q,et),d(Pe,Xe),d(qe,me),d(ye,ke)},[()=>n()("character.settings.system_label"),()=>(()=>{const S=dr.find(Ne=>Ne.id===v.system);return S?n()(S.nameKey):n()("character.settings.system_unknown")})(),()=>n()("character.settings.fixed"),()=>n()("character.settings.name_label"),()=>n()("character.settings.name_placeholder"),()=>n()("character.settings.player_label"),()=>n()("character.settings.player_placeholder"),()=>n()("character.settings.ancestry_label"),()=>n()("character.settings.ancestry_placeholder"),()=>n()("character.settings.level_label"),()=>n()("character.settings.path_label"),()=>n()("character.settings.path_placeholder"),()=>n()("character.settings.defense_label"),()=>n()("character.settings.health_label"),()=>n()("character.settings.cancel"),()=>n()("character.settings.save_changes")]),rt(E,()=>v.name,S=>v.name=S),rt(re,()=>v.playerName,S=>v.playerName=S),rt(G,()=>v.ancestry,S=>v.ancestry=S),rt(Ee,()=>v.level,S=>v.level=S),rt(ae,()=>v.novicePath,S=>v.novicePath=S),rt(we,()=>v.defense,S=>v.defense=S),rt(ie,()=>v.health,S=>v.health=S),u(P,C)},$$slots:{default:!0}})}kt(),o()}$t(["click"]);var Ps=b('<button class="p-2 -ml-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all"><!></button>'),Ns=b("<div></div>"),Is=b('<div class="space-y-6 text-center"><h3 class="text-3xl md:text-4xl font-black text-white uppercase tracking-tight mb-2"> </h3> <p class="text-slate-400 max-w-lg mx-auto mb-8"> </p> <!></div>'),Ms=b("<button> </button>"),js=b("<button> </button> <button> </button>",1),Ts=b('<div class="pt-2"><label for="other-ancestry" class="text-xs text-slate-500 uppercase font-black block mb-2 tracking-widest"> </label> <input id="other-ancestry" class="w-full bg-slate-900 border-2 border-slate-800 hover:border-slate-700 focus:border-indigo-500 rounded-xl p-4 text-white outline-none transition-all placeholder:text-slate-600"/></div>'),Os=b('<div class="space-y-8 w-full max-w-lg mx-auto"><div class="text-center"><h3 class="text-3xl font-black text-white uppercase tracking-tight mb-2"> </h3> <p class="text-slate-400"> </p></div> <div class="grid grid-cols-2 gap-3"><!></div> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white text-lg font-black uppercase tracking-widest py-4 rounded-xl shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2"> <!></button></div>'),As=b('<button class="p-3 rounded-xl border border-slate-800 bg-slate-900/50 hover:bg-slate-800 text-slate-300 hover:text-white font-bold text-xs uppercase tracking-widest transition-all"> </button>'),Gs=b('<div class="grid grid-cols-2 gap-2"></div>'),Bs=b("<button> </button>"),Ds=b('<div class="space-y-3"><div class="flex items-center justify-between"><button class="text-xs text-indigo-400 hover:text-indigo-300 font-bold uppercase tracking-widest flex items-center gap-1 transition-all"><!> </button></div> <div class="grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar pr-2 svelte-n6fmm8"></div></div>'),Us=b('<div class="w-16 h-16 bg-slate-800 rounded-full mx-auto flex items-center justify-center mb-2"><!></div> <p class="text-xs text-slate-500"> </p>',1),Ls=b('<div class="space-y-1"><div class="text-[10px] text-indigo-400 font-bold uppercase tracking-widest"> </div> <div class="text-xl font-black text-white"> </div></div>'),Rs=b('<div class="space-y-8 w-full max-w-lg mx-auto"><div class="text-center"><h3 class="text-3xl font-black text-white uppercase tracking-tight mb-2"> </h3> <p class="text-slate-400"> </p></div> <div class="space-y-4"><!> <div class="bg-slate-900/50 border-2 border-slate-800 rounded-2xl p-6 text-center space-y-4"><!> <button class="w-full bg-white/5 hover:bg-white/10 text-white font-bold py-3 rounded-xl border border-white/10 transition-all flex items-center justify-center gap-2 hover:border-white/20 text-xs"><!> </button></div></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white text-lg font-black uppercase tracking-widest py-4 rounded-xl shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2"> <!></button></div>'),Fs=b("<button> </button>"),Hs=b("<button> </button>"),Ws=b('<div class="pt-2"><label for="other-path" class="text-xs text-slate-500 uppercase font-black block mb-2 tracking-widest"> </label> <input id="other-path" class="w-full bg-slate-900 border-2 border-slate-800 hover:border-slate-700 focus:border-indigo-500 rounded-xl p-4 text-white outline-none transition-all placeholder:text-slate-600"/></div>'),qs=b('<div class="space-y-8 w-full max-w-lg mx-auto"><div class="text-center"><h3 class="text-3xl font-black text-white uppercase tracking-tight mb-2"> </h3> <p class="text-slate-400"> </p></div> <div class="grid grid-cols-2 gap-3"><button class="col-span-2 p-3 text-xs text-slate-500 hover:text-white uppercase tracking-widest hover:underline"> </button> <!></div> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white text-lg font-black uppercase tracking-widest py-4 rounded-xl shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2"> <!></button></div>'),Vs=b('<div class="space-y-8 w-full max-w-lg mx-auto"><div class="text-center"><h3 class="text-3xl font-black text-white uppercase tracking-tight mb-2"> </h3> <p class="text-slate-400"> </p></div> <div class="space-y-6"><div><label for="character-name" class="text-xs text-slate-500 uppercase font-black block mb-2 tracking-widest"> </label> <div class="relative"><input id="character-name" class="w-full bg-slate-900 border-2 border-slate-800 hover:border-slate-700 focus:border-indigo-500 rounded-xl p-4 text-lg font-bold text-white outline-none transition-all placeholder:text-slate-600"/> <button class="absolute right-3 top-1/2 -translate-y-1/2 p-2 text-slate-500 hover:text-indigo-400 hover:bg-indigo-500/10 rounded-lg transition-all"><!></button></div></div> <div><label for="player-name" class="text-xs text-slate-500 uppercase font-black block mb-2 tracking-widest flex items-center gap-2"><!> </label> <input id="player-name" class="w-full bg-slate-900 border-2 border-slate-800 hover:border-slate-700 focus:border-indigo-500 rounded-xl p-4 font-medium text-white outline-none transition-all placeholder:text-slate-600"/></div> <div class="bg-indigo-900/20 border border-indigo-500/20 rounded-xl p-4 flex items-start gap-3"><!> <div><h4 class="text-sm font-bold text-white mb-1"> </h4> <p class="text-xs text-slate-400"> </p></div></div> <button class="w-full bg-emerald-500 hover:bg-emerald-400 disabled:opacity-50 text-white text-lg font-black uppercase tracking-widest py-4 rounded-xl shadow-lg shadow-emerald-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2"> </button></div></div>'),Ks=b('<div class="fixed inset-0 bg-slate-950/95 backdrop-blur-md z-[100] flex flex-col overflow-hidden"><div class="px-6 py-4 flex items-center justify-between border-b border-white/5 bg-white/[0.02]"><div class="flex items-center gap-4"><!> <div><h2 class="text-xl font-black text-white uppercase tracking-tight"> </h2> <div class="flex items-center gap-2 mt-1"></div></div></div> <button class="text-slate-500 hover:text-white font-bold text-xs uppercase tracking-widest px-4 py-2 hover:bg-white/5 rounded-lg transition-all"> </button></div> <div class="flex-1 overflow-y-auto custom-scrollbar p-6 flex flex-col items-center svelte-n6fmm8"><div class="w-full max-w-2xl py-8"><!></div></div></div>');function Ys(f,l){yt(l,!0);const n=()=>Fe(oa,"$appSettings",c),p=()=>Fe(Ye,"$googleSession",c),o=()=>Fe(Nt,"$t",c),[c,i]=It();let v=pt(l,"isOpen",3,!1),m=Ce(1),s=Ca({name:"",playerName:"",system:"",ancestry:"",profession:"",novicePath:""}),P=Ce(""),R=Ce(""),C=Ce("");const fe={sofdl:{Academic:["architecture","astrology","engineering","etiquette_customs","folklore","geography","heraldry","history","law","literature","magic","medicine","navigation","occult","philosophy","politics","nature","religion","science","war"],Criminal:["agitator","beggar","burglar","carouser","charlatan","cultist","fence","forger","gambler","grave_robber","informant","murderer","pickpocket","pirate","prostitute","rebel","saboteur","spy","thug","urchin"],Martial:["constable","detective","guard","jailer","officer","marine","mercenary","militia_member","patroller","peasant_conscript","slave","soldier","squire","torturer"],Wilderness:["bandit","barbarian","exile","gatherer","guide","hermit","hunter","nomad","pioneer","poacher","prospector","outlaw","refugee","spelunker","tracker","trapper","woodcutter"],Religious:["devotee","evangelist","flagellant","heretic","initiate_old_faith","minister","acolyte_new_god","inquisitor_henchman","pilgrim","street_preacher","temple_ward"],Common:["animal_trainer","apothecary","artisan","artist","boatman","butcher","cook","drover","entertainer","farmer","fisher","groom","laborer","merchant","miner","musician","sailor","servant","shopkeeper","teamster"]},sofww:{Entertainment:["acrobat","animal_handler","artist","busker","clown","dancer","fortune_teller","juggler","singer","thespian"],Military:["caravan_guard","herald","house_guard","marine","member_of_the_watch","mercenary_soldier","militia_member","soldier","squire","sworn_bodyguard"],Religious:["acolyte","aspirant","cultist","evangelist","fundamentalist","heretic","missionary","minister","prophet","scribe"],Academic:["apothecary","apprentice_magician","astrologer","doctor","folklorist","inventor","naturalist","occultist","philosopher","politician"],Aristocratic:["carouser","dilettante","merchant","landholder","influencer"],Common:["baker","bartender","carpenter","cook","exterminator","farmer","fisher","gravedigger","groom","herder","jeweler","laborer","mason","miner","sailor","servant","shopkeeper","smith","tanner","teamster"],Criminal:["bandit","burglar","charlatan","constable","detective","forger","grave_robber","jailer","mugger","rake"],Wilderness:["beggar","forester","gatherer","hunter","nomad","pilgrim","prospector","recluse","spelunker","woodcutter"]}};sa(()=>{v()&&(h(m,1),s.system="",s.name="",s.playerName=n().userName||p().userProfile?.name||"",s.ancestry="",s.profession="",s.novicePath="",h(P,""),h(R,""),h(C,""))});function Y(){r(m)===2&&s.ancestry==="Other"&&!r(P)||r(m)===4&&s.novicePath==="Other"&&!r(R)||(r(m)===2&&s.ancestry==="Other"&&(s.ancestry=r(P)),r(m)===4&&s.novicePath==="Other"&&(s.novicePath=r(R)),r(m)===3&&h(C,""),h(m,r(m)+1))}function O(){r(m)>1&&h(m,r(m)-1)}function ne($){s.system=$,Y()}function B(){s.name=pr("person")}function D(){const $=s.system==="sofdl"||s.system==="sofww"?s.system:"sofww",E=fe[$],z=Object.keys(E),w=z[Math.floor(Math.random()*z.length)],y=E[w],X=y[Math.floor(Math.random()*y.length)],re=o()(`professions.${$}.${w.toLowerCase()}.${X}`),se=o()(`professions.categories.${w.toLowerCase()}`);s.profession=`${re} (${se})`,h(C,"")}function F($,E){const z=s.system==="sofdl"||s.system==="sofww"?s.system:"sofww",w=o()(`professions.${z}.${$.toLowerCase()}.${E}`),y=o()(`professions.categories.${$.toLowerCase()}`);s.profession=`${w} (${y})`}function I(){s.novicePath==="Other"&&(s.novicePath=r(R));const $=s.system==="sofdl"||s.system==="sofww"?s.system:"sofww";let E=s.ancestry;["Human","Changeling","Clockwork","Dwarf","Goblin","Orc"].includes(E)&&(E=o()(`ancestries.${$}.${E.toLowerCase()}`));let w=s.novicePath;["Magician","Priest","Rogue","Warrior","Fighter","Mage","Ancestry"].includes(w)&&(w=o()(`paths.${$}.${w.toLowerCase()}`));const X={...s,ancestry:E,novicePath:w,level:s.system==="sofdl"?0:1,health:(s.system==="sofdl",10),defense:10};l.onSave(X)}var N=ge(),H=T(N);{var J=$=>{var E=Ks(),z=t(E),w=t(z),y=t(w);{var X=U=>{var L=Ps();L.__click=O;var ae=t(L);Da(ae,{size:24}),e(L),u(U,L)};x(y,U=>{r(m)>1&&U(X)})}var re=a(y,2),se=t(re),he=t(se,!0);e(se);var oe=a(se,2);ct(oe,20,()=>[1,2,3,4,5],Pt,(U,L)=>{var ae=Ns();k(()=>Le(ae,1,`h-1 rounded-full transition-all duration-500 ${L<=r(m)?"w-8 bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]":"w-2 bg-slate-800"}`)),u(U,ae)}),e(oe),e(re),e(w);var Se=a(w,2);Se.__click=function(...U){l.onClose?.apply(this,U)};var G=t(Se,!0);e(Se),e(z);var M=a(z,2),q=t(M),xe=t(q);{var Ee=U=>{var L=Is(),ae=t(L),Ue=t(ae,!0);e(ae);var Z=a(ae,2),V=t(Z,!0);e(Z);var Q=a(Z,2);ur(Q,{get selectedSystem(){return s.system},onSelect:ne}),e(L),k((we,Ie)=>{d(Ue,we),d(V,Ie)},[()=>o()("wizard.character.step1_title"),()=>o()("wizard.character.step1_subtitle")]),Ve(1,L,()=>it,()=>({duration:300,delay:100})),u(U,L)},be=U=>{var L=ge(),ae=T(L);{var Ue=V=>{var Q=Os(),we=t(Q),Ie=t(we),Te=t(Ie,!0);e(Ie);var Pe=a(Ie,2),ie=t(Pe,!0);e(Pe),e(we);var le=a(we,2),ze=t(le);{var qe=ce=>{var ee=ge(),te=T(ee);ct(te,16,()=>["Human","Changeling","Clockwork","Dwarf","Goblin","Orc","Other"],Pt,(Oe,K)=>{var pe=Ms();pe.__click=()=>s.ancestry=K;var Ae=t(pe,!0);e(pe),k(Be=>{Le(pe,1,`p-4 rounded-xl border-2 text-center font-bold uppercase tracking-wider transition-all ${s.ancestry===K?"bg-indigo-600/20 border-indigo-500 text-white shadow-[0_0_15px_rgba(99,102,241,0.3)]":"bg-slate-900 border-slate-800 text-slate-400 hover:border-slate-600 hover:text-white"}`),d(Ae,Be)},[()=>o()(`ancestries.sofdl.${K.toLowerCase()}`)]),u(Oe,pe)}),u(ce,ee)},de=ce=>{var ee=js(),te=T(ee);te.__click=()=>s.ancestry="Human";var Oe=t(te,!0);e(te);var K=a(te,2);K.__click=()=>s.ancestry="Other";var pe=t(K,!0);e(K),k((Ae,Be)=>{Le(te,1,`p-4 rounded-xl border-2 text-center font-bold uppercase tracking-wider transition-all ${s.ancestry==="Human"?"bg-indigo-600/20 border-indigo-500 text-white shadow-[0_0_15px_rgba(99,102,241,0.3)]":"bg-slate-900 border-slate-800 text-slate-400 hover:border-slate-600 hover:text-white"}`),d(Oe,Ae),Le(K,1,`p-4 rounded-xl border-2 text-center font-bold uppercase tracking-wider transition-all ${s.ancestry==="Other"?"bg-indigo-600/20 border-indigo-500 text-white shadow-[0_0_15px_rgba(99,102,241,0.3)]":"bg-slate-900 border-slate-800 text-slate-400 hover:border-slate-600 hover:text-white"}`),d(pe,Be)},[()=>o()("ancestries.sofww.human"),()=>o()("ancestries.sofww.other")]),u(ce,ee)};x(ze,ce=>{s.system==="sofdl"?ce(qe):ce(de,!1)})}e(le);var ye=a(le,2);{var S=ce=>{var ee=Ts(),te=t(ee),Oe=t(te,!0);e(te);var K=a(te,2);at(K),e(ee),k((pe,Ae)=>{d(Oe,pe),Re(K,"placeholder",Ae)},[()=>o()("wizard.character.step2_other_label"),()=>o()("wizard.character.step2_other_placeholder")]),rt(K,()=>r(P),pe=>h(P,pe)),Ve(1,ee,()=>Ya),u(ce,ee)};x(ye,ce=>{s.ancestry==="Other"&&ce(S)})}var Ne=a(ye,2);Ne.__click=Y;var Me=t(Ne),je=a(Me);ha(je,{size:20}),e(Ne),e(Q),k((ce,ee,te)=>{d(Te,ce),d(ie,ee),Ne.disabled=!s.ancestry||s.ancestry==="Other"&&!r(P),d(Me,`${te??""} `)},[()=>o()("wizard.character.step2_title"),()=>o()("wizard.character.step2_subtitle"),()=>o()("wizard.character.continue")]),Ve(1,Q,()=>it,()=>({duration:300,delay:100})),u(V,Q)},Z=V=>{var Q=ge(),we=T(Q);{var Ie=Pe=>{var ie=Rs(),le=t(ie),ze=t(le),qe=t(ze,!0);e(ze);var de=a(ze,2),ye=t(de,!0);e(de),e(le);var S=a(le,2),Ne=t(S);{var Me=me=>{var ke=Gs();ct(ke,21,()=>Object.keys(fe[s.system==="sofdl"?"sofdl":"sofww"]),Pt,(ve,_e)=>{var $e=As();$e.__click=()=>h(C,r(_e),!0);var We=t($e,!0);e($e),k(De=>d(We,De),[()=>o()(`professions.categories.${r(_e).toLowerCase()}`)]),u(ve,$e)}),e(ke),u(me,ke)},je=me=>{var ke=Ds(),ve=t(ke),_e=t(ve);_e.__click=()=>h(C,"");var $e=t(_e);Da($e,{size:14});var We=a($e);e(_e),e(ve);var De=a(ve,2);ct(De,21,()=>fe[s.system==="sofdl"?"sofdl":"sofww"][r(C)],Pt,(Ge,Ze)=>{const j=wt(()=>o()(`professions.${s.system==="sofdl"?"sofdl":"sofww"}.${r(C).toLowerCase()}.${r(Ze)}`));var ue=Bs();ue.__click=()=>F(r(C),r(Ze));var g=t(ue,!0);e(ue),k(W=>{Le(ue,1,`p-2.5 rounded-lg border text-left text-xs font-bold transition-all ${W??""}`),d(g,r(j))},[()=>s.profession.includes(r(j))?"bg-indigo-600/20 border-indigo-500 text-white shadow-[0_0_10px_rgba(99,102,241,0.2)]":"bg-slate-900 border-slate-800 text-slate-400 hover:border-slate-700 hover:text-slate-200"]),u(Ge,ue)}),e(De),e(ke),k(Ge=>d(We,` ${Ge??""}`),[()=>o()(`professions.categories.${r(C).toLowerCase()}`)]),Ve(1,ke,()=>it,()=>({duration:200})),u(me,ke)};x(Ne,me=>{r(C)?me(je,!1):me(Me)})}var ce=a(Ne,2),ee=t(ce);{var te=me=>{var ke=Us(),ve=T(ke),_e=t(ve);vr(_e,{size:28,class:"text-slate-600"}),e(ve);var $e=a(ve,2),We=t($e,!0);e($e),k(De=>d(We,De),[()=>o()("wizard.character.step3_empty_message")]),u(me,ke)},Oe=me=>{var ke=Ls(),ve=t(ke),_e=t(ve,!0);e(ve);var $e=a(ve,2),We=t($e,!0);e($e),e(ke),k(De=>{d(_e,De),d(We,s.profession)},[()=>o()("wizard.character.step3_your_profession")]),Ve(1,ke,()=>it),u(me,ke)};x(ee,me=>{s.profession?me(Oe,!1):me(te)})}var K=a(ee,2);K.__click=D;var pe=t(K);Ua(pe,{size:16});var Ae=a(pe);e(K),e(ce),e(S);var Be=a(S,2);Be.__click=Y;var et=t(Be),Xe=a(et);ha(Xe,{size:20}),e(Be),e(ie),k((me,ke,ve,_e)=>{d(qe,me),d(ye,ke),d(Ae,` ${ve??""}`),Be.disabled=!s.profession,d(et,`${_e??""} `)},[()=>o()("wizard.character.step3_title"),()=>o()("wizard.character.step3_subtitle"),()=>s.profession?o()("wizard.character.step3_roll_again"):o()("wizard.character.step3_roll"),()=>o()("wizard.character.continue")]),Ve(1,ie,()=>it,()=>({duration:300,delay:100})),u(Pe,ie)},Te=Pe=>{var ie=ge(),le=T(ie);{var ze=de=>{var ye=qs(),S=t(ye),Ne=t(S),Me=t(Ne,!0);e(Ne);var je=a(Ne,2),ce=t(je,!0);e(je),e(S);var ee=a(S,2),te=t(ee);te.__click=()=>s.novicePath="";var Oe=t(te,!0);e(te);var K=a(te,2);{var pe=ve=>{var _e=ge(),$e=T(_e);ct($e,16,()=>["Magician","Priest","Rogue","Warrior","Other"],Pt,(We,De)=>{var Ge=Fs();Ge.__click=()=>s.novicePath=De;var Ze=t(Ge,!0);e(Ge),k(j=>{Le(Ge,1,`p-4 rounded-xl border-2 text-center font-bold uppercase tracking-wider transition-all ${s.novicePath===De?"bg-indigo-600/20 border-indigo-500 text-white shadow-[0_0_15px_rgba(99,102,241,0.3)]":"bg-slate-900 border-slate-800 text-slate-400 hover:border-slate-600 hover:text-white"}`),d(Ze,j)},[()=>o()(`paths.sofdl.${De.toLowerCase()}`)]),u(We,Ge)}),u(ve,_e)},Ae=ve=>{var _e=ge(),$e=T(_e);ct($e,16,()=>["Fighter","Mage","Priest","Rogue","Ancestry","Other"],Pt,(We,De)=>{var Ge=Hs();Ge.__click=()=>s.novicePath=De;var Ze=t(Ge,!0);e(Ge),k(j=>{Le(Ge,1,`p-4 rounded-xl border-2 text-center font-bold uppercase tracking-wider transition-all ${s.novicePath===De?"bg-indigo-600/20 border-indigo-500 text-white shadow-[0_0_15px_rgba(99,102,241,0.3)]":"bg-slate-900 border-slate-800 text-slate-400 hover:border-slate-600 hover:text-white"}`),d(Ze,j)},[()=>o()(`paths.sofww.${De.toLowerCase()}`)]),u(We,Ge)}),u(ve,_e)};x(K,ve=>{s.system==="sofdl"?ve(pe):ve(Ae,!1)})}e(ee);var Be=a(ee,2);{var et=ve=>{var _e=Ws(),$e=t(_e),We=t($e,!0);e($e);var De=a($e,2);at(De),e(_e),k((Ge,Ze)=>{d(We,Ge),Re(De,"placeholder",Ze)},[()=>o()("wizard.character.step4_other_label"),()=>o()("wizard.character.step4_other_placeholder")]),rt(De,()=>r(R),Ge=>h(R,Ge)),Ve(1,_e,()=>Ya),u(ve,_e)};x(Be,ve=>{s.novicePath==="Other"&&ve(et)})}var Xe=a(Be,2);Xe.__click=Y;var me=t(Xe),ke=a(me);ha(ke,{size:20}),e(Xe),e(ye),k((ve,_e,$e,We)=>{d(Me,ve),d(ce,_e),d(Oe,$e),d(me,`${We??""} `)},[()=>o()("wizard.character.step4_title"),()=>o()("wizard.character.step4_subtitle"),()=>o()("wizard.character.step4_skip"),()=>o()("wizard.character.continue")]),Ve(1,ye,()=>it,()=>({duration:300,delay:100})),u(de,ye)},qe=de=>{var ye=ge(),S=T(ye);{var Ne=Me=>{var je=Vs(),ce=t(je),ee=t(ce),te=t(ee,!0);e(ee);var Oe=a(ee,2),K=t(Oe,!0);e(Oe),e(ce);var pe=a(ce,2),Ae=t(pe),Be=t(Ae),et=t(Be,!0);e(Be);var Xe=a(Be,2),me=t(Xe);at(me);var ke=a(me,2);ke.__click=B;var ve=t(ke);Ua(ve,{size:20}),e(ke),e(Xe),e(Ae);var _e=a(Ae,2),$e=t(_e),We=t($e);ba(We,{size:14});var De=a(We);e($e);var Ge=a($e,2);at(Ge),e(_e);var Ze=a(_e,2),j=t(Ze);$r(j,{size:20,class:"text-indigo-400 shrink-0 mt-0.5"});var ue=a(j,2),g=t(ue),W=t(g,!0);e(g);var _=a(g,2),A=t(_,!0);e(_),e(ue),e(Ze);var He=a(Ze,2);He.__click=I;var Je=t(He,!0);e(He),e(pe),e(je),k((vt,Ut,mt,st,Mt,Lt,Rt,Zt,ia,Ft)=>{d(te,vt),d(K,Ut),d(et,mt),Re(me,"placeholder",st),Re(ke,"title",Mt),d(De,` ${Lt??""}`),Re(Ge,"placeholder",Rt),d(W,Zt),d(A,ia),He.disabled=!s.name,d(Je,Ft)},[()=>o()("wizard.character.step5_title"),()=>o()("wizard.character.step5_subtitle"),()=>o()("wizard.character.step5_character_name_label"),()=>o()("wizard.character.step5_character_name_placeholder"),()=>o()("wizard.character.step5_random_name_tooltip"),()=>o()("wizard.character.step5_player_name_label"),()=>o()("wizard.character.step5_player_name_placeholder"),()=>o()("wizard.character.step5_ready_title"),()=>o()("wizard.character.step5_ready_message"),()=>o()("wizard.character.create")]),rt(me,()=>s.name,vt=>s.name=vt),rt(Ge,()=>s.playerName,vt=>s.playerName=vt),Ve(1,je,()=>it,()=>({duration:300,delay:100})),u(Me,je)};x(S,Me=>{r(m)===5&&Me(Ne)},!0)}u(de,ye)};x(le,de=>{r(m)===4?de(ze):de(qe,!1)},!0)}u(Pe,ie)};x(we,Pe=>{r(m)===3?Pe(Ie):Pe(Te,!1)},!0)}u(V,Q)};x(ae,V=>{r(m)===2?V(Ue):V(Z,!1)},!0)}u(U,L)};x(xe,U=>{r(m)===1?U(Ee):U(be,!1)})}e(q),e(M),e(E),k((U,L)=>{d(he,U),d(G,L)},[()=>o()("wizard.character.title"),()=>o()("wizard.character.cancel")]),Ve(3,E,()=>it,()=>({duration:200})),u($,E)};x(H,$=>{v()&&$(J)})}u(f,N),kt(),i()}$t(["click"]);var Js=b('<div class="ml-auto flex items-center h-full self-center"><div class="w-3 h-3 rounded-full bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]"></div></div>'),Xs=b('<button><div><!></div> <div class="flex-1"><h4 class="font-bold text-sm mb-1"> </h4> <p class="text-[10px] opacity-70 leading-relaxed"> </p></div> <!></button>'),Zs=b('<div class="space-y-3 pt-4 border-t border-slate-800"><label class="text-xs font-black uppercase tracking-widest text-slate-500 flex items-center gap-2"><!> </label> <div class="grid grid-cols-1 gap-3"></div></div>'),Qs=b('<div class="space-y-6"><div><label for="settings-player-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> </label> <input id="settings-player-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/> <p class="text-[10px] text-slate-500 mt-1">O nome do jogador associado a este personagem.</p></div> <!></div> <div class="flex flex-col-reverse sm:flex-row gap-3 mt-8"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-4 sm:py-3 rounded-xl text-white font-bold active:scale-95"> </button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-4 sm:py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95"> </button></div>',1);function eo(f,l){yt(l,!0);const n=()=>Fe(Nt,"$t",p),[p,o]=It();let c=pt(l,"isOpen",3,!1),i=pt(l,"characterData",3,null),v=Ce(""),m=Ce("standard"),s=[{value:"standard",label:"Standard",desc:"Sistema de magia padrão do Shadow of the Demon Lord.",icon:vr,disabled:!1},{value:"forbidden_rules",label:"Forbidden Rules",desc:"Coming Soon",icon:Sr,disabled:!0},{value:"uncanny_arcana",label:"Uncanny Arcana",desc:"Coming Soon",icon:Qa,disabled:!0}];sa(()=>{c()&&i()&&(h(v,i().playerName||"",!0),h(m,i().magicSystem||"standard",!0))});function P(){l.onSave({playerName:r(v),magicSystem:r(m)})}{let R=wt(()=>n()("character.settings.title_label"));lr(f,{get isOpen(){return c()},get onClose(){return l.onClose},get title(){return`⚙️ ${r(R)??""}`},maxWidth:"max-w-md",children:(C,fe)=>{var Y=Qs(),O=T(Y),ne=t(O),B=t(ne),D=t(B);ba(D,{size:12});var F=a(D);e(B);var I=a(B,2);at(I),Dt(2),e(ne);var N=a(ne,2);{var H=y=>{var X=Zs(),re=t(X),se=t(re);Qa(se,{size:14});var he=a(se);e(re);var oe=a(re,2);ct(oe,21,()=>s,Pt,(Se,G)=>{var M=Xs();M.__click=()=>!r(G).disabled&&h(m,r(G).value,!0);var q=t(M),xe=t(q);Ur(xe,()=>r(G).icon,(V,Q)=>{Q(V,{size:20})}),e(q);var Ee=a(q,2),be=t(Ee),U=t(be,!0);e(be);var L=a(be,2),ae=t(L,!0);e(L),e(Ee);var Ue=a(Ee,2);{var Z=V=>{var Q=Js();u(V,Q)};x(Ue,V=>{r(m)===r(G).value&&V(Z)})}e(M),k(()=>{Le(M,1,`flex items-start gap-4 p-4 rounded-xl border text-left transition-all ${r(m)===r(G).value?"bg-indigo-600/20 border-indigo-500 text-white":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"} ${r(G).disabled?"opacity-50 cursor-not-allowed":""}`),M.disabled=r(G).disabled,Le(q,1,`mt-1 p-2 rounded-lg bg-slate-800 ${r(m)===r(G).value?"text-indigo-400":"text-slate-500"}`),d(U,r(G).label),d(ae,r(G).desc)}),u(Se,M)}),e(oe),e(X),k(Se=>d(he,` ${Se??""}`),[()=>n()("character.settings.magic_system")]),u(y,X)};x(N,y=>{i()?.system==="sofdl"&&y(H)})}e(O);var J=a(O,2),$=t(J);$.__click=function(...y){l.onClose?.apply(this,y)};var E=t($,!0);e($);var z=a($,2);z.__click=P;var w=t(z,!0);e(z),e(J),k((y,X,re)=>{d(F,` ${y??""}`),d(E,X),d(w,re)},[()=>n()("character.settings.player_name"),()=>n()("common.buttons.cancel")||"Cancelar",()=>n()("common.buttons.save")||"Salvar"]),rt(I,()=>r(v),y=>h(v,y)),u(C,Y)},$$slots:{default:!0}})}kt(),o()}$t(["click"]);var to=b('<img alt="Avatar" class="w-10 h-10 rounded-full border-2 border-indigo-500/50 shadow-lg object-cover"/>'),ao=b('<div class="w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white border-2 border-indigo-400/30 shadow-lg"><span class="font-bold text-lg"><!></span></div>'),ro=b('<div class="absolute right-0 top-full mt-2 w-48 bg-slate-800 rounded-xl shadow-xl border border-slate-700 p-2 z-50 animate-in fade-in slide-in-from-top-2"><div class="px-3 py-2 border-b border-slate-700 mb-2"><p class="text-xs text-slate-400"> </p> <p class="text-sm font-bold text-white truncate"> </p></div> <button class="w-full flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors text-sm"><!> </button></div>  <div class="fixed inset-0 z-40"></div>',1),so=b('<div class="relative"><button><!> <div class="absolute bottom-1 right-1 w-3 h-3 bg-emerald-500 rounded-full border-2 border-slate-900"></div></button> <!></div>'),oo=b('<div class="w-4 h-4 rounded-full border-2 border-slate-300 border-t-slate-600 animate-spin"></div>'),io=xr('<svg class="w-4 h-4" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg>'),no=b("<button><!> <span> </span></button>");function lo(f,l){yt(l,!0);const n=()=>Fe(Ye,"$googleSession",o),p=()=>Fe(Nt,"$t",o),[o,c]=It();let i=pt(l,"className",3,""),v=Ce(!1);var m=ge(),s=T(m);{var P=C=>{var fe=so(),Y=t(fe);Y.__click=()=>h(v,!r(v));var O=t(Y);{var ne=I=>{var N=to();k(()=>Re(N,"src",n().userProfile.picture)),u(I,N)},B=I=>{var N=ao(),H=t(N),J=t(H);{var $=z=>{var w=wr();k(y=>d(w,y),[()=>n().userProfile.name[0].toUpperCase()]),u(z,w)},E=z=>{ba(z,{size:20})};x(J,z=>{n().userProfile?.name?z($):z(E,!1)})}e(H),e(N),u(I,N)};x(O,I=>{n().userProfile?.picture?I(ne):I(B,!1)})}Dt(2),e(Y);var D=a(Y,2);{var F=I=>{var N=ro(),H=T(N),J=t(H),$=t(J),E=t($,!0);e($);var z=a($,2),w=t(z,!0);e(z),e(J);var y=a(J,2);y.__click=()=>{gs(),h(v,!1)};var X=t(y);Br(X,{size:14});var re=a(X);e(y),e(H);var se=a(H,2);se.__click=()=>h(v,!1),k((he,oe,Se)=>{d(E,he),d(w,oe),d(re,` ${Se??""}`)},[()=>p()("common.auth.signed_in_as"),()=>n().userProfile?.name??p()("common.auth.user"),()=>p()("common.auth.logout")]),u(I,N)};x(D,I=>{r(v)&&I(F)})}e(fe),k(I=>{Le(Y,1,`flex items-center gap-2 p-1 rounded-full hover:bg-slate-800 transition-colors border border-transparent hover:border-slate-700 ${i()??""}`),Re(Y,"title",I)},[()=>n().userProfile?.name||p()("common.auth.user")]),u(C,fe)},R=C=>{var fe=no();fe.__click=function(...F){hr?.apply(this,F)};var Y=t(fe);{var O=F=>{var I=oo();u(F,I)},ne=F=>{var I=io();u(F,I)};x(Y,F=>{n().isInited?F(ne,!1):F(O)})}var B=a(Y,2),D=t(B,!0);e(B),e(fe),k(F=>{fe.disabled=!n().isInited,Le(fe,1,`flex items-center gap-2 px-4 py-2 bg-white text-slate-900 hover:bg-slate-100 rounded-full font-bold text-xs transition-all shadow-lg hover:shadow-xl hover:scale-105 disabled:opacity-50 disabled:cursor-wait disabled:scale-100 disabled:shadow-none ${i()??""}`),d(D,F)},[()=>p()("common.auth.login")]),u(C,fe)};x(s,C=>{n().signedIn?C(P):C(R,!1)})}u(f,m),kt(),c()}$t(["click"]);var co=b('<span class="w-2 h-2 rounded-full bg-amber-500"></span> <span class="text-amber-400">Auth: Init Failed</span>',1),vo=b('<span class="w-2 h-2 rounded-full bg-amber-500"></span> <span class="text-amber-400">Auth: Not Ready</span>',1),uo=b('<span class="w-2 h-2 rounded-full bg-slate-600"></span> <span> </span>',1),po=b('<span class="w-2 h-2 rounded-full bg-indigo-500 animate-pulse"></span> <span> </span>',1),go=b('<span class="w-2 h-2 rounded-full bg-emerald-500"></span> <span> </span>',1),fo=b('<span class="w-2 h-2 rounded-full bg-red-500"></span> <span> </span>',1),ho=b('<span class="w-2 h-2 rounded-full bg-slate-500"></span> <span> </span>',1),bo=b('<div class="mt-1.5 pt-1.5 border-t border-slate-800 text-[9px] text-slate-400 opacity-80 font-medium flex justify-between items-center gap-4"><span> </span> <span> </span></div>'),mo=b('<div class="mt-1 text-[9px] text-slate-400 opacity-60 italic"> </div>'),_o=b('<div class="absolute top-full right-0 mt-3 whitespace-nowrap bg-slate-900/95 backdrop-blur-md text-white text-[10px] font-bold py-2 px-3 rounded-lg shadow-2xl border border-slate-700/50 z-[100] pointer-events-none min-w-[120px]"><div class="flex items-center gap-2"><!></div> <!></div>'),xo=b('<div class="relative flex items-center"><button class="flex items-center justify-center p-2 rounded-xl hover:bg-slate-800/50 transition-all active:scale-95 group focus:outline-none"><!></button> <!></div>');function wo(f,l){yt(l,!0);const n=()=>Fe(Ye,"$googleSession",v),p=()=>Fe(Nt,"$t",v),o=()=>Fe($a,"$authError",v),c=()=>Fe(Bt,"$syncStatus",v),i=()=>Fe(Va,"$lastSyncTime",v),[v,m]=It();let s=Ce(!1);function P(D){return new Date(D).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}var R=xo(),C=t(R);C.__click=()=>n().signedIn?Wa():hr();var fe=t(C);{var Y=D=>{Yr(D,{size:20,class:"text-amber-500"})},O=D=>{var F=ge(),I=T(F);{var N=J=>{Fr(J,{size:20,class:"text-slate-600 group-hover:text-slate-400"})},H=J=>{var $=ge(),E=T($);{var z=y=>{Kr(y,{size:20,class:"animate-spin text-indigo-400"})},w=y=>{var X=ge(),re=T(X);{var se=oe=>{Or(oe,{size:20,class:"text-emerald-400 group-hover:text-emerald-300"})},he=oe=>{var Se=ge(),G=T(Se);{var M=xe=>{Rr(xe,{size:20,class:"text-red-400"})},q=xe=>{Hr(xe,{size:20,class:"text-slate-400 group-hover:text-slate-300"})};x(G,xe=>{c()==="error"?xe(M):xe(q,!1)},!0)}u(oe,Se)};x(re,oe=>{c()==="success"?oe(se):oe(he,!1)},!0)}u(y,X)};x(E,y=>{c()==="syncing"?y(z):y(w,!1)},!0)}u(J,$)};x(I,J=>{n().signedIn?J(H,!1):J(N)},!0)}u(D,F)};x(fe,D=>{o()?D(Y):D(O,!1)})}e(C);var ne=a(C,2);{var B=D=>{var F=_o(),I=t(F),N=t(I);{var H=w=>{var y=co();Dt(2),u(w,y)},J=w=>{var y=ge(),X=T(y);{var re=he=>{var oe=vo();Dt(2),u(he,oe)},se=he=>{var oe=ge(),Se=T(oe);{var G=q=>{var xe=uo(),Ee=a(T(xe),2),be=t(Ee,!0);e(Ee),k(U=>d(be,U),[()=>p()("common.status.offline")]),u(q,xe)},M=q=>{var xe=ge(),Ee=T(xe);{var be=L=>{var ae=po(),Ue=a(T(ae),2),Z=t(Ue,!0);e(Ue),k(V=>d(Z,V),[()=>p()("common.status.syncing")]),u(L,ae)},U=L=>{var ae=ge(),Ue=T(ae);{var Z=Q=>{var we=go(),Ie=a(T(we),2),Te=t(Ie,!0);e(Ie),k(Pe=>d(Te,Pe),[()=>p()("common.status.saved")]),u(Q,we)},V=Q=>{var we=ge(),Ie=T(we);{var Te=ie=>{var le=fo(),ze=a(T(le),2),qe=t(ze,!0);e(ze),k(de=>d(qe,de),[()=>p()("common.status.error")]),u(ie,le)},Pe=ie=>{var le=ho(),ze=a(T(le),2),qe=t(ze,!0);e(ze),k(de=>d(qe,de),[()=>p()("common.status.synced")]),u(ie,le)};x(Ie,ie=>{c()==="error"?ie(Te):ie(Pe,!1)},!0)}u(Q,we)};x(Ue,Q=>{c()==="success"?Q(Z):Q(V,!1)},!0)}u(L,ae)};x(Ee,L=>{c()==="syncing"?L(be):L(U,!1)},!0)}u(q,xe)};x(Se,q=>{n().signedIn?q(M,!1):q(G)},!0)}u(he,oe)};x(X,he=>{o()==="not_initialized"?he(re):he(se,!1)},!0)}u(w,y)};x(N,w=>{o()==="init_failed"?w(H):w(J,!1)})}e(I);var $=a(I,2);{var E=w=>{var y=bo(),X=t(y),re=t(X,!0);e(X);var se=a(X,2),he=t(se,!0);e(se),e(y),k((oe,Se)=>{d(re,oe),d(he,Se)},[()=>p()("common.status.last_sync"),()=>P(i())]),u(w,y)},z=w=>{var y=ge(),X=T(y);{var re=se=>{var he=mo(),oe=t(he,!0);e(he),k(Se=>d(oe,Se),[()=>p()("common.auth.login")]),u(se,he)};x(X,se=>{n().signedIn||se(re)},!0)}u(w,y)};x($,w=>{n().signedIn&&i()?w(E):w(z,!1)})}e(F),Ve(3,F,()=>it,()=>({duration:150})),u(D,F)};x(ne,D=>{r(s)&&D(B)})}e(R),k(D=>Re(C,"aria-label",D),[()=>p()("common.status.label")]),aa("mouseenter",C,()=>h(s,!0)),aa("mouseleave",C,()=>h(s,!1)),aa("focus",C,()=>h(s,!0)),aa("blur",C,()=>h(s,!1)),u(f,R),kt(),m()}$t(["click"]);var yo=b('<span class="text-[10px] text-slate-500 font-medium leading-tight mt-0.5"> </span>'),ko=b('<div class="flex flex-col"><span> </span> <!></div>'),$o=b('<div class="absolute inset-0 flex items-center justify-center"><div class="w-1.5 h-1.5 rounded-full bg-indigo-600"></div></div>'),So=b("<div><!> <div><div><!></div></div></div>");function ir(f,l){yt(l,!0);let n=pt(l,"checked",3,!1),p=pt(l,"label",3,""),o=pt(l,"description",3,""),c=pt(l,"disabled",3,!1);function i(){c()||l.onToggle(!n())}var v=So();v.__click=i;var m=t(v);{var s=Y=>{var O=ko(),ne=t(O),B=t(ne,!0);e(ne);var D=a(ne,2);{var F=I=>{var N=yo(),H=t(N,!0);e(N),k(()=>d(H,o())),u(I,N)};x(D,I=>{o()&&I(F)})}e(O),k(()=>{Le(ne,1,`text-sm font-black uppercase tracking-widest transition-colors ${n()?"text-indigo-400":"text-slate-300 group-hover:text-white"}`),d(B,p())}),u(Y,O)};x(m,Y=>{(p()||o())&&Y(s)})}var P=a(m,2),R=t(P),C=t(R);{var fe=Y=>{var O=$o();u(Y,O)};x(C,Y=>{n()&&Y(fe)})}e(R),e(P),e(v),k(()=>{Le(v,1,`flex items-center justify-between gap-4 p-1 group ${c()?"opacity-50 grayscale":"cursor-pointer"}`),Le(P,1,`relative w-12 h-6 rounded-full transition-all duration-300 ease-in-out ${n()?"bg-indigo-600 shadow-[0_0_15px_rgba(79,70,229,0.4)]":"bg-slate-800 border border-white/5"}`),Le(R,1,`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-all duration-300 ease-[cubic-bezier(0.34,1.56,0.64,1)] shadow-md ${n()?"translate-x-6":"translate-x-0"}`)}),u(f,v),kt()}$t(["click"]);var zo=b('<button class="p-2 -ml-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all active:scale-95"><!></button>'),Co=b('<div class="p-2 bg-indigo-500/10 rounded-xl border border-indigo-500/20"><!></div>'),Eo=b('<button class="p-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all active:scale-95"><!></button>'),Po=b('<button class="absolute right-2 top-1/2 -translate-y-1/2 text-xs text-indigo-400 hover:text-white bg-indigo-500/10 hover:bg-indigo-500 px-2 py-1 rounded transition-all">Google</button>'),No=b('<div class="p-4 bg-white/[0.02] border-t border-white/5"><button class="w-full bg-slate-800 hover:bg-slate-700 text-white font-black uppercase tracking-widest py-3 rounded-2xl transition-all active:scale-[0.98] text-sm"> </button></div>'),Io=b('<div class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center md:p-4"><div class="bg-slate-900 border-white/10 w-full md:max-w-md md:rounded-3xl shadow-2xl overflow-hidden flex flex-col h-full md:h-auto md:max-h-[90vh]"><div class="px-6 py-6 border-b border-white/5 flex items-center justify-between bg-white/[0.02]"><div class="flex items-center gap-3"><!> <div><h2 class="text-lg font-black text-white uppercase tracking-tight"> </h2> <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </p></div></div> <!></div> <div class="flex-1 p-6 space-y-8 overflow-y-auto custom-scrollbar pb-32 md:pb-6 svelte-14b6qd9"><div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-indigo-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="space-y-6"><!> <!></div></div> <div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-amber-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="grid grid-cols-1 gap-2"><button><div class="flex items-center gap-3"><span class="text-xl">🇧🇷</span> <span class="font-bold">Português (Brasil)</span></div> <!></button> <button><div class="flex items-center gap-3"><span class="text-xl">🇺🇸</span> <span class="font-bold">English (US)</span></div> <!></button></div></div> <div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-indigo-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="grid grid-cols-1 gap-4"><div><label for="settings-user-name" class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1"> </label> <div class="relative"><input id="settings-user-name" type="text" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 pr-10 text-white focus:border-indigo-500 outline-none transition-all"/> <!></div></div></div></div> <div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-emerald-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="bg-white/5 rounded-2xl p-4 border border-white/5"><div class="flex justify-between items-center opacity-50 cursor-not-allowed"><div class="flex flex-col"><span class="text-sm font-black uppercase tracking-widest text-slate-400"> </span> <span class="text-[10px] text-slate-500"> </span></div> <div class="w-12 h-6 bg-slate-800 rounded-full border border-white/5 p-1 relative"><div class="w-4 h-4 bg-slate-600 rounded-full"></div></div></div></div></div> <div class="pt-4 border-t border-white/5 flex flex-col items-center gap-4 text-center"><p class="text-[10px] text-slate-500 leading-relaxed max-w-[250px]"> </p></div></div> <!></div></div>');function Mo(f,l){yt(l,!0);const n=()=>Fe(Nt,"$t",i),p=()=>Fe(oa,"$appSettings",i),o=()=>Fe(Ba,"$locale",i),c=()=>Fe(Ye,"$googleSession",i),[i,v]=It();let m=pt(l,"isOpen",3,!1),s=Ce(!1);qa(()=>{const O=()=>h(s,window.innerWidth<768);return O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)});function P(O,ne){oa.update(B=>({...B,[O]:ne}))}function R(O){Ba.set(O),localStorage.setItem("user_locale",O)}var C=ge(),fe=T(C);{var Y=O=>{var ne=Io();ne.__click=function(...j){l.onClose?.apply(this,j)};var B=t(ne);B.__click=j=>j.stopPropagation();var D=t(B),F=t(D),I=t(F);{var N=j=>{var ue=zo();ue.__click=function(...W){l.onClose?.apply(this,W)};var g=t(ue);Dr(g,{size:24}),e(ue),u(j,ue)},H=j=>{var ue=Co(),g=t(ue);Ha(g,{size:20,class:"text-indigo-400"}),e(ue),u(j,ue)};x(I,j=>{r(s)?j(N):j(H,!1)})}var J=a(I,2),$=t(J),E=t($,!0);e($);var z=a($,2),w=t(z,!0);e(z),e(J),e(F);var y=a(F,2);{var X=j=>{var ue=Eo();ue.__click=function(...W){l.onClose?.apply(this,W)};var g=t(ue);nr(g,{size:24}),e(ue),u(j,ue)};x(y,j=>{r(s)||j(X)})}e(D);var re=a(D,2),se=t(re),he=t(se),oe=t(he);qr(oe,{size:16});var Se=a(oe,2),G=t(Se,!0);e(Se),e(he);var M=a(he,2),q=t(M);{let j=wt(()=>n()("settings.options.auto_open_history.label")),ue=wt(()=>n()("settings.options.auto_open_history.description"));ir(q,{get checked(){return p().autoOpenHistory},onToggle:g=>P("autoOpenHistory",g),get label(){return r(j)},get description(){return r(ue)}})}var xe=a(q,2);{let j=wt(()=>n()("settings.options.enable_3d_dice.label")),ue=wt(()=>n()("settings.options.enable_3d_dice.description"));ir(xe,{get checked(){return p().enable3DDice},onToggle:g=>P("enable3DDice",g),get label(){return r(j)},get description(){return r(ue)}})}e(M),e(se);var Ee=a(se,2),be=t(Ee),U=t(be);Fa(U,{size:16});var L=a(U,2),ae=t(L,!0);e(L),e(be);var Ue=a(be,2),Z=t(Ue);Z.__click=()=>R("pt");var V=a(t(Z),2);{var Q=j=>{ka(j,{size:18,class:"text-indigo-400"})};x(V,j=>{o()==="pt"&&j(Q)})}e(Z);var we=a(Z,2);we.__click=()=>R("en");var Ie=a(t(we),2);{var Te=j=>{ka(j,{size:18,class:"text-indigo-400"})};x(Ie,j=>{o()==="en"&&j(Te)})}e(we),e(Ue),e(Ee);var Pe=a(Ee,2),ie=t(Pe),le=t(ie);ba(le,{size:16});var ze=a(le,2),qe=t(ze,!0);e(ze),e(ie);var de=a(ie,2),ye=t(de),S=t(ye),Ne=t(S,!0);e(S);var Me=a(S,2),je=t(Me);at(je),je.__input=j=>P("userName",j.currentTarget.value);var ce=a(je,2);{var ee=j=>{var ue=Po();ue.__click=()=>P("userName",c().userProfile?.name),u(j,ue)};x(ce,j=>{!p().userName&&c().userProfile&&j(ee)})}e(Me),e(ye),e(de),e(Pe);var te=a(Pe,2),Oe=t(te),K=t(Oe);Vr(K,{size:16});var pe=a(K,2),Ae=t(pe,!0);e(pe),e(Oe);var Be=a(Oe,2),et=t(Be),Xe=t(et),me=t(Xe),ke=t(me,!0);e(me);var ve=a(me,2),_e=t(ve,!0);e(ve),e(Xe),Dt(2),e(et),e(Be),e(te);var $e=a(te,2),We=t($e),De=t(We,!0);e(We),e($e),e(re);var Ge=a(re,2);{var Ze=j=>{var ue=No(),g=t(ue);g.__click=function(..._){l.onClose?.apply(this,_)};var W=t(g,!0);e(g),e(ue),k(_=>d(W,_),[()=>n()("common.buttons.close")]),u(j,ue)};x(Ge,j=>{r(s)||j(Ze)})}e(B),e(ne),k((j,ue,g,W,_,A,He,Je,vt,Ut,mt)=>{d(E,j),d(w,ue),d(G,g),d(ae,W),Le(Z,1,`flex items-center justify-between px-4 py-3 rounded-2xl border transition-all ${o()==="pt"?"bg-indigo-600/10 border-indigo-500/50 text-white":"bg-white/5 border-white/5 text-slate-400 hover:bg-white/10"}`),Le(we,1,`flex items-center justify-between px-4 py-3 rounded-2xl border transition-all ${o()==="en"?"bg-indigo-600/10 border-indigo-500/50 text-white":"bg-white/5 border-white/5 text-slate-400 hover:bg-white/10"}`),d(qe,_),d(Ne,A),Re(je,"placeholder",He),yr(je,p().userName||""),d(Ae,Je),d(ke,vt),d(_e,Ut),d(De,mt)},[()=>n()("settings.title"),()=>n()("settings.description"),()=>n()("settings.sections.interface"),()=>n()("common.labels.language")||"Language",()=>n()("settings.sections.identity"),()=>n()("settings.options.user_name.label"),()=>n()("settings.options.user_name.placeholder"),()=>n()("settings.sections.appearance"),()=>n()("settings.options.theme.label"),()=>n()("settings.options.theme.description"),()=>n()("settings.sync_info")]),Ve(1,B,()=>ca,()=>r(s)?{x:"100%",duration:600,easing:da}:{y:20,duration:300}),Ve(2,B,()=>ca,()=>r(s)?{x:"100%",duration:600,easing:da}:{y:20,duration:300}),Ve(3,ne,()=>it,()=>({duration:200})),u(O,ne)};x(fe,O=>{m()&&O(Y)})}u(f,C),kt(),v()}$t(["click","input"]);var jo=b('<span class="text-[10px] text-slate-400 font-medium"> </span>'),To=b('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all relative group flex flex-col shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="flex justify-between items-start mb-4"><div class="flex-1"><h3 class="font-black text-xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate pr-16"> </h3> <div class="flex items-center gap-2 mt-1 flex-wrap"><span class="text-[10px] bg-indigo-500/10 text-indigo-400 font-black px-2 py-0.5 rounded uppercase tracking-wider"> </span> <span class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </span> <!></div> <div class="mt-2 flex items-center gap-2"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800 text-[9px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div></div></div> <div class="flex items-center gap-1"><button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button></div></div> <div class="space-y-3 mb-6"><div class="flex items-center justify-between text-xs text-slate-400"><span class="flex items-center gap-1.5 opacity-60"><!> </span> <span class="font-bold text-slate-300 truncate max-w-[150px]"> </span></div></div> <button class="w-full bg-slate-800 hover:bg-indigo-600 text-white py-3 rounded-2xl font-bold transition-all active:scale-[0.98] border border-slate-700 hover:border-indigo-400/30 flex items-center justify-center gap-2"> <!></button></div>'),Oo=b('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 col-start-1 row-start-1 w-full"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold"> </span></button></div>'),Ao=b('<span class="text-[9px] bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded-full border border-emerald-500/20 font-black uppercase tracking-widest flex items-center gap-1"><!> </span>'),Go=b('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="mb-4"><div class="flex justify-between items-start mb-1"><h3 class="font-black text-2xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight"> </h3> <div class="flex items-center gap-1"><!> <button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button></div></div> <p class="text-indigo-400 text-[10px] font-black uppercase tracking-[0.2em] mb-3"> </p> <div class="mb-3"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800 text-[9px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div></div> <p class="text-sm text-slate-400 line-clamp-2 leading-relaxed h-10"> </p></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-2xl font-bold flex items-center justify-center gap-2 border border-indigo-400/20 shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98]"><!> </button></div>'),Bo=b('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-emerald-500/40 transition-all group relative flex flex-col justify-between shadow-xl border-t-white/5"><div><h3 class="font-black text-2xl text-white group-hover:text-emerald-400 mb-2 uppercase tracking-tight"> </h3> <div class="flex items-center gap-2 mb-4"><div class="px-2 py-0.5 bg-slate-800 rounded text-[9px] text-slate-400 font-black uppercase tracking-widest"> </div> <div class="flex items-center gap-1 px-2 py-0.5 bg-emerald-500/10 rounded text-[9px] text-emerald-400 font-black uppercase tracking-wider"><div class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></div> </div></div> <div class="mb-4"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800/50 text-[9px] text-slate-400 border border-slate-700/50 font-bold uppercase tracking-wider"><!> </div></div> <p class="text-sm text-slate-400 line-clamp-3 leading-relaxed mb-6 h-15"> </p></div> <button class="w-full bg-emerald-600 hover:bg-emerald-500 text-white py-3 rounded-2xl font-black uppercase text-xs tracking-[0.1em] flex items-center justify-center gap-2 border border-emerald-400/20 transition-all active:scale-[0.98] group"> <!></button></div>'),Do=b('<div class="col-span-full py-12 flex flex-col items-center text-center opacity-40"><div class="w-16 h-16 bg-slate-800/50 rounded-full flex items-center justify-center text-slate-600 mb-3 border border-slate-700 border-dashed"><!></div> <h3 class="text-lg font-black uppercase tracking-widest text-slate-500"> </h3> <p class="text-slate-600 max-w-sm mt-2 text-sm"> </p></div>'),Uo=b('<div class="space-y-8 col-start-1 row-start-1 w-full"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold"> </span></button></div> <div><div class="flex items-center gap-3 mb-4"><div class="h-px flex-1 bg-slate-800"></div> <h3 class="text-xs font-black uppercase tracking-widest text-emerald-400 flex items-center gap-2"><!> </h3> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><!> <!></div></div></div>'),Lo=b('<div class="fixed top-0 left-0 w-full flex justify-center items-center pointer-events-none z-[100] transition-all duration-300"><div class="bg-indigo-600 rounded-full p-2.5 shadow-xl border border-indigo-500/50 text-white"><!></div></div> <div class="animate-in fade-in px-4 md:px-8 max-w-7xl mx-auto pb-32 md:pb-20"><header class="mb-8 flex justify-between items-center border-b border-slate-800/50 pt-4 md:pt-8 pb-4 sticky top-0 bg-slate-950/80 backdrop-blur-md z-40 -mx-4 px-4 md:-mx-8 md:px-8 transition-all"><div class="flex items-center gap-3"><img alt="Schwalb Vault Logo" class="h-10 md:h-14 w-auto rounded-xl"/> <h1 class="text-xl md:text-3xl font-bold text-white flex items-center gap-2 text-gradient m-0 leading-none"><span class="hidden md:inline">Schwalb Vault</span> <span class="md:hidden">Schwalb Vault</span></h1></div> <div class="hidden md:flex absolute left-1/2 -translate-x-1/2 bg-slate-900/50 p-1.5 rounded-2xl border border-slate-800 glass shadow-xl backdrop-blur-md"><div class="relative flex"><div class="absolute inset-y-0 w-1/2 bg-indigo-600 rounded-xl transition-transform duration-300 ease-out shadow-lg shadow-indigo-500/20"></div> <button><!> </button> <button><!> </button></div></div> <div class="flex items-center justify-end min-w-[40px] gap-3"><!> <button class="p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-all"><!></button> <!></div></header> <div class="md:hidden fixed bottom-0 left-0 right-0 bg-slate-900/90 backdrop-blur-xl border-t border-slate-800 shadow-2xl rounded-t-2xl z-50 p-2 pb-safe"><div class="relative flex justify-between"><div class="absolute inset-y-0 w-1/2 bg-indigo-600/20 rounded-xl transition-transform duration-300 ease-out"></div> <button><!> <span class="transition-all duration-300"> </span></button> <button><!> <span class="transition-all duration-300"> </span></button></div></div> <div class="min-h-[500px] grid items-start relative"><!></div> <!> <!> <!> <!> <!> <!> <!></div>',1);function Ro(f,l){yt(l,!0);const n=()=>Fe(Ye,"$googleSession",v),p=()=>Fe(cr,"$liveCharacters",v),o=()=>Fe(La,"$liveCampaigns",v),c=()=>Fe(Nt,"$t",v),i=()=>Fe(Mr,"$publicCampaigns",v),[v,m]=It();let s=Ce(0),P=Ce(0),R=Ce(!1),C=Ce(!1);const fe=80;function Y(g){window.scrollY===0&&(h(s,g.touches[0].clientY,!0),h(R,!0))}function O(g){if(!r(R))return;const _=g.touches[0].clientY-r(s);_>0&&window.scrollY<=0?h(P,Math.min(_*.4,120),!0):(h(R,!1),h(P,0))}async function ne(){if(r(R))if(h(R,!1),r(P)>fe){h(C,!0),h(P,60);try{navigator&&navigator.vibrate&&navigator.vibrate(50),await Wa()}finally{setTimeout(()=>{h(C,!1),h(P,0)},1e3)}}else h(P,0)}qa(()=>{ps();const g=localStorage.getItem("user_locale");return g&&Ba.set(g),document.addEventListener("touchmove",O,{passive:!1}),()=>{document.removeEventListener("touchmove",O)}});let B=Ce("characters"),D=Ce("characters"),F=Ce(!1);sa(()=>{r(B)!==r(D)&&h(D,r(B),!0)}),sa(()=>{n().signedIn&&Wa()}),sa(()=>{n().signedIn&&(p(),o(),Ga())});let I=Ce(!1),N=Ce(null);function H(g){h(N,g,!0),h(I,!0)}function J(g){if(!r(N))return;const W=r(N).id,A={...tt.get(W),...g};tt.set(W,A),h(I,!1)}let $=Ce(!1),E=Ce(!1),z="{}";function w(){h(E,!0)}async function y(g){const W=g.id||Ja(),_=tt.get(W)||{};let A;g.system==="sofdl"?A={..._,id:W,system:"sofdl",name:g.name,playerName:g.playerName||"",ancestry:g.ancestry,level:g.level,attributes:g.attributes||_.attributes||{strength:10,agility:10,intellect:10,will:10},perception:g.perception||_.perception||10,defense:g.defense||10,health:g.health||10,healingRate:g.healingRate||_.healingRate||Math.floor((g.health||10)/4),size:_.size||1,speed:_.speed||10,power:_.power||0,damage:_.damage||0,insanity:_.insanity||0,corruption:_.corruption||0,description:_.description||"",notes:_.notes||"",paths:g.paths||_.paths||{novice:g.novicePath||"",expert:"",master:""},professions:g.professions||_.professions||(g.profession?[g.profession]:[]),languages:_.languages||["Common"],talents:_.talents||[],spells:_.spells||[],equipment:_.equipment||[],effects:_.effects||[]}:(A={..._,id:W,name:g.name,playerName:g.playerName||"",ancestry:g.ancestry,level:g.level,defense:g.defense,system:g.system||ra,paths:g.paths||_.paths||{novice:g.novicePath||"-",expert:"-",master:"-"},attributes:_.attributes||[{name:c()("modals.mod_targets.str"),value:10,key:"str"},{name:c()("modals.mod_targets.agi"),value:10,key:"agi"},{name:c()("modals.mod_targets.int"),value:10,key:"int"},{name:c()("modals.mod_targets.wil"),value:10,key:"wil"}],speed:_.speed||5,health:g.health,currentHealth:_.currentHealth||g.health,spells:_.spells||[],talents:_.talents||[],equipment:_.equipment||[],afflictions:_.afflictions||[],effects:_.effects||[],currency:_.currency||{gp:0,sp:0,cp:0},languages:_.languages||["Common"]},g.profession&&!A.professions?.includes(g.profession)&&(A.professions=[...A.professions||[],g.profession])),tt.set(W,A),h($,!1),h(E,!1),xa(wa("/characters/[id]",{id:W}))}let X=Ce(!1),re=Ce(!1),se=Ce(null),he=Ce("{}");function oe(g=null){g?(h(se,g.id,!0),h(he,JSON.stringify(g),!0),h(X,!0)):h(re,!0)}async function Se(g){const W=r(se)||Ja(),_=r(se)?ot.get(W):{},A={..._,id:W,name:g.name,description:g.description,gmName:g.gmName,players:_.players||[],backupEnabled:g.backupEnabled||!1,backupHash:g.backupHash||"",system:g.system||ra};g.removePassword?delete A.passwordHash:g.password&&(A.passwordHash=await Lr(g.password)),ot.set(W,A),h(X,!1),h(re,!1)}let G=Ce(!1),M=Ce(Ca({title:"",message:"",onConfirm:()=>{}}));function q(g){h(M,{title:c()("dashboard.campaigns.delete_title"),message:c()("dashboard.campaigns.delete_message"),onConfirm:()=>{console.log("[DEBUG] Deleting campaign with ID:",g);let W=0;for(const _ of ot.keys()){const A=ot.get(_);(_===g||A&&A.id===g)&&(console.log("[DEBUG] Found match for deletion - Key:",_,"Camp ID:",A?.id),ot.delete(_),W++)}console.log("[DEBUG] Total entries deleted from map:",W),Xt.set(g,{type:"campaign",deletedAt:Date.now()}),console.log("[DEBUG] Deletion tracked in deletedIdsMap"),Ga(),h(G,!1)}},!0),h(G,!0)}function xe(g){h(M,{title:c()("dashboard.characters.delete_title"),message:c()("dashboard.characters.delete_message"),onConfirm:()=>{lt(La).forEach(A=>{let He=!1;A.members&&A.members.some(Je=>Je.id===g)&&(A.members=A.members.filter(Je=>Je.id!==g),He=!0),A.sessionRoster&&A.sessionRoster.includes(g)&&(A.sessionRoster=A.sessionRoster.filter(Je=>Je!==g),He=!0),A.activeEnemies&&A.activeEnemies.some(Je=>Je.id===g)&&(A.activeEnemies=A.activeEnemies.filter(Je=>Je.id!==g),He=!0),He&&ot.set(A.id,A)}),console.log("[DEBUG] Deleting character with ID:",g);let _=0;for(const A of tt.keys()){const He=tt.get(A);(A===g||He&&He.id===g)&&(console.log("[DEBUG] Found match for deletion - Key:",A,"Char ID:",He?.id),tt.delete(A),_++)}console.log("[DEBUG] Total entries deleted from map:",_),Xt.set(g,{type:"character",deletedAt:Date.now()}),console.log("[DEBUG] Deletion tracked in deletedIdsMap"),Ga(),h(G,!1)}},!0),h(G,!0)}var Ee=Lo();aa("touchstart",Ia,Y),aa("touchmove",Ia,O),aa("touchend",Ia,ne);var be=T(Ee),U=t(be),L=t(U);{let g=wt(()=>r(C)?"animate-spin":""),W=wt(()=>r(P)*2);Wr(L,{get class(){return r(g)},size:20,get style(){return`transform: rotate(${r(W)??""}deg)`}})}e(U),e(be);var ae=a(be,2),Ue=t(ae),Z=t(Ue),V=t(Z);Dt(2),e(Z);var Q=a(Z,2),we=t(Q),Ie=t(we),Te=a(Ie,2);Te.__click=()=>h(B,"characters");var Pe=t(Te);Xa(Pe,{size:18});var ie=a(Pe);e(Te);var le=a(Te,2);le.__click=()=>h(B,"campaigns");var ze=t(le);Oa(ze,{size:18});var qe=a(ze);e(le),e(we),e(Q);var de=a(Q,2),ye=t(de);wo(ye,{});var S=a(ye,2);S.__click=()=>h(F,!0);var Ne=t(S);Ha(Ne,{size:20}),e(S);var Me=a(S,2);lo(Me,{}),e(de),e(Ue);var je=a(Ue,2),ce=t(je),ee=t(ce),te=a(ee,2);te.__click=()=>h(B,"characters");var Oe=t(te);{let g=wt(()=>r(B)==="characters"?2.5:2);Xa(Oe,{size:20,get strokeWidth(){return r(g)},class:"transition-all duration-300"})}var K=a(Oe,2),pe=t(K,!0);e(K),e(te);var Ae=a(te,2);Ae.__click=()=>h(B,"campaigns");var Be=t(Ae);{let g=wt(()=>r(B)==="campaigns"?2.5:2);Oa(Be,{size:20,get strokeWidth(){return r(g)},class:"transition-all duration-300"})}var et=a(Be,2),Xe=t(et,!0);e(et),e(Ae),e(ce),e(je);var me=a(je,2),ke=t(me);{var ve=g=>{var W=Oo(),_=t(W);ct(_,1,p,mt=>mt.id,(mt,st)=>{var Mt=To(),Lt=t(Mt),Rt=t(Lt),Zt=t(Rt),ia=t(Zt,!0);e(Zt);var Ft=a(Zt,2),ua=t(Ft),Pa=t(ua,!0);e(ua);var Qe=a(ua,2),Ke=t(Qe);e(Qe);var dt=a(Qe,2);{var _t=Et=>{var At=jo(),Gt=t(At);e(At),k(()=>d(Gt,`• ${r(st).playerName??""}`)),u(Et,At)};x(dt,Et=>{r(st).playerName&&Et(_t)})}e(Ft);var nt=a(Ft,2),St=t(nt),xt=t(St);ya(xt,{size:10});var zt=a(xt);e(St),e(nt),e(Rt);var jt=a(Rt,2),ut=t(jt);ut.__click=()=>H(r(st));var Tt=t(ut);Ha(Tt,{size:16}),e(ut);var Ct=a(ut,2);Ct.__click=()=>xe(r(st).id);var Ot=t(Ct);Ka(Ot,{size:16}),e(Ct),e(jt),e(Lt);var Ht=a(Lt,2),Wt=t(Ht),qt=t(Wt),Vt=t(qt);Oa(Vt,{size:12});var Kt=a(Vt);e(qt);var Yt=a(qt,2),pa=t(Yt,!0);e(Yt),e(Wt),e(Ht);var Jt=a(Ht,2);Jt.__click=()=>xa(wa("/characters/[id]",{id:r(st).id}));var na=t(Jt),Qt=a(na);Za(Qt,{size:14,fill:"currentColor"}),e(Jt),e(Mt),k((Et,At,Gt,ea,la,ga)=>{d(ia,r(st).name),d(Pa,r(st).ancestry||"Human"),d(Ke,`${Et??""} ${r(st).level??""}`),d(zt,` ${At??""}`),Re(ut,"title",Gt),Re(Ct,"title",ea),d(Kt,` ${la??""}`),d(pa,r(st).paths?.novice||"-"),d(na,`${ga??""} `)},[()=>c()("common.labels.level"),()=>c()(Ta(r(st).system).nameKey),()=>c()("common.buttons.settings"),()=>c()("common.buttons.delete"),()=>c()("dashboard.characters.paths"),()=>c()("dashboard.characters.open_sheet")]),u(mt,Mt)});var A=a(_,2);A.__click=()=>w();var He=t(A),Je=t(He);ja(Je,{size:32}),e(He);var vt=a(He,2),Ut=t(vt,!0);e(vt),e(A),e(W),k(mt=>d(Ut,mt),[()=>c()("dashboard.characters.new_character")]),Ve(1,W,()=>ca,()=>({x:-100,duration:300,easing:da})),Ve(2,W,()=>ca,()=>({x:-100,duration:300,easing:da})),u(g,W)},_e=g=>{var W=Uo(),_=t(W),A=t(_);ct(A,1,o,Qe=>Qe.id,(Qe,Ke)=>{var dt=Go(),_t=t(dt),nt=t(_t),St=t(nt),xt=t(St,!0);e(St);var zt=a(St,2),jt=t(zt);{var ut=Gt=>{var ea=Ao(),la=t(ea);Fa(la,{size:10});var ga=a(la);e(ea),k(Na=>d(ga,` ${Na??""}`),[()=>c()("dashboard.campaigns.published")]),u(Gt,ea)};x(jt,Gt=>{r(Ke).isPublished&&Gt(ut)})}var Tt=a(jt,2);Tt.__click=()=>oe(r(Ke));var Ct=t(Tt);zr(Ct,{size:16}),e(Tt);var Ot=a(Tt,2);Ot.__click=()=>q(r(Ke).id);var Ht=t(Ot);Ka(Ht,{size:16}),e(Ot),e(zt),e(nt);var Wt=a(nt,2),qt=t(Wt,!0);e(Wt);var Vt=a(Wt,2),Kt=t(Vt),Yt=t(Kt);ya(Yt,{size:10});var pa=a(Yt);e(Kt),e(Vt);var Jt=a(Vt,2),na=t(Jt,!0);e(Jt),e(_t);var Qt=a(_t,2);Qt.__click=()=>xa(wa("/campaigns/[id]",{id:r(Ke).id}));var Et=t(Qt);Za(Et,{size:18,fill:"currentColor"});var At=a(Et);e(Qt),e(dt),k((Gt,ea,la,ga,Na,mr)=>{d(xt,r(Ke).name),Re(Tt,"title",Gt),Re(Ot,"title",ea),d(qt,la),d(pa,` ${ga??""}`),d(na,Na),d(At,` ${mr??""}`)},[()=>c()("common.buttons.edit"),()=>c()("common.buttons.delete"),()=>r(Ke).gmName||c()("common.labels.master"),()=>c()(Ta(r(Ke).system||ra).nameKey),()=>r(Ke).description||c()("dashboard.campaigns.no_description"),()=>c()("dashboard.campaigns.start_session")]),u(Qe,dt)});var He=a(A,2);He.__click=()=>oe();var Je=t(He),vt=t(Je);ja(vt,{size:32}),e(Je);var Ut=a(Je,2),mt=t(Ut,!0);e(Ut),e(He),e(_);var st=a(_,2),Mt=t(st),Lt=a(t(Mt),2),Rt=t(Lt);Fa(Rt,{size:14});var Zt=a(Rt);e(Lt),Dt(2),e(Mt);var ia=a(Mt,2),Ft=t(ia);ct(Ft,1,i,Qe=>Qe.id,(Qe,Ke)=>{var dt=Bo(),_t=t(dt),nt=t(_t),St=t(nt,!0);e(nt);var xt=a(nt,2),zt=t(xt),jt=t(zt,!0);e(zt);var ut=a(zt,2),Tt=a(t(ut));e(ut),e(xt);var Ct=a(xt,2),Ot=t(Ct),Ht=t(Ot);ya(Ht,{size:10});var Wt=a(Ht);e(Ot),e(Ct);var qt=a(Ct,2),Vt=t(qt,!0);e(qt),e(_t);var Kt=a(_t,2);Kt.__click=()=>xa(wa("/campaigns/[id]/invite",{id:r(Ke).id}));var Yt=t(Kt),pa=a(Yt);ja(pa,{size:18,class:"group-hover:rotate-90 transition-transform"}),e(Kt),e(dt),k((Jt,na,Qt,Et,At)=>{d(St,r(Ke).name),d(jt,Jt),d(Tt,` ${na??""}`),d(Wt,` ${Qt??""}`),d(Vt,Et),d(Yt,`${At??""} `)},[()=>r(Ke).gmName||c()("common.labels.master"),()=>c()("dashboard.campaigns.online"),()=>c()(Ta(r(Ke).system||ra).nameKey),()=>r(Ke).description||c()("dashboard.campaigns.public_description"),()=>c()("dashboard.campaigns.join_adventure")]),u(Qe,dt)});var ua=a(Ft,2);{var Pa=Qe=>{var Ke=Do(),dt=t(Ke),_t=t(dt);Tr(_t,{size:32}),e(dt);var nt=a(dt,2),St=t(nt,!0);e(nt);var xt=a(nt,2),zt=t(xt,!0);e(xt),e(Ke),k((jt,ut)=>{d(St,jt),d(zt,ut)},[()=>c()("dashboard.campaigns.no_online_campaigns"),()=>c()("dashboard.campaigns.no_online_description")]),u(Qe,Ke)};x(ua,Qe=>{i().length===0&&Qe(Pa)})}e(ia),e(st),e(W),k((Qe,Ke)=>{d(mt,Qe),d(Zt,` ${Ke??""}`)},[()=>c()("dashboard.campaigns.new_campaign"),()=>c()("dashboard.campaigns.public_campaigns")]),Ve(1,W,()=>ca,()=>({x:100,duration:300,easing:da})),Ve(2,W,()=>ca,()=>({x:100,duration:300,easing:da})),u(g,W)};x(ke,g=>{r(B)==="characters"?g(ve):g(_e,!1)})}e(me);var $e=a(me,2);Ys($e,{get isOpen(){return r(E)},onClose:()=>h(E,!1),onSave:y});var We=a($e,2);zs(We,{get isOpen(){return r(re)},onClose:()=>h(re,!1),onSave:Se});var De=a(We,2);Es(De,{get isOpen(){return r($)},initialData:z,onClose:()=>h($,!1),onSave:y});var Ge=a(De,2);Ar(Ge,{get isOpen(){return r(X)},get initialData(){return r(he)},onClose:()=>h(X,!1),onSave:Se});var Ze=a(Ge,2);Ir(Ze,{get isOpen(){return r(G)},get title(){return r(M).title},get message(){return r(M).message},get onConfirm(){return r(M).onConfirm},onCancel:()=>h(G,!1)});var j=a(Ze,2);eo(j,{get isOpen(){return r(I)},get characterData(){return r(N)},onClose:()=>h(I,!1),onSave:J});var ue=a(j,2);Mo(ue,{get isOpen(){return r(F)},onClose:()=>h(F,!1)}),e(ae),k((g,W,_,A,He)=>{Ma(be,`transform: translateY(${(r(C)?60:r(P))??""}px); opacity: ${r(P)>0?1:0}`),Re(V,"src",`${jr??""}/logo-black.webp`),Ma(Ie,`transform: translateX(${r(B)==="campaigns"?"100%":"0%"})`),Le(Te,1,`relative z-10 px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${r(B)==="characters"?"text-white":"text-slate-400 hover:text-white"}`),d(ie,` ${g??""}`),Le(le,1,`relative z-10 px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${r(B)==="campaigns"?"text-white":"text-slate-400 hover:text-white"}`),d(qe,` ${W??""}`),Re(S,"title",_),Ma(ee,`transform: translateX(${r(B)==="campaigns"?"100%":"0%"})`),Le(te,1,`relative flex-1 py-3 rounded-xl text-xs font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 z-10 ${r(B)==="characters"?"text-indigo-400":"text-slate-500"}`),d(pe,A),Le(Ae,1,`relative flex-1 py-3 rounded-xl text-xs font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 z-10 ${r(B)==="campaigns"?"text-indigo-400":"text-slate-500"}`),d(Xe,He)},[()=>c()("dashboard.tabs.characters"),()=>c()("dashboard.tabs.campaigns"),()=>c()("settings.title"),()=>c()("dashboard.tabs.characters"),()=>c()("dashboard.tabs.campaigns")]),u(f,Ee),kt(),m()}$t(["click"]);var Fo=b("<!> <!>",1);function di(f){var l=Fo(),n=T(l);rs(n,{});var p=a(n,2);Ro(p,{}),u(f,l)}export{di as component};
