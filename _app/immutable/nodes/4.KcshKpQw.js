const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CQsRno8O.js","../chunks/CcABsDcH.js","../chunks/Bmlnf0CH.js","../chunks/BwRHsyw7.js","../chunks/DDsCrrC-.js"])))=>i.map(i=>d[i]);
import{a as va,s as Ft,_ as Es}from"../chunks/BwRHsyw7.js";import"../chunks/DsnmJJEf.js";import{B as St,o as Be,k as d,p as la,v as oa,j as u,q as t,x as a,u as s,z as F,A as e,t as x,O as Ha,w as C,y as _t,n as Ea,D as Ga,a2 as ga,at as ha}from"../chunks/CcABsDcH.js";import{d as ba,s as i,o as ss,g as Aa,e as Ca}from"../chunks/Bmlnf0CH.js";import{l as xa,s as _a,i as w,p as sa}from"../chunks/CD_b0ITR.js";import{e as We,s as qe,i as Ct,$ as aa,r as zt,a as ge,f as Qa,g as Na,h as Ss}from"../chunks/DDsCrrC-.js";import{p as Is}from"../chunks/47ZLxVLL.js";import{d as rs,h as $a,j as Ds,c as is,e as ea,k as Ya,l as Rs,m as ja,n as Ra,u as Ia,b as bt,o as vs,f as ns,g as Va,p as Ns,q as $s,t as As,v as Ts}from"../chunks/CQsRno8O.js";import{C as cs,D as Oa,l as Us,c as Ka,d as us,a as Ps,e as Hs}from"../chunks/Bn2Mahcd.js";import{b as Ls,t as Ta,f as Ua}from"../chunks/BjwwgMo_.js";import{U as bs,C as ls,W as xs,r as _s}from"../chunks/Bv3fsLc2.js";import{A as Fs,a as qs,b as Da,B as Bs,T as Ws,E as es,M as fs,G as za,H as ms,R as Js,C as Gs,I as ps,s as gs,c as hs,S as ys,L as Vs,d as Qs,D as Ys}from"../chunks/CAcsfEL7.js";import{k as ts}from"../chunks/DnHRXrkb.js";import{M as Zs,X as ya,P as ra,a as Pa,c as Xs,b as ua,C as La,d as Ks,e as ws,D as Ma}from"../chunks/DAiMaFGB.js";import{C as ks,G as pa,P as Za,S as er,a as tr}from"../chunks/CdK-dsCl.js";import"../chunks/CXShgV-E.js";import{I as fa,s as ma}from"../chunks/BmiOSreM.js";import{b as zs}from"../chunks/Xkwzn8bL.js";import{g as ar}from"../chunks/C8DI3yiM.js";import{W as sr}from"../chunks/Dwjd25XO.js";function rr(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const Z=[["path",{d:"m6 9 6 6 6-6"}]];fa(U,_a({name:"chevron-down"},()=>l,{get iconNode(){return Z},children:(E,_)=>{var j=St(),D=Be(j);ma(D,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function ir(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const Z=[["path",{d:"m18 15-6-6-6 6"}]];fa(U,_a({name:"chevron-up"},()=>l,{get iconNode(){return Z},children:(E,_)=>{var j=St(),D=Be(j);ma(D,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function nr(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const Z=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];fa(U,_a({name:"copy"},()=>l,{get iconNode(){return Z},children:(E,_)=>{var j=St(),D=Be(j);ma(D,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function lr(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const Z=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4"}]];fa(U,_a({name:"flame"},()=>l,{get iconNode(){return Z},children:(E,_)=>{var j=St(),D=Be(j);ma(D,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function or(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const Z=[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]];fa(U,_a({name:"grip-vertical"},()=>l,{get iconNode(){return Z},children:(E,_)=>{var j=St(),D=Be(j);ma(D,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function Xa(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const Z=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"}]];fa(U,_a({name:"layers"},()=>l,{get iconNode(){return Z},children:(E,_)=>{var j=St(),D=Be(j);ma(D,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function Cs(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const Z=[["path",{d:"m16 6 4 14"}],["path",{d:"M12 6v14"}],["path",{d:"M8 8v12"}],["path",{d:"M4 4v16"}]];fa(U,_a({name:"library"},()=>l,{get iconNode(){return Z},children:(E,_)=>{var j=St(),D=Be(j);ma(D,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function dr(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const Z=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}],["path",{d:"M21 21v.01"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}],["path",{d:"M3 12h.01"}],["path",{d:"M12 3h.01"}],["path",{d:"M12 16v.01"}],["path",{d:"M16 12h1"}],["path",{d:"M21 12v.01"}],["path",{d:"M12 21v-1"}]];fa(U,_a({name:"qr-code"},()=>l,{get iconNode(){return Z},children:(E,_)=>{var j=St(),D=Be(j);ma(D,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function as(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const Z=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];fa(U,_a({name:"save"},()=>l,{get iconNode(){return Z},children:(E,_)=>{var j=St(),D=Be(j);ma(D,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function js(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const Z=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21"}]];fa(U,_a({name:"swords"},()=>l,{get iconNode(){return Z},children:(E,_)=>{var j=St(),D=Be(j);ma(D,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function vr(U){let r=!1;return document.body&&(document.body.appendChild(U),r=!0),{destroy(){r&&U.parentNode&&U.parentNode.removeChild(U)}}}var cr=u("<button> <!></button>"),ur=u('<p class="text-xs text-slate-600 italic"> </p>'),br=u('<div class="text-xs leading-tight"><span class="text-red-400 font-bold"> </span> <span class="text-slate-400"> </span></div>'),xr=u('<div class="space-y-1"></div>'),_r=u('<div class="grid grid-cols-2 gap-2 max-h-[60vh] overflow-y-auto custom-scrollbar p-1"></div> <div class="mt-4 pt-3 border-t border-slate-800 flex flex-col gap-2"><div class="p-3 bg-slate-900/50 rounded-lg border border-slate-700/50 min-h-[60px]"><p class="text-[10px] text-slate-500 uppercase font-bold mb-1"> </p> <!></div> <div class="flex justify-end mt-2"><button class="bg-indigo-600 text-white px-4 py-2 rounded-xl font-bold text-sm shadow hover:bg-indigo-500 transition-colors w-full sm:w-auto"> </button></div></div>',1),fr=u("<div><!></div>");function mr(U,r){la(r,!0);const l=()=>Ft(aa,"$t",Z),[Z,E]=va();var _=St(),j=Be(_);{var D=n=>{var h=fr(),N=t(h);{let le=F(()=>l()("session.affliction_modal.title"));Zs(N,{get isOpen(){return r.isOpen},get onClose(){return r.onClose},get title(){return a(le)},maxWidth:"max-w-md",children:(se,he)=>{var A=_r(),S=Be(A);We(S,21,()=>Object.keys(Fs),Ct,(ve,je)=>{const Le=F(()=>r.afflictions.includes(a(je)));var me=cr();me.__click=()=>r.onToggle(a(je));var I=t(me),Y=s(I);{var _e=Ee=>{ks(Ee,{size:14,class:"text-red-400"})};w(Y,Ee=>{a(Le)&&Ee(_e)})}e(me),x(Ee=>{qe(me,1,`flex items-center justify-between px-3 py-2 rounded-lg border text-xs font-bold transition-all ${a(Le)?"bg-red-500/20 border-red-500 text-red-100":"bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-750"}`),i(I,`${Ee??""} `)},[()=>l()(`character.afflictions.${a(je)}`)]),d(ve,me)}),e(S);var M=s(S,2),ee=t(M),te=t(ee),vt=t(te,!0);e(te);var Je=s(te,2);{var Ot=ve=>{var je=ur(),Le=t(je,!0);e(je),x(me=>i(Le,me),[()=>l()("session.affliction_modal.none_selected")]),d(ve,je)},ie=ve=>{var je=xr();We(je,21,()=>r.afflictions,Ct,(Le,me)=>{var I=br(),Y=t(I),_e=t(Y);e(Y);var Ee=s(Y,2),Oe=t(Ee,!0);e(Ee),e(I),x((ot,et)=>{i(_e,`${ot??""}:`),i(Oe,et)},[()=>l()(`character.afflictions.${a(me)}`),()=>l()(`sofww.afflictions.${a(me).toLowerCase().replace(" ","_")}.effect`)]),d(Le,I)}),e(je),d(ve,je)};w(Je,ve=>{r.afflictions.length===0?ve(Ot):ve(ie,!1)})}e(ee);var ke=s(ee,2),fe=t(ke);fe.__click=function(...ve){r.onClose?.apply(this,ve)};var ze=t(fe,!0);e(fe),e(ke),e(M),x((ve,je)=>{i(vt,ve),i(ze,je)},[()=>l()("session.affliction_modal.effects"),()=>l()("session.affliction_modal.done")]),d(se,A)},$$slots:{default:!0}})}e(h),qs(h,le=>vr?.(le)),d(n,h)};w(j,n=>{r.isOpen&&n(D)})}d(U,_),oa(),E()}ba(["click"]);var pr=u('<div class="absolute top-0 right-0 bg-gradient-to-l from-yellow-600/20 to-transparent border-l border-b border-yellow-500/30 text-yellow-500 text-[9px] font-black tracking-widest px-3 py-1 rounded-bl-xl z-20 uppercase shadow-[0_0_10px_rgba(234,179,8,0.2)]"> </div>'),gr=u('<div class="absolute inset-0 bg-red-950/40 animate-pulse z-0 pointer-events-none"></div>'),hr=u('<span class="text-[9px] font-black bg-red-950/40 text-red-500 px-1.5 py-0.5 rounded border border-red-900/30 uppercase tracking-wider flex-shrink-0"> </span>'),yr=u("<button><!></button>"),wr=u('<button class="w-7 h-7 flex items-center justify-center rounded bg-slate-800/50 text-slate-600 hover:text-red-400 hover:bg-red-950/30 border border-slate-700/50 transition-colors"><!></button>'),kr=u('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),zr=u('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"><div class="absolute inset-0 bg-gradient-to-b from-white/10 to-transparent"></div></div>'),Cr=u('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-20"><span class="text-[9px] font-black uppercase text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] tracking-widest leading-none mt-0.5"> </span></div>'),jr=u('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-20"><span class="text-[9px] font-black uppercase text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] tracking-widest leading-none mt-0.5"> </span></div>'),Or=u('<div class="flex flex-col items-center justify-between bg-cyan-950/20 border border-cyan-500/30 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm"><span class="text-[9px] font-black text-cyan-400 uppercase tracking-wider mb-0.5"> </span> <span class="text-xl font-bold text-white font-mono leading-none"> </span></div>'),Mr=u('<button class="text-[9px] bg-red-500/10 text-red-400 px-1.5 py-0.5 rounded border border-red-500/20 hover:bg-red-500/20 hover:border-red-500/40 transition-all flex items-center gap-1 group/btn"> <!></button>'),Er=u('<div class="bg-slate-900/50 p-2 rounded border border-slate-800/50 text-center"><span class="text-[9px] text-slate-500 uppercase font-black block mb-0.5"> </span> <div class="text-white font-bold font-mono text-lg leading-none"> </div> <div> </div></div>'),Sr=u('<div class="grid grid-cols-2 gap-4 mb-4"><div class="p-3 rounded-xl bg-purple-950/20 border border-purple-500/30 flex justify-between items-center group/ins"><div><span class="text-[9px] text-purple-400 uppercase font-black block"> </span> <span class="text-white font-bold text-lg font-mono leading-none"> </span></div> <!></div> <div class="p-3 rounded-xl bg-red-950/20 border border-red-500/30 flex justify-between items-center group/cor"><div><span class="text-[9px] text-red-400 uppercase font-black block"> </span> <span class="text-white font-bold text-lg font-mono leading-none"> </span></div> <!></div></div>'),Ir=u("<!> ",1),Dr=u('<div><div class="text-emerald-500 text-[10px] font-black uppercase mb-2 flex items-center gap-2"> <span class="h-px flex-1 bg-current opacity-20"></span></div> <div class="flex flex-wrap gap-2"></div></div>'),Rr=u('<div class="text-sm bg-slate-900/30 p-2 rounded border border-slate-800/30"><span class="font-bold text-slate-300"> </span> <span class="text-slate-400 text-xs block mt-1 leading-relaxed"> </span></div>'),Nr=u('<div><div> <span class="h-px flex-1 bg-current opacity-20"></span></div> <div class="grid gap-2"></div></div>'),$r=u('<div class="border-t border-slate-800/50 bg-slate-950/30 p-4"><div class="mb-4"><div class="text-slate-500 font-bold uppercase text-[10px] mb-2 flex items-center gap-2"><span> </span> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-4 gap-2"></div></div> <!> <div class="grid grid-cols-2 gap-4 mb-4"><div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div> <div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div></div> <div class="space-y-4"><!> <!></div></div>'),Ar=u('<div><!> <!> <div class="relative z-10 p-4"><div class="flex items-start gap-4 mb-3"><div class="relative flex-shrink-0"><div><!></div> <button><!></button></div> <div class="flex-1 min-w-0"><div class="flex justify-between items-start mb-1"><div class="flex flex-col min-w-0 mr-2"><div class="flex items-center gap-2"><h3> </h3> <!></div></div> <div class="flex gap-1 flex-shrink-0"><button class="w-7 h-7 flex items-center justify-center rounded bg-slate-800 text-slate-500 hover:text-white hover:bg-slate-700 border border-slate-700/50 transition-colors"><!></button> <!></div></div>  <div class="relative w-full h-3.5 sm:h-4 bg-slate-950 rounded-full border border-white/5 overflow-hidden shadow-inner group-hover:border-white/20 transition-all mb-2"><div></div> <!> <!> <!></div> <div class="flex flex-col sm:flex-row gap-3"><div class="flex items-start gap-1.5"><div class="flex flex-col items-center justify-between bg-slate-900 border border-slate-700 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm"><span class="text-[9px] font-black text-slate-400 uppercase tracking-wider mb-0.5"> </span> <span class="text-xl font-bold text-white font-mono leading-none"> </span></div> <div class="flex flex-col items-center justify-between bg-red-950/30 border border-red-900/50 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm relative group/dmg"><span class="text-[9px] font-black text-red-400 uppercase tracking-wider mb-0.5"> </span> <input type="number" class="w-full bg-transparent text-center text-white font-mono font-bold text-xl focus:outline-none p-0 leading-none placeholder-red-800"/> <span class="absolute -top-1 -right-1 flex h-2 w-2 opacity-0 group-hover/dmg:opacity-100 transition-opacity"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span></span></div> <div><span> </span> <div class="flex items-baseline gap-0.5 justify-center w-full"><input type="number" class="w-full bg-transparent text-right text-white font-mono font-bold text-xl focus:outline-none p-0 leading-none"/> <span class="text-[10px] text-slate-500 font-mono self-end mb-0.5 opacity-70"> </span></div></div> <!></div> <div class="flex flex-wrap gap-1.5 items-center flex-1"><!> <button class="text-[10px] sm:text-[9px] font-bold text-slate-500 hover:text-indigo-400 px-1.5 py-0.5 rounded border border-transparent hover:border-indigo-500/30 hover:bg-indigo-500/10 transition-all flex items-center gap-1 whitespace-nowrap"><!> </button></div></div></div></div></div>  <!> <!></div>');function Tr(U,r){la(r,!0);const l=()=>Ft(aa,"$t",Z),[Z,E]=va();let _=sa(r,"updateEnemy",3,(f,b)=>{}),j=sa(r,"updatePlayer",3,(f,b)=>{}),D=sa(r,"removeFromCombat",3,f=>{}),n=F(()=>r.entity.type==="player"),h=F(()=>r.entity.system==="sofdl"),N=F(()=>r.entity.damage||0),le=F(()=>r.entity.normalHealth||r.entity.health||10),se=F(()=>r.entity.currentHealth??a(le)),he=F(()=>a(N)>=a(se)),A=F(()=>a(N)>=a(se)/2&&!a(he)),S=F(()=>a(se)>0?Math.min(100,Math.max(0,a(N)/a(se)*100)):100),M=_t(!1),ee=_t(!1);Ha(()=>{const f=r.entity.afflictions||[],b=f.includes("Incapacitated");if(a(he)&&!b){const k={afflictions:[...f,"Incapacitated"]};r.entity.type==="player"?te(k):_()(r.entity.instanceId,k)}else if(!a(he)&&b){const k={afflictions:f.filter(we=>we!=="Incapacitated")};r.entity.type==="player"?te(k):_()(r.entity.instanceId,k)}});function te(f){if(r.entity.type!=="player")return;const b=rs.get(r.entity.id);b&&rs.set(r.entity.id,{...b,...f}),j()(r.entity.id,f),$a({id:r.entity.id,...f})}function vt(f){const b=parseInt(f.target.value);if(isNaN(b))return;const k={damage:Math.max(0,b)};r.entity.type==="player"?te(k):_()(r.entity.instanceId,k)}function Je(f){const b=parseInt(f.target.value);if(isNaN(b))return;const z=Math.max(0,b);let k=a(N);z<a(N)&&(k=z);const we={currentHealth:z,damage:k};r.entity.type==="player"?te(we):_()(r.entity.instanceId,we)}function Ot(){const f=!r.entity.acted;r.entity.type==="player"?te({acted:f}):_()(r.entity.instanceId,{acted:f})}function ie(){r.entity.type==="player"&&te({initiative:!r.entity.initiative})}function ke(f){const b=r.entity.afflictions||[],k={afflictions:b.includes(f)?b.filter(we=>we!==f):[...b,f]};r.entity.type==="player"?te(k):_()(r.entity.instanceId,k)}var fe=Ar(),ze=t(fe);{var ve=f=>{var b=pr(),z=t(b,!0);e(b),x(k=>i(z,k),[()=>l()("session.combat_card.initiative")]),d(f,b)};w(ze,f=>{a(n)&&r.entity.initiative&&f(ve)})}var je=s(ze,2);{var Le=f=>{var b=gr();d(f,b)};w(je,f=>{a(he)&&f(Le)})}var me=s(je,2),I=t(me),Y=t(I),_e=t(Y),Ee=t(_e);ts(Ee,()=>r.entity.imageUrl,f=>{{let b=F(()=>r.entity.name.charAt(0));Da(f,{get hash(){return r.entity.imageUrl},get alt(){return r.entity.name},size:"custom",get fallbackText(){return a(b)}})}}),e(_e);var Oe=s(_e,2);Oe.__click=Ot;var ot=t(Oe);{var et=f=>{Pa(f,{size:14,class:""})},ft=f=>{var b=St(),z=Be(b);{var k=He=>{ks(He,{size:14})},we=He=>{js(He,{size:14})};w(z,He=>{r.entity.acted?He(k):He(we,!1)},!0)}d(f,b)};w(ot,f=>{a(he)?f(et):f(ft,!1)})}e(Oe),e(Y);var it=s(Y,2),tt=t(it),gt=t(tt),ht=t(gt),yt=t(ht),ce=t(yt,!0);e(yt);var Se=s(yt,2);{var Ce=f=>{var b=hr(),z=t(b);e(b),x(()=>i(z,`Dif ${r.entity.difficulty??""}`)),d(f,b)};w(Se,f=>{a(n)||f(Ce)})}e(ht),e(gt);var re=s(gt,2),ae=t(re);ae.__click=()=>C(M,!a(M));var oe=t(ae);{var ye=f=>{ir(f,{size:14})},Ie=f=>{rr(f,{size:14})};w(oe,f=>{a(M)?f(ye):f(Ie,!1)})}e(ae);var Me=s(ae,2);{var Ue=f=>{var b=yr();b.__click=ie;var z=t(b);lr(z,{size:14}),e(b),x(k=>{qe(b,1,`w-7 h-7 flex items-center justify-center rounded transition-all ${r.entity.initiative?"bg-yellow-500 text-yellow-950 shadow-lg shadow-yellow-500/20":"bg-slate-800 text-slate-500 hover:text-white hover:bg-slate-700"}`),ge(b,"title",k)},[()=>l()("session.combat_card.initiative")]),d(f,b)},Ae=f=>{var b=wr();b.__click=()=>D()(r.entity.instanceId);var z=t(b);ya(z,{size:14}),e(b),d(f,b)};w(Me,f=>{a(n)?f(Ue):f(Ae,!1)})}e(re),e(tt);var Ge=s(tt,2),Ze=t(Ge),Mt=s(Ze,2);{var wt=f=>{var b=kr();x(()=>{qe(b,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10
                            ${a(he)?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":a(S)>=80?"bg-gradient-to-r from-red-600 to-rose-500":a(A)?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),Na(b,`width: ${a(S)??""}%`)}),d(f,b)};w(Mt,f=>{a(S)>0&&f(wt)})}var At=s(Mt,2);{var O=f=>{var b=zr();d(f,b)};w(At,f=>{a(N)===0&&f(O)})}var q=s(At,2);{var P=f=>{var b=Cr(),z=t(b),k=t(z,!0);e(z),e(b),x(we=>i(k,we),[()=>l()("session.combat_card.incapacitated")]),d(f,b)},Te=f=>{var b=St(),z=Be(b);{var k=we=>{var He=jr(),Ke=t(He),Ye=t(Ke,!0);e(Ke),e(He),x(mt=>i(Ye,mt),[()=>l()("session.combat_card.injured")]),d(we,He)};w(z,we=>{a(A)&&we(k)},!0)}d(f,b)};w(q,f=>{a(he)?f(P):f(Te,!1)})}e(Ge);var at=s(Ge,2),st=t(at),Xe=t(st),jt=t(Xe),Et=t(jt,!0);e(jt);var It=s(jt,2),Ve=t(It,!0);e(It),e(Xe);var L=s(Xe,2),T=t(L),H=t(T,!0);e(T);var pe=s(T,2);zt(pe),pe.__input=vt,Ea(2),e(L);var B=s(L,2),W=t(B),ne=t(W,!0);e(W);var Qe=s(W,2),ue=t(Qe);zt(ue),ue.__input=Je;var de=s(ue,2),J=t(de);e(de),e(Qe),e(B);var De=s(B,2);{var be=f=>{var b=Or(),z=t(b),k=t(z,!0);e(z);var we=s(z,2),He=t(we,!0);e(we),e(b),x(Ke=>{i(k,Ke),i(He,r.entity.perception||10)},[()=>l()("sofdl.attributes.perception")]),d(f,b)};w(De,f=>{a(h)&&f(be)})}e(st);var Pe=s(st,2),nt=t(Pe);We(nt,17,()=>r.entity.afflictions||[],Ct,(f,b)=>{var z=Mr();z.__click=()=>ke(a(b));var k=t(z),we=s(k);ya(we,{size:8,class:"opacity-50 group-hover/btn:opacity-100"}),e(z),x(()=>i(k,`${a(b)??""} `)),d(f,z)});var lt=s(nt,2);lt.__click=()=>C(ee,!0);var dt=t(lt);ra(dt,{size:10});var Pt=s(dt);e(lt),e(Pe),e(at),e(it),e(I),e(me);var Dt=s(me,2);{var Vt=f=>{var b=$r(),z=t(b),k=t(z),we=t(k),He=t(we,!0);e(we),Ea(2),e(k);var Ke=s(k,2);We(Ke,21,()=>a(h)?["strength","agility","intellect","will"]:["str","agi","int","wil"],Ct,(o,v)=>{const c=F(()=>a(h)?r.entity.attributes?.[a(v)]??10:r.entity.stats?.[a(v)]??r.entity.attributes?.[a(v)]??10),p=F(()=>a(c)-10);var $=Er(),m=t($),y=t(m,!0);e(m);var g=s(m,2),X=t(g,!0);e(g);var R=s(g,2),V=t(R);e(R),e($),x(G=>{i(y,G),i(X,a(c)),qe(R,1,`text-[9px] font-bold ${a(p)>=0?"text-emerald-500":"text-red-500"}`),i(V,`${a(p)>=0?"+":""}${a(p)??""}`)},[()=>a(h)?a(v).slice(0,3):a(v)]),d(o,$)}),e(Ke),e(z);var Ye=s(z,2);{var mt=o=>{var v=Sr(),c=t(v),p=t(c),$=t(p),m=t($,!0);e($);var y=s($,2),g=t(y,!0);e(y),e(p);var X=s(p,2);Bs(X,{size:20,class:"text-purple-500/30 group-hover/ins:text-purple-500 transition-colors"}),e(c);var R=s(c,2),V=t(R),G=t(V),xe=t(G,!0);e(G);var K=s(G,2),Ne=t(K,!0);e(K),e(V);var Q=s(V,2);Pa(Q,{size:20,class:"text-red-500/30 group-hover/cor:text-red-500 transition-colors"}),e(R),e(v),x(($e,Re)=>{i(m,$e),i(g,r.entity.insanity||0),i(xe,Re),i(Ne,r.entity.corruption||0)},[()=>l()("sofdl.attributes.insanity"),()=>l()("sofdl.attributes.corruption")]),d(o,v)};w(Ye,o=>{a(h)&&o(mt)})}var pt=s(Ye,2),Ht=t(pt),Rt=t(Ht),Bt=t(Rt,!0);e(Rt);var Gt=s(Rt,2),Xt=t(Gt,!0);e(Gt),e(Ht);var ta=s(Ht,2),Jt=t(ta),Wt=t(Jt,!0);e(Jt);var Qt=s(Jt,2),ca=t(Qt,!0);e(Qt),e(ta),e(pt);var Zt=s(pt,2),ct=t(Zt);{var Ut=o=>{var v=Dr(),c=t(v),p=t(c);Ea(),e(c);var $=s(c,2);We($,21,()=>r.entity.senses,Ct,(m,y)=>{const g=F(()=>{const[V,G]=a(y).split(":");return{key:V,val:G}}),X=F(()=>l()(`character.senses.list.${a(g).key}`)+(a(g).val?` ${a(g).val}`:"")),R=F(()=>l()(`character.senses.descriptions.${a(g).key}`));Ws(m,{get text(){return a(R)},class:"text-xs bg-emerald-950/30 text-emerald-200 px-3 py-1.5 rounded border border-emerald-900/50 font-bold flex items-center gap-2 cursor-help whitespace-nowrap",children:(V,G)=>{var xe=Ir(),K=Be(xe);es(K,{size:12,class:"text-emerald-500 flex-shrink-0"});var Ne=s(K);x(()=>i(Ne,` ${a(X)??""}`)),d(V,xe)},$$slots:{default:!0}})}),e($),e(v),x(m=>i(p,`${m??""} `),[()=>l()("character.senses.title")]),d(o,v)};w(ct,o=>{r.entity.senses&&r.entity.senses.length>0&&o(Ut)})}var ia=s(ct,2);We(ia,16,()=>[{key:"traits",label:"Traços",color:"text-amber-500"},{key:"actions",label:"Ações",color:"text-red-400"},{key:"reactions",label:"Reações",color:"text-indigo-400"},{key:"end_of_round",label:"Fim da Rodada",color:"text-emerald-400"}],Ct,(o,v)=>{var c=St(),p=Be(c);{var $=m=>{var y=Nr(),g=t(y),X=t(g);Ea(),e(g);var R=s(g,2);We(R,21,()=>r.entity[v.key],Ct,(V,G)=>{var xe=Rr(),K=t(xe),Ne=t(K,!0);e(K);var Q=s(K,2),$e=t(Q,!0);e(Q),e(xe),x(()=>{i(Ne,a(G).name),i($e,a(G).description||a(G).effect)}),d(V,xe)}),e(R),e(y),x(()=>{qe(g,1,`${v.color??""} text-[10px] font-black uppercase mb-2 flex items-center gap-2`),i(X,`${v.label??""} `)}),d(m,y)};w(p,m=>{r.entity[v.key]&&r.entity[v.key].length>0&&m($)})}d(o,c)}),e(Zt),e(b),x((o,v,c)=>{i(He,o),i(Bt,v),i(Xt,r.entity.size||1),i(Wt,c),i(ca,r.entity.speed||10)},[()=>l()("session.combat_card.attributes"),()=>l()("session.combat_card.size"),()=>l()("session.combat_card.speed")]),d(f,b)};w(Dt,f=>{a(M)&&f(Vt)})}var Tt=s(Dt,2);{let f=F(()=>r.entity.afflictions||[]);mr(Tt,{get isOpen(){return a(ee)},onClose:()=>C(ee,!1),get afflictions(){return a(f)},onToggle:ke})}e(fe),x((f,b,z,k,we)=>{qe(fe,1,`group relative overflow-hidden transition-all duration-300 rounded-2xl border ${a(n)?"bg-slate-900/80 border-indigo-500/30 hover:border-indigo-500/50 hover:shadow-indigo-900/20":"bg-slate-950/80 border-red-900/30 hover:border-red-800/50 hover:shadow-red-900/10"} shadow-lg backdrop-blur-sm`),qe(_e,1,`w-14 h-14 rounded-2xl overflow-hidden border-2 shadow-xl transition-transform group-hover:scale-105 ${a(he)?"border-red-600 grayscale brightness-50":a(n)?"border-indigo-500/50":"border-red-900/50"}`),qe(Oe,1,`absolute -bottom-2 -right-2 w-7 h-7 rounded-lg flex items-center justify-center border shadow-lg transition-all hover:scale-110 z-20 ${r.entity.acted?"bg-slate-800 border-slate-600 text-slate-500":a(n)?"bg-indigo-600 border-indigo-400 text-white":"bg-red-600 border-red-400 text-white"}`),ge(Oe,"title",f),qe(yt,1,`text-base font-bold truncate leading-snug ${a(n)?"text-white":"text-red-100 font-serif tracking-wide"}`),i(ce,r.entity.name),qe(Ze,1,`absolute inset-0 w-full ${a(N)===0?"bg-emerald-900/20":"bg-slate-900/50"}`),i(Et,b),i(Ve,r.entity.defense||10),i(H,z),Qa(pe,a(N)),qe(B,1,`flex flex-col items-center justify-between border rounded-lg p-1.5 w-[5.5rem] h-[3.75rem] shadow-sm relative transition-colors ${a(he)?"bg-red-950/50 border-red-500":a(A)?"bg-orange-950/30 border-orange-500":"bg-emerald-950/30 border-emerald-900/50"}`),qe(W,1,`text-[9px] font-black uppercase tracking-wider mb-0.5 ${a(he)?"text-red-400":a(A)?"text-orange-400":"text-emerald-400"}`),i(ne,k),Qa(ue,a(se)),i(J,`/${a(le)??""}`),i(Pt,` ${we??""}`)},[()=>r.entity.acted?l()("session.combat_card.acted"):l()("session.combat_card.act"),()=>l()("session.combat_card.defense"),()=>l()("session.combat_card.damage"),()=>l()("session.combat_card.health"),()=>l()("session.combat_card.add_affliction")]),d(U,fe),oa(),E()}ba(["click","input"]);function Ur(U,{from:r,to:l},Z={}){var{delay:E=0,duration:_=ie=>Math.sqrt(ie)*120,easing:j=Xs}=Z,D=getComputedStyle(U),n=D.transform==="none"?"":D.transform,[h,N]=D.transformOrigin.split(" ").map(parseFloat);h/=U.clientWidth,N/=U.clientHeight;var le=Pr(U),se=U.clientWidth/l.width/le,he=U.clientHeight/l.height/le,A=r.left+r.width*h,S=r.top+r.height*N,M=l.left+l.width*h,ee=l.top+l.height*N,te=(A-M)*se,vt=(S-ee)*he,Je=r.width/l.width,Ot=r.height/l.height;return{delay:E,duration:typeof _=="function"?_(Math.sqrt(te*te+vt*vt)):_,easing:j,css:(ie,ke)=>{var fe=ke*te,ze=ke*vt,ve=ie+ke*Je,je=ie+ke*Ot;return`transform: ${n} translate(${fe}px, ${ze}px) scale(${ve}, ${je});`}}}function Pr(U){if("currentCSSZoom"in U)return U.currentCSSZoom;for(var r=U,l=1;r!==null;)l*=+getComputedStyle(r).zoom,r=r.parentElement;return l}function Hr(U,r=1,l=0){const Z=[];let E=0;for(let n=0;n<r;n++){const h=Math.floor(Math.random()*U)+1;Z.push(h),E+=h}let _=`${r}d${U}`,j=[],D=0;if(l!==0)if(U===20){const n=Math.abs(l);for(let N=0;N<n;N++)j.push(Math.floor(Math.random()*6)+1);const h=Math.max(...j);l>0?(D=h,E+=h,_+=` + ${h} [Boon]`):(D=-h,E-=h,_+=` - ${h} [Bane]`)}else D=l,E+=l,_+=l>0?` + ${l}`:` - ${Math.abs(l)}`;return{total:E,results:Z,bonusRolls:j,formula:_,crit:U===20&&Z.includes(20),modifierTotal:D}}function Lr(U,r,l){const Z=l.map(n=>({...n,type:"enemy"}));if(U==="standard"){const n=r.filter(se=>se.initiative).map(se=>({...se,type:"player",isFast:!0})),h=r.filter(se=>!se.initiative).map(se=>({...se,type:"player",isFast:!1})),N=Z.filter(se=>se.initiative).map(se=>({...se,isFast:!0})),le=Z.filter(se=>!se.initiative).map(se=>({...se,isFast:!1}));return[...n,...N,...h,...le]}if(U==="individual")return[...r.map(h=>({...h,type:"player",totalInit:(h.initiativeRoll||0)+(h.attributes?.agility||10)-10})),...Z.map(h=>({...h,type:"enemy",totalInit:(h.initiativeRoll||0)+(h.attributes?.agility||10)-10}))].sort((h,N)=>N.totalInit-h.totalInit);const E=r.filter(n=>n&&n.initiative).map(n=>({...n,type:"player"})),_=r.filter(n=>n&&!n.initiative).map(n=>({...n,type:"player"})),j=[...E,...Z,..._],D=new Set;return j.filter(n=>{if(!n)return!1;const h=n.type==="player"?n.id:n.instanceId;return D.has(h)?!1:(D.add(h),!0)})}var Fr=u('<div class="h-full border-r border-slate-900/30 last:border-0"></div>'),qr=u('<div class="flex flex-col items-center"><span> </span> <span class="text-[8px] font-mono text-slate-600"><!></span></div>'),Br=u('<div class="space-y-4 w-full"><div class="relative h-3 w-full bg-slate-800 rounded-full overflow-hidden border border-slate-700/50 shadow-inner"><div class="absolute inset-0 flex"></div> <div><div class="absolute inset-0 bg-white/10 animate-pulse"></div></div></div> <div class="flex justify-between w-full px-1"></div></div>');function Os(U,r){la(r,!0);const l=()=>Ft(aa,"$t",Z),[Z,E]=va();let _=F(()=>()=>{for(let A=0;A<r.segments.length;A++)if(r.value<=r.segments[A].max)return A;return r.segments.length-1}),j=F(()=>()=>{const A=a(_)(),S=A===0?0:r.segments[A-1].max,M=r.segments[A].max;if(A===r.segments.length-1&&r.value>M)return 1;const ee=M-S;return ee===0?1:Math.min(1,Math.max(0,(r.value-S)/ee))}),D=F(()=>()=>{const A=a(_)(),S=100/r.segments.length;return A*S+a(j)()*S}),n=F(()=>r.segments[a(_)()].color);var h=Br(),N=t(h),le=t(N);We(le,21,()=>r.segments,Ct,(A,S)=>{var M=Fr();x(()=>Na(M,`width: ${100/r.segments.length}%`)),d(A,M)}),e(le);var se=s(le,2);e(N);var he=s(N,2);We(he,21,()=>r.segments,Ct,(A,S,M)=>{var ee=qr(),te=t(ee),vt=t(te,!0);e(te);var Je=s(te,2),Ot=t(Je);{var ie=fe=>{var ze=Ga();x(()=>i(ze,`${r.segments[M-1].max+1}+`)),d(fe,ze)},ke=fe=>{var ze=St(),ve=Be(ze);{var je=me=>{var I=Ga();x(()=>i(I,a(S).max)),d(me,I)},Le=me=>{var I=Ga();x(()=>i(I,a(S).max)),d(me,I)};w(ve,me=>{M===0?me(je):me(Le,!1)},!0)}d(fe,ze)};w(Ot,fe=>{M===r.segments.length-1?fe(ie):fe(ke,!1)})}e(Je),e(ee),x((fe,ze)=>{Na(ee,`width: ${100/r.segments.length}%`),qe(te,1,`text-[9px] font-black uppercase tracking-tighter transition-colors ${fe??""}`,"svelte-1ix6916"),i(vt,ze)},[()=>M===a(_)()?a(n).replace("bg-","text-"):"text-slate-500",()=>l()("campaign.difficulty."+a(S).key)]),d(A,ee)}),e(he),e(h),x(A=>{qe(se,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out rounded-full ${a(n)??""}`,"svelte-1ix6916"),Na(se,`width: ${A??""}%`)},[()=>a(D)()]),d(U,h),oa(),E()}var Wr=u('<div><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-2"><!> <span class="text-xs font-black uppercase tracking-widest"> </span></div> <div class="text-xs font-bold uppercase opacity-70"> </div></div> <div class="flex items-center justify-between mb-6"><div><div class="text-3xl font-black leading-none"> </div> <div class="text-[10px] font-bold uppercase opacity-50 mt-1"> </div></div> <div class="text-right"><div class="text-sm font-black uppercase"> </div> <div class="text-[10px] font-bold opacity-40 mt-1 flex items-center justify-end gap-1"><span class="uppercase tracking-tighter"> </span> <span> </span></div></div></div> <!></div>');function os(U,r){la(r,!0);const l=()=>Ft(aa,"$t",Z),[Z,E]=va(),_={starting:{easy:3,avgMin:4,avgMax:15,challMin:16,challMax:30,hard:31,maxCreature:25},novice:{easy:10,avgMin:11,avgMax:30,challMin:31,challMax:50,hard:51,maxCreature:100},expert:{easy:30,avgMin:31,avgMax:50,challMin:51,challMax:125,hard:126,maxCreature:250},master:{easy:50,avgMin:51,avgMax:125,challMin:126,challMax:200,hard:201,maxCreature:null}};let j=F(()=>_[r.tier]||_.starting),D=F(()=>()=>r.totalDifficulty<=a(j).easy?"easy":r.totalDifficulty<=a(j).avgMax?"average":r.totalDifficulty<=a(j).challMax?"challenging":"hard"),n=F(()=>[{key:"easy",max:a(j).easy,color:"bg-green-500"},{key:"average",max:a(j).avgMax,color:"bg-yellow-500"},{key:"challenging",max:a(j).challMax,color:"bg-orange-500"},{key:"hard",max:a(j).challMax*1.5,color:"bg-red-500"}]),h=F(()=>()=>{switch(a(D)()){case"easy":return"text-green-400 bg-green-500/10 border-green-500/30";case"average":return"text-yellow-400 bg-yellow-500/10 border-yellow-500/30";case"challenging":return"text-orange-400 bg-orange-500/10 border-orange-500/30";case"hard":return"text-red-400 bg-red-500/10 border-red-500/30";default:return"text-slate-400 bg-slate-500/10 border-slate-500/30"}});var N=Wr(),le=t(N),se=t(le),he=t(se);Pa(he,{size:18});var A=s(he,2),S=t(A,!0);e(A),e(se);var M=s(se,2),ee=t(M,!0);e(M),e(le);var te=s(le,2),vt=t(te),Je=t(vt),Ot=t(Je,!0);e(Je);var ie=s(Je,2),ke=t(ie,!0);e(ie),e(vt);var fe=s(vt,2),ze=t(fe),ve=t(ze,!0);e(ze);var je=s(ze,2),Le=t(je),me=t(Le);e(Le);var I=s(Le,2),Y=t(I,!0);e(I),e(je),e(fe),e(te);var _e=s(te,2);Os(_e,{get value(){return r.totalDifficulty},get segments(){return a(n)}}),e(N),x((Ee,Oe,ot,et,ft,it,tt)=>{qe(N,1,`rounded-xl border p-4 ${Ee??""} shadow-lg`),i(S,Oe),i(ee,ot),i(Ot,r.totalDifficulty),i(ke,et),i(ve,ft),i(me,`${it??""}:`),i(Y,tt)},[()=>a(h)(),()=>l()("campaign.difficulty.title"),()=>l()("campaign.settings.tiers."+r.tier),()=>l()("campaign.difficulty.total"),()=>l()("campaign.difficulty."+a(D)()),()=>l()("campaign.difficulty.max_creature"),()=>a(j).maxCreature??l()("campaign.difficulty.none")]),d(U,N),oa(),E()}var Jr=u('<div><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-2"><!> <span class="text-xs font-black uppercase tracking-widest"> </span></div> <div class="flex items-center gap-2 text-xs font-bold uppercase opacity-70"><span> </span> <span class="text-[10px] bg-black/20 px-2 py-0.5 rounded"> </span></div></div> <div class="flex items-center justify-between mb-6"><div><div class="text-3xl font-black leading-none"> </div> <div class="text-[10px] font-bold uppercase opacity-50 mt-1"> </div></div> <div class="text-right"><div class="text-sm font-black uppercase"> </div> <div class="text-[10px] font-medium opacity-50 mt-1 uppercase tracking-tighter"> </div></div></div> <!></div>');function ds(U,r){la(r,!0);const l=()=>Ft(aa,"$t",Z),[Z,E]=va(),_={starting:{easy:.5,average:1,hard:1.5},novice:{easy:1,average:2,hard:3},expert:{easy:2,average:4,hard:6},master:{easy:4,average:8,hard:12}};let j=F(()=>_[r.tier]||_.novice),D=F(()=>({easy:a(j).easy*r.playerCount,average:a(j).average*r.playerCount,hard:a(j).hard*r.playerCount})),n=F(()=>()=>r.totalDifficulty<=a(D).easy?"easy":r.totalDifficulty<=a(D).average?"average":"hard"),h=F(()=>[{key:"easy",max:a(D).easy,color:"bg-green-500"},{key:"average",max:a(D).average,color:"bg-yellow-500"},{key:"hard",max:a(D).hard*1.5,color:"bg-red-500"}]),N=F(()=>()=>{switch(a(n)()){case"easy":return"text-green-400 bg-green-500/10 border-green-500/30";case"average":return"text-yellow-400 bg-yellow-500/10 border-yellow-500/30";case"hard":return"text-red-400 bg-red-500/10 border-red-500/30";default:return"text-slate-400 bg-slate-500/10 border-slate-500/30"}});var le=Jr(),se=t(le),he=t(se),A=t(he);Pa(A,{size:18});var S=s(A,2),M=t(S,!0);e(S),e(he);var ee=s(he,2),te=t(ee),vt=t(te,!0);e(te);var Je=s(te,2),Ot=t(Je,!0);e(Je),e(ee),e(se);var ie=s(se,2),ke=t(ie),fe=t(ke),ze=t(fe,!0);e(fe);var ve=s(fe,2),je=t(ve,!0);e(ve),e(ke);var Le=s(ke,2),me=t(Le),I=t(me,!0);e(me);var Y=s(me,2),_e=t(Y);e(Y),e(Le),e(ie);var Ee=s(ie,2);Os(Ee,{get value(){return r.totalDifficulty},get segments(){return a(h)}}),e(le),x((Oe,ot,et,ft,it,tt,gt)=>{qe(le,1,`rounded-xl border p-4 ${Oe??""} shadow-lg`),i(M,ot),i(vt,et),i(Ot,ft),i(ze,r.totalDifficulty),i(je,it),i(I,tt),i(_e,`${a(j).average??""}/${gt??""}`)},[()=>a(N)(),()=>l()("campaign.difficulty.title"),()=>l()("campaign.settings.tiers."+r.tier),()=>l()("campaign.difficulty.players",{values:{count:r.playerCount}}),()=>l()("campaign.difficulty.total"),()=>l()("campaign.difficulty."+a(n)()),()=>l()("common.labels.master")]),d(U,le),oa(),E()}var Gr=u('<span class="text-[10px] bg-slate-800 text-slate-400 px-1.5 py-0.5 rounded-full"> </span>'),Vr=u('<div class="p-3 rounded-xl border border-amber-500/30 bg-amber-500/5 flex items-center gap-3 transition-all hover:bg-amber-500/10 shadow-sm"><div class="flex-1"><div class="font-bold text-sm text-amber-200 leading-none"> </div> <div class="text-[9px] text-amber-500/60 font-medium mt-1 uppercase tracking-tighter"> </div></div> <div class="flex items-center gap-1.5"><button class="p-2 rounded-lg bg-green-600/20 text-green-400 hover:bg-green-600 hover:text-white transition-all shadow-lg active:scale-90" title="Aprovar"><!></button> <button class="p-2 rounded-lg bg-red-600/20 text-red-400 hover:bg-red-600 hover:text-white transition-all shadow-lg active:scale-90" title="Recusar"><!></button></div></div>'),Qr=u('<div class="space-y-2 animate-in fade-in slide-in-from-top-2"><div class="flex items-center gap-2 px-1"><div class="w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"></div> <span class="text-[10px] font-black text-amber-500 uppercase tracking-wider"> </span></div> <!> <div class="h-px bg-slate-800/50 mx-2 my-2"></div></div>'),Yr=u('<span class="text-indigo-400 font-bold uppercase tracking-tighter mr-1"> </span>'),Zr=u('<div><div></div> <div class="flex-1"><div> </div> <div class="text-[10px] text-slate-500 font-medium"><!> </div></div> <div class="flex items-center gap-1"><button><!></button> <button class="text-slate-600 hover:text-red-400 p-1.5 hover:bg-red-400/10 rounded-lg transition-all"><!></button></div></div>'),Xr=u('<div class="text-xs text-slate-600 italic p-6 border-2 border-dashed border-slate-800 rounded-xl text-center"> </div>'),Kr=u('<button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-black uppercase text-[10px] tracking-[0.2em] shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2"><!> </button> <p class="text-[9px] text-slate-600 text-center font-bold uppercase tracking-tighter"> </p>',1),ei=u('<div class="flex justify-center p-3 bg-white rounded-xl mb-2 animate-in zoom-in-95 duration-200 shadow-xl mx-auto w-32 h-32"><img class="w-24 h-24"/></div>'),ti=u('<div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-green-500 text-white text-[10px] font-bold rounded shadow-lg animate-in fade-in slide-in-from-bottom-1 whitespace-nowrap"><!> </div>'),ai=u('<div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-1"><!> </span></div> <button class="text-slate-500 hover:text-white transition-colors p-1"><!></button></div> <!> <div class="relative group"><div class="flex gap-1"><div class="flex-1 bg-slate-950 border border-slate-800 rounded-lg p-2 text-[10px] text-slate-400 font-mono truncate cursor-pointer hover:border-slate-700 transition-colors flex items-center"> </div> <button class="bg-indigo-600 hover:bg-indigo-500 text-white p-2 rounded-lg transition-all active:scale-95 shadow-lg shadow-indigo-900/20 relative"><!> <!></button></div></div> <button class="w-full text-[9px] text-slate-600 hover:text-red-400 font-bold uppercase tracking-widest transition-colors mt-1"> </button>',1),si=u('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 group hover:border-indigo-500/30 transition-all cursor-move hover:bg-slate-800/50" draggable="true"><div class="truncate flex-1 flex items-center gap-2"><!> <div class="min-w-0 flex-1"><div class="text-sm font-bold text-white truncate flex items-center gap-1"> <!></div> <div class="text-[10px] text-slate-500"> </div></div></div> <button class="text-slate-500 hover:text-indigo-400 p-1 ml-2 bg-slate-900 rounded border border-slate-800 hover:bg-slate-800"><!></button></div>'),ri=u('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),ii=u("<!> <!>",1),ni=u('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 group hover:border-indigo-500/30 transition-all cursor-move hover:bg-slate-800/50" draggable="true"><div class="truncate flex-1"><div class="text-sm font-bold text-white truncate flex items-center gap-1"> <!></div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-slate-500 hover:text-indigo-400 p-1 ml-2 bg-slate-900 rounded border border-slate-800 hover:bg-slate-800"><!></button></div>'),li=u('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),oi=u("<!> <!>",1),di=u('<button class="bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 shadow-lg shadow-green-900/20"><!> </button>'),vi=u('<div class="flex items-center gap-4"><button class="p-2 hover:bg-slate-700 rounded text-slate-400"><!></button> <div class="text-center"><div class="text-[10px] font-bold text-slate-500 uppercase"> </div><div class="text-3xl font-mono font-bold text-white leading-none"> </div></div> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded font-bold flex items-center gap-2"><!> </button> <div class="h-8 w-px bg-slate-700 mx-2"></div> <button class="text-red-400 hover:text-red-300 text-xs font-bold px-3 py-2 border border-red-900/30 rounded bg-red-900/10"> </button></div>'),ci=u('<div class="lg:hidden"><!></div>'),ui=u("<div><!></div>"),bi=u('<div class="text-center text-slate-500 italic py-10"> </div>'),xi=u('<div class="text-sm"><span class="font-bold text-yellow-500"> </span> <span class="text-slate-300"> </span></div>'),_i=u('<div class="bg-slate-900 border border-slate-700 rounded-lg p-4"><h4 class="font-bold text-white mb-2 pb-2 border-b border-slate-800 flex items-center gap-2"><!> </h4> <div class="space-y-2"></div></div>'),fi=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" aria-label="Fechar" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-lg border border-slate-700 shadow-2xl p-6 relative" role="dialog" aria-modal="true"><div class="flex items-center gap-3 mb-6"><div class="p-3 bg-yellow-900/20 rounded-full border border-yellow-500/30 text-yellow-500"><!></div> <div><h3 class="font-bold text-white text-xl"> </h3> <p class="text-slate-400 text-sm"> </p></div></div> <div class="space-y-4 mb-8 max-h-[60vh] overflow-y-auto custom-scrollbar"></div> <div class="flex gap-3"><button class="flex-1 py-1.5 rounded bg-slate-700 hover:bg-slate-600 text-white font-bold text-sm"> </button> <button class="flex-1 py-1.5 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold text-sm"> </button></div></div></div>'),mi=u('<button class="w-full text-left flex items-center gap-3 p-3 bg-slate-900 border border-slate-700 hover:border-indigo-500 hover:bg-indigo-500/10 rounded-xl group transition-all"><div class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center text-sm font-bold text-slate-500 group-hover:text-indigo-400 border border-slate-700 group-hover:border-indigo-500/30"> </div> <div class="flex-1"><div class="font-bold text-white group-hover:text-indigo-300"> </div> <div class="text-[10px] text-slate-500"> </div></div> <div class="bg-slate-800 p-2 rounded-lg text-slate-500 group-hover:bg-indigo-500 group-hover:text-white transition-colors"><!></div></button>'),pi=u('<div class="text-center py-8"><div class="w-12 h-12 bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-500"><!></div> <p class="text-slate-500 text-sm font-bold"> </p> <p class="text-[10px] text-slate-600 mt-1"> </p></div>'),gi=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" aria-label="Fechar" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-md border border-slate-700 shadow-2xl p-6" role="dialog" aria-modal="true"><div class="flex justify-between items-center mb-6"><div><h3 class="font-bold text-white text-lg"> </h3> <p class="text-xs text-slate-400"> </p></div> <button class="bg-slate-700 hover:bg-slate-600 p-2 rounded-lg text-white transition-colors"><!></button></div> <div class="space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2"><!> <!></div></div></div>'),hi=u('<div class="flex justify-between items-center bg-slate-950 p-3 rounded-xl border border-slate-800 group active:border-indigo-500/50 transition-all"><div class="truncate flex-1 flex flex-col"><div class="text-sm font-bold text-white truncate flex items-center gap-1"> <!></div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-white hover:bg-indigo-600 p-2 bg-slate-800 rounded-lg border border-slate-700"><!></button></div>'),yi=u('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),wi=u("<!> <!>",1),ki=u('<div class="flex justify-between items-center bg-slate-950 p-3 rounded-xl border border-slate-800 group active:border-indigo-500/50 transition-all"><div class="truncate flex-1"><div class="text-sm font-bold text-white truncate flex items-center gap-1"> <!></div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-white hover:bg-indigo-600 p-2 bg-slate-800 rounded-lg border border-slate-700"><!></button></div>'),zi=u('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),Ci=u("<!> <!>",1),ji=u('<div class="fixed inset-0 z-50 flex justify-end bg-black/60"><div class="w-full max-w-[300px] h-full bg-slate-900 border-l border-slate-800 p-4 shadow-2xl animate-in slide-in-from-right duration-300"><div class="flex justify-between items-center mb-4"><h3 class="font-bold text-white uppercase tracking-widest text-sm flex items-center gap-2"><!> </h3> <button class="bg-slate-800 p-2 rounded-lg text-slate-400 hover:text-white"><!></button></div> <div class="flex items-center gap-2 mb-3 bg-slate-950 p-1 rounded-lg border border-slate-800"><button><!> </button> <button><!> </button></div> <div class="h-[calc(100%-100px)] overflow-y-auto custom-scrollbar space-y-2"><!></div></div></div>'),Oi=u('<div class="grid grid-cols-1 lg:grid-cols-4 gap-6 h-full relative"><div class="space-y-6"><div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex flex-col gap-4"><div class="flex justify-between items-center bg-slate-950/50 p-2 rounded-lg border border-slate-800"><h3 class="text-xs font-black text-slate-500 uppercase tracking-widest flex items-center gap-2"><!> <!></h3> <button class="text-[10px] bg-slate-800 hover:bg-slate-700 text-white px-2.5 py-1.5 rounded-md font-bold transition-all border border-slate-700 active:scale-95"> </button></div> <!> <div class="space-y-2 flex-1 overflow-y-auto max-h-[300px] custom-scrollbar pr-1"><div class="space-y-2"><!> <!></div></div> <div class="pt-4 border-t border-slate-800 space-y-3"><!></div></div> <div class="hidden lg:flex flex-col h-[400px] bg-slate-900 border border-slate-800 rounded-xl p-4"><div class="flex items-center gap-2 mb-3 bg-slate-950 p-1 rounded-lg border border-slate-800"><button><!> </button> <button><!> </button></div> <div class="flex-1 overflow-y-auto pr-1 custom-scrollbar space-y-2"><!></div></div></div> <div class="lg:col-span-2 space-y-4" role="region" aria-label="Combat Zone"><div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex justify-between items-center shadow-lg sticky top-0 z-20"><div class="flex items-center gap-4"><!></div></div> <!> <div class="space-y-3 pb-20"><!> <!></div></div> <div class="hidden lg:flex flex-col gap-4"><!></div></div> <!> <!> <!> <button class="lg:hidden fixed bottom-24 right-4 bg-slate-800 text-white p-3 rounded-full shadow-lg border border-slate-700 z-40 active:scale-90 transition-transform" aria-label="Add Enemy"><!></button> <!> <!>',1);function Mi(U,r){la(r,!0);const l=()=>Ft(Us,"$liveCharacters",D),Z=()=>Ft(Ka,"$liveEnemies",D),E=()=>Ft(us,"$liveEncounters",D),_=()=>Ft(aa,"$t",D),j=()=>Ft(ja,"$isHistoryOpen",D),[D,n]=va();let h=_t(!1),N=_t(!1),le=_t(!1),se=_t(!1);const he={active:!1,round:1};let A=_t("enemies"),S=_t(!1),M=_t(ga([])),ee=_t(ga({isOpen:!1,title:"",message:"",onConfirm:()=>{}}));ss(()=>{if(r.campaign?.id){Ds(r.campaign.id,!0);const o=Aa(aa)("common.labels.master");is.update(c=>({...c,campaignId:r.campaign.id,name:r.campaign.gmName||o}));const v=setInterval(()=>{const c=ea.get(r.campaign.id)||r.campaign,p=Aa(aa)("common.labels.master");Ya(r.campaign.id,{name:c.name,gmName:c.gmName||p})},3e4);return()=>{clearInterval(v),Rs(),is.update(c=>({...c,campaignId:null}))}}});const te=F(()=>typeof window<"u"?`${window.location.origin}${_s("/campaigns/[id]/invite",{id:r.campaign?.id})}`:"");function vt(){a(te)&&(navigator.clipboard.writeText(a(te)),C(le,!0),setTimeout(()=>{C(le,!1)},2e3))}let Je=F(()=>r.campaign?.sessionRoster||[]),Ot=F(()=>r.campaign?.combat||he),ie=F(()=>r.campaign?.activeEnemies||[]),ke=F(()=>r.campaign?.members||[]),fe=F(()=>r.campaign?.initiativeStyle||"dle"),ze=F(()=>r.campaign?.tier||Ps(r.campaign?.system)),ve=F(()=>a(ie).reduce((o,v)=>o+(v.difficulty||0),0)),je=F(()=>a(Je).length||1),Le=F(()=>Array.from(new Set([...a(Je),...a(ke).map(v=>v.id)])).map(v=>{const c=l().find($=>$.id===v),p=a(ke).find($=>$.id===v);return c&&p?{...c,...p,lastUpdate:p.lastUpdate}:c||p}).filter(Boolean)),me=F(()=>a(Le).filter(o=>!o.campaignApproval||o.campaignApproval==="approved")),I=F(()=>a(Le).filter(o=>o.campaignApproval==="pending")),Y=F(()=>l().filter(o=>!a(Je).includes(o.id)&&!a(ke).some(v=>v.id===o.id)&&(o.system||Oa)===(r.campaign?.system||Oa))),_e=F(()=>Z().filter(o=>{const v=(o.system||Oa)===(r.campaign?.system||Oa),c=o.campaignId===r.campaign?.id||o.global;return v&&c})),Ee=F(()=>E().filter(o=>(o.system||Oa)===(r.campaign?.system||Oa)&&!0));function Oe(o){if(!r.campaign?.id)return;const c={...ea.get(r.campaign.id)||r.campaign,...o};ea.set(r.campaign.id,c),o.combat&&Ra(r.campaign.id,o.combat),(o.name||o.gmName)&&Ya(r.campaign.id,{name:c.name,gmName:c.gmName})}function ot(o){if(a(Je).includes(o)){const v=a(Je).filter(c=>c!==o);Oe({sessionRoster:v})}else{const v=[...a(Je),o];Oe({sessionRoster:v})}}function et(o){Me(o,{campaignApproval:"approved"}),$a({id:o,campaignApproval:"approved"})}function ft(o){$a({id:o,campaignApproval:"rejected",campaignId:null});const c=((ea.get(r.campaign.id)||r.campaign).members||[]).filter(p=>p.id!==o);Oe({members:c})}function it(o){const v=a(Le).find(c=>c.id===o);C(ee,{isOpen:!0,title:_()("session.players.remove_title"),message:_()("session.players.remove_message",{values:{name:v?.name||"este personagem"}}),onConfirm:()=>{const c=ea.get(r.campaign.id)||r.campaign;$a({id:o,campaignId:null});const p=(c.sessionRoster||[]).filter(y=>y!==o),$=(c.members||[]).filter(y=>y.id!==o),m=(c.activeEnemies||[]).filter(y=>y.type!=="player"||y.id!==o);Oe({sessionRoster:p,members:$,activeEnemies:m}),a(ee).isOpen=!1}},!0)}function tt(o){const c=(ea.get(r.campaign.id)||r.campaign).activeEnemies||[],p={...o,instanceId:Ia(),damage:0,currentHealth:o.health,afflictions:[],acted:!1,initiative:!1};Oe({activeEnemies:[...c,p]})}function gt(o){const c=(ea.get(r.campaign.id)||r.campaign).activeEnemies||[];let p=[];o.enemies.forEach($=>{const m=Z().find(y=>y.id===$.enemyId);if(m)for(let y=0;y<$.count;y++)p.push({...m,instanceId:Ia(),damage:0,currentHealth:m.health,afflictions:[],acted:!1,initiative:!1})}),Oe({activeEnemies:[...c,...p]})}function ht(){Oe({combat:{active:!0,round:1}}),Ra(r.campaign.id,{active:!0,round:1})}function yt(){const o=a(ie).filter(v=>v.damage<(v.currentHealth??v.health)&&v.endOfRound&&v.endOfRound.length>0).map(v=>({name:v.name,effects:v.endOfRound}));if(o.length>0){C(M,o,!0),C(S,!0);return}ce()}function ce(){const o=ea.get(r.campaign.id)||r.campaign,v=(o.combat?.round||1)+1,c=(o.activeEnemies||[]).map(p=>({...p,acted:!1}));Oe({combat:{...o.combat,round:v},activeEnemies:c}),Ra(r.campaign.id,{active:!0,round:v}),C(S,!1)}function Se(o){Oe({combat:{active:!1,round:1}}),Ra(r.campaign.id,{active:!1,round:1})}function Ce(o){const v=ea.get(r.campaign.id)||r.campaign;Oe({activeEnemies:(v.activeEnemies||[]).filter(c=>c.instanceId!==o)})}function re(o,v){const c=ea.get(r.campaign.id)||r.campaign;Oe({activeEnemies:(c.activeEnemies||[]).map(p=>p.instanceId===o?{...p,...v}:p)})}function ae(){const o=ea.get(r.campaign.id)||r.campaign,v=o.combat?.round||1;v>1&&Oe({combat:{...o.combat,round:v-1}})}let oe=_t(ga(Date.now()));ss(()=>{const o=setInterval(()=>{C(oe,Date.now(),!0)},1e4);return()=>clearInterval(o)});let ye=F(()=>(()=>{const o=a(me).filter(v=>a(Je).includes(v.id));return Lr(a(fe),o,a(ie))})());function Ie(o){return o.lastUpdate?a(oe)-o.lastUpdate<6e4:!1}function Me(o,v){const c=ea.get(r.campaign.id)||r.campaign,p=c.members||[],$=p.findIndex(R=>R.id===o);let m=p;$!==-1&&(m=[...p],m[$]={...m[$],...v});const y=c.activeEnemies||[],g=y.findIndex(R=>R.id===o&&R.type==="player");let X=y;g!==-1&&(X=[...y],X[g]={...X[g],...v}),Oe({members:m,activeEnemies:X})}function Ue(o,v,c){o.dataTransfer&&(o.dataTransfer.setData("application/json",JSON.stringify({item:v,type:c})),o.dataTransfer.effectAllowed="copy")}function Ae(o){return o.preventDefault(),!1}function Ge(o){o.preventDefault();const v=o.dataTransfer?.getData("application/json");if(v)try{const{item:c,type:p}=JSON.parse(v);p==="enemy"?tt(c):p==="encounter"&&gt(c)}catch(c){console.error("Drop error",c)}}var Ze=Oi(),Mt=Be(Ze),wt=t(Mt),At=t(wt),O=t(At),q=t(O),P=t(q);bs(P,{size:14,class:"text-indigo-500"});var Te=s(P),at=s(Te);{var st=o=>{var v=Gr(),c=t(v,!0);e(v),x(()=>i(c,a(me).length)),d(o,v)};w(at,o=>{a(me).length>0&&o(st)})}e(q);var Xe=s(q,2);Xe.__click=()=>C(h,!a(h));var jt=t(Xe,!0);e(Xe),e(O);var Et=s(O,2);{var It=o=>{var v=Qr(),c=t(v),p=s(t(c),2),$=t(p);e(p),e(c);var m=s(c,2);We(m,17,()=>a(I),y=>y.id,(y,g)=>{var X=Vr(),R=t(X),V=t(R),G=t(V,!0);e(V);var xe=s(V,2),K=t(xe,!0);e(xe),e(R);var Ne=s(R,2),Q=t(Ne);Q.__click=()=>et(a(g).id);var $e=t(Q);ls($e,{size:14}),e(Q);var Re=s(Q,2);Re.__click=()=>ft(a(g).id);var xt=t(Re);ua(xt,{size:14}),e(Re),e(Ne),e(X),x(ut=>{i(G,a(g).name),i(K,ut)},[()=>_()("session.players.new_request")]),d(y,X)}),Ea(2),e(v),x(y=>i($,`${y??""} (${a(I).length??""})`),[()=>_()("session.players.waiting_approval")]),d(o,v)};w(Et,o=>{a(I).length>0&&o(It)})}var Ve=s(Et,2),L=t(Ve),T=t(L);We(T,17,()=>a(me),o=>o.id,(o,v)=>{const c=F(()=>Ie(a(v))),p=F(()=>a(Je).includes(a(v).id));var $=Zr(),m=t($),y=s(m,2),g=t(y),X=t(g,!0);e(g);var R=s(g,2),V=t(R);{var G=Fe=>{var rt=Yr(),kt=t(rt,!0);e(rt),x(qt=>i(kt,qt),[()=>_()("common.labels.session")]),d(Fe,rt)};w(V,Fe=>{a(p)&&Fe(G)})}var xe=s(V);e(R),e(y);var K=s(y,2),Ne=t(K);Ne.__click=()=>ot(a(v).id);var Q=t(Ne);{var $e=Fe=>{fs(Fe,{size:14})},Re=Fe=>{ra(Fe,{size:14})};w(Q,Fe=>{a(p)?Fe($e):Fe(Re,!1)})}e(Ne);var xt=s(Ne,2);xt.__click=()=>it(a(v).id);var ut=t(xt);ua(ut,{size:14}),e(xt),e(K),e($),x((Fe,rt,kt)=>{qe($,1,`p-2.5 rounded-xl border flex items-center gap-3 transition-all ${a(c)?"bg-indigo-900/10 border-indigo-500/20":"bg-slate-900/50 border-slate-800"} ${a(c)||a(p)?"opacity-100":"opacity-40"} hover:border-indigo-500/40 group shadow-sm`),qe(m,1,`w-2 h-2 rounded-full ${a(c)?"bg-green-500 shadow-[0_0_8px_rgba(74,222,128,0.4)]":"bg-slate-700"}`),qe(g,1,`font-bold text-sm ${a(c)?"text-white":"text-slate-500"} group-hover:text-indigo-300 transition-colors`),i(X,a(v).name),i(xe,` ${Fe??""} ${a(v).level??""} • ${a(v).ancestry??""}`),qe(Ne,1,`p-1.5 rounded-lg transition-all ${a(p)?"text-amber-400 hover:bg-amber-400/10":"text-slate-500 hover:text-indigo-400 hover:bg-indigo-400/10"}`),ge(Ne,"title",rt),ge(xt,"title",kt)},[()=>_()("common.labels.level"),()=>a(p)?_()("session.players.remove_from_session"):_()("session.players.add_to_session"),()=>_()("session.players.kick_from_campaign")]),d(o,$)});var H=s(T,2);{var pe=o=>{var v=Xr(),c=t(v,!0);e(v),x(p=>i(c,p),[()=>_()("session.players.none")]),d(o,v)};w(H,o=>{a(me).length===0&&o(pe)})}e(L),e(Ve);var B=s(Ve,2),W=t(B);{var ne=o=>{var v=Kr(),c=Be(v);c.__click=()=>Oe({isPublished:!0});var p=t(c);pa(p,{size:14});var $=s(p);e(c);var m=s(c,2),y=t(m,!0);e(m),x((g,X)=>{i($,` ${g??""}`),i(y,X)},[()=>_()("session.publish.publish_session"),()=>_()("session.publish.make_visible")]),d(o,v)},Qe=o=>{var v=ai(),c=Be(v),p=t(c),$=t(p),m=t($);xs(m,{size:10,class:"animate-pulse"});var y=s(m);e($),e(p);var g=s(p,2);g.__click=()=>C(se,!a(se));var X=t(g);dr(X,{size:14}),e(g),e(c);var R=s(c,2);{var V=rt=>{var kt=ei(),qt=t(kt);e(kt),x((Nt,$t)=>{ge(qt,"src",Nt),ge(qt,"alt",$t)},[()=>`https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${encodeURIComponent(a(te))}`,()=>_()("session.publish.qr_alt")]),d(rt,kt)};w(R,rt=>{a(se)&&rt(V)})}var G=s(R,2),xe=t(G),K=t(xe);K.__click=vt;var Ne=t(K,!0);e(K);var Q=s(K,2);Q.__click=vt;var $e=t(Q);{var Re=rt=>{var kt=ti(),qt=t(kt);ls(qt,{size:10,class:"inline mr-1"});var Nt=s(qt);e(kt),x($t=>i(Nt,` ${$t??""}`),[()=>_()("common.buttons.copied")]),d(rt,kt)};w($e,rt=>{a(le)&&rt(Re)})}var xt=s($e,2);nr(xt,{size:14}),e(Q),e(xe),e(G);var ut=s(G,2);ut.__click=()=>Oe({isPublished:!1});var Fe=t(ut,!0);e(ut),x((rt,kt,qt,Nt)=>{i(y,` ${rt??""}`),ge(g,"title",kt),i(Ne,a(te)),ge(Q,"aria-label",qt),i(Fe,Nt)},[()=>_()("session.publish.public_session"),()=>_()("session.publish.qr_code"),()=>_()("session.publish.copy_link"),()=>_()("session.publish.remove_public")]),d(o,v)};w(W,o=>{r.campaign?.isPublished?o(Qe,!1):o(ne)})}e(B),e(At);var ue=s(At,2),de=t(ue),J=t(de);J.__click=()=>C(A,"enemies");var De=t(J);za(De,{size:14});var be=s(De);e(J);var Pe=s(J,2);Pe.__click=()=>C(A,"encounters");var nt=t(Pe);Xa(nt,{size:14});var lt=s(nt);e(Pe),e(de);var dt=s(de,2),Pt=t(dt);{var Dt=o=>{var v=ii(),c=Be(v);We(c,17,()=>a(_e),m=>m.id,(m,y)=>{var g=si(),X=t(g),R=t(X);or(R,{size:12,class:"text-slate-600 cursor-grab"});var V=s(R,2),G=t(V),xe=t(G),K=s(xe);{var Ne=ut=>{pa(ut,{size:10,class:"text-indigo-400"})};w(K,ut=>{a(y).global&&ut(Ne)})}e(G);var Q=s(G,2),$e=t(Q);e(Q),e(V),e(X);var Re=s(X,2);Re.__click=()=>tt(a(y));var xt=t(Re);ra(xt,{size:16}),e(Re),e(g),x(ut=>{i(xe,`${a(y).name??""} `),i($e,`${ut??""} ${a(y).difficulty??""}`)},[()=>_()("session.enemies.difficulty")]),Ca("dragstart",g,ut=>Ue(ut,a(y),"enemy")),d(m,g)});var p=s(c,2);{var $=m=>{var y=ri(),g=t(y,!0);e(y),x(X=>i(g,X),[()=>_()("session.enemies.none")]),d(m,y)};w(p,m=>{a(_e).length===0&&m($)})}d(o,v)},Vt=o=>{var v=oi(),c=Be(v);We(c,17,()=>a(Ee),m=>m.id,(m,y)=>{var g=ni(),X=t(g),R=t(X),V=t(R),G=s(V);{var xe=Re=>{pa(Re,{size:10,class:"text-indigo-400"})};w(G,Re=>{a(y).global&&Re(xe)})}e(R);var K=s(R,2),Ne=t(K);e(K),e(X);var Q=s(X,2);Q.__click=()=>gt(a(y));var $e=t(Q);Za($e,{size:14}),e(Q),e(g),x((Re,xt)=>{i(V,`${a(y).name??""} `),i(Ne,`${Re??""} ${xt??""}`)},[()=>a(y).enemies?.reduce((Re,xt)=>Re+xt.count,0)||0,()=>_()("session.enemies.title")]),Ca("dragstart",g,Re=>Ue(Re,a(y),"encounter")),d(m,g)});var p=s(c,2);{var $=m=>{var y=li(),g=t(y,!0);e(y),x(X=>i(g,X),[()=>_()("session.enemies.no_encounters")]),d(m,y)};w(p,m=>{a(Ee).length===0&&m($)})}d(o,v)};w(Pt,o=>{a(A)==="enemies"?o(Dt):o(Vt,!1)})}e(dt),e(ue),e(wt);var Tt=s(wt,2),f=t(Tt),b=t(f),z=t(b);{var k=o=>{var v=di();v.__click=ht;var c=t(v);js(c,{size:20});var p=s(c);e(v),x($=>i(p,` ${$??""}`),[()=>_()("session.combat.start")]),d(o,v)},we=o=>{var v=vi(),c=t(v);c.__click=ae;var p=t(c);La(p,{size:20}),e(c);var $=s(c,2),m=t($),y=t(m,!0);e(m);var g=s(m),X=t(g,!0);e(g),e($);var R=s($,2);R.__click=yt;var V=t(R);Js(V,{size:16});var G=s(V);e(R);var xe=s(R,4);xe.__click=()=>Se();var K=t(xe,!0);e(xe),e(v),x((Ne,Q,$e,Re,xt)=>{ge(c,"title",Ne),i(y,Q),i(X,a(Ot).round),ge(R,"title",$e),i(G,` ${Re??""}`),i(K,xt)},[()=>_()("session.combat.previous"),()=>_()("session.combat.round"),()=>_()("session.combat.next"),()=>_()("session.combat.next"),()=>_()("session.combat.end")]),d(o,v)};w(z,o=>{a(Ot).active?o(we,!1):o(k)})}e(b),e(f);var He=s(f,2);{var Ke=o=>{var v=ci(),c=t(v);{var p=m=>{os(m,{get tier(){return a(ze)},get totalDifficulty(){return a(ve)}})},$=m=>{ds(m,{get tier(){return a(ze)},get totalDifficulty(){return a(ve)},get playerCount(){return a(je)}})};w(c,m=>{r.campaign?.system==="sofdl"?m(p):m($,!1)})}e(v),d(o,v)};w(He,o=>{a(ie).length>0&&o(Ke)})}var Ye=s(He,2),mt=t(Ye);We(mt,25,()=>a(ye),o=>o.type==="player"?o.id:o.instanceId,(o,v)=>{var c=ui(),p=t(c);Tr(p,{get entity(){return a(v)},updateEnemy:re,removeFromCombat:Ce,updatePlayer:Me}),e(c),Ls(c,()=>Ur,()=>({duration:300})),d(o,c)});var pt=s(mt,2);{var Ht=o=>{var v=bi(),c=t(v,!0);e(v),x(p=>i(c,p),[()=>_()("session.combat.empty")]),d(o,v)};w(pt,o=>{a(ye).length===0&&o(Ht)})}e(Ye),e(Tt);var Rt=s(Tt,2),Bt=t(Rt);{var Gt=o=>{var v=St(),c=Be(v);{var p=m=>{os(m,{get tier(){return a(ze)},get totalDifficulty(){return a(ve)}})},$=m=>{ds(m,{get tier(){return a(ze)},get totalDifficulty(){return a(ve)},get playerCount(){return a(je)}})};w(c,m=>{r.campaign?.system==="sofdl"?m(p):m($,!1)})}d(o,v)};w(Bt,o=>{a(ie).length>0&&o(Gt)})}e(Rt),e(Mt);var Xt=s(Mt,2);{var ta=o=>{var v=fi();v.__click=Re=>{Re.target===Re.currentTarget&&C(S,!1)};var c=t(v),p=t(c),$=t(p),m=t($);Gs(m,{size:24}),e($);var y=s($,2),g=t(y),X=t(g,!0);e(g);var R=s(g,2),V=t(R,!0);e(R),e(y),e(p);var G=s(p,2);We(G,21,()=>a(M),Ct,(Re,xt)=>{var ut=_i(),Fe=t(ut),rt=t(Fe);za(rt,{size:14,class:"text-slate-500"});var kt=s(rt);e(Fe);var qt=s(Fe,2);We(qt,21,()=>a(xt).effects,Ct,(Nt,$t)=>{var Lt=xi(),Yt=t(Lt),Kt=t(Yt);e(Yt);var da=s(Yt,2),wa=t(da,!0);e(da),e(Lt),x(()=>{i(Kt,`${a($t).name??""}:`),i(wa,a($t).desc)}),d(Nt,Lt)}),e(qt),e(ut),x(()=>i(kt,` ${a(xt).name??""}`)),d(Re,ut)}),e(G);var xe=s(G,2),K=t(xe);K.__click=()=>C(S,!1);var Ne=t(K,!0);e(K);var Q=s(K,2);Q.__click=ce;var $e=t(Q,!0);e(Q),e(xe),e(c),e(v),x((Re,xt,ut,Fe)=>{i(X,Re),i(V,xt),i(Ne,ut),i($e,Fe)},[()=>_()("session.end_of_round.title"),()=>_()("session.end_of_round.summary"),()=>_()("common.buttons.cancel"),()=>_()("session.end_of_round.advance")]),d(o,v)};w(Xt,o=>{a(S)&&o(ta)})}var Jt=s(Xt,2);{var Wt=o=>{var v=gi();v.__click=Q=>{Q.target===Q.currentTarget&&C(h,!1)};var c=t(v),p=t(c),$=t(p),m=t($),y=t(m,!0);e(m);var g=s(m,2),X=t(g,!0);e(g),e($);var R=s($,2);R.__click=()=>C(h,!1);var V=t(R);ya(V,{size:16}),e(R),e(p);var G=s(p,2),xe=t(G);We(xe,17,()=>a(Y),Ct,(Q,$e)=>{var Re=mi();Re.__click=()=>ot(a($e).id);var xt=t(Re),ut=t(xt,!0);e(xt);var Fe=s(xt,2),rt=t(Fe),kt=t(rt,!0);e(rt);var qt=s(rt,2),Nt=t(qt);e(qt),e(Fe);var $t=s(Fe,2),Lt=t($t);ra(Lt,{size:16}),e($t),e(Re),x((Yt,Kt)=>{i(ut,Yt),i(kt,a($e).name),i(Nt,`${Kt??""} ${a($e).level??""} • ${a($e).ancestry??""}`)},[()=>a($e).name.charAt(0),()=>_()("common.labels.level")]),d(Q,Re)});var K=s(xe,2);{var Ne=Q=>{var $e=pi(),Re=t($e),xt=t(Re);za(xt,{size:24}),e(Re);var ut=s(Re,2),Fe=t(ut,!0);e(ut);var rt=s(ut,2),kt=t(rt,!0);e(rt),e($e),x((qt,Nt)=>{i(Fe,qt),i(kt,Nt)},[()=>_()("session.manage_session.no_available"),()=>_()("session.manage_session.all_in_session")]),d(Q,$e)};w(K,Q=>{a(Y).length===0&&Q(Ne)})}e(G),e(c),e(v),x((Q,$e)=>{i(y,Q),i(X,$e)},[()=>_()("session.manage_session.title"),()=>_()("session.manage_session.description")]),d(o,v)};w(Jt,o=>{a(h)&&o(Wt)})}var Qt=s(Jt,2);{var ca=o=>{var v=ji();v.__click=Fe=>{Fe.target===Fe.currentTarget&&C(N,!1)};var c=t(v),p=t(c),$=t(p),m=t($);za(m,{size:16});var y=s(m);e($);var g=s($,2);g.__click=()=>C(N,!1);var X=t(g);ya(X,{size:18}),e(g),e(p);var R=s(p,2),V=t(R);V.__click=()=>C(A,"enemies");var G=t(V);za(G,{size:14});var xe=s(G);e(V);var K=s(V,2);K.__click=()=>C(A,"encounters");var Ne=t(K);Xa(Ne,{size:14});var Q=s(Ne);e(K),e(R);var $e=s(R,2),Re=t($e);{var xt=Fe=>{var rt=wi(),kt=Be(rt);We(kt,17,()=>a(_e),$t=>$t.id,($t,Lt)=>{var Yt=hi(),Kt=t(Yt),da=t(Kt),wa=t(da),Fa=s(wa);{var qa=na=>{pa(na,{size:10,class:"text-indigo-400"})};w(Fa,na=>{a(Lt).global&&na(qa)})}e(da);var Sa=s(da,2),Ba=t(Sa);e(Sa),e(Kt);var ka=s(Kt,2);ka.__click=()=>{tt(a(Lt)),C(N,!1)};var Wa=t(ka);ra(Wa,{size:16}),e(ka),e(Yt),x(na=>{i(wa,`${a(Lt).name??""} `),i(Ba,`${na??""} ${a(Lt).difficulty??""}`)},[()=>_()("session.enemies.difficulty")]),d($t,Yt)});var qt=s(kt,2);{var Nt=$t=>{var Lt=yi(),Yt=t(Lt,!0);e(Lt),x(Kt=>i(Yt,Kt),[()=>_()("session.enemies.none")]),d($t,Lt)};w(qt,$t=>{a(_e).length===0&&$t(Nt)})}d(Fe,rt)},ut=Fe=>{var rt=Ci(),kt=Be(rt);We(kt,17,()=>a(Ee),$t=>$t.id,($t,Lt)=>{var Yt=ki(),Kt=t(Yt),da=t(Kt),wa=t(da),Fa=s(wa);{var qa=na=>{pa(na,{size:10,class:"text-indigo-400"})};w(Fa,na=>{a(Lt).global&&na(qa)})}e(da);var Sa=s(da,2),Ba=t(Sa);e(Sa),e(Kt);var ka=s(Kt,2);ka.__click=()=>{gt(a(Lt)),C(N,!1)};var Wa=t(ka);Za(Wa,{size:16}),e(ka),e(Yt),x((na,Ja)=>{i(wa,`${a(Lt).name??""} `),i(Ba,`${na??""} ${Ja??""}`)},[()=>a(Lt).enemies?.reduce((na,Ja)=>na+Ja.count,0)||0,()=>_()("session.enemies.title")]),d($t,Yt)});var qt=s(kt,2);{var Nt=$t=>{var Lt=zi(),Yt=t(Lt,!0);e(Lt),x(Kt=>i(Yt,Kt),[()=>_()("session.enemies.no_encounters")]),d($t,Lt)};w(qt,$t=>{a(Ee).length===0&&$t(Nt)})}d(Fe,rt)};w(Re,Fe=>{a(A)==="enemies"?Fe(xt):Fe(ut,!1)})}e($e),e(c),e(v),x((Fe,rt,kt)=>{i(y,` ${Fe??""}`),qe(V,1,`flex-1 text-xs font-bold py-2 rounded flex items-center justify-center gap-2 transition-colors ${a(A)==="enemies"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),i(xe,` ${rt??""}`),qe(K,1,`flex-1 text-xs font-bold py-2 rounded flex items-center justify-center gap-2 transition-colors ${a(A)==="encounters"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),i(Q,` ${kt??""}`)},[()=>_()("session.enemies.title"),()=>_()("session.enemies.title"),()=>_()("session.enemies.encounters")]),d(o,v)};w(Qt,o=>{a(N)&&o(ca)})}var Zt=s(Qt,2);Zt.__click=()=>C(N,!0);var ct=t(Zt);za(ct,{size:24}),e(Zt);var Ut=s(Zt,2);ms(Ut,{get isOpen(){return j()},onClose:()=>ja.set(!1)});var ia=s(Ut,2);cs(ia,{get isOpen(){return a(ee).isOpen},get title(){return a(ee).title},get message(){return a(ee).message},get onConfirm(){return a(ee).onConfirm},onCancel:()=>a(ee).isOpen=!1}),x((o,v,c,p)=>{i(Te,` ${o??""} `),i(jt,v),qe(J,1,`flex-1 text-xs font-bold py-1.5 rounded flex items-center justify-center gap-2 transition-colors ${a(A)==="enemies"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),i(be,` ${c??""}`),qe(Pe,1,`flex-1 text-xs font-bold py-1.5 rounded flex items-center justify-center gap-2 transition-colors ${a(A)==="encounters"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),i(lt,` ${p??""}`)},[()=>_()("session.players.title"),()=>a(h)?_()("session.players.close"):_()("session.players.add"),()=>_()("session.enemies.title"),()=>_()("session.enemies.encounters")]),Ca("dragover",Tt,Ae),Ca("drop",Tt,Ge),d(U,Ze),oa(),n()}ba(["click"]);var Ei=u('<span class="text-[10px] text-indigo-300 uppercase font-bold mb-2 block"> </span>'),Si=u('<div><!> <div class="flex items-center justify-between bg-black/40 rounded-xl p-1.5 border border-white/5"><button type="button" class="w-10 h-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Diminuir"><!></button> <div class="flex flex-col items-center min-w-[3rem]"><span class="text-2xl font-black text-white leading-none tracking-tighter"> </span></div> <button type="button" class="w-10 h-10 flex items-center justify-center bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-all active:scale-90 shadow-lg shadow-indigo-500/20 disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Aumentar"><!></button></div></div>');function Ms(U,r){la(r,!0);function l(){const S=r.steps.indexOf(r.value);if(S>0)r.onUpdate(r.steps[S-1]);else if(S===-1){const M=[...r.steps].reverse().find(ee=>ee<r.value);M!==void 0?r.onUpdate(M):r.onUpdate(r.steps[0])}}function Z(){const S=r.steps.indexOf(r.value);if(S!==-1&&S<r.steps.length-1)r.onUpdate(r.steps[S+1]);else if(S===-1){const M=r.steps.find(ee=>ee>r.value);M!==void 0?r.onUpdate(M):r.onUpdate(r.steps[r.steps.length-1])}}var E=Si(),_=t(E);{var j=S=>{var M=Ei(),ee=t(M,!0);e(M),x(()=>i(ee,r.label)),d(S,M)};w(_,S=>{r.label&&S(j)})}var D=s(_,2),n=t(D);n.__click=l;var h=t(n);fs(h,{size:18}),e(n);var N=s(n,2),le=t(N),se=t(le,!0);e(le),e(N);var he=s(N,2);he.__click=Z;var A=t(he);ra(A,{size:18}),e(he),e(D),e(E),x(()=>{n.disabled=r.value<=r.steps[0],i(se,r.value),he.disabled=r.value>=r.steps[r.steps.length-1]}),d(U,E),oa()}ba(["click"]);var Ii=u('<div class="w-16 h-16 rounded-lg overflow-hidden border border-slate-700 shadow-lg flex-shrink-0"><!></div>'),Di=u('<div class="text-xs text-slate-500 italic mt-2 leading-relaxed opacity-75"> </div>'),Ri=u('<span class="text-slate-400"> </span>'),Ni=u('<span class="text-slate-400"> </span>'),$i=u('<div class="text-sm mb-4"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span></div>'),Ai=u('<div class="mb-3 text-sm"><span class="font-bold text-indigo-400"> </span> <span class="text-slate-300 ml-1"> </span></div>'),Ti=u('<span class="text-slate-300"> </span>'),Ui=u('<div class="mb-2 text-sm"><span class="font-bold text-white"> </span> <span class="text-slate-400"> </span> <span class="text-white ml-1"> </span> <!></div>'),Pi=u('<div class="mt-4"><h4 class="text-red-500 font-bold text-xs uppercase mb-2 tracking-wider"> </h4> <!></div>'),Hi=u('<div class="mb-2 text-sm"><span class="font-bold text-white"> </span> <span class="text-slate-300 ml-1"> </span></div>'),Li=u('<div class="mt-4"><h4 class="text-orange-500 font-bold text-xs uppercase mb-2 tracking-wider"> </h4> <!></div>'),Fi=u('<div class="mb-2 text-sm"><span class="font-bold text-white"> </span> <span class="text-slate-300 ml-1"> </span></div>'),qi=u('<div class="mt-4"><h4 class="text-yellow-500 font-bold text-xs uppercase mb-2 tracking-wider"> </h4> <!></div>'),Bi=u('<div class="w-full max-w-md bg-slate-900 border border-slate-700 rounded-xl p-5 shadow-2xl"><div class="flex items-start gap-3 mb-4"><!> <div class="flex-1 min-w-0"><div class="flex items-baseline gap-2"><h2 class="text-xl font-bold text-white font-serif tracking-wide"> </h2> <span class="text-red-500 font-bold text-sm"> </span></div> <div class="text-sm text-slate-400 mt-1"> </div> <!></div></div> <div class="text-sm mb-3"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span> <!></div> <div class="text-sm mb-3"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span> <span class="text-slate-500 font-bold ml-3"> </span> <span class="text-white ml-1"> </span></div> <div class="text-sm mb-3"><span class="text-white"><span class="text-slate-500 font-bold"> </span> <span class="text-slate-500 font-bold"> </span> <span class="text-slate-500 font-bold"> </span> <span class="text-slate-500 font-bold"> </span> </span></div> <div class="text-sm mb-3"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span> <!></div> <!> <div class="border-t border-slate-700 my-4"></div> <!> <!> <!> <!></div>'),Wi=u('<div class="space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="flex items-center gap-4"><div class="relative group cursor-pointer"><div class="w-16 h-16 rounded-xl overflow-hidden border border-slate-700"><!></div> <div class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"><!></div></div> <div class="flex-1"><label for="enemy-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold text-lg"/></div></div> <div><label for="enemy-desc-text" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <textarea id="enemy-desc-text" class="w-full bg-slate-900 border border-slate-700 rounded p-3 text-white text-sm min-h-[100px] resize-none focus:border-indigo-500 focus:outline-none transition-colors"></textarea></div> <div><label for="enemy-desc" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-desc" type="text" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div class="flex items-center gap-2 mt-4"><input id="enemy-global" type="checkbox" class="w-4 h-4 bg-slate-900 border-slate-700 rounded focus:ring-indigo-500"/> <label for="enemy-global" class="text-sm font-bold text-slate-400 select-none cursor-pointer flex items-center gap-2"><!> </label></div></div>'),Ji=u('<div class="bg-slate-900 p-3 rounded border border-slate-700 text-center"><label class="text-[10px] text-slate-500 uppercase font-bold block mb-1 text-ellipsis overflow-hidden whitespace-nowrap"> </label> <input type="number" class="w-full bg-transparent text-center font-bold text-white text-xl focus:outline-none mb-1"/> <div> </div></div>'),Gi=u('<div class="space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="grid grid-cols-2 gap-4"><div class="flex flex-col"><label for="enemy-diff" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <!></div> <div><label for="enemy-size" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <!></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-speed" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-speed" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-health" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-defense" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-perception" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-perception" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div><h4 class="text-indigo-400 font-bold text-sm uppercase mb-3 border-b border-indigo-500/20 pb-2"> </h4> <div class="grid grid-cols-4 gap-3"></div></div> <div class="space-y-3 pt-4 border-t border-slate-800"><div><label for="enemy-speed-notes" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-speed-notes" type="text" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-senses" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-senses" type="text" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-immune" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <textarea id="enemy-immune" class="w-full bg-slate-900 border border-slate-700 rounded p-3 text-white text-sm min-h-[80px] resize-none focus:border-indigo-500 focus:outline-none transition-colors"></textarea></div></div></div>'),Vi=u('<div class="flex gap-2 items-start"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),Qi=u('<div class="flex gap-2 items-start"><div class="flex-1 space-y-2"><div class="grid grid-cols-2 gap-2"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <select class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm"><option> </option><option> </option></select></div> <div class="grid grid-cols-2 gap-2"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600"/> <input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600"/></div> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),Yi=u('<div class="flex gap-2 items-start"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),Zi=u('<div class="flex gap-2 items-start"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),Xi=u('<div class="space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="p-4 bg-slate-900 rounded border border-indigo-500/30"><div class="mb-3"><h4 class="font-bold text-sm uppercase text-indigo-400"> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div> <div class="p-4 bg-slate-900 rounded border border-red-500/30"><div class="mb-3"><h4 class="font-bold text-sm uppercase text-red-400"> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div> <div class="p-4 bg-slate-900 rounded border border-orange-500/30"><div class="mb-3"><h4 class="font-bold text-sm uppercase text-orange-400"> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div> <div class="p-4 bg-slate-900 rounded border border-yellow-500/30"><div class="mb-3"><h4 class="font-bold text-sm uppercase text-yellow-400"> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div></div>'),Ki=u('<div class="flex-1 flex items-start justify-center p-4 min-h-0 animate-in fade-in slide-in-from-right-2 duration-300"><!></div>'),en=u('<div class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 lg:p-4" role="button" aria-label="Close" tabindex="-1"><div class="bg-slate-900 w-full h-full lg:rounded-xl lg:max-w-6xl lg:h-[90vh] border-0 lg:border border-slate-700 shadow-2xl overflow-hidden flex flex-col lg:flex-row" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="w-full lg:w-1/2 flex flex-col h-full border-r border-slate-700"><div class="p-4 border-b border-slate-700 bg-slate-900 flex justify-between items-center"><div class="flex items-center gap-3"><button class="lg:hidden text-slate-400 hover:text-white p-1 rounded-full hover:bg-slate-800 transition-colors"><!></button> <h3 id="modal-title" class="font-bold text-white text-lg"> </h3></div> <button class="hidden lg:block text-slate-400 hover:text-white"><!></button></div> <div class="flex border-b border-slate-700 bg-slate-900/50 overflow-x-auto"><button> </button> <button> </button> <button> </button> <button> </button></div> <div class="flex-1 overflow-y-auto p-6 custom-scrollbar bg-slate-800/50"><!></div> <div class="p-4 border-t border-slate-700 bg-slate-900 flex justify-end gap-3 safe-area-bottom"><button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold flex items-center gap-2 transition-colors"><!> </button></div></div> <div class="hidden lg:flex w-1/2 bg-slate-950 flex-col border-l border-slate-800"><div class="p-4 border-b border-slate-800 bg-slate-950"><h3 class="font-bold text-slate-500 text-xs uppercase flex items-center gap-2"><!> </h3></div> <div class="flex-1 p-8 overflow-y-auto flex items-start justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-slate-950"><!></div></div></div></div> <input type="file" hidden="" accept="image/*"/> <!>',1);function tn(U,r){la(r,!0);const l=()=>Ft(aa,"$t",Z),[Z,E]=va(),_=I=>{var Y=Bi(),_e=t(Y),Ee=t(_e);{var Oe=b=>{var z=Ii(),k=t(z);Da(k,{get hash(){return a(n).imageUrl},get alt(){return a(n).name},size:"custom"}),e(z),d(b,z)};w(Ee,b=>{a(n).imageUrl&&b(Oe)})}var ot=s(Ee,2),et=t(ot),ft=t(et),it=t(ft,!0);e(ft);var tt=s(ft,2),gt=t(tt);e(tt),e(et);var ht=s(et,2),yt=t(ht);e(ht);var ce=s(ht,2);{var Se=b=>{var z=Di(),k=t(z,!0);e(z),x(()=>i(k,a(n).description)),d(b,z)};w(ce,b=>{a(n).description&&b(Se)})}e(ot),e(_e);var Ce=s(_e,2),re=t(Ce),ae=t(re,!0);e(re);var oe=s(re,2),ye=t(oe);e(oe);var Ie=s(oe,2);{var Me=b=>{var z=Ri(),k=t(z);e(z),x(()=>i(k,`; ${a(n).senses??""}`)),d(b,z)};w(Ie,b=>{a(n).senses&&b(Me)})}e(Ce);var Ue=s(Ce,2),Ae=t(Ue),Ge=t(Ae,!0);e(Ae);var Ze=s(Ae,2),Mt=t(Ze,!0);e(Ze);var wt=s(Ze,2),At=t(wt,!0);e(wt);var O=s(wt,2),q=t(O,!0);e(O),e(Ue);var P=s(Ue,2),Te=t(P),at=t(Te),st=t(at,!0);e(at);var Xe=s(at),jt=s(Xe),Et=t(jt,!0);e(jt);var It=s(jt),Ve=s(It),L=t(Ve,!0);e(Ve);var T=s(Ve),H=s(T),pe=t(H,!0);e(H);var B=s(H);e(Te),e(P);var W=s(P,2),ne=t(W),Qe=t(ne,!0);e(ne);var ue=s(ne,2),de=t(ue,!0);e(ue);var J=s(ue,2);{var De=b=>{var z=Ni(),k=t(z);e(z),x(()=>i(k,`; ${a(n).speedNotes??""}`)),d(b,z)};w(J,b=>{a(n).speedNotes&&b(De)})}e(W);var be=s(W,2);{var Pe=b=>{var z=$i(),k=t(z),we=t(k,!0);e(k);var He=s(k,2),Ke=t(He,!0);e(He),e(z),x(Ye=>{i(we,Ye),i(Ke,a(n).immunities)},[()=>l()("session.enemy_modal.immunities")]),d(b,z)};w(be,b=>{a(n).immunities&&b(Pe)})}var nt=s(be,4);{var lt=b=>{var z=St(),k=Be(z);We(k,17,()=>a(n).traits,Ct,(we,He)=>{var Ke=Ai(),Ye=t(Ke),mt=t(Ye,!0);e(Ye);var pt=s(Ye,2),Ht=t(pt,!0);e(pt),e(Ke),x(()=>{i(mt,a(He).name),i(Ht,a(He).desc)}),d(we,Ke)}),d(b,z)};w(nt,b=>{a(n).traits.length>0&&b(lt)})}var dt=s(nt,2);{var Pt=b=>{var z=Pi(),k=t(z),we=t(k,!0);e(k);var He=s(k,2);We(He,17,()=>a(n).attackOptions,Ct,(Ke,Ye)=>{var mt=Ui(),pt=t(mt),Ht=t(pt,!0);e(pt);var Rt=s(pt,2),Bt=t(Rt);e(Rt);var Gt=s(Rt,2),Xt=t(Gt);e(Gt);var ta=s(Gt,2);{var Jt=Wt=>{var Qt=Ti(),ca=t(Qt);e(Qt),x(()=>i(ca,`; ${a(Ye).desc??""}`)),d(Wt,Qt)};w(ta,Wt=>{a(Ye).desc&&Wt(Jt)})}e(mt),x(Wt=>{i(Ht,a(Ye).name),i(Bt,`(${Wt??""})`),i(Xt,`${a(Ye).attackRoll??""} (${a(Ye).damage??""})`)},[()=>a(Ye).type==="melee"?l()("session.enemy_modal.melee").toLowerCase():l()("session.enemy_modal.ranged").toLowerCase()]),d(Ke,mt)}),e(z),x(Ke=>i(we,Ke),[()=>l()("session.enemy_modal.attack_options")]),d(b,z)};w(dt,b=>{a(n).attackOptions.length>0&&b(Pt)})}var Dt=s(dt,2);{var Vt=b=>{var z=Li(),k=t(z),we=t(k,!0);e(k);var He=s(k,2);We(He,17,()=>a(n).specialAttacks,Ct,(Ke,Ye)=>{var mt=Hi(),pt=t(mt),Ht=t(pt,!0);e(pt);var Rt=s(pt,2),Bt=t(Rt,!0);e(Rt),e(mt),x(()=>{i(Ht,a(Ye).name),i(Bt,a(Ye).desc)}),d(Ke,mt)}),e(z),x(Ke=>i(we,Ke),[()=>l()("session.enemy_modal.special_attacks")]),d(b,z)};w(Dt,b=>{a(n).specialAttacks.length>0&&b(Vt)})}var Tt=s(Dt,2);{var f=b=>{var z=qi(),k=t(z),we=t(k,!0);e(k);var He=s(k,2);We(He,17,()=>a(n).endOfRound,Ct,(Ke,Ye)=>{var mt=Fi(),pt=t(mt),Ht=t(pt,!0);e(pt);var Rt=s(pt,2),Bt=t(Rt,!0);e(Rt),e(mt),x(()=>{i(Ht,a(Ye).name),i(Bt,a(Ye).desc)}),d(Ke,mt)}),e(z),x(Ke=>i(we,Ke),[()=>l()("session.enemy_modal.end_of_round")]),d(b,z)};w(Tt,b=>{a(n).endOfRound.length>0&&b(f)})}e(Y),x((b,z,k,we,He,Ke,Ye,mt,pt,Ht,Rt,Bt,Gt,Xt,ta,Jt,Wt)=>{i(it,b),i(gt,`${z??""} ${a(n).difficulty??""}`),i(yt,`${k??""} ${we??""} ${a(n).descriptors??""}`),i(ae,He),i(ye,`${a(n).perception??""} (${Ke??""})`),i(Ge,Ye),i(Mt,a(n).defense),i(At,mt),i(q,a(n).health),i(st,pt),i(Xe,` ${a(n).attributes.strength??""} (${Ht??""}), `),i(Et,Rt),i(It,` ${a(n).attributes.agility??""} (${Bt??""}), `),i(L,Gt),i(T,` ${a(n).attributes.intellect??""} (${Xt??""}), `),i(pe,ta),i(B,` ${a(n).attributes.will??""} (${Jt??""})`),i(Qe,Wt),i(de,a(n).speed)},[()=>a(n).name||l()("session.enemy_modal.enemy_default"),()=>l()("session.enemies.difficulty").toUpperCase(),()=>l()("session.enemy_modal.size"),()=>ee(a(n).size),()=>l()("sofdl.attributes.perception"),()=>M(a(n).perception),()=>l()("session.enemy_modal.defense"),()=>l()("session.enemy_modal.health"),()=>l()("sofdl.attributes.strength"),()=>M(a(n).attributes.strength),()=>l()("sofdl.attributes.agility"),()=>M(a(n).attributes.agility),()=>l()("sofdl.attributes.intellect"),()=>M(a(n).attributes.intellect),()=>l()("sofdl.attributes.will"),()=>M(a(n).attributes.will),()=>l()("session.enemy_modal.speed")]),d(I,Y)};let j=sa(r,"isOpen",3,!1),D=sa(r,"initialData",3,"{}"),n=_t(ga(S())),h=_t("general"),N=_t(!1),le=_t(""),se=_t(void 0);function he(I){const Y=I.target.files;if(Y&&Y.length>0){const _e=Y[0],Ee=new FileReader;Ee.onload=()=>{C(le,Ee.result,!0),C(N,!0)},Ee.readAsDataURL(_e)}I.target&&(I.target.value="")}async function A(I){try{const Y=await gs(I);a(n).imageUrl=Y,C(N,!1)}catch(Y){console.error(Y),alert(Y.message||"Erro ao salvar imagem")}}function S(){return{name:"",difficulty:1,size:1,description:"",descriptors:"",perception:10,senses:"",defense:10,health:10,attributes:{strength:10,agility:10,intellect:10,will:10},speed:10,speedNotes:"",immunities:"",traits:[],attackOptions:[],specialAttacks:[],endOfRound:[],imageUrl:"",global:!1}}function M(I){const Y=I-10;return Y>=0?`+${Y}`:`${Y}`}function ee(I){return I===.125?"1/8":I===.5?"1/2":I}Ha(()=>{if(j()&&D())try{const I=JSON.parse(D());Object.keys(I).length===0?C(n,S(),!0):C(n,{...S(),...I},!0)}catch{C(n,S(),!0)}});function te(){a(n).traits=[...a(n).traits,{name:"",desc:""}]}function vt(I){a(n).traits=a(n).traits.filter((Y,_e)=>_e!==I)}function Je(){a(n).attackOptions=[...a(n).attackOptions,{name:"",type:"melee",attackRoll:"+0",damage:"1d6",desc:""}]}function Ot(I){a(n).attackOptions=a(n).attackOptions.filter((Y,_e)=>_e!==I)}function ie(){a(n).specialAttacks=[...a(n).specialAttacks,{name:"",desc:""}]}function ke(I){a(n).specialAttacks=a(n).specialAttacks.filter((Y,_e)=>_e!==I)}function fe(){a(n).endOfRound=[...a(n).endOfRound,{name:"",desc:""}]}function ze(I){a(n).endOfRound=a(n).endOfRound.filter((Y,_e)=>_e!==I)}function ve(I){}var je=St(),Le=Be(je);{var me=I=>{var Y=en(),_e=Be(Y);_e.__click=ve;var Ee=t(_e),Oe=t(Ee),ot=t(Oe),et=t(ot),ft=t(et);ft.__click=function(...Ve){r.onClose?.apply(this,Ve)};var it=t(ft);La(it,{size:24}),e(ft);var tt=s(ft,2),gt=t(tt,!0);e(tt),e(et);var ht=s(et,2);ht.__click=function(...Ve){r.onClose?.apply(this,Ve)};var yt=t(ht);ya(yt,{size:20}),e(ht),e(ot);var ce=s(ot,2),Se=t(ce);Se.__click=()=>C(h,"general");var Ce=t(Se,!0);e(Se);var re=s(Se,2);re.__click=()=>C(h,"stats");var ae=t(re,!0);e(re);var oe=s(re,2);oe.__click=()=>C(h,"abilities");var ye=t(oe,!0);e(oe);var Ie=s(oe,2);Ie.__click=()=>C(h,"preview");var Me=t(Ie,!0);e(Ie),e(ce);var Ue=s(ce,2),Ae=t(Ue);{var Ge=Ve=>{var L=Wi(),T=t(L),H=t(T);H.__click=()=>a(se)?.click();var pe=t(H),B=t(pe);ts(B,()=>a(n).imageUrl,k=>{Da(k,{get hash(){return a(n).imageUrl},get alt(){return a(n).name},size:"custom",fallbackText:"?"})}),e(pe);var W=s(pe,2),ne=t(W);hs(ne,{size:20,class:"text-white"}),e(W),e(H);var Qe=s(H,2),ue=t(Qe),de=t(ue,!0);e(ue);var J=s(ue,2);zt(J),e(Qe),e(T);var De=s(T,2),be=t(De),Pe=t(be,!0);e(be);var nt=s(be,2);ha(nt),e(De);var lt=s(De,2),dt=t(lt),Pt=t(dt,!0);e(dt);var Dt=s(dt,2);zt(Dt),e(lt);var Vt=s(lt,2),Tt=t(Vt);zt(Tt);var f=s(Tt,2),b=t(f);pa(b,{size:14});var z=s(b);e(f),e(Vt),e(L),x((k,we,He,Ke,Ye,mt)=>{i(de,k),i(Pe,we),ge(nt,"placeholder",He),i(Pt,Ke),ge(Dt,"placeholder",Ye),i(z,` ${mt??""}`)},[()=>l()("session.enemy_modal.name"),()=>l()("session.enemy_modal.description"),()=>l()("session.enemy_modal.description_placeholder"),()=>l()("session.enemy_modal.descriptors"),()=>l()("session.enemy_modal.descriptors_placeholder"),()=>l()("session.enemy_modal.global_enemy")]),bt(J,()=>a(n).name,k=>a(n).name=k),bt(nt,()=>a(n).description,k=>a(n).description=k),bt(Dt,()=>a(n).descriptors,k=>a(n).descriptors=k),vs(Tt,()=>a(n).global,k=>a(n).global=k),d(Ve,L)},Ze=Ve=>{var L=St(),T=Be(L);{var H=B=>{var W=Gi(),ne=t(W),Qe=t(ne),ue=t(Qe),de=t(ue,!0);e(ue);var J=s(ue,2);{let m=F(()=>a(n).difficulty??0);Ms(J,{get value(){return a(m)},onUpdate:y=>a(n).difficulty=y,steps:[0,1,5,10,25,50,100,250,500,750,1e3]})}e(Qe);var De=s(Qe,2),be=t(De),Pe=t(be,!0);e(be);var nt=s(be,2);{let m=F(()=>a(n).size||1);ys(nt,{get value(){return a(m)},onUpdate:y=>a(n).size=y})}e(De),e(ne);var lt=s(ne,2),dt=t(lt),Pt=t(dt),Dt=t(Pt,!0);e(Pt);var Vt=s(Pt,2);zt(Vt),e(dt);var Tt=s(dt,2),f=t(Tt),b=t(f,!0);e(f);var z=s(f,2);zt(z),e(Tt),e(lt);var k=s(lt,2),we=t(k),He=t(we),Ke=t(He,!0);e(He);var Ye=s(He,2);zt(Ye),e(we);var mt=s(we,2),pt=t(mt),Ht=t(pt,!0);e(pt);var Rt=s(pt,2);zt(Rt),e(mt),e(k);var Bt=s(k,2),Gt=t(Bt),Xt=t(Gt,!0);e(Gt);var ta=s(Gt,2);We(ta,5,()=>[{key:"strength",label:l()("sofdl.attributes.strength")},{key:"agility",label:l()("sofdl.attributes.agility")},{key:"intellect",label:l()("sofdl.attributes.intellect")},{key:"will",label:l()("sofdl.attributes.will")}],Ct,(m,y)=>{var g=Ji(),X=t(g),R=t(X,!0);e(X);var V=s(X,2);zt(V);var G=s(V,2),xe=t(G,!0);e(G),e(g),x((K,Ne)=>{ge(X,"for",`attr-${a(y).key??""}`),ge(X,"title",a(y).label),i(R,K),ge(V,"id",`attr-${a(y).key??""}`),qe(G,1,`text-xs font-bold ${a(n).attributes[a(y).key]-10>=0?"text-green-500":"text-red-500"}`),i(xe,Ne)},[()=>a(y).label.substring(0,3),()=>M(a(n).attributes[a(y).key])]),bt(V,()=>a(n).attributes[a(y).key],K=>a(n).attributes[a(y).key]=K),d(m,g)}),e(ta),e(Bt);var Jt=s(Bt,2),Wt=t(Jt),Qt=t(Wt),ca=t(Qt,!0);e(Qt);var Zt=s(Qt,2);zt(Zt),e(Wt);var ct=s(Wt,2),Ut=t(ct),ia=t(Ut,!0);e(Ut);var o=s(Ut,2);zt(o),e(ct);var v=s(ct,2),c=t(v),p=t(c,!0);e(c);var $=s(c,2);ha($),e(v),e(Jt),e(W),x((m,y,g,X,R,V,G,xe,K,Ne,Q,$e,Re)=>{i(de,m),i(Pe,y),i(Dt,g),i(b,X),i(Ke,R),i(Ht,V),i(Xt,G),i(ca,xe),ge(Zt,"placeholder",K),i(ia,Ne),ge(o,"placeholder",Q),i(p,$e),ge($,"placeholder",Re)},[()=>l()("session.enemy_modal.difficulty"),()=>l()("session.enemy_modal.size"),()=>l()("session.enemy_modal.speed"),()=>l()("session.enemy_modal.health"),()=>l()("session.enemy_modal.defense"),()=>l()("sofdl.attributes.perception"),()=>l()("session.enemy_modal.main_attributes"),()=>l()("session.enemy_modal.speed_notes"),()=>l()("session.enemy_modal.speed_notes_placeholder"),()=>l()("session.enemy_modal.senses"),()=>l()("session.enemy_modal.senses_placeholder_sotdl"),()=>l()("session.enemy_modal.immunities"),()=>l()("session.enemy_modal.immunities_placeholder_sotdl")]),bt(Vt,()=>a(n).speed,m=>a(n).speed=m),bt(z,()=>a(n).health,m=>a(n).health=m),bt(Ye,()=>a(n).defense,m=>a(n).defense=m),bt(Rt,()=>a(n).perception,m=>a(n).perception=m),bt(Zt,()=>a(n).speedNotes,m=>a(n).speedNotes=m),bt(o,()=>a(n).senses,m=>a(n).senses=m),bt($,()=>a(n).immunities,m=>a(n).immunities=m),d(B,W)},pe=B=>{var W=St(),ne=Be(W);{var Qe=de=>{var J=Xi(),De=t(J),be=t(De),Pe=t(be),nt=t(Pe,!0);e(Pe),e(be);var lt=s(be,2),dt=t(lt);We(dt,17,()=>a(n).traits,Ct,(y,g,X)=>{var R=Vi(),V=t(R),G=t(V);zt(G);var xe=s(G,2);ha(xe),e(V);var K=s(V,2);K.__click=()=>vt(X);var Ne=t(K);ua(Ne,{size:16}),e(K),e(R),x((Q,$e)=>{ge(G,"placeholder",Q),ge(xe,"placeholder",$e)},[()=>l()("session.enemy_modal.name_placeholder"),()=>l()("session.enemy_modal.desc_placeholder")]),bt(G,()=>a(g).name,Q=>a(g).name=Q),bt(xe,()=>a(g).desc,Q=>a(g).desc=Q),d(y,R)});var Pt=s(dt,2);Pt.__click=te;var Dt=t(Pt),Vt=t(Dt);ra(Vt,{size:16}),e(Dt);var Tt=s(Dt);e(Pt),e(lt),e(De);var f=s(De,2),b=t(f),z=t(b),k=t(z,!0);e(z),e(b);var we=s(b,2),He=t(we);We(He,17,()=>a(n).attackOptions,Ct,(y,g,X)=>{var R=Qi(),V=t(R),G=t(V),xe=t(G);zt(xe);var K=s(xe,2),Ne=t(K),Q=t(Ne,!0);e(Ne),Ne.value=Ne.__value="melee";var $e=s(Ne),Re=t($e,!0);e($e),$e.value=$e.__value="ranged",e(K),e(G);var xt=s(G,2),ut=t(xt);zt(ut);var Fe=s(ut,2);zt(Fe),e(xt);var rt=s(xt,2);ha(rt),e(V);var kt=s(V,2);kt.__click=()=>Ot(X);var qt=t(kt);ua(qt,{size:16}),e(kt),e(R),x((Nt,$t,Lt,Yt,Kt,da)=>{ge(xe,"placeholder",Nt),i(Q,$t),i(Re,Lt),ge(ut,"placeholder",Yt),ge(Fe,"placeholder",Kt),ge(rt,"placeholder",da)},[()=>l()("session.enemy_modal.name_placeholder"),()=>l()("session.enemy_modal.melee"),()=>l()("session.enemy_modal.ranged"),()=>l()("session.enemy_modal.attack_placeholder"),()=>l()("session.enemy_modal.damage_placeholder"),()=>l()("session.enemy_modal.desc_effects_placeholder")]),bt(xe,()=>a(g).name,Nt=>a(g).name=Nt),Ss(K,()=>a(g).type,Nt=>a(g).type=Nt),bt(ut,()=>a(g).attackRoll,Nt=>a(g).attackRoll=Nt),bt(Fe,()=>a(g).damage,Nt=>a(g).damage=Nt),bt(rt,()=>a(g).desc,Nt=>a(g).desc=Nt),d(y,R)});var Ke=s(He,2);Ke.__click=Je;var Ye=t(Ke),mt=t(Ye);ra(mt,{size:16}),e(Ye);var pt=s(Ye);e(Ke),e(we),e(f);var Ht=s(f,2),Rt=t(Ht),Bt=t(Rt),Gt=t(Bt,!0);e(Bt),e(Rt);var Xt=s(Rt,2),ta=t(Xt);We(ta,17,()=>a(n).specialAttacks,Ct,(y,g,X)=>{var R=Yi(),V=t(R),G=t(V);zt(G);var xe=s(G,2);ha(xe),e(V);var K=s(V,2);K.__click=()=>ke(X);var Ne=t(K);ua(Ne,{size:16}),e(K),e(R),x((Q,$e)=>{ge(G,"placeholder",Q),ge(xe,"placeholder",$e)},[()=>l()("session.enemy_modal.name_placeholder"),()=>l()("session.enemy_modal.desc_placeholder")]),bt(G,()=>a(g).name,Q=>a(g).name=Q),bt(xe,()=>a(g).desc,Q=>a(g).desc=Q),d(y,R)});var Jt=s(ta,2);Jt.__click=ie;var Wt=t(Jt),Qt=t(Wt);ra(Qt,{size:16}),e(Wt);var ca=s(Wt);e(Jt),e(Xt),e(Ht);var Zt=s(Ht,2),ct=t(Zt),Ut=t(ct),ia=t(Ut,!0);e(Ut),e(ct);var o=s(ct,2),v=t(o);We(v,17,()=>a(n).endOfRound,Ct,(y,g,X)=>{var R=Zi(),V=t(R),G=t(V);zt(G);var xe=s(G,2);ha(xe),e(V);var K=s(V,2);K.__click=()=>ze(X);var Ne=t(K);ua(Ne,{size:16}),e(K),e(R),x((Q,$e)=>{ge(G,"placeholder",Q),ge(xe,"placeholder",$e)},[()=>l()("session.enemy_modal.name_placeholder"),()=>l()("session.enemy_modal.desc_placeholder")]),bt(G,()=>a(g).name,Q=>a(g).name=Q),bt(xe,()=>a(g).desc,Q=>a(g).desc=Q),d(y,R)});var c=s(v,2);c.__click=fe;var p=t(c),$=t(p);ra($,{size:16}),e(p);var m=s(p);e(c),e(o),e(Zt),e(J),x((y,g,X,R,V,G,xe,K)=>{i(nt,y),i(Tt,` ${g??""}`),i(k,X),i(pt,` ${R??""}`),i(Gt,V),i(ca,` ${G??""}`),i(ia,xe),i(m,` ${K??""}`)},[()=>l()("session.enemy_modal.traits"),()=>l()("common.buttons.add"),()=>l()("session.enemy_modal.attack_options"),()=>l()("common.buttons.add"),()=>l()("session.enemy_modal.special_attacks"),()=>l()("common.buttons.add"),()=>l()("session.enemy_modal.end_of_round"),()=>l()("common.buttons.add")]),d(de,J)},ue=de=>{var J=St(),De=Be(J);{var be=Pe=>{var nt=Ki(),lt=t(nt);_(lt),e(nt),d(Pe,nt)};w(De,Pe=>{a(h)==="preview"&&Pe(be)},!0)}d(de,J)};w(ne,de=>{a(h)==="abilities"?de(Qe):de(ue,!1)},!0)}d(B,W)};w(T,B=>{a(h)==="stats"?B(H):B(pe,!1)},!0)}d(Ve,L)};w(Ae,Ve=>{a(h)==="general"?Ve(Ge):Ve(Ze,!1)})}e(Ue);var Mt=s(Ue,2),wt=t(Mt);wt.__click=()=>r.onSave(a(n));var At=t(wt);as(At,{size:18});var O=s(At);e(wt),e(Mt),e(Oe);var q=s(Oe,2),P=t(q),Te=t(P),at=t(Te);es(at,{size:14});var st=s(at);e(Te),e(P);var Xe=s(P,2),jt=t(Xe);_(jt),e(Xe),e(q),e(Ee),e(_e);var Et=s(_e,2);Et.__change=he,zs(Et,Ve=>C(se,Ve),()=>a(se));var It=s(Et,2);ps(It,{get isOpen(){return a(N)},get imageUrl(){return a(le)},onClose:()=>C(N,!1),onCrop:A}),x((Ve,L,T,H,pe,B,W)=>{i(gt,Ve),qe(Se,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="general"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(Ce,L),qe(re,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="stats"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(ae,T),qe(oe,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="abilities"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(ye,H),qe(Ie,1,`lg:hidden flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="preview"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(Me,pe),i(O,` ${B??""}`),i(st,` ${W??""}`)},[()=>l()("session.enemy_modal.title"),()=>l()("session.enemy_modal.tab_general"),()=>l()("session.enemy_modal.tab_stats"),()=>l()("session.enemy_modal.tab_abilities"),()=>l()("session.enemy_modal.preview"),()=>l()("common.buttons.save"),()=>l()("session.enemy_modal.preview")]),Ta(3,Ee,()=>Ua,()=>({y:20,duration:300})),Ta(3,_e,()=>Ua,()=>({duration:200,opacity:1})),d(I,Y)};w(Le,I=>{j()&&I(me)})}d(U,je),oa(),E()}ba(["click","change"]);var an=u('<div class="w-16 h-16 rounded-lg overflow-hidden border border-slate-700 shadow-lg flex-shrink-0"><!></div>'),sn=u('<div class="bg-slate-950 p-2 rounded border border-slate-800"><div class="text-[10px] text-slate-500 uppercase font-bold mb-1"> </div> <div class="text-white font-bold"> <span> </span></div></div>'),rn=u('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),nn=u('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),ln=u('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),on=u('<div class="mb-2 pl-3 border-l-2 border-indigo-900"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),dn=u('<div><h4 class="font-bold text-indigo-400 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),vn=u('<div class="mb-2 pl-3 border-l-2 border-red-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),cn=u('<div><h4 class="font-bold text-red-500 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),un=u('<div class="mb-2 pl-3 border-l-2 border-orange-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),bn=u('<div><h4 class="font-bold text-orange-400 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),xn=u('<div class="mb-2 pl-3 border-l-2 border-yellow-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),_n=u('<div><h4 class="font-bold text-yellow-500 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),fn=u('<div class="w-full max-w-md bg-slate-900 border border-slate-700 rounded-xl p-5 shadow-2xl relative"><div class="absolute -top-3 -right-3 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-red-400"> </div> <div class="flex items-center gap-3 mb-4"><!> <div class="flex-1 min-w-0"><h2 class="text-2xl font-bold text-white mb-1 font-serif tracking-wide truncate"> </h2> <div class="h-1 w-20 bg-red-600 rounded-full"></div></div></div> <div class="grid grid-cols-2 gap-4 mb-4 text-sm"><div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold text-lg"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold text-lg"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold"> </span></div></div> <div class="grid grid-cols-4 gap-2 mb-6 text-center font-mono text-slate-300"></div> <div class="mb-6 space-y-2 text-xs"><!> <!> <!></div> <div class="space-y-5 text-sm"><!> <!> <!> <!></div></div>'),mn=u('<div class="space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="flex items-center gap-4"><div class="relative group cursor-pointer"><div class="w-16 h-16 rounded-xl overflow-hidden border border-slate-700"><!></div> <div class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"><!></div></div> <div class="flex-1"><label for="enemy-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold text-lg"/></div></div> <div><label for="enemy-desc" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <textarea id="enemy-desc" class="w-full bg-slate-900 border border-slate-700 rounded p-3 text-white text-sm min-h-[100px] resize-none focus:border-indigo-500 focus:outline-none transition-colors"></textarea></div> <div class="flex items-center gap-2"><input id="enemy-global" type="checkbox" class="w-4 h-4 bg-slate-900 border-slate-700 rounded focus:ring-indigo-500"/> <label for="enemy-global" class="text-sm font-bold text-slate-400 select-none cursor-pointer flex items-center gap-2"><!> </label></div></div>'),pn=u('<div class="bg-slate-900 p-2 rounded border border-slate-700 text-center"><label class="text-[10px] text-slate-500 uppercase font-bold block mb-1 text-ellipsis overflow-hidden whitespace-nowrap"> </label> <input type="number" class="w-full bg-transparent text-center font-bold text-white text-xl focus:outline-none mb-1"/> <div> </div></div>'),gn=u('<div class="space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="grid grid-cols-2 gap-4"><div class="flex flex-col"><label for="enemy-diff" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <!></div> <div class="flex flex-col"><label for="enemy-size" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <!></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-defense" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-health" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-damage" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-damage" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-speed" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-speed" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div><h4 class="text-indigo-400 font-bold text-sm uppercase mb-3 text-center border-b border-indigo-500/20 pb-2"> </h4> <div class="grid grid-cols-4 gap-3"></div></div> <div class="space-y-3 pt-4 border-t border-slate-800"><div><label for="enemy-senses" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-senses" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-langs" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-langs" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-immune" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-immune" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div></div></div>'),hn=u('<div class="flex gap-2 items-start animate-in fade-in slide-in-from-left-2"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600 focus:border-indigo-500 focus:outline-none"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none focus:border-indigo-500 focus:outline-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),yn=u('<div><div class="mb-3"><h4> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div>'),wn=u('<div class="space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300"></div>'),kn=u('<div class="flex-1 flex items-start justify-center p-4 min-h-0 animate-in fade-in slide-in-from-right-2 duration-300"><!></div>'),zn=u('<div class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 lg:p-4" role="button" tabindex="-1"><div class="bg-slate-900 w-full h-full lg:rounded-xl lg:max-w-6xl lg:h-[90vh] border-0 lg:border border-slate-700 shadow-2xl overflow-hidden flex flex-col lg:flex-row" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="w-full lg:w-1/2 flex flex-col h-full border-r border-slate-700"><div class="p-4 border-b border-slate-700 bg-slate-900 flex justify-between items-center"><div class="flex items-center gap-3"><button class="lg:hidden text-slate-400 hover:text-white p-1 rounded-full hover:bg-slate-800 transition-colors"><!></button> <h3 id="modal-title" class="font-bold text-white text-lg"> </h3></div> <button class="hidden lg:block text-slate-400 hover:text-white"><!></button></div> <div class="flex border-b border-slate-700 bg-slate-900/50 overflow-x-auto"><button> </button> <button> </button> <button> </button> <button> </button></div> <div class="flex-1 overflow-y-auto p-6 custom-scrollbar bg-slate-800/50"><!></div> <div class="p-4 border-t border-slate-700 bg-slate-900 flex justify-end gap-3 safe-area-bottom"><button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold flex items-center gap-2 transition-colors"><!> </button></div></div> <div class="hidden lg:flex w-1/2 bg-slate-950 flex-col border-l border-slate-800"><div class="p-4 border-b border-slate-800 bg-slate-950"><h3 class="font-bold text-slate-500 text-xs uppercase flex items-center gap-2"><!> </h3></div> <div class="flex-1 p-8 overflow-y-auto flex items-center justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-slate-950"><!></div></div></div></div> <input type="file" hidden="" accept="image/*"/> <!>',1);function Cn(U,r){la(r,!0);const l=()=>Ft(aa,"$t",Z),[Z,E]=va(),_=ie=>{var ke=fn(),fe=t(ke),ze=t(fe);e(fe);var ve=s(fe,2),je=t(ve);{var Le=L=>{var T=an(),H=t(T);Da(H,{get hash(){return a(n).imageUrl},get alt(){return a(n).name},size:"custom"}),e(T),d(L,T)};w(je,L=>{a(n).imageUrl&&L(Le)})}var me=s(je,2),I=t(me),Y=t(I,!0);e(I),Ea(2),e(me),e(ve);var _e=s(ve,2),Ee=t(_e),Oe=t(Ee),ot=t(Oe,!0);e(Oe);var et=s(Oe,2),ft=t(et,!0);e(et),e(Ee);var it=s(Ee,2),tt=t(it),gt=t(tt,!0);e(tt);var ht=s(tt,2),yt=t(ht,!0);e(ht),e(it);var ce=s(it,2),Se=t(ce),Ce=t(Se,!0);e(Se);var re=s(Se,2),ae=t(re,!0);e(re),e(ce);var oe=s(ce,2),ye=t(oe),Ie=t(ye,!0);e(ye);var Me=s(ye,2),Ue=t(Me,!0);e(Me),e(oe),e(_e);var Ae=s(_e,2);We(Ae,20,()=>["str","agi","int","wil"],Ct,(L,T)=>{var H=sn(),pe=t(H),B=t(pe,!0);e(pe);var W=s(pe,2),ne=t(W),Qe=s(ne),ue=t(Qe);e(Qe),e(W),e(H),x(()=>{i(B,T),i(ne,`${a(n).stats[T]??""} `),qe(Qe,1,`text-xs ${a(n).stats[T]-10>=0?"text-green-500":"text-red-500"}`),i(ue,`(${a(n).stats[T]-10>=0?"+":""}${a(n).stats[T]-10})`)}),d(L,H)}),e(Ae);var Ge=s(Ae,2),Ze=t(Ge);{var Mt=L=>{var T=rn(),H=t(T),pe=t(H);e(H);var B=s(H,2),W=t(B,!0);e(B),e(T),x(ne=>{i(pe,`${ne??""}:`),i(W,a(n).senses)},[()=>l()("session.enemy_modal.senses")]),d(L,T)};w(Ze,L=>{a(n).senses&&L(Mt)})}var wt=s(Ze,2);{var At=L=>{var T=nn(),H=t(T),pe=t(H);e(H);var B=s(H,2),W=t(B,!0);e(B),e(T),x(ne=>{i(pe,`${ne??""}:`),i(W,a(n).languages)},[()=>l()("session.enemy_modal.languages")]),d(L,T)};w(wt,L=>{a(n).languages&&L(At)})}var O=s(wt,2);{var q=L=>{var T=ln(),H=t(T),pe=t(H);e(H);var B=s(H,2),W=t(B,!0);e(B),e(T),x(ne=>{i(pe,`${ne??""}:`),i(W,a(n).immune)},[()=>l()("session.enemy_modal.immunities")]),d(L,T)};w(O,L=>{a(n).immune&&L(q)})}e(Ge);var P=s(Ge,2),Te=t(P);{var at=L=>{var T=dn(),H=t(T),pe=t(H,!0);e(H);var B=s(H,2);We(B,17,()=>a(n).traits,Ct,(W,ne,Qe,ue)=>{var de=on(),J=t(de),De=t(J);e(J);var be=s(J,2),Pe=t(be,!0);e(be),e(de),x(()=>{i(De,`${a(ne).name??""}:`),i(Pe,a(ne).desc)}),d(W,de)}),e(T),x(W=>i(pe,W),[()=>l()("session.enemy_modal.traits")]),d(L,T)};w(Te,L=>{a(n).traits.length>0&&L(at)})}var st=s(Te,2);{var Xe=L=>{var T=cn(),H=t(T),pe=t(H,!0);e(H);var B=s(H,2);We(B,17,()=>a(n).actions,Ct,(W,ne,Qe,ue)=>{var de=vn(),J=t(de),De=t(J);e(J);var be=s(J,2),Pe=t(be,!0);e(be),e(de),x(()=>{i(De,`${a(ne).name??""}:`),i(Pe,a(ne).desc)}),d(W,de)}),e(T),x(W=>i(pe,W),[()=>l()("session.enemy_modal.actions")]),d(L,T)};w(st,L=>{a(n).actions.length>0&&L(Xe)})}var jt=s(st,2);{var Et=L=>{var T=bn(),H=t(T),pe=t(H,!0);e(H);var B=s(H,2);We(B,17,()=>a(n).reactions,Ct,(W,ne,Qe,ue)=>{var de=un(),J=t(de),De=t(J);e(J);var be=s(J,2),Pe=t(be,!0);e(be),e(de),x(()=>{i(De,`${a(ne).name??""}:`),i(Pe,a(ne).desc)}),d(W,de)}),e(T),x(W=>i(pe,W),[()=>l()("session.enemy_modal.reactions")]),d(L,T)};w(jt,L=>{a(n).reactions.length>0&&L(Et)})}var It=s(jt,2);{var Ve=L=>{var T=_n(),H=t(T),pe=t(H,!0);e(H);var B=s(H,2);We(B,17,()=>a(n).endOfRound,Ct,(W,ne,Qe,ue)=>{var de=xn(),J=t(de),De=t(J);e(J);var be=s(J,2),Pe=t(be,!0);e(be),e(de),x(()=>{i(De,`${a(ne).name??""}:`),i(Pe,a(ne).desc)}),d(W,de)}),e(T),x(W=>i(pe,W),[()=>l()("session.enemy_modal.end_of_round")]),d(L,T)};w(It,L=>{a(n).endOfRound.length>0&&L(Ve)})}e(P),e(ke),x((L,T,H,pe,B,W)=>{i(ze,`${L??""} ${a(n).difficulty??""}`),i(Y,T),i(ot,H),i(ft,a(n).defense),i(gt,pe),i(yt,a(n).health),i(Ce,B),i(ae,a(n).size),i(Ie,W),i(Ue,a(n).speed)},[()=>l()("session.enemy_modal.difficulty"),()=>a(n).name||l()("session.enemy_modal.enemy_default"),()=>l()("session.enemy_modal.defense"),()=>l()("session.enemy_modal.health"),()=>l()("session.enemy_modal.size"),()=>l()("session.enemy_modal.speed")]),d(ie,ke)};let j=sa(r,"isOpen",3,!1),D=sa(r,"initialData",3,"{}"),n=_t(ga(S())),h=_t("general"),N=_t(!1),le=_t(""),se=_t(void 0);function he(ie){const ke=ie.target.files;if(ke&&ke.length>0){const fe=ke[0],ze=new FileReader;ze.onload=()=>{C(le,ze.result,!0),C(N,!0)},ze.readAsDataURL(fe)}ie.target&&(ie.target.value="")}async function A(ie){try{const ke=await gs(ie);a(n).imageUrl=ke,C(N,!1)}catch(ke){console.error(ke),alert(ke.message||"Erro ao salvar imagem")}}function S(){return{name:"",difficulty:1,defense:10,health:10,damage:0,size:1,speed:10,description:"",senses:"",languages:"",immune:"",imageUrl:"",stats:{str:10,agi:10,int:10,wil:10},traits:[],actions:[],reactions:[],endOfRound:[],global:!1}}Ha(()=>{if(j()&&D())try{const ie=JSON.parse(D());Object.keys(ie).length===0?C(n,S(),!0):C(n,{...S(),...ie},!0)}catch{C(n,S(),!0)}});function M(ie){a(n)[ie]=[...a(n)[ie],{name:"",desc:""}]}function ee(ie,ke){a(n)[ie]=a(n)[ie].filter((fe,ze)=>ze!==ke)}function te(ie){}var vt=St(),Je=Be(vt);{var Ot=ie=>{var ke=zn(),fe=Be(ke);fe.__click=te;var ze=t(fe),ve=t(ze),je=t(ve),Le=t(je),me=t(Le);me.__click=function(...P){r.onClose?.apply(this,P)};var I=t(me);La(I,{size:24}),e(me);var Y=s(me,2),_e=t(Y,!0);e(Y),e(Le);var Ee=s(Le,2);Ee.__click=function(...P){r.onClose?.apply(this,P)};var Oe=t(Ee);ya(Oe,{size:20}),e(Ee),e(je);var ot=s(je,2),et=t(ot);et.__click=()=>C(h,"general");var ft=t(et,!0);e(et);var it=s(et,2);it.__click=()=>C(h,"stats");var tt=t(it,!0);e(it);var gt=s(it,2);gt.__click=()=>C(h,"abilities");var ht=t(gt,!0);e(gt);var yt=s(gt,2);yt.__click=()=>C(h,"preview");var ce=t(yt,!0);e(yt),e(ot);var Se=s(ot,2),Ce=t(Se);{var re=P=>{var Te=mn(),at=t(Te),st=t(at);st.__click=()=>a(se)?.click();var Xe=t(st),jt=t(Xe);ts(jt,()=>a(n).imageUrl,be=>{Da(be,{get hash(){return a(n).imageUrl},get alt(){return a(n).name},size:"custom",fallbackText:"?"})}),e(Xe);var Et=s(Xe,2),It=t(Et);hs(It,{size:20,class:"text-white"}),e(Et),e(st);var Ve=s(st,2),L=t(Ve),T=t(L,!0);e(L);var H=s(L,2);zt(H),e(Ve),e(at);var pe=s(at,2),B=t(pe),W=t(B,!0);e(B);var ne=s(B,2);ha(ne),e(pe);var Qe=s(pe,2),ue=t(Qe);zt(ue);var de=s(ue,2),J=t(de);pa(J,{size:14});var De=s(J);e(de),e(Qe),e(Te),x((be,Pe,nt,lt)=>{i(T,be),i(W,Pe),ge(ne,"placeholder",nt),i(De,` ${lt??""}`)},[()=>l()("session.enemy_modal.name"),()=>l()("session.enemy_modal.description"),()=>l()("session.enemy_modal.description_placeholder"),()=>l()("session.enemy_modal.global_enemy")]),bt(H,()=>a(n).name,be=>a(n).name=be),bt(ne,()=>a(n).description,be=>a(n).description=be),vs(ue,()=>a(n).global,be=>a(n).global=be),d(P,Te)},ae=P=>{var Te=St(),at=Be(Te);{var st=jt=>{var Et=gn(),It=t(Et),Ve=t(It),L=t(Ve),T=t(L,!0);e(L);var H=s(L,2);{let ct=F(()=>a(n).difficulty??1);Ms(H,{get value(){return a(ct)},onUpdate:Ut=>a(n).difficulty=Ut,steps:[1,2,4,8,16,32,64,128]})}e(Ve);var pe=s(Ve,2),B=t(pe),W=t(B,!0);e(B);var ne=s(B,2);{let ct=F(()=>a(n).size||1);ys(ne,{get value(){return a(ct)},onUpdate:Ut=>a(n).size=Ut})}e(pe),e(It);var Qe=s(It,2),ue=t(Qe),de=t(ue),J=t(de,!0);e(de);var De=s(de);zt(De),e(ue);var be=s(ue,2),Pe=t(be),nt=t(Pe,!0);e(Pe);var lt=s(Pe);zt(lt),e(be),e(Qe);var dt=s(Qe,2),Pt=t(dt),Dt=t(Pt),Vt=t(Dt,!0);e(Dt);var Tt=s(Dt);zt(Tt),e(Pt);var f=s(Pt,2),b=t(f),z=t(b,!0);e(b);var k=s(b);zt(k),e(f),e(dt);var we=s(dt,2),He=t(we),Ke=t(He,!0);e(He);var Ye=s(He,2);We(Ye,20,()=>["str","agi","int","wil"],Ct,(ct,Ut)=>{var ia=pn(),o=t(ia),v=t(o,!0);e(o);var c=s(o,2);zt(c);var p=s(c,2),$=t(p);e(p),e(ia),x(m=>{ge(o,"for",`attr-${Ut??""}`),i(v,m),ge(c,"id",`attr-${Ut??""}`),qe(p,1,`text-xs font-bold ${a(n).stats[Ut]-10>=0?"text-green-500":"text-red-500"}`),i($,`${a(n).stats[Ut]-10>=0?"+":""}${a(n).stats[Ut]-10}`)},[()=>l()("sofww.attributes."+Ut).substring(0,3)]),bt(c,()=>a(n).stats[Ut],m=>a(n).stats[Ut]=m),d(ct,ia)}),e(Ye),e(we);var mt=s(we,2),pt=t(mt),Ht=t(pt),Rt=t(Ht,!0);e(Ht);var Bt=s(Ht);zt(Bt),e(pt);var Gt=s(pt,2),Xt=t(Gt),ta=t(Xt,!0);e(Xt);var Jt=s(Xt);zt(Jt),e(Gt);var Wt=s(Gt,2),Qt=t(Wt),ca=t(Qt,!0);e(Qt);var Zt=s(Qt);zt(Zt),e(Wt),e(mt),e(Et),x((ct,Ut,ia,o,v,c,p,$,m,y,g,X,R)=>{i(T,ct),i(W,Ut),i(J,ia),i(nt,o),i(Vt,v),i(z,c),i(Ke,p),i(Rt,$),ge(Bt,"placeholder",m),i(ta,y),ge(Jt,"placeholder",g),i(ca,X),ge(Zt,"placeholder",R)},[()=>l()("session.enemy_modal.difficulty"),()=>l()("session.enemy_modal.size"),()=>l()("session.enemy_modal.defense"),()=>l()("session.enemy_modal.health"),()=>l()("session.enemy_modal.damage"),()=>l()("session.enemy_modal.speed"),()=>l()("session.enemy_modal.main_attributes"),()=>l()("session.enemy_modal.senses"),()=>l()("session.enemy_modal.senses_placeholder"),()=>l()("session.enemy_modal.languages"),()=>l()("session.enemy_modal.languages_placeholder"),()=>l()("session.enemy_modal.immunities"),()=>l()("session.enemy_modal.immunities_placeholder")]),bt(De,()=>a(n).defense,ct=>a(n).defense=ct),bt(lt,()=>a(n).health,ct=>a(n).health=ct),bt(Tt,()=>a(n).damage,ct=>a(n).damage=ct),bt(k,()=>a(n).speed,ct=>a(n).speed=ct),bt(Bt,()=>a(n).senses,ct=>a(n).senses=ct),bt(Jt,()=>a(n).languages,ct=>a(n).languages=ct),bt(Zt,()=>a(n).immune,ct=>a(n).immune=ct),d(jt,Et)},Xe=jt=>{var Et=St(),It=Be(Et);{var Ve=T=>{var H=wn();We(H,20,()=>[{key:"traits",label:"traits",color:"text-indigo-400",border:"border-indigo-500/30"},{key:"actions",label:"actions",color:"text-red-400",border:"border-red-500/30"},{key:"reactions",label:"reactions",color:"text-orange-400",border:"border-orange-500/30"},{key:"endOfRound",label:"end_of_round",color:"text-yellow-400",border:"border-yellow-500/30"}],Ct,(pe,B)=>{var W=yn(),ne=t(W),Qe=t(ne),ue=t(Qe,!0);e(Qe),e(ne);var de=s(ne,2),J=t(de);We(J,17,()=>a(n)[B.key],Ct,(lt,dt,Pt)=>{var Dt=hn(),Vt=t(Dt),Tt=t(Vt);zt(Tt);var f=s(Tt,2);ha(f),e(Vt);var b=s(Vt,2);b.__click=()=>ee(B.key,Pt);var z=t(b);ua(z,{size:16}),e(b),e(Dt),x((k,we)=>{ge(Tt,"placeholder",k),ge(f,"placeholder",we)},[()=>l()("session.enemy_modal.name_placeholder"),()=>l()("session.enemy_modal.desc_placeholder")]),bt(Tt,()=>a(dt).name,k=>a(dt).name=k),bt(f,()=>a(dt).desc,k=>a(dt).desc=k),d(lt,Dt)});var De=s(J,2);De.__click=()=>M(B.key);var be=t(De),Pe=t(be);ra(Pe,{size:16}),e(be);var nt=s(be);e(De),e(de),e(W),x((lt,dt)=>{qe(W,1,`p-4 bg-slate-900 rounded border ${B.border??""}`),qe(Qe,1,`font-bold text-sm uppercase ${B.color??""}`),i(ue,lt),i(nt,` ${dt??""}`)},[()=>l()("session.enemy_modal."+B.label),()=>l()("common.buttons.add")]),d(pe,W)}),e(H),d(T,H)},L=T=>{var H=St(),pe=Be(H);{var B=W=>{var ne=kn(),Qe=t(ne);_(Qe),e(ne),d(W,ne)};w(pe,W=>{a(h)==="preview"&&W(B)},!0)}d(T,H)};w(It,T=>{a(h)==="abilities"?T(Ve):T(L,!1)},!0)}d(jt,Et)};w(at,jt=>{a(h)==="stats"?jt(st):jt(Xe,!1)},!0)}d(P,Te)};w(Ce,P=>{a(h)==="general"?P(re):P(ae,!1)})}e(Se);var oe=s(Se,2),ye=t(oe);ye.__click=()=>r.onSave(a(n));var Ie=t(ye);as(Ie,{size:18});var Me=s(Ie);e(ye),e(oe),e(ve);var Ue=s(ve,2),Ae=t(Ue),Ge=t(Ae),Ze=t(Ge);es(Ze,{size:14});var Mt=s(Ze);e(Ge),e(Ae);var wt=s(Ae,2),At=t(wt);_(At),e(wt),e(Ue),e(ze),e(fe);var O=s(fe,2);O.__change=he,zs(O,P=>C(se,P),()=>a(se));var q=s(O,2);ps(q,{get isOpen(){return a(N)},get imageUrl(){return a(le)},onClose:()=>C(N,!1),onCrop:A}),x((P,Te,at,st,Xe,jt,Et,It)=>{ge(fe,"aria-label",P),i(_e,Te),qe(et,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="general"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(ft,at),qe(it,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="stats"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(tt,st),qe(gt,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="abilities"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(ht,Xe),qe(yt,1,`lg:hidden flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="preview"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(ce,jt),i(Me,` ${Et??""}`),i(Mt,` ${It??""}`)},[()=>l()("session.enemy_modal.close"),()=>l()("session.enemy_modal.title"),()=>l()("session.enemy_modal.tab_general"),()=>l()("session.enemy_modal.tab_stats"),()=>l()("session.enemy_modal.tab_abilities"),()=>l()("session.enemy_modal.preview"),()=>l()("common.buttons.save"),()=>l()("session.enemy_modal.preview")]),Ta(3,ze,()=>Ua,()=>({y:20,duration:300})),Ta(3,fe,()=>Ua,()=>({duration:200,opacity:1})),d(ie,ke)};w(Je,ie=>{j()&&ie(Ot)})}d(U,vt),oa(),E()}ba(["click","change"]);var jn=u('<div class="flex justify-between items-center bg-slate-800 p-2 rounded border border-slate-700"><div class="flex-1"><div class="text-sm font-bold text-white"> </div> <div class="text-[10px] text-slate-400"> </div></div> <div class="flex items-center gap-2"><input type="number" min="1" class="w-12 bg-slate-900 border border-slate-600 rounded text-center text-white"/> <button class="text-red-400 hover:text-red-300"><!></button></div></div>'),On=u('<div class="text-center text-slate-600 italic text-sm py-4"> </div>'),Mn=u('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 hover:border-indigo-500/30 transition-colors"><div><div class="text-sm font-bold text-white max-w-[120px] truncate"> </div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-indigo-400 hover:text-white p-1 bg-slate-900 rounded border border-slate-800"><!></button></div>'),En=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-2xl p-6 border border-slate-700 shadow-2xl flex flex-col max-h-[90vh]" role="dialog" aria-modal="true" aria-labelledby="encounter-modal-title"><div class="flex justify-between items-center mb-6"><h3 id="encounter-modal-title" class="text-xl font-bold text-white"> </h3> <button class="text-slate-400 hover:text-white"><!></button></div> <div class="space-y-4 mb-6"><div><label for="encounter-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="encounter-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white outline-hidden focus:border-indigo-500"/></div></div> <div class="flex-1 flex gap-4 min-h-0"><div class="flex-1 bg-slate-900 border border-slate-800 rounded-lg p-3 flex flex-col"><h4 class="text-xs text-slate-500 uppercase font-bold mb-2"> </h4> <div class="flex-1 overflow-y-auto space-y-2 custom-scrollbar"><!> <!></div></div> <div class="flex-1 bg-slate-900 border border-slate-800 rounded-lg p-3 flex flex-col"><h4 class="text-xs text-slate-500 uppercase font-bold mb-2"> </h4> <div class="flex-1 overflow-y-auto space-y-2 custom-scrollbar"></div></div></div> <div class="flex gap-3 mt-6 pt-4 border-t border-slate-700"><button class="flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded font-bold"> </button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-2 rounded font-bold flex items-center justify-center gap-2"><!> </button></div></div></div>');function Sn(U,r){la(r,!0);const l=()=>Ft(aa,"$t",E),Z=()=>Ft(Ka,"$liveEnemies",E),[E,_]=va();let j=sa(r,"isOpen",3,!1),D=sa(r,"initialData",3,"{}"),n=_t(ga({name:"",enemies:[]}));Ha(()=>{if(j()&&D())try{const M=JSON.parse(D());C(n,{name:M.name||"",enemies:M.enemies||[]},!0)}catch{C(n,{name:"",enemies:[]},!0)}});function h(M){a(n).enemies.find(te=>te.enemyId===M)?a(n).enemies=a(n).enemies.map(te=>te.enemyId===M?{...te,count:te.count+1}:te):a(n).enemies=[...a(n).enemies,{enemyId:M,count:1}]}function N(M){a(n).enemies=a(n).enemies.filter((ee,te)=>te!==M)}function le(M,ee){const te=Math.max(1,parseInt(ee)||1);a(n).enemies[M].count=te}function se(M){}var he=St(),A=Be(he);{var S=M=>{var ee=En();ee.__click=se;var te=t(ee),vt=t(te),Je=t(vt),Ot=t(Je,!0);e(Je);var ie=s(Je,2);ie.__click=function(...ae){r.onClose?.apply(this,ae)};var ke=t(ie);ya(ke,{size:20}),e(ie),e(vt);var fe=s(vt,2),ze=t(fe),ve=t(ze),je=t(ve,!0);e(ve);var Le=s(ve,2);zt(Le),e(ze),e(fe);var me=s(fe,2),I=t(me),Y=t(I),_e=t(Y,!0);e(Y);var Ee=s(Y,2),Oe=t(Ee);We(Oe,17,()=>a(n).enemies,Ct,(ae,oe,ye)=>{const Ie=F(()=>Z().find(P=>P.id===a(oe).enemyId));var Me=jn(),Ue=t(Me),Ae=t(Ue),Ge=t(Ae,!0);e(Ae);var Ze=s(Ae,2),Mt=t(Ze);e(Ze),e(Ue);var wt=s(Ue,2),At=t(wt);zt(At),At.__input=P=>le(ye,P.target.value);var O=s(At,2);O.__click=()=>N(ye);var q=t(O);ua(q,{size:16}),e(O),e(wt),e(Me),x(P=>{i(Ge,P),i(Mt,`Dif ${(a(Ie)?a(Ie).difficulty:"?")??""}`),Qa(At,a(oe).count)},[()=>a(Ie)?a(Ie).name:l()("session.encounter_modal.unknown")]),d(ae,Me)});var ot=s(Oe,2);{var et=ae=>{var oe=On(),ye=t(oe,!0);e(oe),x(Ie=>i(ye,Ie),[()=>l()("session.encounter_modal.none_added")]),d(ae,oe)};w(ot,ae=>{a(n).enemies.length===0&&ae(et)})}e(Ee),e(I);var ft=s(I,2),it=t(ft),tt=t(it,!0);e(it);var gt=s(it,2);We(gt,5,Z,ae=>ae.id,(ae,oe)=>{var ye=Mn(),Ie=t(ye),Me=t(Ie),Ue=t(Me,!0);e(Me);var Ae=s(Me,2),Ge=t(Ae);e(Ae),e(Ie);var Ze=s(Ie,2);Ze.__click=()=>h(a(oe).id);var Mt=t(Ze);ra(Mt,{size:16}),e(Ze),e(ye),x(()=>{i(Ue,a(oe).name),i(Ge,`Dif ${a(oe).difficulty??""}`)}),d(ae,ye)}),e(gt),e(ft),e(me);var ht=s(me,2),yt=t(ht);yt.__click=function(...ae){r.onClose?.apply(this,ae)};var ce=t(yt,!0);e(yt);var Se=s(yt,2);Se.__click=()=>r.onSave(a(n));var Ce=t(Se);as(Ce,{size:18});var re=s(Ce);e(Se),e(ht),e(te),e(ee),x((ae,oe,ye,Ie,Me,Ue,Ae,Ge)=>{ge(ee,"aria-label",ae),i(Ot,oe),i(je,ye),ge(Le,"placeholder",Ie),i(_e,Me),i(tt,Ue),i(ce,Ae),i(re,` ${Ge??""}`)},[()=>l()("session.encounter_modal.close"),()=>l()("session.encounter_modal.title"),()=>l()("session.encounter_modal.name"),()=>l()("session.encounter_modal.name_placeholder"),()=>l()("session.encounter_modal.enemies_in_encounter"),()=>l()("session.encounter_modal.add_enemies"),()=>l()("common.buttons.cancel"),()=>l()("session.encounter_modal.save_encounter")]),bt(Le,()=>a(n).name,ae=>a(n).name=ae),d(M,ee)};w(A,M=>{j()&&M(S)})}d(U,he),oa(),_()}ba(["click","input"]);var In=u('<div class="text-[10px] text-slate-400 flex items-center gap-1.5 bg-slate-950 p-1 px-1.5 rounded-lg border border-slate-800/50"><span class="text-indigo-400 font-black"> </span> <span class="font-medium truncate max-w-[80px]"> </span></div>'),Dn=u('<div class="text-[10px] text-slate-600 italic"> </div>'),Rn=u('<div class="bg-slate-900 border border-slate-800 rounded-2xl p-4 transition-all hover:border-indigo-500/30 group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10" role="region"><div class="flex-1"><div class="flex items-center gap-2 mb-2"><div class="font-bold text-white text-base group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate"> </div> <!></div> <div class="flex flex-wrap gap-1"><!> <!></div></div> <div class="flex gap-2 mt-3 pt-3 border-t border-slate-800/50"><button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-1.5 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition-all active:scale-95 shadow-lg shadow-indigo-900/20"><!> </button> <button class="p-1.5 text-slate-400 hover:text-white bg-slate-800/50 rounded-lg border border-slate-800 transition-all" title="Editar"><!></button> <button class="p-1.5 text-slate-400 hover:text-red-400 bg-slate-800/50 rounded-lg border border-slate-800 hover:border-red-900/30 transition-all"><!></button></div></div>'),Nn=u('<button class="text-[10px] font-bold text-indigo-400 hover:text-indigo-300 mt-1 uppercase tracking-wider"> </button>'),$n=u('<div class="mb-4 flex-1"><p> </p> <!></div>'),An=u('<div class="mb-4 flex-1 text-[10px] text-slate-600 italic"> </div>'),Tn=u('<div class="bg-slate-900 border border-slate-800 rounded-2xl p-5 hover:border-indigo-500/30 transition-all relative group cursor-move hover:shadow-lg hover:shadow-indigo-500/10 active:scale-[0.98] flex flex-col" draggable="true" role="listitem"><div class="flex justify-between items-start mb-3"><div class="flex items-center gap-2"><h3 class="font-bold text-lg text-white group-hover:text-indigo-400 transition-colors"> </h3> <!></div> <span class="text-[10px] font-black bg-indigo-500/10 text-indigo-400 border border-indigo-400/20 px-2 py-1 rounded-lg uppercase"> </span></div> <!> <div class="mt-auto flex gap-2 pt-4 border-t border-slate-800/50"><button class="flex-1 bg-slate-800/50 hover:bg-slate-800 text-white py-2 rounded-xl text-xs font-bold border border-slate-800 transition-all"> </button> <button class="bg-slate-800/50 hover:bg-red-900/20 text-slate-500 hover:text-red-400 px-3 rounded-xl border border-slate-800 hover:border-red-900/30 transition-all"><!></button></div></div>'),Un=u('<div class="text-center text-slate-500 italic col-span-3"> </div>'),Pn=u('<div><div class="mb-12"><div class="flex justify-between items-center mb-6"><h3 class="text-sm font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2"><!> </h3></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><button class="min-h-[120px] border-2 border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-400 transition-all hover:bg-indigo-500/5 gap-2 group"><!> <span class="font-bold text-sm"> </span></button> <!></div></div> <div class="mb-6"><h3 class="text-sm font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2 mb-6"><!> </h3></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><button class="min-h-[180px] border-2 border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-400 transition-all hover:bg-indigo-500/5 gap-2 group"><!> <span class="font-bold text-sm"> </span></button> <!> <!></div> <!> <!> <!></div>');function Hn(U,r){la(r,!0);const l=()=>Ft(Ka,"$liveEnemies",_),Z=()=>Ft(us,"$liveEncounters",_),E=()=>Ft(aa,"$t",_),[_,j]=va();let D=_t(!1),n=_t(null),h=_t("{}"),N=_t(!1),le=_t(null),se=_t("{}"),he=_t(ga({isOpen:!1,title:"",message:"",onConfirm:()=>{}}));function A(){return{name:"",difficulty:1,defense:10,health:10,damage:0,size:1,speed:10,description:"",senses:"",languages:"",immune:"",stats:{str:10,agi:10,int:10,wil:10},traits:[],actions:[],reactions:[],endOfRound:[]}}function S(O=null){C(n,O?O.id:null,!0),O?C(h,JSON.stringify(O),!0):a(je)==="sofdl"?C(h,"{}"):C(h,JSON.stringify(A()),!0),C(D,!0)}let M=ga(new Set);function ee(O){M.has(O)?M.delete(O):M.add(O)}function te(O){const q=a(n)||Ia(),P=ea.get(r.campId);ns.set(q,{...O,id:q,campaignId:r.campId,system:P?.system||"sofww"}),C(D,!1)}function vt(O){const q=l().find(P=>P.id===O);C(he,{isOpen:!0,title:"Excluir Inimigo",message:`Tem certeza que deseja excluir permanentemente o inimigo "${q?.name||"este inimigo"}"?`,onConfirm:()=>{ns.delete(O),a(he).isOpen=!1}},!0)}function Je(O=null){C(le,O?O.id:null,!0),C(se,JSON.stringify(O||{name:"",enemies:[]}),!0),C(N,!0)}function Ot(O){const q=a(le)||Ia();Va.set(q,{...O,id:q,system:a(je)}),C(N,!1)}function ie(O){const q=Z().find(P=>P.id===O);C(he,{isOpen:!0,title:"Excluir Encontro",message:`Tem certeza que deseja excluir permanentemente o encontro "${q?.name||"este encontro"}"?`,onConfirm:()=>{Va.delete(O),a(he).isOpen=!1}},!0)}function ke(O){const q=ea.get(r.campId);if(!q)return;const P=q.activeEnemies||[];let Te=[];O.enemies.forEach(at=>{const st=l().find(Xe=>Xe.id===at.enemyId);if(st)for(let Xe=0;Xe<at.count;Xe++)Te.push({...st,instanceId:Ia(),damage:0,currentHealth:st.health,afflictions:[],acted:!1,initiative:!1})}),ea.set(r.campId,{...q,activeEnemies:[...P,...Te]})}function fe(O,q){O.dataTransfer.setData("text/plain",q.id),O.dataTransfer.effectAllowed="copy"}function ze(O){return O.preventDefault(),!1}function ve(O,q){O.preventDefault();const P=O.dataTransfer.getData("text/plain");if(!P)return;const Te=q.enemies||[],at=Te.find(Xe=>Xe.enemyId===P);let st;at?st=Te.map(Xe=>Xe.enemyId===P?{...Xe,count:Xe.count+1}:Xe):st=[...Te,{enemyId:P,count:1}],Va.set(q.id,{...q,enemies:st})}let je=F(()=>ea.get(r.campId)?.system||"sofww"),Le=F(()=>l().filter(O=>{const P=(O.system||"sofww")===a(je),Te=O.global===!0,at=O.campaignId===r.campId;return P&&(Te||at)})),me=F(()=>Z().filter(O=>{const P=(O.system||"sofww")===a(je),Te=O.global===!0,at=O.campaignId===r.campId;return P&&(Te||at)}));var I=Pn(),Y=t(I),_e=t(Y),Ee=t(_e),Oe=t(Ee);Xa(Oe,{size:16});var ot=s(Oe);e(Ee),e(_e);var et=s(_e,2),ft=t(et);ft.__click=()=>Je();var it=t(ft);ra(it,{size:28,class:"group-hover:scale-110 transition-transform"});var tt=s(it,2),gt=t(tt,!0);e(tt),e(ft);var ht=s(ft,2);We(ht,17,()=>a(me),O=>O.id,(O,q)=>{var P=Rn(),Te=t(P),at=t(Te),st=t(at),Xe=t(st,!0);e(st);var jt=s(st,2);{var Et=J=>{pa(J,{size:12,class:"text-indigo-400"})};w(jt,J=>{a(q).global&&J(Et)})}e(at);var It=s(at,2),Ve=t(It);We(Ve,17,()=>a(q).enemies||[],Ct,(J,De)=>{const be=F(()=>l().find(Dt=>Dt.id===a(De).enemyId));var Pe=In(),nt=t(Pe),lt=t(nt);e(nt);var dt=s(nt,2),Pt=t(dt,!0);e(dt),e(Pe),x(()=>{i(lt,`${a(De).count??""}x`),i(Pt,a(be)?a(be).name:"...")}),d(J,Pe)});var L=s(Ve,2);{var T=J=>{var De=Dn(),be=t(De,!0);e(De),x(Pe=>i(be,Pe),[()=>E()("session.bestiary.empty_encounter")]),d(J,De)};w(L,J=>{a(q).enemies?.length||J(T)})}e(It),e(Te);var H=s(Te,2),pe=t(H);pe.__click=()=>ke(a(q));var B=t(pe);Za(B,{size:12,fill:"currentColor"});var W=s(B);e(pe);var ne=s(pe,2);ne.__click=()=>Je(a(q));var Qe=t(ne);Ks(Qe,{size:14}),e(ne);var ue=s(ne,2);ue.__click=()=>ie(a(q).id);var de=t(ue);ua(de,{size:14}),e(ue),e(H),e(P),x(J=>{ge(P,"aria-label",`Encontro ${a(q).name??""}`),i(Xe,a(q).name),i(W,` ${J??""}`)},[()=>E()("session.bestiary.start")]),Ca("dragover",P,ze),Ca("drop",P,J=>ve(J,a(q))),d(O,P)}),e(et),e(Y);var yt=s(Y,2),ce=t(yt),Se=t(ce);za(Se,{size:16});var Ce=s(Se);e(ce),e(yt);var re=s(yt,2),ae=t(re);ae.__click=()=>S();var oe=t(ae);ra(oe,{size:32,class:"group-hover:scale-110 transition-transform"});var ye=s(oe,2),Ie=t(ye,!0);e(ye),e(ae);var Me=s(ae,2);We(Me,17,()=>a(Le),O=>O.id,(O,q)=>{var P=Tn(),Te=t(P),at=t(Te),st=t(at),Xe=t(st,!0);e(st);var jt=s(st,2);{var Et=ue=>{pa(ue,{size:14,class:"text-indigo-400"})};w(jt,ue=>{a(q).global&&ue(Et)})}e(at);var It=s(at,2),Ve=t(It);e(It),e(Te);var L=s(Te,2);{var T=ue=>{var de=$n(),J=t(de),De=t(J,!0);e(J);var be=s(J,2);{var Pe=nt=>{var lt=Nn();lt.__click=()=>ee(a(q).id);var dt=t(lt,!0);e(lt),x(Pt=>i(dt,Pt),[()=>M.has(a(q).id)?E()("session.bestiary.see_less"):E()("session.bestiary.see_more")]),d(nt,lt)};w(be,nt=>{a(q).description.length>120&&nt(Pe)})}e(de),x(nt=>{qe(J,1,`text-xs text-slate-400 leading-relaxed ${nt??""}`),i(De,a(q).description)},[()=>M.has(a(q).id)?"":"line-clamp-3"]),d(ue,de)},H=ue=>{var de=An(),J=t(de,!0);e(de),x(De=>i(J,De),[()=>E()("session.bestiary.no_description")]),d(ue,de)};w(L,ue=>{a(q).description?ue(T):ue(H,!1)})}var pe=s(L,2),B=t(pe);B.__click=()=>S(a(q));var W=t(B,!0);e(B);var ne=s(B,2);ne.__click=()=>vt(a(q).id);var Qe=t(ne);ua(Qe,{size:14}),e(ne),e(pe),e(P),x((ue,de)=>{i(Xe,a(q).name),i(Ve,`${ue??""} ${a(q).difficulty??""}`),i(W,de)},[()=>E()("session.bestiary.level"),()=>E()("common.buttons.edit")]),Ca("dragstart",P,ue=>fe(ue,a(q))),d(O,P)});var Ue=s(Me,2);{var Ae=O=>{var q=Un(),P=t(q,!0);e(q),x(Te=>i(P,Te),[()=>E()("session.bestiary.no_enemies")]),d(O,q)};w(Ue,O=>{a(Le).length===0&&O(Ae)})}e(re);var Ge=s(re,2);{var Ze=O=>{tn(O,{get isOpen(){return a(D)},get initialData(){return a(h)},onClose:()=>C(D,!1),onSave:te})},Mt=O=>{Cn(O,{get isOpen(){return a(D)},get initialData(){return a(h)},onClose:()=>C(D,!1),onSave:te})};w(Ge,O=>{a(je)==="sofdl"?O(Ze):O(Mt,!1)})}var wt=s(Ge,2);Sn(wt,{get isOpen(){return a(N)},get initialData(){return a(se)},onClose:()=>C(N,!1),onSave:Ot});var At=s(wt,2);cs(At,{get isOpen(){return a(he).isOpen},get title(){return a(he).title},get message(){return a(he).message},get onConfirm(){return a(he).onConfirm},onCancel:()=>a(he).isOpen=!1}),e(I),x((O,q,P,Te)=>{i(ot,` ${O??""}`),i(gt,q),i(Ce,` ${P??""}`),i(Ie,Te)},[()=>E()("session.bestiary.encounters_title"),()=>E()("session.bestiary.new_encounter"),()=>E()("session.bestiary.title"),()=>E()("session.bestiary.new_enemy")]),d(U,I),oa(),j()}ba(["click"]);var Ln=u('<div class="flex items-center gap-1 text-slate-400 ml-1"><!> <span class="text-xs"> </span></div>'),Fn=u('<div class="flex items-center gap-1 text-emerald-400"><!> <span class="text-xs font-bold hidden sm:block"> </span></div> <!>',1),qn=u('<div class="flex items-center gap-1 text-slate-500"><!> <span class="text-xs hidden sm:block"> </span></div>'),Bn=u('<span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border border-slate-900"></span></span>'),Wn=u('<header class="bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-40 shadow-2xl"><div class="max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-3"><div class="flex items-center justify-between gap-2 sm:gap-4"><div class="flex items-center gap-1 sm:gap-3 shrink-0"><button class="p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all flex items-center gap-1 group"><!> <!></button> <div class="flex flex-col"><h1 class="text-base sm:text-lg font-black text-white leading-tight truncate max-w-[140px] sm:max-w-none"> </h1> <span class="text-xs text-indigo-400 font-mono font-black uppercase tracking-wider"> </span></div></div> <div class="hidden md:flex bg-slate-950/50 p-1 rounded-xl border border-white/5"><button><!> <span class="hidden min-[400px]:block"> </span></button> <button><!> <span class="hidden min-[400px]:block"> </span></button></div> <div class="flex items-center gap-1 sm:gap-2"><div class="flex items-center gap-2 mr-2 border-r border-white/10 pr-2"><!></div> <button class="p-2 sm:p-2.5 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-all"><!></button> <button class="p-2 sm:p-2.5 bg-indigo-600/10 text-indigo-400 border border-indigo-400/20 rounded-lg hover:bg-indigo-600 hover:text-white transition-all relative"><!> <!></button></div></div></div></header>');function Jn(U,r){la(r,!0);const l=()=>Ft(aa,"$t",j),Z=()=>Ft(Ns,"$syncState",j),E=()=>Ft(ja,"$isHistoryOpen",j),_=()=>Ft($s,"$hasUnreadRolls",j),[j,D]=va();let n=sa(r,"campaignName",3,""),h=sa(r,"gmName",3,"Mestre"),N=sa(r,"activeSubTab",3,"session"),le=sa(r,"onTabChange",3,()=>{}),se=sa(r,"onOpenSettings",3,()=>{});var he=Wn(),A=t(he),S=t(A),M=t(S),ee=t(M);ee.__click=()=>ar(_s("/"));var te=t(ee);La(te,{size:20,class:"group-hover:-translate-x-0.5 transition-transform"});var vt=s(te,2);Vs(vt,{size:18,class:"hidden sm:block opacity-50"}),e(ee);var Je=s(ee,2),Ot=t(Je),ie=t(Ot,!0);e(Ot);var ke=s(Ot,2),fe=t(ke,!0);e(ke),e(Je),e(M);var ze=s(M,2),ve=t(ze);ve.__click=()=>le()("session");var je=t(ve);{let Ce=F(()=>N()==="session"?"opacity-100":"opacity-50");ws(je,{size:14,get class(){return a(Ce)}})}var Le=s(je,2),me=t(Le,!0);e(Le),e(ve);var I=s(ve,2);I.__click=()=>le()("bestiary");var Y=t(I);{let Ce=F(()=>N()==="bestiary"?"opacity-100":"opacity-50");Cs(Y,{size:14,get class(){return a(Ce)}})}var _e=s(Y,2),Ee=t(_e,!0);e(_e),e(I),e(ze);var Oe=s(ze,2),ot=t(Oe),et=t(ot);{var ft=Ce=>{var re=Fn(),ae=Be(re),oe=t(ae);xs(oe,{size:16});var ye=s(oe,2),Ie=t(ye,!0);e(ye),e(ae);var Me=s(ae,2);{var Ue=Ae=>{var Ge=Ln(),Ze=t(Ge);bs(Ze,{size:14});var Mt=s(Ze,2),wt=t(Mt,!0);e(Mt),e(Ge),x(At=>{ge(Ge,"title",At),i(wt,Z().peers.length)},[()=>l()("common.status.peers",{values:{count:Z().peers.length}})]),d(Ae,Ge)};w(Me,Ae=>{Z().peers.length>0&&Ae(Ue)})}x((Ae,Ge)=>{ge(ae,"title",Ae),i(Ie,Ge)},[()=>l()("common.status.connected"),()=>l()("common.status.connected")]),d(Ce,re)},it=Ce=>{var re=qn(),ae=t(re);sr(ae,{size:16});var oe=s(ae,2),ye=t(oe,!0);e(oe),e(re),x((Ie,Me)=>{ge(re,"title",Ie),i(ye,Me)},[()=>l()("common.status.offline"),()=>l()("common.status.offline")]),d(Ce,re)};w(et,Ce=>{Z().isConnected?Ce(ft):Ce(it,!1)})}e(ot);var tt=s(ot,2);tt.__click=function(...Ce){se()?.apply(this,Ce)};var gt=t(tt);er(gt,{size:20}),e(tt);var ht=s(tt,2);ht.__click=()=>ja.update(Ce=>!Ce);var yt=t(ht);Qs(yt,{size:20});var ce=s(yt,2);{var Se=Ce=>{var re=Bn();d(Ce,re)};w(ce,Ce=>{_()&&Ce(Se)})}e(ht),e(Oe),e(S),e(A),e(he),x((Ce,re,ae,oe,ye,Ie,Me,Ue)=>{ge(ee,"aria-label",Ce),ge(ee,"title",re),i(ie,n()),i(fe,h()),qe(ve,1,`flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-lg text-xs font-black transition-all ${N()==="session"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:text-slate-300"}`),ge(ve,"aria-pressed",N()==="session"),i(me,ae),qe(I,1,`flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-lg text-xs font-black transition-all ${N()==="bestiary"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:text-slate-300"}`),ge(I,"aria-pressed",N()==="bestiary"),i(Ee,oe),ge(tt,"aria-label",ye),ge(tt,"title",Ie),ge(ht,"aria-label",Me),ge(ht,"title",Ue),ge(ht,"aria-pressed",E())},[()=>l()("character.header.back_dashboard"),()=>l()("character.header.back_dashboard"),()=>l()("common.labels.session"),()=>l()("common.labels.bestiary"),()=>l()("common.buttons.settings"),()=>l()("common.buttons.settings"),()=>l()("character.header.history"),()=>l()("character.header.history")]),d(U,he),oa(),D()}ba(["click"]);var Gn=u('<!> <!> <main class="max-w-7xl mx-auto p-4 md:p-8 animate-in slide-in-from-bottom-4 duration-500"><!></main>',1),Vn=u('<div class="flex flex-col items-center justify-center min-h-screen p-4 text-center"><div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ghost"><path d="M9 10h.01"></path><path d="M15 10h.01"></path><path d="M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"></path></svg></div> <h1 class="text-2xl font-black text-white mb-2 uppercase tracking-tight"> </h1> <p class="text-slate-400 mb-8 max-w-md"> </p> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-xl font-bold transition-all flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><path d="m12 19-7-7 7-7"></path><path d="19 12H5"></path></svg> </button></div>'),Qn=u('<div class="flex items-center justify-center min-h-screen"><div class="relative w-16 h-16"><div class="absolute inset-0 border-4 border-indigo-500/20 rounded-full"></div> <div class="absolute inset-0 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div></div></div>'),Yn=u('<div class="fixed bottom-24 left-1/2 -translate-x-1/2 md:left-8 md:translate-x-0 z-[60] flex flex-col items-center gap-2"><div class="bg-slate-900/95 backdrop-blur-md border border-white/10 rounded-2xl p-2 flex items-center gap-2 shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 duration-200"><button class="bg-indigo-600/20 hover:bg-indigo-600 text-indigo-400 hover:text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-indigo-500/20"><span class="text-[10px] opacity-70">d20</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">1d6</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">2d6</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">3d6</span> <!></button> <div class="w-px h-8 bg-white/10 mx-1"></div> <button class="w-10 h-10 flex items-center justify-center text-slate-500 hover:text-white transition-colors"><!></button></div></div>  <div class="fixed inset-0 bg-black/40 z-[55]"></div>',1),Zn=u('<div class="min-h-screen bg-slate-950 text-slate-100 font-sans pb-20"><!> <!> <!> <div class="hidden md:block fixed bottom-8 left-8 z-[60]"><button class="w-16 h-16 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full shadow-[0_0_20px_rgba(79,70,229,0.4)] flex items-center justify-center transition-all active:scale-90 border-2 border-white/10 group"><!></button></div> <nav class="md:hidden fixed bottom-0 left-0 right-0 z-50 px-4 pb-6 pt-2 pointer-events-none"><div class="max-w-md mx-auto relative h-16 pointer-events-auto"><div class="absolute inset-0 bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden"><div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-indigo-500/30 to-transparent"></div></div> <div class="relative h-full flex items-center justify-around px-2"><button><!> <span class="text-[9px] font-black uppercase tracking-widest leading-none"> </span></button> <div class="relative w-16 h-16 -mt-10 flex items-center justify-center"><div class="absolute inset-0 bg-indigo-600/20 rounded-full blur-xl animate-pulse"></div> <button class="relative w-14 h-14 bg-indigo-600 rounded-full flex items-center justify-center shadow-[0_0_20px_rgba(79,70,229,0.5)] border-4 border-slate-900 transition-all active:scale-90 hover:bg-indigo-500 z-10"><!></button></div> <button><!> <span class="text-[9px] font-black uppercase tracking-widest leading-none"> </span></button></div></div></nav> <!></div>');function pl(U,r){la(r,!0);const l=()=>Ft(Is,"$page",j),Z=()=>Ft(Hs,"$liveCampaigns",j),E=()=>Ft(aa,"$t",j),_=()=>Ft(ja,"$isHistoryOpen",j),[j,D]=va();let n=_t("session"),h=_t(!1),N=F(()=>l().params.id),le=F(()=>Z().find(ce=>ce.id===a(N))),se=F(()=>!!a(le));function he(ce){if(!a(N)||!a(le))return;const Se={...a(le),...ce};ea.set(a(N),Se),Ya(a(N),{name:Se.name,gmName:Se.gmName}),C(h,!1)}let A=_t(!1),S=_t(ga({isOpen:!1,sides:20,count:1,modifier:0}));function M(ce,Se=1){C(S,{isOpen:!0,sides:ce,count:Se,modifier:0},!0)}function ee(ce,Se=[],Ce){if(!a(le))return;const re=Hr(a(S).sides,a(S).count,ce);let ae="";a(S).count>1&&(ae+=`Dados: [${re.results.join(", ")}] `),re.bonusRolls?.length>0&&(ae+=`Bonus Rolls: [${re.bonusRolls.join(", ")}] -> ${Math.abs(re.modifierTotal)}`);const oe=a(le).gmName||Aa(aa)("common.labels.master"),ye=()=>{As.addToHistory({source:"GM",charName:oe,name:`${a(S).count}d${a(S).sides} ${ce?ce>0?`+${ce}`:ce:""}`,description:ae.trim()||null,total:re.total,formula:re.formula,crit:re.crit}),Aa(Ts).autoOpenHistory?ja.set(!0):Es(async()=>{const{hasUnreadRolls:Ue}=await import("../chunks/CQsRno8O.js").then(Ae=>Ae.a6);return{hasUnreadRolls:Ue}},__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(({hasUnreadRolls:Ue})=>{Ue.set(!0)})};Ce?.suppressHistory||(ye(),a(S).isOpen=!1);const Ie=a(S).sides===20&&a(S).count===1;return{d20:Ie?re.results[0]:void 0,boonBaneDice:Ie?re.bonusRolls:[],damageDice:Ie?[]:re.results,total:re.total,formula:re.formula,commit:ye}}var te=Zn(),vt=t(te);{var Je=ce=>{var Se=Gn(),Ce=Be(Se);Jn(Ce,{get campaignName(){return a(le).name},get gmName(){return a(le).gmName},get activeSubTab(){return a(n)},onTabChange:Me=>C(n,Me,!0),onOpenSettings:()=>C(h,!0)});var re=s(Ce,2);{let Me=F(()=>JSON.stringify(a(le)));tr(re,{get isOpen(){return a(h)},get initialData(){return a(Me)},onClose:()=>C(h,!1),onSave:he})}var ae=s(re,2),oe=t(ae);{var ye=Me=>{Mi(Me,{get campaign(){return a(le)}})},Ie=Me=>{var Ue=St(),Ae=Be(Ue);{var Ge=Ze=>{Hn(Ze,{get campId(){return a(N)}})};w(Ae,Ze=>{a(n)==="bestiary"&&Ze(Ge)},!0)}d(Me,Ue)};w(oe,Me=>{a(n)==="session"?Me(ye):Me(Ie,!1)})}e(ae),d(ce,Se)},Ot=ce=>{var Se=St(),Ce=Be(Se);{var re=oe=>{var ye=Vn(),Ie=s(t(ye),2),Me=t(Ie,!0);e(Ie);var Ue=s(Ie,2),Ae=t(Ue,!0);e(Ue);var Ge=s(Ue,2);Ge.__click=()=>window.history.back();var Ze=s(t(Ge));e(Ge),e(ye),x((Mt,wt,At)=>{i(Me,Mt),i(Ae,wt),i(Ze,` ${At??""}`)},[()=>E()("campaign.not_found.title"),()=>E()("campaign.not_found.message"),()=>E()("common.buttons.back")]),d(oe,ye)},ae=oe=>{var ye=Qn();d(oe,ye)};w(Ce,oe=>{a(se)&&!a(le)?oe(re):oe(ae,!1)},!0)}d(ce,Se)};w(vt,ce=>{a(se)&&a(le)?ce(Je):ce(Ot,!1)})}var ie=s(vt,2);ms(ie,{get isOpen(){return _()},onClose:()=>ja.set(!1)});var ke=s(ie,2);{var fe=ce=>{var Se=Yn(),Ce=Be(Se),re=t(Ce),ae=t(re);ae.__click=()=>{M(20),C(A,!1)};var oe=s(t(ae),2);Ma(oe,{size:16}),e(ae);var ye=s(ae,2);ye.__click=()=>{M(6),C(A,!1)};var Ie=s(t(ye),2);Ma(Ie,{size:16}),e(ye);var Me=s(ye,2);Me.__click=()=>{M(6,2),C(A,!1)};var Ue=s(t(Me),2);Ma(Ue,{size:16}),e(Me);var Ae=s(Me,2);Ae.__click=()=>{M(6,3),C(A,!1)};var Ge=s(t(Ae),2);Ma(Ge,{size:16}),e(Ae);var Ze=s(Ae,4);Ze.__click=()=>C(A,!1);var Mt=t(Ze);ya(Mt,{size:20}),e(Ze),e(re),e(Ce);var wt=s(Ce,2);wt.__click=()=>C(A,!1),d(ce,Se)};w(ke,ce=>{a(A)&&ce(fe)})}var ze=s(ke,2),ve=t(ze);ve.__click=()=>C(A,!a(A));var je=t(ve);Ma(je,{size:32,class:"group-hover:rotate-12 transition-transform"}),e(ve),e(ze);var Le=s(ze,2),me=t(Le),I=s(t(me),2),Y=t(I);Y.__click=()=>{C(n,"session"),C(A,!1)};var _e=t(Y);{let ce=F(()=>a(n)==="session"?"animate-in zoom-in-75 duration-300":"");ws(_e,{size:20,get class(){return a(ce)}})}var Ee=s(_e,2),Oe=t(Ee,!0);e(Ee),e(Y);var ot=s(Y,2),et=s(t(ot),2);et.__click=()=>C(A,!a(A));var ft=t(et);{let ce=F(()=>a(A)?"rotate-90":"rotate-0");Ma(ft,{size:28,get class(){return`text-white ${a(ce)??""} transition-transform duration-300`}})}e(et),e(ot);var it=s(ot,2);it.__click=()=>{C(n,"bestiary"),C(A,!1)};var tt=t(it);{let ce=F(()=>a(n)==="bestiary"?"animate-in zoom-in-75 duration-300":"");Cs(tt,{size:20,get class(){return a(ce)}})}var gt=s(tt,2),ht=t(gt,!0);e(gt),e(it),e(I),e(me),e(Le);var yt=s(Le,2);{let ce=F(()=>`${E()("session.quick.roll_title")} (${a(S).count}d${a(S).sides})`),Se=F(()=>a(S).sides===20?E()("session.quick.boons_banes"):E()("session.quick.fixed_modifier"));Ys(yt,{get isOpen(){return a(S).isOpen},get title(){return a(ce)},get label(){return a(Se)},onClose:()=>a(S).isOpen=!1,onRoll:ee,initialModifier:0})}e(te),x((ce,Se,Ce,re)=>{ge(ve,"title",ce),qe(Y,1,`flex flex-col items-center justify-center gap-1 flex-1 transition-all ${a(n)==="session"?"text-indigo-400":"text-slate-500 hover:text-slate-300"}`),i(Oe,Se),ge(et,"aria-label",Ce),qe(it,1,`flex flex-col items-center justify-center gap-1 flex-1 transition-all ${a(n)==="bestiary"?"text-indigo-400":"text-slate-500 hover:text-slate-300"}`),i(ht,re)},[()=>E()("session.quick.fab_title"),()=>E()("session.tabs.session"),()=>E()("session.quick.roll_dice"),()=>E()("session.tabs.bestiary")]),d(U,te),oa(),D()}ba(["click"]);export{pl as component};
