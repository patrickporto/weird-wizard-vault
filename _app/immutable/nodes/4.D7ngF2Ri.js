import"../chunks/DsnmJJEf.js";import{B as mt,o as Ue,k as l,p as $a,v as za,j as v,q as t,x as a,u as s,z as ce,A as e,t as b,O as fs,w as z,y as Ye,n as wa,a2 as ka,at as Da}from"../chunks/CeF9Pysg.js";import{d as Ca,s as r,o as Ns,g as Os,e as zs}from"../chunks/s5ZUjNrT.js";import{l as _a,s as pa,i as h,p as ta}from"../chunks/BO4Hk4Jc.js";import{e as Pe,s as qe,i as lt,$ as da,r as it,a as ee,h as js,g as vr,j as cr}from"../chunks/L5xVHH7A.js";import{a as Oa,s as Ct}from"../chunks/BuEkqW-1.js";import{p as ur}from"../chunks/drJbZwRK.js";import{d as As,m as xs,j as br,c as Ds,e as Vt,n as Es,o as _r,q as Ta,t as ps,u as ds,b as Fe,f as Ts,g as Cs,v as pr,x as xr,y as mr}from"../chunks/L5XIwOaa.js";import{C as Ls,b as Ms,c as Fs,D as Ps,l as fr,a as gr}from"../chunks/Dm27bT0m.js";import{b as hr}from"../chunks/DzIHbexc.js";import{U as qs,C as Us,W as Bs,r as Ws}from"../chunks/B5FQpkHj.js";import{A as yr,a as wr,b as vs,B as kr,T as $r,E as Rs,M as zr,G as ms,H as Js,C as Vs,R as Cr,c as Or,I as Gs,s as Qs,d as Zs,L as jr,S as Xs,e as Er,D as Va,f as Mr}from"../chunks/B7SN8OgA.js";import{k as Is}from"../chunks/53slW3xx.js";import{M as Rr,X as Pa,P as la,a as Hs,c as Ir,T as ba,b as Sr}from"../chunks/B9mfT_8k.js";import{C as Ys,G as Nr,P as Ks,S as Ar,a as Dr}from"../chunks/BoL_JTMr.js";import"../chunks/C3FPqVk7.js";import{I as xa,s as ma}from"../chunks/axHpSoOd.js";import{b as er}from"../chunks/CWVXqVlC.js";import{g as Tr}from"../chunks/C_uWmv0p.js";import{W as Pr}from"../chunks/7Z-uDSBK.js";function Ur(P,o){const i=_a(o,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m6 9 6 6 6-6"}]];xa(P,pa({name:"chevron-down"},()=>i,{get iconNode(){return p},children:(I,se)=>{var A=mt(),n=Ue(A);ma(n,o,"default",{}),l(I,A)},$$slots:{default:!0}}))}function Hr(P,o){const i=_a(o,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m18 15-6-6-6 6"}]];xa(P,pa({name:"chevron-up"},()=>i,{get iconNode(){return p},children:(I,se)=>{var A=mt(),n=Ue(A);ma(n,o,"default",{}),l(I,A)},$$slots:{default:!0}}))}function Lr(P,o){const i=_a(o,["children","$$slots","$$events","$$legacy"]);const p=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];xa(P,pa({name:"copy"},()=>i,{get iconNode(){return p},children:(I,se)=>{var A=mt(),n=Ue(A);ma(n,o,"default",{}),l(I,A)},$$slots:{default:!0}}))}function Fr(P,o){const i=_a(o,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4"}]];xa(P,pa({name:"flame"},()=>i,{get iconNode(){return p},children:(I,se)=>{var A=mt(),n=Ue(A);ma(n,o,"default",{}),l(I,A)},$$slots:{default:!0}}))}function qr(P,o){const i=_a(o,["children","$$slots","$$events","$$legacy"]);const p=[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]];xa(P,pa({name:"grip-vertical"},()=>i,{get iconNode(){return p},children:(I,se)=>{var A=mt(),n=Ue(A);ma(n,o,"default",{}),l(I,A)},$$slots:{default:!0}}))}function tr(P,o){const i=_a(o,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"}]];xa(P,pa({name:"layers"},()=>i,{get iconNode(){return p},children:(I,se)=>{var A=mt(),n=Ue(A);ma(n,o,"default",{}),l(I,A)},$$slots:{default:!0}}))}function ar(P,o){const i=_a(o,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m16 6 4 14"}],["path",{d:"M12 6v14"}],["path",{d:"M8 8v12"}],["path",{d:"M4 4v16"}]];xa(P,pa({name:"library"},()=>i,{get iconNode(){return p},children:(I,se)=>{var A=mt(),n=Ue(A);ma(n,o,"default",{}),l(I,A)},$$slots:{default:!0}}))}function Br(P,o){const i=_a(o,["children","$$slots","$$events","$$legacy"]);const p=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}],["path",{d:"M21 21v.01"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}],["path",{d:"M3 12h.01"}],["path",{d:"M12 3h.01"}],["path",{d:"M12 16v.01"}],["path",{d:"M16 12h1"}],["path",{d:"M21 12v.01"}],["path",{d:"M12 21v-1"}]];xa(P,pa({name:"qr-code"},()=>i,{get iconNode(){return p},children:(I,se)=>{var A=mt(),n=Ue(A);ma(n,o,"default",{}),l(I,A)},$$slots:{default:!0}}))}function Ss(P,o){const i=_a(o,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];xa(P,pa({name:"save"},()=>i,{get iconNode(){return p},children:(I,se)=>{var A=mt(),n=Ue(A);ma(n,o,"default",{}),l(I,A)},$$slots:{default:!0}}))}function sr(P,o){const i=_a(o,["children","$$slots","$$events","$$legacy"]);const p=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21"}]];xa(P,pa({name:"swords"},()=>i,{get iconNode(){return p},children:(I,se)=>{var A=mt(),n=Ue(A);ma(n,o,"default",{}),l(I,A)},$$slots:{default:!0}}))}function Wr(P){let o=!1;return document.body&&(document.body.appendChild(P),o=!0),{destroy(){o&&P.parentNode&&P.parentNode.removeChild(P)}}}var Jr=v("<button> <!></button>"),Vr=v('<p class="text-xs text-slate-600 italic"> </p>'),Gr=v('<div class="text-xs leading-tight"><span class="text-red-400 font-bold"> </span> <span class="text-slate-400"> </span></div>'),Qr=v('<div class="space-y-1"></div>'),Zr=v('<div class="grid grid-cols-2 gap-2 max-h-[60vh] overflow-y-auto custom-scrollbar p-1"></div> <div class="mt-4 pt-3 border-t border-slate-800 flex flex-col gap-2"><div class="p-3 bg-slate-900/50 rounded-lg border border-slate-700/50 min-h-[60px]"><p class="text-[10px] text-slate-500 uppercase font-bold mb-1"> </p> <!></div> <div class="flex justify-end mt-2"><button class="bg-indigo-600 text-white px-4 py-2 rounded-xl font-bold text-sm shadow hover:bg-indigo-500 transition-colors w-full sm:w-auto"> </button></div></div>',1),Xr=v("<div><!></div>");function Yr(P,o){$a(o,!0);const i=()=>Ct(da,"$t",p),[p,I]=Oa();var se=mt(),A=Ue(se);{var n=f=>{var C=Xr(),K=t(C);{let ue=ce(()=>i()("session.affliction_modal.title"));Rr(K,{get isOpen(){return o.isOpen},get onClose(){return o.onClose},get title(){return a(ue)},maxWidth:"max-w-md",children:(ze,he)=>{var ie=Zr(),ye=Ue(ie);Pe(ye,21,()=>Object.keys(yr),lt,(be,Ne)=>{const S=ce(()=>o.afflictions.includes(a(Ne)));var V=Jr();V.__click=()=>o.onToggle(a(Ne));var ve=t(V),Ie=s(ve);{var at=st=>{Ys(st,{size:14,class:"text-red-400"})};h(Ie,st=>{a(S)&&st(at)})}e(V),b(st=>{qe(V,1,`flex items-center justify-between px-3 py-2 rounded-lg border text-xs font-bold transition-all ${a(S)?"bg-red-500/20 border-red-500 text-red-100":"bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-750"}`),r(ve,`${st??""} `)},[()=>i()(`character.afflictions.${a(Ne)}`)]),l(be,V)}),e(ye);var Q=s(ye,2),Me=t(Q),ne=t(Me),tt=t(ne,!0);e(ne);var xt=s(ne,2);{var Ce=be=>{var Ne=Vr(),S=t(Ne,!0);e(Ne),b(V=>r(S,V),[()=>i()("session.affliction_modal.none_selected")]),l(be,Ne)},Re=be=>{var Ne=Qr();Pe(Ne,21,()=>o.afflictions,lt,(S,V)=>{var ve=Gr(),Ie=t(ve),at=t(Ie);e(Ie);var st=s(Ie,2),Ke=t(st,!0);e(st),e(ve),b((It,dt)=>{r(at,`${It??""}:`),r(Ke,dt)},[()=>i()(`character.afflictions.${a(V)}`),()=>i()(`sofww.afflictions.${a(V).toLowerCase().replace(" ","_")}.effect`)]),l(S,ve)}),e(Ne),l(be,Ne)};h(xt,be=>{o.afflictions.length===0?be(Ce):be(Re,!1)})}e(Me);var Be=s(Me,2),He=t(Be);He.__click=function(...be){o.onClose?.apply(this,be)};var Ge=t(He,!0);e(He),e(Be),e(Q),b((be,Ne)=>{r(tt,be),r(Ge,Ne)},[()=>i()("session.affliction_modal.effects"),()=>i()("session.affliction_modal.done")]),l(ze,ie)},$$slots:{default:!0}})}e(C),wr(C,ue=>Wr?.(ue)),l(f,C)};h(A,f=>{o.isOpen&&f(n)})}l(P,se),za(),I()}Ca(["click"]);var Kr=v('<div class="absolute top-0 right-0 bg-gradient-to-l from-yellow-600/20 to-transparent border-l border-b border-yellow-500/30 text-yellow-500 text-[9px] font-black tracking-widest px-3 py-1 rounded-bl-xl z-20 uppercase shadow-[0_0_10px_rgba(234,179,8,0.2)]"> </div>'),ei=v('<div class="absolute inset-0 bg-red-950/40 animate-pulse z-0 pointer-events-none"></div>'),ti=v('<span class="text-[9px] font-black bg-red-950/40 text-red-500 px-1.5 py-0.5 rounded border border-red-900/30 uppercase tracking-wider flex-shrink-0"> </span>'),ai=v("<button><!></button>"),si=v('<button class="w-7 h-7 flex items-center justify-center rounded bg-slate-800/50 text-slate-600 hover:text-red-400 hover:bg-red-950/30 border border-slate-700/50 transition-colors"><!></button>'),ri=v('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),ii=v('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"><div class="absolute inset-0 bg-gradient-to-b from-white/10 to-transparent"></div></div>'),ni=v('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-20"><span class="text-[9px] font-black uppercase text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] tracking-widest leading-none mt-0.5"> </span></div>'),oi=v('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-20"><span class="text-[9px] font-black uppercase text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] tracking-widest leading-none mt-0.5"> </span></div>'),li=v('<div class="flex flex-col items-center justify-between bg-cyan-950/20 border border-cyan-500/30 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm"><span class="text-[9px] font-black text-cyan-400 uppercase tracking-wider mb-0.5"> </span> <span class="text-xl font-bold text-white font-mono leading-none"> </span></div>'),di=v('<button class="text-[9px] bg-red-500/10 text-red-400 px-1.5 py-0.5 rounded border border-red-500/20 hover:bg-red-500/20 hover:border-red-500/40 transition-all flex items-center gap-1 group/btn"> <!></button>'),vi=v('<div class="bg-slate-900/50 p-2 rounded border border-slate-800/50 text-center"><span class="text-[9px] text-slate-500 uppercase font-black block mb-0.5"> </span> <div class="text-white font-bold font-mono text-lg leading-none"> </div> <div> </div></div>'),ci=v('<div class="grid grid-cols-2 gap-4 mb-4"><div class="p-3 rounded-xl bg-purple-950/20 border border-purple-500/30 flex justify-between items-center group/ins"><div><span class="text-[9px] text-purple-400 uppercase font-black block"> </span> <span class="text-white font-bold text-lg font-mono leading-none"> </span></div> <!></div> <div class="p-3 rounded-xl bg-red-950/20 border border-red-500/30 flex justify-between items-center group/cor"><div><span class="text-[9px] text-red-400 uppercase font-black block"> </span> <span class="text-white font-bold text-lg font-mono leading-none"> </span></div> <!></div></div>'),ui=v("<!> ",1),bi=v('<div><div class="text-emerald-500 text-[10px] font-black uppercase mb-2 flex items-center gap-2"> <span class="h-px flex-1 bg-current opacity-20"></span></div> <div class="flex flex-wrap gap-2"></div></div>'),_i=v('<div class="text-sm bg-slate-900/30 p-2 rounded border border-slate-800/30"><span class="font-bold text-slate-300"> </span> <span class="text-slate-400 text-xs block mt-1 leading-relaxed"> </span></div>'),pi=v('<div><div> <span class="h-px flex-1 bg-current opacity-20"></span></div> <div class="grid gap-2"></div></div>'),xi=v('<div class="border-t border-slate-800/50 bg-slate-950/30 p-4"><div class="mb-4"><div class="text-slate-500 font-bold uppercase text-[10px] mb-2 flex items-center gap-2"><span> </span> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-4 gap-2"></div></div> <!> <div class="grid grid-cols-2 gap-4 mb-4"><div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div> <div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div></div> <div class="space-y-4"><!> <!></div></div>'),mi=v('<div><!> <!> <div class="relative z-10 p-4"><div class="flex items-start gap-4 mb-3"><div class="relative flex-shrink-0"><div><!></div> <button><!></button></div> <div class="flex-1 min-w-0"><div class="flex justify-between items-start mb-1"><div class="flex flex-col min-w-0 mr-2"><div class="flex items-center gap-2"><h3> </h3> <!></div></div> <div class="flex gap-1 flex-shrink-0"><button class="w-7 h-7 flex items-center justify-center rounded bg-slate-800 text-slate-500 hover:text-white hover:bg-slate-700 border border-slate-700/50 transition-colors"><!></button> <!></div></div>  <div class="relative w-full h-3.5 sm:h-4 bg-slate-950 rounded-full border border-white/5 overflow-hidden shadow-inner group-hover:border-white/20 transition-all mb-2"><div></div> <!> <!> <!></div> <div class="flex flex-col sm:flex-row gap-3"><div class="flex items-start gap-1.5"><div class="flex flex-col items-center justify-between bg-slate-900 border border-slate-700 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm"><span class="text-[9px] font-black text-slate-400 uppercase tracking-wider mb-0.5"> </span> <span class="text-xl font-bold text-white font-mono leading-none"> </span></div> <div class="flex flex-col items-center justify-between bg-red-950/30 border border-red-900/50 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm relative group/dmg"><span class="text-[9px] font-black text-red-400 uppercase tracking-wider mb-0.5"> </span> <input type="number" class="w-full bg-transparent text-center text-white font-mono font-bold text-xl focus:outline-none p-0 leading-none placeholder-red-800"/> <span class="absolute -top-1 -right-1 flex h-2 w-2 opacity-0 group-hover/dmg:opacity-100 transition-opacity"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span></span></div> <div><span> </span> <div class="flex items-baseline gap-0.5 justify-center w-full"><input type="number" class="w-full bg-transparent text-right text-white font-mono font-bold text-xl focus:outline-none p-0 leading-none"/> <span class="text-[10px] text-slate-500 font-mono self-end mb-0.5 opacity-70"> </span></div></div> <!></div> <div class="flex flex-wrap gap-1.5 items-center flex-1"><!> <button class="text-[10px] sm:text-[9px] font-bold text-slate-500 hover:text-indigo-400 px-1.5 py-0.5 rounded border border-transparent hover:border-indigo-500/30 hover:bg-indigo-500/10 transition-all flex items-center gap-1 whitespace-nowrap"><!> </button></div></div></div></div></div>  <!> <!></div>');function fi(P,o){$a(o,!0);const i=()=>Ct(da,"$t",p),[p,I]=Oa();let se=ta(o,"updateEnemy",3,(m,w)=>{}),A=ta(o,"updatePlayer",3,(m,w)=>{}),n=ta(o,"removeFromCombat",3,m=>{}),f=ce(()=>o.entity.type==="player"),C=ce(()=>o.entity.system==="sofdl"),K=ce(()=>o.entity.damage||0),ue=ce(()=>o.entity.normalHealth||o.entity.health||10),ze=ce(()=>o.entity.currentHealth??a(ue)),he=ce(()=>a(K)>=a(ze)),ie=ce(()=>a(K)>=a(ze)/2&&!a(he)),ye=ce(()=>a(ze)>0?Math.min(100,Math.max(0,a(K)/a(ze)*100)):100),Q=Ye(!1),Me=Ye(!1);fs(()=>{const m=o.entity.afflictions||[],w=m.includes("Incapacitated");if(a(he)&&!w){const xe={afflictions:[...m,"Incapacitated"]};o.entity.type==="player"?ne(xe):se()(o.entity.instanceId,xe)}else if(!a(he)&&w){const xe={afflictions:m.filter(Xe=>Xe!=="Incapacitated")};o.entity.type==="player"?ne(xe):se()(o.entity.instanceId,xe)}});function ne(m){if(o.entity.type!=="player")return;const w=As.get(o.entity.id);w&&As.set(o.entity.id,{...w,...m}),A()(o.entity.id,m),xs({id:o.entity.id,...m})}function tt(m){const w=parseInt(m.target.value);if(isNaN(w))return;const xe={damage:Math.max(0,w)};o.entity.type==="player"?ne(xe):se()(o.entity.instanceId,xe)}function xt(m){const w=parseInt(m.target.value);if(isNaN(w))return;const le=Math.max(0,w);let xe=a(K);le<a(K)&&(xe=le);const Xe={currentHealth:le,damage:xe};o.entity.type==="player"?ne(Xe):se()(o.entity.instanceId,Xe)}function Ce(){const m=!o.entity.acted;o.entity.type==="player"?ne({acted:m}):se()(o.entity.instanceId,{acted:m})}function Re(){o.entity.type==="player"&&ne({initiative:!o.entity.initiative})}function Be(m){const w=o.entity.afflictions||[],xe={afflictions:w.includes(m)?w.filter(Xe=>Xe!==m):[...w,m]};o.entity.type==="player"?ne(xe):se()(o.entity.instanceId,xe)}var He=mi(),Ge=t(He);{var be=m=>{var w=Kr(),le=t(w,!0);e(w),b(xe=>r(le,xe),[()=>i()("session.combat_card.initiative")]),l(m,w)};h(Ge,m=>{a(f)&&o.entity.initiative&&m(be)})}var Ne=s(Ge,2);{var S=m=>{var w=ei();l(m,w)};h(Ne,m=>{a(he)&&m(S)})}var V=s(Ne,2),ve=t(V),Ie=t(ve),at=t(Ie),st=t(at);Is(st,()=>o.entity.imageUrl,m=>{{let w=ce(()=>o.entity.name.charAt(0));vs(m,{get hash(){return o.entity.imageUrl},get alt(){return o.entity.name},size:"custom",get fallbackText(){return a(w)}})}}),e(at);var Ke=s(at,2);Ke.__click=Ce;var It=t(Ke);{var dt=m=>{Hs(m,{size:14,class:""})},Ut=m=>{var w=mt(),le=Ue(w);{var xe=Mt=>{Ys(Mt,{size:14})},Xe=Mt=>{sr(Mt,{size:14})};h(le,Mt=>{o.entity.acted?Mt(xe):Mt(Xe,!1)},!0)}l(m,w)};h(It,m=>{a(he)?m(dt):m(Ut,!1)})}e(Ke),e(Ie);var ft=s(Ie,2),W=t(ft),Oe=t(W),Se=t(Oe),We=t(Se),et=t(We,!0);e(We);var bt=s(We,2);{var Z=m=>{var w=ti(),le=t(w);e(w),b(()=>r(le,`Dif ${o.entity.difficulty??""}`)),l(m,w)};h(bt,m=>{a(f)||m(Z)})}e(Se),e(Oe);var De=s(Oe,2),U=t(De);U.__click=()=>z(Q,!a(Q));var _e=t(U);{var je=m=>{Hr(m,{size:14})},pe=m=>{Ur(m,{size:14})};h(_e,m=>{a(Q)?m(je):m(pe,!1)})}e(U);var Ae=s(U,2);{var vt=m=>{var w=ai();w.__click=Re;var le=t(w);Fr(le,{size:14}),e(w),b(xe=>{qe(w,1,`w-7 h-7 flex items-center justify-center rounded transition-all ${o.entity.initiative?"bg-yellow-500 text-yellow-950 shadow-lg shadow-yellow-500/20":"bg-slate-800 text-slate-500 hover:text-white hover:bg-slate-700"}`),ee(w,"title",xe)},[()=>i()("session.combat_card.initiative")]),l(m,w)},Qe=m=>{var w=si();w.__click=()=>n()(o.entity.instanceId);var le=t(w);Pa(le,{size:14}),e(w),l(m,w)};h(Ae,m=>{a(f)?m(vt):m(Qe,!1)})}e(De),e(W);var ct=s(W,2),gt=t(ct),$t=s(gt,2);{var qt=m=>{var w=ri();b(()=>{qe(w,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10
                            ${a(he)?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":a(ye)>=80?"bg-gradient-to-r from-red-600 to-rose-500":a(ie)?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),vr(w,`width: ${a(ye)??""}%`)}),l(m,w)};h($t,m=>{a(ye)>0&&m(qt)})}var $=s($t,2);{var F=m=>{var w=ii();l(m,w)};h($,m=>{a(K)===0&&m(F)})}var we=s($,2);{var Le=m=>{var w=ni(),le=t(w),xe=t(le,!0);e(le),e(w),b(Xe=>r(xe,Xe),[()=>i()("session.combat_card.incapacitated")]),l(m,w)},ht=m=>{var w=mt(),le=Ue(w);{var xe=Xe=>{var Mt=oi(),d=t(Mt),c=t(d,!0);e(d),e(Mt),b(_=>r(c,_),[()=>i()("session.combat_card.injured")]),l(Xe,Mt)};h(le,Xe=>{a(ie)&&Xe(xe)},!0)}l(m,w)};h(we,m=>{a(he)?m(Le):m(ht,!1)})}e(ct);var yt=s(ct,2),nt=t(yt),Ht=t(nt),Gt=t(Ht),ea=t(Gt,!0);e(Gt);var aa=s(Gt,2),At=t(aa,!0);e(aa),e(Ht);var Ot=s(Ht,2),Lt=t(Ot),Ft=t(Lt,!0);e(Lt);var Qt=s(Lt,2);it(Qt),Qt.__input=tt,wa(2),e(Ot);var Ze=s(Ot,2),pt=t(Ze),_t=t(pt,!0);e(pt);var jt=s(pt,2),Bt=t(jt);it(Bt),Bt.__input=xt;var Wt=s(Bt,2),Et=t(Wt);e(Wt),e(jt),e(Ze);var Jt=s(Ze,2);{var Zt=m=>{var w=li(),le=t(w),xe=t(le,!0);e(le);var Xe=s(le,2),Mt=t(Xe,!0);e(Xe),e(w),b(d=>{r(xe,d),r(Mt,o.entity.perception||10)},[()=>i()("sofdl.attributes.perception")]),l(m,w)};h(Jt,m=>{a(C)&&m(Zt)})}e(nt);var Xt=s(nt,2),ia=t(Xt);Pe(ia,17,()=>o.entity.afflictions||[],lt,(m,w)=>{var le=di();le.__click=()=>Be(a(w));var xe=t(le),Xe=s(xe);Pa(Xe,{size:8,class:"opacity-50 group-hover/btn:opacity-100"}),e(le),b(()=>r(xe,`${a(w)??""} `)),l(m,le)});var sa=s(ia,2);sa.__click=()=>z(Me,!0);var fa=t(sa);la(fa,{size:10});var ga=s(fa);e(sa),e(Xt),e(yt),e(ft),e(ve),e(V);var ca=s(V,2);{var ha=m=>{var w=xi(),le=t(w),xe=t(le),Xe=t(xe),Mt=t(Xe,!0);e(Xe),wa(2),e(xe);var d=s(xe,2);Pe(d,21,()=>a(C)?["strength","agility","intellect","will"]:["str","agi","int","wil"],lt,(M,R)=>{const G=ce(()=>a(C)?o.entity.attributes?.[a(R)]??10:o.entity.stats?.[a(R)]??o.entity.attributes?.[a(R)]??10),ae=ce(()=>a(G)-10);var fe=vi(),de=t(fe),Je=t(de,!0);e(de);var g=s(de,2),T=t(g,!0);e(g);var L=s(g,2),ke=t(L);e(L),e(fe),b(ge=>{r(Je,ge),r(T,a(G)),qe(L,1,`text-[9px] font-bold ${a(ae)>=0?"text-emerald-500":"text-red-500"}`),r(ke,`${a(ae)>=0?"+":""}${a(ae)??""}`)},[()=>a(C)?a(R).slice(0,3):a(R)]),l(M,fe)}),e(d),e(le);var c=s(le,2);{var _=M=>{var R=ci(),G=t(R),ae=t(G),fe=t(ae),de=t(fe,!0);e(fe);var Je=s(fe,2),g=t(Je,!0);e(Je),e(ae);var T=s(ae,2);kr(T,{size:20,class:"text-purple-500/30 group-hover/ins:text-purple-500 transition-colors"}),e(G);var L=s(G,2),ke=t(L),ge=t(ke),H=t(ge,!0);e(ge);var N=s(ge,2),Ee=t(N,!0);e(N),e(ke);var oe=s(ke,2);Hs(oe,{size:20,class:"text-red-500/30 group-hover/cor:text-red-500 transition-colors"}),e(L),e(R),b((Ve,Te)=>{r(de,Ve),r(g,o.entity.insanity||0),r(H,Te),r(Ee,o.entity.corruption||0)},[()=>i()("sofdl.attributes.insanity"),()=>i()("sofdl.attributes.corruption")]),l(M,R)};h(c,M=>{a(C)&&M(_)})}var k=s(c,2),Y=t(k),J=t(Y),u=t(J,!0);e(J);var x=s(J,2),y=t(x,!0);e(x),e(Y);var E=s(Y,2),X=t(E),D=t(X,!0);e(X);var q=s(X,2),re=t(q,!0);e(q),e(E),e(k);var me=s(k,2),O=t(me);{var B=M=>{var R=bi(),G=t(R),ae=t(G);wa(),e(G);var fe=s(G,2);Pe(fe,21,()=>o.entity.senses,lt,(de,Je)=>{const g=ce(()=>{const[ke,ge]=a(Je).split(":");return{key:ke,val:ge}}),T=ce(()=>i()(`character.senses.list.${a(g).key}`)+(a(g).val?` ${a(g).val}`:"")),L=ce(()=>i()(`character.senses.descriptions.${a(g).key}`));$r(de,{get text(){return a(L)},class:"text-xs bg-emerald-950/30 text-emerald-200 px-3 py-1.5 rounded border border-emerald-900/50 font-bold flex items-center gap-2 cursor-help whitespace-nowrap",children:(ke,ge)=>{var H=ui(),N=Ue(H);Rs(N,{size:12,class:"text-emerald-500 flex-shrink-0"});var Ee=s(N);b(()=>r(Ee,` ${a(T)??""}`)),l(ke,H)},$$slots:{default:!0}})}),e(fe),e(R),b(de=>r(ae,`${de??""} `),[()=>i()("character.senses.title")]),l(M,R)};h(O,M=>{o.entity.senses&&o.entity.senses.length>0&&M(B)})}var te=s(O,2);Pe(te,16,()=>[{key:"traits",label:"Traços",color:"text-amber-500"},{key:"actions",label:"Ações",color:"text-red-400"},{key:"reactions",label:"Reações",color:"text-indigo-400"},{key:"end_of_round",label:"Fim da Rodada",color:"text-emerald-400"}],lt,(M,R)=>{var G=mt(),ae=Ue(G);{var fe=de=>{var Je=pi(),g=t(Je),T=t(g);wa(),e(g);var L=s(g,2);Pe(L,21,()=>o.entity[R.key],lt,(ke,ge)=>{var H=_i(),N=t(H),Ee=t(N,!0);e(N);var oe=s(N,2),Ve=t(oe,!0);e(oe),e(H),b(()=>{r(Ee,a(ge).name),r(Ve,a(ge).description||a(ge).effect)}),l(ke,H)}),e(L),e(Je),b(()=>{qe(g,1,`${R.color??""} text-[10px] font-black uppercase mb-2 flex items-center gap-2`),r(T,`${R.label??""} `)}),l(de,Je)};h(ae,de=>{o.entity[R.key]&&o.entity[R.key].length>0&&de(fe)})}l(M,G)}),e(me),e(w),b((M,R,G)=>{r(Mt,M),r(u,R),r(y,o.entity.size||1),r(D,G),r(re,o.entity.speed||10)},[()=>i()("session.combat_card.attributes"),()=>i()("session.combat_card.size"),()=>i()("session.combat_card.speed")]),l(m,w)};h(ca,m=>{a(Q)&&m(ha)})}var ja=s(ca,2);{let m=ce(()=>o.entity.afflictions||[]);Yr(ja,{get isOpen(){return a(Me)},onClose:()=>z(Me,!1),get afflictions(){return a(m)},onToggle:Be})}e(He),b((m,w,le,xe,Xe)=>{qe(He,1,`group relative overflow-hidden transition-all duration-300 rounded-2xl border ${a(f)?"bg-slate-900/80 border-indigo-500/30 hover:border-indigo-500/50 hover:shadow-indigo-900/20":"bg-slate-950/80 border-red-900/30 hover:border-red-800/50 hover:shadow-red-900/10"} shadow-lg backdrop-blur-sm`),qe(at,1,`w-14 h-14 rounded-2xl overflow-hidden border-2 shadow-xl transition-transform group-hover:scale-105 ${a(he)?"border-red-600 grayscale brightness-50":a(f)?"border-indigo-500/50":"border-red-900/50"}`),qe(Ke,1,`absolute -bottom-2 -right-2 w-7 h-7 rounded-lg flex items-center justify-center border shadow-lg transition-all hover:scale-110 z-20 ${o.entity.acted?"bg-slate-800 border-slate-600 text-slate-500":a(f)?"bg-indigo-600 border-indigo-400 text-white":"bg-red-600 border-red-400 text-white"}`),ee(Ke,"title",m),qe(We,1,`text-base font-bold truncate leading-snug ${a(f)?"text-white":"text-red-100 font-serif tracking-wide"}`),r(et,o.entity.name),qe(gt,1,`absolute inset-0 w-full ${a(K)===0?"bg-emerald-900/20":"bg-slate-900/50"}`),r(ea,w),r(At,o.entity.defense||10),r(Ft,le),js(Qt,a(K)),qe(Ze,1,`flex flex-col items-center justify-between border rounded-lg p-1.5 w-[5.5rem] h-[3.75rem] shadow-sm relative transition-colors ${a(he)?"bg-red-950/50 border-red-500":a(ie)?"bg-orange-950/30 border-orange-500":"bg-emerald-950/30 border-emerald-900/50"}`),qe(pt,1,`text-[9px] font-black uppercase tracking-wider mb-0.5 ${a(he)?"text-red-400":a(ie)?"text-orange-400":"text-emerald-400"}`),r(_t,xe),js(Bt,a(ze)),r(Et,`/${a(ue)??""}`),r(ga,` ${Xe??""}`)},[()=>o.entity.acted?i()("session.combat_card.acted"):i()("session.combat_card.act"),()=>i()("session.combat_card.defense"),()=>i()("session.combat_card.damage"),()=>i()("session.combat_card.health"),()=>i()("session.combat_card.add_affliction")]),l(P,He),za(),I()}Ca(["click","input"]);function gi(P,{from:o,to:i},p={}){var{delay:I=0,duration:se=Re=>Math.sqrt(Re)*120,easing:A=Ir}=p,n=getComputedStyle(P),f=n.transform==="none"?"":n.transform,[C,K]=n.transformOrigin.split(" ").map(parseFloat);C/=P.clientWidth,K/=P.clientHeight;var ue=hi(P),ze=P.clientWidth/i.width/ue,he=P.clientHeight/i.height/ue,ie=o.left+o.width*C,ye=o.top+o.height*K,Q=i.left+i.width*C,Me=i.top+i.height*K,ne=(ie-Q)*ze,tt=(ye-Me)*he,xt=o.width/i.width,Ce=o.height/i.height;return{delay:I,duration:typeof se=="function"?se(Math.sqrt(ne*ne+tt*tt)):se,easing:A,css:(Re,Be)=>{var He=Be*ne,Ge=Be*tt,be=Re+Be*xt,Ne=Re+Be*Ce;return`transform: ${f} translate(${He}px, ${Ge}px) scale(${be}, ${Ne});`}}}function hi(P){if("currentCSSZoom"in P)return P.currentCSSZoom;for(var o=P,i=1;o!==null;)i*=+getComputedStyle(o).zoom,o=o.parentElement;return i}function yi(P,o=1,i=0){const p=[];let I=0;for(let f=0;f<o;f++){const C=Math.floor(Math.random()*P)+1;p.push(C),I+=C}let se=`${o}d${P}`,A=[],n=0;if(i!==0)if(P===20){const f=Math.abs(i);for(let K=0;K<f;K++)A.push(Math.floor(Math.random()*6)+1);const C=Math.max(...A);i>0?(n=C,I+=C,se+=` + ${C} [Boon]`):(n=-C,I-=C,se+=` - ${C} [Bane]`)}else n=i,I+=i,se+=i>0?` + ${i}`:` - ${Math.abs(i)}`;return{total:I,results:p,bonusRolls:A,formula:se,crit:P===20&&p.includes(20),modifierTotal:n}}function wi(P,o,i){const p=i.map(f=>({...f,type:"enemy"}));if(P==="standard"){const f=o.filter(ze=>ze.initiative).map(ze=>({...ze,type:"player",isFast:!0})),C=o.filter(ze=>!ze.initiative).map(ze=>({...ze,type:"player",isFast:!1})),K=p.filter(ze=>ze.initiative).map(ze=>({...ze,isFast:!0})),ue=p.filter(ze=>!ze.initiative).map(ze=>({...ze,isFast:!1}));return[...f,...K,...C,...ue]}if(P==="individual")return[...o.map(C=>({...C,type:"player",totalInit:(C.initiativeRoll||0)+(C.attributes?.agility||10)-10})),...p.map(C=>({...C,type:"enemy",totalInit:(C.initiativeRoll||0)+(C.attributes?.agility||10)-10}))].sort((C,K)=>K.totalInit-C.totalInit);const I=o.filter(f=>f&&f.initiative).map(f=>({...f,type:"player"})),se=o.filter(f=>f&&!f.initiative).map(f=>({...f,type:"player"})),A=[...I,...p,...se],n=new Set;return A.filter(f=>{if(!f)return!1;const C=f.type==="player"?f.id:f.instanceId;return n.has(C)?!1:(n.add(C),!0)})}var ki=v('<span class="text-[10px] bg-slate-800 text-slate-400 px-1.5 py-0.5 rounded-full"> </span>'),$i=v('<div class="p-3 rounded-xl border border-amber-500/30 bg-amber-500/5 flex items-center gap-3 transition-all hover:bg-amber-500/10 shadow-sm"><div class="flex-1"><div class="font-bold text-sm text-amber-200 leading-none"> </div> <div class="text-[9px] text-amber-500/60 font-medium mt-1 uppercase tracking-tighter"> </div></div> <div class="flex items-center gap-1.5"><button class="p-2 rounded-lg bg-green-600/20 text-green-400 hover:bg-green-600 hover:text-white transition-all shadow-lg active:scale-90" title="Aprovar"><!></button> <button class="p-2 rounded-lg bg-red-600/20 text-red-400 hover:bg-red-600 hover:text-white transition-all shadow-lg active:scale-90" title="Recusar"><!></button></div></div>'),zi=v('<div class="space-y-2 animate-in fade-in slide-in-from-top-2"><div class="flex items-center gap-2 px-1"><div class="w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"></div> <span class="text-[10px] font-black text-amber-500 uppercase tracking-wider"> </span></div> <!> <div class="h-px bg-slate-800/50 mx-2 my-2"></div></div>'),Ci=v('<span class="text-indigo-400 font-bold uppercase tracking-tighter mr-1"> </span>'),Oi=v('<div><div></div> <div class="flex-1"><div> </div> <div class="text-[10px] text-slate-500 font-medium"><!> </div></div> <div class="flex items-center gap-1"><button><!></button> <button class="text-slate-600 hover:text-red-400 p-1.5 hover:bg-red-400/10 rounded-lg transition-all"><!></button></div></div>'),ji=v('<div class="text-xs text-slate-600 italic p-6 border-2 border-dashed border-slate-800 rounded-xl text-center"> </div>'),Ei=v('<button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-black uppercase text-[10px] tracking-[0.2em] shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2"><!> </button> <p class="text-[9px] text-slate-600 text-center font-bold uppercase tracking-tighter"> </p>',1),Mi=v('<div class="flex justify-center p-3 bg-white rounded-xl mb-2 animate-in zoom-in-95 duration-200 shadow-xl mx-auto w-32 h-32"><img class="w-24 h-24"/></div>'),Ri=v('<div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-green-500 text-white text-[10px] font-bold rounded shadow-lg animate-in fade-in slide-in-from-bottom-1 whitespace-nowrap"><!> </div>'),Ii=v('<div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-1"><!> </span></div> <button class="text-slate-500 hover:text-white transition-colors p-1"><!></button></div> <!> <div class="relative group"><div class="flex gap-1"><div class="flex-1 bg-slate-950 border border-slate-800 rounded-lg p-2 text-[10px] text-slate-400 font-mono truncate cursor-pointer hover:border-slate-700 transition-colors flex items-center"> </div> <button class="bg-indigo-600 hover:bg-indigo-500 text-white p-2 rounded-lg transition-all active:scale-95 shadow-lg shadow-indigo-900/20 relative"><!> <!></button></div></div> <button class="w-full text-[9px] text-slate-600 hover:text-red-400 font-bold uppercase tracking-widest transition-colors mt-1"> </button>',1),Si=v('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 group hover:border-indigo-500/30 transition-all"><div class="truncate flex-1 flex items-center gap-2"><!> <div><div class="text-sm font-bold text-white truncate"> </div> <div class="text-[10px] text-slate-500"> </div></div></div> <button class="text-slate-500 hover:text-indigo-400 p-1 ml-2 bg-slate-900 rounded border border-slate-800"><!></button></div>'),Ni=v('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),Ai=v("<!> <!>",1),Di=v('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 group hover:border-indigo-500/30 transition-all"><div class="truncate flex-1"><div class="text-sm font-bold text-white truncate"> </div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-slate-500 hover:text-indigo-400 p-1 ml-2 bg-slate-900 rounded border border-slate-800"><!></button></div>'),Ti=v('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),Pi=v("<!> <!>",1),Ui=v('<button class="bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 shadow-lg shadow-green-900/20"><!> </button>'),Hi=v('<div class="flex items-center gap-4"><button class="p-2 hover:bg-slate-700 rounded text-slate-400"><!></button> <div class="text-center"><div class="text-[10px] font-bold text-slate-500 uppercase"> </div><div class="text-3xl font-mono font-bold text-white leading-none"> </div></div> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded font-bold flex items-center gap-2"><!> </button> <div class="h-8 w-px bg-slate-700 mx-2"></div> <button class="text-red-400 hover:text-red-300 text-xs font-bold px-3 py-2 border border-red-900/30 rounded bg-red-900/10"> </button></div>'),Li=v("<div><!></div>"),Fi=v('<div class="text-center text-slate-500 italic py-10"> </div>'),qi=v('<div class="text-sm"><span class="font-bold text-yellow-500"> </span> <span class="text-slate-300"> </span></div>'),Bi=v('<div class="bg-slate-900 border border-slate-700 rounded-lg p-4"><h4 class="font-bold text-white mb-2 pb-2 border-b border-slate-800 flex items-center gap-2"><!> </h4> <div class="space-y-2"></div></div>'),Wi=v('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" aria-label="Fechar" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-lg border border-slate-700 shadow-2xl p-6 relative" role="dialog" aria-modal="true"><div class="flex items-center gap-3 mb-6"><div class="p-3 bg-yellow-900/20 rounded-full border border-yellow-500/30 text-yellow-500"><!></div> <div><h3 class="font-bold text-white text-xl"> </h3> <p class="text-slate-400 text-sm"> </p></div></div> <div class="space-y-4 mb-8 max-h-[60vh] overflow-y-auto custom-scrollbar"></div> <div class="flex gap-3"><button class="flex-1 py-1.5 rounded bg-slate-700 hover:bg-slate-600 text-white font-bold text-sm"> </button> <button class="flex-1 py-1.5 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold text-sm"> </button></div></div></div>'),Ji=v('<button class="w-full text-left flex items-center gap-3 p-3 bg-slate-900 border border-slate-700 hover:border-indigo-500 hover:bg-indigo-500/10 rounded-xl group transition-all"><div class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center text-sm font-bold text-slate-500 group-hover:text-indigo-400 border border-slate-700 group-hover:border-indigo-500/30"> </div> <div class="flex-1"><div class="font-bold text-white group-hover:text-indigo-300"> </div> <div class="text-[10px] text-slate-500"> </div></div> <div class="bg-slate-800 p-2 rounded-lg text-slate-500 group-hover:bg-indigo-500 group-hover:text-white transition-colors"><!></div></button>'),Vi=v('<div class="text-center py-8"><div class="w-12 h-12 bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-500"><!></div> <p class="text-slate-500 text-sm font-bold"> </p> <p class="text-[10px] text-slate-600 mt-1"> </p></div>'),Gi=v('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" aria-label="Fechar" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-md border border-slate-700 shadow-2xl p-6" role="dialog" aria-modal="true"><div class="flex justify-between items-center mb-6"><div><h3 class="font-bold text-white text-lg"> </h3> <p class="text-xs text-slate-400"> </p></div> <button class="bg-slate-700 hover:bg-slate-600 p-2 rounded-lg text-white transition-colors"><!></button></div> <div class="space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2"><!> <!></div></div></div>'),Qi=v('<div class="grid grid-cols-1 lg:grid-cols-4 gap-6 h-full relative"><div class="space-y-6"><div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex flex-col gap-4"><div class="flex justify-between items-center bg-slate-950/50 p-2 rounded-lg border border-slate-800"><h3 class="text-xs font-black text-slate-500 uppercase tracking-widest flex items-center gap-2"><!> <!></h3> <button class="text-[10px] bg-slate-800 hover:bg-slate-700 text-white px-2.5 py-1.5 rounded-md font-bold transition-all border border-slate-700 active:scale-95"> </button></div> <!> <div class="space-y-2 flex-1 overflow-y-auto max-h-[300px] custom-scrollbar pr-1"><div class="space-y-2"><!> <!></div></div> <div class="pt-4 border-t border-slate-800 space-y-3"><!></div></div> <div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex flex-col h-[400px]"><div class="flex items-center gap-2 mb-3 bg-slate-950 p-1 rounded-lg border border-slate-800"><button><!> </button> <button><!> </button></div> <div class="flex-1 overflow-y-auto pr-1 custom-scrollbar space-y-2"><!></div></div></div> <div class="lg:col-span-2 space-y-4"><div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex justify-between items-center shadow-lg sticky top-0 z-20"><div class="flex items-center gap-4"><!></div></div> <div class="space-y-3 pb-20"><!> <!></div></div> <div class="hidden lg:flex flex-col gap-4"></div></div> <!> <!> <!> <!>',1);function Zi(P,o){$a(o,!0);const i=()=>Ct(fr,"$liveCharacters",n),p=()=>Ct(da,"$t",n),I=()=>Ct(Ms,"$liveEnemies",n),se=()=>Ct(Fs,"$liveEncounters",n),A=()=>Ct(Ta,"$isHistoryOpen",n),[n,f]=Oa();let C=Ye(!1),K=Ye(!1),ue=Ye(!1);const ze={active:!1,round:1};let he=Ye("enemies"),ie=Ye(!1),ye=Ye(ka([])),Q=Ye(ka({isOpen:!1,title:"",message:"",onConfirm:()=>{}}));Ns(()=>{if(o.campaign?.id){br(o.campaign.id,!0);const d=Os(da)("common.labels.master");Ds.update(_=>({..._,campaignId:o.campaign.id,name:o.campaign.gmName||d}));const c=setInterval(()=>{const _=Vt.get(o.campaign.id)||o.campaign,k=Os(da)("common.labels.master");Es(o.campaign.id,{name:_.name,gmName:_.gmName||k})},3e4);return()=>{clearInterval(c),_r(),Ds.update(_=>({..._,campaignId:null}))}}});const Me=ce(()=>typeof window<"u"?`${window.location.origin}${Ws("/campaigns/[id]/invite",{id:o.campaign?.id})}`:"");function ne(){a(Me)&&(navigator.clipboard.writeText(a(Me)),z(K,!0),setTimeout(()=>{z(K,!1)},2e3))}let tt=ce(()=>o.campaign?.sessionRoster||[]),xt=ce(()=>o.campaign?.combat||ze),Ce=ce(()=>o.campaign?.activeEnemies||[]),Re=ce(()=>o.campaign?.members||[]),Be=ce(()=>o.campaign?.initiativeStyle||"dle"),He=ce(()=>Array.from(new Set([...a(tt),...a(Re).map(c=>c.id)])).map(c=>{const _=i().find(Y=>Y.id===c),k=a(Re).find(Y=>Y.id===c);return _&&k?{..._,...k,lastUpdate:k.lastUpdate}:_||k}).filter(Boolean)),Ge=ce(()=>a(He).filter(d=>!d.campaignApproval||d.campaignApproval==="approved")),be=ce(()=>a(He).filter(d=>d.campaignApproval==="pending")),Ne=ce(()=>i().filter(d=>!a(tt).includes(d.id)&&!a(Re).some(c=>c.id===d.id)&&(d.system||Ps)===(o.campaign?.system||Ps)));function S(d){if(!o.campaign?.id)return;const _={...Vt.get(o.campaign.id)||o.campaign,...d};Vt.set(o.campaign.id,_),d.combat&&ps(o.campaign.id,d.combat),(d.name||d.gmName)&&Es(o.campaign.id,{name:_.name,gmName:_.gmName})}function V(d){if(a(tt).includes(d)){const c=a(tt).filter(_=>_!==d);S({sessionRoster:c})}else{const c=[...a(tt),d];S({sessionRoster:c})}}function ve(d){Z(d,{campaignApproval:"approved"}),xs({id:d,campaignApproval:"approved"})}function Ie(d){xs({id:d,campaignApproval:"rejected",campaignId:null});const _=((Vt.get(o.campaign.id)||o.campaign).members||[]).filter(k=>k.id!==d);S({members:_})}function at(d){const c=a(He).find(_=>_.id===d);z(Q,{isOpen:!0,title:p()("session.players.remove_title"),message:p()("session.players.remove_message",{values:{name:c?.name||"este personagem"}}),onConfirm:()=>{const _=Vt.get(o.campaign.id)||o.campaign;xs({id:d,campaignId:null});const k=(_.sessionRoster||[]).filter(u=>u!==d),Y=(_.members||[]).filter(u=>u.id!==d),J=(_.activeEnemies||[]).filter(u=>u.type!=="player"||u.id!==d);S({sessionRoster:k,members:Y,activeEnemies:J}),a(Q).isOpen=!1}},!0)}function st(d){const _=(Vt.get(o.campaign.id)||o.campaign).activeEnemies||[],k={...d,instanceId:ds(),damage:0,currentHealth:d.health,afflictions:[],acted:!1,initiative:!1};S({activeEnemies:[..._,k]})}function Ke(d){const _=(Vt.get(o.campaign.id)||o.campaign).activeEnemies||[];let k=[];d.enemies.forEach(Y=>{const J=I().find(u=>u.id===Y.enemyId);if(J)for(let u=0;u<Y.count;u++)k.push({...J,instanceId:ds(),damage:0,currentHealth:J.health,afflictions:[],acted:!1,initiative:!1})}),S({activeEnemies:[..._,...k]})}function It(){S({combat:{active:!0,round:1}}),ps(o.campaign.id,{active:!0,round:1})}function dt(){const d=a(Ce).filter(c=>c.damage<(c.currentHealth??c.health)&&c.endOfRound&&c.endOfRound.length>0).map(c=>({name:c.name,effects:c.endOfRound}));if(d.length>0){z(ye,d,!0),z(ie,!0);return}Ut()}function Ut(){const d=Vt.get(o.campaign.id)||o.campaign,c=(d.combat?.round||1)+1,_=(d.activeEnemies||[]).map(k=>({...k,acted:!1}));S({combat:{...d.combat,round:c},activeEnemies:_}),ps(o.campaign.id,{active:!0,round:c}),z(ie,!1)}function ft(d){S({combat:{active:!1,round:1}}),ps(o.campaign.id,{active:!1,round:1})}function W(d){const c=Vt.get(o.campaign.id)||o.campaign;S({activeEnemies:(c.activeEnemies||[]).filter(_=>_.instanceId!==d)})}function Oe(d,c){const _=Vt.get(o.campaign.id)||o.campaign;S({activeEnemies:(_.activeEnemies||[]).map(k=>k.instanceId===d?{...k,...c}:k)})}function Se(){const d=Vt.get(o.campaign.id)||o.campaign,c=d.combat?.round||1;c>1&&S({combat:{...d.combat,round:c-1}})}let We=Ye(ka(Date.now()));Ns(()=>{const d=setInterval(()=>{z(We,Date.now(),!0)},1e4);return()=>clearInterval(d)});let et=ce(()=>(()=>{const d=a(Ge).filter(c=>a(tt).includes(c.id));return wi(a(Be),d,a(Ce))})());function bt(d){return d.lastUpdate?a(We)-d.lastUpdate<6e4:!1}function Z(d,c){const _=Vt.get(o.campaign.id)||o.campaign,k=_.members||[],Y=k.findIndex(E=>E.id===d);let J=k;Y!==-1&&(J=[...k],J[Y]={...J[Y],...c});const u=_.activeEnemies||[],x=u.findIndex(E=>E.id===d&&E.type==="player");let y=u;x!==-1&&(y=[...u],y[x]={...y[x],...c}),S({members:J,activeEnemies:y})}var De=Qi(),U=Ue(De),_e=t(U),je=t(_e),pe=t(je),Ae=t(pe),vt=t(Ae);qs(vt,{size:14,class:"text-indigo-500"});var Qe=s(vt),ct=s(Qe);{var gt=d=>{var c=ki(),_=t(c,!0);e(c),b(()=>r(_,a(Ge).length)),l(d,c)};h(ct,d=>{a(Ge).length>0&&d(gt)})}e(Ae);var $t=s(Ae,2);$t.__click=()=>z(C,!a(C));var qt=t($t,!0);e($t),e(pe);var $=s(pe,2);{var F=d=>{var c=zi(),_=t(c),k=s(t(_),2),Y=t(k);e(k),e(_);var J=s(_,2);Pe(J,17,()=>a(be),u=>u.id,(u,x)=>{var y=$i(),E=t(y),X=t(E),D=t(X,!0);e(X);var q=s(X,2),re=t(q,!0);e(q),e(E);var me=s(E,2),O=t(me);O.__click=()=>ve(a(x).id);var B=t(O);Us(B,{size:14}),e(O);var te=s(O,2);te.__click=()=>Ie(a(x).id);var M=t(te);ba(M,{size:14}),e(te),e(me),e(y),b(R=>{r(D,a(x).name),r(re,R)},[()=>p()("session.players.new_request")]),l(u,y)}),wa(2),e(c),b(u=>r(Y,`${u??""} (${a(be).length??""})`),[()=>p()("session.players.waiting_approval")]),l(d,c)};h($,d=>{a(be).length>0&&d(F)})}var we=s($,2),Le=t(we),ht=t(Le);Pe(ht,17,()=>a(Ge),d=>d.id,(d,c)=>{const _=ce(()=>bt(a(c))),k=ce(()=>a(tt).includes(a(c).id));var Y=Oi(),J=t(Y),u=s(J,2),x=t(u),y=t(x,!0);e(x);var E=s(x,2),X=t(E);{var D=G=>{var ae=Ci(),fe=t(ae,!0);e(ae),b(de=>r(fe,de),[()=>p()("common.labels.session")]),l(G,ae)};h(X,G=>{a(k)&&G(D)})}var q=s(X);e(E),e(u);var re=s(u,2),me=t(re);me.__click=()=>V(a(c).id);var O=t(me);{var B=G=>{zr(G,{size:14})},te=G=>{la(G,{size:14})};h(O,G=>{a(k)?G(B):G(te,!1)})}e(me);var M=s(me,2);M.__click=()=>at(a(c).id);var R=t(M);ba(R,{size:14}),e(M),e(re),e(Y),b((G,ae,fe)=>{qe(Y,1,`p-2.5 rounded-xl border flex items-center gap-3 transition-all ${a(_)?"bg-indigo-900/10 border-indigo-500/20":"bg-slate-900/50 border-slate-800"} ${a(_)||a(k)?"opacity-100":"opacity-40"} hover:border-indigo-500/40 group shadow-sm`),qe(J,1,`w-2 h-2 rounded-full ${a(_)?"bg-green-500 shadow-[0_0_8px_rgba(74,222,128,0.4)]":"bg-slate-700"}`),qe(x,1,`font-bold text-sm ${a(_)?"text-white":"text-slate-500"} group-hover:text-indigo-300 transition-colors`),r(y,a(c).name),r(q,` ${G??""} ${a(c).level??""} • ${a(c).ancestry??""}`),qe(me,1,`p-1.5 rounded-lg transition-all ${a(k)?"text-amber-400 hover:bg-amber-400/10":"text-slate-500 hover:text-indigo-400 hover:bg-indigo-400/10"}`),ee(me,"title",ae),ee(M,"title",fe)},[()=>p()("common.labels.level"),()=>a(k)?p()("session.players.remove_from_session"):p()("session.players.add_to_session"),()=>p()("session.players.kick_from_campaign")]),l(d,Y)});var yt=s(ht,2);{var nt=d=>{var c=ji(),_=t(c,!0);e(c),b(k=>r(_,k),[()=>p()("session.players.none")]),l(d,c)};h(yt,d=>{a(Ge).length===0&&d(nt)})}e(Le),e(we);var Ht=s(we,2),Gt=t(Ht);{var ea=d=>{var c=Ei(),_=Ue(c);_.__click=()=>S({isPublished:!0});var k=t(_);Nr(k,{size:14});var Y=s(k);e(_);var J=s(_,2),u=t(J,!0);e(J),b((x,y)=>{r(Y,` ${x??""}`),r(u,y)},[()=>p()("session.publish.publish_session"),()=>p()("session.publish.make_visible")]),l(d,c)},aa=d=>{var c=Ii(),_=Ue(c),k=t(_),Y=t(k),J=t(Y);Bs(J,{size:10,class:"animate-pulse"});var u=s(J);e(Y),e(k);var x=s(k,2);x.__click=()=>z(ue,!a(ue));var y=t(x);Br(y,{size:14}),e(x),e(_);var E=s(_,2);{var X=ae=>{var fe=Mi(),de=t(fe);e(fe),b((Je,g)=>{ee(de,"src",Je),ee(de,"alt",g)},[()=>`https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${encodeURIComponent(a(Me))}`,()=>p()("session.publish.qr_alt")]),l(ae,fe)};h(E,ae=>{a(ue)&&ae(X)})}var D=s(E,2),q=t(D),re=t(q);re.__click=ne;var me=t(re,!0);e(re);var O=s(re,2);O.__click=ne;var B=t(O);{var te=ae=>{var fe=Ri(),de=t(fe);Us(de,{size:10,class:"inline mr-1"});var Je=s(de);e(fe),b(g=>r(Je,` ${g??""}`),[()=>p()("common.buttons.copied")]),l(ae,fe)};h(B,ae=>{a(K)&&ae(te)})}var M=s(B,2);Lr(M,{size:14}),e(O),e(q),e(D);var R=s(D,2);R.__click=()=>S({isPublished:!1});var G=t(R,!0);e(R),b((ae,fe,de,Je)=>{r(u,` ${ae??""}`),ee(x,"title",fe),r(me,a(Me)),ee(O,"aria-label",de),r(G,Je)},[()=>p()("session.publish.public_session"),()=>p()("session.publish.qr_code"),()=>p()("session.publish.copy_link"),()=>p()("session.publish.remove_public")]),l(d,c)};h(Gt,d=>{o.campaign?.isPublished?d(aa,!1):d(ea)})}e(Ht),e(je);var At=s(je,2),Ot=t(At),Lt=t(Ot);Lt.__click=()=>z(he,"enemies");var Ft=t(Lt);ms(Ft,{size:14});var Qt=s(Ft);e(Lt);var Ze=s(Lt,2);Ze.__click=()=>z(he,"encounters");var pt=t(Ze);tr(pt,{size:14});var _t=s(pt);e(Ze),e(Ot);var jt=s(Ot,2),Bt=t(jt);{var Wt=d=>{var c=Ai(),_=Ue(c);Pe(_,1,I,J=>J.id,(J,u)=>{var x=Si(),y=t(x),E=t(y);qr(E,{size:12,class:"text-slate-600 cursor-grab"});var X=s(E,2),D=t(X),q=t(D,!0);e(D);var re=s(D,2),me=t(re);e(re),e(X),e(y);var O=s(y,2);O.__click=()=>st(a(u));var B=t(O);la(B,{size:16}),e(O),e(x),b(te=>{r(q,a(u).name),r(me,`${te??""} ${a(u).difficulty??""}`)},[()=>p()("session.enemies.difficulty")]),l(J,x)});var k=s(_,2);{var Y=J=>{var u=Ni(),x=t(u,!0);e(u),b(y=>r(x,y),[()=>p()("session.enemies.none")]),l(J,u)};h(k,J=>{I().length===0&&J(Y)})}l(d,c)},Et=d=>{var c=Pi(),_=Ue(c);Pe(_,1,se,J=>J.id,(J,u)=>{var x=Di(),y=t(x),E=t(y),X=t(E,!0);e(E);var D=s(E,2),q=t(D);e(D),e(y);var re=s(y,2);re.__click=()=>Ke(a(u));var me=t(re);Ks(me,{size:14}),e(re),e(x),b((O,B)=>{r(X,a(u).name),r(q,`${O??""} ${B??""}`)},[()=>a(u).enemies?.reduce((O,B)=>O+B.count,0)||0,()=>p()("session.enemies.title")]),l(J,x)});var k=s(_,2);{var Y=J=>{var u=Ti(),x=t(u,!0);e(u),b(y=>r(x,y),[()=>p()("session.enemies.no_encounters")]),l(J,u)};h(k,J=>{se().length===0&&J(Y)})}l(d,c)};h(Bt,d=>{a(he)==="enemies"?d(Wt):d(Et,!1)})}e(jt),e(At),e(_e);var Jt=s(_e,2),Zt=t(Jt),Xt=t(Zt),ia=t(Xt);{var sa=d=>{var c=Ui();c.__click=It;var _=t(c);sr(_,{size:20});var k=s(_);e(c),b(Y=>r(k,` ${Y??""}`),[()=>p()("session.combat.start")]),l(d,c)},fa=d=>{var c=Hi(),_=t(c);_.__click=Se;var k=t(_);Vs(k,{size:20}),e(_);var Y=s(_,2),J=t(Y),u=t(J,!0);e(J);var x=s(J),y=t(x,!0);e(x),e(Y);var E=s(Y,2);E.__click=dt;var X=t(E);Cr(X,{size:16});var D=s(X);e(E);var q=s(E,4);q.__click=()=>ft();var re=t(q,!0);e(q),e(c),b((me,O,B,te,M)=>{ee(_,"title",me),r(u,O),r(y,a(xt).round),ee(E,"title",B),r(D,` ${te??""}`),r(re,M)},[()=>p()("session.combat.previous"),()=>p()("session.combat.round"),()=>p()("session.combat.next"),()=>p()("session.combat.next"),()=>p()("session.combat.end")]),l(d,c)};h(ia,d=>{a(xt).active?d(fa,!1):d(sa)})}e(Xt),e(Zt);var ga=s(Zt,2),ca=t(ga);Pe(ca,25,()=>a(et),d=>d.type==="player"?d.id:d.instanceId,(d,c)=>{var _=Li(),k=t(_);fi(k,{get entity(){return a(c)},updateEnemy:Oe,removeFromCombat:W,updatePlayer:Z}),e(_),hr(_,()=>gi,()=>({duration:300})),l(d,_)});var ha=s(ca,2);{var ja=d=>{var c=Fi(),_=t(c,!0);e(c),b(k=>r(_,k),[()=>p()("session.combat.empty")]),l(d,c)};h(ha,d=>{a(et).length===0&&d(ja)})}e(ga),e(Jt),wa(2),e(U);var m=s(U,2);{var w=d=>{var c=Wi();c.__click=te=>{te.target===te.currentTarget&&z(ie,!1)};var _=t(c),k=t(_),Y=t(k),J=t(Y);Or(J,{size:24}),e(Y);var u=s(Y,2),x=t(u),y=t(x,!0);e(x);var E=s(x,2),X=t(E,!0);e(E),e(u),e(k);var D=s(k,2);Pe(D,21,()=>a(ye),lt,(te,M)=>{var R=Bi(),G=t(R),ae=t(G);ms(ae,{size:14,class:"text-slate-500"});var fe=s(ae);e(G);var de=s(G,2);Pe(de,21,()=>a(M).effects,lt,(Je,g)=>{var T=qi(),L=t(T),ke=t(L);e(L);var ge=s(L,2),H=t(ge,!0);e(ge),e(T),b(()=>{r(ke,`${a(g).name??""}:`),r(H,a(g).desc)}),l(Je,T)}),e(de),e(R),b(()=>r(fe,` ${a(M).name??""}`)),l(te,R)}),e(D);var q=s(D,2),re=t(q);re.__click=()=>z(ie,!1);var me=t(re,!0);e(re);var O=s(re,2);O.__click=Ut;var B=t(O,!0);e(O),e(q),e(_),e(c),b((te,M,R,G)=>{r(y,te),r(X,M),r(me,R),r(B,G)},[()=>p()("session.end_of_round.title"),()=>p()("session.end_of_round.summary"),()=>p()("common.buttons.cancel"),()=>p()("session.end_of_round.advance")]),l(d,c)};h(m,d=>{a(ie)&&d(w)})}var le=s(m,2);{var xe=d=>{var c=Gi();c.__click=O=>{O.target===O.currentTarget&&z(C,!1)};var _=t(c),k=t(_),Y=t(k),J=t(Y),u=t(J,!0);e(J);var x=s(J,2),y=t(x,!0);e(x),e(Y);var E=s(Y,2);E.__click=()=>z(C,!1);var X=t(E);Pa(X,{size:16}),e(E),e(k);var D=s(k,2),q=t(D);Pe(q,17,()=>a(Ne),lt,(O,B)=>{var te=Ji();te.__click=()=>V(a(B).id);var M=t(te),R=t(M,!0);e(M);var G=s(M,2),ae=t(G),fe=t(ae,!0);e(ae);var de=s(ae,2),Je=t(de);e(de),e(G);var g=s(G,2),T=t(g);la(T,{size:16}),e(g),e(te),b((L,ke)=>{r(R,L),r(fe,a(B).name),r(Je,`${ke??""} ${a(B).level??""} • ${a(B).ancestry??""}`)},[()=>a(B).name.charAt(0),()=>p()("common.labels.level")]),l(O,te)});var re=s(q,2);{var me=O=>{var B=Vi(),te=t(B),M=t(te);ms(M,{size:24}),e(te);var R=s(te,2),G=t(R,!0);e(R);var ae=s(R,2),fe=t(ae,!0);e(ae),e(B),b((de,Je)=>{r(G,de),r(fe,Je)},[()=>p()("session.manage_session.no_available"),()=>p()("session.manage_session.all_in_session")]),l(O,B)};h(re,O=>{a(Ne).length===0&&O(me)})}e(D),e(_),e(c),b((O,B)=>{r(u,O),r(y,B)},[()=>p()("session.manage_session.title"),()=>p()("session.manage_session.description")]),l(d,c)};h(le,d=>{a(C)&&d(xe)})}var Xe=s(le,2);Js(Xe,{get isOpen(){return A()},onClose:()=>Ta.set(!1)});var Mt=s(Xe,2);Ls(Mt,{get isOpen(){return a(Q).isOpen},get title(){return a(Q).title},get message(){return a(Q).message},get onConfirm(){return a(Q).onConfirm},onCancel:()=>a(Q).isOpen=!1}),b((d,c,_,k)=>{r(Qe,` ${d??""} `),r(qt,c),qe(Lt,1,`flex-1 text-xs font-bold py-1.5 rounded flex items-center justify-center gap-2 transition-colors ${a(he)==="enemies"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),r(Qt,` ${_??""}`),qe(Ze,1,`flex-1 text-xs font-bold py-1.5 rounded flex items-center justify-center gap-2 transition-colors ${a(he)==="encounters"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),r(_t,` ${k??""}`)},[()=>p()("session.players.title"),()=>a(C)?p()("session.players.close"):p()("session.players.add"),()=>p()("session.enemies.title"),()=>p()("session.enemies.encounters")]),l(P,De),za(),f()}Ca(["click"]);var Xi=v('<div class="space-y-4"><div class="flex items-center gap-4"><div class="relative group cursor-pointer"><div class="w-16 h-16 rounded-xl overflow-hidden border border-slate-700"><!></div> <div class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"><!></div></div> <div class="flex-1"><label for="enemy-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold text-lg"/></div></div> <div class="grid grid-cols-3 gap-4"><div><label for="enemy-diff" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-diff" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-size" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-size" type="text" placeholder="1/2, 1, 2..." class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-desc" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-desc" type="text" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-perception" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-perception" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-senses" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-senses" type="text" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-defense" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-health" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-speed" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-speed" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-speed-notes" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-speed-notes" type="text" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div></div> <div><label for="enemy-immune" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <textarea id="enemy-immune" class="w-full bg-slate-900 border border-slate-700 rounded p-3 text-white text-sm min-h-[80px] resize-none focus:border-indigo-500 focus:outline-none transition-colors"></textarea></div></div>'),Yi=v('<div class="bg-slate-900 p-3 rounded border border-slate-700 text-center"><label class="text-[10px] text-slate-500 uppercase font-bold block mb-1 text-ellipsis overflow-hidden whitespace-nowrap"> </label> <input type="number" class="w-full bg-transparent text-center font-bold text-white text-xl focus:outline-none mb-1"/> <div> </div></div>'),Ki=v('<div class="space-y-6"><div><h4 class="text-indigo-400 font-bold text-sm uppercase mb-3"> </h4> <div class="grid grid-cols-4 gap-3"></div></div></div>'),en=v('<div class="flex gap-2 items-start"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),tn=v('<div class="text-xs text-slate-600 italic text-center py-4 border-2 border-dashed border-slate-800 rounded"> </div>'),an=v('<div class="flex gap-2 items-start"><div class="flex-1 space-y-2"><div class="grid grid-cols-2 gap-2"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <select class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm"><option> </option><option> </option></select></div> <div class="grid grid-cols-2 gap-2"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600"/> <input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600"/></div> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),sn=v('<div class="text-xs text-slate-600 italic text-center py-4 border-2 border-dashed border-slate-800 rounded"> </div>'),rn=v('<div class="flex gap-2 items-start"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),nn=v('<div class="text-xs text-slate-600 italic text-center py-4 border-2 border-dashed border-slate-800 rounded"> </div>'),on=v('<div class="flex gap-2 items-start"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),ln=v('<div class="text-xs text-slate-600 italic text-center py-4 border-2 border-dashed border-slate-800 rounded"> </div>'),dn=v('<div class="space-y-6"><div class="p-4 bg-slate-900 rounded border border-indigo-500/30"><div class="flex justify-between items-center mb-3"><h4 class="font-bold text-sm uppercase text-indigo-400"> </h4> <button class="text-xs bg-slate-800 px-2 py-1 rounded hover:bg-slate-700 text-white flex items-center gap-1 border border-slate-700"><!> </button></div> <div class="space-y-3"><!> <!></div></div> <div class="p-4 bg-slate-900 rounded border border-red-500/30"><div class="flex justify-between items-center mb-3"><h4 class="font-bold text-sm uppercase text-red-400"> </h4> <button class="text-xs bg-slate-800 px-2 py-1 rounded hover:bg-slate-700 text-white flex items-center gap-1 border border-slate-700"><!> </button></div> <div class="space-y-3"><!> <!></div></div> <div class="p-4 bg-slate-900 rounded border border-orange-500/30"><div class="flex justify-between items-center mb-3"><h4 class="font-bold text-sm uppercase text-orange-400"> </h4> <button class="text-xs bg-slate-800 px-2 py-1 rounded hover:bg-slate-700 text-white flex items-center gap-1 border border-slate-700"><!> </button></div> <div class="space-y-3"><!> <!></div></div> <div class="p-4 bg-slate-900 rounded border border-yellow-500/30"><div class="flex justify-between items-center mb-3"><h4 class="font-bold text-sm uppercase text-yellow-400"> </h4> <button class="text-xs bg-slate-800 px-2 py-1 rounded hover:bg-slate-700 text-white flex items-center gap-1 border border-slate-700"><!> </button></div> <div class="space-y-3"><!> <!></div></div></div>'),vn=v('<div class="w-16 h-16 rounded-lg overflow-hidden border border-slate-700 shadow-lg flex-shrink-0"><!></div>'),cn=v('<span class="text-slate-400"> </span>'),un=v('<span class="text-slate-400"> </span>'),bn=v('<div class="text-sm mb-4"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span></div>'),_n=v('<div class="mb-3 text-sm"><span class="font-bold text-indigo-400"> </span> <span class="text-slate-300 ml-1"> </span></div>'),pn=v('<span class="text-slate-300"> </span>'),xn=v('<div class="mb-2 text-sm"><span class="font-bold text-white"> </span> <span class="text-slate-400"> </span> <span class="text-white ml-1"> </span> <!></div>'),mn=v('<div class="mt-4"><h4 class="text-red-500 font-bold text-xs uppercase mb-2 tracking-wider"> </h4> <!></div>'),fn=v('<div class="mb-2 text-sm"><span class="font-bold text-white"> </span> <span class="text-slate-300 ml-1"> </span></div>'),gn=v('<div class="mt-4"><h4 class="text-orange-500 font-bold text-xs uppercase mb-2 tracking-wider"> </h4> <!></div>'),hn=v('<div class="mb-2 text-sm"><span class="font-bold text-white"> </span> <span class="text-slate-300 ml-1"> </span></div>'),yn=v('<div class="mt-4"><h4 class="text-yellow-500 font-bold text-xs uppercase mb-2 tracking-wider"> </h4> <!></div>'),wn=v('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" aria-label="Close" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-6xl h-[90vh] border border-slate-700 shadow-2xl overflow-hidden flex flex-col lg:flex-row" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="w-full lg:w-1/2 flex flex-col h-full border-r border-slate-700"><div class="p-4 border-b border-slate-700 bg-slate-900 flex justify-between items-center"><h3 id="modal-title" class="font-bold text-white text-lg"> </h3> <button class="lg:hidden text-slate-400 hover:text-white"><!></button></div> <div class="flex border-b border-slate-700 bg-slate-900/50"><button> </button> <button> </button> <button> </button></div> <div class="flex-1 overflow-y-auto p-6 custom-scrollbar bg-slate-800/50"><!></div> <div class="p-4 border-t border-slate-700 bg-slate-900 flex justify-end gap-3"><button class="px-6 py-2 rounded bg-slate-800 hover:bg-slate-700 text-white font-bold transition-colors"> </button> <button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold flex items-center gap-2 transition-colors"><!> </button></div></div> <div class="hidden lg:flex w-1/2 bg-slate-950 flex-col border-l border-slate-800"><div class="p-4 border-b border-slate-800 bg-slate-950"><h3 class="font-bold text-slate-500 text-xs uppercase flex items-center gap-2"><!> </h3></div> <div class="flex-1 p-8 overflow-y-auto flex items-start justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-slate-950"><div class="w-full max-w-md bg-slate-900 border border-slate-700 rounded-xl p-5 shadow-2xl"><div class="flex items-start gap-3 mb-4"><!> <div class="flex-1 min-w-0"><div class="flex items-baseline gap-2"><h2 class="text-xl font-bold text-white font-serif tracking-wide"> </h2> <span class="text-red-500 font-bold text-sm"> </span></div> <div class="text-sm text-slate-400 mt-1"> </div></div></div> <div class="text-sm mb-3"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span> <!></div> <div class="text-sm mb-3"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span> <span class="text-slate-500 font-bold ml-3"> </span> <span class="text-white ml-1"> </span></div> <div class="text-sm mb-3"><span class="text-white"><span class="text-slate-500 font-bold"> </span> <span class="text-slate-500 font-bold"> </span> <span class="text-slate-500 font-bold"> </span> <span class="text-slate-500 font-bold"> </span> </span></div> <div class="text-sm mb-3"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span> <!></div> <!> <div class="border-t border-slate-700 my-4"></div> <!> <!> <!> <!></div></div></div></div></div> <input type="file" hidden="" accept="image/*"/> <!>',1);function kn(P,o){$a(o,!0);const i=()=>Ct(da,"$t",p),[p,I]=Oa();let se=ta(o,"isOpen",3,!1),A=ta(o,"initialData",3,"{}"),n=Ye(ka(ie())),f=Ye("stats"),C=Ye(!1),K=Ye(""),ue=Ye(void 0);function ze(S){const V=S.target.files;if(V&&V.length>0){const ve=V[0],Ie=new FileReader;Ie.onload=()=>{z(K,Ie.result,!0),z(C,!0)},Ie.readAsDataURL(ve)}S.target&&(S.target.value="")}async function he(S){try{const V=await Qs(S);a(n).imageUrl=V,z(C,!1)}catch(V){console.error(V),alert(V.message||"Erro ao salvar imagem")}}function ie(){return{name:"",difficulty:1,size:"1",descriptors:"",perception:10,senses:"",defense:10,health:10,attributes:{strength:10,agility:10,intellect:10,will:10},speed:10,speedNotes:"",immunities:"",traits:[],attackOptions:[],specialAttacks:[],endOfRound:[],imageUrl:""}}function ye(S){const V=S-10;return V>=0?`+${V}`:`${V}`}fs(()=>{if(se()&&A())try{const S=JSON.parse(A());Object.keys(S).length===0?z(n,ie(),!0):z(n,{...ie(),...S},!0)}catch{z(n,ie(),!0)}});function Q(){a(n).traits=[...a(n).traits,{name:"",desc:""}]}function Me(S){a(n).traits=a(n).traits.filter((V,ve)=>ve!==S)}function ne(){a(n).attackOptions=[...a(n).attackOptions,{name:"",type:"melee",attackRoll:"+0",damage:"1d6",desc:""}]}function tt(S){a(n).attackOptions=a(n).attackOptions.filter((V,ve)=>ve!==S)}function xt(){a(n).specialAttacks=[...a(n).specialAttacks,{name:"",desc:""}]}function Ce(S){a(n).specialAttacks=a(n).specialAttacks.filter((V,ve)=>ve!==S)}function Re(){a(n).endOfRound=[...a(n).endOfRound,{name:"",desc:""}]}function Be(S){a(n).endOfRound=a(n).endOfRound.filter((V,ve)=>ve!==S)}function He(S){}var Ge=mt(),be=Ue(Ge);{var Ne=S=>{var V=wn(),ve=Ue(V);ve.__click=He;var Ie=t(ve),at=t(Ie),st=t(at),Ke=t(st),It=t(Ke,!0);e(Ke);var dt=s(Ke,2);dt.__click=function(...g){o.onClose?.apply(this,g)};var Ut=t(dt);Pa(Ut,{size:20}),e(dt),e(st);var ft=s(st,2),W=t(ft);W.__click=()=>z(f,"stats");var Oe=t(W,!0);e(W);var Se=s(W,2);Se.__click=()=>z(f,"attributes");var We=t(Se,!0);e(Se);var et=s(Se,2);et.__click=()=>z(f,"abilities");var bt=t(et,!0);e(et),e(ft);var Z=s(ft,2),De=t(Z);{var U=g=>{var T=Xi(),L=t(T),ke=t(L);ke.__click=()=>a(ue)?.click();var ge=t(ke),H=t(ge);Is(H,()=>a(n).imageUrl,j=>{vs(j,{get hash(){return a(n).imageUrl},get alt(){return a(n).name},size:"custom",fallbackText:"?"})}),e(ge);var N=s(ge,2),Ee=t(N);Zs(Ee,{size:20,class:"text-white"}),e(N),e(ke);var oe=s(ke,2),Ve=t(oe),Te=t(Ve,!0);e(Ve);var $e=s(Ve,2);it($e),e(oe),e(L);var rt=s(L,2),wt=t(rt),kt=t(wt),Yt=t(kt,!0);e(kt);var St=s(kt,2);it(St),e(wt);var Kt=s(wt,2),na=t(Kt),ua=t(na,!0);e(na);var Ea=s(na,2);it(Ea),e(Kt);var Ua=s(Kt,2),ya=t(Ua),Ga=t(ya,!0);e(ya);var Ma=s(ya,2);it(Ma),e(Ua),e(rt);var Qa=s(rt,2),Ra=t(Qa),Ha=t(Ra),gs=t(Ha,!0);e(Ha);var Za=s(Ha,2);it(Za),e(Ra);var Xa=s(Ra,2),Ya=t(Xa),hs=t(Ya,!0);e(Ya);var Ia=s(Ya,2);it(Ia),e(Xa),e(Qa);var Sa=s(Qa,2),Na=t(Sa),Ka=t(Na),es=t(Ka,!0);e(Ka);var ts=s(Ka,2);it(ts),e(Na);var cs=s(Na,2),La=t(cs),us=t(La,!0);e(La);var bs=s(La,2);it(bs),e(cs),e(Sa);var as=s(Sa,2),Fa=t(as),Aa=t(Fa),ss=t(Aa,!0);e(Aa);var _s=s(Aa,2);it(_s),e(Fa);var qa=s(Fa,2),Ba=t(qa),ys=t(Ba,!0);e(Ba);var Wa=s(Ba,2);it(Wa),e(qa),e(as);var rs=s(as,2),is=t(rs),ws=t(is,!0);e(is);var ot=s(is,2);Da(ot),e(rs),e(T),b((j,Dt,ut,Tt,zt,Nt,Pt,ra,Rt,oa,ks,ns,Ja,os,ls)=>{r(Te,j),r(Yt,Dt),r(ua,ut),r(Ga,Tt),ee(Ma,"placeholder",zt),r(gs,Nt),r(hs,Pt),ee(Ia,"placeholder",ra),r(es,Rt),r(us,oa),r(ss,ks),r(ys,ns),ee(Wa,"placeholder",Ja),r(ws,os),ee(ot,"placeholder",ls)},[()=>i()("session.enemy_modal.name"),()=>i()("session.enemy_modal.difficulty"),()=>i()("session.enemy_modal.size"),()=>i()("session.enemy_modal.descriptors"),()=>i()("session.enemy_modal.descriptors_placeholder"),()=>i()("sofdl.attributes.perception"),()=>i()("session.enemy_modal.senses"),()=>i()("session.enemy_modal.senses_placeholder_sotdl"),()=>i()("session.enemy_modal.defense"),()=>i()("session.enemy_modal.health"),()=>i()("session.enemy_modal.speed"),()=>i()("session.enemy_modal.speed_notes"),()=>i()("session.enemy_modal.speed_notes_placeholder"),()=>i()("session.enemy_modal.immunities"),()=>i()("session.enemy_modal.immunities_placeholder_sotdl")]),Fe($e,()=>a(n).name,j=>a(n).name=j),Fe(St,()=>a(n).difficulty,j=>a(n).difficulty=j),Fe(Ea,()=>a(n).size,j=>a(n).size=j),Fe(Ma,()=>a(n).descriptors,j=>a(n).descriptors=j),Fe(Za,()=>a(n).perception,j=>a(n).perception=j),Fe(Ia,()=>a(n).senses,j=>a(n).senses=j),Fe(ts,()=>a(n).defense,j=>a(n).defense=j),Fe(bs,()=>a(n).health,j=>a(n).health=j),Fe(_s,()=>a(n).speed,j=>a(n).speed=j),Fe(Wa,()=>a(n).speedNotes,j=>a(n).speedNotes=j),Fe(ot,()=>a(n).immunities,j=>a(n).immunities=j),l(g,T)},_e=g=>{var T=mt(),L=Ue(T);{var ke=H=>{var N=Ki(),Ee=t(N),oe=t(Ee),Ve=t(oe,!0);e(oe);var Te=s(oe,2);Pe(Te,5,()=>[{key:"strength",label:i()("sofdl.attributes.strength")},{key:"agility",label:i()("sofdl.attributes.agility")},{key:"intellect",label:i()("sofdl.attributes.intellect")},{key:"will",label:i()("sofdl.attributes.will")}],lt,($e,rt)=>{var wt=Yi(),kt=t(wt),Yt=t(kt,!0);e(kt);var St=s(kt,2);it(St);var Kt=s(St,2),na=t(Kt,!0);e(Kt),e(wt),b((ua,Ea)=>{ee(kt,"for",`attr-${a(rt).key??""}`),ee(kt,"title",a(rt).label),r(Yt,ua),ee(St,"id",`attr-${a(rt).key??""}`),qe(Kt,1,`text-xs font-bold ${a(n).attributes[a(rt).key]-10>=0?"text-green-500":"text-red-500"}`),r(na,Ea)},[()=>a(rt).label.substring(0,3),()=>ye(a(n).attributes[a(rt).key])]),Fe(St,()=>a(n).attributes[a(rt).key],ua=>a(n).attributes[a(rt).key]=ua),l($e,wt)}),e(Te),e(Ee),e(N),b($e=>r(Ve,$e),[()=>i()("session.enemy_modal.main_attributes")]),l(H,N)},ge=H=>{var N=mt(),Ee=Ue(N);{var oe=Ve=>{var Te=dn(),$e=t(Te),rt=t($e),wt=t(rt),kt=t(wt,!0);e(wt);var Yt=s(wt,2);Yt.__click=Q;var St=t(Yt);la(St,{size:12});var Kt=s(St);e(Yt),e(rt);var na=s(rt,2),ua=t(na);Pe(ua,17,()=>a(n).traits,lt,(ot,j,Dt)=>{var ut=en(),Tt=t(ut),zt=t(Tt);it(zt);var Nt=s(zt,2);Da(Nt),e(Tt);var Pt=s(Tt,2);Pt.__click=()=>Me(Dt);var ra=t(Pt);ba(ra,{size:16}),e(Pt),e(ut),b((Rt,oa)=>{ee(zt,"placeholder",Rt),ee(Nt,"placeholder",oa)},[()=>i()("session.enemy_modal.name_placeholder"),()=>i()("session.enemy_modal.desc_placeholder")]),Fe(zt,()=>a(j).name,Rt=>a(j).name=Rt),Fe(Nt,()=>a(j).desc,Rt=>a(j).desc=Rt),l(ot,ut)});var Ea=s(ua,2);{var Ua=ot=>{var j=tn(),Dt=t(j,!0);e(j),b(ut=>r(Dt,ut),[()=>i()("session.enemy_modal.empty")]),l(ot,j)};h(Ea,ot=>{a(n).traits.length===0&&ot(Ua)})}e(na),e($e);var ya=s($e,2),Ga=t(ya),Ma=t(Ga),Qa=t(Ma,!0);e(Ma);var Ra=s(Ma,2);Ra.__click=ne;var Ha=t(Ra);la(Ha,{size:12});var gs=s(Ha);e(Ra),e(Ga);var Za=s(Ga,2),Xa=t(Za);Pe(Xa,17,()=>a(n).attackOptions,lt,(ot,j,Dt)=>{var ut=an(),Tt=t(ut),zt=t(Tt),Nt=t(zt);it(Nt);var Pt=s(Nt,2),ra=t(Pt),Rt=t(ra,!0);e(ra),ra.value=ra.__value="melee";var oa=s(ra),ks=t(oa,!0);e(oa),oa.value=oa.__value="ranged",e(Pt),e(zt);var ns=s(zt,2),Ja=t(ns);it(Ja);var os=s(Ja,2);it(os),e(ns);var ls=s(ns,2);Da(ls),e(Tt);var $s=s(Tt,2);$s.__click=()=>tt(Dt);var rr=t($s);ba(rr,{size:16}),e($s),e(ut),b((va,ir,nr,or,lr,dr)=>{ee(Nt,"placeholder",va),r(Rt,ir),r(ks,nr),ee(Ja,"placeholder",or),ee(os,"placeholder",lr),ee(ls,"placeholder",dr)},[()=>i()("session.enemy_modal.name_placeholder"),()=>i()("session.enemy_modal.melee"),()=>i()("session.enemy_modal.ranged"),()=>i()("session.enemy_modal.attack_placeholder"),()=>i()("session.enemy_modal.damage_placeholder"),()=>i()("session.enemy_modal.desc_effects_placeholder")]),Fe(Nt,()=>a(j).name,va=>a(j).name=va),cr(Pt,()=>a(j).type,va=>a(j).type=va),Fe(Ja,()=>a(j).attackRoll,va=>a(j).attackRoll=va),Fe(os,()=>a(j).damage,va=>a(j).damage=va),Fe(ls,()=>a(j).desc,va=>a(j).desc=va),l(ot,ut)});var Ya=s(Xa,2);{var hs=ot=>{var j=sn(),Dt=t(j,!0);e(j),b(ut=>r(Dt,ut),[()=>i()("session.enemy_modal.empty")]),l(ot,j)};h(Ya,ot=>{a(n).attackOptions.length===0&&ot(hs)})}e(Za),e(ya);var Ia=s(ya,2),Sa=t(Ia),Na=t(Sa),Ka=t(Na,!0);e(Na);var es=s(Na,2);es.__click=xt;var ts=t(es);la(ts,{size:12});var cs=s(ts);e(es),e(Sa);var La=s(Sa,2),us=t(La);Pe(us,17,()=>a(n).specialAttacks,lt,(ot,j,Dt)=>{var ut=rn(),Tt=t(ut),zt=t(Tt);it(zt);var Nt=s(zt,2);Da(Nt),e(Tt);var Pt=s(Tt,2);Pt.__click=()=>Ce(Dt);var ra=t(Pt);ba(ra,{size:16}),e(Pt),e(ut),b((Rt,oa)=>{ee(zt,"placeholder",Rt),ee(Nt,"placeholder",oa)},[()=>i()("session.enemy_modal.name_placeholder"),()=>i()("session.enemy_modal.desc_placeholder")]),Fe(zt,()=>a(j).name,Rt=>a(j).name=Rt),Fe(Nt,()=>a(j).desc,Rt=>a(j).desc=Rt),l(ot,ut)});var bs=s(us,2);{var as=ot=>{var j=nn(),Dt=t(j,!0);e(j),b(ut=>r(Dt,ut),[()=>i()("session.enemy_modal.empty")]),l(ot,j)};h(bs,ot=>{a(n).specialAttacks.length===0&&ot(as)})}e(La),e(Ia);var Fa=s(Ia,2),Aa=t(Fa),ss=t(Aa),_s=t(ss,!0);e(ss);var qa=s(ss,2);qa.__click=Re;var Ba=t(qa);la(Ba,{size:12});var ys=s(Ba);e(qa),e(Aa);var Wa=s(Aa,2),rs=t(Wa);Pe(rs,17,()=>a(n).endOfRound,lt,(ot,j,Dt)=>{var ut=on(),Tt=t(ut),zt=t(Tt);it(zt);var Nt=s(zt,2);Da(Nt),e(Tt);var Pt=s(Tt,2);Pt.__click=()=>Be(Dt);var ra=t(Pt);ba(ra,{size:16}),e(Pt),e(ut),b((Rt,oa)=>{ee(zt,"placeholder",Rt),ee(Nt,"placeholder",oa)},[()=>i()("session.enemy_modal.name_placeholder"),()=>i()("session.enemy_modal.desc_placeholder")]),Fe(zt,()=>a(j).name,Rt=>a(j).name=Rt),Fe(Nt,()=>a(j).desc,Rt=>a(j).desc=Rt),l(ot,ut)});var is=s(rs,2);{var ws=ot=>{var j=ln(),Dt=t(j,!0);e(j),b(ut=>r(Dt,ut),[()=>i()("session.enemy_modal.empty")]),l(ot,j)};h(is,ot=>{a(n).endOfRound.length===0&&ot(ws)})}e(Wa),e(Fa),e(Te),b((ot,j,Dt,ut,Tt,zt,Nt,Pt)=>{r(kt,ot),r(Kt,` ${j??""}`),r(Qa,Dt),r(gs,` ${ut??""}`),r(Ka,Tt),r(cs,` ${zt??""}`),r(_s,Nt),r(ys,` ${Pt??""}`)},[()=>i()("session.enemy_modal.traits"),()=>i()("common.buttons.add"),()=>i()("session.enemy_modal.attack_options"),()=>i()("common.buttons.add"),()=>i()("session.enemy_modal.special_attacks"),()=>i()("common.buttons.add"),()=>i()("session.enemy_modal.end_of_round"),()=>i()("common.buttons.add")]),l(Ve,Te)};h(Ee,Ve=>{a(f)==="abilities"&&Ve(oe)},!0)}l(H,N)};h(L,H=>{a(f)==="attributes"?H(ke):H(ge,!1)},!0)}l(g,T)};h(De,g=>{a(f)==="stats"?g(U):g(_e,!1)})}e(Z);var je=s(Z,2),pe=t(je);pe.__click=function(...g){o.onClose?.apply(this,g)};var Ae=t(pe,!0);e(pe);var vt=s(pe,2);vt.__click=()=>o.onSave(a(n));var Qe=t(vt);Ss(Qe,{size:18});var ct=s(Qe);e(vt),e(je),e(at);var gt=s(at,2),$t=t(gt),qt=t($t),$=t(qt);Rs($,{size:14});var F=s($);e(qt),e($t);var we=s($t,2),Le=t(we),ht=t(Le),yt=t(ht);{var nt=g=>{var T=vn(),L=t(T);vs(L,{get hash(){return a(n).imageUrl},get alt(){return a(n).name},size:"custom"}),e(T),l(g,T)};h(yt,g=>{a(n).imageUrl&&g(nt)})}var Ht=s(yt,2),Gt=t(Ht),ea=t(Gt),aa=t(ea,!0);e(ea);var At=s(ea,2),Ot=t(At);e(At),e(Gt);var Lt=s(Gt,2),Ft=t(Lt);e(Lt),e(Ht),e(ht);var Qt=s(ht,2),Ze=t(Qt),pt=t(Ze,!0);e(Ze);var _t=s(Ze,2),jt=t(_t);e(_t);var Bt=s(_t,2);{var Wt=g=>{var T=cn(),L=t(T);e(T),b(()=>r(L,`; ${a(n).senses??""}`)),l(g,T)};h(Bt,g=>{a(n).senses&&g(Wt)})}e(Qt);var Et=s(Qt,2),Jt=t(Et),Zt=t(Jt,!0);e(Jt);var Xt=s(Jt,2),ia=t(Xt,!0);e(Xt);var sa=s(Xt,2),fa=t(sa,!0);e(sa);var ga=s(sa,2),ca=t(ga,!0);e(ga),e(Et);var ha=s(Et,2),ja=t(ha),m=t(ja),w=t(m,!0);e(m);var le=s(m),xe=s(le),Xe=t(xe,!0);e(xe);var Mt=s(xe),d=s(Mt),c=t(d,!0);e(d);var _=s(d),k=s(_),Y=t(k,!0);e(k);var J=s(k);e(ja),e(ha);var u=s(ha,2),x=t(u),y=t(x,!0);e(x);var E=s(x,2),X=t(E,!0);e(E);var D=s(E,2);{var q=g=>{var T=un(),L=t(T);e(T),b(()=>r(L,`; ${a(n).speedNotes??""}`)),l(g,T)};h(D,g=>{a(n).speedNotes&&g(q)})}e(u);var re=s(u,2);{var me=g=>{var T=bn(),L=t(T),ke=t(L,!0);e(L);var ge=s(L,2),H=t(ge,!0);e(ge),e(T),b(N=>{r(ke,N),r(H,a(n).immunities)},[()=>i()("session.enemy_modal.immunities")]),l(g,T)};h(re,g=>{a(n).immunities&&g(me)})}var O=s(re,4);{var B=g=>{var T=mt(),L=Ue(T);Pe(L,17,()=>a(n).traits,lt,(ke,ge)=>{var H=_n(),N=t(H),Ee=t(N,!0);e(N);var oe=s(N,2),Ve=t(oe,!0);e(oe),e(H),b(()=>{r(Ee,a(ge).name),r(Ve,a(ge).desc)}),l(ke,H)}),l(g,T)};h(O,g=>{a(n).traits.length>0&&g(B)})}var te=s(O,2);{var M=g=>{var T=mn(),L=t(T),ke=t(L,!0);e(L);var ge=s(L,2);Pe(ge,17,()=>a(n).attackOptions,lt,(H,N)=>{var Ee=xn(),oe=t(Ee),Ve=t(oe,!0);e(oe);var Te=s(oe,2),$e=t(Te);e(Te);var rt=s(Te,2),wt=t(rt);e(rt);var kt=s(rt,2);{var Yt=St=>{var Kt=pn(),na=t(Kt);e(Kt),b(()=>r(na,`; ${a(N).desc??""}`)),l(St,Kt)};h(kt,St=>{a(N).desc&&St(Yt)})}e(Ee),b(St=>{r(Ve,a(N).name),r($e,`(${St??""})`),r(wt,`${a(N).attackRoll??""} (${a(N).damage??""})`)},[()=>a(N).type==="melee"?i()("session.enemy_modal.melee").toLowerCase():i()("session.enemy_modal.ranged").toLowerCase()]),l(H,Ee)}),e(T),b(H=>r(ke,H),[()=>i()("session.enemy_modal.attack_options")]),l(g,T)};h(te,g=>{a(n).attackOptions.length>0&&g(M)})}var R=s(te,2);{var G=g=>{var T=gn(),L=t(T),ke=t(L,!0);e(L);var ge=s(L,2);Pe(ge,17,()=>a(n).specialAttacks,lt,(H,N)=>{var Ee=fn(),oe=t(Ee),Ve=t(oe,!0);e(oe);var Te=s(oe,2),$e=t(Te,!0);e(Te),e(Ee),b(()=>{r(Ve,a(N).name),r($e,a(N).desc)}),l(H,Ee)}),e(T),b(H=>r(ke,H),[()=>i()("session.enemy_modal.special_attacks")]),l(g,T)};h(R,g=>{a(n).specialAttacks.length>0&&g(G)})}var ae=s(R,2);{var fe=g=>{var T=yn(),L=t(T),ke=t(L,!0);e(L);var ge=s(L,2);Pe(ge,17,()=>a(n).endOfRound,lt,(H,N)=>{var Ee=hn(),oe=t(Ee),Ve=t(oe,!0);e(oe);var Te=s(oe,2),$e=t(Te,!0);e(Te),e(Ee),b(()=>{r(Ve,a(N).name),r($e,a(N).desc)}),l(H,Ee)}),e(T),b(H=>r(ke,H),[()=>i()("session.enemy_modal.end_of_round")]),l(g,T)};h(ae,g=>{a(n).endOfRound.length>0&&g(fe)})}e(Le),e(we),e(gt),e(Ie),e(ve);var de=s(ve,2);de.__change=ze,er(de,g=>z(ue,g),()=>a(ue));var Je=s(de,2);Gs(Je,{get isOpen(){return a(C)},get imageUrl(){return a(K)},onClose:()=>z(C,!1),onCrop:he}),b((g,T,L,ke,ge,H,N,Ee,oe,Ve,Te,$e,rt,wt,kt,Yt,St,Kt,na,ua,Ea,Ua,ya)=>{r(It,g),qe(W,1,`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a(f)==="stats"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(Oe,T),qe(Se,1,`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a(f)==="attributes"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(We,L),qe(et,1,`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a(f)==="abilities"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(bt,ke),r(Ae,ge),r(ct,` ${H??""}`),r(F,` ${N??""}`),r(aa,Ee),r(Ot,`${oe??""} ${a(n).difficulty??""}`),r(Ft,`${Ve??""} ${a(n).size??""} ${a(n).descriptors??""}`),r(pt,Te),r(jt,`${a(n).perception??""} (${$e??""})`),r(Zt,rt),r(ia,a(n).defense),r(fa,wt),r(ca,a(n).health),r(w,kt),r(le,` ${a(n).attributes.strength??""} (${Yt??""}), `),r(Xe,St),r(Mt,` ${a(n).attributes.agility??""} (${Kt??""}), `),r(c,na),r(_,` ${a(n).attributes.intellect??""} (${ua??""}), `),r(Y,Ea),r(J,` ${a(n).attributes.will??""} (${Ua??""})`),r(y,ya),r(X,a(n).speed)},[()=>i()("session.enemy_modal.title_sotdl"),()=>i()("session.enemy_modal.tab_general"),()=>i()("session.enemy_modal.tab_attributes"),()=>i()("session.enemy_modal.tab_abilities"),()=>i()("common.buttons.cancel"),()=>i()("common.buttons.save"),()=>i()("session.enemy_modal.preview"),()=>a(n).name||i()("session.enemy_modal.enemy_default"),()=>i()("session.enemies.difficulty").toUpperCase(),()=>i()("session.enemy_modal.size"),()=>i()("sofdl.attributes.perception"),()=>ye(a(n).perception),()=>i()("session.enemy_modal.defense"),()=>i()("session.enemy_modal.health"),()=>i()("sofdl.attributes.strength"),()=>ye(a(n).attributes.strength),()=>i()("sofdl.attributes.agility"),()=>ye(a(n).attributes.agility),()=>i()("sofdl.attributes.intellect"),()=>ye(a(n).attributes.intellect),()=>i()("sofdl.attributes.will"),()=>ye(a(n).attributes.will),()=>i()("session.enemy_modal.speed")]),l(S,V)};h(be,S=>{se()&&S(Ne)})}l(P,Ge),za(),I()}Ca(["click","change"]);var $n=v('<div class="space-y-4"><div class="flex items-center gap-4"><div class="relative group cursor-pointer"><div class="w-16 h-16 rounded-xl overflow-hidden border border-slate-700"><!></div> <div class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"><!></div></div> <div class="flex-1"><label for="enemy-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold text-lg"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-diff" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-diff" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-size" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-size" type="number" step="0.5" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div><label for="enemy-desc" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <textarea id="enemy-desc" class="w-full bg-slate-900 border border-slate-700 rounded p-3 text-white text-sm min-h-[100px] resize-none focus:border-indigo-500 focus:outline-none transition-colors"></textarea></div> <div class="grid grid-cols-1"><div><label for="enemy-speed" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-speed" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div></div>'),zn=v('<div class="bg-slate-900 p-2 rounded border border-slate-700 text-center"><label class="text-[10px] text-slate-500 uppercase font-bold block mb-1"> </label> <input type="number" class="w-full bg-transparent text-center font-bold text-white text-xl focus:outline-none mb-1"/> <div> </div></div>'),Cn=v('<div class="space-y-6"><div><h4 class="text-indigo-400 font-bold text-sm uppercase mb-3"> </h4> <div class="grid grid-cols-4 gap-3"></div></div> <div class="space-y-3"><div><label for="enemy-senses" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-senses" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-langs" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-langs" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-immune" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-immune" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div></div></div>'),On=v('<div class="flex gap-2 items-start animate-in fade-in slide-in-from-left-2"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600 focus:border-indigo-500 focus:outline-none"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none focus:border-indigo-500 focus:outline-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),jn=v('<div class="text-xs text-slate-600 italic text-center py-4 border-2 border-dashed border-slate-800 rounded"> </div>'),En=v('<div><div class="flex justify-between items-center mb-3"><h4> </h4> <button class="text-xs bg-slate-800 px-2 py-1 rounded hover:bg-slate-700 text-white flex items-center gap-1 border border-slate-700"><!> </button></div> <div class="space-y-3"><!> <!></div></div>'),Mn=v('<div class="space-y-6"></div>'),Rn=v('<div class="w-16 h-16 rounded-lg overflow-hidden border border-slate-700 shadow-lg flex-shrink-0"><!></div>'),In=v('<div class="bg-slate-950 p-2 rounded border border-slate-800"><div class="text-[10px] text-slate-500 uppercase font-bold mb-1"> </div> <div class="text-white font-bold"> <span> </span></div></div>'),Sn=v('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),Nn=v('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),An=v('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),Dn=v('<div class="mb-2 pl-3 border-l-2 border-indigo-900"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),Tn=v('<div><h4 class="font-bold text-indigo-400 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Pn=v('<div class="mb-2 pl-3 border-l-2 border-red-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),Un=v('<div><h4 class="font-bold text-red-500 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Hn=v('<div class="mb-2 pl-3 border-l-2 border-orange-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),Ln=v('<div><h4 class="font-bold text-orange-400 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Fn=v('<div class="mb-2 pl-3 border-l-2 border-yellow-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),qn=v('<div><h4 class="font-bold text-yellow-500 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Bn=v('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-6xl h-[90vh] border border-slate-700 shadow-2xl overflow-hidden flex flex-col lg:flex-row" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="w-full lg:w-1/2 flex flex-col h-full border-r border-slate-700"><div class="p-4 border-b border-slate-700 bg-slate-900 flex justify-between items-center"><h3 id="modal-title" class="font-bold text-white text-lg"> </h3> <button class="lg:hidden text-slate-400 hover:text-white"><!></button></div> <div class="flex border-b border-slate-700 bg-slate-900/50"><button> </button> <button> </button> <button> </button></div> <div class="flex-1 overflow-y-auto p-6 custom-scrollbar bg-slate-800/50"><!></div> <div class="p-4 border-t border-slate-700 bg-slate-900 flex justify-end gap-3"><button class="px-6 py-2 rounded bg-slate-800 hover:bg-slate-700 text-white font-bold transition-colors"> </button> <button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold flex items-center gap-2 transition-colors"><!> </button></div></div> <div class="hidden lg:flex w-1/2 bg-slate-950 flex-col border-l border-slate-800"><div class="p-4 border-b border-slate-800 bg-slate-950"><h3 class="font-bold text-slate-500 text-xs uppercase flex items-center gap-2"><!> </h3></div> <div class="flex-1 p-8 overflow-y-auto flex items-center justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-slate-950"><div class="w-full max-w-md bg-slate-900 border border-slate-700 rounded-xl p-5 shadow-2xl relative"><div class="absolute -top-3 -right-3 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-red-400"> </div> <div class="flex items-center gap-3 mb-4"><!> <div class="flex-1 min-w-0"><h2 class="text-2xl font-bold text-white mb-1 font-serif tracking-wide truncate"> </h2> <div class="h-1 w-20 bg-red-600 rounded-full"></div></div></div> <div class="grid grid-cols-2 gap-4 mb-4 text-sm"><div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold text-lg"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold text-lg"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold"> </span></div></div> <div class="grid grid-cols-4 gap-2 mb-6 text-center font-mono text-slate-300"></div> <div class="mb-6 space-y-2 text-xs"><!> <!> <!></div> <div class="space-y-5 text-sm"><!> <!> <!> <!></div></div></div></div></div></div> <input type="file" hidden="" accept="image/*"/> <!>',1);function Wn(P,o){$a(o,!0);const i=()=>Ct(da,"$t",p),[p,I]=Oa();let se=ta(o,"isOpen",3,!1),A=ta(o,"initialData",3,"{}"),n=Ye(ka(ie())),f=Ye("stats"),C=Ye(!1),K=Ye(""),ue=Ye(void 0);function ze(Ce){const Re=Ce.target.files;if(Re&&Re.length>0){const Be=Re[0],He=new FileReader;He.onload=()=>{z(K,He.result,!0),z(C,!0)},He.readAsDataURL(Be)}Ce.target&&(Ce.target.value="")}async function he(Ce){try{const Re=await Qs(Ce);a(n).imageUrl=Re,z(C,!1)}catch(Re){console.error(Re),alert(Re.message||"Erro ao salvar imagem")}}function ie(){return{name:"",difficulty:1,defense:10,health:10,damage:0,size:1,speed:10,description:"",senses:"",languages:"",immune:"",imageUrl:"",stats:{str:10,agi:10,int:10,wil:10},traits:[],actions:[],reactions:[],endOfRound:[]}}fs(()=>{if(se()&&A())try{const Ce=JSON.parse(A());Object.keys(Ce).length===0?z(n,ie(),!0):z(n,{...ie(),...Ce},!0)}catch{z(n,ie(),!0)}});function ye(Ce){a(n)[Ce]=[...a(n)[Ce],{name:"",desc:""}]}function Q(Ce,Re){a(n)[Ce]=a(n)[Ce].filter((Be,He)=>He!==Re)}function Me(Ce){}var ne=mt(),tt=Ue(ne);{var xt=Ce=>{var Re=Bn(),Be=Ue(Re);Be.__click=Me;var He=t(Be),Ge=t(He),be=t(Ge),Ne=t(be),S=t(Ne,!0);e(Ne);var V=s(Ne,2);V.__click=function(...u){o.onClose?.apply(this,u)};var ve=t(V);Pa(ve,{size:20}),e(V),e(be);var Ie=s(be,2),at=t(Ie);at.__click=()=>z(f,"stats");var st=t(at,!0);e(at);var Ke=s(at,2);Ke.__click=()=>z(f,"attributes");var It=t(Ke,!0);e(Ke);var dt=s(Ke,2);dt.__click=()=>z(f,"abilities");var Ut=t(dt,!0);e(dt),e(Ie);var ft=s(Ie,2),W=t(ft);{var Oe=u=>{var x=$n(),y=t(x),E=t(y);E.__click=()=>a(ue)?.click();var X=t(E),D=t(X);Is(D,()=>a(n).imageUrl,$e=>{vs($e,{get hash(){return a(n).imageUrl},get alt(){return a(n).name},size:"custom",fallbackText:"?"})}),e(X);var q=s(X,2),re=t(q);Zs(re,{size:20,class:"text-white"}),e(q),e(E);var me=s(E,2),O=t(me),B=t(O,!0);e(O);var te=s(O,2);it(te),e(me),e(y);var M=s(y,2),R=t(M),G=t(R),ae=t(G,!0);e(G);var fe=s(G);it(fe),e(R);var de=s(R,2),Je=t(de),g=t(Je,!0);e(Je);var T=s(Je);it(T),e(de),e(M);var L=s(M,2),ke=t(L),ge=t(ke,!0);e(ke);var H=s(ke,2);Da(H),e(L);var N=s(L,2),Ee=t(N),oe=t(Ee),Ve=t(oe,!0);e(oe);var Te=s(oe);it(Te),e(Ee),e(N),e(x),b(($e,rt,wt,kt,Yt,St)=>{r(B,$e),r(ae,rt),r(g,wt),r(ge,kt),ee(H,"placeholder",Yt),r(Ve,St)},[()=>i()("session.enemy_modal.name"),()=>i()("session.enemy_modal.difficulty"),()=>i()("session.enemy_modal.size"),()=>i()("session.enemy_modal.description"),()=>i()("session.enemy_modal.description_placeholder"),()=>i()("session.enemy_modal.speed")]),Fe(te,()=>a(n).name,$e=>a(n).name=$e),Fe(fe,()=>a(n).difficulty,$e=>a(n).difficulty=$e),Fe(T,()=>a(n).size,$e=>a(n).size=$e),Fe(H,()=>a(n).description,$e=>a(n).description=$e),Fe(Te,()=>a(n).speed,$e=>a(n).speed=$e),l(u,x)},Se=u=>{var x=mt(),y=Ue(x);{var E=D=>{var q=Cn(),re=t(q),me=t(re),O=t(me,!0);e(me);var B=s(me,2);Pe(B,20,()=>["str","agi","int","wil"],lt,(H,N)=>{var Ee=zn(),oe=t(Ee),Ve=t(oe,!0);e(oe);var Te=s(oe,2);it(Te);var $e=s(Te,2),rt=t($e);e($e),e(Ee),b(wt=>{ee(oe,"for",`attr-${N??""}`),r(Ve,wt),ee(Te,"id",`attr-${N??""}`),qe($e,1,`text-xs font-bold ${a(n).stats[N]-10>=0?"text-green-500":"text-red-500"}`),r(rt,`${a(n).stats[N]-10>=0?"+":""}${a(n).stats[N]-10}`)},[()=>i()("sofww.attributes."+N).substring(0,3)]),Fe(Te,()=>a(n).stats[N],wt=>a(n).stats[N]=wt),l(H,Ee)}),e(B),e(re);var te=s(re,2),M=t(te),R=t(M),G=t(R,!0);e(R);var ae=s(R);it(ae),e(M);var fe=s(M,2),de=t(fe),Je=t(de,!0);e(de);var g=s(de);it(g),e(fe);var T=s(fe,2),L=t(T),ke=t(L,!0);e(L);var ge=s(L);it(ge),e(T),e(te),e(q),b((H,N,Ee,oe,Ve,Te,$e)=>{r(O,H),r(G,N),ee(ae,"placeholder",Ee),r(Je,oe),ee(g,"placeholder",Ve),r(ke,Te),ee(ge,"placeholder",$e)},[()=>i()("session.enemy_modal.main_attributes"),()=>i()("session.enemy_modal.senses"),()=>i()("session.enemy_modal.senses_placeholder"),()=>i()("session.enemy_modal.languages"),()=>i()("session.enemy_modal.languages_placeholder"),()=>i()("session.enemy_modal.immunities"),()=>i()("session.enemy_modal.immunities_placeholder")]),Fe(ae,()=>a(n).senses,H=>a(n).senses=H),Fe(g,()=>a(n).languages,H=>a(n).languages=H),Fe(ge,()=>a(n).immune,H=>a(n).immune=H),l(D,q)},X=D=>{var q=mt(),re=Ue(q);{var me=O=>{var B=Mn();Pe(B,20,()=>[{key:"traits",label:"traits",color:"text-indigo-400",border:"border-indigo-500/30"},{key:"actions",label:"actions",color:"text-red-400",border:"border-red-500/30"},{key:"reactions",label:"reactions",color:"text-orange-400",border:"border-orange-500/30"},{key:"endOfRound",label:"end_of_round",color:"text-yellow-400",border:"border-yellow-500/30"}],lt,(te,M)=>{var R=En(),G=t(R),ae=t(G),fe=t(ae,!0);e(ae);var de=s(ae,2);de.__click=()=>ye(M.key);var Je=t(de);la(Je,{size:12});var g=s(Je);e(de),e(G);var T=s(G,2),L=t(T);Pe(L,17,()=>a(n)[M.key],lt,(H,N,Ee)=>{var oe=On(),Ve=t(oe),Te=t(Ve);it(Te);var $e=s(Te,2);Da($e),e(Ve);var rt=s(Ve,2);rt.__click=()=>Q(M.key,Ee);var wt=t(rt);ba(wt,{size:16}),e(rt),e(oe),b((kt,Yt)=>{ee(Te,"placeholder",kt),ee($e,"placeholder",Yt)},[()=>i()("session.enemy_modal.name_placeholder"),()=>i()("session.enemy_modal.desc_placeholder")]),Fe(Te,()=>a(N).name,kt=>a(N).name=kt),Fe($e,()=>a(N).desc,kt=>a(N).desc=kt),l(H,oe)});var ke=s(L,2);{var ge=H=>{var N=jn(),Ee=t(N,!0);e(N),b(oe=>r(Ee,oe),[()=>i()("session.enemy_modal.empty")]),l(H,N)};h(ke,H=>{a(n)[M.key].length===0&&H(ge)})}e(T),e(R),b((H,N)=>{qe(R,1,`p-4 bg-slate-900 rounded border ${M.border??""}`),qe(ae,1,`font-bold text-sm uppercase ${M.color??""}`),r(fe,H),r(g,` ${N??""}`)},[()=>i()("session.enemy_modal."+M.label),()=>i()("session.enemy_modal.add")]),l(te,R)}),e(B),l(O,B)};h(re,O=>{a(f)==="abilities"&&O(me)},!0)}l(D,q)};h(y,D=>{a(f)==="attributes"?D(E):D(X,!1)},!0)}l(u,x)};h(W,u=>{a(f)==="stats"?u(Oe):u(Se,!1)})}e(ft);var We=s(ft,2),et=t(We);et.__click=function(...u){o.onClose?.apply(this,u)};var bt=t(et,!0);e(et);var Z=s(et,2);Z.__click=()=>o.onSave(a(n));var De=t(Z);Ss(De,{size:18});var U=s(De);e(Z),e(We),e(Ge);var _e=s(Ge,2),je=t(_e),pe=t(je),Ae=t(pe);Rs(Ae,{size:14});var vt=s(Ae);e(pe),e(je);var Qe=s(je,2),ct=t(Qe),gt=t(ct),$t=t(gt);e(gt);var qt=s(gt,2),$=t(qt);{var F=u=>{var x=Rn(),y=t(x);vs(y,{get hash(){return a(n).imageUrl},get alt(){return a(n).name},size:"custom"}),e(x),l(u,x)};h($,u=>{a(n).imageUrl&&u(F)})}var we=s($,2),Le=t(we),ht=t(Le,!0);e(Le),wa(2),e(we),e(qt);var yt=s(qt,2),nt=t(yt),Ht=t(nt),Gt=t(Ht,!0);e(Ht);var ea=s(Ht,2),aa=t(ea,!0);e(ea),e(nt);var At=s(nt,2),Ot=t(At),Lt=t(Ot,!0);e(Ot);var Ft=s(Ot,2),Qt=t(Ft,!0);e(Ft),e(At);var Ze=s(At,2),pt=t(Ze),_t=t(pt,!0);e(pt);var jt=s(pt,2),Bt=t(jt,!0);e(jt),e(Ze);var Wt=s(Ze,2),Et=t(Wt),Jt=t(Et,!0);e(Et);var Zt=s(Et,2),Xt=t(Zt,!0);e(Zt),e(Wt),e(yt);var ia=s(yt,2);Pe(ia,20,()=>["str","agi","int","wil"],lt,(u,x)=>{var y=In(),E=t(y),X=t(E,!0);e(E);var D=s(E,2),q=t(D),re=s(q),me=t(re);e(re),e(D),e(y),b(()=>{r(X,x),r(q,`${a(n).stats[x]??""} `),qe(re,1,`text-xs ${a(n).stats[x]-10>=0?"text-green-500":"text-red-500"}`),r(me,`(${a(n).stats[x]-10>=0?"+":""}${a(n).stats[x]-10})`)}),l(u,y)}),e(ia);var sa=s(ia,2),fa=t(sa);{var ga=u=>{var x=Sn(),y=t(x),E=t(y);e(y);var X=s(y,2),D=t(X,!0);e(X),e(x),b(q=>{r(E,`${q??""}:`),r(D,a(n).senses)},[()=>i()("session.enemy_modal.senses")]),l(u,x)};h(fa,u=>{a(n).senses&&u(ga)})}var ca=s(fa,2);{var ha=u=>{var x=Nn(),y=t(x),E=t(y);e(y);var X=s(y,2),D=t(X,!0);e(X),e(x),b(q=>{r(E,`${q??""}:`),r(D,a(n).languages)},[()=>i()("session.enemy_modal.languages")]),l(u,x)};h(ca,u=>{a(n).languages&&u(ha)})}var ja=s(ca,2);{var m=u=>{var x=An(),y=t(x),E=t(y);e(y);var X=s(y,2),D=t(X,!0);e(X),e(x),b(q=>{r(E,`${q??""}:`),r(D,a(n).immune)},[()=>i()("session.enemy_modal.immunities")]),l(u,x)};h(ja,u=>{a(n).immune&&u(m)})}e(sa);var w=s(sa,2),le=t(w);{var xe=u=>{var x=Tn(),y=t(x),E=t(y,!0);e(y);var X=s(y,2);Pe(X,17,()=>a(n).traits,lt,(D,q,re,me)=>{var O=Dn(),B=t(O),te=t(B);e(B);var M=s(B,2),R=t(M,!0);e(M),e(O),b(()=>{r(te,`${a(q).name??""}:`),r(R,a(q).desc)}),l(D,O)}),e(x),b(D=>r(E,D),[()=>i()("session.enemy_modal.traits")]),l(u,x)};h(le,u=>{a(n).traits.length>0&&u(xe)})}var Xe=s(le,2);{var Mt=u=>{var x=Un(),y=t(x),E=t(y,!0);e(y);var X=s(y,2);Pe(X,17,()=>a(n).actions,lt,(D,q,re,me)=>{var O=Pn(),B=t(O),te=t(B);e(B);var M=s(B,2),R=t(M,!0);e(M),e(O),b(()=>{r(te,`${a(q).name??""}:`),r(R,a(q).desc)}),l(D,O)}),e(x),b(D=>r(E,D),[()=>i()("session.enemy_modal.actions")]),l(u,x)};h(Xe,u=>{a(n).actions.length>0&&u(Mt)})}var d=s(Xe,2);{var c=u=>{var x=Ln(),y=t(x),E=t(y,!0);e(y);var X=s(y,2);Pe(X,17,()=>a(n).reactions,lt,(D,q,re,me)=>{var O=Hn(),B=t(O),te=t(B);e(B);var M=s(B,2),R=t(M,!0);e(M),e(O),b(()=>{r(te,`${a(q).name??""}:`),r(R,a(q).desc)}),l(D,O)}),e(x),b(D=>r(E,D),[()=>i()("session.enemy_modal.reactions")]),l(u,x)};h(d,u=>{a(n).reactions.length>0&&u(c)})}var _=s(d,2);{var k=u=>{var x=qn(),y=t(x),E=t(y,!0);e(y);var X=s(y,2);Pe(X,17,()=>a(n).endOfRound,lt,(D,q,re,me)=>{var O=Fn(),B=t(O),te=t(B);e(B);var M=s(B,2),R=t(M,!0);e(M),e(O),b(()=>{r(te,`${a(q).name??""}:`),r(R,a(q).desc)}),l(D,O)}),e(x),b(D=>r(E,D),[()=>i()("session.enemy_modal.end_of_round")]),l(u,x)};h(_,u=>{a(n).endOfRound.length>0&&u(k)})}e(w),e(ct),e(Qe),e(_e),e(He),e(Be);var Y=s(Be,2);Y.__change=ze,er(Y,u=>z(ue,u),()=>a(ue));var J=s(Y,2);Gs(J,{get isOpen(){return a(C)},get imageUrl(){return a(K)},onClose:()=>z(C,!1),onCrop:he}),b((u,x,y,E,X,D,q,re,me,O,B,te,M,R)=>{ee(Be,"aria-label",u),r(S,x),qe(at,1,`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a(f)==="stats"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(st,y),qe(Ke,1,`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a(f)==="attributes"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(It,E),qe(dt,1,`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a(f)==="abilities"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(Ut,X),r(bt,D),r(U,` ${q??""}`),r(vt,` ${re??""}`),r($t,`${me??""} ${a(n).difficulty??""}`),r(ht,O),r(Gt,B),r(aa,a(n).defense),r(Lt,te),r(Qt,a(n).health),r(_t,M),r(Bt,a(n).size),r(Jt,R),r(Xt,a(n).speed)},[()=>i()("session.enemy_modal.close"),()=>i()("session.enemy_modal.title"),()=>i()("session.enemy_modal.tab_general"),()=>i()("session.enemy_modal.tab_attributes"),()=>i()("session.enemy_modal.tab_abilities"),()=>i()("common.buttons.cancel"),()=>i()("common.buttons.save"),()=>i()("session.enemy_modal.preview"),()=>i()("session.enemy_modal.difficulty"),()=>a(n).name||i()("session.enemy_modal.enemy_default"),()=>i()("session.enemy_modal.defense"),()=>i()("session.enemy_modal.health"),()=>i()("session.enemy_modal.size"),()=>i()("session.enemy_modal.speed")]),l(Ce,Re)};h(tt,Ce=>{se()&&Ce(xt)})}l(P,ne),za(),I()}Ca(["click","change"]);var Jn=v('<div class="flex justify-between items-center bg-slate-800 p-2 rounded border border-slate-700"><div class="flex-1"><div class="text-sm font-bold text-white"> </div> <div class="text-[10px] text-slate-400"> </div></div> <div class="flex items-center gap-2"><input type="number" min="1" class="w-12 bg-slate-900 border border-slate-600 rounded text-center text-white"/> <button class="text-red-400 hover:text-red-300"><!></button></div></div>'),Vn=v('<div class="text-center text-slate-600 italic text-sm py-4"> </div>'),Gn=v('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 hover:border-indigo-500/30 transition-colors"><div><div class="text-sm font-bold text-white max-w-[120px] truncate"> </div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-indigo-400 hover:text-white p-1 bg-slate-900 rounded border border-slate-800"><!></button></div>'),Qn=v('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-2xl p-6 border border-slate-700 shadow-2xl flex flex-col max-h-[90vh]" role="dialog" aria-modal="true" aria-labelledby="encounter-modal-title"><div class="flex justify-between items-center mb-6"><h3 id="encounter-modal-title" class="text-xl font-bold text-white"> </h3> <button class="text-slate-400 hover:text-white"><!></button></div> <div class="space-y-4 mb-6"><div><label for="encounter-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="encounter-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white outline-hidden focus:border-indigo-500"/></div></div> <div class="flex-1 flex gap-4 min-h-0"><div class="flex-1 bg-slate-900 border border-slate-800 rounded-lg p-3 flex flex-col"><h4 class="text-xs text-slate-500 uppercase font-bold mb-2"> </h4> <div class="flex-1 overflow-y-auto space-y-2 custom-scrollbar"><!> <!></div></div> <div class="flex-1 bg-slate-900 border border-slate-800 rounded-lg p-3 flex flex-col"><h4 class="text-xs text-slate-500 uppercase font-bold mb-2"> </h4> <div class="flex-1 overflow-y-auto space-y-2 custom-scrollbar"></div></div></div> <div class="flex gap-3 mt-6 pt-4 border-t border-slate-700"><button class="flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded font-bold"> </button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-2 rounded font-bold flex items-center justify-center gap-2"><!> </button></div></div></div>');function Zn(P,o){$a(o,!0);const i=()=>Ct(da,"$t",I),p=()=>Ct(Ms,"$liveEnemies",I),[I,se]=Oa();let A=ta(o,"isOpen",3,!1),n=ta(o,"initialData",3,"{}"),f=Ye(ka({name:"",enemies:[]}));fs(()=>{if(A()&&n())try{const Q=JSON.parse(n());z(f,{name:Q.name||"",enemies:Q.enemies||[]},!0)}catch{z(f,{name:"",enemies:[]},!0)}});function C(Q){a(f).enemies.find(ne=>ne.enemyId===Q)?a(f).enemies=a(f).enemies.map(ne=>ne.enemyId===Q?{...ne,count:ne.count+1}:ne):a(f).enemies=[...a(f).enemies,{enemyId:Q,count:1}]}function K(Q){a(f).enemies=a(f).enemies.filter((Me,ne)=>ne!==Q)}function ue(Q,Me){const ne=Math.max(1,parseInt(Me)||1);a(f).enemies[Q].count=ne}function ze(Q){}var he=mt(),ie=Ue(he);{var ye=Q=>{var Me=Qn();Me.__click=ze;var ne=t(Me),tt=t(ne),xt=t(tt),Ce=t(xt,!0);e(xt);var Re=s(xt,2);Re.__click=function(...U){o.onClose?.apply(this,U)};var Be=t(Re);Pa(Be,{size:20}),e(Re),e(tt);var He=s(tt,2),Ge=t(He),be=t(Ge),Ne=t(be,!0);e(be);var S=s(be,2);it(S),e(Ge),e(He);var V=s(He,2),ve=t(V),Ie=t(ve),at=t(Ie,!0);e(Ie);var st=s(Ie,2),Ke=t(st);Pe(Ke,17,()=>a(f).enemies,lt,(U,_e,je)=>{const pe=ce(()=>p().find(Le=>Le.id===a(_e).enemyId));var Ae=Jn(),vt=t(Ae),Qe=t(vt),ct=t(Qe,!0);e(Qe);var gt=s(Qe,2),$t=t(gt);e(gt),e(vt);var qt=s(vt,2),$=t(qt);it($),$.__input=Le=>ue(je,Le.target.value);var F=s($,2);F.__click=()=>K(je);var we=t(F);ba(we,{size:16}),e(F),e(qt),e(Ae),b(Le=>{r(ct,Le),r($t,`Dif ${(a(pe)?a(pe).difficulty:"?")??""}`),js($,a(_e).count)},[()=>a(pe)?a(pe).name:i()("session.encounter_modal.unknown")]),l(U,Ae)});var It=s(Ke,2);{var dt=U=>{var _e=Vn(),je=t(_e,!0);e(_e),b(pe=>r(je,pe),[()=>i()("session.encounter_modal.none_added")]),l(U,_e)};h(It,U=>{a(f).enemies.length===0&&U(dt)})}e(st),e(ve);var Ut=s(ve,2),ft=t(Ut),W=t(ft,!0);e(ft);var Oe=s(ft,2);Pe(Oe,5,p,U=>U.id,(U,_e)=>{var je=Gn(),pe=t(je),Ae=t(pe),vt=t(Ae,!0);e(Ae);var Qe=s(Ae,2),ct=t(Qe);e(Qe),e(pe);var gt=s(pe,2);gt.__click=()=>C(a(_e).id);var $t=t(gt);la($t,{size:16}),e(gt),e(je),b(()=>{r(vt,a(_e).name),r(ct,`Dif ${a(_e).difficulty??""}`)}),l(U,je)}),e(Oe),e(Ut),e(V);var Se=s(V,2),We=t(Se);We.__click=function(...U){o.onClose?.apply(this,U)};var et=t(We,!0);e(We);var bt=s(We,2);bt.__click=()=>o.onSave(a(f));var Z=t(bt);Ss(Z,{size:18});var De=s(Z);e(bt),e(Se),e(ne),e(Me),b((U,_e,je,pe,Ae,vt,Qe,ct)=>{ee(Me,"aria-label",U),r(Ce,_e),r(Ne,je),ee(S,"placeholder",pe),r(at,Ae),r(W,vt),r(et,Qe),r(De,` ${ct??""}`)},[()=>i()("session.encounter_modal.close"),()=>i()("session.encounter_modal.title"),()=>i()("session.encounter_modal.name"),()=>i()("session.encounter_modal.name_placeholder"),()=>i()("session.encounter_modal.enemies_in_encounter"),()=>i()("session.encounter_modal.add_enemies"),()=>i()("common.buttons.cancel"),()=>i()("session.encounter_modal.save_encounter")]),Fe(S,()=>a(f).name,U=>a(f).name=U),l(Q,Me)};h(ie,Q=>{A()&&Q(ye)})}l(P,he),za(),se()}Ca(["click","input"]);var Xn=v('<div class="text-[10px] text-slate-400 flex items-center gap-1.5 bg-slate-950 p-1 px-1.5 rounded-lg border border-slate-800/50"><span class="text-indigo-400 font-black"> </span> <span class="font-medium truncate max-w-[80px]"> </span></div>'),Yn=v('<div class="text-[10px] text-slate-600 italic"> </div>'),Kn=v('<div class="bg-slate-900 border border-slate-800 rounded-2xl p-4 transition-all hover:border-indigo-500/30 group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10" role="region"><div class="flex-1"><div class="font-bold text-white text-base mb-2 group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate"> </div> <div class="flex flex-wrap gap-1"><!> <!></div></div> <div class="flex gap-2 mt-3 pt-3 border-t border-slate-800/50"><button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-1.5 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition-all active:scale-95 shadow-lg shadow-indigo-900/20"><!> </button> <button class="p-1.5 text-slate-400 hover:text-white bg-slate-800/50 rounded-lg border border-slate-800 transition-all" title="Editar"><!></button> <button class="p-1.5 text-slate-400 hover:text-red-400 bg-slate-800/50 rounded-lg border border-slate-800 hover:border-red-900/30 transition-all"><!></button></div></div>'),eo=v('<button class="text-[10px] font-bold text-indigo-400 hover:text-indigo-300 mt-1 uppercase tracking-wider"> </button>'),to=v('<div class="mb-4 flex-1"><p> </p> <!></div>'),ao=v('<div class="mb-4 flex-1 text-[10px] text-slate-600 italic"> </div>'),so=v('<div class="bg-slate-900 border border-slate-800 rounded-2xl p-5 hover:border-indigo-500/30 transition-all relative group cursor-move hover:shadow-lg hover:shadow-indigo-500/10 active:scale-[0.98] flex flex-col" draggable="true" role="listitem"><div class="flex justify-between items-start mb-3"><h3 class="font-bold text-lg text-white group-hover:text-indigo-400 transition-colors"> </h3> <span class="text-[10px] font-black bg-indigo-500/10 text-indigo-400 border border-indigo-400/20 px-2 py-1 rounded-lg uppercase"> </span></div> <!> <div class="mt-auto flex gap-2 pt-4 border-t border-slate-800/50"><button class="flex-1 bg-slate-800/50 hover:bg-slate-800 text-white py-2 rounded-xl text-xs font-bold border border-slate-800 transition-all"> </button> <button class="bg-slate-800/50 hover:bg-red-900/20 text-slate-500 hover:text-red-400 px-3 rounded-xl border border-slate-800 hover:border-red-900/30 transition-all"><!></button></div></div>'),ro=v('<div class="text-center text-slate-500 italic col-span-3"> </div>'),io=v('<div><div class="mb-12"><div class="flex justify-between items-center mb-6"><h3 class="text-sm font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2"><!> </h3></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><button class="min-h-[120px] border-2 border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-400 transition-all hover:bg-indigo-500/5 gap-2 group"><!> <span class="font-bold text-sm"> </span></button> <!></div></div> <div class="mb-6"><h3 class="text-sm font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2 mb-6"><!> </h3></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><button class="min-h-[180px] border-2 border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-400 transition-all hover:bg-indigo-500/5 gap-2 group"><!> <span class="font-bold text-sm"> </span></button> <!> <!></div> <!> <!> <!></div>');function no(P,o){$a(o,!0);const i=()=>Ct(Ms,"$liveEnemies",se),p=()=>Ct(Fs,"$liveEncounters",se),I=()=>Ct(da,"$t",se),[se,A]=Oa();let n=Ye(!1),f=Ye(null),C=Ye("{}"),K=Ye(!1),ue=Ye(null),ze=Ye("{}"),he=Ye(ka({isOpen:!1,title:"",message:"",onConfirm:()=>{}}));function ie(){return{name:"",difficulty:1,defense:10,health:10,damage:0,size:1,speed:10,description:"",senses:"",languages:"",immune:"",stats:{str:10,agi:10,int:10,wil:10},traits:[],actions:[],reactions:[],endOfRound:[]}}function ye($=null){z(f,$?$.id:null,!0),$?z(C,JSON.stringify($),!0):a(Ne)==="sofdl"?z(C,"{}"):z(C,JSON.stringify(ie()),!0),z(n,!0)}let Q=ka(new Set);function Me($){Q.has($)?Q.delete($):Q.add($)}function ne($){const F=a(f)||ds(),we=Vt.get(o.campId);Ts.set(F,{...$,id:F,campaignId:o.campId,system:we?.system||"sofww"}),z(n,!1)}function tt($){const F=i().find(we=>we.id===$);z(he,{isOpen:!0,title:"Excluir Inimigo",message:`Tem certeza que deseja excluir permanentemente o inimigo "${F?.name||"este inimigo"}"?`,onConfirm:()=>{Ts.delete($),a(he).isOpen=!1}},!0)}function xt($=null){z(ue,$?$.id:null,!0),z(ze,JSON.stringify($||{name:"",enemies:[]}),!0),z(K,!0)}function Ce($){const F=a(ue)||ds();Cs.set(F,{...$,id:F}),z(K,!1)}function Re($){const F=p().find(we=>we.id===$);z(he,{isOpen:!0,title:"Excluir Encontro",message:`Tem certeza que deseja excluir permanentemente o encontro "${F?.name||"este encontro"}"?`,onConfirm:()=>{Cs.delete($),a(he).isOpen=!1}},!0)}function Be($){const F=Vt.get(o.campId);if(!F)return;const we=F.activeEnemies||[];let Le=[];$.enemies.forEach(ht=>{const yt=i().find(nt=>nt.id===ht.enemyId);if(yt)for(let nt=0;nt<ht.count;nt++)Le.push({...yt,instanceId:ds(),damage:0,currentHealth:yt.health,afflictions:[],acted:!1,initiative:!1})}),Vt.set(o.campId,{...F,activeEnemies:[...we,...Le]})}function He($,F){$.dataTransfer.setData("text/plain",F.id),$.dataTransfer.effectAllowed="copy"}function Ge($){return $.preventDefault(),!1}function be($,F){$.preventDefault();const we=$.dataTransfer.getData("text/plain");if(!we)return;const Le=F.enemies||[],ht=Le.find(nt=>nt.enemyId===we);let yt;ht?yt=Le.map(nt=>nt.enemyId===we?{...nt,count:nt.count+1}:nt):yt=[...Le,{enemyId:we,count:1}],Cs.set(F.id,{...F,enemies:yt})}let Ne=ce(()=>Vt.get(o.campId)?.system||"sofww"),S=ce(()=>i().filter($=>($.system||"sofww")===a(Ne)));var V=io(),ve=t(V),Ie=t(ve),at=t(Ie),st=t(at);tr(st,{size:16});var Ke=s(st);e(at),e(Ie);var It=s(Ie,2),dt=t(It);dt.__click=()=>xt();var Ut=t(dt);la(Ut,{size:28,class:"group-hover:scale-110 transition-transform"});var ft=s(Ut,2),W=t(ft,!0);e(ft),e(dt);var Oe=s(dt,2);Pe(Oe,1,p,$=>$.id,($,F)=>{var we=Kn(),Le=t(we),ht=t(Le),yt=t(ht,!0);e(ht);var nt=s(ht,2),Ht=t(nt);Pe(Ht,17,()=>a(F).enemies||[],lt,(_t,jt)=>{const Bt=ce(()=>i().find(ia=>ia.id===a(jt).enemyId));var Wt=Xn(),Et=t(Wt),Jt=t(Et);e(Et);var Zt=s(Et,2),Xt=t(Zt,!0);e(Zt),e(Wt),b(()=>{r(Jt,`${a(jt).count??""}x`),r(Xt,a(Bt)?a(Bt).name:"...")}),l(_t,Wt)});var Gt=s(Ht,2);{var ea=_t=>{var jt=Yn(),Bt=t(jt,!0);e(jt),b(Wt=>r(Bt,Wt),[()=>I()("session.bestiary.empty_encounter")]),l(_t,jt)};h(Gt,_t=>{a(F).enemies?.length||_t(ea)})}e(nt),e(Le);var aa=s(Le,2),At=t(aa);At.__click=()=>Be(a(F));var Ot=t(At);Ks(Ot,{size:12,fill:"currentColor"});var Lt=s(Ot);e(At);var Ft=s(At,2);Ft.__click=()=>xt(a(F));var Qt=t(Ft);Sr(Qt,{size:14}),e(Ft);var Ze=s(Ft,2);Ze.__click=()=>Re(a(F).id);var pt=t(Ze);ba(pt,{size:14}),e(Ze),e(aa),e(we),b(_t=>{ee(we,"aria-label",`Encontro ${a(F).name??""}`),r(yt,a(F).name),r(Lt,` ${_t??""}`)},[()=>I()("session.bestiary.start")]),zs("dragover",we,Ge),zs("drop",we,_t=>be(_t,a(F))),l($,we)}),e(It),e(ve);var Se=s(ve,2),We=t(Se),et=t(We);ms(et,{size:16});var bt=s(et);e(We),e(Se);var Z=s(Se,2),De=t(Z);De.__click=()=>ye();var U=t(De);la(U,{size:32,class:"group-hover:scale-110 transition-transform"});var _e=s(U,2),je=t(_e,!0);e(_e),e(De);var pe=s(De,2);Pe(pe,17,()=>a(S),$=>$.id,($,F)=>{var we=so(),Le=t(we),ht=t(Le),yt=t(ht,!0);e(ht);var nt=s(ht,2),Ht=t(nt);e(nt),e(Le);var Gt=s(Le,2);{var ea=Ze=>{var pt=to(),_t=t(pt),jt=t(_t,!0);e(_t);var Bt=s(_t,2);{var Wt=Et=>{var Jt=eo();Jt.__click=()=>Me(a(F).id);var Zt=t(Jt,!0);e(Jt),b(Xt=>r(Zt,Xt),[()=>Q.has(a(F).id)?I()("session.bestiary.see_less"):I()("session.bestiary.see_more")]),l(Et,Jt)};h(Bt,Et=>{a(F).description.length>120&&Et(Wt)})}e(pt),b(Et=>{qe(_t,1,`text-xs text-slate-400 leading-relaxed ${Et??""}`),r(jt,a(F).description)},[()=>Q.has(a(F).id)?"":"line-clamp-3"]),l(Ze,pt)},aa=Ze=>{var pt=ao(),_t=t(pt,!0);e(pt),b(jt=>r(_t,jt),[()=>I()("session.bestiary.no_description")]),l(Ze,pt)};h(Gt,Ze=>{a(F).description?Ze(ea):Ze(aa,!1)})}var At=s(Gt,2),Ot=t(At);Ot.__click=()=>ye(a(F));var Lt=t(Ot,!0);e(Ot);var Ft=s(Ot,2);Ft.__click=()=>tt(a(F).id);var Qt=t(Ft);ba(Qt,{size:14}),e(Ft),e(At),e(we),b((Ze,pt)=>{r(yt,a(F).name),r(Ht,`${Ze??""} ${a(F).difficulty??""}`),r(Lt,pt)},[()=>I()("session.bestiary.level"),()=>I()("common.buttons.edit")]),zs("dragstart",we,Ze=>He(Ze,a(F))),l($,we)});var Ae=s(pe,2);{var vt=$=>{var F=ro(),we=t(F,!0);e(F),b(Le=>r(we,Le),[()=>I()("session.bestiary.no_enemies")]),l($,F)};h(Ae,$=>{a(S).length===0&&$(vt)})}e(Z);var Qe=s(Z,2);{var ct=$=>{kn($,{get isOpen(){return a(n)},get initialData(){return a(C)},onClose:()=>z(n,!1),onSave:ne})},gt=$=>{Wn($,{get isOpen(){return a(n)},get initialData(){return a(C)},onClose:()=>z(n,!1),onSave:ne})};h(Qe,$=>{a(Ne)==="sofdl"?$(ct):$(gt,!1)})}var $t=s(Qe,2);Zn($t,{get isOpen(){return a(K)},get initialData(){return a(ze)},onClose:()=>z(K,!1),onSave:Ce});var qt=s($t,2);Ls(qt,{get isOpen(){return a(he).isOpen},get title(){return a(he).title},get message(){return a(he).message},get onConfirm(){return a(he).onConfirm},onCancel:()=>a(he).isOpen=!1}),e(V),b(($,F,we,Le)=>{r(Ke,` ${$??""}`),r(W,F),r(bt,` ${we??""}`),r(je,Le)},[()=>I()("session.bestiary.encounters_title"),()=>I()("session.bestiary.new_encounter"),()=>I()("session.bestiary.title"),()=>I()("session.bestiary.new_enemy")]),l(P,V),za(),A()}Ca(["click"]);var oo=v('<div class="flex items-center gap-1 text-slate-400 ml-1"><!> <span class="text-xs"> </span></div>'),lo=v('<div class="flex items-center gap-1 text-emerald-400"><!> <span class="text-xs font-bold hidden sm:block"> </span></div> <!>',1),vo=v('<div class="flex items-center gap-1 text-slate-500"><!> <span class="text-xs hidden sm:block"> </span></div>'),co=v('<span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border border-slate-900"></span></span>'),uo=v('<header class="bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-40 shadow-2xl"><div class="max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-3"><div class="flex items-center justify-between gap-2 sm:gap-4"><div class="flex items-center gap-1 sm:gap-3 shrink-0"><button class="p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all flex items-center gap-1 group"><!> <!></button> <div class="flex flex-col"><h1 class="text-base sm:text-lg font-black text-white leading-tight truncate max-w-[140px] sm:max-w-none"> </h1> <span class="text-xs text-indigo-400 font-mono font-black uppercase tracking-wider"> </span></div></div> <div class="hidden md:flex bg-slate-950/50 p-1 rounded-xl border border-white/5"><button><!> <span class="hidden min-[400px]:block"> </span></button> <button><!> <span class="hidden min-[400px]:block"> </span></button></div> <div class="flex items-center gap-1 sm:gap-2"><div class="flex items-center gap-2 mr-2 border-r border-white/10 pr-2"><!></div> <button class="p-2 sm:p-2.5 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-all"><!></button> <button class="p-2 sm:p-2.5 bg-indigo-600/10 text-indigo-400 border border-indigo-400/20 rounded-lg hover:bg-indigo-600 hover:text-white transition-all relative"><!> <!></button></div></div></div></header>');function bo(P,o){$a(o,!0);const i=()=>Ct(da,"$t",A),p=()=>Ct(pr,"$syncState",A),I=()=>Ct(Ta,"$isHistoryOpen",A),se=()=>Ct(xr,"$hasUnreadRolls",A),[A,n]=Oa();let f=ta(o,"campaignName",3,""),C=ta(o,"gmName",3,"Mestre"),K=ta(o,"activeSubTab",3,"session"),ue=ta(o,"onTabChange",3,()=>{}),ze=ta(o,"onOpenSettings",3,()=>{});var he=uo(),ie=t(he),ye=t(ie),Q=t(ye),Me=t(Q);Me.__click=()=>Tr(Ws("/"));var ne=t(Me);Vs(ne,{size:20,class:"group-hover:-translate-x-0.5 transition-transform"});var tt=s(ne,2);jr(tt,{size:18,class:"hidden sm:block opacity-50"}),e(Me);var xt=s(Me,2),Ce=t(xt),Re=t(Ce,!0);e(Ce);var Be=s(Ce,2),He=t(Be,!0);e(Be),e(xt),e(Q);var Ge=s(Q,2),be=t(Ge);be.__click=()=>ue()("session");var Ne=t(be);{let Z=ce(()=>K()==="session"?"opacity-100":"opacity-50");Xs(Ne,{size:14,get class(){return a(Z)}})}var S=s(Ne,2),V=t(S,!0);e(S),e(be);var ve=s(be,2);ve.__click=()=>ue()("bestiary");var Ie=t(ve);{let Z=ce(()=>K()==="bestiary"?"opacity-100":"opacity-50");ar(Ie,{size:14,get class(){return a(Z)}})}var at=s(Ie,2),st=t(at,!0);e(at),e(ve),e(Ge);var Ke=s(Ge,2),It=t(Ke),dt=t(It);{var Ut=Z=>{var De=lo(),U=Ue(De),_e=t(U);Bs(_e,{size:16});var je=s(_e,2),pe=t(je,!0);e(je),e(U);var Ae=s(U,2);{var vt=Qe=>{var ct=oo(),gt=t(ct);qs(gt,{size:14});var $t=s(gt,2),qt=t($t,!0);e($t),e(ct),b($=>{ee(ct,"title",$),r(qt,p().peers.length)},[()=>i()("common.status.peers",{values:{count:p().peers.length}})]),l(Qe,ct)};h(Ae,Qe=>{p().peers.length>0&&Qe(vt)})}b((Qe,ct)=>{ee(U,"title",Qe),r(pe,ct)},[()=>i()("common.status.connected"),()=>i()("common.status.connected")]),l(Z,De)},ft=Z=>{var De=vo(),U=t(De);Pr(U,{size:16});var _e=s(U,2),je=t(_e,!0);e(_e),e(De),b((pe,Ae)=>{ee(De,"title",pe),r(je,Ae)},[()=>i()("common.status.offline"),()=>i()("common.status.offline")]),l(Z,De)};h(dt,Z=>{p().isConnected?Z(Ut):Z(ft,!1)})}e(It);var W=s(It,2);W.__click=function(...Z){ze()?.apply(this,Z)};var Oe=t(W);Ar(Oe,{size:20}),e(W);var Se=s(W,2);Se.__click=()=>Ta.update(Z=>!Z);var We=t(Se);Er(We,{size:20});var et=s(We,2);{var bt=Z=>{var De=co();l(Z,De)};h(et,Z=>{se()&&Z(bt)})}e(Se),e(Ke),e(ye),e(ie),e(he),b((Z,De,U,_e,je,pe,Ae,vt)=>{ee(Me,"aria-label",Z),ee(Me,"title",De),r(Re,f()),r(He,C()),qe(be,1,`flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-lg text-xs font-black transition-all ${K()==="session"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:text-slate-300"}`),ee(be,"aria-pressed",K()==="session"),r(V,U),qe(ve,1,`flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-lg text-xs font-black transition-all ${K()==="bestiary"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:text-slate-300"}`),ee(ve,"aria-pressed",K()==="bestiary"),r(st,_e),ee(W,"aria-label",je),ee(W,"title",pe),ee(Se,"aria-label",Ae),ee(Se,"title",vt),ee(Se,"aria-pressed",I())},[()=>i()("character.header.back_dashboard"),()=>i()("character.header.back_dashboard"),()=>i()("common.labels.session"),()=>i()("common.labels.bestiary"),()=>i()("common.buttons.settings"),()=>i()("common.buttons.settings"),()=>i()("character.header.history"),()=>i()("character.header.history")]),l(P,he),za(),n()}Ca(["click"]);var _o=v('<!> <!> <main class="max-w-7xl mx-auto p-4 md:p-8 animate-in slide-in-from-bottom-4 duration-500"><!></main>',1),po=v('<div class="flex flex-col items-center justify-center min-h-screen p-4 text-center"><div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ghost"><path d="M9 10h.01"></path><path d="M15 10h.01"></path><path d="M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"></path></svg></div> <h1 class="text-2xl font-black text-white mb-2 uppercase tracking-tight"> </h1> <p class="text-slate-400 mb-8 max-w-md"> </p> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-xl font-bold transition-all flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><path d="m12 19-7-7 7-7"></path><path d="19 12H5"></path></svg> </button></div>'),xo=v('<div class="flex items-center justify-center min-h-screen"><div class="relative w-16 h-16"><div class="absolute inset-0 border-4 border-indigo-500/20 rounded-full"></div> <div class="absolute inset-0 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div></div></div>'),mo=v('<div class="fixed bottom-24 left-1/2 -translate-x-1/2 md:left-8 md:translate-x-0 z-[60] flex flex-col items-center gap-2"><div class="bg-slate-900/95 backdrop-blur-md border border-white/10 rounded-2xl p-2 flex items-center gap-2 shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 duration-200"><button class="bg-indigo-600/20 hover:bg-indigo-600 text-indigo-400 hover:text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-indigo-500/20"><span class="text-[10px] opacity-70">d20</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">1d6</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">2d6</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">3d6</span> <!></button> <div class="w-px h-8 bg-white/10 mx-1"></div> <button class="w-10 h-10 flex items-center justify-center text-slate-500 hover:text-white transition-colors"><!></button></div></div>  <div class="fixed inset-0 bg-black/40 z-[55]"></div>',1),fo=v('<div class="min-h-screen bg-slate-950 text-slate-100 font-sans pb-20"><!> <!> <!> <div class="hidden md:block fixed bottom-8 left-8 z-[60]"><button class="w-16 h-16 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full shadow-[0_0_20px_rgba(79,70,229,0.4)] flex items-center justify-center transition-all active:scale-90 border-2 border-white/10 group" title="Rolagens Rápidas"><!></button></div> <nav class="md:hidden fixed bottom-0 left-0 right-0 z-50 px-4 pb-6 pt-2 pointer-events-none"><div class="max-w-md mx-auto relative h-16 pointer-events-auto"><div class="absolute inset-0 bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden"><div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-indigo-500/30 to-transparent"></div></div> <div class="relative h-full flex items-center justify-around px-2"><button><!> <span class="text-[9px] font-black uppercase tracking-widest leading-none">Sessão</span></button> <div class="relative w-16 h-16 -mt-10 flex items-center justify-center"><div class="absolute inset-0 bg-indigo-600/20 rounded-full blur-xl animate-pulse"></div> <button class="relative w-14 h-14 bg-indigo-600 rounded-full flex items-center justify-center shadow-[0_0_20px_rgba(79,70,229,0.5)] border-4 border-slate-900 transition-all active:scale-90 hover:bg-indigo-500 z-10" aria-label="Rolar Dados"><!></button></div> <button><!> <span class="text-[9px] font-black uppercase tracking-widest leading-none">Bestiário</span></button></div></div></nav> <!></div>');function Uo(P,o){$a(o,!0);const i=()=>Ct(ur,"$page",A),p=()=>Ct(gr,"$liveCampaigns",A),I=()=>Ct(da,"$t",A),se=()=>Ct(Ta,"$isHistoryOpen",A),[A,n]=Oa();let f=Ye("session"),C=Ye(!1),K=ce(()=>i().params.id),ue=ce(()=>p().find(W=>W.id===a(K))),ze=ce(()=>!!a(ue));function he(W){if(!a(K)||!a(ue))return;const Oe={...a(ue),...W};Vt.set(a(K),Oe),Es(a(K),{name:Oe.name,gmName:Oe.gmName}),z(C,!1)}let ie=Ye(!1),ye=Ye(ka({isOpen:!1,sides:20,count:1,modifier:0}));function Q(W,Oe=1){z(ye,{isOpen:!0,sides:W,count:Oe,modifier:0},!0)}function Me(W){if(!a(ue))return;const Oe=yi(a(ye).sides,a(ye).count,W);let Se="";a(ye).count>1&&(Se+=`Dados: [${Oe.results.join(", ")}] `),Oe.bonusRolls?.length>0&&(Se+=`Bonus Rolls: [${Oe.bonusRolls.join(", ")}] -> ${Math.abs(Oe.modifierTotal)}`);const We=a(ue).gmName||Os(da)("common.labels.master");mr.addToHistory({source:"GM",charName:We,name:`${a(ye).count}d${a(ye).sides} ${W?W>0?`+${W}`:W:""}`,description:Se.trim()||null,total:Oe.total,formula:Oe.formula,crit:Oe.crit}),Ta.set(!0),a(ye).isOpen=!1}var ne=fo(),tt=t(ne);{var xt=W=>{var Oe=_o(),Se=Ue(Oe);bo(Se,{get campaignName(){return a(ue).name},get gmName(){return a(ue).gmName},get activeSubTab(){return a(f)},onTabChange:U=>z(f,U,!0),onOpenSettings:()=>z(C,!0)});var We=s(Se,2);{let U=ce(()=>JSON.stringify(a(ue)));Dr(We,{get isOpen(){return a(C)},get initialData(){return a(U)},onClose:()=>z(C,!1),onSave:he})}var et=s(We,2),bt=t(et);{var Z=U=>{Zi(U,{get campaign(){return a(ue)}})},De=U=>{var _e=mt(),je=Ue(_e);{var pe=Ae=>{no(Ae,{get campId(){return a(K)}})};h(je,Ae=>{a(f)==="bestiary"&&Ae(pe)},!0)}l(U,_e)};h(bt,U=>{a(f)==="session"?U(Z):U(De,!1)})}e(et),l(W,Oe)},Ce=W=>{var Oe=mt(),Se=Ue(Oe);{var We=bt=>{var Z=po(),De=s(t(Z),2),U=t(De,!0);e(De);var _e=s(De,2),je=t(_e,!0);e(_e);var pe=s(_e,2);pe.__click=()=>window.history.back();var Ae=s(t(pe));e(pe),e(Z),b((vt,Qe,ct)=>{r(U,vt),r(je,Qe),r(Ae,` ${ct??""}`)},[()=>I()("campaign.not_found.title"),()=>I()("campaign.not_found.message"),()=>I()("common.buttons.back")]),l(bt,Z)},et=bt=>{var Z=xo();l(bt,Z)};h(Se,bt=>{a(ze)&&!a(ue)?bt(We):bt(et,!1)},!0)}l(W,Oe)};h(tt,W=>{a(ze)&&a(ue)?W(xt):W(Ce,!1)})}var Re=s(tt,2);Js(Re,{get isOpen(){return se()},onClose:()=>Ta.set(!1)});var Be=s(Re,2);{var He=W=>{var Oe=mo(),Se=Ue(Oe),We=t(Se),et=t(We);et.__click=()=>{Q(20),z(ie,!1)};var bt=s(t(et),2);Va(bt,{size:16}),e(et);var Z=s(et,2);Z.__click=()=>{Q(6),z(ie,!1)};var De=s(t(Z),2);Va(De,{size:16}),e(Z);var U=s(Z,2);U.__click=()=>{Q(6,2),z(ie,!1)};var _e=s(t(U),2);Va(_e,{size:16}),e(U);var je=s(U,2);je.__click=()=>{Q(6,3),z(ie,!1)};var pe=s(t(je),2);Va(pe,{size:16}),e(je);var Ae=s(je,4);Ae.__click=()=>z(ie,!1);var vt=t(Ae);Pa(vt,{size:20}),e(Ae),e(We),e(Se);var Qe=s(Se,2);Qe.__click=()=>z(ie,!1),l(W,Oe)};h(Be,W=>{a(ie)&&W(He)})}var Ge=s(Be,2),be=t(Ge);be.__click=()=>z(ie,!a(ie));var Ne=t(be);Va(Ne,{size:32,class:"group-hover:rotate-12 transition-transform"}),e(be),e(Ge);var S=s(Ge,2),V=t(S),ve=s(t(V),2),Ie=t(ve);Ie.__click=()=>{z(f,"session"),z(ie,!1)};var at=t(Ie);{let W=ce(()=>a(f)==="session"?"animate-in zoom-in-75 duration-300":"");Xs(at,{size:20,get class(){return a(W)}})}wa(2),e(Ie);var st=s(Ie,2),Ke=s(t(st),2);Ke.__click=()=>z(ie,!a(ie));var It=t(Ke);{let W=ce(()=>a(ie)?"rotate-90":"rotate-0");Va(It,{size:28,get class(){return`text-white ${a(W)??""} transition-transform duration-300`}})}e(Ke),e(st);var dt=s(st,2);dt.__click=()=>{z(f,"bestiary"),z(ie,!1)};var Ut=t(dt);{let W=ce(()=>a(f)==="bestiary"?"animate-in zoom-in-75 duration-300":"");ar(Ut,{size:20,get class(){return a(W)}})}wa(2),e(dt),e(ve),e(V),e(S);var ft=s(S,2);{let W=ce(()=>`${I()("session.quick.roll_title")} (${a(ye).count}d${a(ye).sides})`),Oe=ce(()=>a(ye).sides===20?I()("session.quick.boons_banes"):I()("session.quick.fixed_modifier"));Mr(ft,{get isOpen(){return a(ye).isOpen},get title(){return a(W)},get label(){return a(Oe)},onClose:()=>a(ye).isOpen=!1,onRoll:Me,initialModifier:0})}e(ne),b(()=>{qe(Ie,1,`flex flex-col items-center justify-center gap-1 flex-1 transition-all ${a(f)==="session"?"text-indigo-400":"text-slate-500 hover:text-slate-300"}`),qe(dt,1,`flex flex-col items-center justify-center gap-1 flex-1 transition-all ${a(f)==="bestiary"?"text-indigo-400":"text-slate-500 hover:text-slate-300"}`)}),l(P,ne),za(),n()}Ca(["click"]);export{Uo as component};
