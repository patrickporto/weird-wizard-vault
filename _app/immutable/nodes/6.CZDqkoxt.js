import"../chunks/DsnmJJEf.js";import{d as Ge,s as o,g as Tt,j as Ha}from"../chunks/9QvhKPlK.js";import{v as Ee,w as fe,k as l,x as qe,z as Le,j as b,B as a,I as t,A as r,y as e,T as _e,t as h,n as ht,F as ze,R as Ke,U as Ct,a2 as Ot,L as gt,at as Yt,aq as ua,G as ba,a1 as Ia,u as xa}from"../chunks/DzRT0qSm.js";import{l as Qe,s as Ze,p as sa,i as j}from"../chunks/DV-HjJ0V.js";import{a as B,s as Ye,b as Ua}from"../chunks/FHgTlLI2.js";import{s as Se,a as me,$ as Be,f as _a,r as Xe,e as je,i as Ue,l as zt}from"../chunks/DmTIwYKB.js";import{c as Ve,x as Fe,i as Ra,o as Jt,y as qa,z as La,B as It,C as oa,D as Va,E as Fa,v as Ga,F as Te,G as Lt,I as ut,b as Re,u as Zt,W as Wa,M as Ya,T as Je,H as ya,J as la,K as pt,L as Nt,N as jt,O as wa,A as Ba,P as Xa,Q as ia,R as Ka,S as kt,d as aa,l as fa,w as Ja,U as Qa,a as Za,n as er}from"../chunks/C6B4bmgH.js";import{p as tr}from"../chunks/CrsI_A28.js";import{g as ka}from"../chunks/CX-B_eF7.js";import{U as ga,W as ar,r as za}from"../chunks/DqarjG0D.js";import{b as rr}from"../chunks/DoXFKFJ1.js";import{L as ha,U as sr}from"../chunks/Dy_MTGci.js";import{b as Ft,C as or,L as lr,A as ir,D as na,I as nr,s as dr,c as cr,M as Vt,S as Ut,G as vr,H as pr,e as ur}from"../chunks/BMf4jlgw.js";import{W as br}from"../chunks/Cf2wkrTz.js";import"../chunks/DdC0RNGD.js";import{I as et,s as tt}from"../chunks/Byjcbj0b.js";import{a as xr,P as nt,M as bt,X as Gt,T as Rt,b as Bt,S as _r}from"../chunks/BJHf1IjA.js";import{C as Sa}from"../chunks/B42Mvk0m.js";import{i as Mt}from"../chunks/BF6Ztcgo.js";import{c as ra}from"../chunks/BGJrsy93.js";import{t as da,a as Ta,s as fr}from"../chunks/5J4TPCGy.js";function Qt(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];et(R,Ze({name:"activity"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function Oa(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];et(R,Ze({name:"arrow-left"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function ca(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z"}],["path",{d:"M8 10h8"}],["path",{d:"M8 18h8"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"}]];et(R,Ze({name:"backpack"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function gr(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"11",cy:"13",r:"9"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95"}],["path",{d:"m22 2-1.5 1.5"}]];et(R,Ze({name:"bomb"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function ma(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]];et(R,Ze({name:"book"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function pa(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M16.17 7.83 2 22"}],["path",{d:"M4.02 12a2.827 2.827 0 1 1 3.81-4.17A2.827 2.827 0 1 1 12 4.02a2.827 2.827 0 1 1 4.17 3.81A2.827 2.827 0 1 1 19.98 12a2.827 2.827 0 1 1-3.81 4.17A2.827 2.827 0 1 1 12 19.98a2.827 2.827 0 1 1-4.17-3.81A1 1 0 1 1 4 12"}],["path",{d:"m7.83 7.83 8.34 8.34"}]];et(R,Ze({name:"clover"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function hr(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"8",cy:"8",r:"6"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18"}],["path",{d:"M7 6h1v4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82"}]];et(R,Ze({name:"coins"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function mr(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]];et(R,Ze({name:"ellipsis"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function $r(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21"}],["path",{d:"m5.082 11.09 8.828 8.828"}]];et(R,Ze({name:"eraser"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function yr(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z"}]];et(R,Ze({name:"fast-forward"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function $a(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];et(R,Ze({name:"file-text"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function Ma(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M5 22h14"}],["path",{d:"M5 2h14"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"}]];et(R,Ze({name:"hourglass"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function wr(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8"}]];et(R,Ze({name:"infinity"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function kr(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"m5 8 6 6"}],["path",{d:"m4 14 6-6 2-3"}],["path",{d:"M2 5h12"}],["path",{d:"M7 2h1"}],["path",{d:"m22 22-5-10-5 10"}],["path",{d:"M14 18h6"}]];et(R,Ze({name:"languages"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function zr(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"}]];et(R,Ze({name:"moon"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function Sr(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z"}]];et(R,Ze({name:"rewind"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function Tr(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];et(R,Ze({name:"search"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function Or(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2"}],["path",{d:"m14.305 16.53.923-.382"}],["path",{d:"m15.228 13.852-.923-.383"}],["path",{d:"m16.852 12.228-.383-.923"}],["path",{d:"m16.852 17.772-.383.924"}],["path",{d:"m19.148 12.228.383-.923"}],["path",{d:"m19.53 18.696-.382-.924"}],["path",{d:"m20.772 13.852.924-.383"}],["path",{d:"m20.772 16.148.924.383"}],["circle",{cx:"18",cy:"15",r:"3"}],["circle",{cx:"9",cy:"7",r:"4"}]];et(R,Ze({name:"user-cog"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function Wt(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"}],["path",{d:"m14 7 3 3"}],["path",{d:"M5 6v4"}],["path",{d:"M19 14v4"}],["path",{d:"M10 2v2"}],["path",{d:"M7 8H3"}],["path",{d:"M21 16h-4"}],["path",{d:"M11 3H9"}]];et(R,Ze({name:"wand-sparkles"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}function $t(R,y){const i=Qe(y,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]];et(R,Ze({name:"zap"},()=>i,{get iconNode(){return s},children:(u,E)=>{var x=Ee(),_=fe(x);tt(_,y,"default",{}),l(u,x)},$$slots:{default:!0}}))}const Mr=!1,yi=Object.freeze(Object.defineProperty({__proto__:null,prerender:Mr},Symbol.toStringTag,{value:"Module"}));var Er=b('<div class="text-[9px] font-black text-amber-500 uppercase tracking-tighter mt-1 animate-pulse">Aguardando Aprovação</div>'),Ar=b('<div class="text-[10px] text-slate-400 mt-0.5 font-medium flex items-center gap-1"><span class="opacity-50 font-bold uppercase tracking-tighter">Mestre:</span> <span class="text-indigo-300"> </span></div>'),Cr=b('<div><div class="flex items-center gap-3"><div class="relative"><div><!></div> <div></div></div> <div><div>Campanha Ativa</div> <div class="font-bold text-white text-base leading-tight"> </div> <!></div></div> <button class="bg-slate-900 border border-slate-700 p-2.5 rounded-xl text-slate-500 hover:text-red-400 transition-all active:scale-95" title="Sair"><!></button></div>'),Pr=b("<div><div></div> <span> </span></div>"),Dr=b('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><div><!></div> <h3 class="text-[11px] font-black text-slate-400 uppercase tracking-[0.15em]">Campanha Ativa</h3></div> <button class="p-2 text-slate-600 hover:text-red-400 hover:bg-red-400/5 rounded-lg transition-all opacity-0 group-hover:opacity-100" title="Abandonar Campanha"><!></button></div> <div class="space-y-1"><div class="font-bold text-white text-lg tracking-tight leading-tight"> </div> <div class="text-[10px] font-medium text-slate-500 flex items-center gap-1.5 pt-0.5"><span class="uppercase tracking-tighter opacity-70">Mestre:</span> <span class="text-indigo-400 font-bold"> </span></div></div> <div class="flex items-center justify-between pt-3 border-t border-white/5"><div class="flex items-center gap-2"><div></div> <span> </span></div> <div class="flex items-center gap-1 text-[10px] text-slate-600 font-mono"><!> </div></div></div>');function va(R,y){qe(y,!0);const i=()=>B(Ve,"$character",u),s=()=>B(Ra,"$isGmOnline",u),[u,E]=Ye();let x=sa(y,"compact",3,!1),_=sa(y,"banner",3,!1);var v=Ee(),n=fe(v);{var z=D=>{const p=_e(()=>i().campaignApproval==="pending");var S=Ee(),F=fe(S);{var A=T=>{var I=Cr(),Y=a(I),N=a(Y),k=a(N),f=a(k);ga(f,{size:20}),t(k);var c=r(k,2);t(N);var d=r(N,2),m=a(d),$=r(m,2),O=a($,!0);t($);var H=r($,2);{var C=w=>{var M=Er();l(w,M)},L=w=>{var M=Ar(),ee=r(a(M),2),ne=a(ee,!0);t(ee),t(M),h(()=>o(ne,i().gmName)),l(w,M)};j(H,w=>{e(p)?w(C):w(L,!1)})}t(d),t(Y);var P=r(Y,2);P.__click=()=>{confirm("Sair da campanha?")&&Fe.leaveCampaign()};var g=a(P);ha(g,{size:18}),t(P),t(I),h(()=>{Se(I,1,`bg-indigo-600/10 backdrop-blur-md border border-indigo-500/20 rounded-2xl p-4 flex items-center justify-between shadow-xl shadow-indigo-950/20 ${e(p)?"border-amber-500/30 bg-amber-500/5":""}`),Se(k,1,`w-10 h-10 ${e(p)?"bg-amber-600/20 text-amber-400 border-amber-500/30":"bg-indigo-600/20 text-indigo-400 border-indigo-500/30"} rounded-xl flex items-center justify-center`),Se(c,1,`absolute -top-1 -right-1 w-3 h-3 ${e(p)?"bg-amber-500 animate-pulse":s()?"bg-green-500 animate-pulse":"bg-slate-600"} rounded-full border-2 border-slate-950 shadow-[0_0_8px_rgba(34,197,94,0.6)]`),Se(m,1,`text-[10px] ${e(p)?"text-amber-500/70":"text-indigo-400/70"} font-black uppercase tracking-[0.2em] leading-none mb-1`),o(O,i().campaignName)}),l(T,I)},q=T=>{var I=Ee(),Y=fe(I);{var N=f=>{var c=Pr(),d=a(c),m=r(d,2),$=a(m,!0);t(m),t(c),h(()=>{Se(c,1,`inline-flex items-center gap-2 px-3 py-1 ${e(p)?"bg-amber-500/10 border-amber-500/20":"bg-indigo-500/10 border-indigo-500/20"} rounded-full shadow-sm glass`),Se(d,1,`w-1.5 h-1.5 rounded-full ${e(p)?"bg-amber-500 animate-pulse":s()?"bg-green-500 animate-pulse":"bg-slate-600"} shadow-[0_0_8px_rgba(34,197,94,0.4)]`),Se(m,1,`text-[9px] font-black ${e(p)?"text-amber-500":"text-indigo-400"} uppercase tracking-widest truncate max-w-[150px]`),o($,i().campaignName)}),l(f,c)},k=f=>{var c=Dr(),d=a(c),m=a(d),$=a(m),O=a($);ga(O,{size:16}),t($),ht(2),t(m);var H=r(m,2);H.__click=function(...oe){Fe.leaveCampaign?.apply(this,oe)};var C=a(H);ha(C,{size:14}),t(H),t(d);var L=r(d,2),P=a(L),g=a(P,!0);t(P);var w=r(P,2),M=r(a(w),2),ee=a(M,!0);t(M),t(w),t(L);var ne=r(L,2),ue=a(ne),X=a(ue),se=r(X,2),ve=a(se,!0);t(se),t(ue);var le=r(ue,2),Q=a(le);{var ge=oe=>{Ft(oe,{size:10,class:"opacity-40 animate-spin",style:"animation-duration: 3s"})},W=oe=>{var pe=Ee(),Z=fe(pe);{var G=K=>{ar(K,{size:10,class:"opacity-40"})},te=K=>{br(K,{size:10,class:"opacity-40 text-red-500/50"})};j(Z,K=>{s()?K(G):K(te,!1)},!0)}l(oe,pe)};j(Q,oe=>{e(p)?oe(ge):oe(W,!1)})}var U=r(Q);t(le),t(ne),t(c),h(()=>{Se(c,1,`bg-slate-900/50 border border-slate-800 rounded-2xl p-5 space-y-4 shadow-lg backdrop-blur-sm group hover:border-indigo-500/30 transition-all duration-300 ${!s()&&!e(p)?"opacity-60 saturate-50":""} ${e(p)?"border-amber-500/20":""}`),Se($,1,`p-1.5 ${e(p)?"bg-amber-500/10 text-amber-500":s()?"bg-indigo-500/10 text-indigo-400":"bg-slate-800 text-slate-500"} rounded-lg`),o(g,i().campaignName),o(ee,i().gmName),Se(X,1,`w-1.5 h-1.5 rounded-full ${e(p)?"bg-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.4)] animate-pulse":s()?"bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.4)] animate-pulse":"bg-slate-700"}`),Se(se,1,`text-[11px] font-bold uppercase tracking-wider ${e(p)?"text-amber-500":s()?"text-slate-400":"text-slate-600"}`),o(ve,e(p)?"Pendente de Aprovação":s()?"Online":"Offline"),o(U,` ${e(p)?"PENDENTE":s()?"SYNCED":"WAITING"}`)}),l(f,c)};j(Y,f=>{x()?f(N):f(k,!1)},!0)}l(T,I)};j(F,T=>{_()?T(A):T(q,!1)})}l(D,S)};j(n,D=>{i().campaignId&&D(z)})}l(R,v),Le(),E()}Ge(["click"]);var Nr=b('<div class="fixed inset-0 z-40"></div> <div class="absolute top-full left-0 mt-2 w-48 bg-slate-800 border border-slate-700 rounded-xl shadow-xl z-50 overflow-hidden animate-in slide-in-from-top-2 fade-in duration-200"><button class="w-full text-left px-4 py-3 text-xs font-bold text-slate-300 hover:text-white hover:bg-slate-700 flex items-center gap-3 transition-colors border-b border-slate-700/50"><!> </button> <button class="w-full text-left px-4 py-3 text-xs font-bold text-slate-300 hover:text-white hover:bg-slate-700 flex items-center gap-3 transition-colors"><!> </button></div>',1),jr=b('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),Hr=b('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"><div class="absolute inset-0 bg-gradient-to-b from-white/10 to-transparent"></div></div>'),Ir=b('<div class="absolute top-0 left-0 w-full h-full z-20 bg-cyan-400/20 pointer-events-none animate-pulse"></div>'),Ur=b('<span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border border-slate-900"></span></span>'),Rr=b('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),qr=b('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"></div>'),Lr=b('<div class="absolute top-0 left-0 w-full h-full z-20 bg-cyan-400/20 pointer-events-none animate-pulse"></div>'),Vr=b('<header class="bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-40 shadow-2xl"><div class="max-w-6xl mx-auto px-2 sm:px-4 py-4 sm:py-3"><div class="flex items-center justify-between gap-2 sm:gap-4"><div class="flex items-center gap-3 sm:gap-3"><button class="p-2 sm:p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all flex items-center gap-1 group"><!> <!></button> <div class="relative"><button class="flex items-center gap-3 group text-left relative" aria-label="Opções do Personagem"><div class="rounded-xl sm:rounded-full overflow-hidden border-2 border-white/10 shadow-lg shadow-indigo-500/20 group-hover:scale-105 transition-transform w-12 h-12 sm:w-12 sm:h-12"><!></div> <div><div class="flex items-center gap-2"><h1 class="text-base sm:text-base font-black text-white leading-tight truncate max-w-[120px] sm:max-w-none group-hover:text-indigo-400 transition-colors"> </h1></div> <p class="hidden xs:block text-xs text-slate-500 font-black uppercase tracking-widest svelte-fpzs02"> </p></div></button> <!></div></div> <button class="hidden md:block flex-1 max-w-md cursor-pointer group px-2 sm:px-0 text-left"><div class="flex justify-between text-xs sm:text-sm mb-1.5 px-1"><span><!></span> <span class="text-slate-400 font-mono flex items-center gap-1 group-hover:text-white transition-colors"><span> </span><span class="opacity-30">/</span><span class="text-white font-black"> </span></span></div> <div class="h-4 sm:h-6 w-full bg-slate-950 rounded-full border border-white/5 relative overflow-hidden group-hover:border-white/20 transition-all shadow-inner"><div></div> <!> <!> <!></div></button> <div class="flex items-center gap-1 sm:gap-2"><button class="p-2 sm:p-2.5 text-slate-400 hover:text-indigo-400 hover:bg-indigo-400/10 rounded-full transition-all"><!></button> <button class="p-2 bg-indigo-600/10 text-indigo-400 border border-indigo-400/20 rounded-lg hover:bg-indigo-600 hover:text-white transition-all relative" aria-label="Toggle Histórico" title="Histórico"><!> <!></button> <button class="hidden sm:flex p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all" title="Configurações"><!></button></div></div></div> <div class="md:hidden border-t border-white/5 bg-slate-950/20"><button class="w-full px-4 py-2 text-left active:bg-white/5 transition-colors"><div class="flex justify-between text-[10px] mb-1"><span><!></span> <span class="text-slate-300 font-mono font-black"><span> </span> </span></div> <div class="h-2 w-full bg-slate-950 rounded-full border border-white/5 relative overflow-hidden shadow-inner"><div></div> <!> <!> <!></div></button></div></header> <input type="file" hidden="" accept="image/*"/> <!>',1);function Fr(R,y){qe(y,!0);const i=()=>B(Be,"$t",p),s=()=>B(Ve,"$character",p),u=()=>B(qa,"$isIncapacitated",p),E=()=>B(La,"$isInjured",p),x=()=>B(It,"$damage",p),_=()=>B(oa,"$effectiveMaxHealth",p),v=()=>B(Va,"$damagePercentage",p),n=()=>B(Fa,"$tempHealth",p),z=()=>B(Jt,"$isHistoryOpen",p),D=()=>B(Ga,"$rollHistory",p),[p,S]=Ye();let F=Ke(!1),A=Ke(!1),q=Ke(""),T=Ke(void 0);function I(xe){Te.update(Oe=>({...Oe,type:xe,isOpen:!0}))}function Y(xe){const Oe=xe.target.files;if(Oe&&Oe.length>0){const lt=Oe[0],ft=new FileReader;ft.onload=()=>{ze(q,ft.result,!0),ze(A,!0),ze(F,!1)},ft.readAsDataURL(lt)}xe.target&&(xe.target.value="")}async function N(xe){console.log("CharacterHeader: handleCrop started",xe);try{const Oe=await dr(xe);console.log("CharacterHeader: Image saved, hash:",Oe),Ve.update(lt=>({...lt,imageUrl:Oe})),ze(A,!1)}catch(Oe){console.error("CharacterHeader: Error in handleCrop:",Oe),alert(Oe.message||"Erro ao salvar imagem")}}var k=Vr(),f=fe(k),c=a(f),d=a(c),m=a(d),$=a(m);$.__click=()=>ka(za("/"));var O=a($);or(O,{size:24,class:"group-hover:-translate-x-0.5 transition-transform"});var H=r(O,2);lr(H,{size:20,class:"hidden sm:block opacity-50"}),t($);var C=r($,2),L=a(C);L.__click=()=>ze(F,!e(F));var P=a(L),g=a(P);{let xe=_e(()=>s().name.charAt(0));ir(g,{get hash(){return s().imageUrl},get alt(){return s().name},get fallbackText(){return e(xe)},size:"custom"})}t(P);var w=r(P,2),M=a(w),ee=a(M),ne=a(ee,!0);t(ee),t(M);var ue=r(M,2),X=a(ue);t(ue),t(w),t(L);var se=r(L,2);{var ve=xe=>{var Oe=Nr(),lt=fe(Oe);lt.__click=()=>ze(F,!1);var ft=r(lt,2),wt=a(ft);wt.__click=()=>e(T).click();var it=a(wt);cr(it,{size:16,class:"text-indigo-400"});var _t=r(it);t(wt);var mt=r(wt,2);mt.__click=()=>{I("character_info"),ze(F,!1)};var Xt=a(mt);Or(Xt,{size:16,class:"text-slate-400"});var ta=r(Xt);t(mt),t(ft),h((Dt,Kt)=>{o(_t,` ${Dt??""}`),o(ta,` ${Kt??""}`)},[()=>i()("character.header.change_photo"),()=>i()("character.header.edit_info")]),l(xe,Oe)};j(se,xe=>{e(F)&&xe(ve)})}t(C),t(m);var le=r(m,2);le.__click=()=>I("health");var Q=a(le),ge=a(Q),W=a(ge);{var U=xe=>{var Oe=Ct();h(lt=>o(Oe,lt),[()=>i()("character.health.incapacitated")]),l(xe,Oe)},oe=xe=>{var Oe=Ee(),lt=fe(Oe);{var ft=it=>{var _t=Ct();h(mt=>o(_t,mt),[()=>i()("character.health.injured")]),l(it,_t)},wt=it=>{var _t=Ee(),mt=fe(_t);{var Xt=Dt=>{},ta=Dt=>{var Kt=Ct();h(ja=>o(Kt,ja),[()=>i()("character.health.healthy")]),l(Dt,Kt)};j(mt,Dt=>{x()>0?Dt(Xt):Dt(ta,!1)},!0)}l(it,_t)};j(lt,it=>{E()?it(ft):it(wt,!1)},!0)}l(xe,Oe)};j(W,xe=>{u()?xe(U):xe(oe,!1)})}t(ge);var pe=r(ge,2),Z=a(pe),G=a(Z,!0);t(Z);var te=r(Z,2),K=a(te,!0);t(te),t(pe),t(Q);var we=r(Q,2),ke=a(we),he=r(ke,2);{var ae=xe=>{var Oe=jr();h(()=>{Se(Oe,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10 ${u()?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":v()>=80?"bg-gradient-to-r from-red-600 to-rose-500":E()?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),_a(Oe,`width: ${v()??""}%`)}),l(xe,Oe)};j(he,xe=>{v()>0&&xe(ae)})}var J=r(he,2);{var V=xe=>{var Oe=Hr();l(xe,Oe)};j(J,xe=>{x()===0&&xe(V)})}var re=r(J,2);{var ce=xe=>{var Oe=Ir();l(xe,Oe)};j(re,xe=>{n()>0&&xe(ce)})}t(we),t(le);var de=r(le,2),ie=a(de);ie.__click=()=>I("rest_confirm");var be=a(ie);zr(be,{size:20}),t(ie);var ye=r(ie,2);ye.__click=()=>Jt.update(xe=>!xe);var $e=a(ye);na($e,{size:20});var Me=r($e,2);{var He=xe=>{var Oe=Ur();l(xe,Oe)};j(Me,xe=>{D().length>0&&xe(He)})}t(ye);var We=r(ye,2);We.__click=()=>I("character_info");var Pe=a(We);xr(Pe,{size:18}),t(We),t(de),t(d),t(c);var Ae=r(c,2),Ce=a(Ae);Ce.__click=()=>I("health");var De=a(Ce),Ie=a(De),st=a(Ie);{var dt=xe=>{var Oe=Ct();h(lt=>o(Oe,lt),[()=>i()("character.health.incapacitated")]),l(xe,Oe)},ot=xe=>{var Oe=Ee(),lt=fe(Oe);{var ft=it=>{var _t=Ct();h(mt=>o(_t,mt),[()=>i()("character.health.injured")]),l(it,_t)},wt=it=>{var _t=Ct();h(mt=>o(_t,mt),[()=>i()("character.health.healthy")]),l(it,_t)};j(lt,it=>{E()?it(ft):it(wt,!1)},!0)}l(xe,Oe)};j(st,xe=>{u()?xe(dt):xe(ot,!1)})}t(Ie);var yt=r(Ie,2),Et=a(yt),ct=a(Et,!0);t(Et);var rt=r(Et);t(yt),t(De);var at=r(De,2),xt=a(at),Ne=r(xt,2);{var At=xe=>{var Oe=Rr();h(()=>{Se(Oe,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10 ${u()?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":v()>=80?"bg-gradient-to-r from-red-600 to-rose-500":E()?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),_a(Oe,`width: ${v()??""}%`)}),l(xe,Oe)};j(Ne,xe=>{v()>0&&xe(At)})}var Ht=r(Ne,2);{var qt=xe=>{var Oe=qr();l(xe,Oe)};j(Ht,xe=>{x()===0&&xe(qt)})}var Pt=r(Ht,2);{var vt=xe=>{var Oe=Lr();l(xe,Oe)};j(Pt,xe=>{n()>0&&xe(vt)})}t(at),t(Ce),t(Ae),t(f);var St=r(f,2);St.__change=Y,rr(St,xe=>ze(T,xe),()=>e(T));var ea=r(St,2);nr(ea,{get isOpen(){return e(A)},get imageUrl(){return e(q)},onClose:()=>ze(A,!1),onCrop:N}),h((xe,Oe,lt,ft,wt)=>{me($,"aria-label",xe),me($,"title",Oe),o(ne,s().name),o(X,`Nv ${s().level??""}`),me(le,"aria-label",lt),Se(ge,1,`font-black uppercase tracking-wider ${u()?"text-red-500 animate-pulse":E()?"text-amber-500":x()>0?"text-slate-400":"text-emerald-500"}`),Se(Z,1,`${x()===0?"text-emerald-400":u()?"text-red-400":E()?"text-amber-400":"text-orange-400"} font-black group-hover:text-red-300`),o(G,x()),o(K,_()),Se(ke,1,`absolute top-0 left-0 h-full w-full ${x()===0?"bg-emerald-900/20":"bg-slate-900/50"}`),me(ie,"title",ft),me(ye,"aria-pressed",z()),me(Ce,"aria-label",wt),Se(Ie,1,`font-black uppercase tracking-widest ${u()?"text-red-500 animate-pulse":E()?"text-amber-500":x()>0?"text-slate-400":"text-emerald-500"}`),Se(Et,1,x()===0?"text-emerald-400":u()?"text-red-400":E()?"text-amber-400":"text-orange-400"),o(ct,x()),o(rt,` / ${_()??""}`),Se(xt,1,`absolute top-0 left-0 h-full w-full ${x()===0?"bg-emerald-900/20":"bg-slate-900/50"}`)},[()=>i()("character.header.back_dashboard"),()=>i()("character.header.back_dashboard"),()=>i()("character.header.health_label"),()=>i()("character.header.rest"),()=>i()("character.header.health_label")]),l(R,k),Le(),S()}Ge(["click","change"]);var Gr=b('<span class="text-[10px] text-indigo-300 uppercase font-bold mb-2 block"> </span>'),Wr=b('<div><!> <div class="flex items-center justify-between bg-black/40 rounded-xl p-1.5 border border-white/5"><button type="button" class="w-10 h-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg transition-all active:scale-90" aria-label="Diminuir"><!></button> <div class="flex flex-col items-center"><span class="text-2xl font-black text-white leading-none tracking-tighter"> </span></div> <button type="button" class="w-10 h-10 flex items-center justify-center bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-all active:scale-90 shadow-lg shadow-indigo-500/20" aria-label="Aumentar"><!></button></div></div>');function Ea(R,y){qe(y,!0);let i=sa(y,"min",3,0);function s(){const q=Math.max(i(),y.value-1);y.onUpdate(q)}function u(){const q=y.value+1;y.onUpdate(q)}var E=Wr(),x=a(E);{var _=q=>{var T=Gr(),I=a(T,!0);t(T),h(()=>o(I,y.label)),l(q,T)};j(x,q=>{y.label&&q(_)})}var v=r(x,2),n=a(v);n.__click=s;var z=a(n);Vt(z,{size:18}),t(n);var D=r(n,2),p=a(D),S=a(p);t(p),t(D);var F=r(D,2);F.__click=u;var A=a(F);nt(A,{size:18}),t(F),t(v),t(E),h(()=>o(S,`${y.value??""}d6`)),l(R,E),Le()}Ge(["click"]);var Yr=b('<p class="text-[10px] text-red-500 mt-1"> </p>'),Br=b("<option> </option>"),Xr=b("<option> </option>"),Kr=b('<div class="absolute z-50 top-full left-0 mt-1 w-64 p-2 bg-slate-800 border border-indigo-500 rounded-lg shadow-xl text-[10px] text-slate-300 leading-relaxed"> <div class="absolute -top-1 left-4 w-2 h-2 bg-slate-800 border-l border-t border-indigo-500 rotate-45"></div></div>'),Jr=b('<div class="relative"><div class="bg-slate-950 border border-slate-700 text-slate-200 px-3 py-2 rounded-xl text-xs font-bold flex items-center gap-2 group transition-all hover:border-indigo-500/50 cursor-pointer"> <button class="text-slate-500 hover:text-red-400 p-1 rounded-full hover:bg-red-400/10 transition-all"><!></button></div> <!></div>'),Qr=b('<div class="bg-indigo-900/10 border border-indigo-900/30 rounded-xl p-4 space-y-4"><!> <div class="grid grid-cols-2 gap-3"><label class="block"><span class="text-[10px] text-indigo-300 uppercase font-bold mb-1 block"> </span> <select class="w-full bg-slate-900 border border-slate-700 rounded-lg p-2 text-white text-sm"></select></label> <label class="block"><span class="text-[10px] text-indigo-300 uppercase font-bold mb-1 block"> </span> <select class="w-full bg-slate-900 border border-slate-700 rounded-lg p-2 text-white text-sm"><option>Melee</option><option>Ranged</option></select></label></div> <div><span class="text-[10px] text-indigo-300 uppercase font-bold mb-2 block"> </span> <div class="flex flex-wrap gap-2 mb-2 min-h-[2rem]"></div> <button class="w-full py-2 bg-slate-900 hover:bg-indigo-600 border border-slate-700 hover:border-indigo-500 rounded-lg text-sm font-bold text-slate-400 hover:text-white transition-all flex items-center justify-center gap-2"><!> </button></div></div>'),Zr=b('<div class="bg-indigo-900/10 border border-indigo-900/30 rounded-xl p-4 space-y-4"><div class="grid grid-cols-2 gap-3"><label class="block"><span class="text-[10px] text-indigo-300 uppercase font-bold mb-1 block"> </span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white font-bold" placeholder="Ex: 12"/></label> <label class="block"><span class="text-[10px] text-indigo-300 uppercase font-bold mb-1 block"> </span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white font-bold" placeholder="Ex: +1"/></label></div> <p class="text-[9px] text-indigo-400/60 italic leading-tight">* Armaduras usam o maior valor entre a Defesa Fixa ou sua Defesa Natural + Modificador.</p></div>'),es=b('<div class="bg-indigo-900/10 border border-indigo-900/30 rounded-xl p-4"><label class="block"><span class="text-[10px] text-indigo-300 uppercase font-bold mb-1 block"> </span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white font-bold" placeholder="Ex: 1, 2"/></label></div>'),ts=b('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-3 rounded-lg transition-colors"><!></button>'),as=b('<div class="space-y-4 p-1"><div><label for="item-name" class="text-xs font-bold text-slate-400 uppercase block mb-1"> </label> <input id="item-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white font-bold"/> <!></div> <div><label for="item-description" class="block text-xs font-bold text-slate-400 uppercase mb-1"> </label> <textarea id="item-description" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none"></textarea></div> <div class="grid grid-cols-2 gap-3"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold mb-1 block"> </span> <select class="w-full bg-slate-900 border border-slate-700 rounded-lg p-2 text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none"></select></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold mb-1 block"> </span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-2 text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none"/></label></div> <!> <!> <!> <div class="flex gap-2 pt-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg shadow-lg shadow-indigo-900/20 active:scale-[0.98] transition-all"> </button></div></div>'),rs=b('<div class="flex items-center gap-1 bg-indigo-600 text-white px-2 py-1 rounded-full text-[10px] font-bold"> <button class="hover:bg-red-600 rounded-full p-0.5 transition-colors"><!></button></div>'),ss=b('<div class="mb-3 p-3 bg-slate-900 rounded-lg border border-indigo-900/30"><div class="text-[10px] text-slate-400 uppercase font-bold mb-2"> </div> <div class="flex flex-wrap gap-1.5"></div></div>'),os=b('<button class="w-full text-left p-3 rounded-lg hover:bg-slate-900 border border-transparent hover:border-indigo-500 transition-all mb-1"><div class="font-bold text-white text-sm mb-1"> </div> <div class="text-xs text-slate-400 leading-relaxed"> </div></button>'),ls=b('<div class="text-center text-slate-500 py-8"> </div>'),is=b('<div class="fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-end md:items-center justify-center p-4"><div class="bg-slate-950 rounded-t-3xl md:rounded-2xl border border-slate-800 w-full md:max-w-md max-h-[80vh] overflow-hidden flex flex-col"><div class="p-4 border-b border-slate-800"><h3 class="text-lg font-bold text-white mb-3"> </h3> <!> <div class="relative"><!> <input type="text" class="w-full pl-10 pr-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none"/></div></div> <div class="flex-1 overflow-y-auto custom-scrollbar p-2"><!> <!></div> <div class="p-4 border-t border-slate-800"><button class="w-full py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg font-bold transition-colors"> </button></div></div></div>'),ns=b("<!> <!>",1);function ds(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",u),s=()=>B(Be,"$t",u),[u,E]=Ye();let x=_e(()=>i().isOpen&&i().type==="item"),_=_e(()=>i().data),v=Ke(Ot({id:void 0,name:"",type:ut.OTHER,quantity:1,price:0,description:"",availability:"Common",quality:"Standard",damageDice:"",traits:"",grip:Lt.ONE,range:"Melee",defenseFixed:0,defenseMod:0})),n=Ke(Ot([])),z=Wa,D=Ke(!1),p=Ke(""),S=Ke(null),F=_e(()=>z.filter(c=>!e(n).includes(c)&&s()(`character.traits.${c}`).toLowerCase().includes(e(p).toLowerCase())));gt(()=>{e(x)&&e(_)?(ze(v,{...e(_)},!0),ze(n,e(_).traits?e(_).traits.split(",").map(c=>c.trim()).filter(c=>c):[],!0)):e(x)&&!e(_)&&(ze(v,{id:void 0,name:"",type:ut.OTHER,quantity:1,price:0,description:"",availability:"Common",quality:"Standard",damageDice:"",traits:"",grip:Lt.ONE,range:"Melee",defenseFixed:0,defenseMod:0},!0),ze(n,[],!0))});function A(c){e(n).includes(c)?ze(n,e(n).filter(d=>d!==c),!0):ze(n,[...e(n),c],!0)}function q(c){ze(n,[...e(n),c],!0)}function T(){Te.update(c=>({...c,type:null,isOpen:!1,data:null})),ze(S,null)}function I(){if(!e(v).name?.trim())return alert(s()("character.modals.name_required"));const c=e(n).join(", "),d={...e(v),traits:c,id:e(v).id||Zt()};e(_)?Fe.updateItem(d):Fe.addItem(d),T()}var Y=ns(),N=fe(Y);{let c=_e(()=>s()("character.modals.item_editor"));bt(N,{get isOpen(){return e(x)},get title(){return e(c)},onClose:T,children:(d,m)=>{var $=as(),O=a($),H=a(O),C=a(H,!0);t(H);var L=r(H,2);Xe(L);var P=r(L,2);{var g=V=>{var re=Yr(),ce=a(re,!0);t(re),h(de=>o(ce,de),[()=>s()("character.modals.name_required")]),l(V,re)};j(P,V=>{e(v).name||V(g)})}t(O);var w=r(O,2),M=a(w),ee=a(M,!0);t(M);var ne=r(M,2);Yt(ne),me(ne,"rows",3),t(w);var ue=r(w,2),X=a(ue),se=a(X),ve=a(se,!0);t(se);var le=r(se,2);je(le,21,()=>Object.values(ut),Ue,(V,re,ce,de)=>{var ie=Br(),be=a(ie,!0);t(ie);var ye={};h(()=>{o(be,e(re)),ye!==(ye=e(re))&&(ie.value=(ie.__value=e(re))??"")}),l(V,ie)}),t(le),t(X);var Q=r(X,2),ge=a(Q),W=a(ge,!0);t(ge);var U=r(ge,2);Xe(U),t(Q),t(ue);var oe=r(ue,2);{var pe=V=>{var re=Qr(),ce=a(re);{let ct=_e(()=>parseInt(e(v).damageDice)||0),rt=_e(()=>s()("character.modals.damage"));Ea(ce,{get value(){return e(ct)},get label(){return`${e(rt)??""} (d6)`},onUpdate:at=>e(v).damageDice=at.toString()})}var de=r(ce,2),ie=a(de),be=a(ie),ye=a(be,!0);t(be);var $e=r(be,2);je($e,21,()=>Object.values(Lt),Ue,(ct,rt)=>{var at=Xr(),xt=a(at,!0);t(at);var Ne={};h(()=>{o(xt,e(rt)),Ne!==(Ne=e(rt))&&(at.value=(at.__value=e(rt))??"")}),l(ct,at)}),t($e),t(ie);var Me=r(ie,2),He=a(Me),We=a(He,!0);t(He);var Pe=r(He,2),Ae=a(Pe);Ae.value=Ae.__value="Melee";var Ce=r(Ae);Ce.value=Ce.__value="Ranged",t(Pe),t(Me),t(de);var De=r(de,2),Ie=a(De),st=a(Ie,!0);t(Ie);var dt=r(Ie,2);je(dt,21,()=>e(n),Ue,(ct,rt)=>{var at=Jr(),xt=a(at);xt.__click=()=>ze(S,e(S)===e(rt)?null:e(rt),!0);var Ne=a(xt),At=r(Ne);At.__click=vt=>{vt.stopPropagation(),A(e(rt))};var Ht=a(At);Gt(Ht,{size:14}),t(At),t(xt);var qt=r(xt,2);{var Pt=vt=>{var St=Kr(),ea=a(St);ht(),t(St),h(xe=>o(ea,`${xe??""} `),[()=>s()(`character.traits.${e(rt)}_DESC`)]),l(vt,St)};j(qt,vt=>{e(S)===e(rt)&&vt(Pt)})}t(at),h((vt,St)=>{o(Ne,`${vt??""} `),me(At,"title",St)},[()=>s()(`character.traits.${e(rt)}`),()=>s()("character.modals.remove")]),l(ct,at)}),t(dt);var ot=r(dt,2);ot.__click=()=>ze(D,!0);var yt=a(ot);nt(yt,{size:16});var Et=r(yt);t(ot),t(De),t(re),h((ct,rt,at,xt)=>{o(ye,ct),o(We,rt),o(st,at),o(Et,` ${xt??""}`)},[()=>s()("character.modals.hands"),()=>s()("character.modals.range"),()=>s()("character.modals.traits"),()=>s()("character.modals.add_property")]),zt($e,()=>e(v).grip,ct=>e(v).grip=ct),zt(Pe,()=>e(v).range,ct=>e(v).range=ct),l(V,re)};j(oe,V=>{e(v).type===ut.WEAPON&&V(pe)})}var Z=r(oe,2);{var G=V=>{var re=Zr(),ce=a(re),de=a(ce),ie=a(de),be=a(ie,!0);t(ie);var ye=r(ie,2);Xe(ye),t(de);var $e=r(de,2),Me=a($e),He=a(Me,!0);t(Me);var We=r(Me,2);Xe(We),t($e),t(ce),ht(2),t(re),h((Pe,Ae)=>{o(be,Pe),o(He,Ae)},[()=>s()("character.modals.fixed_def"),()=>s()("character.modals.mod_def")]),Re(ye,()=>e(v).defenseFixed,Pe=>e(v).defenseFixed=Pe),Re(We,()=>e(v).defenseMod,Pe=>e(v).defenseMod=Pe),l(V,re)};j(Z,V=>{e(v).type===ut.ARMOR&&V(G)})}var te=r(Z,2);{var K=V=>{var re=es(),ce=a(re),de=a(ce),ie=a(de,!0);t(de);var be=r(de,2);Xe(be),t(ce),t(re),h(ye=>o(ie,ye),[()=>s()("character.modals.mod_def")]),Re(be,()=>e(v).defenseMod,ye=>e(v).defenseMod=ye),l(V,re)};j(te,V=>{e(v).type===ut.SHIELD&&V(K)})}var we=r(te,2),ke=a(we);{var he=V=>{var re=ts();re.__click=()=>{Fe.deleteItem(e(_).id),T()};var ce=a(re);Rt(ce,{size:20}),t(re),h(de=>me(re,"title",de),[()=>s()("character.modals.delete")]),l(V,re)};j(ke,V=>{e(_)&&V(he)})}var ae=r(ke,2);ae.__click=I;var J=a(ae,!0);t(ae),t(we),t($),h((V,re,ce,de,ie,be,ye,$e)=>{o(C,V),me(L,"placeholder",re),o(ee,ce),me(ne,"placeholder",de),o(ve,ie),o(W,be),me(U,"placeholder",ye),o(J,$e)},[()=>s()("character.modals.name"),()=>s()("character.modals.name"),()=>s()("character.modals.description"),()=>s()("character.modals.description"),()=>s()("character.modals.type"),()=>s()("character.modals.qty"),()=>s()("character.modals.qty"),()=>s()("common.buttons.save")]),Re(L,()=>e(v).name,V=>e(v).name=V),Re(ne,()=>e(v).description,V=>e(v).description=V),zt(le,()=>e(v).type,V=>e(v).type=V),Re(U,()=>e(v).quantity,V=>e(v).quantity=V),l(d,$)},$$slots:{default:!0}})}var k=r(N,2);{var f=c=>{var d=is(),m=a(d),$=a(m),O=a($),H=a(O,!0);t(O);var C=r(O,2);{var L=le=>{var Q=ss(),ge=a(Q),W=a(ge);t(ge);var U=r(ge,2);je(U,21,()=>e(n),Ue,(oe,pe)=>{var Z=rs(),G=a(Z),te=r(G);te.__click=()=>A(e(pe));var K=a(te);Gt(K,{size:10}),t(te),t(Z),h((we,ke)=>{o(G,`${we??""} `),me(te,"title",ke)},[()=>s()(`character.traits.${e(pe)}`),()=>s()("character.modals.remove")]),l(oe,Z)}),t(U),t(Q),h(oe=>o(W,`${oe??""} (${e(n).length??""})`),[()=>s()("character.modals.selected_properties")]),l(le,Q)};j(C,le=>{e(n).length>0&&le(L)})}var P=r(C,2),g=a(P);Tr(g,{class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:18});var w=r(g,2);Xe(w),t(P),t($);var M=r($,2),ee=a(M);je(ee,17,()=>e(F),Ue,(le,Q)=>{var ge=os();ge.__click=()=>q(e(Q));var W=a(ge),U=a(W,!0);t(W);var oe=r(W,2),pe=a(oe,!0);t(oe),t(ge),h((Z,G)=>{o(U,Z),o(pe,G)},[()=>s()(`character.traits.${e(Q)}`),()=>s()(`character.traits.${e(Q)}_DESC`)]),l(le,ge)});var ne=r(ee,2);{var ue=le=>{var Q=ls(),ge=a(Q,!0);t(Q),h(W=>o(ge,W),[()=>s()("character.modals.no_property_found")]),l(le,Q)};j(ne,le=>{e(F).length===0&&le(ue)})}t(M);var X=r(M,2),se=a(X);se.__click=()=>{ze(D,!1),ze(p,"")};var ve=a(se,!0);t(se),t(X),t(m),t(d),h((le,Q,ge)=>{o(H,le),me(w,"placeholder",Q),o(ve,ge)},[()=>s()("character.modals.add_property"),()=>s()("character.modals.search_property"),()=>s()("character.modals.close")]),Re(w,()=>e(p),le=>ze(p,le)),l(c,d)};j(k,c=>{e(D)&&c(f)})}l(R,Y),Le(),E()}Ge(["click"]);var cs=b('<p class="text-[10px] text-red-500"> </p>'),vs=b("<option> </option>"),ps=b("<option> </option>"),us=b('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded"><!></button>'),bs=b('<div class="space-y-3 p-1"><div><label class="text-xs font-bold text-slate-400 uppercase"> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1"/></label> <!></div> <div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold"> </span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <div class="relative"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold"> </span> <input list="traditions" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"/></label> <datalist id="traditions"></datalist></div></div> <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700"><label for="maxCastings" class="text-xs text-slate-400 uppercase"> </label> <input id="maxCastings" type="number" class="w-16 bg-slate-800 border border-slate-600 rounded p-1 text-white text-center"/></div> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase"> </span> <button> </button></div> <label class="block text-xs font-bold text-slate-400 uppercase"> <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded"> </button></div></div>');function xs(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",u),s=()=>B(Be,"$t",u),[u,E]=Ye();let x=_e(()=>i().isOpen&&i().type==="spell"),_=_e(()=>i().data),v=Ke(Ot({id:void 0,name:"",tier:"Novice",tradition:"Destruction",type:"Attack",castings:1,maxCastings:1,description:"",effect:null}));gt(()=>{e(x)&&e(_)?ze(v,{...e(_)},!0):e(x)&&!e(_)&&ze(v,{id:void 0,name:"",tier:"Novice",tradition:"Destruction",type:"Attack",castings:1,maxCastings:1,description:"",effect:null},!0)});function n(){Te.update(p=>({...p,type:null,isOpen:!1,data:null}))}function z(){if(!e(v).name?.trim())return alert(s()("character.modals.name_required"));const p={...e(v),id:e(v).id||Zt()};e(_)?Fe.updateSpell(p):Fe.addSpell(p),n()}function D(){Te.update(p=>({...p,type:"effect",data:{parentType:"spell",parentData:e(v)}}))}{let p=_e(()=>s()("character.modals.spell_editor"));bt(R,{get isOpen(){return e(x)},get title(){return e(p)},onClose:n,children:(S,F)=>{var A=bs(),q=a(A),T=a(q),I=a(T),Y=r(I);Xe(Y),t(T);var N=r(T,2);{var k=te=>{var K=cs(),we=a(K,!0);t(K),h(ke=>o(we,ke),[()=>s()("character.modals.name_required")]),l(te,K)};j(N,te=>{e(v).name||te(k)})}t(q);var f=r(q,2),c=a(f),d=a(c),m=a(d,!0);t(d);var $=r(d,2);je($,20,()=>["Novice","Expert","Master"],Ue,(te,K,we,ke)=>{var he=vs(),ae=a(he,!0);t(he);var J={};h(()=>{o(ae,K),J!==(J=K)&&(he.value=(he.__value=K)??"")}),l(te,he)}),t($),t(c);var O=r(c,2),H=a(O),C=a(H),L=a(C,!0);t(C);var P=r(C,2);Xe(P),t(H);var g=r(H,2);je(g,21,()=>Ya,Ue,(te,K,we,ke)=>{var he=ps(),ae=a(he,!0);t(he);var J={};h(()=>{o(ae,e(K)),J!==(J=e(K))&&(he.value=(he.__value=e(K))??"")}),l(te,he)}),t(g),t(O),t(f);var w=r(f,2),M=a(w),ee=a(M,!0);t(M);var ne=r(M,2);Xe(ne),ne.__input=()=>e(v).castings=e(v).maxCastings,t(w);var ue=r(w,2),X=a(ue),se=a(X,!0);t(X);var ve=r(X,2);ve.__click=D;var le=a(ve,!0);t(ve),t(ue);var Q=r(ue,2),ge=a(Q),W=r(ge);Yt(W),me(W,"rows",4),t(Q);var U=r(Q,2),oe=a(U);{var pe=te=>{var K=us();K.__click=()=>{Fe.deleteSpell(e(_).id),n()};var we=a(K);Rt(we,{size:18}),t(K),h(ke=>me(K,"title",ke),[()=>s()("character.modals.delete")]),l(te,K)};j(oe,te=>{e(_)&&te(pe)})}var Z=r(oe,2);Z.__click=z;var G=a(Z,!0);t(Z),t(U),t(A),h((te,K,we,ke,he,ae,J,V,re,ce,de)=>{o(I,`${te??""} `),me(Y,"placeholder",K),o(m,we),o(L,ke),me(P,"placeholder",he),o(ee,ae),o(se,J),Se(ve,1,`text-[10px] px-2 py-1 rounded border ${e(v).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),o(le,V),o(ge,`${re??""} `),me(W,"placeholder",ce),o(G,de)},[()=>s()("character.modals.name"),()=>s()("character.modals.name"),()=>s()("character.modals.tier"),()=>s()("character.modals.tradition"),()=>s()("character.modals.tradition"),()=>s()("character.modals.castings"),()=>s()("character.modals.associated_effect"),()=>e(v).effect?s()("character.modals.configured"):s()("character.modals.none"),()=>s()("character.modals.description"),()=>s()("character.modals.description"),()=>s()("common.buttons.save")]),Re(Y,()=>e(v).name,te=>e(v).name=te),zt($,()=>e(v).tier,te=>e(v).tier=te),Re(P,()=>e(v).tradition,te=>e(v).tradition=te),Re(ne,()=>e(v).maxCastings,te=>e(v).maxCastings=te),Re(W,()=>e(v).description,te=>e(v).description=te),l(S,A)},$$slots:{default:!0}})}Le(),E()}Ge(["input","click"]);var _s=b('<p class="text-[10px] text-red-500 mt-1"> </p>'),fs=b("<option> </option>"),gs=b('<div class="bg-indigo-900/10 border border-indigo-900/30 rounded-xl p-4"><label for="maxUses" class="block"><span class="text-[10px] text-indigo-300 uppercase font-bold mb-1 block"> </span> <input id="maxUses" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white font-bold"/></label></div>'),hs=b('<label for="durationValue" class="block"><span class="text-[10px] text-indigo-300 uppercase font-bold mb-1 block"> </span> <input id="durationValue" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white font-bold"/></label>'),ms=b('<div class="bg-indigo-900/10 border border-indigo-900/30 rounded-xl p-4 space-y-3"><label for="durationType" class="block"><span class="text-[10px] text-indigo-300 uppercase font-bold mb-1 block">Tipo de Duração</span> <select id="durationType" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white text-xs"><option>Sorte Encerra</option><option>Minutos</option><option>Horas</option></select></label> <!></div>'),$s=b('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-3 rounded-lg transition-colors"><!></button>'),ys=b('<div class="space-y-4 p-1"><div><label for="talentName" class="text-xs font-bold text-slate-400 uppercase block mb-1"> </label> <input id="talentName" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white font-bold"/> <!></div> <div class="grid grid-cols-2 gap-3"><div><label for="talentSource" class="text-xs font-bold text-slate-400 uppercase block mb-1"> </label> <select id="talentSource" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white text-xs"></select></div> <div><label for="talentType" class="text-xs font-bold text-slate-400 uppercase block mb-1"> </label> <select id="talentType" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white text-xs"><option> </option><option> </option><option> </option></select></div></div> <!> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase"> </span> <button> </button></div> <div><label for="talentDesc" class="block text-xs font-bold text-slate-400 uppercase mb-1"> </label> <textarea id="talentDesc" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white text-sm focus:ring-2 focus:ring-indigo-500 outline-none"></textarea></div> <div class="flex gap-2 pt-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg shadow-lg shadow-indigo-900/20 active:scale-[0.98] transition-all"> </button></div></div>');function ws(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",u),s=()=>B(Be,"$t",u),[u,E]=Ye();let x=_e(()=>i().isOpen&&i().type==="talent"),_=_e(()=>i().data),v=Ke(!1),n=Ke(Ot({id:void 0,name:"",description:"",source:Je.ANCESTRY,activityType:"Passive",uses:0,maxUses:0,duration:"ROUNDS",durationValue:1,isPassive:!0,effect:null}));gt(()=>{if(e(x)&&e(_)){const S=e(_).id;ze(v,!!S),ze(n,{id:e(_).id,name:e(_).name||"",description:e(_).description||"",source:e(_).source||Je.ANCESTRY,activityType:e(_).activityType||(e(_).isPassive?"Passive":"Uses"),uses:e(_).uses||0,maxUses:e(_).maxUses||0,duration:e(_).duration||"ROUNDS",durationValue:e(_).durationValue||1,isPassive:e(_).isPassive??!0,effect:e(_).effect||null},!0)}else e(x)&&!e(_)&&(ze(v,!1),ze(n,{id:void 0,name:"",description:"",source:Je.ANCESTRY,activityType:"Passive",uses:0,maxUses:0,duration:"ROUNDS",durationValue:1,isPassive:!0,effect:null},!0))});function z(){Te.update(S=>({...S,type:null,isOpen:!1,data:null}))}function D(){if(!e(n).name?.trim())return alert(s()("character.modals.name_required"));const S={...e(n),id:e(n).id||Zt(),isPassive:e(n).activityType==="Passive"};e(n).activityType==="Passive"?(S.maxUses=0,S.uses=0):e(n).activityType==="Uses"&&!e(v)?S.uses=e(n).maxUses:e(n).activityType==="Duration"&&e(n).duration==="LUCK_ENDS"&&!e(v)&&(S.maxUses=1,S.uses=1),e(v)?Fe.updateTalent(S):Fe.addTalent(S),z()}function p(){Te.update(S=>({...S,type:"effect",data:{parentType:"talent",parentData:e(n)}}))}{let S=_e(()=>s()("character.modals.talent_editor"));bt(R,{get isOpen(){return e(x)},get title(){return e(S)},onClose:z,children:(F,A)=>{var q=ys(),T=a(q),I=a(T),Y=a(I,!0);t(I);var N=r(I,2);Xe(N);var k=r(N,2);{var f=ae=>{var J=_s(),V=a(J,!0);t(J),h(re=>o(V,re),[()=>s()("character.modals.name_required")]),l(ae,J)};j(k,ae=>{e(n).name||ae(f)})}t(T);var c=r(T,2),d=a(c),m=a(d),$=a(m,!0);t(m);var O=r(m,2);je(O,21,()=>Object.values(Je),Ue,(ae,J)=>{var V=fs(),re=a(V,!0);t(V);var ce={};h(de=>{o(re,de),ce!==(ce=e(J))&&(V.value=(V.__value=e(J))??"")},[()=>s()(`character.talents.sources.${e(J)}`)]),l(ae,V)}),t(O),t(d);var H=r(d,2),C=a(H),L=a(C,!0);t(C);var P=r(C,2),g=a(P),w=a(g,!0);t(g),g.value=g.__value="Passive";var M=r(g),ee=a(M,!0);t(M),M.value=M.__value="Uses";var ne=r(M),ue=a(ne,!0);t(ne),ne.value=ne.__value="Duration",t(P),t(H),t(c);var X=r(c,2);{var se=ae=>{var J=gs(),V=a(J),re=a(V),ce=a(re,!0);t(re);var de=r(re,2);Xe(de),t(V),t(J),h(ie=>o(ce,ie),[()=>s()("character.modals.max_uses")]),Re(de,()=>e(n).maxUses,ie=>e(n).maxUses=ie),l(ae,J)},ve=ae=>{var J=Ee(),V=fe(J);{var re=ce=>{var de=ms(),ie=a(de),be=r(a(ie),2),ye=a(be);ye.value=ye.__value="LUCK_ENDS";var $e=r(ye);$e.value=$e.__value="MINUTES";var Me=r($e);Me.value=Me.__value="HOURS",t(be),t(ie);var He=r(ie,2);{var We=Pe=>{var Ae=hs(),Ce=a(Ae),De=a(Ce);t(Ce);var Ie=r(Ce,2);Xe(Ie),t(Ae),h(()=>o(De,`Duração (${e(n).duration==="MINUTES"?"Min":"Horas"})`)),Re(Ie,()=>e(n).durationValue,st=>e(n).durationValue=st),l(Pe,Ae)};j(He,Pe=>{(e(n).duration==="MINUTES"||e(n).duration==="HOURS")&&Pe(We)})}t(de),zt(be,()=>e(n).duration,Pe=>e(n).duration=Pe),l(ce,de)};j(V,ce=>{e(n).activityType==="Duration"&&ce(re)},!0)}l(ae,J)};j(X,ae=>{e(n).activityType==="Uses"?ae(se):ae(ve,!1)})}var le=r(X,2),Q=a(le),ge=a(Q,!0);t(Q);var W=r(Q,2);W.__click=p;var U=a(W,!0);t(W),t(le);var oe=r(le,2),pe=a(oe),Z=a(pe,!0);t(pe);var G=r(pe,2);Yt(G),me(G,"rows",4),t(oe);var te=r(oe,2),K=a(te);{var we=ae=>{var J=$s();J.__click=()=>{Fe.deleteTalent(e(_).id),z()};var V=a(J);Rt(V,{size:20}),t(J),h(re=>me(J,"title",re),[()=>s()("character.modals.delete")]),l(ae,J)};j(K,ae=>{e(_)&&ae(we)})}var ke=r(K,2);ke.__click=D;var he=a(ke,!0);t(ke),t(te),t(q),h((ae,J,V,re,ce,de,ie,be,ye,$e,Me,He)=>{o(Y,ae),me(N,"placeholder",J),o($,V),o(L,re),o(w,ce),o(ee,de),o(ue,ie),o(ge,be),Se(W,1,`text-[10px] px-2 py-1 rounded border ${e(n).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),o(U,ye),o(Z,$e),me(G,"placeholder",Me),o(he,He)},[()=>s()("character.modals.name"),()=>s()("character.modals.name"),()=>s()("character.talents.source"),()=>s()("character.talents.type"),()=>s()("character.talents.types.Passive"),()=>s()("character.talents.types.Uses"),()=>s()("character.talents.types.Duration"),()=>s()("character.modals.associated_effect"),()=>e(n).effect?s()("character.modals.configured"):s()("character.modals.none"),()=>s()("character.modals.description"),()=>s()("character.modals.description"),()=>s()("common.buttons.save")]),Re(N,()=>e(n).name,ae=>e(n).name=ae),zt(O,()=>e(n).source,ae=>e(n).source=ae),zt(P,()=>e(n).activityType,ae=>e(n).activityType=ae),Re(G,()=>e(n).description,ae=>e(n).description=ae),l(F,q)},$$slots:{default:!0}})}Le(),E()}Ge(["click"]);var ks=b('<p class="text-[10px] text-red-500"> </p>'),zs=b('<div><label for="effectName" class="text-xs font-bold text-slate-400 uppercase"> </label> <input id="effectName" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/> <!></div>'),Ss=b('<div class="text-center text-xs text-slate-500 italic mb-2"> </div>'),Ts=b("<option> </option>"),Os=b('<input type="number" class="bg-slate-900 border border-slate-700 rounded p-2 text-white"/>'),Ms=b("<option> </option>"),Es=b('<div class="flex gap-1 items-center animate-in fade-in slide-in-from-left-1 duration-200"><select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/3"></select> <select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4"><option>Add (+/-)</option><option>Set (=)</option><option>Mult (x)</option></select> <input type="number" class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4 text-center"/> <button class="text-slate-600 hover:text-red-400 p-1"><!></button></div>'),As=b('<div><label class="text-xs font-bold text-slate-400 uppercase"> <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"></textarea></label></div>'),Cs=b('<div class="space-y-4 p-1"><!> <div><label for="effectDuration" class="text-xs font-bold text-slate-400 uppercase"> </label> <div class="grid grid-cols-2 gap-2"><select id="effectDuration" class="bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"></select> <!></div></div> <div class="bg-slate-950 p-3 rounded border border-slate-800"><div class="flex justify-between items-center mb-2"><span class="text-xs font-bold text-indigo-400 uppercase"> </span> <button class="text-[10px] bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600 flex items-center gap-1"><!> </button></div> <div class="space-y-2"></div></div> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded"> </button></div>');function Ps(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",E),s=()=>B(Be,"$t",E),u=()=>B(Ve,"$character",E),[E,x]=Ye();let _=_e(()=>i().isOpen&&i().type==="effect"),v=_e(()=>i().data),n=Ke(null);gt(()=>{e(_)&&(e(v)&&e(v).parentType?ze(n,e(v).parentData.effect?{...e(v).parentData.effect}:{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0):e(v)?(ze(n,{...e(v)},!0),Array.isArray(e(n).modifiers)||(e(n).modifiers=[])):ze(n,{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0))});function z(){Te.update(F=>({...F,type:null,isOpen:!1,data:null}))}function D(){e(n).modifiers=[...e(n).modifiers||[],{target:"str",type:pt.ADD,value:1}]}function p(F){e(n).modifiers=e(n).modifiers.filter((A,q)=>q!==F)}function S(){if(!e(v)?.parentType&&!e(n).name?.trim())return alert(s()("character.modals.effect_name_required"));const F={...e(n),initialRounds:e(n).duration==="ROUNDS"?e(n).roundsLeft:0};if(e(v)?.parentType){const A={...e(v).parentData,effect:F};Te.update(q=>({...q,type:e(v).parentType,data:A}));return}e(n).id&&u().effects.some(A=>A.id===e(n).id)?Fe.updateEffect(F):Fe.addEffect({...F,id:Zt(),isActive:!0}),z()}{let F=_e(()=>s()("character.modals.effect_manager"));bt(R,{get isOpen(){return e(_)},get title(){return e(F)},onClose:z,children:(A,q)=>{var T=Ee(),I=fe(T);{var Y=N=>{var k=Cs(),f=a(k);{var c=W=>{var U=zs(),oe=a(U),pe=a(oe,!0);t(oe);var Z=r(oe,2);Xe(Z);var G=r(Z,2);{var te=K=>{var we=ks(),ke=a(we,!0);t(we),h(he=>o(ke,he),[()=>s()("character.modals.effect_name_required")]),l(K,we)};j(G,K=>{e(n).name||K(te)})}t(U),h(K=>o(pe,K),[()=>s()("character.modals.name")]),Re(Z,()=>e(n).name,K=>e(n).name=K),l(W,U)},d=W=>{var U=Ss(),oe=a(U,!0);t(U),h(pe=>o(oe,pe),[()=>s()("character.modals.inherited_from_parent")]),l(W,U)};j(f,W=>{e(v)?.parentType?W(d,!1):W(c)})}var m=r(f,2),$=a(m),O=a($,!0);t($);var H=r($,2),C=a(H);je(C,21,()=>Object.entries(ya),Ue,(W,U)=>{var oe=_e(()=>ua(e(U),2));let pe=()=>e(oe)[0],Z=()=>e(oe)[1];var G=Ts(),te=a(G,!0);t(G);var K={};h(()=>{o(te,Z()),K!==(K=pe())&&(G.value=(G.__value=pe())??"")}),l(W,G)}),t(C);var L=r(C,2);{var P=W=>{var U=Os();Xe(U),Re(U,()=>e(n).roundsLeft,oe=>e(n).roundsLeft=oe),l(W,U)};j(L,W=>{e(n).duration==="ROUNDS"&&W(P)})}t(H),t(m);var g=r(m,2),w=a(g),M=a(w),ee=a(M,!0);t(M);var ne=r(M,2);ne.__click=D;var ue=a(ne);nt(ue,{size:10});var X=r(ue);t(ne),t(w);var se=r(w,2);je(se,21,()=>e(n).modifiers,Ue,(W,U,oe)=>{var pe=Es(),Z=a(pe);je(Z,21,()=>Object.entries(la),Ue,(ce,de)=>{var ie=_e(()=>ua(e(de),2));let be=()=>e(ie)[0],ye=()=>e(ie)[1];var $e=Ms(),Me=a($e,!0);t($e);var He={};h(()=>{o(Me,ye()),He!==(He=be())&&($e.value=($e.__value=be())??"")}),l(ce,$e)}),t(Z);var G=r(Z,2),te=a(G),K={},we=r(te),ke={},he=r(we),ae={};t(G);var J=r(G,2);Xe(J);var V=r(J,2);V.__click=()=>p(oe);var re=a(V);Rt(re,{size:12}),t(V),t(pe),h(ce=>{K!==(K=pt.ADD)&&(te.value=(te.__value=pt.ADD)??""),ke!==(ke=pt.SET)&&(we.value=(we.__value=pt.SET)??""),ae!==(ae=pt.MULT)&&(he.value=(he.__value=pt.MULT)??""),me(J,"step",e(U).type===pt.MULT?"0.1":"1"),me(V,"aria-label",ce)},[()=>s()("character.modals.remove_modifier")]),zt(Z,()=>e(U).target,ce=>e(U).target=ce),zt(G,()=>e(U).type,ce=>e(U).type=ce),Re(J,()=>e(U).value,ce=>e(U).value=ce),l(W,pe)}),t(se),t(g);var ve=r(g,2);{var le=W=>{var U=As(),oe=a(U),pe=a(oe),Z=r(pe);Yt(Z),t(oe),t(U),h(G=>o(pe,`${G??""} `),[()=>s()("character.modals.description")]),Re(Z,()=>e(n).description,G=>e(n).description=G),l(W,U)};j(ve,W=>{e(v)?.parentType||W(le)})}var Q=r(ve,2);Q.__click=S;var ge=a(Q,!0);t(Q),t(k),h((W,U,oe,pe)=>{o(O,W),o(ee,U),o(X,` ${oe??""}`),o(ge,pe)},[()=>s()("character.modals.duration"),()=>s()("character.modals.modifiers"),()=>s()("character.modals.add"),()=>s()("character.modals.save_effect")]),zt(C,()=>e(n).duration,W=>e(n).duration=W),l(N,k)};j(I,N=>{e(n)&&N(Y)})}l(A,T)},$$slots:{default:!0}})}Le(),x()}Ge(["click"]);var Ds=b('<div class="space-y-4 p-1"><h3 class="text-white font-bold text-lg"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold"> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded"> </button></div>');function Ns(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",u),s=()=>B(Be,"$t",u),[u,E]=Ye();let x=_e(()=>i().isOpen&&i().type==="attribute"),_=_e(()=>i().data),v=Ke(Ot({}));gt(()=>{e(x)&&e(_)&&ze(v,{...e(_)},!0)});function n(){Te.update(D=>({...D,type:null,isOpen:!1,data:null}))}function z(){Ve.update(D=>({...D,attributes:D.attributes.map(p=>p.key===e(v).key?{...p,value:parseInt(e(v).value)}:p)})),n()}{let D=_e(()=>s()("character.modals.attribute"));bt(R,{get isOpen(){return e(x)},get title(){return e(D)},onClose:n,children:(p,S)=>{var F=Ds(),A=a(F),q=a(A,!0);t(A);var T=r(A,2),I=a(T),Y=a(I),N=r(Y);Xe(N),t(I),t(T);var k=r(T,2);k.__click=z;var f=a(k,!0);t(k),t(F),h((c,d)=>{o(q,e(v).name),o(Y,`${c??""} `),o(f,d)},[()=>s()("character.modals.base_value"),()=>s()("common.buttons.save")]),Re(N,()=>e(v).value,c=>e(v).value=c),l(p,F)},$$slots:{default:!0}})}Le(),E()}Ge(["click"]);var js=b('<div class="space-y-4 p-1"><h3 class="text-white font-bold text-lg uppercase"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold"> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded"> </button></div>');function Hs(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",E),s=()=>B(Ve,"$character",E),u=()=>B(Be,"$t",E),[E,x]=Ye();let _=_e(()=>i().isOpen&&i().type==="stat"),v=_e(()=>i().data),n=Ke(Ot({}));gt(()=>{e(_)&&e(v)&&ze(n,e(v)==="defense"?{key:"naturalDefense",name:"Defesa Natural",value:s().naturalDefense}:{key:"speed",name:"Velocidade",value:s().speed},!0)});function z(){Te.update(p=>({...p,type:null,isOpen:!1,data:null}))}function D(){Ve.update(p=>({...p,[e(n).key]:parseInt(e(n).value)||0})),z()}{let p=_e(()=>e(n).name||u()("character.modals.info"));bt(R,{get isOpen(){return e(_)},get title(){return e(p)},onClose:z,children:(S,F)=>{var A=js(),q=a(A),T=a(q,!0);t(q);var I=r(q,2),Y=a(I),N=a(Y),k=r(N);Xe(k),t(Y),t(I);var f=r(I,2);f.__click=D;var c=a(f,!0);t(f),t(A),h((d,m)=>{o(T,e(n).name),o(N,`${d??""} `),o(c,m)},[()=>u()("character.modals.base_value"),()=>u()("common.buttons.save")]),Re(k,()=>e(n).value,d=>e(n).value=d),l(S,A)},$$slots:{default:!0}})}Le(),x()}Ge(["click"]);var Is=b('<div class="space-y-4 p-1"><div class="grid grid-cols-2 gap-4"><div><label class="text-xs text-slate-400 uppercase font-bold"> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs text-slate-400 uppercase font-bold"> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div><label class="text-xs text-red-400 uppercase font-bold"> <input type="number" class="w-full bg-slate-900 border border-red-900/50 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded"> </button></div>');function Us(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",_),s=()=>B(It,"$damage",_),u=()=>B(Nt,"$normalHealth",_),E=()=>B(jt,"$currentHealth",_),x=()=>B(Be,"$t",_),[_,v]=Ye();let n=_e(()=>i().isOpen&&i().type==="health"),z=Ke(Ot({d:0,nh:0,ch:0}));gt(()=>{e(n)&&ze(z,{d:s(),nh:u(),ch:E()},!0)});function D(){Te.update(S=>({...S,type:null,isOpen:!1,data:null}))}function p(){It.set(Math.max(0,parseInt(e(z).d))),Nt.set(Math.max(1,parseInt(e(z).nh))),jt.set(Math.max(0,parseInt(e(z).ch))),D()}{let S=_e(()=>x()("character.modals.health_damage"));bt(R,{get isOpen(){return e(n)},get title(){return e(S)},onClose:D,children:(F,A)=>{var q=Is(),T=a(q),I=a(T),Y=a(I),N=a(Y),k=r(N);Xe(k),t(Y),t(I);var f=r(I,2),c=a(f),d=a(c),m=r(d);Xe(m),t(c),t(f),t(T);var $=r(T,2),O=a($),H=a(O),C=r(H);Xe(C),t(O),t($);var L=r($,2);L.__click=p;var P=a(L,!0);t(L),t(q),h((g,w,M,ee)=>{o(N,`${g??""} `),o(d,`${w??""} `),o(H,`${M??""} `),o(P,ee)},[()=>x()("character.modals.normal_health"),()=>x()("character.modals.current_health"),()=>x()("character.modals.damage"),()=>x()("character.modals.update")]),Re(k,()=>e(z).nh,g=>e(z).nh=g),Re(m,()=>e(z).ch,g=>e(z).ch=g),Re(C,()=>e(z).d,g=>e(z).d=g),l(F,q)},$$slots:{default:!0}})}Le(),v()}Ge(["click"]);var Rs=b('<div class="space-y-4 p-1"><div><label class="text-xs font-bold text-slate-400 uppercase"> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div class="grid grid-cols-2 gap-4"><div><label class="text-xs font-bold text-slate-400 uppercase"> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs font-bold text-slate-400 uppercase"> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div class="pt-2 border-t border-slate-700 space-y-3"><div><label class="text-[10px] font-bold text-slate-400 uppercase">Novice <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Expert <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Master <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded mt-2"> </button></div>');function qs(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",_),s=()=>B(Ve,"$character",_),u=()=>B(Nt,"$normalHealth",_),E=()=>B(jt,"$currentHealth",_),x=()=>B(Be,"$t",_),[_,v]=Ye();let n=_e(()=>i().isOpen&&i().type==="character_info"),z=Ke(Ot({}));gt(()=>{e(n)&&ze(z,{name:s().name,level:s().level,ancestry:s().ancestry,novicePath:s().paths.novice,expertPath:s().paths.expert,masterPath:s().paths.master,normalHealth:u(),currentHealth:E()},!0)});function D(){Te.update(S=>({...S,type:null,isOpen:!1,data:null}))}function p(){Ve.update(S=>({...S,name:e(z).name,level:parseInt(e(z).level)||0,ancestry:e(z).ancestry,paths:{novice:e(z).novicePath,expert:e(z).expertPath,master:e(z).masterPath}})),Nt.set(parseInt(e(z).normalHealth)),jt.set(parseInt(e(z).currentHealth)),D()}{let S=_e(()=>x()("character.modals.character_info"));bt(R,{get isOpen(){return e(n)},get title(){return e(S)},onClose:D,children:(F,A)=>{var q=Rs(),T=a(q),I=a(T),Y=a(I),N=r(Y);Xe(N),t(I),t(T);var k=r(T,2),f=a(k),c=a(f),d=a(c),m=r(d);Xe(m),t(c),t(f);var $=r(f,2),O=a($),H=a(O),C=r(H);Xe(C),t(O),t($),t(k);var L=r(k,2),P=a(L),g=a(P),w=r(a(g));Xe(w),t(g),t(P);var M=r(P,2),ee=a(M),ne=r(a(ee));Xe(ne),t(ee),t(M);var ue=r(M,2),X=a(ue),se=r(a(X));Xe(se),t(X),t(ue),t(L);var ve=r(L,2);ve.__click=p;var le=a(ve,!0);t(ve),t(q),h((Q,ge,W,U)=>{o(Y,`${Q??""} `),o(d,`${ge??""} `),o(H,`${W??""} `),o(le,U)},[()=>x()("character.modals.name"),()=>x()("character.modals.level"),()=>x()("character.modals.ancestry"),()=>x()("common.buttons.save")]),Re(N,()=>e(z).name,Q=>e(z).name=Q),Re(m,()=>e(z).level,Q=>e(z).level=Q),Re(C,()=>e(z).ancestry,Q=>e(z).ancestry=Q),Re(w,()=>e(z).novicePath,Q=>e(z).novicePath=Q),Re(ne,()=>e(z).expertPath,Q=>e(z).expertPath=Q),Re(se,()=>e(z).masterPath,Q=>e(z).masterPath=Q),l(F,q)},$$slots:{default:!0}})}Le(),v()}Ge(["click"]);var Ls=b('<div class="mt-4 p-3 bg-green-900/20 border border-green-900/50 rounded-lg"><div class="flex items-center gap-2 mb-1 text-[10px] font-bold text-green-400 uppercase tracking-wider"> </div> <div class="text-xs text-green-200/70"> </div></div>'),Vs=b('<button class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> </button> <button class="w-full bg-slate-700 hover:bg-slate-600 text-slate-300 font-bold py-2 rounded-lg text-sm transition-colors"> </button>',1),Fs=b('<button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> </button>'),Gs=b('<div class="space-y-6 p-1"><div class="bg-indigo-900/10 border border-indigo-500/20 p-4 rounded-xl"><h3 class="text-xl font-bold text-white mb-2"> </h3> <p class="text-sm text-slate-400 leading-relaxed line-clamp-4"> </p> <!></div> <div class="flex flex-col gap-2 pt-2"><!> <button class="w-full text-slate-500 hover:text-slate-300 text-xs font-bold uppercase tracking-widest py-2 transition-colors mt-2"> </button></div></div>');function Ws(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",u),s=()=>B(Be,"$t",u),[u,E]=Ye();let x=_e(()=>i().isOpen&&(i().type==="confirm_spell"||i().type==="confirm_talent")),_=_e(()=>i().type),v=_e(()=>i().data);function n(){Te.update(D=>({...D,type:null,isOpen:!1,data:null}))}function z(D){D&&e(v).effect&&Fe.applyEffectToCharacter(e(v).effect,e(v)),e(_)==="confirm_spell"?Fe.commitSpellCast(e(v)):Fe.commitTalentUse(e(v)),n()}{let D=_e(()=>e(_)==="confirm_spell"?s()("character.modals.confirm_cast"):s()("character.modals.confirm_activation"));bt(R,{get isOpen(){return e(x)},get title(){return e(D)},onClose:n,children:(p,S)=>{var F=Ee(),A=fe(F);{var q=T=>{var I=Gs(),Y=a(I),N=a(Y),k=a(N,!0);t(N);var f=r(N,2),c=a(f,!0);t(f);var d=r(f,2);{var m=g=>{var w=Ls(),M=a(w),ee=a(M,!0);t(M);var ne=r(M,2),ue=a(ne);t(ne),t(w),h(X=>{o(ee,X),o(ue,`${e(v).effect.name??""}: ${e(v).effect.description??""}`)},[()=>s()("character.modals.associated_effect")]),l(g,w)};j(d,g=>{e(v).effect&&g(m)})}t(Y);var $=r(Y,2),O=a($);{var H=g=>{var w=Vs(),M=fe(w);M.__click=()=>z(!0);var ee=a(M);Sa(ee,{size:18});var ne=r(ee);t(M);var ue=r(M,2);ue.__click=()=>z(!1);var X=a(ue,!0);t(ue),h((se,ve)=>{o(ne,` ${se??""}`),o(X,ve)},[()=>s()("character.modals.apply_effect_use"),()=>s()("character.modals.use_without_effect")]),l(g,w)},C=g=>{var w=Fs();w.__click=()=>z(!1);var M=a(w);$t(M,{size:18});var ee=r(M);t(w),h(ne=>o(ee,` ${ne??""}`),[()=>s()("character.modals.confirm_use")]),l(g,w)};j(O,g=>{e(v).effect?g(H):g(C,!1)})}var L=r(O,2);L.__click=n;var P=a(L,!0);t(L),t($),t(I),h(g=>{o(k,e(v).name),o(c,e(v).description),o(P,g)},[()=>s()("common.buttons.cancel_cap")]),l(T,I)};j(A,T=>{e(v)&&T(q)})}l(p,F)},$$slots:{default:!0}})}Le(),E()}Ge(["click"]);var Ys=b("<div></div>"),Bs=b('<button><div class="flex-1"><div class="flex items-center gap-2 mb-1"><span class="text-[10px] bg-indigo-500/20 text-indigo-400 px-2 py-0.5 rounded font-black uppercase"> </span> <h4 class="font-bold text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight"> </h4></div> <p class="text-xs text-slate-500 italic uppercase font-bold tracking-widest"> </p></div> <div class="text-right shrink-0"><span class="block text-[10px] text-slate-500 uppercase font-bold text-center mb-1"> </span> <div class="flex gap-0.5"></div></div></button>'),Xs=b('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm"> </p></div>'),Ks=b('<div class="space-y-3 p-1"></div>');function Js(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",E),s=()=>B(Be,"$t",E),u=()=>B(Ve,"$character",E),[E,x]=Ye();let _=_e(()=>i().isOpen&&i().type==="cast_spell");function v(){Te.update(z=>({...z,type:null,isOpen:!1,data:null}))}function n(z){z.castings<=0||Te.update(D=>({...D,type:"confirm_spell",data:z}))}{let z=_e(()=>s()("character.modals.grimoire"));bt(R,{get isOpen(){return e(_)},get title(){return e(z)},onClose:v,children:(D,p)=>{var S=Ks();je(S,5,()=>u().spells,Ue,(F,A)=>{var q=Bs();q.__click=()=>n(e(A));var T=a(q),I=a(T),Y=a(I),N=a(Y,!0);t(Y);var k=r(Y,2),f=a(k,!0);t(k),t(I);var c=r(I,2),d=a(c,!0);t(c),t(T);var m=r(T,2),$=a(m),O=a($,!0);t($);var H=r($,2);je(H,21,()=>Array(e(A).maxCastings),Ue,(C,L,P)=>{var g=Ys();h(()=>Se(g,1,`w-3 h-1 rounded-full ${P<e(A).castings?"bg-indigo-500":"bg-slate-700"}`)),l(C,g)}),t(H),t(m),t(q),h(C=>{Se(q,1,`w-full text-left p-4 rounded-xl border border-slate-800 bg-slate-900/50 hover:bg-slate-800 hover:border-indigo-500/50 transition-all flex justify-between items-center group ${e(A).castings<=0?"opacity-40 grayscale pointer-events-none":""}`),o(N,e(A).tier),o(f,e(A).name),o(d,e(A).tradition),o(O,C)},[()=>s()("character.modals.casts")]),l(F,q)},F=>{var A=Xs(),q=a(A);Wt(q,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"});var T=r(q,2),I=a(T,!0);t(T),t(A),h(Y=>o(I,Y),[()=>s()("character.modals.grimoire_empty")]),l(F,A)}),t(S),l(D,S)},$$slots:{default:!0}})}Le(),x()}Ge(["click"]);var Qs=b('<span class="text-[10px] text-slate-500 uppercase font-black tracking-widest"> </span>'),Zs=b("<!> Sorte Encerra",1),eo=b("<!> ",1),to=b('<span class="block text-[10px] text-slate-500 uppercase font-bold text-center mb-1">Duração</span> <div class="flex items-center justify-end gap-1 text-indigo-400 text-xs font-bold"><!></div>',1),ao=b("<span></span>"),ro=b('<span class="block text-[10px] text-slate-500 uppercase font-bold text-center"> </span> <p class="flex items-center justify-center gap-1"></p> <span> </span>',1),so=b('<button><div class="flex-1"><h4 class="font-black text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight mb-1"> </h4> <p class="text-xs text-slate-500 line-clamp-1"> </p></div> <div class="text-right shrink-0 min-w-[60px] ml-4 pt-1"><!></div></button>'),oo=b('<div><h4 class="text-xs font-black text-slate-500 uppercase tracking-widest border-b border-slate-700/50 pb-1 mb-2"> </h4> <div class="grid grid-cols-1 gap-3"></div></div>'),lo=b('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm"> </p></div>'),io=b('<div class="space-y-4 p-1"><!></div>');function no(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",E),s=()=>B(Ve,"$character",E),u=()=>B(Be,"$t",E),[E,x]=Ye();let _=_e(()=>i().isOpen&&i().type==="select_talent");function v(){Te.update(p=>({...p,type:null,isOpen:!1,data:null}))}function n(p){!p.isPassive&&p.activityType==="Uses"&&p.uses<=0||Te.update(S=>({...S,type:"confirm_talent",data:p}))}let z=_e(()=>({[Je.ANCESTRY]:s().talents.filter(p=>!p.source||p.source===Je.ANCESTRY),[Je.NOVICE]:s().talents.filter(p=>p.source===Je.NOVICE),[Je.EXPERT]:s().talents.filter(p=>p.source===Je.EXPERT),[Je.MASTER]:s().talents.filter(p=>p.source===Je.MASTER)})),D=_e(()=>s().talents.length>0);{let p=_e(()=>u()("character.modals.your_talents"));bt(R,{get isOpen(){return e(_)},get title(){return e(p)},onClose:v,children:(S,F)=>{var A=io(),q=a(A);{var T=Y=>{var N=Ee(),k=fe(N);je(k,17,()=>Object.values(Je),Ue,(f,c)=>{var d=Ee(),m=fe(d);{var $=O=>{var H=oo(),C=a(H),L=a(C,!0);t(C);var P=r(C,2);je(P,21,()=>e(z)[e(c)],Ue,(g,w)=>{var M=so();M.__click=()=>n(e(w));var ee=a(M),ne=a(ee),ue=a(ne,!0);t(ne);var X=r(ne,2),se=a(X,!0);t(X),t(ee);var ve=r(ee,2),le=a(ve);{var Q=W=>{var U=Qs(),oe=a(U,!0);t(U),h(pe=>o(oe,pe),[()=>u()("character.modals.passive")]),l(W,U)},ge=W=>{var U=Ee(),oe=fe(U);{var pe=G=>{var te=to(),K=r(fe(te),2),we=a(K);{var ke=ae=>{var J=Zs(),V=fe(J);Ft(V,{size:12}),ht(),l(ae,J)},he=ae=>{var J=eo(),V=fe(J);Ma(V,{size:12});var re=r(V);h(()=>o(re,` ${e(w).durationValue??""} ${e(w).duration==="MINUTES"?"min":"h"}`)),l(ae,J)};j(we,ae=>{e(w).duration==="LUCK_ENDS"?ae(ke):ae(he,!1)})}t(K),l(G,te)},Z=G=>{var te=ro(),K=fe(te),we=a(K,!0);t(K);var ke=r(K,2);je(ke,21,()=>Array(e(w).maxUses),Ue,(J,V,re)=>{var ce=ao();h(()=>Se(ce,1,`w-1.5 h-1.5 rounded-full ${re<e(w).uses?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.5)]":"bg-slate-700"}`)),l(J,ce)}),t(ke);var he=r(ke,2),ae=a(he);t(he),h(J=>{o(we,J),Se(he,1,`font-mono font-bold text-xs ${e(w).uses>0?"text-green-400":"text-red-400"}`),o(ae,`${e(w).uses??""}/${e(w).maxUses??""}`)},[()=>u()("character.modals.charges")]),l(G,te)};j(oe,G=>{e(w).activityType==="Duration"?G(pe):G(Z,!1)},!0)}l(W,U)};j(le,W=>{e(w).activityType==="Passive"||e(w).isPassive?W(Q):W(ge,!1)})}t(ve),t(M),h(()=>{Se(M,1,`w-full text-left p-4 rounded-xl border border-slate-800 bg-slate-900/50 hover:bg-slate-800 hover:border-indigo-500/50 transition-all flex justify-between items-center group ${!e(w).isPassive&&e(w).uses<=0?"opacity-40 grayscale pointer-events-none":""}`),o(ue,e(w).name),o(se,e(w).description)}),l(g,M)}),t(P),t(H),h(g=>o(L,g),[()=>u()(`character.talents.sources.${e(c)}`)]),l(O,H)};j(m,O=>{e(z)[e(c)]&&e(z)[e(c)].length>0&&O($)})}l(f,d)}),l(Y,N)},I=Y=>{var N=lo(),k=a(N);$t(k,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"});var f=r(k,2),c=a(f,!0);t(f),t(N),h(d=>o(c,d),[()=>u()("character.modals.no_talent_available")]),l(Y,N)};j(q,Y=>{e(D)?Y(T):Y(I,!1)})}t(A),l(S,A)},$$slots:{default:!0}})}Le(),x()}Ge(["click"]);var co=b('<span class="text-[10px] bg-slate-800 text-slate-300 border border-slate-700 px-2 py-1 rounded-lg font-bold uppercase"> </span>'),vo=b('<div class="space-y-6 pt-2"><div class="relative overflow-hidden bg-slate-900 border border-slate-800 rounded-2xl p-6 group transition-all hover:border-indigo-500/30"><div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity"><!></div> <h3 class="text-2xl font-black text-white uppercase tracking-tight mb-3 relative z-10"> </h3> <div class="flex flex-wrap gap-2 mb-4 relative z-10"><span class="text-[10px] bg-indigo-500/10 text-indigo-300 border border-indigo-500/20 px-2 py-1 rounded-lg font-bold uppercase tracking-widest shadow-sm"> </span> <span class="text-[10px] bg-slate-800 text-slate-400 border border-slate-700 px-2 py-1 rounded-lg font-bold uppercase"> </span> <!></div> <p class="text-sm text-slate-400 italic leading-relaxed relative z-10"> </p></div> <div class="grid grid-cols-2 gap-4"><button class="relative overflow-hidden bg-gradient-to-br from-indigo-600 to-indigo-800 hover:from-indigo-500 hover:to-indigo-700 text-white p-1 rounded-2xl shadow-xl shadow-indigo-900/20 transition-all active:scale-[0.98] group"><div class="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"></div> <div class="bg-slate-900/10 backdrop-blur-[2px] h-full rounded-[14px] p-5 flex flex-col items-center justify-center gap-3 border border-white/10"><!> <div class="text-center"><span class="block text-[10px] font-black uppercase tracking-widest text-indigo-200 mb-1"> </span> <span class="text-xl font-bold font-mono text-white">1d20</span></div></div></button> <button class="relative overflow-hidden bg-gradient-to-br from-red-600 to-red-800 hover:from-red-500 hover:to-red-700 text-white p-1 rounded-2xl shadow-xl shadow-red-900/20 transition-all active:scale-[0.98] group"><div class="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"></div> <div class="bg-slate-900/10 backdrop-blur-[2px] h-full rounded-[14px] p-5 flex flex-col items-center justify-center gap-3 border border-white/10"><!> <div class="text-center"><span class="block text-[10px] font-black uppercase tracking-widest text-red-200 mb-1"> </span> <span class="text-xl font-bold font-mono text-white"> </span></div></div></button></div></div>'),po=b('<div class="w-2 h-2 bg-white rounded-sm"></div>'),uo=b('<span class="text-[9px] text-slate-400 bg-slate-800 px-1 rounded"> </span>'),bo=b('<div class="flex flex-wrap gap-1 mt-1"></div>'),xo=b('<button><div class="flex items-center gap-3"><div><!></div> <div><span class="text-sm font-bold text-slate-200 block leading-tight"> </span> <!></div></div></button>'),_o=b('<div class="space-y-2"><h4 class="text-xs font-bold text-slate-500 uppercase px-1"> </h4> <div class="grid grid-cols-1 gap-2 max-h-[150px] overflow-y-auto pr-1"></div></div>'),fo=b('<div class="space-y-6 pt-2"><button class="flex items-center gap-2 text-xs font-bold text-slate-400 hover:text-white uppercase tracking-wider transition-colors -mt-2 mb-4 group"><!> </button> <div class="bg-slate-900/50 p-6 rounded-2xl border border-white/5 text-center shadow-inner relative overflow-hidden group"><div class="absolute inset-0 bg-indigo-500/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"></div> <div class="flex justify-center items-center gap-8 mb-4 relative z-10"><button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-red-500/20 text-slate-300 hover:text-red-400 border border-slate-700 hover:border-red-500/30 flex items-center justify-center transition-all active:scale-90 shadow-lg"><!></button> <div class="flex flex-col items-center min-w-[100px]"><span> </span></div> <button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-green-500/20 text-slate-300 hover:text-green-400 border border-slate-700 hover:border-green-500/30 flex items-center justify-center transition-all active:scale-90 shadow-lg"><!></button></div> <div class="text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] relative z-10"> </div></div> <!> <div class="p-4 bg-slate-900 border border-slate-800 rounded-xl flex items-center justify-between"><span class="text-xs font-bold uppercase text-slate-500 tracking-wider"> </span> <span class="font-bold text-white"> </span></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-4 rounded-xl flex items-center justify-center gap-3 shadow-lg shadow-indigo-600/20 transition-all active:scale-[0.98] uppercase tracking-widest text-sm"><!> </button></div>');function go(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",E),s=()=>B(wa,"$activeEffects",E),u=()=>B(Be,"$t",E),[E,x]=Ye();let _=_e(()=>i().isOpen&&i().type==="weapon_menu"),v=_e(()=>i().data),n=Ke("selection"),z=Ke("attack"),D=Ke(0),p=Ke(Ot([]));gt(()=>{e(_)&&(ze(n,"selection"),ze(D,0),ze(p,s().map(T=>T.id),!0))});function S(){Te.update(T=>({...T,type:null,isOpen:!1,data:null}))}function F(T){ze(z,T,!0),ze(n,"roll"),ze(D,0)}function A(T){e(p).includes(T)?ze(p,e(p).filter(I=>I!==T),!0):ze(p,[...e(p),T],!0)}function q(){if(!e(v))return;const T={type:e(z)==="attack"?"weapon_attack":"weapon_damage",source:e(v)},I=s().filter(Y=>e(p).includes(Y.id));Fe.finalizeRoll(T,e(D),I),S()}{let T=_e(()=>e(n)==="roll"?u()("character.dice_roll.confirm_roll"):u()("character.modals.attack_options"));bt(R,{get isOpen(){return e(_)},get title(){return e(T)},onClose:S,children:(I,Y)=>{var N=Ee(),k=fe(N);{var f=c=>{var d=Ee(),m=fe(d);{var $=H=>{var C=vo(),L=a(C),P=a(L),g=a(P);Ut(g,{size:80}),t(P);var w=r(P,2),M=a(w,!0);t(w);var ee=r(w,2),ne=a(ee),ue=a(ne,!0);t(ne);var X=r(ne,2),se=a(X,!0);t(X);var ve=r(X,2);{var le=ce=>{var de=Ee(),ie=fe(de);je(ie,17,()=>e(v).traits.split(",").map(be=>be.trim()).filter(be=>be),Ue,(be,ye)=>{var $e=co(),Me=a($e,!0);t($e),h(He=>o(Me,He),[()=>u()(`character.traits.${e(ye)}`)]),l(be,$e)}),l(ce,de)};j(ve,ce=>{e(v).traits&&ce(le)})}t(ee);var Q=r(ee,2),ge=a(Q,!0);t(Q),t(L);var W=r(L,2),U=a(W);U.__click=()=>F("attack");var oe=r(a(U),2),pe=a(oe);na(pe,{size:32,class:"text-indigo-200 group-hover:scale-110 transition-transform duration-300"});var Z=r(pe,2),G=a(Z),te=a(G,!0);t(G),ht(2),t(Z),t(oe),t(U);var K=r(U,2);K.__click=()=>F("damage");var we=r(a(K),2),ke=a(we);Wt(ke,{size:32,class:"text-red-200 group-hover:scale-110 transition-transform duration-300"});var he=r(ke,2),ae=a(he),J=a(ae,!0);t(ae);var V=r(ae,2),re=a(V,!0);t(V),t(he),t(we),t(K),t(W),t(C),h((ce,de,ie)=>{o(M,e(v).name),o(ue,e(v).grip),o(se,e(v).range||"Melee"),o(ge,ce),o(te,de),o(J,ie),o(re,e(v).damageDice||"1d6")},[()=>e(v).description||u()("character.modals.no_traits"),()=>u()("character.modals.attack"),()=>u()("character.modals.damage")]),l(H,C)},O=H=>{var C=fo(),L=a(C);L.__click=()=>ze(n,"selection");var P=a(L);Oa(P,{size:16,class:"group-hover:-translate-x-1 transition-transform"});var g=r(P);t(L);var w=r(L,2),M=r(a(w),2),ee=a(M);ee.__click=()=>ba(D,-1);var ne=a(ee);Vt(ne,{size:24}),t(ee);var ue=r(ee,2),X=a(ue),se=a(X);t(X),t(ue);var ve=r(ue,2);ve.__click=()=>ba(D);var le=a(ve);nt(le,{size:24}),t(ve),t(M);var Q=r(M,2),ge=a(Q,!0);t(Q),t(w);var W=r(w,2);{var U=he=>{var ae=_o(),J=a(ae),V=a(J,!0);t(J);var re=r(J,2);je(re,5,s,ce=>ce.id,(ce,de)=>{var ie=xo();ie.__click=()=>A(e(de).id);var be=a(ie),ye=a(be),$e=a(ye);{var Me=De=>{var Ie=po();l(De,Ie)};j($e,De=>{e(p).includes(e(de).id)&&De(Me)})}t(ye);var He=r(ye,2),We=a(He),Pe=a(We,!0);t(We);var Ae=r(We,2);{var Ce=De=>{var Ie=bo();je(Ie,21,()=>e(de).modifiers,Ue,(st,dt)=>{var ot=uo(),yt=a(ot);t(ot),h(()=>o(yt,`${e(dt).target??""}: ${e(dt).value??""}`)),l(st,ot)}),t(Ie),l(De,Ie)};j(Ae,De=>{e(de).modifiers&&e(de).modifiers.length>0&&De(Ce)})}t(He),t(be),t(ie),h((De,Ie)=>{Se(ie,1,`flex items-center justify-between p-3 rounded-lg border transition-all text-left ${De??""}`),Se(ye,1,`w-4 h-4 rounded border flex items-center justify-center transition-colors ${Ie??""}`),o(Pe,e(de).name)},[()=>e(p).includes(e(de).id)?"bg-indigo-900/30 border-indigo-500/50 shadow-sm":"bg-slate-900/50 border-slate-800 opacity-60 hover:opacity-100 hover:border-slate-700",()=>e(p).includes(e(de).id)?"bg-indigo-500 border-indigo-400":"border-slate-600 bg-slate-900"]),l(ce,ie)}),t(re),t(ae),h(ce=>o(V,ce),[()=>u()("character.effects.active")]),l(he,ae)};j(W,he=>{s().length>0&&he(U)})}var oe=r(W,2),pe=a(oe),Z=a(pe,!0);t(pe);var G=r(pe,2),te=a(G,!0);t(G),t(oe);var K=r(oe,2);K.__click=q;var we=a(K);na(we,{size:18});var ke=r(we);t(K),t(C),h((he,ae,J,V)=>{o(g,` ${he??""}`),Se(X,1,`text-5xl font-black ${e(D)>0?"text-green-400":e(D)<0?"text-red-400":"text-slate-500"} tabular-nums drop-shadow-sm transition-colors duration-300`),o(se,`${e(D)>0?"+":""}${e(D)??""}`),o(ge,ae),o(Z,J),o(te,e(z)==="attack"?"Ataque (1d20)":`Dano (${e(v).damageDice})`),o(ke,` ${V??""}`)},[()=>u()("common.buttons.back"),()=>e(z)==="damage"?u()("character.dice_roll.extra_dice"):u()("character.dice_roll.boons_banes"),()=>u()("character.modals.rolling"),()=>u()("character.dice_roll.roll")]),l(H,C)};j(m,H=>{e(n)==="selection"?H($):H(O,!1)})}l(c,d)};j(k,c=>{e(v)&&c(f)})}l(I,N)},$$slots:{default:!0}})}Le(),x()}Ge(["click"]);var ho=b("<button> <!></button>"),mo=b('<div class="text-xs"><span class="text-red-400 font-bold"> </span> <span class="text-slate-400"> </span></div>'),$o=b('<p class="text-xs text-slate-600 italic text-center"> </p>'),yo=b('<div class="space-y-6 p-1"><div class="grid grid-cols-2 gap-2"></div> <div class="p-4 bg-slate-900/50 rounded-lg border border-slate-700"><p class="text-[10px] text-slate-500 uppercase font-bold mb-2"> </p> <div class="space-y-2"><!> <!></div></div></div>');function wo(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",E),s=()=>B(Be,"$t",E),u=()=>B(Ve,"$character",E),[E,x]=Ye();let _=_e(()=>i().isOpen&&i().type==="affliction");function v(){Te.update(n=>({...n,type:null,isOpen:!1,data:null}))}{let n=_e(()=>s()("character.modals.manage_afflictions"));bt(R,{get isOpen(){return e(_)},get title(){return e(n)},onClose:v,children:(z,D)=>{var p=yo(),S=a(p);je(S,21,()=>Object.keys(Ba),Ue,(k,f)=>{var c=ho();c.__click=()=>Fe.toggleAffliction(e(f));var d=a(c),m=r(d);{var $=O=>{Sa(O,{size:14})};j(m,O=>{u().afflictions.includes(e(f))&&O($)})}t(c),h((O,H)=>{Se(c,1,`p-3 rounded-lg border text-sm font-bold transition-all text-left flex justify-between items-center ${O??""}`),o(d,`${H??""} `)},[()=>u().afflictions.includes(e(f))?"bg-red-900/40 border-red-500 text-red-200 shadow-lg shadow-red-900/20":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-500 hover:bg-slate-850",()=>s()(`character.afflictions.${e(f)}`)]),l(k,c)}),t(S);var F=r(S,2),A=a(F),q=a(A,!0);t(A);var T=r(A,2),I=a(T);je(I,1,()=>u().afflictions,Ue,(k,f)=>{var c=mo(),d=a(c),m=a(d);t(d);var $=r(d,2),O=a($,!0);t($),t(c),h((H,C)=>{o(m,`${H??""}:`),o(O,C)},[()=>s()(`character.afflictions.${e(f)}`),()=>s()(`sofww.afflictions.${e(f).toLowerCase().replace(" ","_")}.effect`)]),l(k,c)});var Y=r(I,2);{var N=k=>{var f=$o(),c=a(f,!0);t(f),h(d=>o(c,d),[()=>s()("character.modals.no_affliction_selected")]),l(k,f)};j(Y,k=>{u().afflictions.length===0&&k(N)})}t(T),t(F),t(p),h(k=>o(q,k),[()=>s()("character.modals.effects_summary")]),l(z,p)},$$slots:{default:!0}})}Le(),x()}Ge(["click"]);var ko=b('<div class="text-center space-y-6 py-4 p-1"><div class="flex justify-center"><div class="p-4 bg-indigo-500/10 rounded-full"><!></div></div> <div><p class="text-lg text-white font-bold"> </p> <p class="text-sm text-slate-500 mt-1">This will recover health and refresh all spell castings and talent uses.</p></div> <div class="flex gap-4 justify-center pt-2"><button class="flex-1 px-6 py-3 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-300 font-bold transition-colors"> </button> <button class="flex-[1.5] px-6 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white font-bold shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98]"> </button></div></div>');function zo(R,y){qe(y,!0);const i=()=>B(Te,"$modalState",u),s=()=>B(Be,"$t",u),[u,E]=Ye();let x=_e(()=>i().isOpen&&i().type==="rest_confirm");function _(){Te.update(n=>({...n,type:null,isOpen:!1,data:null}))}function v(){Fe.confirmRest(),_()}{let n=_e(()=>s()("character.modals.rest"));bt(R,{get isOpen(){return e(x)},get title(){return e(n)},onClose:_,children:(z,D)=>{var p=ko(),S=a(p),F=a(S),A=a(F);Rt(A,{size:48,class:"text-indigo-400"}),t(F),t(S);var q=r(S,2),T=a(q),I=a(T,!0);t(T),ht(2),t(q);var Y=r(q,2),N=a(Y);N.__click=_;var k=a(N,!0);t(N);var f=r(N,2);f.__click=v;var c=a(f,!0);t(f),t(Y),t(p),h((d,m,$)=>{o(I,d),o(k,m),o(c,$)},[()=>s()("character.modals.perform_rest"),()=>s()("common.buttons.cancel"),()=>s()("character.modals.rest")]),l(z,p)},$$slots:{default:!0}})}Le(),E()}Ge(["click"]);var So=b("<div> </div>"),To=b('<div class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 text-center transition-all hover:bg-slate-800 active:scale-[0.98] group relative shadow-lg shadow-black/20 cursor-pointer" role="button" tabindex="0"><div class="py-2.5 px-2"><div class="text-[9px] uppercase text-slate-500 font-black tracking-widest group-hover:text-indigo-400 transition-colors mb-1"> </div> <div class="flex items-center justify-center gap-1.5 mb-1.5"><div class="text-2xl font-black text-white leading-none"> </div> <!></div> <div class="inline-flex px-2 py-0.5 bg-indigo-500/10 rounded-lg"><div class="text-xs text-indigo-400 font-black tracking-tight"> </div></div></div> <button class="absolute top-1.5 right-1.5 p-1 text-slate-700 hover:text-white hover:bg-white/5 rounded-md transition-all"><!></button></div>'),Oo=b('<div class="grid grid-cols-2 gap-3"></div>');function Aa(R,y){qe(y,!1);const i=()=>B(Ve,"$character",E),s=()=>B(Be,"$t",E),u=()=>B(Xa,"$derivedStats",E),[E,x]=Ye();function _(D,p){Te.update(S=>({...S,type:D,isOpen:!0,data:p}))}function v(D){_("pre_roll",{type:"attribute",source:D})}function n(D,p){D.stopPropagation(),_("attribute",p)}Mt();var z=Oo();je(z,5,()=>i().attributes,Ue,(D,p)=>{var S=To();S.__click=()=>v(e(p));var F=a(S),A=a(F),q=a(A,!0);t(A);var T=r(A,2),I=a(T),Y=a(I,!0);t(I);var N=r(I,2);{var k=O=>{var H=So(),C=a(H);t(H),h(()=>{Se(H,1,`text-[11px] font-bold ${u()[e(p).key]>e(p).value?"text-green-500 bg-green-500/10":"text-red-500 bg-red-500/10"} px-1 rounded-md`),o(C,`${u()[e(p).key]>e(p).value?"+":""}${u()[e(p).key]-e(p).value}`)}),l(O,H)};j(N,O=>{u()[e(p).key]!==e(p).value&&O(k)})}t(T);var f=r(T,2),c=a(f),d=a(c);t(c),t(f),t(F);var m=r(F,2);m.__click=O=>n(O,e(p));var $=a(m);Bt($,{size:12}),t(m),t(S),h((O,H,C)=>{me(S,"aria-label",O),o(q,H),o(Y,u()[e(p).key]),o(d,`+${u()[e(p).key]-10}`),me(m,"aria-label",C)},[()=>`${s()(`sofww.attributes.${e(p).key}`)} roll`,()=>s()(`sofww.attributes.${e(p).key}`),()=>`${s()("common.buttons.edit")} ${s()(`sofww.attributes.${e(p).key}`)}`]),l(D,S)}),t(z),l(R,z),Le(),x()}Ge(["click"]);var Mo=b('<div class="p-1 bg-red-500/10 rounded"><!></div>'),Eo=b('<div class="space-y-3"><div class="grid grid-cols-2 gap-3"><button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> </div> <div class="flex items-baseline gap-1"><span class="text-3xl font-black text-white leading-none"> </span></div></button> <button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> </div> <div class="flex items-baseline justify-between w-full"><span> </span> <!></div></button></div> <div class="bg-slate-900 rounded-2xl border border-slate-800 p-4 shadow-lg shadow-black/20"><span class="text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] flex items-center gap-2 mb-3"><!> </span> <!></div></div>');function Ca(R,y){qe(y,!1);const i=()=>B(Be,"$t",x),s=()=>B(ia,"$totalDefense",x),u=()=>B(Ka,"$effectiveSpeed",x),E=()=>B(Ve,"$character",x),[x,_]=Ye();function v(w,M){Te.update(ee=>({...ee,type:w,isOpen:!0,data:M}))}function n(w){Ve.update(M=>({...M,bonusDamage:w}))}Mt();var z=Eo(),D=a(z),p=a(D);p.__click=()=>v("stat","defense");var S=a(p),F=a(S);_r(F,{size:12});var A=r(F);t(S);var q=r(S,2),T=a(q),I=a(T,!0);t(T),t(q),t(p);var Y=r(p,2);Y.__click=()=>v("stat","speed");var N=a(Y),k=a(N);$t(k,{size:12});var f=r(k);t(N);var c=r(N,2),d=a(c),m=a(d,!0);t(d);var $=r(d,2);{var O=w=>{var M=Mo(),ee=a(M);Qt(ee,{size:10,class:"text-red-500"}),t(M),l(w,M)};j($,w=>{u()<E().speed&&w(O)})}t(c),t(Y),t(D);var H=r(D,2),C=a(H),L=a(C);Ut(L,{size:14,class:"text-indigo-500"});var P=r(L);t(C);var g=r(C,2);{let w=Ia(()=>E().bonusDamage||0);Ea(g,{get value(){return e(w)},onUpdate:n})}t(H),t(z),h((w,M,ee)=>{o(A,` ${w??""}`),o(I,s()),o(f,` ${M??""}`),Se(d,1,`text-3xl font-black ${u()<E().speed?"text-red-400":"text-white"} leading-none`),o(m,u()),o(P,` ${ee??""}`)},[()=>i()("character.vitals.defense"),()=>i()("character.vitals.speed"),()=>i()("character.vitals.bonus_damage")]),l(R,z),Le(),_()}Ge(["click"]);var Ao=b('<div class="bg-slate-900 p-3 rounded-2xl border border-slate-800 shadow-xl shadow-black/20"><div class="flex justify-between items-center mb-3"><h4 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-1.5"><!> </h4></div> <div class="grid grid-cols-3 gap-2"><div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-yellow-500 font-black uppercase tracking-tight relative z-10">GP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir GP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar GP"><!></button></div></div> <div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-slate-300 font-black uppercase tracking-tight relative z-10">SP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir SP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar SP"><!></button></div></div> <div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-orange-700/80 font-black uppercase tracking-tight relative z-10">CP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir CP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar CP"><!></button></div></div></div></div>');function Pa(R,y){qe(y,!1);const i=()=>B(Be,"$t",u),s=()=>B(Ve,"$character",u),[u,E]=Ye(),{updateCurrency:x}=Fe;Mt();var _=Ao(),v=a(_),n=a(v),z=a(n);hr(z,{size:14,class:"text-yellow-500"});var D=r(z);t(n),t(v);var p=r(v,2),S=a(p),F=r(a(S),2),A=a(F);A.__click=()=>x("gp",-1);var q=a(A);Vt(q,{size:14}),t(A);var T=r(A,2),I=a(T,!0);t(T);var Y=r(T,2);Y.__click=()=>x("gp",1);var N=a(Y);nt(N,{size:14}),t(Y),t(F),t(S);var k=r(S,2),f=r(a(k),2),c=a(f);c.__click=()=>x("sp",-1);var d=a(c);Vt(d,{size:14}),t(c);var m=r(c,2),$=a(m,!0);t(m);var O=r(m,2);O.__click=()=>x("sp",1);var H=a(O);nt(H,{size:14}),t(O),t(f),t(k);var C=r(k,2),L=r(a(C),2),P=a(L);P.__click=()=>x("cp",-1);var g=a(P);Vt(g,{size:14}),t(P);var w=r(P,2),M=a(w,!0);t(w);var ee=r(w,2);ee.__click=()=>x("cp",1);var ne=a(ee);nt(ne,{size:14}),t(ee),t(L),t(C),t(p),t(_),h(ue=>{o(D,` ${ue??""}`),o(I,s().currency.gp),o($,s().currency.sp),o(M,s().currency.cp)},[()=>i()("character.currency.title")]),l(R,_),Le(),E()}Ge(["click"]);var Co=b('<div class="bg-slate-950 border border-slate-700 text-slate-200 px-3 py-1.5 rounded-xl text-sm font-bold flex items-center gap-2 group transition-all hover:border-indigo-500/50"> <button class="text-slate-500 hover:text-red-400 p-1 rounded-full hover:bg-red-400/10 transition-all"><!></button></div>'),Po=b('<span class="text-sm text-slate-500 italic py-2 px-1"> </span>'),Do=b('<div class="bg-slate-900 p-4 rounded-2xl border border-slate-800 shadow-xl shadow-black/20"><div class="flex justify-between items-center mb-4"><h4 class="text-xs font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-2"><!> </h4></div> <div class="flex flex-wrap gap-2 mb-4"><!> <!></div> <div class="relative group"><input type="text" class="w-full bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500 transition-all placeholder:text-slate-600 focus:ring-1 focus:ring-indigo-500/20"/> <div class="absolute right-3 top-1/2 -translate-y-1/2 p-1.5 bg-slate-800 rounded-lg text-slate-500 group-focus-within:text-indigo-400 group-focus-within:bg-indigo-400/10 transition-all"><!></div></div></div>');function Da(R,y){qe(y,!1);const i=()=>B(Be,"$t",u),s=()=>B(Ve,"$character",u),[u,E]=Ye(),{addLanguage:x,removeLanguage:_}=Fe;function v(f){if(f.key==="Enter"){const c=f.target,d=c.value.trim();d!==""&&(x(d),c.value="")}}Mt();var n=Do(),z=a(n),D=a(z),p=a(D);kr(p,{size:16,class:"text-indigo-500"});var S=r(p);t(D),t(z);var F=r(z,2),A=a(F);je(A,1,()=>s().languages,Ue,(f,c,d)=>{var m=Co(),$=a(m),O=r($);O.__click=()=>_(d);var H=a(O);Gt(H,{size:14}),t(O),t(m),h(()=>{o($,`${e(c)??""} `),me(O,"aria-label",`Remover idioma ${e(c)??""}`)}),l(f,m)});var q=r(A,2);{var T=f=>{var c=Po(),d=a(c,!0);t(c),h(m=>o(d,m),[()=>i()("character.languages.none")]),l(f,c)};j(q,f=>{s().languages.length===0&&f(T)})}t(F);var I=r(F,2),Y=a(I);Y.__keydown=v;var N=r(Y,2),k=a(N);nt(k,{size:16}),t(N),t(I),t(n),h((f,c,d)=>{o(S,` ${f??""}`),me(Y,"placeholder",c),me(Y,"aria-label",d)},[()=>i()("character.languages.title"),()=>i()("character.languages.add_placeholder"),()=>i()("character.languages.add_label")]),l(R,n),Le(),E()}Ge(["click","keydown"]);var No=b('<span class="text-xs text-slate-500 italic"> </span>'),jo=b('<div class="group relative"><div class="text-xs bg-red-900/30 border border-red-700 text-red-200 px-2 py-1 rounded flex items-center gap-1 cursor-help"> <button class="ml-1 text-red-400 hover:text-white"><!></button></div></div>'),Ho=b('<div class="bg-slate-900 p-3 rounded-xl border border-slate-800"><div class="flex justify-between items-center mb-2"><h4 class="text-[10px] font-bold text-slate-400 uppercase flex items-center gap-1"><!> </h4> <button class="text-slate-500 hover:text-white"><!></button></div> <div class="flex flex-wrap gap-2"><!> <!></div></div>');function Na(R,y){qe(y,!1);const i=()=>B(Be,"$t",u),s=()=>B(Ve,"$character",u),[u,E]=Ye(),{toggleAffliction:x}=Fe;function _(){Te.update(N=>({...N,type:"affliction",isOpen:!0}))}function v(N,k){N.stopPropagation(),x(k)}Mt();var n=Ho(),z=a(n),D=a(z),p=a(D);Qt(p,{size:12});var S=r(p);t(D);var F=r(D,2);F.__click=_;var A=a(F);nt(A,{size:14}),t(F),t(z);var q=r(z,2),T=a(q);{var I=N=>{var k=No(),f=a(k,!0);t(k),h(c=>o(f,c),[()=>i()("character.afflictions.none")]),l(N,k)};j(T,N=>{s().afflictions.length===0&&N(I)})}var Y=r(T,2);je(Y,1,()=>s().afflictions,Ue,(N,k)=>{var f=jo(),c=a(f),d=a(c),m=r(d);m.__click=O=>v(O,e(k));var $=a(m);Gt($,{size:10}),t(m),t(c),t(f),h((O,H,C,L)=>{me(c,"title",O),o(d,`${H??""} `),me(m,"aria-label",`${C??""} ${L??""}`)},[()=>i()("character.afflictions.active"),()=>i()(`character.afflictions.${e(k)}`),()=>i()("common.buttons.remove"),()=>i()(`character.afflictions.${e(k)}`)]),l(N,f)}),t(q),t(n),h((N,k)=>{o(S,` ${N??""}`),me(F,"aria-label",k)},[()=>i()("character.afflictions.title"),()=>i()("character.afflictions.add")]),l(R,n),Le(),E()}Ge(["click"]);var Io=b('<button><!> <span class="text-[10px] font-bold uppercase tracking-wide"> </span></button>'),Uo=b('<div class="md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-[60]"></div> <div class="md:hidden fixed bottom-0 left-0 right-0 z-[70] bg-slate-900 border-t border-slate-700 rounded-t-3xl shadow-2xl safe-area-pb"><div class="flex justify-between items-center px-6 py-4 border-b border-slate-800"><h3 class="text-sm font-black text-white uppercase tracking-wider"> </h3> <button class="p-2 rounded-full bg-slate-800 text-slate-400 hover:text-white transition-colors"><!></button></div> <div class="grid grid-cols-3 gap-2 p-4"></div></div>',1),Ro=b('<button role="tab"><!> <span class="text-[9px] font-bold uppercase tracking-wide"> </span></button>'),qo=b('<div class="absolute inset-x-0 bottom-0 h-0.5 bg-indigo-400 shadow-[0_0_8px_rgba(129,140,248,0.5)]"></div>'),Lo=b('<button role="tab"><!> <span class="tracking-widest uppercase"> </span> <!></button>'),Vo=b('<!> <div class="md:hidden fixed bottom-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-lg border-t border-slate-800 safe-area-pb" role="tablist"><div class="flex justify-around items-center py-2"><!> <button role="tab"><!> <span class="text-[9px] font-bold uppercase tracking-wide"> </span></button></div></div> <div class="hidden md:flex bg-slate-900/80 backdrop-blur-md border-b border-slate-800 overflow-x-auto no-scrollbar sticky top-[60px] z-30" role="tablist"></div>',1);function Fo(R,y){qe(y,!0);const i=()=>B(Be,"$t",u),s=()=>B(kt,"$activeTab",u),[u,E]=Ye(),x=_e(()=>[{id:"acoes",label:i()("character.tabs.actions"),icon:Ut},{id:"magias",label:i()("character.tabs.spells"),icon:ma},{id:"talentos",label:i()("character.tabs.talents"),icon:$t},{id:"equipamento",label:i()("character.tabs.items"),icon:ca},{id:"notas",label:i()("character.tabs.notes"),icon:$a},{id:"efeitos",label:i()("character.tabs.effects"),icon:Qt}]),_=_e(()=>[{id:"stats",label:i()("character.tabs.stats"),icon:sr},{id:"acoes",label:i()("character.tabs.actions"),icon:Ut},{id:"notas",label:i()("character.tabs.notes"),icon:$a},{id:"equipamento",label:i()("character.tabs.items"),icon:ca}]),v=_e(()=>[{id:"magias",label:i()("character.tabs.spells"),icon:ma},{id:"talentos",label:i()("character.tabs.talents"),icon:$t},{id:"efeitos",label:i()("character.tabs.effects"),icon:Qt}]);let n=Ke(!1);function z(c){kt.set(c),ze(n,!1)}let D=_e(()=>e(v).some(c=>c.id===s()));var p=Vo(),S=fe(p);{var F=c=>{var d=Uo(),m=fe(d);m.__click=()=>ze(n,!1);var $=r(m,2),O=a($),H=a(O),C=a(H,!0);t(H);var L=r(H,2);L.__click=()=>ze(n,!1);var P=a(L);Gt(P,{size:18}),t(L),t(O);var g=r(O,2);je(g,21,()=>e(v),Ue,(w,M)=>{var ee=Io();ee.__click=()=>z(e(M).id);var ne=a(ee);ra(ne,()=>e(M).icon,(se,ve)=>{ve(se,{size:24})});var ue=r(ne,2),X=a(ue,!0);t(ue),t(ee),h(()=>{Se(ee,1,`flex flex-col items-center gap-2 p-4 rounded-2xl transition-all active:scale-95 ${s()===e(M).id?"bg-indigo-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`),o(X,e(M).label)}),l(w,ee)}),t(g),t($),h(w=>o(C,w),[()=>i()("character.tabs.more_options")]),da(3,m,()=>Ta,()=>({duration:150})),da(3,$,()=>fr,()=>({duration:200})),l(c,d)};j(S,c=>{e(n)&&c(F)})}var A=r(S,2),q=a(A),T=a(q);je(T,17,()=>e(_),Ue,(c,d)=>{var m=Ro();m.__click=()=>z(e(d).id);var $=a(m);{let C=_e(()=>s()===e(d).id?"text-indigo-400":"text-slate-500");ra($,()=>e(d).icon,(L,P)=>{P(L,{size:20,get class(){return e(C)}})})}var O=r($,2),H=a(O,!0);t(O),t(m),h(()=>{Se(m,1,`flex flex-col items-center gap-0.5 px-3 py-2 transition-all ${s()===e(d).id?"text-indigo-400":"text-slate-500"}`),me(m,"aria-selected",s()===e(d).id),o(H,e(d).label)}),l(c,m)});var I=r(T,2);I.__click=()=>ze(n,!e(n));var Y=a(I);{let c=_e(()=>e(D)||e(n)?"text-indigo-400":"text-slate-500");mr(Y,{size:20,get class(){return e(c)}})}var N=r(Y,2),k=a(N,!0);t(N),t(I),t(q),t(A);var f=r(A,2);je(f,21,()=>e(x),Ue,(c,d)=>{var m=Lo();m.__click=()=>kt.set(e(d).id);var $=a(m);{let P=_e(()=>s()===e(d).id?"text-indigo-400":"text-slate-500");ra($,()=>e(d).icon,(g,w)=>{w(g,{size:14,get class(){return`${e(P)??""} group-hover:scale-110 transition-transform`}})})}var O=r($,2),H=a(O,!0);t(O);var C=r(O,2);{var L=P=>{var g=qo();l(P,g)};j(C,P=>{s()===e(d).id&&P(L)})}t(m),h(()=>{Se(m,1,`px-5 lg:px-6 py-4 flex items-center gap-2 font-black text-xs transition-all whitespace-nowrap border-b-2 relative group ${s()===e(d).id?"text-indigo-400 border-indigo-500 bg-indigo-500/5":"text-slate-500 border-transparent hover:text-slate-300"}`),me(m,"aria-selected",s()===e(d).id),o(H,e(d).label)}),l(c,m)}),t(f),h(c=>{Se(I,1,`flex flex-col items-center gap-0.5 px-3 py-2 transition-all ${e(D)||e(n)?"text-indigo-400":"text-slate-500"}`),me(I,"aria-expanded",e(n)),o(k,c)},[()=>i()("character.tabs.more")]),l(R,p),Le(),E()}Ge(["click"]);var Go=b('<div class="absolute inset-0 bg-red-900/20 z-0 animate-pulse"></div>'),Wo=b('<span class="text-[10px] bg-indigo-900 text-indigo-200 px-1 rounded uppercase"> </span>'),Yo=b('<span class="text-[10px] bg-red-600 text-white px-2 py-0.5 rounded-full uppercase font-black animate-bounce"> </span>'),Bo=b('<span class="text-[9px] bg-slate-800 text-slate-300 px-1.5 py-0.5 rounded border border-slate-700 uppercase font-bold"> </span>'),Xo=b('<div class="flex flex-wrap gap-1 mt-1"><!> <span class="text-[9px] text-slate-600">•</span> <span class="text-[9px] text-slate-500 uppercase"> </span></div>'),Ko=b('<p class="text-xs text-slate-500 mt-1"> </p>'),Jo=b('<button class="text-xs bg-red-900/50 text-red-200 px-3 py-1 rounded border border-red-800 hover:bg-red-900 flex items-center gap-1"><!> </button>'),Qo=b('<div class="flex flex-col sm:flex-row justify-between p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-900 cursor-pointer transition-colors gap-4 active:scale-[0.99] relative overflow-hidden" role="button" tabindex="0"><!> <div class="flex items-start gap-3 relative z-10"><div class="bg-slate-800 p-2 rounded text-slate-400 mt-1"><!></div> <div class="flex-1"><h3 class="font-bold text-white flex items-center gap-2 flex-wrap"> <!> <!></h3> <!></div></div> <div class="flex flex-col items-end gap-2 relative z-10"><div class="flex items-center gap-4 bg-slate-900 p-2 rounded-lg border border-slate-800"><div class="text-center px-2"><span class="block text-[10px] font-bold text-slate-500 uppercase"> </span> <span class="text-xl font-mono text-white font-bold"> </span></div></div> <!></div></div>'),Zo=b('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-500 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-indigo-900/50 p-2 rounded text-indigo-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-indigo-300 transition-colors"> </p> <p class="text-xs text-slate-500"> </p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-indigo-400 uppercase tracking-wider border border-slate-800"> </div></div></div>'),el=b('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-yellow-600 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-yellow-900/30 p-2 rounded text-yellow-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-yellow-300 transition-colors"> </p> <p class="text-xs text-slate-500"> </p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-yellow-500 uppercase tracking-wider border border-slate-800"> </div></div></div>'),tl=b('<div class="flex flex-col items-center justify-center py-16 px-6 text-center bg-gradient-to-b from-slate-900/50 to-slate-950/50 rounded-[2.5rem] border border-dashed border-slate-800 shadow-2xl relative overflow-hidden group mt-4"><div class="absolute -top-24 -right-24 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full"></div> <div class="absolute -bottom-24 -left-24 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full"></div> <div class="relative"><div class="w-20 h-20 bg-slate-800 rounded-3xl flex items-center justify-center text-indigo-400 mb-6 mx-auto transform group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 shadow-xl border border-slate-700"><!></div> <h3 class="text-2xl font-black text-white mb-3 uppercase tracking-tight"> </h3> <p class="text-slate-400 mb-8 max-w-sm mx-auto leading-relaxed"> </p> <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 w-full max-w-md"><button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300"> </span></button> <button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300"> </span></button> <button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300"> </span></button></div></div></div>'),al=b('<div class="space-y-4"><!> <!> <!> <!></div>');function rl(R,y){qe(y,!0);const i=()=>B(Ve,"$character",u),s=()=>B(Be,"$t",u),[u,E]=Ye(),{useConsumable:x}=Fe;let _=_e(()=>i().equipment.filter(k=>k.type===ut.WEAPON&&k.equippedState||k.type===ut.EXPLOSIVE)),v=_e(()=>i().spells.length>0),n=_e(()=>i().talents.length>0),z=_e(()=>e(_).length===0&&!e(v)&&!e(n));function D(k,f=null){Te.update(c=>({...c,type:k,isOpen:!0,data:f}))}function p(k,f){k.stopPropagation(),x(f)}var S=al(),F=a(S);je(F,17,()=>e(_),Ue,(k,f)=>{var c=Qo();c.__click=()=>(e(f).traits||"").toLowerCase().includes("reload")&&e(f).isLoaded===!1?Fe.reloadWeapon(e(f)):D("weapon_menu",e(f));var d=a(c);{var m=Z=>{var G=Go();l(Z,G)};j(d,Z=>{(e(f).traits||"").toLowerCase().includes("reload")&&e(f).isLoaded===!1&&Z(m)})}var $=r(d,2),O=a($),H=a(O);Ut(H,{size:20}),t(O);var C=r(O,2),L=a(C),P=a(L),g=r(P);{var w=Z=>{var G=Wo(),te=a(G,!0);t(G),h(()=>o(te,e(f).equippedState)),l(Z,G)};j(g,Z=>{e(f).equippedState&&Z(w)})}var M=r(g,2);{var ee=Z=>{var G=Yo(),te=a(G,!0);t(G),h(K=>o(te,K),[()=>s()("character.actions.reload")]),l(Z,G)};j(M,Z=>{(e(f).traits||"").toLowerCase().includes("reload")&&e(f).isLoaded===!1&&Z(ee)})}t(L);var ne=r(L,2);{var ue=Z=>{var G=Xo(),te=a(G);je(te,17,()=>e(f).traits.split(",").map(ke=>ke.trim()).filter(ke=>ke),Ue,(ke,he)=>{var ae=Bo(),J=a(ae,!0);t(ae),h(V=>o(J,V),[()=>s()(`character.traits.${e(he)}`)]),l(ke,ae)});var K=r(te,4),we=a(K,!0);t(K),t(G),h(()=>o(we,e(f).range||"Melee")),l(Z,G)},X=Z=>{var G=Ko(),te=a(G,!0);t(G),h(()=>o(te,e(f).range||"Melee")),l(Z,G)};j(ne,Z=>{e(f).traits?Z(ue):Z(X,!1)})}t(C),t($);var se=r($,2),ve=a(se),le=a(ve),Q=a(le),ge=a(Q,!0);t(Q);var W=r(Q,2),U=a(W);t(W),t(le),t(ve);var oe=r(ve,2);{var pe=Z=>{var G=Jo();G.__click=we=>p(we,e(f));var te=a(G);gr(te,{size:12});var K=r(te);t(G),h(we=>o(K,` ${we??""} (${e(f).quantity??""})`),[()=>s()("character.actions.throw")]),l(Z,G)};j(oe,Z=>{e(f).type===ut.EXPLOSIVE&&Z(pe)})}t(se),t(c),h(Z=>{o(P,`${e(f).name??""} `),o(ge,Z),o(U,`${(e(f).damageDice||0)??""}d6`)},[()=>s()("character.actions.damage")]),l(k,c)});var A=r(F,2);{var q=k=>{var f=Zo();f.__click=()=>D("cast_spell");var c=a(f),d=a(c),m=a(d);Wt(m,{size:20}),t(d);var $=r(d,2),O=a($),H=a(O,!0);t(O);var C=r(O,2),L=a(C,!0);t(C),t($),t(c);var P=r(c,2),g=a(P),w=a(g,!0);t(g),t(P),t(f),h((M,ee,ne)=>{o(H,M),o(L,ee),o(w,ne)},[()=>s()("character.actions.cast_spell"),()=>s()("character.actions.cast_spell_desc"),()=>s()("character.actions.select")]),l(k,f)};j(A,k=>{e(v)&&k(q)})}var T=r(A,2);{var I=k=>{var f=el();f.__click=()=>D("select_talent");var c=a(f),d=a(c),m=a(d);$t(m,{size:20}),t(d);var $=r(d,2),O=a($),H=a(O,!0);t(O);var C=r(O,2),L=a(C,!0);t(C),t($),t(c);var P=r(c,2),g=a(P),w=a(g,!0);t(g),t(P),t(f),h((M,ee,ne)=>{o(H,M),o(L,ee),o(w,ne)},[()=>s()("character.actions.use_talent"),()=>s()("character.actions.use_talent_desc"),()=>s()("character.actions.select")]),l(k,f)};j(T,k=>{e(n)&&k(I)})}var Y=r(T,2);{var N=k=>{var f=tl(),c=r(a(f),4),d=a(c),m=a(d);Ut(m,{size:40,class:"opacity-80"}),t(d);var $=r(d,2),O=a($,!0);t($);var H=r($,2),C=a(H,!0);t(H);var L=r(H,2),P=a(L);P.__click=()=>kt.set("equipamento");var g=a(P),w=a(g);ca(w,{size:20}),t(g);var M=r(g,2),ee=a(M,!0);t(M),t(P);var ne=r(P,2);ne.__click=()=>kt.set("magias");var ue=a(ne),X=a(ue);Wt(X,{size:20}),t(ue);var se=r(ue,2),ve=a(se,!0);t(se),t(ne);var le=r(ne,2);le.__click=()=>kt.set("talentos");var Q=a(le),ge=a(Q);$t(ge,{size:20}),t(Q);var W=r(Q,2),U=a(W,!0);t(W),t(le),t(L),t(c),t(f),h((oe,pe,Z,G,te)=>{o(O,oe),o(C,pe),o(ee,Z),o(ve,G),o(U,te)},[()=>s()("character.actions.empty_title"),()=>s()("character.actions.empty_desc"),()=>s()("character.actions.inventory"),()=>s()("character.tabs.spells"),()=>s()("character.tabs.talents")]),da(1,f,()=>Ta,()=>({duration:300})),l(k,f)};j(Y,k=>{e(z)&&k(N)})}t(S),l(R,S),Le(),E()}Ge(["click"]);var sl=b('<div class="p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl group hover:border-indigo-500/50 transition-all duration-300"><div class="flex justify-between items-start mb-3"><div><div class="font-bold text-white text-lg group-hover:text-indigo-300 transition-colors uppercase tracking-tight"> </div> <div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div></div> <button class="text-slate-600 hover:text-white p-1 hover:bg-slate-800 rounded-md transition-all"><!></button></div> <div class="text-sm text-slate-400 mb-4 line-clamp-2 leading-relaxed h-10"> </div> <div class="flex items-center justify-between bg-slate-950/50 p-3 rounded-xl border border-slate-800/50"><span class="text-[10px] font-black text-slate-500 uppercase tracking-widest"> </span> <div class="flex items-center gap-3"><span> </span> <button class="bg-indigo-600 disabled:opacity-20 text-white text-[10px] font-black px-4 py-1.5 rounded-lg hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-900/40 active:scale-95 uppercase tracking-wider"> </button></div></div></div>'),ol=b('<div class="space-y-3"><h4 class="text-[10px] font-black text-indigo-400 uppercase tracking-[0.2em] flex items-center gap-2"><span class="w-8 h-px bg-indigo-500/30"></span> <span class="flex-1 h-px bg-indigo-500/30"></span></h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div>'),ll=b('<div class="text-center py-16 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium"> </p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> </button></div>'),il=b('<div class="space-y-8"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight"> </h3> <p class="text-xs text-slate-500"> </p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95"><!> </button></div> <!> <!></div>');function nl(R,y){qe(y,!1);const i=()=>B(Be,"$t",u),s=()=>B(Ve,"$character",u),[u,E]=Ye();function x(N,k=null){Te.update(f=>({...f,type:N,isOpen:!0,data:k}))}Mt();var _=il(),v=a(_),n=a(v),z=a(n),D=a(z,!0);t(z);var p=r(z,2),S=a(p,!0);t(p),t(n);var F=r(n,2);F.__click=()=>x("spell");var A=a(F);nt(A,{size:16});var q=r(A);t(F),t(v);var T=r(v,2);je(T,0,()=>["Novice","Expert","Master"],Ue,(N,k)=>{var f=Ee(),c=fe(f);{var d=m=>{var $=ol(),O=a($),H=r(a(O));ht(),t(O);var C=r(O,2);je(C,5,()=>s().spells.filter(L=>L.tier===k),Ue,(L,P)=>{var g=sl(),w=a(g),M=a(w),ee=a(M),ne=a(ee,!0);t(ee);var ue=r(ee,2),X=a(ue);t(ue),t(M);var se=r(M,2);se.__click=()=>x("spell",e(P));var ve=a(se);Bt(ve,{size:14}),t(se),t(w);var le=r(w,2),Q=a(le,!0);t(le);var ge=r(le,2),W=a(ge),U=a(W,!0);t(W);var oe=r(W,2),pe=a(oe),Z=a(pe);t(pe);var G=r(pe,2);G.__click=()=>x("confirm_spell",e(P));var te=a(G,!0);t(G),t(oe),t(ge),t(g),h((K,we)=>{o(ne,e(P).name),o(X,`${e(P).tradition??""} • ${e(P).type??""}`),me(se,"aria-label",`Editar ${e(P).name??""}`),o(Q,e(P).description),o(U,K),Se(pe,1,`text-sm font-mono font-bold ${e(P).castings===0?"text-red-500":"text-indigo-400"}`),o(Z,`${e(P).castings??""}/${e(P).maxCastings??""}`),G.disabled=e(P).castings===0,o(te,we)},[()=>i()("character.spells.magic_uses"),()=>i()("character.spells.cast")]),l(L,g)}),t(C),t($),h(()=>o(H,` ${k??""} Spells `)),l(m,$)};j(c,m=>{s().spells.some($=>$.tier===k)&&m(d)})}l(N,f)});var I=r(T,2);{var Y=N=>{var k=ll(),f=a(k);Wt(f,{size:48,class:"mx-auto text-slate-800 mb-3"});var c=r(f,2),d=a(c,!0);t(c);var m=r(c,2);m.__click=()=>x("spell");var $=a(m);nt($,{size:14});var O=r($);t(m),t(k),h((H,C)=>{o(d,H),o(O,` ${C??""}`)},[()=>i()("character.spells.empty"),()=>i()("character.spells.add_first")]),l(N,k)};j(I,N=>{s().spells.length===0&&N(Y)})}t(_),h((N,k,f,c)=>{o(D,N),o(S,k),me(F,"aria-label",f),o(q,` ${c??""}`)},[()=>i()("character.spells.grimoire"),()=>i()("character.spells.grimoire_desc"),()=>i()("character.spells.add_spell"),()=>i()("character.spells.new_spell")]),l(R,_),Le(),E()}Ge(["click"]);var dl=b('<div class="text-2xl font-mono font-bold text-white leading-tight"> </div>'),cl=b('<div class="text-sm font-bold text-slate-500 uppercase tracking-tighter mt-1 italic"> </div>'),vl=b("<span> </span>"),pl=b('<div class="flex flex-wrap gap-1 mt-1"></div>'),ul=b('<button class="bg-yellow-900/40 hover:bg-yellow-800/40 text-yellow-500 border border-yellow-800 px-2 py-0.5 rounded flex items-center gap-1 transition-colors" aria-label="Sortear encerramento do efeito"><!> </button>'),bl=b('<div><div class="flex justify-between items-start"><div class="flex items-center gap-2"><button><div></div></button> <span class="font-bold text-white tracking-tight"> </span></div> <div class="flex gap-2"><button class="text-slate-500 hover:text-white p-1 hover:bg-slate-800 rounded transition-colors"><!></button> <button class="text-slate-500 hover:text-red-400 p-1 hover:bg-slate-800 rounded transition-colors"><!></button></div></div> <div class="text-xs text-slate-400 leading-relaxed"> </div> <!> <div class="flex justify-between items-center text-[10px] text-slate-500 font-mono mt-1 border-t border-slate-800/50 pt-2"><span class="flex items-center gap-1"><!> </span> <!></div></div>'),xl=b('<h4 class="text-xs font-bold text-slate-500 uppercase px-1 mt-4 mb-2"> </h4> <!>',1),_l=b("<span> </span>"),fl=b('<div class="flex flex-wrap gap-1 mt-1 pl-10"></div>'),gl=b('<div class="p-3 rounded border flex flex-col gap-2 transition-all bg-slate-900/50 border-indigo-900/50 shadow-lg shadow-indigo-950/10"><div class="flex justify-between items-start"><div class="flex items-center gap-2"><div class="w-8 h-4 flex items-center justify-center"><!></div> <span class="font-bold text-slate-300 tracking-tight"> </span></div> <div class="flex gap-2"><a href="#talents" class="text-[10px] uppercase font-bold text-slate-500 hover:text-indigo-400 flex items-center gap-1"> </a></div></div> <!></div>'),hl=b('<h4 class="text-xs font-bold text-slate-500 uppercase px-1 mt-4 mb-2"> </h4> <!>',1),ml=b('<div class="text-center text-slate-500 italic py-4"> </div>'),$l=b('<div class="space-y-4"><div class="flex justify-between items-center bg-slate-900 p-3 rounded-lg border border-slate-800"><div class="flex items-center gap-4"><button class="p-2 hover:bg-slate-700 rounded text-slate-400 disabled:opacity-30 disabled:cursor-not-allowed"><!></button> <div class="text-center min-w-[80px]"><div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div> <!></div> <button class="p-2 hover:bg-slate-700 rounded text-white disabled:opacity-30 disabled:cursor-not-allowed"><!></button></div> <div class="flex gap-2"><button class="bg-slate-800 hover:bg-red-900/50 text-slate-400 hover:text-red-300 px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1 border border-slate-700"><!> </button> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1"><!> </button></div></div> <div class="space-y-2"><!> <!> <!></div></div>');function yl(R,y){qe(y,!0);const i=()=>B(wa,"$activeEffects",E),s=()=>B(Ve,"$character",E),u=()=>B(Be,"$t",E),[E,x]=Ye(),{advanceRound:_,deleteEffect:v,checkLuckEnds:n}=Fe;let z=_e(()=>i().filter(se=>se.sourceType==="talent"));function D(se,ve=null){Te.update(le=>({...le,type:se,isOpen:!0,data:ve}))}var p=$l(),S=a(p),F=a(S),A=a(F);A.__click=()=>_("prev");var q=a(A);Sr(q,{size:20}),t(A);var T=r(A,2),I=a(T),Y=a(I,!0);t(I);var N=r(I,2);{var k=se=>{var ve=dl(),le=a(ve,!0);t(ve),h(()=>o(le,s().currentRound||1)),l(se,ve)},f=se=>{var ve=cl(),le=a(ve,!0);t(ve),h(Q=>o(le,Q),[()=>u()("character.effects.out_of_combat")]),l(se,ve)};j(N,se=>{s().combatActive?se(k):se(f,!1)})}t(T);var c=r(T,2);c.__click=()=>_("next");var d=a(c);yr(d,{size:20}),t(c),t(F);var m=r(F,2),$=a(m);$.__click=function(...se){Fe.cleanInactiveEffects?.apply(this,se)};var O=a($);$r(O,{size:14});var H=r(O);t($);var C=r($,2);C.__click=()=>D("effect");var L=a(C);nt(L,{size:14});var P=r(L);t(C),t(m),t(S);var g=r(S,2),w=a(g);{var M=se=>{var ve=xl(),le=fe(ve),Q=a(le,!0);t(le);var ge=r(le,2);je(ge,1,()=>s().effects,W=>W.id,(W,U)=>{var oe=bl(),pe=a(oe),Z=a(pe),G=a(Z);G.__click=()=>Fe.toggleEffect(e(U).id);var te=a(G);t(G);var K=r(G,2),we=a(K,!0);t(K),t(Z);var ke=r(Z,2),he=a(ke);he.__click=()=>D("effect",e(U));var ae=a(he);Bt(ae,{size:14}),t(he);var J=r(he,2);J.__click=()=>v(e(U).id);var V=a(J);Rt(V,{size:14}),t(J),t(ke),t(pe);var re=r(pe,2),ce=a(re,!0);t(re);var de=r(re,2);{var ie=Pe=>{var Ae=pl();je(Ae,21,()=>e(U).modifiers,Ue,(Ce,De)=>{var Ie=vl(),st=a(Ie);t(Ie),h(()=>{Se(Ie,1,`text-[9px] px-1.5 py-0.5 rounded border ${e(De).type===pt.SET?"bg-yellow-900/30 text-yellow-200 border-yellow-800":"bg-slate-800 text-slate-300 border-slate-700"} font-medium`),o(st,`${(la[e(De).target]||e(De).target)??""}: ${e(De).type===pt.SET?"=":e(De).type===pt.MULT?"x":e(De).value>0?"+":""}${e(De).value??""}`)}),l(Ce,Ie)}),t(Ae),l(Pe,Ae)};j(de,Pe=>{e(U).isActive&&Array.isArray(e(U).modifiers)&&e(U).modifiers.length>0&&Pe(ie)})}var be=r(de,2),ye=a(be),$e=a(ye);Ft($e,{size:10,class:"text-indigo-400"});var Me=r($e);t(ye);var He=r(ye,2);{var We=Pe=>{var Ae=ul();Ae.__click=()=>n(e(U).id);var Ce=a(Ae);pa(Ce,{size:10});var De=r(Ce);t(Ae),h(Ie=>o(De,` ${Ie??""}`),[()=>u()("character.effects.luck_ends")]),l(Pe,Ae)};j(He,Pe=>{e(U).duration==="LUCK_ENDS"&&e(U).isActive&&Pe(We)})}t(be),t(oe),h(()=>{Se(oe,1,`p-3 rounded border flex flex-col gap-2 transition-all ${e(U).isActive?"bg-slate-900 border-indigo-900 shadow-lg shadow-indigo-950/20":"bg-slate-950 border-slate-800 opacity-60"}`),Se(G,1,`w-8 h-4 rounded-full relative transition-colors ${e(U).isActive?"bg-green-500":"bg-slate-600"}`),me(G,"aria-label",e(U).isActive?"Desativar efeito {eff.name}":"Ativar efeito {eff.name}"),me(G,"aria-pressed",e(U).isActive),Se(te,1,`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${e(U).isActive?"left-4.5":"left-0.5"}`),o(we,e(U).name),me(he,"aria-label",`Editar ${e(U).name??""}`),me(J,"aria-label",`Excluir ${e(U).name??""}`),o(ce,e(U).description),o(Me,` ${ya[e(U).duration]??""} ${e(U).duration==="ROUNDS"?`(${e(U).roundsLeft})`:""}`)}),l(W,oe)}),h(W=>o(Q,W),[()=>u()("character.effects.active")]),l(se,ve)};j(w,se=>{s().effects.length>0&&se(M)})}var ee=r(w,2);{var ne=se=>{var ve=hl(),le=fe(ve),Q=a(le,!0);t(le);var ge=r(le,2);je(ge,17,()=>e(z),W=>W.id,(W,U)=>{var oe=gl(),pe=a(oe),Z=a(pe),G=a(Z),te=a(G);$t(te,{size:14,class:"text-yellow-500"}),t(G);var K=r(G,2),we=a(K,!0);t(K),t(Z);var ke=r(Z,2),he=a(ke);he.__click=re=>{re.preventDefault(),document.getElementById("tab-talents")?.click()};var ae=a(he,!0);t(he),t(ke),t(pe);var J=r(pe,2);{var V=re=>{var ce=fl();je(ce,21,()=>e(U).modifiers,Ue,(de,ie)=>{var be=_l(),ye=a(be);t(be),h(()=>{Se(be,1,`text-[9px] px-1.5 py-0.5 rounded border ${e(ie).type===pt.SET?"bg-yellow-900/30 text-yellow-200 border-yellow-800":"bg-slate-800 text-slate-300 border-slate-700"} font-medium`),o(ye,`${(la[e(ie).target]||e(ie).target)??""}: ${e(ie).type===pt.SET?"=":e(ie).type===pt.MULT?"x":e(ie).value>0?"+":""}${e(ie).value??""}`)}),l(de,be)}),t(ce),l(re,ce)};j(J,re=>{Array.isArray(e(U).modifiers)&&e(U).modifiers.length>0&&re(V)})}t(oe),h(re=>{o(we,e(U).name),o(ae,re)},[()=>u()("character.talents.source")]),l(W,oe)}),h(W=>o(Q,W),[()=>u()("character.talents.passive")]),l(se,ve)};j(ee,se=>{e(z).length>0&&se(ne)})}var ue=r(ee,2);{var X=se=>{var ve=ml(),le=a(ve,!0);t(ve),h(Q=>o(le,Q),[()=>u()("character.effects.none")]),l(se,ve)};j(ue,se=>{s().effects.length===0&&e(z).length===0&&se(X)})}t(g),t(p),h((se,ve,le,Q,ge)=>{A.disabled=!!s().campaignId,me(A,"aria-label",se),o(Y,ve),c.disabled=!!s().campaignId,me(c,"aria-label",le),o(H,` ${Q??""}`),o(P,` ${ge??""}`)},[()=>u()("character.effects.prev_round"),()=>s().combatActive?u()("character.effects.current_round"):u()("character.effects.status"),()=>u()("character.effects.next_round"),()=>u()("character.effects.clean_inactive"),()=>u()("character.effects.new_effect")]),l(R,p),Le(),x()}Ge(["click"]);var wl=b('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1"> </span> <span class="font-bold text-slate-300 text-xs flex items-center justify-center gap-1.5 bg-slate-800 px-2 py-1 rounded-md"><!> </span>',1),kl=b('<span class="flex items-center gap-1"><!> Sorte Encerra</span>'),zl=b('<span class="flex items-center gap-1"><!> </span>'),Sl=b('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1"> </span> <div class="font-bold text-indigo-300 text-xs flex flex-col items-center justify-center bg-slate-800 px-2 py-1 rounded-md"><!></div>',1),Tl=b('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1"> </span> <span> <span class="text-slate-600 text-sm"> </span></span>',1),Ol=b('<button class="bg-slate-800 disabled:opacity-20 hover:bg-green-600/20 text-green-400 p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-green-500/50"><!></button>'),Ml=b('<button title="Tentar Recuperar (Teste de Sorte)" class="bg-slate-800 hover:bg-yellow-600/20 text-yellow-500 p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-yellow-500/50 flex flex-col items-center gap-0.5"><!> <span class="text-[8px] font-black uppercase">Recuperar</span></button>'),El=b('<div class="flex gap-2"><!> <button class="bg-slate-800 disabled:opacity-20 hover:bg-indigo-600/20 text-white p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-indigo-500/50"><!></button></div>'),Al=b('<div><div class="flex-1"><div class="flex items-center gap-3 mb-2"><div class="p-2 rounded-lg bg-slate-800 text-yellow-500 group-hover:scale-110 transition-transform shadow-inner"><!></div> <h4 class="font-bold text-white text-lg tracking-tight uppercase tracking-tight"> </h4> <button class="text-slate-600 hover:text-indigo-400 opacity-0 group-hover:opacity-100 transition-all transform hover:scale-110"><!></button></div> <p class="text-sm text-slate-400 leading-relaxed max-w-2xl"> </p></div> <div class="shrink-0 flex items-center gap-4 bg-slate-950/50 p-3 rounded-xl border border-slate-800 shadow-inner"><div class="text-center px-2 border-r border-slate-800 pr-4 min-w-[80px]"><!></div> <!></div></div>'),Cl=b('<div class="space-y-4"><h4 class="text-sm font-black text-slate-500 uppercase tracking-widest border-b border-slate-800 pb-2"> </h4> <div class="grid grid-cols-1 gap-4"></div></div>'),Pl=b('<div class="text-center py-12 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium"> </p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> </button></div>'),Dl=b('<div class="space-y-8"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight"> </h3> <p class="text-xs text-slate-500"> </p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95"><!> </button></div> <!></div>');function Nl(R,y){qe(y,!0);const i=()=>B(Ve,"$character",u),s=()=>B(Be,"$t",u),[u,E]=Ye(),{recoverTalent:x,rollLuckTalent:_}=Fe;function v(d,m=null){Te.update($=>({...$,type:d,isOpen:!0,data:m}))}let n=_e(()=>({[Je.ANCESTRY]:i().talents.filter(d=>!d.source||d.source===Je.ANCESTRY),[Je.NOVICE]:i().talents.filter(d=>d.source===Je.NOVICE),[Je.EXPERT]:i().talents.filter(d=>d.source===Je.EXPERT),[Je.MASTER]:i().talents.filter(d=>d.source===Je.MASTER)})),z=_e(()=>i().talents.length>0);var D=Dl(),p=a(D),S=a(p),F=a(S),A=a(F,!0);t(F);var q=r(F,2),T=a(q,!0);t(q),t(S);var I=r(S,2);I.__click=()=>v("talent");var Y=a(I);nt(Y,{size:16});var N=r(Y);t(I),t(p);var k=r(p,2);{var f=d=>{var m=Ee(),$=fe(m);je($,17,()=>Object.values(Je),Ue,(O,H)=>{var C=Ee(),L=fe(C);{var P=g=>{var w=Cl(),M=a(w),ee=a(M,!0);t(M);var ne=r(M,2);je(ne,21,()=>e(n)[e(H)],Ue,(ue,X)=>{var se=Al(),ve=a(se),le=a(ve),Q=a(le),ge=a(Q);$t(ge,{size:18}),t(Q);var W=r(Q,2),U=a(W,!0);t(W);var oe=r(W,2);oe.__click=()=>v("talent",e(X));var pe=a(oe);Bt(pe,{size:14}),t(oe),t(le);var Z=r(le,2),G=a(Z,!0);t(Z),t(ve);var te=r(ve,2),K=a(te),we=a(K);{var ke=V=>{var re=wl(),ce=fe(re),de=a(ce,!0);t(ce);var ie=r(ce,2),be=a(ie);wr(be,{size:12,class:"text-indigo-400"});var ye=r(be);t(ie),h(($e,Me)=>{o(de,$e),o(ye,` ${Me??""}`)},[()=>s()("character.talents.type"),()=>s()("character.talents.passive")]),l(V,re)},he=V=>{var re=Ee(),ce=fe(re);{var de=be=>{var ye=Sl(),$e=fe(ye),Me=a($e,!0);t($e);var He=r($e,2),We=a(He);{var Pe=Ce=>{var De=kl(),Ie=a(De);Ft(Ie,{size:12}),ht(),t(De),l(Ce,De)},Ae=Ce=>{var De=zl(),Ie=a(De);Ma(Ie,{size:12});var st=r(Ie);t(De),h(()=>o(st,` ${e(X).durationValue??""} ${e(X).duration==="MINUTES"?"min":"h"}`)),l(Ce,De)};j(We,Ce=>{e(X).duration==="LUCK_ENDS"?Ce(Pe):Ce(Ae,!1)})}t(He),h(Ce=>o(Me,Ce),[()=>s()("character.talents.types.Duration")]),l(be,ye)},ie=be=>{var ye=Tl(),$e=fe(ye),Me=a($e,!0);t($e);var He=r($e,2),We=a(He,!0),Pe=r(We),Ae=a(Pe);t(Pe),t(He),h(Ce=>{o(Me,Ce),Se(He,1,`font-mono font-bold text-lg ${e(X).uses===0?"text-red-400":"text-white"}`),o(We,e(X).uses),o(Ae,`/${e(X).maxUses??""}`)},[()=>s()("character.talents.uses")]),l(be,ye)};j(ce,be=>{e(X).activityType==="Duration"?be(de):be(ie,!1)},!0)}l(V,re)};j(we,V=>{e(X).activityType==="Passive"||e(X).isPassive?V(ke):V(he,!1)})}t(K);var ae=r(K,2);{var J=V=>{var re=El(),ce=a(re);{var de=$e=>{var Me=Ol();Me.__click=()=>x(e(X).id);var He=a(Me);nt(He,{size:18}),t(Me),h(We=>{Me.disabled=e(X).uses>=e(X).maxUses,me(Me,"title",We),me(Me,"aria-label",`Recuperar uso de ${e(X).name??""}`)},[()=>s()("character.talents.recover")]),l($e,Me)},ie=$e=>{var Me=Ee(),He=fe(Me);{var We=Pe=>{var Ae=Ml();Ae.__click=()=>_(e(X).id);var Ce=a(Ae);Ft(Ce,{size:18}),ht(2),t(Ae),h(()=>me(Ae,"aria-label",`Recuperar ${e(X).name??""} com sorte`)),l(Pe,Ae)};j(He,Pe=>{e(X).activityType==="Duration"&&e(X).duration==="LUCK_ENDS"&&e(X).uses===0&&Pe(We)},!0)}l($e,Me)};j(ce,$e=>{e(X).activityType==="Uses"?$e(de):$e(ie,!1)})}var be=r(ce,2);be.__click=()=>v("confirm_talent",e(X));var ye=a(be);$t(ye,{size:18}),t(be),t(re),h($e=>{be.disabled=e(X).uses===0,me(be,"title",$e),me(be,"aria-label",`Usar ${e(X).name??""}`)},[()=>s()("character.talents.use")]),l(V,re)};j(ae,V=>{e(X).activityType!=="Passive"&&!e(X).isPassive&&V(J)})}t(te),t(se),h(()=>{Se(se,1,`p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl flex flex-col md:flex-row md:items-center gap-6 group hover:border-indigo-500/50 hover:bg-slate-900/60 transition-all duration-300 ${e(X).activityType!=="Passive"&&!e(X).isPassive&&e(X).uses===0?"opacity-60 grayscale-[0.5]":""}`),o(U,e(X).name),me(oe,"aria-label",`Editar ${e(X).name??""}`),o(G,e(X).description)}),l(ue,se)}),t(ne),t(w),h(ue=>o(ee,ue),[()=>s()(`character.talents.sources.${e(H)}`)]),l(g,w)};j(L,g=>{e(n)[e(H)]&&e(n)[e(H)].length>0&&g(P)})}l(O,C)}),l(d,m)},c=d=>{var m=Pl(),$=a(m);$t($,{size:48,class:"mx-auto text-slate-800 mb-3"});var O=r($,2),H=a(O,!0);t(O);var C=r(O,2);C.__click=()=>v("talent");var L=a(C);nt(L,{size:14});var P=r(L);t(C),t(m),h((g,w)=>{o(H,g),o(P,` ${w??""}`)},[()=>s()("character.talents.empty"),()=>s()("character.talents.add_first")]),l(d,m)};j(k,d=>{e(z)?d(f):d(c,!1)})}t(D),h((d,m,$,O)=>{o(A,d),o(T,m),me(I,"aria-label",$),o(N,` ${O??""}`)},[()=>s()("character.talents.title"),()=>s()("character.talents.subtitle"),()=>s()("character.talents.add"),()=>s()("character.talents.new")]),l(R,D),Le(),E()}Ge(["click"]);var jl=b('<span class="block italic text-slate-400"> </span>'),Hl=b("• Def <!>",1),Il=b('<button class="text-xs bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600"> </button>'),Ul=b("<button> </button>"),Rl=b("<button>2H</button>"),ql=b("<button>Main</button>"),Ll=b("<!> <button>Off</button>",1),Vl=b('<div class="flex justify-center gap-1"><!></div>'),Fl=b('<tr class="hover:bg-slate-900/50"><td class="p-3"><div class="font-bold text-white"> </div> <div class="text-[10px] text-slate-500"> <!> <!></div></td><td class="p-3"><span class="text-[10px] border border-slate-700 px-1 rounded uppercase bg-slate-900"> </span></td><td class="p-3 text-center"><!></td><td class="p-3 text-right font-mono"> </td><td class="p-3 text-right"><button class="text-slate-500 hover:text-white"><!></button></td></tr>'),Gl=b('<div class="space-y-4"><div class="lg:hidden"><!></div> <div class="flex justify-between items-center"><h3 class="text-xs font-bold text-slate-500 uppercase"> </h3> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-3 py-1.5 rounded text-white font-bold flex items-center gap-1"><!> </button></div> <div class="bg-slate-950 rounded-lg border border-slate-800 overflow-hidden"><table class="w-full text-sm text-left"><thead class="bg-slate-900 text-slate-400 font-bold uppercase text-[10px]"><tr><th class="p-3"> </th><th class="p-3"> </th><th class="p-3 text-center"> </th><th class="p-3 text-right"> </th><th class="p-3 w-8"></th></tr></thead><tbody class="divide-y divide-slate-800 text-slate-300"></tbody></table></div></div>');function Wl(R,y){qe(y,!1);const i=()=>B(Be,"$t",u),s=()=>B(Ve,"$character",u),[u,E]=Ye(),{useConsumable:x,equipItem:_}=Fe;function v(P,g=null){Te.update(w=>({...w,type:P,isOpen:!0,data:g}))}Mt();var n=Gl(),z=a(n),D=a(z);Pa(D,{}),t(z);var p=r(z,2),S=a(p),F=a(S,!0);t(S);var A=r(S,2);A.__click=()=>v("item");var q=a(A);nt(q,{size:14});var T=r(q);t(A),t(p);var I=r(p,2),Y=a(I),N=a(Y),k=a(N),f=a(k),c=a(f,!0);t(f);var d=r(f),m=a(d,!0);t(d);var $=r(d),O=a($,!0);t($);var H=r($),C=a(H,!0);t(H),ht(),t(k),t(N);var L=r(N);je(L,5,()=>s().equipment,Ue,(P,g)=>{var w=Fl(),M=a(w),ee=a(M),ne=a(ee,!0);t(ee);var ue=r(ee,2),X=a(ue),se=r(X);{var ve=ae=>{var J=jl(),V=a(J,!0);t(J),h(()=>o(V,e(g).notes)),l(ae,J)};j(se,ae=>{e(g).notes&&ae(ve)})}var le=r(se,2);{var Q=ae=>{var J=Hl(),V=r(fe(J));{var re=de=>{var ie=Ct();h(()=>o(ie,`Fixed ${e(g).defenseFixed??""}`)),l(de,ie)},ce=de=>{var ie=Ct();h(()=>o(ie,`+${e(g).defenseMod??""}`)),l(de,ie)};j(V,de=>{e(g).defenseFixed?de(re):de(ce,!1)})}l(ae,J)};j(le,ae=>{e(g).type===ut.ARMOR&&ae(Q)})}t(ue),t(M);var ge=r(M),W=a(ge),U=a(W,!0);t(W),t(ge);var oe=r(ge),pe=a(oe);{var Z=ae=>{var J=Il();J.__click=()=>x(e(g));var V=a(J,!0);t(J),h(re=>{J.disabled=e(g).quantity<=0,me(J,"aria-label",`Usar ${e(g).name??""}`),o(V,re)},[()=>i()("character.inventory.use")]),l(ae,J)},G=ae=>{var J=Ee(),V=fe(J);{var re=de=>{var ie=Ul();ie.__click=()=>_(e(g));var be=a(ie,!0);t(ie),h(ye=>{Se(ie,1,`text-xs px-2 py-1 rounded border transition-colors ${e(g).equipped?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-400"}`),me(ie,"aria-label",e(g).equipped?"Desequipar armadura":"Equipar armadura"),o(be,ye)},[()=>e(g).equipped?i()("character.inventory.equipped"):i()("character.inventory.equip")]),l(de,ie)},ce=de=>{var ie=Ee(),be=fe(ie);{var ye=$e=>{var Me=Vl(),He=a(Me);{var We=Ae=>{var Ce=Rl();Ce.__click=()=>_(e(g),e(g).equippedState?null:"two"),h(()=>{Se(Ce,1,`text-[10px] px-2 py-1 rounded border ${e(g).equippedState==="two"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),me(Ce,"aria-label",e(g).equippedState==="two"?"Desequipar 2H":"Equipar 2H")}),l(Ae,Ce)},Pe=Ae=>{var Ce=Ll(),De=fe(Ce);{var Ie=dt=>{var ot=ql();ot.__click=()=>_(e(g),e(g).equippedState==="main"?null:"main"),h(()=>{Se(ot,1,`text-[10px] px-2 py-1 rounded border ${e(g).equippedState==="main"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),me(ot,"aria-label",e(g).equippedState==="main"?"Desequipar Main Hand":"Equipar Main Hand")}),l(dt,ot)};j(De,dt=>{e(g).grip!==Lt.OFF&&dt(Ie)})}var st=r(De,2);st.__click=()=>_(e(g),e(g).equippedState==="off"?null:"off"),h(()=>{Se(st,1,`text-[10px] px-2 py-1 rounded border ${e(g).equippedState==="off"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),me(st,"aria-label",e(g).equippedState==="off"?"Desequipar Off Hand":"Equipar Off Hand")}),l(Ae,Ce)};j(He,Ae=>{e(g).grip===Lt.TWO?Ae(We):Ae(Pe,!1)})}t(Me),l($e,Me)};j(be,$e=>{(e(g).type===ut.WEAPON||e(g).type===ut.SHIELD)&&$e(ye)},!0)}l(de,ie)};j(V,de=>{e(g).type===ut.ARMOR?de(re):de(ce,!1)},!0)}l(ae,J)};j(pe,ae=>{e(g).type===ut.CONSUMABLE?ae(Z):ae(G,!1)})}t(oe);var te=r(oe),K=a(te,!0);t(te);var we=r(te),ke=a(we);ke.__click=()=>v("item",e(g));var he=a(ke);Bt(he,{size:14}),t(ke),t(we),t(w),h(()=>{o(ne,e(g).name),o(X,`${e(g).quality??""} • ${e(g).availability??""} • ${e(g).price??""}gp `),o(U,e(g).type),o(K,e(g).quantity),me(ke,"aria-label",`Editar ${e(g).name??""}`)}),l(P,w)}),t(L),t(Y),t(I),t(n),h((P,g,w,M,ee,ne)=>{o(F,P),o(T,` ${g??""}`),o(c,w),o(m,M),o(O,ee),o(C,ne)},[()=>i()("character.inventory.title"),()=>i()("character.inventory.new_item"),()=>i()("character.inventory.item"),()=>i()("character.inventory.type"),()=>i()("character.inventory.actions_equip"),()=>i()("character.inventory.qty")]),l(R,n),Le(),E()}Ge(["click"]);var Yl=b('<div class="space-y-6"><div class="lg:hidden"><!></div> <div class="space-y-4"><div class="flex justify-between items-center mb-2"><h3 class="text-xs font-bold text-slate-500 uppercase"> </h3> <span class="text-[10px] text-slate-600 italic"> </span></div> <textarea class="w-full h-[50vh] bg-slate-950 border border-slate-800 rounded p-4 text-white resize-none focus:border-indigo-500 focus:outline-none custom-scrollbar leading-relaxed font-mono text-sm"></textarea></div></div>');function Bl(R,y){qe(y,!1);const i=()=>B(Be,"$t",u),s=()=>B(Ve,"$character",u),[u,E]=Ye();Mt();var x=Yl(),_=a(x),v=a(_);Da(v,{}),t(_);var n=r(_,2),z=a(n),D=a(z),p=a(D,!0);t(D);var S=r(D,2),F=a(S,!0);t(S),t(z);var A=r(z,2);Yt(A),t(n),t(x),h((q,T,I,Y)=>{o(p,q),o(F,T),me(A,"placeholder",I),me(A,"aria-label",Y)},[()=>i()("character.notes.title"),()=>i()("character.notes.autosave"),()=>i()("character.notes.placeholder"),()=>i()("character.notes.title")]),Re(A,()=>s().notes,q=>Ua(Ve,xa(s).notes=q,xa(s))),l(R,x),Le(),E()}var Xl=b('<div class="space-y-4 flex-1 flex flex-col"><!> <button class="w-full bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 p-4 rounded-2xl border border-emerald-500/30 flex items-center justify-center gap-3 group transition-all shadow-lg shadow-emerald-900/30 hover:shadow-emerald-500/20 active:scale-[0.98] cursor-pointer"><div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform"><!></div> <span class="font-black text-white uppercase tracking-wider text-sm">Teste de Sorte</span></button> <!> <!> <div class="lg:hidden mt-auto pt-6"><!></div></div>');function Kl(R,y){qe(y,!1),Mt();var i=Xl(),s=a(i);Aa(s,{});var u=r(s,2);u.__click=()=>Te.set({type:"pre_roll",isOpen:!0,data:{type:"luck",source:{name:"Sorte"}}});var E=a(u),x=a(E);pa(x,{size:24,class:"text-white"}),t(E),ht(2),t(u);var _=r(u,2);Ca(_,{});var v=r(_,2);Na(v,{});var n=r(v,2),z=a(n);va(z,{banner:!0}),t(n),t(i),l(R,i),Le()}Ge(["click"]);var Jl=b('<div class="min-h-screen flex flex-col items-center justify-center p-4"><div class="bg-slate-900 border border-slate-800 rounded-3xl p-8 max-w-md w-full text-center shadow-2xl"><div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-600"><!></div> <h1 class="text-2xl font-black text-white mb-2 uppercase tracking-tight"> </h1> <p class="text-slate-400 mb-8"> </p> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all"><!> </button></div></div>'),Ql=b('<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <main class="max-w-6xl mx-auto md:px-4 mt-6 lg:mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6"><aside class="hidden lg:block lg:col-span-3 space-y-4"><!> <button class="w-full bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 p-4 rounded-2xl border border-emerald-500/30 flex items-center justify-center gap-3 group transition-all shadow-lg shadow-emerald-900/30 hover:shadow-emerald-500/20 active:scale-[0.98] cursor-pointer"><div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform"><!></div> <span class="font-black text-white uppercase tracking-wider text-sm"> </span></button> <!> <!> <!> <!> <div class="pt-2"><!></div></aside> <section class="lg:col-span-9"><div class="bg-slate-900 md:rounded-xl md:border md:border-slate-800 min-h-[calc(100vh-200px)] md:min-h-[60vh] flex flex-col"><!> <div class="p-4 md:p-6 flex-1 flex flex-col"><!> <!> <!> <!> <!> <!> <!></div></div></section></main> <div class="hidden"><!></div>',1),Zl=b('<div class="flex items-center justify-center min-h-screen"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"></div></div>'),ei=b('<div class="min-h-screen bg-slate-950 text-slate-100 font-sans pb-28 md:pb-20 relative overflow-x-hidden"><!></div> ```',1);function wi(R,y){qe(y,!0);const i=()=>B(Ve,"$character",S),s=()=>B(Nt,"$normalHealth",S),u=()=>B(jt,"$currentHealth",S),E=()=>B(It,"$damage",S),x=()=>B(ia,"$totalDefense",S),_=()=>B(oa,"$effectiveMaxHealth",S),v=()=>B(tr,"$page",S),n=()=>B(Be,"$t",S),z=()=>B(Jt,"$isHistoryOpen",S),D=()=>B(Te,"$modalState",S),p=()=>B(kt,"$activeTab",S),[S,F]=Ye();let A=Ke(!1),q=Ke(!1),T=Ke(null);gt(()=>{if(!e(A)||e(q)||!e(T))return;const d=i(),m=s(),$=u(),O=E(),H=x(),C=_(),L={...d,normalHealth:m,currentHealth:$,damage:O};aa.set(e(T),L),d.campaignId&&fa({id:e(T),type:"player",name:d.name,level:d.level,ancestry:d.ancestry,damage:O,currentHealth:$,normalHealth:m,health:C,defense:H,initiative:d.initiative,acted:d.acted,afflictions:d.afflictions||[],campaignApproval:d.campaignApproval,imageUrl:d.imageUrl})}),gt(()=>{if(!e(A)||e(q)||!e(T)||!Tt(Ve).campaignId)return;const m=setInterval(()=>{const $=Tt(Ve);fa({id:e(T),type:"player",name:$.name,level:$.level,ancestry:$.ancestry,damage:Tt(It),currentHealth:Tt(jt),normalHealth:Tt(Nt),health:Tt(oa),defense:Tt(ia),initiative:$.initiative,acted:$.acted,afflictions:$.afflictions||[],campaignApproval:$.campaignApproval,imageUrl:$.imageUrl})},3e4);return()=>clearInterval(m)}),gt(()=>{const d=v().params.id;d&&d!==e(T)&&I(d)});async function I(d){if(ze(A,!1),ze(q,!1),ze(T,d,!0),await Ja(),aa.has(d)){const m=aa.get(d);Ve.set({...Qa,...m,id:d}),m.normalHealth!==void 0&&Nt.set(m.normalHealth),m.currentHealth!==void 0&&jt.set(m.currentHealth),m.damage!==void 0&&It.set(m.damage);const $=Tt(Ve);$.campaignId&&Za($.campaignId,!1,e(T))}else ze(q,!0);window.innerWidth<768?kt.set("stats"):Tt(kt)==="stats"&&kt.set("acoes"),ze(A,!0)}Ha(()=>{er()});var Y=ei(),N=fe(Y),k=a(N);{var f=d=>{var m=Ee(),$=fe(m);{var O=C=>{var L=Jl(),P=a(L),g=a(P),w=a(g);vr(w,{size:40}),t(g);var M=r(g,2),ee=a(M,!0);t(M);var ne=r(M,2),ue=a(ne,!0);t(ne);var X=r(ne,2);X.__click=()=>ka(za("/"));var se=a(X);Oa(se,{size:18});var ve=r(se);t(X),t(P),t(L),h((le,Q,ge)=>{o(ee,le),o(ue,Q),o(ve,` ${ge??""}`)},[()=>n()("character.not_found.title"),()=>n()("character.not_found.message"),()=>n()("character.back_to_home")]),l(C,L)},H=C=>{var L=Ql(),P=fe(L);pr(P,{get isOpen(){return z()},onClose:()=>Jt.set(!1)});var g=r(P,2);ds(g,{});var w=r(g,2);xs(w,{});var M=r(w,2);ws(M,{});var ee=r(M,2);Ps(ee,{});var ne=r(ee,2);Ns(ne,{});var ue=r(ne,2);Hs(ue,{});var X=r(ue,2);Us(X,{});var se=r(X,2);qs(se,{});var ve=r(se,2);Ws(ve,{});var le=r(ve,2);Js(le,{});var Q=r(le,2);no(Q,{});var ge=r(Q,2);go(ge,{});var W=r(ge,2);wo(W,{});var U=r(W,2);zo(U,{});var oe=r(U,2);{let Ne=_e(()=>D().isOpen&&D().type==="pre_roll"),At=_e(()=>n()("character.dice_roll.confirm_roll")),Ht=_e(()=>D().data?.type==="weapon_damage"?n()("character.dice_roll.extra_dice"):n()("character.dice_roll.boons_banes")),qt=_e(()=>n()("character.dice_roll.roll"));ur(oe,{get isOpen(){return e(Ne)},get title(){return e(At)},get label(){return e(Ht)},get rollLabel(){return e(qt)},onClose:()=>Te.update(Pt=>({...Pt,type:null,isOpen:!1,data:null})),onRoll:Pt=>{Fe.finalizeRoll(D().data,Pt,i().effects.filter(vt=>vt.isActive).map(vt=>vt.name)),Te.update(vt=>({...vt,type:null,isOpen:!1,data:null}))}})}var pe=r(oe,2);Fr(pe,{});var Z=r(pe,2),G=a(Z),te=a(G);Aa(te,{});var K=r(te,2);K.__click=()=>Te.set({type:"pre_roll",isOpen:!0,data:{type:"luck",source:{name:"Sorte"}}});var we=a(K),ke=a(we);pa(ke,{size:24,class:"text-white"}),t(we);var he=r(we,2),ae=a(he,!0);t(he),t(K);var J=r(K,2);Ca(J,{});var V=r(J,2);Pa(V,{});var re=r(V,2);Da(re,{});var ce=r(re,2);Na(ce,{});var de=r(ce,2),ie=a(de);va(ie,{}),t(de),t(G);var be=r(G,2),ye=a(be),$e=a(ye);Fo($e,{});var Me=r($e,2),He=a(Me);{var We=Ne=>{Kl(Ne,{})};j(He,Ne=>{p()==="stats"&&Ne(We)})}var Pe=r(He,2);{var Ae=Ne=>{rl(Ne,{})};j(Pe,Ne=>{p()==="acoes"&&Ne(Ae)})}var Ce=r(Pe,2);{var De=Ne=>{yl(Ne,{})};j(Ce,Ne=>{p()==="efeitos"&&Ne(De)})}var Ie=r(Ce,2);{var st=Ne=>{nl(Ne,{})};j(Ie,Ne=>{p()==="magias"&&Ne(st)})}var dt=r(Ie,2);{var ot=Ne=>{Nl(Ne,{})};j(dt,Ne=>{p()==="talentos"&&Ne(ot)})}var yt=r(dt,2);{var Et=Ne=>{Wl(Ne,{})};j(yt,Ne=>{p()==="equipamento"&&Ne(Et)})}var ct=r(yt,2);{var rt=Ne=>{Bl(Ne,{})};j(ct,Ne=>{p()==="notas"&&Ne(rt)})}t(Me),t(ye),t(be),t(Z);var at=r(Z,2),xt=a(at);va(xt,{banner:!0}),t(at),h(Ne=>o(ae,Ne),[()=>n()("character.luck_test")]),l(C,L)};j($,C=>{e(q)?C(O):C(H,!1)})}l(d,m)},c=d=>{var m=Zl();l(d,m)};j(k,d=>{e(A)?d(f):d(c,!1)})}t(N),ht(),l(R,Y),Le(),F()}Ge(["click"]);export{wi as component,yi as universal};
