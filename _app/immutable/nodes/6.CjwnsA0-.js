import{c as T,a as s,f as d,t as et}from"../chunks/vbI-l42I.js";import{B as k,p as St,b as Nt,c as t,r as e,s as r,g as a,D as fa,t as C,n as pe,C as Zt,_ as ba,j as pa,d as yt,ag as da,b8 as za,u as Ma,a0 as La,q as Sa}from"../chunks/BlobBfBu.js";import{d as It,s as g}from"../chunks/OaA2MUvX.js";import{l as bt,s as xt,p as Na,i as v}from"../chunks/BBccnPWr.js";import{a as oe,s as Dt,b as Fa}from"../chunks/iJn5IoH5.js";import{I as ft,c as Le,U as Da,f as $e,i as Va,h as _a,l as Ga,m as Ba,n as oa,o as ga,q as Wa,t as Ya,r as Ka,u as ut,v as Ft,x as ia,y as la,z as Qa,G as ma,M as Xa,D as ja,A as Ha,B as Bt,C as Ea,E as Ja,F as ha,H as Za,J as $a,a as xa,s as Pa,w as er,K as tr,j as ar}from"../chunks/BlDAHNTi.js";import{W as rr,C as Ta,p as sr}from"../chunks/DylOolSk.js";import{g as Xt}from"../chunks/CI59BmNm.js";import{g as Oa}from"../chunks/C2QHidG2.js";import"../chunks/BX-sjYO1.js";import{s as ce,g as or,r as Te,e as Ve,i as Ge,c as Ue,b as we,h as ra,k as ir}from"../chunks/BO950AV2.js";import{i as Ut}from"../chunks/DGloBz3m.js";import{s as _t}from"../chunks/-C23ZK4E.js";import{a as Ra,C as lr,L as nr,D as dr,b as vr,X as ya,M as va,S as wa,G as cr,H as pr}from"../chunks/B_qKVCBO.js";import{T as sa,P as Mt,S as ca,a as ur}from"../chunks/fU9-t09R.js";function ka(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];ft(y,xt({name:"activity"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function br(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];ft(y,xt({name:"arrow-left"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function xr(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z"}],["path",{d:"M8 10h8"}],["path",{d:"M8 18h8"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"}]];ft(y,xt({name:"backpack"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function fr(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["circle",{cx:"11",cy:"13",r:"9"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95"}],["path",{d:"m22 2-1.5 1.5"}]];ft(y,xt({name:"bomb"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function _r(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]];ft(y,xt({name:"book"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function gr(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m9 18 6-6-6-6"}]];ft(y,xt({name:"chevron-right"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function qa(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M16.17 7.83 2 22"}],["path",{d:"M4.02 12a2.827 2.827 0 1 1 3.81-4.17A2.827 2.827 0 1 1 12 4.02a2.827 2.827 0 1 1 4.17 3.81A2.827 2.827 0 1 1 19.98 12a2.827 2.827 0 1 1-3.81 4.17A2.827 2.827 0 1 1 12 19.98a2.827 2.827 0 1 1-4.17-3.81A1 1 0 1 1 4 12"}],["path",{d:"m7.83 7.83 8.34 8.34"}]];ft(y,xt({name:"clover"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function mr(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["circle",{cx:"8",cy:"8",r:"6"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18"}],["path",{d:"M7 6h1v4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82"}]];ft(y,xt({name:"coins"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function hr(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21"}],["path",{d:"m5.082 11.09 8.828 8.828"}]];ft(y,xt({name:"eraser"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function $r(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z"}]];ft(y,xt({name:"fast-forward"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function yr(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];ft(y,xt({name:"file-text"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function wr(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8"}]];ft(y,xt({name:"infinity"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function kr(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m5 8 6 6"}],["path",{d:"m4 14 6-6 2-3"}],["path",{d:"M2 5h12"}],["path",{d:"M7 2h1"}],["path",{d:"m22 22-5-10-5 10"}],["path",{d:"M14 18h6"}]];ft(y,xt({name:"languages"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function Ca(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m16 17 5-5-5-5"}],["path",{d:"M21 12H9"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}]];ft(y,xt({name:"log-out"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function Ar(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"}]];ft(y,xt({name:"moon"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function zr(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z"}]];ft(y,xt({name:"rewind"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function ua(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"}],["path",{d:"m14 7 3 3"}],["path",{d:"M5 6v4"}],["path",{d:"M19 14v4"}],["path",{d:"M10 2v2"}],["path",{d:"M7 8H3"}],["path",{d:"M21 16h-4"}],["path",{d:"M11 3H9"}]];ft(y,xt({name:"wand-sparkles"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function Mr(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M12 20h.01"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764"}],["path",{d:"m2 2 20 20"}]];ft(y,xt({name:"wifi-off"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}function Wt(y,c){const i=bt(c,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]];ft(y,xt({name:"zap"},()=>i,{get iconNode(){return p},children:(m,w)=>{var n=T(),x=k(n);_t(x,c,"default",{}),s(m,n)},$$slots:{default:!0}}))}const Sr=!1,ci=Object.freeze(Object.defineProperty({__proto__:null,prerender:Sr},Symbol.toStringTag,{value:"Module"}));var Nr=d('<div class="text-[9px] font-black text-amber-500 uppercase tracking-tighter mt-1 animate-pulse">Aguardando Aprovação</div>'),Dr=d('<div class="text-[10px] text-slate-400 mt-0.5 font-medium flex items-center gap-1"><span class="opacity-50 font-bold uppercase tracking-tighter">Mestre:</span> <span class="text-indigo-300"> </span></div>'),Er=d('<div><div class="flex items-center gap-3"><div class="relative"><div><!></div> <div></div></div> <div><div>Campanha Ativa</div> <div class="font-bold text-white text-base leading-tight"> </div> <!></div></div> <button class="bg-slate-900 border border-slate-700 p-2.5 rounded-xl text-slate-500 hover:text-red-400 transition-all active:scale-95" title="Sair"><!></button></div>'),Pr=d("<div><div></div> <span> </span></div>"),Tr=d('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><div><!></div> <h3 class="text-[11px] font-black text-slate-400 uppercase tracking-[0.15em]">Campanha Ativa</h3></div> <button class="p-2 text-slate-600 hover:text-red-400 hover:bg-red-400/5 rounded-lg transition-all opacity-0 group-hover:opacity-100" title="Abandonar Campanha"><!></button></div> <div class="space-y-1"><div class="font-bold text-white text-lg tracking-tight leading-tight"> </div> <div class="text-[10px] font-medium text-slate-500 flex items-center gap-1.5 pt-0.5"><span class="uppercase tracking-tighter opacity-70">Mestre:</span> <span class="text-indigo-400 font-bold"> </span></div></div> <div class="flex items-center justify-between pt-3 border-t border-white/5"><div class="flex items-center gap-2"><div></div> <span> </span></div> <div class="flex items-center gap-1 text-[10px] text-slate-600 font-mono"><!> </div></div></div>');function Ia(y,c){St(c,!0);const i=()=>oe(Le,"$character",m),p=()=>oe(Va,"$isGmOnline",m),[m,w]=Dt();let n=Na(c,"compact",3,!1),x=Na(c,"banner",3,!1);var U=T(),L=k(U);{var o=u=>{const h=fa(()=>i().campaignApproval==="pending");var O=T(),_=k(O);{var b=A=>{var N=Er(),j=t(N),B=t(j),V=t(B),$=t(V);Da($,{size:20}),e(V);var E=r(V,2);e(B);var S=r(B,2),W=t(S),Z=r(W,2),Y=t(Z,!0);e(Z);var J=r(Z,2);{var f=G=>{var ee=Nr();s(G,ee)},D=G=>{var ee=Dr(),K=r(t(ee),2),F=t(K,!0);e(K),e(ee),C(()=>g(F,i().gmName)),s(G,ee)};v(J,G=>{a(h)?G(f):G(D,!1)})}e(S),e(j);var P=r(j,2);P.__click=()=>{confirm("Sair da campanha?")&&$e.leaveCampaign()};var z=t(P);Ca(z,{size:18}),e(P),e(N),C(()=>{ce(N,1,`bg-indigo-600/10 backdrop-blur-md border border-indigo-500/20 rounded-2xl p-4 flex items-center justify-between shadow-xl shadow-indigo-950/20 ${a(h)?"border-amber-500/30 bg-amber-500/5":""}`),ce(V,1,`w-10 h-10 ${a(h)?"bg-amber-600/20 text-amber-400 border-amber-500/30":"bg-indigo-600/20 text-indigo-400 border-indigo-500/30"} rounded-xl flex items-center justify-center`),ce(E,1,`absolute -top-1 -right-1 w-3 h-3 ${a(h)?"bg-amber-500 animate-pulse":p()?"bg-green-500 animate-pulse":"bg-slate-600"} rounded-full border-2 border-slate-950 shadow-[0_0_8px_rgba(34,197,94,0.6)]`),ce(W,1,`text-[10px] ${a(h)?"text-amber-500/70":"text-indigo-400/70"} font-black uppercase tracking-[0.2em] leading-none mb-1`),g(Y,i().campaignName)}),s(A,N)},l=A=>{var N=T(),j=k(N);{var B=$=>{var E=Pr(),S=t(E),W=r(S,2),Z=t(W,!0);e(W),e(E),C(()=>{ce(E,1,`inline-flex items-center gap-2 px-3 py-1 ${a(h)?"bg-amber-500/10 border-amber-500/20":"bg-indigo-500/10 border-indigo-500/20"} rounded-full shadow-sm glass`),ce(S,1,`w-1.5 h-1.5 rounded-full ${a(h)?"bg-amber-500 animate-pulse":p()?"bg-green-500 animate-pulse":"bg-slate-600"} shadow-[0_0_8px_rgba(34,197,94,0.4)]`),ce(W,1,`text-[9px] font-black ${a(h)?"text-amber-500":"text-indigo-400"} uppercase tracking-widest truncate max-w-[150px]`),g(Z,i().campaignName)}),s($,E)},V=$=>{var E=Tr(),S=t(E),W=t(S),Z=t(W),Y=t(Z);Da(Y,{size:16}),e(Z),pe(2),e(W);var J=r(W,2);J.__click=function(...Pe){$e.leaveCampaign?.apply(this,Pe)};var f=t(J);Ca(f,{size:14}),e(J),e(S);var D=r(S,2),P=t(D),z=t(P,!0);e(P);var G=r(P,2),ee=r(t(G),2),K=t(ee,!0);e(ee),e(G),e(D);var F=r(D,2),ie=t(F),ae=t(ie),Q=r(ae,2),ne=t(Q,!0);e(Q),e(ie);var Ke=r(ie,2),kt=t(Ke);{var ze=Pe=>{Ra(Pe,{size:10,class:"opacity-40 animate-spin",style:"animation-duration: 3s"})},ue=Pe=>{var ot=T(),Me=k(ot);{var ke=ye=>{rr(ye,{size:10,class:"opacity-40"})},Be=ye=>{Mr(ye,{size:10,class:"opacity-40 text-red-500/50"})};v(Me,ye=>{p()?ye(ke):ye(Be,!1)},!0)}s(Pe,ot)};v(kt,Pe=>{a(h)?Pe(ze):Pe(ue,!1)})}var be=r(kt);e(Ke),e(F),e(E),C(()=>{ce(E,1,`bg-slate-900/50 border border-slate-800 rounded-2xl p-5 space-y-4 shadow-lg backdrop-blur-sm group hover:border-indigo-500/30 transition-all duration-300 ${!p()&&!a(h)?"opacity-60 saturate-50":""} ${a(h)?"border-amber-500/20":""}`),ce(Z,1,`p-1.5 ${a(h)?"bg-amber-500/10 text-amber-500":p()?"bg-indigo-500/10 text-indigo-400":"bg-slate-800 text-slate-500"} rounded-lg`),g(z,i().campaignName),g(K,i().gmName),ce(ae,1,`w-1.5 h-1.5 rounded-full ${a(h)?"bg-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.4)] animate-pulse":p()?"bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.4)] animate-pulse":"bg-slate-700"}`),ce(Q,1,`text-[11px] font-bold uppercase tracking-wider ${a(h)?"text-amber-500":p()?"text-slate-400":"text-slate-600"}`),g(ne,a(h)?"Pendente de Aprovação":p()?"Online":"Offline"),g(be,` ${a(h)?"PENDENTE":p()?"SYNCED":"WAITING"}`)}),s($,E)};v(j,$=>{n()?$(B):$(V,!1)},!0)}s(A,N)};v(_,A=>{x()?A(b):A(l,!1)})}s(u,O)};v(L,u=>{i().campaignId&&u(o)})}s(y,U),Nt(),w()}It(["click"]);var Cr=d('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),Ir=d('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"><div class="absolute inset-0 bg-gradient-to-b from-white/10 to-transparent"></div></div>'),jr=d('<div class="absolute top-0 left-0 w-full h-full z-20 bg-cyan-400/20 pointer-events-none animate-pulse"></div>'),Hr=d('<span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border border-slate-900"></span></span>'),Or=d('<header class="bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-40 shadow-2xl"><div class="max-w-6xl mx-auto px-2 sm:px-4 py-2 sm:py-3"><div class="flex items-center justify-between gap-2 sm:gap-4"><div class="flex items-center gap-1 sm:gap-3"><button class="p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all flex items-center gap-1 group" aria-label="Voltar para Dashboard" title="Voltar para Dashboard"><!> <!></button> <button class="flex items-center gap-2 group text-left" aria-label="Informações do Personagem"><div class="w-8 h-8 sm:w-10 sm:h-10 bg-indigo-600 rounded-lg sm:rounded-full border border-white/10 flex items-center justify-center text-sm sm:text-lg font-black shadow-lg shadow-indigo-500/20 group-hover:scale-105 transition-transform"> </div> <div class="hidden xs:block svelte-fpzs02"><div class="flex items-center gap-2"><h1 class="text-xs sm:text-sm font-bold text-white leading-tight truncate max-w-[80px] sm:max-w-none group-hover:text-indigo-400 transition-colors"> </h1></div> <p class="text-[10px] text-slate-500 font-medium"> </p></div></button></div> <button class="flex-1 max-w-md cursor-pointer group px-2 sm:px-0 text-left" aria-label="Estado de Saúde"><div class="flex justify-between text-[10px] sm:text-xs mb-1.5 px-1"><span><!></span> <span class="text-slate-400 font-mono flex items-center gap-1 group-hover:text-white transition-colors"><span> </span><span class="opacity-30">/</span><span class="text-white font-bold"> </span></span></div> <div class="h-3 sm:h-5 w-full bg-slate-950 rounded-full border border-white/5 relative overflow-hidden group-hover:border-white/20 transition-all shadow-inner"><div></div> <!> <!> <!></div></button> <div class="flex items-center gap-1 sm:gap-2"><button class="p-2 text-slate-400 hover:text-indigo-400 hover:bg-indigo-400/10 rounded-full transition-all" title="Descanso"><!></button> <button class="p-2 bg-indigo-600/10 text-indigo-400 border border-indigo-400/20 rounded-lg hover:bg-indigo-600 hover:text-white transition-all relative" title="Histórico"><!> <!></button> <button class="hidden sm:flex p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all" title="Configurações"><!></button></div></div></div></header>');function Rr(y,c){St(c,!1);const i=()=>oe(Le,"$character",o),p=()=>oe(Ga,"$isIncapacitated",o),m=()=>oe(Ba,"$isInjured",o),w=()=>oe(oa,"$damage",o),n=()=>oe(ga,"$effectiveMaxHealth",o),x=()=>oe(Wa,"$damagePercentage",o),U=()=>oe(Ya,"$tempHealth",o),L=()=>oe(Ka,"$rollHistory",o),[o,u]=Dt();function h(H){ut.update(R=>({...R,type:H,isOpen:!0}))}Ut();var O=Or(),_=t(O),b=t(_),l=t(b),A=t(l);A.__click=()=>Oa("/");var N=t(A);lr(N,{size:20,class:"group-hover:-translate-x-0.5 transition-transform"});var j=r(N,2);nr(j,{size:18,class:"hidden sm:block opacity-50"}),e(A);var B=r(A,2);B.__click=()=>h("character_info");var V=t(B),$=t(V,!0);e(V);var E=r(V,2),S=t(E),W=t(S),Z=t(W,!0);e(W),e(S);var Y=r(S,2),J=t(Y);e(Y),e(E),e(B),e(l);var f=r(l,2);f.__click=()=>h("health");var D=t(f),P=t(D),z=t(P);{var G=H=>{var R=et("INCAPACITADO");s(H,R)},ee=H=>{var R=T(),ve=k(R);{var We=Ye=>{var I=et("FERIDO");s(Ye,I)},tt=Ye=>{var I=T(),Ce=k(I);{var q=le=>{},me=le=>{var de=et("SAUDÁVEL");s(le,de)};v(Ce,le=>{w()>0?le(q):le(me,!1)},!0)}s(Ye,I)};v(ve,Ye=>{m()?Ye(We):Ye(tt,!1)},!0)}s(H,R)};v(z,H=>{p()?H(G):H(ee,!1)})}e(P);var K=r(P,2),F=t(K),ie=t(F,!0);e(F);var ae=r(F,2),Q=t(ae,!0);e(ae),e(K),e(D);var ne=r(D,2),Ke=t(ne),kt=r(Ke,2);{var ze=H=>{var R=Cr();C(()=>{ce(R,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10 ${p()?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":x()>=80?"bg-gradient-to-r from-red-600 to-rose-500":m()?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),or(R,`width: ${x()??""}%`)}),s(H,R)};v(kt,H=>{x()>0&&H(ze)})}var ue=r(kt,2);{var be=H=>{var R=Ir();s(H,R)};v(ue,H=>{w()===0&&H(be)})}var Pe=r(ue,2);{var ot=H=>{var R=jr();s(H,R)};v(Pe,H=>{U()>0&&H(ot)})}e(ne),e(f);var Me=r(f,2),ke=t(Me);ke.__click=()=>h("rest_confirm");var Be=t(ke);Ar(Be,{size:18}),e(ke);var ye=r(ke,2);ye.__click=()=>_a.update(H=>!H);var it=t(ye);dr(it,{size:18});var _e=r(it,2);{var Ae=H=>{var R=Hr();s(H,R)};v(_e,H=>{L().length>0&&H(Ae)})}e(ye);var ge=r(ye,2);ge.__click=()=>h("character_info");var Ee=t(ge);vr(Ee,{size:18}),e(ge),e(Me),e(b),e(_),e(O),C(H=>{g($,H),g(Z,i().name),g(J,`Nv ${i().level??""}`),ce(P,1,`font-black uppercase tracking-wider ${p()?"text-red-500 animate-pulse":m()?"text-amber-500":w()>0?"text-slate-400":"text-emerald-500"}`),ce(F,1,`${w()===0?"text-emerald-400":p()?"text-red-400":m()?"text-amber-400":"text-orange-400"} font-bold group-hover:text-red-300`),g(ie,w()),g(Q,n()),ce(Ke,1,`absolute top-0 left-0 h-full w-full ${w()===0?"bg-emerald-900/20":"bg-slate-900/50"}`)},[()=>i().name.charAt(0)]),s(y,O),Nt(),u()}It(["click"]);var qr=d('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Ur=d("<option> </option>"),Lr=d("<option> </option>"),Fr=d('<div class="grid grid-cols-3 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Dano</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Dano (d6)"/></label> <label class="block col-span-2"><span class="text-[10px] text-slate-500 uppercase font-bold">Traits</span> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Traits"/></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Empunhadura</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <label class="block col-span-2"><span class="text-[10px] text-slate-500 uppercase font-bold">Alcance</span> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Range"/></label></div>'),Vr=d('<div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Def. Fixa</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Fixed Def"/></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Def. Mod</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Mod Def"/></label></div>'),Gr=d('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),Br=d('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tipo</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Qtd</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Qtd"/></label></div> <!> <!> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),Wr=d('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Yr=d("<option> </option>"),Kr=d("<option> </option>"),Qr=d('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),Xr=d('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tier</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <div class="relative"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tradição</span> <input list="traditions" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Tradição"/></label> <datalist id="traditions"></datalist></div></div> <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700"><label for="maxCastings" class="text-xs text-slate-400 uppercase">Castings</label> <input id="maxCastings" type="number" class="w-16 bg-slate-800 border border-slate-600 rounded p-1 text-white text-center"/></div> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase">Efeito Associado</span> <button> </button></div> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),Jr=d('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Zr=d('<div class="flex items-center gap-2 border-l border-slate-700 pl-2"><label for="maxUses" class="text-xs text-slate-400 uppercase">Max Uses</label> <input id="maxUses" type="number" class="w-16 bg-slate-800 border border-slate-600 rounded p-1 text-white text-center"/></div>'),es=d('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),ts=d('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700"><input type="checkbox" id="isPassive" class="w-4 h-4 rounded bg-slate-800 border-slate-600 text-indigo-600 focus:ring-indigo-500"/> <label for="isPassive" class="text-xs text-slate-400 uppercase font-bold flex-1 cursor-pointer">Passivo / Ilimitado</label> <!></div> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase">Efeito Associado</span> <button> </button></div> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),as=d('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),rs=d('<div><label for="effectName" class="text-xs font-bold text-slate-400 uppercase">Nome</label> <input id="effectName" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/> <!></div>'),ss=d('<div class="text-center text-xs text-slate-500 italic mb-2">Nome e Descrição herdados do item pai.</div>'),os=d("<option> </option>"),is=d('<input type="number" class="bg-slate-900 border border-slate-700 rounded p-2 text-white"/>'),ls=d("<option> </option>"),ns=d('<div class="flex gap-1 items-center"><select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/3"></select> <select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4"><option>Add (+/-)</option><option>Set (=)</option><option>Mult (x)</option></select> <input type="number" class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4 text-center"/> <button class="text-slate-600 hover:text-red-400 p-1" aria-label="Remover Modificador"><!></button></div>'),ds=d('<div><label class="text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"></textarea></label></div>'),vs=d('<div class="space-y-4"><!> <div><label for="effectDuration" class="text-xs font-bold text-slate-400 uppercase">Duração</label> <div class="grid grid-cols-2 gap-2"><select id="effectDuration" class="bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"></select> <!></div></div> <div class="bg-slate-950 p-3 rounded border border-slate-800"><div class="flex justify-between items-center mb-2"><span class="text-xs font-bold text-indigo-400 uppercase">Modificadores</span> <button class="text-[10px] bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600 flex items-center gap-1"><!> Add</button></div> <div class="space-y-2"></div></div> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar Efeito</button></div>'),cs=d('<div class="space-y-4"><h3 class="text-white font-bold text-lg"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold">Valor Base <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div>'),ps=d('<div class="space-y-4"><h3 class="text-white font-bold text-lg uppercase"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold">Valor Base <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div>'),us=d('<div class="space-y-4"><div class="grid grid-cols-2 gap-4"><div><label class="text-xs text-slate-400 uppercase font-bold">Vida Normal <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs text-slate-400 uppercase font-bold">Vida Atual <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div><label class="text-xs text-red-400 uppercase font-bold">Dano <input type="number" class="w-full bg-slate-900 border border-red-900/50 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Atualizar</button></div>'),bs=d('<div class="space-y-4"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div class="grid grid-cols-2 gap-4"><div><label class="text-xs font-bold text-slate-400 uppercase">Nível <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs font-bold text-slate-400 uppercase">Ancestralidade <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div class="pt-2 border-t border-slate-700 space-y-3"><div><label class="text-[10px] font-bold text-slate-400 uppercase">Novice <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Expert <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Master <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded mt-2">Salvar</button></div>'),xs=d('<div class="mt-4 p-3 bg-green-900/20 border border-green-900/50 rounded-lg"><div class="flex items-center gap-2 mb-1 text-[10px] font-bold text-green-400 uppercase tracking-wider">Efeito Associado</div> <div class="text-xs text-green-200/70"> </div></div>'),fs=d('<button class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> APLICAR EFEITO E USAR</button> <button class="w-full bg-slate-700 hover:bg-slate-600 text-slate-300 font-bold py-2 rounded-lg text-sm transition-colors">USAR SEM APLICAR EFEITO</button>',1),_s=d('<button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> CONFIRMAR USO</button>'),gs=d('<div class="space-y-4"><div class="bg-slate-900 p-4 rounded-lg border border-slate-700"><p class="text-indigo-300 font-bold text-2xl mb-1 text-center"> </p> <p class="text-slate-400 text-sm italic mb-4 text-center"> </p> <!></div> <div class="flex flex-col gap-2 pt-2"><!> <button class="w-full text-slate-500 hover:text-slate-300 text-xs font-bold uppercase tracking-widest py-2 transition-colors mt-2">CANCELAR</button></div></div>'),ms=d('<div class="text-center space-y-6"><div class="flex justify-center"><!></div> <div><p class="text-lg text-white font-bold">Realizar Descanso?</p></div> <div class="flex gap-4 justify-center"><button class="px-6 py-2 rounded bg-slate-700 hover:bg-slate-600 text-white font-bold">Cancelar</button><button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold">Descansar</button></div></div>'),hs=d('<div class="space-y-4"><h3 class="text-center font-bold text-white uppercase mb-2">Rolagem</h3> <div class="bg-slate-900 p-4 rounded-lg border border-slate-700 text-center"><div class="flex justify-center items-center gap-6 mb-2"><button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-red-900 flex items-center justify-center text-slate-300 hover:text-white border border-slate-700" aria-label="Diminuir Modificador"><!></button> <span> </span> <button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-green-900 flex items-center justify-center text-slate-300 hover:text-white border border-slate-700" aria-label="Aumentar Modificador"><!></button></div> <div class="text-xs text-slate-500"> </div></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2">ROLAR</button></div>'),$s=d('<div class="space-y-6 text-center"><div class="bg-indigo-900/20 border border-indigo-500/30 p-4 rounded-xl"><h3 class="text-2xl font-bold text-white mb-1"> </h3> <p class="text-xs text-indigo-300 uppercase tracking-widest font-bold"> </p></div> <div class="grid grid-cols-2 gap-4"><button class="flex flex-col items-center justify-center p-6 bg-slate-900/80 hover:bg-indigo-600 border border-slate-700 hover:border-indigo-400 rounded-2xl transition-all group"><div class="p-3 rounded-full bg-slate-800 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white mb-3 shadow-lg"><!></div> <span class="font-black text-white tracking-widest uppercase text-sm">Ataque</span></button> <button class="flex flex-col items-center justify-center p-6 bg-slate-900/80 hover:bg-red-600 border border-slate-700 hover:border-red-400 rounded-2xl transition-all group"><div class="p-3 rounded-full bg-slate-800 text-red-500 group-hover:bg-red-500 group-hover:text-white mb-3 shadow-lg"><!></div> <span class="font-black text-white tracking-widest uppercase text-sm">Dano</span></button></div> <button class="text-slate-500 hover:text-slate-300 text-[10px] font-bold uppercase tracking-[0.2em]">Voltar</button></div>'),ys=d('<span class="text-[10px] text-slate-500 uppercase font-black tracking-widest">Passivo</span>'),ws=d("<span></span>"),ks=d('<span class="block text-[10px] text-slate-500 uppercase font-bold text-center">Cargas</span> <p class="flex items-center justify-center gap-1"></p> <span> </span>',1),As=d('<button class="w-full text-left p-4 bg-slate-900/50 border border-slate-700 rounded-xl hover:bg-yellow-900/20 hover:border-yellow-600/50 flex items-center justify-between transition-all group disabled:opacity-30 disabled:hover:bg-slate-900/50 disabled:hover:border-slate-700 active:scale-[0.99]"><div class="flex items-center gap-4"><div class="p-2.5 rounded-lg bg-slate-800 text-yellow-500 group-hover:scale-110 transition-transform"><!></div> <div><p class="text-white font-bold"> </p> <p class="text-[10px] text-slate-500 italic max-w-xs"> </p></div></div> <div class="text-right shrink-0"><!></div></button>'),zs=d('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm">Nenhum talento disponível.</p></div>'),Ms=d('<div class="space-y-3 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1"></div>'),Ss=d("<div></div>"),Ns=d('<button class="w-full text-left p-4 bg-slate-900/50 border border-slate-700 rounded-xl hover:bg-indigo-900/20 hover:border-indigo-600 text-indigo-400/0 hover:text-indigo-400 flex items-center justify-between transition-all group disabled:opacity-30 active:scale-[0.99]"><div class="flex items-center gap-4"><div class="p-2.5 rounded-lg bg-slate-800 text-indigo-400 group-hover:scale-110 transition-all border border-transparent group-hover:border-indigo-500/30"><!></div> <div><p class="text-white font-bold group-hover:text-indigo-300 transition-colors"> </p> <p class="text-[10px] text-slate-500 uppercase font-bold tracking-tight"> </p></div></div> <div class="text-right shrink-0"><span class="block text-[10px] text-slate-500 uppercase font-bold text-center mb-1">Casts</span> <div class="flex gap-0.5"></div></div></button>'),Ds=d('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm">Grimório vazio.</p></div>'),Es=d('<div class="space-y-3 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1"></div>'),Ps=d("<button> <!></button>"),Ts=d('<div class="text-xs"><span class="text-red-400 font-bold"> </span> <span class="text-slate-400"> </span></div>'),Cs=d('<p class="text-xs text-slate-600 italic text-center">Nenhuma aflição selecionada.</p>'),Is=d('<div class="grid grid-cols-2 gap-2"></div> <div class="mt-6 p-4 bg-slate-900/50 rounded-lg border border-slate-700"><p class="text-[10px] text-slate-500 uppercase font-bold mb-2">Resumo dos Efeitos</p> <div class="space-y-2"><!> <!></div></div>',1),js=d('<div class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-200" role="presentation"><div class="bg-slate-800 border border-slate-600 rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col" role="dialog" aria-modal="true"><div class="bg-slate-900 p-4 border-b border-slate-700 flex justify-between items-center shrink-0"><h3 class="font-bold text-lg text-white flex items-center gap-2"><!></h3> <button class="text-slate-400 hover:text-white transition-colors" aria-label="Fechar"><!></button></div> <div class="p-6 overflow-y-auto custom-scrollbar"><!></div></div></div>');function Hs(y,c){St(c,!0);const i=()=>oe(ut,"$modalState",U),p=()=>oe(oa,"$damage",U),m=()=>oe(ia,"$normalHealth",U),w=()=>oe(la,"$currentHealth",U),n=()=>oe(Le,"$character",U),x=()=>oe(Qa,"$activeEffects",U),[U,L]=Dt();let o=Zt(ba({})),u=Zt(ba({})),h=Zt(0),O=Zt(ba([]));pa(()=>{if(i().isOpen){const{type:f,data:D}=i();f==="item"&&yt(o,D?{...D}:{name:"",type:Ft.OTHER,quantity:1,price:0,description:"",availability:"Common",quality:"Standard"},!0),f==="spell"&&yt(o,D?{...D}:{name:"",tier:"Novice",tradition:"Destruction",type:"Attack",castings:1,maxCastings:1,description:"",effect:null},!0),f==="talent"&&yt(o,D?{...D}:{name:"",description:"",uses:0,maxUses:0,isPassive:!1,effect:null},!0),f==="attribute"&&yt(o,{...D},!0),f==="health"&&yt(o,{d:p(),nh:m(),ch:w()},!0),f==="character_info"&&yt(o,{name:n().name,level:n().level,ancestry:n().ancestry,novicePath:n().paths.novice,expertPath:n().paths.expert,masterPath:n().paths.master,normalHealth:m(),currentHealth:w()},!0),f==="stat"&&(D==="defense"?yt(o,{key:"naturalDefense",name:"Defesa Natural",value:n().naturalDefense},!0):D==="speed"&&yt(o,{key:"speed",name:"Velocidade",value:n().speed},!0)),f==="pre_roll"&&(yt(O,x().map(P=>P.id),!0),yt(h,0)),f==="effect"&&(D&&D.parentType?yt(u,D.parentData.effect||{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0):D?(yt(u,{...D},!0),Array.isArray(a(u).modifiers)||(a(u).modifiers=[])):yt(u,{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0))}});function _(){ut.update(f=>({...f,type:null,isOpen:!1,data:null}))}function b(){if(!a(o).name?.trim())return alert("Nome é obrigatório");const f={...a(o),id:a(o).id||Date.now()};i().data?$e.updateItem(f):$e.addItem(f),_()}function l(){if(!a(o).name?.trim())return alert("Nome é obrigatório");const f={...a(o),id:a(o).id||Date.now()};i().data?$e.updateSpell(f):$e.addSpell(f),_()}function A(){if(!a(o).name?.trim())return alert("Nome é obrigatório");const f={...a(o),id:a(o).id||Date.now()};a(o).isPassive?(f.maxUses=0,f.uses=0):!i().data&&a(o).maxUses>0&&(f.uses=a(o).maxUses),i().data?$e.updateTalent(f):$e.addTalent(f),_()}function N(){const f=a(u);if(!i().data?.parentType&&!f.name?.trim())return alert("Nome do efeito é obrigatório");const D={...f,initialRounds:f.duration==="ROUNDS"?f.roundsLeft:0};if(i().data?.parentType){const P={...i().data.parentData,effect:D};ut.update(z=>({...z,type:i().data.parentType,data:P}));return}f.id&&n().effects.some(P=>P.id===f.id)?$e.updateEffect(D):$e.addEffect({...D,id:Date.now(),isActive:!0}),_()}function j(){Le.update(f=>({...f,attributes:f.attributes.map(D=>D.key===a(o).key?{...D,value:parseInt(a(o).value)}:D)})),_()}function B(){oa.set(Math.max(0,parseInt(a(o).d))),ia.set(Math.max(1,parseInt(a(o).nh))),la.set(Math.max(0,parseInt(a(o).ch))),_()}function V(){Le.update(f=>({...f,name:a(o).name,level:parseInt(a(o).level)||0,ancestry:a(o).ancestry,paths:{novice:a(o).novicePath,expert:a(o).expertPath,master:a(o).masterPath}})),ia.set(parseInt(a(o).normalHealth)),la.set(parseInt(a(o).currentHealth)),_()}function $(){Le.update(f=>({...f,[a(o).key]:parseInt(a(o).value)||0})),_()}function E(f){f.target===f.currentTarget&&_()}function S(){a(u).modifiers=[...a(u).modifiers||[],{target:"str",type:Bt.ADD,value:1}]}function W(f){a(u).modifiers=a(u).modifiers.filter((D,P)=>P!==f)}var Z=T(),Y=k(Z);{var J=f=>{var D=js();D.__click=E;var P=t(D),z=t(P),G=t(z),ee=t(G);{var K=ze=>{var ue=et("Editor de Item");s(ze,ue)},F=ze=>{var ue=T(),be=k(ue);{var Pe=Me=>{var ke=et("Editar Magia");s(Me,ke)},ot=Me=>{var ke=T(),Be=k(ke);{var ye=_e=>{var Ae=et("Editar Talento");s(_e,Ae)},it=_e=>{var Ae=T(),ge=k(Ae);{var Ee=R=>{var ve=et("Gerenciar Efeito");s(R,ve)},H=R=>{var ve=T(),We=k(ve);{var tt=I=>{var Ce=et("Confirmar Rolagem");s(I,Ce)},Ye=I=>{var Ce=T(),q=k(Ce);{var me=de=>{var xe=et("Confirmar Conjuração");s(de,xe)},le=de=>{var xe=T(),He=k(xe);{var Je=M=>{var X=et("Confirmar Ativação");s(M,X)},gt=M=>{var X=T(),re=k(X);{var se=he=>{var Se=et("Grimório");s(he,Se)},te=he=>{var Se=T(),Ze=k(Se);{var Ie=je=>{var Qe=et("Seus Talentos");s(je,Qe)},mt=je=>{var Qe=T(),Et=k(Qe);{var lt=Oe=>{var at=et("Opções de Ataque");s(Oe,at)},Vt=Oe=>{var at=T(),Pt=k(at);{var nt=Re=>{var Xe=et("Informações do Personagem");s(Re,Xe)},jt=Re=>{var Xe=T(),At=k(Xe);{var ht=fe=>{var Ne=et("Vigor & Dano");s(fe,Ne)},Fe=fe=>{var Ne=T(),Tt=k(Ne);{var qe=dt=>{var Ct=et("Atributo");s(dt,Ct)},Jt=dt=>{var Ct=T(),qt=k(Ct);{var De=vt=>{var rt=et();C(()=>g(rt,a(o).name)),s(vt,rt)},Ht=vt=>{var rt=T(),Lt=k(rt);{var st=pt=>{var Ot=et("Gerenciar Aflições");s(pt,Ot)},ct=pt=>{var Ot=et("Informação");s(pt,Ot)};v(Lt,pt=>{i().type==="affliction"?pt(st):pt(ct,!1)},!0)}s(vt,rt)};v(qt,vt=>{i().type==="stat"?vt(De):vt(Ht,!1)},!0)}s(dt,Ct)};v(Tt,dt=>{i().type==="attribute"?dt(qe):dt(Jt,!1)},!0)}s(fe,Ne)};v(At,fe=>{i().type==="health"?fe(ht):fe(Fe,!1)},!0)}s(Re,Xe)};v(Pt,Re=>{i().type==="character_info"?Re(nt):Re(jt,!1)},!0)}s(Oe,at)};v(Et,Oe=>{i().type==="weapon_menu"?Oe(lt):Oe(Vt,!1)},!0)}s(je,Qe)};v(Ze,je=>{i().type==="select_talent"?je(Ie):je(mt,!1)},!0)}s(he,Se)};v(re,he=>{i().type==="cast_spell"?he(se):he(te,!1)},!0)}s(M,X)};v(He,M=>{i().type==="confirm_talent"?M(Je):M(gt,!1)},!0)}s(de,xe)};v(q,de=>{i().type==="confirm_spell"?de(me):de(le,!1)},!0)}s(I,Ce)};v(We,I=>{i().type==="pre_roll"?I(tt):I(Ye,!1)},!0)}s(R,ve)};v(ge,R=>{i().type==="effect"?R(Ee):R(H,!1)},!0)}s(_e,Ae)};v(Be,_e=>{i().type==="talent"?_e(ye):_e(it,!1)},!0)}s(Me,ke)};v(be,Me=>{i().type==="spell"?Me(Pe):Me(ot,!1)},!0)}s(ze,ue)};v(ee,ze=>{i().type==="item"?ze(K):ze(F,!1)})}e(G);var ie=r(G,2);ie.__click=_;var ae=t(ie);ya(ae,{size:20}),e(ie),e(z);var Q=r(z,2),ne=t(Q);{var Ke=ze=>{var ue=Br(),be=t(ue),Pe=t(be),ot=r(t(Pe));Te(ot),e(Pe);var Me=r(Pe,2);{var ke=q=>{var me=qr();s(q,me)};v(Me,q=>{a(o).name||q(ke)})}e(be);var Be=r(be,2),ye=t(Be),it=r(t(ye),2);Ve(it,21,()=>Object.values(Ft),Ge,(q,me)=>{var le=Ur(),de=t(le,!0);e(le);var xe={};C(()=>{g(de,a(me)),xe!==(xe=a(me))&&(le.value=(le.__value=a(me))??"")}),s(q,le)}),e(it),e(ye);var _e=r(ye,2),Ae=r(t(_e),2);Te(Ae),e(_e),e(Be);var ge=r(Be,2);{var Ee=q=>{var me=Fr(),le=t(me),de=r(t(le),2);Te(de),e(le);var xe=r(le,2),He=r(t(xe),2);Te(He),e(xe);var Je=r(xe,2),gt=r(t(Je),2);Ve(gt,21,()=>Object.values(ma),Ge,(re,se)=>{var te=Lr(),he=t(te,!0);e(te);var Se={};C(()=>{g(he,a(se)),Se!==(Se=a(se))&&(te.value=(te.__value=a(se))??"")}),s(re,te)}),e(gt),e(Je);var M=r(Je,2),X=r(t(M),2);Te(X),e(M),e(me),we(de,()=>a(o).damageDice,re=>a(o).damageDice=re),we(He,()=>a(o).traits,re=>a(o).traits=re),ra(gt,()=>a(o).grip,re=>a(o).grip=re),we(X,()=>a(o).range,re=>a(o).range=re),s(q,me)};v(ge,q=>{a(o).type===Ft.WEAPON&&q(Ee)})}var H=r(ge,2);{var R=q=>{var me=Vr(),le=t(me),de=r(t(le),2);Te(de),e(le);var xe=r(le,2),He=r(t(xe),2);Te(He),e(xe),e(me),we(de,()=>a(o).defenseFixed,Je=>a(o).defenseFixed=Je),we(He,()=>a(o).defenseMod,Je=>a(o).defenseMod=Je),s(q,me)};v(H,q=>{a(o).type===Ft.ARMOR&&q(R)})}var ve=r(H,2),We=r(t(ve));da(We),Ue(We,"rows",3),e(ve);var tt=r(ve,2),Ye=t(tt);{var I=q=>{var me=Gr();me.__click=()=>{$e.deleteItem(i().data.id),_()};var le=t(me);sa(le,{size:18}),e(me),s(q,me)};v(Ye,q=>{i().data&&q(I)})}var Ce=r(Ye,2);Ce.__click=b,e(tt),e(ue),we(ot,()=>a(o).name,q=>a(o).name=q),ra(it,()=>a(o).type,q=>a(o).type=q),we(Ae,()=>a(o).quantity,q=>a(o).quantity=q),we(We,()=>a(o).description,q=>a(o).description=q),s(ze,ue)},kt=ze=>{var ue=T(),be=k(ue);{var Pe=Me=>{var ke=Xr(),Be=t(ke),ye=t(Be),it=r(t(ye));Te(it),e(ye);var _e=r(ye,2);{var Ae=M=>{var X=Wr();s(M,X)};v(_e,M=>{a(o).name||M(Ae)})}e(Be);var ge=r(Be,2),Ee=t(ge),H=r(t(Ee),2);Ve(H,20,()=>["Novice","Expert","Master"],Ge,(M,X)=>{var re=Yr(),se=t(re,!0);e(re);var te={};C(()=>{g(se,X),te!==(te=X)&&(re.value=(re.__value=X)??"")}),s(M,re)}),e(H),e(Ee);var R=r(Ee,2),ve=t(R),We=r(t(ve),2);Te(We),e(ve);var tt=r(ve,2);Ve(tt,21,()=>Xa,Ge,(M,X)=>{var re=Kr(),se=t(re,!0);e(re);var te={};C(()=>{g(se,a(X)),te!==(te=a(X))&&(re.value=(re.__value=a(X))??"")}),s(M,re)}),e(tt),e(R),e(ge);var Ye=r(ge,2),I=r(t(Ye),2);Te(I),I.__input=()=>a(o).castings=a(o).maxCastings,e(Ye);var Ce=r(Ye,2),q=r(t(Ce),2);q.__click=()=>ut.update(M=>({...M,type:"effect",data:{parentType:"spell",parentData:a(o)}}));var me=t(q,!0);e(q),e(Ce);var le=r(Ce,2),de=r(t(le));da(de),Ue(de,"rows",4),e(le);var xe=r(le,2),He=t(xe);{var Je=M=>{var X=Qr();X.__click=()=>{$e.deleteSpell(i().data.id),_()};var re=t(X);sa(re,{size:18}),e(X),s(M,X)};v(He,M=>{i().data&&M(Je)})}var gt=r(He,2);gt.__click=l,e(xe),e(ke),C(()=>{ce(q,1,`text-[10px] px-2 py-1 rounded border ${a(o).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),g(me,a(o).effect?"Configurado":"Nenhum")}),we(it,()=>a(o).name,M=>a(o).name=M),ra(H,()=>a(o).tier,M=>a(o).tier=M),we(We,()=>a(o).tradition,M=>a(o).tradition=M),we(I,()=>a(o).maxCastings,M=>a(o).maxCastings=M),we(de,()=>a(o).description,M=>a(o).description=M),s(Me,ke)},ot=Me=>{var ke=T(),Be=k(ke);{var ye=_e=>{var Ae=ts(),ge=t(Ae),Ee=t(ge),H=r(t(Ee));Te(H),e(Ee);var R=r(Ee,2);{var ve=M=>{var X=Jr();s(M,X)};v(R,M=>{a(o).name||M(ve)})}e(ge);var We=r(ge,2),tt=t(We);Te(tt);var Ye=r(tt,4);{var I=M=>{var X=Zr(),re=r(t(X),2);Te(re),e(X),we(re,()=>a(o).maxUses,se=>a(o).maxUses=se),s(M,X)};v(Ye,M=>{a(o).isPassive||M(I)})}e(We);var Ce=r(We,2),q=r(t(Ce),2);q.__click=()=>ut.update(M=>({...M,type:"effect",data:{parentType:"talent",parentData:a(o)}}));var me=t(q,!0);e(q),e(Ce);var le=r(Ce,2),de=r(t(le));da(de),Ue(de,"rows",4),e(le);var xe=r(le,2),He=t(xe);{var Je=M=>{var X=es();X.__click=()=>{$e.deleteTalent(i().data.id),_()};var re=t(X);sa(re,{size:18}),e(X),s(M,X)};v(He,M=>{i().data&&M(Je)})}var gt=r(He,2);gt.__click=A,e(xe),e(Ae),C(()=>{ce(q,1,`text-[10px] px-2 py-1 rounded border ${a(o).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),g(me,a(o).effect?"Configurado":"Nenhum")}),we(H,()=>a(o).name,M=>a(o).name=M),ir(tt,()=>a(o).isPassive,M=>a(o).isPassive=M),we(de,()=>a(o).description,M=>a(o).description=M),s(_e,Ae)},it=_e=>{var Ae=T(),ge=k(Ae);{var Ee=R=>{var ve=vs(),We=t(ve);{var tt=se=>{var te=rs(),he=r(t(te),2);Te(he);var Se=r(he,2);{var Ze=Ie=>{var mt=as();s(Ie,mt)};v(Se,Ie=>{a(u).name||Ie(Ze)})}e(te),we(he,()=>a(u).name,Ie=>a(u).name=Ie),s(se,te)},Ye=se=>{var te=ss();s(se,te)};v(We,se=>{i().data?.parentType?se(Ye,!1):se(tt)})}var I=r(We,2),Ce=r(t(I),2),q=t(Ce);Ve(q,21,()=>Object.entries(ja),Ge,(se,te)=>{var he=fa(()=>za(a(te),2));let Se=()=>a(he)[0],Ze=()=>a(he)[1];var Ie=os(),mt=t(Ie,!0);e(Ie);var je={};C(()=>{g(mt,Ze()),je!==(je=Se())&&(Ie.value=(Ie.__value=Se())??"")}),s(se,Ie)}),e(q);var me=r(q,2);{var le=se=>{var te=is();Te(te),we(te,()=>a(u).roundsLeft,he=>a(u).roundsLeft=he),s(se,te)};v(me,se=>{a(u).duration==="ROUNDS"&&se(le)})}e(Ce),e(I);var de=r(I,2),xe=t(de),He=r(t(xe),2);He.__click=S;var Je=t(He);Mt(Je,{size:10}),pe(),e(He),e(xe);var gt=r(xe,2);Ve(gt,21,()=>a(u).modifiers,Ge,(se,te,he)=>{var Se=ns(),Ze=t(Se);Ve(Ze,21,()=>Object.entries(Ha),Ge,(nt,jt)=>{var Re=fa(()=>za(a(jt),2));let Xe=()=>a(Re)[0],At=()=>a(Re)[1];var ht=ls(),Fe=t(ht,!0);e(ht);var fe={};C(()=>{g(Fe,At()),fe!==(fe=Xe())&&(ht.value=(ht.__value=Xe())??"")}),s(nt,ht)}),e(Ze);var Ie=r(Ze,2),mt=t(Ie),je={},Qe=r(mt),Et={},lt=r(Qe),Vt={};e(Ie);var Oe=r(Ie,2);Te(Oe);var at=r(Oe,2);at.__click=()=>W(he);var Pt=t(at);sa(Pt,{size:12}),e(at),e(Se),C(()=>{je!==(je=Bt.ADD)&&(mt.value=(mt.__value=Bt.ADD)??""),Et!==(Et=Bt.SET)&&(Qe.value=(Qe.__value=Bt.SET)??""),Vt!==(Vt=Bt.MULT)&&(lt.value=(lt.__value=Bt.MULT)??""),Ue(Oe,"step",a(te).type===Bt.MULT?"0.1":"1")}),ra(Ze,()=>a(te).target,nt=>a(te).target=nt),ra(Ie,()=>a(te).type,nt=>a(te).type=nt),we(Oe,()=>a(te).value,nt=>a(te).value=nt),s(se,Se)}),e(gt),e(de);var M=r(de,2);{var X=se=>{var te=ds(),he=t(te),Se=r(t(he));da(Se),e(he),e(te),we(Se,()=>a(u).description,Ze=>a(u).description=Ze),s(se,te)};v(M,se=>{i().data?.parentType||se(X)})}var re=r(M,2);re.__click=N,e(ve),ra(q,()=>a(u).duration,se=>a(u).duration=se),s(R,ve)},H=R=>{var ve=T(),We=k(ve);{var tt=I=>{var Ce=cs(),q=t(Ce),me=t(q,!0);e(q);var le=r(q,2),de=t(le),xe=r(t(de));Te(xe),e(de),e(le);var He=r(le,2);He.__click=j,e(Ce),C(()=>g(me,a(o).name)),we(xe,()=>a(o).value,Je=>a(o).value=Je),s(I,Ce)},Ye=I=>{var Ce=T(),q=k(Ce);{var me=de=>{var xe=ps(),He=t(xe),Je=t(He,!0);e(He);var gt=r(He,2),M=t(gt),X=r(t(M));Te(X),e(M),e(gt);var re=r(gt,2);re.__click=$,e(xe),C(()=>g(Je,a(o).name)),we(X,()=>a(o).value,se=>a(o).value=se),s(de,xe)},le=de=>{var xe=T(),He=k(xe);{var Je=M=>{var X=us(),re=t(X),se=t(re),te=t(se),he=r(t(te));Te(he),e(te),e(se);var Se=r(se,2),Ze=t(Se),Ie=r(t(Ze));Te(Ie),e(Ze),e(Se),e(re);var mt=r(re,2),je=t(mt),Qe=r(t(je));Te(Qe),e(je),e(mt);var Et=r(mt,2);Et.__click=B,e(X),we(he,()=>a(o).nh,lt=>a(o).nh=lt),we(Ie,()=>a(o).ch,lt=>a(o).ch=lt),we(Qe,()=>a(o).d,lt=>a(o).d=lt),s(M,X)},gt=M=>{var X=T(),re=k(X);{var se=he=>{var Se=bs(),Ze=t(Se),Ie=t(Ze),mt=r(t(Ie));Te(mt),e(Ie),e(Ze);var je=r(Ze,2),Qe=t(je),Et=t(Qe),lt=r(t(Et));Te(lt),e(Et),e(Qe);var Vt=r(Qe,2),Oe=t(Vt),at=r(t(Oe));Te(at),e(Oe),e(Vt),e(je);var Pt=r(je,2),nt=t(Pt),jt=t(nt),Re=r(t(jt));Te(Re),e(jt),e(nt);var Xe=r(nt,2),At=t(Xe),ht=r(t(At));Te(ht),e(At),e(Xe);var Fe=r(Xe,2),fe=t(Fe),Ne=r(t(fe));Te(Ne),e(fe),e(Fe),e(Pt);var Tt=r(Pt,2);Tt.__click=V,e(Se),we(mt,()=>a(o).name,qe=>a(o).name=qe),we(lt,()=>a(o).level,qe=>a(o).level=qe),we(at,()=>a(o).ancestry,qe=>a(o).ancestry=qe),we(Re,()=>a(o).novicePath,qe=>a(o).novicePath=qe),we(ht,()=>a(o).expertPath,qe=>a(o).expertPath=qe),we(Ne,()=>a(o).masterPath,qe=>a(o).masterPath=qe),s(he,Se)},te=he=>{var Se=T(),Ze=k(Se);{var Ie=je=>{var Qe=gs(),Et=t(Qe),lt=t(Et),Vt=t(lt,!0);e(lt);var Oe=r(lt,2),at=t(Oe,!0);e(Oe);var Pt=r(Oe,2);{var nt=Fe=>{var fe=xs(),Ne=r(t(fe),2),Tt=t(Ne);e(Ne),e(fe),C(()=>g(Tt,`${i().data.effect.name??""}: ${i().data.effect.description??""}`)),s(Fe,fe)};v(Pt,Fe=>{i().data.effect&&Fe(nt)})}e(Et);var jt=r(Et,2),Re=t(jt);{var Xe=Fe=>{var fe=fs(),Ne=k(fe);Ne.__click=()=>{$e.applyEffectToCharacter(i().data.effect,i().data),i().type==="confirm_spell"?$e.commitSpellCast(i().data):$e.commitTalentUse(i().data)};var Tt=t(Ne);Ta(Tt,{size:18}),pe(),e(Ne);var qe=r(Ne,2);qe.__click=()=>{i().type==="confirm_spell"?$e.commitSpellCast(i().data):$e.commitTalentUse(i().data)},s(Fe,fe)},At=Fe=>{var fe=_s();fe.__click=()=>{i().type==="confirm_spell"?$e.commitSpellCast(i().data):$e.commitTalentUse(i().data)};var Ne=t(fe);Wt(Ne,{size:18}),pe(),e(fe),s(Fe,fe)};v(Re,Fe=>{i().data.effect?Fe(Xe):Fe(At,!1)})}var ht=r(Re,2);ht.__click=_,e(jt),e(Qe),C(()=>{g(Vt,i().data.name),g(at,i().data.description)}),s(je,Qe)},mt=je=>{var Qe=T(),Et=k(Qe);{var lt=Oe=>{var at=ms(),Pt=t(at),nt=t(Pt);sa(nt,{size:48,class:"text-indigo-400"}),e(Pt);var jt=r(Pt,4),Re=t(jt);Re.__click=_;var Xe=r(Re);Xe.__click=function(...At){$e.confirmRest?.apply(this,At)},e(jt),e(at),s(Oe,at)},Vt=Oe=>{var at=T(),Pt=k(at);{var nt=Re=>{var Xe=hs(),At=r(t(Xe),2),ht=t(At),Fe=t(ht);Fe.__click=()=>Ma(h,-1);var fe=t(Fe);va(fe,{size:24}),e(Fe);var Ne=r(Fe,2),Tt=t(Ne);e(Ne);var qe=r(Ne,2);qe.__click=()=>Ma(h);var Jt=t(qe);Mt(Jt,{size:24}),e(qe),e(ht);var dt=r(ht,2),Ct=t(dt,!0);e(dt),e(At);var qt=r(At,2);qt.__click=()=>$e.finalizeRoll(i().data,a(h),x().filter(De=>a(O).includes(De.id)).map(De=>De.name)),e(Xe),C(()=>{ce(Ne,1,`text-4xl font-bold ${a(h)>0?"text-green-400":a(h)<0?"text-red-400":"text-slate-500"}`),g(Tt,`${a(h)>0?"+":""}${a(h)??""}`),g(Ct,i().data.type==="weapon_damage"?"Dados Extras":"Boons/Banes")}),s(Re,Xe)},jt=Re=>{var Xe=T(),At=k(Xe);{var ht=fe=>{var Ne=$s(),Tt=t(Ne),qe=t(Tt),Jt=t(qe,!0);e(qe);var dt=r(qe,2),Ct=t(dt,!0);e(dt),e(Tt);var qt=r(Tt,2),De=t(qt);De.__click=()=>ut.update(pt=>({...pt,type:"pre_roll",data:{type:"weapon_attack",source:i().data}}));var Ht=t(De),vt=t(Ht);Wt(vt,{size:24}),e(Ht),pe(2),e(De);var rt=r(De,2);rt.__click=()=>ut.update(pt=>({...pt,type:"pre_roll",data:{type:"weapon_damage",source:i().data}}));var Lt=t(rt),st=t(Lt);Mt(st,{size:24}),e(Lt),pe(2),e(rt),e(qt);var ct=r(qt,2);ct.__click=_,e(Ne),C(()=>{g(Jt,i().data.name),g(Ct,i().data.traits||"Sem Atributos")}),s(fe,Ne)},Fe=fe=>{var Ne=T(),Tt=k(Ne);{var qe=dt=>{var Ct=Ms();Ve(Ct,5,()=>n().talents,Ge,(qt,De)=>{var Ht=As();Ht.__click=()=>ut.update($t=>({...$t,type:"confirm_talent",data:a(De)}));var vt=t(Ht),rt=t(vt),Lt=t(rt);Wt(Lt,{size:20}),e(rt);var st=r(rt,2),ct=t(st),pt=t(ct,!0);e(ct);var Ot=r(ct,2),ea=t(Ot,!0);e(Ot),e(st),e(vt);var Yt=r(vt,2),Kt=t(Yt);{var na=$t=>{var wt=ys();s($t,wt)},ta=$t=>{var wt=ks(),zt=r(k(wt),2);Ve(zt,21,()=>Array(a(De).maxUses),Ge,(Qt,Gt,Ua)=>{var Aa=ws();C(()=>ce(Aa,1,`w-1.5 h-1.5 rounded-full ${Ua<a(De).uses?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.5)]":"bg-slate-700"}`)),s(Qt,Aa)}),e(zt);var Rt=r(zt,2),aa=t(Rt);e(Rt),C(()=>{ce(Rt,1,`font-mono font-bold text-xs ${a(De).uses>0?"text-green-400":"text-red-400"}`),g(aa,`${a(De).uses??""}/${a(De).maxUses??""}`)}),s($t,wt)};v(Kt,$t=>{a(De).isPassive?$t(na):$t(ta,!1)})}e(Yt),e(Ht),C(()=>{Ht.disabled=!a(De).isPassive&&a(De).maxUses>0&&a(De).uses===0,g(pt,a(De).name),g(ea,a(De).description)}),s(qt,Ht)},qt=>{var De=zs(),Ht=t(De);Wt(Ht,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"}),pe(2),e(De),s(qt,De)}),e(Ct),s(dt,Ct)},Jt=dt=>{var Ct=T(),qt=k(Ct);{var De=vt=>{var rt=Es();Ve(rt,5,()=>n().spells,Ge,(Lt,st)=>{var ct=Ns();ct.__click=()=>ut.update(Rt=>({...Rt,type:"confirm_spell",data:a(st)}));var pt=t(ct),Ot=t(pt),ea=t(Ot);ua(ea,{size:20}),e(Ot);var Yt=r(Ot,2),Kt=t(Yt),na=t(Kt,!0);e(Kt);var ta=r(Kt,2),$t=t(ta);e(ta),e(Yt),e(pt);var wt=r(pt,2),zt=r(t(wt),2);Ve(zt,21,()=>Array(a(st).maxCastings),Ge,(Rt,aa,Qt)=>{var Gt=Ss();C(()=>ce(Gt,1,`w-3 h-1 rounded-full ${Qt<a(st).castings?"bg-indigo-500":"bg-slate-700"}`)),s(Rt,Gt)}),e(zt),e(wt),e(ct),C(()=>{ct.disabled=a(st).castings===0,g(na,a(st).name),g($t,`${a(st).tradition??""} • ${a(st).tier??""}`)}),s(Lt,ct)},Lt=>{var st=Ds(),ct=t(st);ua(ct,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"}),pe(2),e(st),s(Lt,st)}),e(rt),s(vt,rt)},Ht=vt=>{var rt=T(),Lt=k(rt);{var st=ct=>{var pt=Is(),Ot=k(pt);Ve(Ot,21,()=>Object.keys(Ea),Ge,($t,wt)=>{var zt=Ps();zt.__click=()=>$e.toggleAffliction(a(wt));var Rt=t(zt),aa=r(Rt);{var Qt=Gt=>{Ta(Gt,{size:14})};v(aa,Gt=>{n().afflictions.includes(a(wt))&&Gt(Qt)})}e(zt),C(Gt=>{ce(zt,1,`p-3 rounded-lg border text-sm font-bold transition-all text-left flex justify-between items-center ${Gt??""}`),g(Rt,`${a(wt)??""} `)},[()=>n().afflictions.includes(a(wt))?"bg-red-900/40 border-red-500 text-red-200 shadow-lg shadow-red-900/20":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-500 hover:bg-slate-850"]),s($t,zt)}),e(Ot);var ea=r(Ot,2),Yt=r(t(ea),2),Kt=t(Yt);Ve(Kt,1,()=>n().afflictions,Ge,($t,wt)=>{var zt=Ts(),Rt=t(zt),aa=t(Rt);e(Rt);var Qt=r(Rt,2),Gt=t(Qt,!0);e(Qt),e(zt),C(()=>{g(aa,`${a(wt)??""}:`),g(Gt,Ea[a(wt)]?.effect||"")}),s($t,zt)});var na=r(Kt,2);{var ta=$t=>{var wt=Cs();s($t,wt)};v(na,$t=>{n().afflictions.length===0&&$t(ta)})}e(Yt),e(ea),s(ct,pt)};v(Lt,ct=>{i().type==="affliction"&&ct(st)},!0)}s(vt,rt)};v(qt,vt=>{i().type==="cast_spell"?vt(De):vt(Ht,!1)},!0)}s(dt,Ct)};v(Tt,dt=>{i().type==="select_talent"?dt(qe):dt(Jt,!1)},!0)}s(fe,Ne)};v(At,fe=>{i().type==="weapon_menu"?fe(ht):fe(Fe,!1)},!0)}s(Re,Xe)};v(Pt,Re=>{i().type==="pre_roll"?Re(nt):Re(jt,!1)},!0)}s(Oe,at)};v(Et,Oe=>{i().type==="rest_confirm"?Oe(lt):Oe(Vt,!1)},!0)}s(je,Qe)};v(Ze,je=>{i().type==="confirm_spell"||i().type==="confirm_talent"?je(Ie):je(mt,!1)},!0)}s(he,Se)};v(re,he=>{i().type==="character_info"?he(se):he(te,!1)},!0)}s(M,X)};v(He,M=>{i().type==="health"?M(Je):M(gt,!1)},!0)}s(de,xe)};v(q,de=>{i().type==="stat"?de(me):de(le,!1)},!0)}s(I,Ce)};v(We,I=>{i().type==="attribute"?I(tt):I(Ye,!1)},!0)}s(R,ve)};v(ge,R=>{i().type==="effect"?R(Ee):R(H,!1)},!0)}s(_e,Ae)};v(Be,_e=>{i().type==="talent"?_e(ye):_e(it,!1)},!0)}s(Me,ke)};v(be,Me=>{i().type==="spell"?Me(Pe):Me(ot,!1)},!0)}s(ze,ue)};v(ne,ze=>{i().type==="item"?ze(Ke):ze(kt,!1)})}e(Q),e(P),e(D),s(f,D)};v(Y,f=>{i().isOpen&&f(J)})}s(y,Z),Nt(),L()}It(["click","input"]);var Os=d("<div> </div>"),Rs=d('<div class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 text-center transition-all hover:bg-slate-800 active:scale-[0.98] group relative shadow-lg shadow-black/20 cursor-pointer" role="button" tabindex="0"><div class="py-2.5 px-2"><div class="text-[9px] uppercase text-slate-500 font-black tracking-widest group-hover:text-indigo-400 transition-colors mb-1"> </div> <div class="flex items-center justify-center gap-1.5 mb-1.5"><div class="text-2xl font-black text-white leading-none"> </div> <!></div> <div class="inline-flex px-2 py-0.5 bg-indigo-500/10 rounded-lg"><div class="text-xs text-indigo-400 font-black tracking-tight"> </div></div></div> <button class="absolute top-1.5 right-1.5 p-1 text-slate-700 hover:text-white hover:bg-white/5 rounded-md transition-all"><!></button></div>'),qs=d('<div class="grid grid-cols-2 gap-3"></div>');function Us(y,c){St(c,!1);const i=()=>oe(Le,"$character",m),p=()=>oe(Ja,"$derivedStats",m),[m,w]=Dt();function n(o,u){ut.update(h=>({...h,type:o,isOpen:!0,data:u}))}function x(o){n("pre_roll",{type:"attribute",source:o})}function U(o,u){o.stopPropagation(),n("attribute",u)}Ut();var L=qs();Ve(L,5,()=>i().attributes,Ge,(o,u)=>{var h=Rs();h.__click=()=>x(a(u));var O=t(h),_=t(O),b=t(_,!0);e(_);var l=r(_,2),A=t(l),N=t(A,!0);e(A);var j=r(A,2);{var B=Z=>{var Y=Os(),J=t(Y);e(Y),C(()=>{ce(Y,1,`text-[11px] font-bold ${p()[a(u).key]>a(u).value?"text-green-500 bg-green-500/10":"text-red-500 bg-red-500/10"} px-1 rounded-md`),g(J,`${p()[a(u).key]>a(u).value?"+":""}${p()[a(u).key]-a(u).value}`)}),s(Z,Y)};v(j,Z=>{p()[a(u).key]!==a(u).value&&Z(B)})}e(l);var V=r(l,2),$=t(V),E=t($);e($),e(V),e(O);var S=r(O,2);S.__click=Z=>U(Z,a(u));var W=t(S);ca(W,{size:12}),e(S),e(h),C(()=>{Ue(h,"aria-label",`Rolar teste de ${a(u).name}`),g(b,a(u).name),g(N,p()[a(u).key]),g(E,`mod +${p()[a(u).key]-10}`),Ue(S,"aria-label",`Editar ${a(u).name??""}`)}),s(o,h)}),e(L),s(y,L),Nt(),w()}It(["click"]);var Ls=d('<div class="p-1 bg-red-500/10 rounded"><!></div>'),Fs=d('<div class="space-y-3"><div class="grid grid-cols-2 gap-3"><button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> Defesa</div> <div class="flex items-baseline gap-1"><span class="text-3xl font-black text-white leading-none"> </span> <span class="text-[10px] text-slate-600 font-bold uppercase">ALVO</span></div></button> <button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> Speed</div> <div class="flex items-baseline justify-between w-full"><span> </span> <!></div></button></div> <div class="bg-slate-900 rounded-2xl border border-slate-800 p-4 shadow-lg shadow-black/20"><div class="flex items-center justify-between mb-3"><span class="text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] flex items-center gap-2"><!> Bônus de Dano</span> <div class="px-2 py-0.5 bg-indigo-500/10 rounded-full"><span class="text-[10px] text-indigo-400 font-black uppercase tracking-tighter">Adicional</span></div></div> <div class="flex items-center justify-between bg-black/40 rounded-xl p-1.5 border border-white/5"><button class="w-10 h-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg transition-all active:scale-90" aria-label="Diminuir Dano Bônus"><!></button> <div class="flex flex-col items-center"><span class="text-2xl font-black text-white leading-none tracking-tighter"> </span> <span class="text-[9px] text-slate-600 font-bold uppercase mt-1">Dados Extras</span></div> <button class="w-10 h-10 flex items-center justify-center bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-all active:scale-90 shadow-lg shadow-indigo-500/20" aria-label="Aumentar Dano Bônus"><!></button></div></div></div>');function Vs(y,c){St(c,!1);const i=()=>oe(ha,"$totalDefense",w),p=()=>oe(Za,"$effectiveSpeed",w),m=()=>oe(Le,"$character",w),[w,n]=Dt();function x(ae,Q){ut.update(ne=>({...ne,type:ae,isOpen:!0,data:Q}))}function U(){Le.update(ae=>({...ae,bonusDamage:Math.max(0,(ae.bonusDamage||0)-1)}))}function L(){Le.update(ae=>({...ae,bonusDamage:(ae.bonusDamage||0)+1}))}Ut();var o=Fs(),u=t(o),h=t(u);h.__click=()=>x("stat","defense");var O=t(h),_=t(O);ur(_,{size:12}),pe(),e(O);var b=r(O,2),l=t(b),A=t(l,!0);e(l),pe(2),e(b),e(h);var N=r(h,2);N.__click=()=>x("stat","speed");var j=t(N),B=t(j);Wt(B,{size:12}),pe(),e(j);var V=r(j,2),$=t(V),E=t($,!0);e($);var S=r($,2);{var W=ae=>{var Q=Ls(),ne=t(Q);ka(ne,{size:10,class:"text-red-500"}),e(Q),s(ae,Q)};v(S,ae=>{p()<m().speed&&ae(W)})}e(V),e(N),e(u);var Z=r(u,2),Y=t(Z),J=t(Y),f=t(J);wa(f,{size:14,class:"text-indigo-500"}),pe(),e(J),pe(2),e(Y);var D=r(Y,2),P=t(D);P.__click=U;var z=t(P);va(z,{size:18}),e(P);var G=r(P,2),ee=t(G),K=t(ee);e(ee),pe(2),e(G);var F=r(G,2);F.__click=L;var ie=t(F);Mt(ie,{size:18}),e(F),e(D),e(Z),e(o),C(()=>{g(A,i()),ce($,1,`text-3xl font-black ${p()<m().speed?"text-red-400":"text-white"} leading-none`),g(E,p()),g(K,`${(m().bonusDamage||0)??""}d6`)}),s(y,o),Nt(),n()}It(["click"]);var Gs=d('<div class="bg-slate-900 p-3 rounded-xl border border-slate-800"><div class="flex justify-between items-center mb-2"><h4 class="text-[10px] font-bold text-slate-400 uppercase flex items-center gap-1"><!> Moedas</h4></div> <div class="grid grid-cols-3 gap-2 text-center"><div class="bg-slate-950 rounded p-1 border border-slate-800"><div class="text-[9px] text-yellow-500 font-bold uppercase">GP</div> <div class="flex items-center justify-between px-1"><button class="text-slate-600 hover:text-red-400" aria-label="Diminuir GP"><!></button> <span class="text-white font-mono text-sm"> </span> <button class="text-slate-600 hover:text-green-400" aria-label="Aumentar GP"><!></button></div></div> <div class="bg-slate-950 rounded p-1 border border-slate-800"><div class="text-[9px] text-slate-300 font-bold uppercase">SP</div> <div class="flex items-center justify-between px-1"><button class="text-slate-600 hover:text-red-400" aria-label="Diminuir SP"><!></button> <span class="text-white font-mono text-sm"> </span> <button class="text-slate-600 hover:text-green-400" aria-label="Aumentar SP"><!></button></div></div> <div class="bg-slate-950 rounded p-1 border border-slate-800"><div class="text-[9px] text-orange-700 font-bold uppercase">CP</div> <div class="flex items-center justify-between px-1"><button class="text-slate-600 hover:text-red-400" aria-label="Diminuir CP"><!></button> <span class="text-white font-mono text-sm"> </span> <button class="text-slate-600 hover:text-green-400" aria-label="Aumentar CP"><!></button></div></div></div></div>');function Bs(y,c){St(c,!1);const i=()=>oe(Le,"$character",p),[p,m]=Dt(),{updateCurrency:w}=$e;Ut();var n=Gs(),x=t(n),U=t(x),L=t(U);mr(L,{size:12}),pe(),e(U),e(x);var o=r(x,2),u=t(o),h=r(t(u),2),O=t(h);O.__click=()=>w("gp",-1);var _=t(O);va(_,{size:10}),e(O);var b=r(O,2),l=t(b,!0);e(b);var A=r(b,2);A.__click=()=>w("gp",1);var N=t(A);Mt(N,{size:10}),e(A),e(h),e(u);var j=r(u,2),B=r(t(j),2),V=t(B);V.__click=()=>w("sp",-1);var $=t(V);va($,{size:10}),e(V);var E=r(V,2),S=t(E,!0);e(E);var W=r(E,2);W.__click=()=>w("sp",1);var Z=t(W);Mt(Z,{size:10}),e(W),e(B),e(j);var Y=r(j,2),J=r(t(Y),2),f=t(J);f.__click=()=>w("cp",-1);var D=t(f);va(D,{size:10}),e(f);var P=r(f,2),z=t(P,!0);e(P);var G=r(P,2);G.__click=()=>w("cp",1);var ee=t(G);Mt(ee,{size:10}),e(G),e(J),e(Y),e(o),e(n),C(()=>{g(l,i().currency.gp),g(S,i().currency.sp),g(z,i().currency.cp)}),s(y,n),Nt(),m()}It(["click"]);var Ws=d('<span class="bg-slate-950 border border-slate-700 text-slate-300 px-1.5 py-0.5 rounded text-[10px] flex items-center gap-1 group cursor-default"> <button class="text-slate-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity"><!></button></span>'),Ys=d('<div class="bg-slate-900 p-3 rounded-xl border border-slate-800"><div class="flex justify-between items-center mb-2"><h4 class="text-[10px] font-bold text-slate-400 uppercase flex items-center gap-1"><!> Idiomas</h4></div> <div class="flex flex-wrap gap-1 mb-2"></div> <div class="relative"><input type="text" placeholder="Novo..." class="w-full bg-slate-950 border border-slate-700 rounded px-2 py-1 text-[10px] text-white focus:outline-none focus:border-indigo-500" aria-label="Adicionar novo idioma"/> <!></div></div>');function Ks(y,c){St(c,!1);const i=()=>oe(Le,"$character",p),[p,m]=Dt(),{addLanguage:w,removeLanguage:n}=$e;function x(l){if(l.key==="Enter"){const A=l.target,N=A.value.trim();N!==""&&(w(N),A.value="")}}Ut();var U=Ys(),L=t(U),o=t(L),u=t(o);kr(u,{size:12}),pe(),e(o),e(L);var h=r(L,2);Ve(h,5,()=>i().languages,Ge,(l,A,N)=>{var j=Ws(),B=t(j),V=r(B);V.__click=()=>n(N);var $=t(V);ya($,{size:10}),e(V),e(j),C(()=>{g(B,`${a(A)??""} `),Ue(V,"aria-label",`Remover idioma ${a(A)??""}`)}),s(l,j)}),e(h);var O=r(h,2),_=t(O);_.__keydown=x;var b=r(_,2);Mt(b,{size:12,class:"absolute right-2 top-1.5 text-slate-600 pointer-events-none"}),e(O),e(U),s(y,U),Nt(),m()}It(["click","keydown"]);var Qs=d('<span class="text-xs text-slate-500 italic">Nenhuma aflição ativa.</span>'),Xs=d('<div class="group relative"><div class="text-xs bg-red-900/30 border border-red-700 text-red-200 px-2 py-1 rounded flex items-center gap-1 cursor-help" title="Aflição Ativa"> <button class="ml-1 text-red-400 hover:text-white"><!></button></div></div>'),Js=d('<div class="bg-slate-900 p-3 rounded-xl border border-slate-800"><div class="flex justify-between items-center mb-2"><h4 class="text-[10px] font-bold text-slate-400 uppercase flex items-center gap-1"><!> Aflições</h4> <button class="text-slate-500 hover:text-white" aria-label="Adicionar Aflição"><!></button></div> <div class="flex flex-wrap gap-2"><!> <!></div></div>');function Zs(y,c){St(c,!1);const i=()=>oe(Le,"$character",p),[p,m]=Dt(),{toggleAffliction:w}=$e;function n(){ut.update(N=>({...N,type:"affliction",isOpen:!0}))}function x(N,j){N.stopPropagation(),w(j)}Ut();var U=Js(),L=t(U),o=t(L),u=t(o);ka(u,{size:12}),pe(),e(o);var h=r(o,2);h.__click=n;var O=t(h);Mt(O,{size:14}),e(h),e(L);var _=r(L,2),b=t(_);{var l=N=>{var j=Qs();s(N,j)};v(b,N=>{i().afflictions.length===0&&N(l)})}var A=r(b,2);Ve(A,1,()=>i().afflictions,Ge,(N,j)=>{var B=Xs(),V=t(B),$=t(V),E=r($);E.__click=W=>x(W,a(j));var S=t(E);ya(S,{size:10}),e(E),e(V),e(B),C(()=>{g($,`${a(j)??""} `),Ue(E,"aria-label",`Remover aflição ${a(j)??""}`)}),s(N,B)}),e(_),e(U),s(y,U),Nt(),m()}It(["click"]);var eo=d('<div class="absolute inset-x-0 bottom-0 h-0.5 bg-indigo-400 shadow-[0_0_8px_rgba(129,140,248,0.5)]"></div>'),to=d('<button role="tab"><!> <span class="tracking-widest uppercase"> </span> <!></button>'),ao=d('<div class="flex bg-slate-900/80 backdrop-blur-md border-b border-slate-800 overflow-x-auto no-scrollbar sticky top-[60px] z-30" role="tablist"></div> <div class="h-4 bg-slate-950"></div>',1);function ro(y,c){St(c,!1);const i=()=>oe($a,"$activeTab",p),[p,m]=Dt(),w=[{id:"acoes",label:"AÇÕES",icon:wa},{id:"magias",label:"MAGIAS",icon:_r},{id:"talentos",label:"TALENTOS",icon:Wt},{id:"equipamento",label:"ITENS",icon:xr},{id:"notas",label:"NOTAS",icon:yr},{id:"efeitos",label:"EFEITOS",icon:ka}];Ut();var n=ao(),x=k(n);Ve(x,5,()=>w,Ge,(U,L)=>{var o=to();o.__click=()=>{$a.set(a(L).id)};var u=t(o);{let l=La(()=>i()===a(L).id?"text-indigo-400":"text-slate-500");a(L).icon(u,{size:14,get class(){return`${a(l)??""} group-hover:scale-110 transition-transform`}})}var h=r(u,2),O=t(h,!0);e(h);var _=r(h,2);{var b=l=>{var A=eo();s(l,A)};v(_,l=>{i()===a(L).id&&l(b)})}e(o),C(()=>{ce(o,1,`px-5 lg:px-6 py-4 flex items-center gap-2 font-black text-xs transition-all whitespace-nowrap border-b-2 relative group ${i()===a(L).id?"text-indigo-400 border-indigo-500 bg-indigo-500/5":"text-slate-500 border-transparent hover:text-slate-300"}`),Ue(o,"aria-selected",i()===a(L).id),g(O,a(L).label)}),s(U,o)}),e(x),pe(2),s(y,n),Nt(),m()}It(["click"]);var so=d('<span class="text-[10px] bg-indigo-900 text-indigo-200 px-1 rounded uppercase"> </span>'),oo=d('<button class="text-xs bg-red-900/50 text-red-200 px-3 py-1 rounded border border-red-800 hover:bg-red-900 flex items-center gap-1"><!> </button>'),io=d('<div class="flex flex-col sm:flex-row justify-between p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-900 cursor-pointer transition-colors gap-4 active:scale-[0.99]" role="button" tabindex="0"><div class="flex items-start gap-3"><div class="bg-slate-800 p-2 rounded text-slate-400 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2"> <!></p> <p class="text-xs text-slate-500"> </p></div></div> <div class="flex flex-col items-end gap-2"><div class="flex items-center gap-4 bg-slate-900 p-2 rounded-lg border border-slate-800"><div class="text-center px-2"><span class="block text-[10px] font-bold text-slate-500 uppercase">Dano</span> <span class="text-xl font-mono text-white font-bold"> </span></div></div> <!></div></div>'),lo=d('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-500 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-indigo-900/50 p-2 rounded text-indigo-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-indigo-300 transition-colors">Conjurar Magia</p> <p class="text-xs text-slate-500">Selecione uma magia do grimório para lançar.</p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-indigo-400 uppercase tracking-wider border border-slate-800">Selecionar</div></div></div>'),no=d('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-yellow-600 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-yellow-900/30 p-2 rounded text-yellow-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-yellow-300 transition-colors">Usar Talento</p> <p class="text-xs text-slate-500">Ative uma habilidade ou talento especial.</p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-yellow-500 uppercase tracking-wider border border-slate-800">Selecionar</div></div></div>'),vo=d('<div class="space-y-4"><!> <!> <!></div>');function co(y,c){St(c,!1);const i=()=>oe(Le,"$character",p),[p,m]=Dt(),{useConsumable:w}=$e;function n(_,b=null){ut.update(l=>({...l,type:_,isOpen:!0,data:b}))}function x(_,b){_.stopPropagation(),w(b)}Ut();var U=vo(),L=t(U);Ve(L,1,()=>i().equipment.filter(_=>_.type===Ft.WEAPON&&_.equippedState||_.type===Ft.EXPLOSIVE),Ge,(_,b)=>{var l=io();l.__click=()=>n("weapon_menu",a(b));var A=t(l),N=t(A),j=t(N);wa(j,{size:20}),e(N);var B=r(N,2),V=t(B),$=t(V),E=r($);{var S=ee=>{var K=so(),F=t(K,!0);e(K),C(()=>g(F,a(b).equippedState)),s(ee,K)};v(E,ee=>{a(b).equippedState&&ee(S)})}e(V);var W=r(V,2),Z=t(W);e(W),e(B),e(A);var Y=r(A,2),J=t(Y),f=t(J),D=r(t(f),2),P=t(D);e(D),e(f),e(J);var z=r(J,2);{var G=ee=>{var K=oo();K.__click=ae=>x(ae,a(b));var F=t(K);fr(F,{size:12});var ie=r(F);e(K),C(()=>{Ue(K,"aria-label",`Usar ${a(b).name??""}`),g(ie,` Throw (${a(b).quantity??""})`)}),s(ee,K)};v(z,ee=>{a(b).type===Ft.EXPLOSIVE&&ee(G)})}e(Y),e(l),C(()=>{Ue(l,"aria-label",`Opções para ${a(b).name??""}`),g($,`${a(b).name??""} `),g(Z,`${(a(b).traits||"-")??""} • ${(a(b).range||"-")??""}`),g(P,`${(a(b).damageDice||0)??""}d6`)}),s(_,l)});var o=r(L,2);{var u=_=>{var b=lo();b.__click=()=>n("cast_spell");var l=t(b),A=t(l),N=t(A);ua(N,{size:20}),e(A),pe(2),e(l),pe(2),e(b),s(_,b)};v(o,_=>{i().spells.length>0&&_(u)})}var h=r(o,2);{var O=_=>{var b=no();b.__click=()=>n("select_talent");var l=t(b),A=t(l),N=t(A);Wt(N,{size:20}),e(A),pe(2),e(l),pe(2),e(b),s(_,b)};v(h,_=>{i().talents.length>0&&_(O)})}e(U),s(y,U),Nt(),m()}It(["click"]);var po=d('<div class="p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl group hover:border-indigo-500/50 transition-all duration-300"><div class="flex justify-between items-start mb-3"><div><div class="font-bold text-white text-lg group-hover:text-indigo-300 transition-colors uppercase tracking-tight"> </div> <div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div></div> <button class="text-slate-600 hover:text-white p-1 hover:bg-slate-800 rounded-md transition-all"><!></button></div> <div class="text-sm text-slate-400 mb-4 line-clamp-2 leading-relaxed h-10"> </div> <div class="flex items-center justify-between bg-slate-950/50 p-3 rounded-xl border border-slate-800/50"><span class="text-[10px] font-black text-slate-500 uppercase tracking-widest">Usos Mágicos</span> <div class="flex items-center gap-3"><span> </span> <button class="bg-indigo-600 disabled:opacity-20 text-white text-[10px] font-black px-4 py-1.5 rounded-lg hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-900/40 active:scale-95 uppercase tracking-wider">Cast</button></div></div></div>'),uo=d('<div class="space-y-3"><h4 class="text-[10px] font-black text-indigo-400 uppercase tracking-[0.2em] flex items-center gap-2"><span class="w-8 h-px bg-indigo-500/30"></span> <span class="flex-1 h-px bg-indigo-500/30"></span></h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div>'),bo=d('<div class="text-center py-16 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium">Seu grimório está vazio.</p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> Adicionar Primeira Magia</button></div>'),xo=d('<div class="space-y-8"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight">Grimório Arcano</h3> <p class="text-xs text-slate-500">Seus feitiços e magias conhecidas.</p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95" aria-label="Adicionar Nova Magia"><!> Nova Magia</button></div> <!> <!></div>');function fo(y,c){St(c,!1);const i=()=>oe(Le,"$character",p),[p,m]=Dt();function w(O,_=null){ut.update(b=>({...b,type:O,isOpen:!0,data:_}))}Ut();var n=xo(),x=t(n),U=r(t(x),2);U.__click=()=>w("spell");var L=t(U);Mt(L,{size:16}),pe(),e(U),e(x);var o=r(x,2);Ve(o,0,()=>["Novice","Expert","Master"],Ge,(O,_)=>{var b=T(),l=k(b);{var A=N=>{var j=uo(),B=t(j),V=r(t(B));pe(),e(B);var $=r(B,2);Ve($,5,()=>i().spells.filter(E=>E.tier===_),Ge,(E,S)=>{var W=po(),Z=t(W),Y=t(Z),J=t(Y),f=t(J,!0);e(J);var D=r(J,2),P=t(D);e(D),e(Y);var z=r(Y,2);z.__click=()=>w("spell",a(S));var G=t(z);ca(G,{size:14}),e(z),e(Z);var ee=r(Z,2),K=t(ee,!0);e(ee);var F=r(ee,2),ie=r(t(F),2),ae=t(ie),Q=t(ae);e(ae);var ne=r(ae,2);ne.__click=()=>w("confirm_spell",a(S)),e(ie),e(F),e(W),C(()=>{g(f,a(S).name),g(P,`${a(S).tradition??""} • ${a(S).type??""}`),Ue(z,"aria-label",`Editar ${a(S).name??""}`),g(K,a(S).description),ce(ae,1,`text-sm font-mono font-bold ${a(S).castings===0?"text-red-500":"text-indigo-400"}`),g(Q,`${a(S).castings??""}/${a(S).maxCastings??""}`),ne.disabled=a(S).castings===0}),s(E,W)}),e($),e(j),C(()=>g(V,` ${_??""} Spells `)),s(N,j)};v(l,N=>{i().spells.some(j=>j.tier===_)&&N(A)})}s(O,b)});var u=r(o,2);{var h=O=>{var _=bo(),b=t(_);ua(b,{size:48,class:"mx-auto text-slate-800 mb-3"});var l=r(b,4);l.__click=()=>w("spell");var A=t(l);Mt(A,{size:14}),pe(),e(l),e(_),s(O,_)};v(u,O=>{i().spells.length===0&&O(h)})}e(n),s(y,n),Nt(),m()}It(["click"]);var _o=d('<div class="text-2xl font-mono font-bold text-white leading-tight"> </div>'),go=d('<div class="text-sm font-bold text-slate-500 uppercase tracking-tighter mt-1 italic">Fora de Combate</div>'),mo=d('<div class="text-center text-slate-500 italic py-4">Nenhum efeito ativo.</div>'),ho=d("<span> </span>"),$o=d('<div class="flex flex-wrap gap-1 mt-1"></div>'),yo=d('<button class="bg-yellow-900/40 hover:bg-yellow-800/40 text-yellow-500 border border-yellow-800 px-2 py-0.5 rounded flex items-center gap-1 transition-colors" aria-label="Sortear encerramento do efeito"><!> Sorte Encerra</button>'),wo=d('<div><div class="flex justify-between items-start"><div class="flex items-center gap-2"><button><div></div></button> <span class="font-bold text-white tracking-tight"> </span></div> <div class="flex gap-2"><button class="text-slate-500 hover:text-white p-1 hover:bg-slate-800 rounded transition-colors"><!></button> <button class="text-slate-500 hover:text-red-400 p-1 hover:bg-slate-800 rounded transition-colors"><!></button></div></div> <div class="text-xs text-slate-400 leading-relaxed"> </div> <!> <div class="flex justify-between items-center text-[10px] text-slate-500 font-mono mt-1 border-t border-slate-800/50 pt-2"><span class="flex items-center gap-1"><!> </span> <!></div></div>'),ko=d('<div class="space-y-4"><div class="flex justify-between items-center bg-slate-900 p-3 rounded-lg border border-slate-800"><div class="flex items-center gap-4"><button class="p-2 hover:bg-slate-700 rounded text-slate-400 disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Voltar Rodada"><!></button> <div class="text-center min-w-[80px]"><div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div> <!></div> <button class="p-2 hover:bg-slate-700 rounded text-white disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Avançar Rodada"><!></button></div> <div class="flex gap-2"><button class="bg-slate-800 hover:bg-red-900/50 text-slate-400 hover:text-red-300 px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1 border border-slate-700"><!> Limpar Inativos</button> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1"><!> Novo Efeito</button></div></div> <div class="space-y-2"><!> <!></div></div>');function Ao(y,c){St(c,!1);const i=()=>oe(Le,"$character",p),[p,m]=Dt(),{advanceRound:w,deleteEffect:n,checkLuckEnds:x}=$e;function U(P,z=null){ut.update(G=>({...G,type:P,isOpen:!0,data:z}))}Ut();var L=ko(),o=t(L),u=t(o),h=t(u);h.__click=()=>w("prev");var O=t(h);zr(O,{size:20}),e(h);var _=r(h,2),b=t(_),l=t(b,!0);e(b);var A=r(b,2);{var N=P=>{var z=_o(),G=t(z,!0);e(z),C(()=>g(G,i().currentRound||1)),s(P,z)},j=P=>{var z=go();s(P,z)};v(A,P=>{i().combatActive?P(N):P(j,!1)})}e(_);var B=r(_,2);B.__click=()=>w("next");var V=t(B);$r(V,{size:20}),e(B),e(u);var $=r(u,2),E=t($);E.__click=function(...P){$e.cleanInactiveEffects?.apply(this,P)};var S=t(E);hr(S,{size:14}),pe(),e(E);var W=r(E,2);W.__click=()=>U("effect");var Z=t(W);Mt(Z,{size:14}),pe(),e(W),e($),e(o);var Y=r(o,2),J=t(Y);{var f=P=>{var z=mo();s(P,z)};v(J,P=>{i().effects.length===0&&P(f)})}var D=r(J,2);Ve(D,1,()=>i().effects,Ge,(P,z)=>{var G=wo(),ee=t(G),K=t(ee),F=t(K);F.__click=()=>$e.toggleEffect(a(z).id);var ie=t(F);e(F);var ae=r(F,2),Q=t(ae,!0);e(ae),e(K);var ne=r(K,2),Ke=t(ne);Ke.__click=()=>U("effect",a(z));var kt=t(Ke);ca(kt,{size:14}),e(Ke);var ze=r(Ke,2);ze.__click=()=>n(a(z).id);var ue=t(ze);sa(ue,{size:14}),e(ze),e(ne),e(ee);var be=r(ee,2),Pe=t(be,!0);e(be);var ot=r(be,2);{var Me=ge=>{var Ee=$o();Ve(Ee,5,()=>a(z).modifiers,Ge,(H,R)=>{var ve=ho(),We=t(ve);e(ve),C(()=>{ce(ve,1,`text-[9px] px-1.5 py-0.5 rounded border ${a(R).type===Bt.SET?"bg-yellow-900/30 text-yellow-200 border-yellow-800":"bg-slate-800 text-slate-300 border-slate-700"} font-medium`),g(We,`${(Ha[a(R).target]||a(R).target)??""}: ${a(R).type===Bt.SET?"=":a(R).type===Bt.MULT?"x":a(R).value>0?"+":""}${a(R).value??""}`)}),s(H,ve)}),e(Ee),s(ge,Ee)};v(ot,ge=>{a(z).isActive&&Array.isArray(a(z).modifiers)&&a(z).modifiers.length>0&&ge(Me)})}var ke=r(ot,2),Be=t(ke),ye=t(Be);Ra(ye,{size:10,class:"text-indigo-400"});var it=r(ye);e(Be);var _e=r(Be,2);{var Ae=ge=>{var Ee=yo();Ee.__click=()=>x(a(z).id);var H=t(Ee);qa(H,{size:10}),pe(),e(Ee),s(ge,Ee)};v(_e,ge=>{a(z).duration==="LUCK_ENDS"&&a(z).isActive&&ge(Ae)})}e(ke),e(G),C(()=>{ce(G,1,`p-3 rounded border flex flex-col gap-2 transition-all ${a(z).isActive?"bg-slate-900 border-indigo-900 shadow-lg shadow-indigo-950/20":"bg-slate-950 border-slate-800 opacity-60"}`),ce(F,1,`w-8 h-4 rounded-full relative transition-colors ${a(z).isActive?"bg-green-500":"bg-slate-600"}`),Ue(F,"aria-label",a(z).isActive?"Desativar efeito {eff.name}":"Ativar efeito {eff.name}"),Ue(F,"aria-pressed",a(z).isActive),ce(ie,1,`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${a(z).isActive?"left-4.5":"left-0.5"}`),g(Q,a(z).name),Ue(Ke,"aria-label",`Editar ${a(z).name??""}`),Ue(ze,"aria-label",`Excluir ${a(z).name??""}`),g(Pe,a(z).description),g(it,` ${ja[a(z).duration]??""} ${a(z).duration==="ROUNDS"?`(${a(z).roundsLeft})`:""}`)}),s(P,G)}),e(Y),e(L),C(()=>{h.disabled=!!i().campaignId,g(l,i().combatActive?"Rodada Atual":"Status"),B.disabled=!!i().campaignId}),s(y,L),Nt(),m()}It(["click"]);var zo=d('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1">Tipo</span> <span class="font-bold text-slate-300 text-xs flex items-center justify-center gap-1.5 bg-slate-800 px-2 py-1 rounded-md"><!> Passivo</span>',1),Mo=d('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1">Usos</span> <span> <span class="text-slate-600 text-sm"> </span></span>',1),So=d('<div class="flex gap-2"><button title="Recuperar Uso" class="bg-slate-800 disabled:opacity-20 hover:bg-green-600/20 text-green-400 p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-green-500/50"><!></button> <button title="Usar Talento" class="bg-slate-800 disabled:opacity-20 hover:bg-indigo-600/20 text-white p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-indigo-500/50"><!></button></div>'),No=d('<div class="p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl flex flex-col md:flex-row md:items-center gap-6 group hover:border-indigo-500/50 hover:bg-slate-900/60 transition-all duration-300"><div class="flex-1"><div class="flex items-center gap-3 mb-2"><div class="p-2 rounded-lg bg-slate-800 text-yellow-500 group-hover:scale-110 transition-transform shadow-inner"><!></div> <h4 class="font-bold text-white text-lg tracking-tight uppercase tracking-tight"> </h4> <button class="text-slate-600 hover:text-indigo-400 opacity-0 group-hover:opacity-100 transition-all transform hover:scale-110"><!></button></div> <p class="text-sm text-slate-400 leading-relaxed max-w-2xl"> </p></div> <div class="shrink-0 flex items-center gap-4 bg-slate-950/50 p-3 rounded-xl border border-slate-800 shadow-inner"><div class="text-center px-2 border-r border-slate-800 pr-4 min-w-[80px]"><!></div> <!></div></div>'),Do=d('<div class="text-center py-12 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium">Você ainda não possui talentos cadastrados.</p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> Adicionar Primeiro Talento</button></div>'),Eo=d('<div class="space-y-6"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight">Talentos & Habilidades</h3> <p class="text-xs text-slate-500">Suas capacidades especiais e passivas.</p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95" aria-label="Adicionar Novo Talento"><!> Novo Talento</button></div> <div class="grid grid-cols-1 gap-4"><!> <!></div></div>');function Po(y,c){St(c,!1);const i=()=>oe(Le,"$character",p),[p,m]=Dt(),{recoverTalent:w}=$e;function n(b,l=null){ut.update(A=>({...A,type:b,isOpen:!0,data:l}))}Ut();var x=Eo(),U=t(x),L=r(t(U),2);L.__click=()=>n("talent");var o=t(L);Mt(o,{size:16}),pe(),e(L),e(U);var u=r(U,2),h=t(u);Ve(h,1,()=>i().talents,Ge,(b,l)=>{var A=No(),N=t(A),j=t(N),B=t(j),V=t(B);Wt(V,{size:18}),e(B);var $=r(B,2),E=t($,!0);e($);var S=r($,2);S.__click=()=>n("talent",a(l));var W=t(S);ca(W,{size:14}),e(S),e(j);var Z=r(j,2),Y=t(Z,!0);e(Z),e(N);var J=r(N,2),f=t(J),D=t(f);{var P=K=>{var F=zo(),ie=r(k(F),2),ae=t(ie);wr(ae,{size:12,class:"text-indigo-400"}),pe(),e(ie),s(K,F)},z=K=>{var F=Mo(),ie=r(k(F),2),ae=t(ie,!0),Q=r(ae),ne=t(Q);e(Q),e(ie),C(()=>{ce(ie,1,`font-mono font-bold text-lg ${a(l).uses===0?"text-red-400":"text-white"}`),g(ae,a(l).uses),g(ne,`/${a(l).maxUses??""}`)}),s(K,F)};v(D,K=>{a(l).isPassive?K(P):K(z,!1)})}e(f);var G=r(f,2);{var ee=K=>{var F=So(),ie=t(F);ie.__click=()=>w(a(l).id);var ae=t(ie);Mt(ae,{size:18}),e(ie);var Q=r(ie,2);Q.__click=()=>n("confirm_talent",a(l));var ne=t(Q);Wt(ne,{size:18}),e(Q),e(F),C(()=>{ie.disabled=a(l).uses>=a(l).maxUses,Ue(ie,"aria-label",`Recuperar uso de ${a(l).name??""}`),Q.disabled=a(l).uses===0,Ue(Q,"aria-label",`Usar ${a(l).name??""}`)}),s(K,F)};v(G,K=>{a(l).isPassive||K(ee)})}e(J),e(A),C(()=>{g(E,a(l).name),Ue(S,"aria-label",`Editar ${a(l).name??""}`),g(Y,a(l).description)}),s(b,A)});var O=r(h,2);{var _=b=>{var l=Do(),A=t(l);Wt(A,{size:48,class:"mx-auto text-slate-800 mb-3"});var N=r(A,4);N.__click=()=>n("talent");var j=t(N);Mt(j,{size:14}),pe(),e(N),e(l),s(b,l)};v(O,b=>{i().talents.length===0&&b(_)})}e(u),e(x),s(y,x),Nt(),m()}It(["click"]);var To=d('<span class="block italic text-slate-400"> </span>'),Co=d("• Def <!>",1),Io=d('<button class="text-xs bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600">Usar</button>'),jo=d("<button> </button>"),Ho=d("<button>2H</button>"),Oo=d("<button>Main</button>"),Ro=d("<!> <button>Off</button>",1),qo=d('<div class="flex justify-center gap-1"><!></div>'),Uo=d('<tr class="hover:bg-slate-900/50"><td class="p-3"><div class="font-bold text-white"> </div> <div class="text-[10px] text-slate-500"> <!> <!></div></td><td class="p-3"><span class="text-[10px] border border-slate-700 px-1 rounded uppercase bg-slate-900"> </span></td><td class="p-3 text-center"><!></td><td class="p-3 text-right font-mono"> </td><td class="p-3 text-right"><button class="text-slate-500 hover:text-white"><!></button></td></tr>'),Lo=d('<div class="space-y-4"><div class="flex justify-between items-center"><h3 class="text-xs font-bold text-slate-500 uppercase">Inventário</h3> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-3 py-1.5 rounded text-white font-bold flex items-center gap-1"><!> Novo Item</button></div> <div class="bg-slate-950 rounded-lg border border-slate-800 overflow-hidden"><table class="w-full text-sm text-left"><thead class="bg-slate-900 text-slate-400 font-bold uppercase text-[10px]"><tr><th class="p-3">Item</th><th class="p-3">Tipo</th><th class="p-3 text-center">Ações / Equipar</th><th class="p-3 text-right">Qtd</th><th class="p-3 w-8"></th></tr></thead><tbody class="divide-y divide-slate-800 text-slate-300"></tbody></table></div></div>');function Fo(y,c){St(c,!1);const i=()=>oe(Le,"$character",p),[p,m]=Dt(),{useConsumable:w,equipItem:n}=$e;function x(b,l=null){ut.update(A=>({...A,type:b,isOpen:!0,data:l}))}Ut();var U=Lo(),L=t(U),o=r(t(L),2);o.__click=()=>x("item");var u=t(o);Mt(u,{size:14}),pe(),e(o),e(L);var h=r(L,2),O=t(h),_=r(t(O));Ve(_,5,()=>i().equipment,Ge,(b,l)=>{var A=Uo(),N=t(A),j=t(N),B=t(j,!0);e(j);var V=r(j,2),$=t(V),E=r($);{var S=Q=>{var ne=To(),Ke=t(ne,!0);e(ne),C(()=>g(Ke,a(l).notes)),s(Q,ne)};v(E,Q=>{a(l).notes&&Q(S)})}var W=r(E,2);{var Z=Q=>{var ne=Co(),Ke=r(k(ne));{var kt=ue=>{var be=et();C(()=>g(be,`Fixed ${a(l).defenseFixed??""}`)),s(ue,be)},ze=ue=>{var be=et();C(()=>g(be,`+${a(l).defenseMod??""}`)),s(ue,be)};v(Ke,ue=>{a(l).defenseFixed?ue(kt):ue(ze,!1)})}s(Q,ne)};v(W,Q=>{a(l).type===Ft.ARMOR&&Q(Z)})}e(V),e(N);var Y=r(N),J=t(Y),f=t(J,!0);e(J),e(Y);var D=r(Y),P=t(D);{var z=Q=>{var ne=Io();ne.__click=()=>w(a(l)),C(()=>{ne.disabled=a(l).quantity<=0,Ue(ne,"aria-label",`Usar ${a(l).name??""}`)}),s(Q,ne)},G=Q=>{var ne=T(),Ke=k(ne);{var kt=ue=>{var be=jo();be.__click=()=>n(a(l));var Pe=t(be,!0);e(be),C(()=>{ce(be,1,`text-xs px-2 py-1 rounded border transition-colors ${a(l).equipped?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-400"}`),Ue(be,"aria-label",a(l).equipped?"Desequipar armadura":"Equipar armadura"),g(Pe,a(l).equipped?"Equipado":"Equipar")}),s(ue,be)},ze=ue=>{var be=T(),Pe=k(be);{var ot=Me=>{var ke=qo(),Be=t(ke);{var ye=_e=>{var Ae=Ho();Ae.__click=()=>n(a(l),a(l).equippedState?null:"two"),C(()=>{ce(Ae,1,`text-[10px] px-2 py-1 rounded border ${a(l).equippedState==="two"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),Ue(Ae,"aria-label",a(l).equippedState==="two"?"Desequipar 2H":"Equipar 2H")}),s(_e,Ae)},it=_e=>{var Ae=Ro(),ge=k(Ae);{var Ee=R=>{var ve=Oo();ve.__click=()=>n(a(l),a(l).equippedState==="main"?null:"main"),C(()=>{ce(ve,1,`text-[10px] px-2 py-1 rounded border ${a(l).equippedState==="main"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),Ue(ve,"aria-label",a(l).equippedState==="main"?"Desequipar Main Hand":"Equipar Main Hand")}),s(R,ve)};v(ge,R=>{a(l).grip!==ma.OFF&&R(Ee)})}var H=r(ge,2);H.__click=()=>n(a(l),a(l).equippedState==="off"?null:"off"),C(()=>{ce(H,1,`text-[10px] px-2 py-1 rounded border ${a(l).equippedState==="off"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),Ue(H,"aria-label",a(l).equippedState==="off"?"Desequipar Off Hand":"Equipar Off Hand")}),s(_e,Ae)};v(Be,_e=>{a(l).grip===ma.TWO?_e(ye):_e(it,!1)})}e(ke),s(Me,ke)};v(Pe,Me=>{(a(l).type===Ft.WEAPON||a(l).type===Ft.SHIELD)&&Me(ot)},!0)}s(ue,be)};v(Ke,ue=>{a(l).type===Ft.ARMOR?ue(kt):ue(ze,!1)},!0)}s(Q,ne)};v(P,Q=>{a(l).type===Ft.CONSUMABLE?Q(z):Q(G,!1)})}e(D);var ee=r(D),K=t(ee,!0);e(ee);var F=r(ee),ie=t(F);ie.__click=()=>x("item",a(l));var ae=t(ie);ca(ae,{size:14}),e(ie),e(F),e(A),C(()=>{g(B,a(l).name),g($,`${a(l).quality??""} • ${a(l).availability??""} • ${a(l).price??""}gp `),g(f,a(l).type),g(K,a(l).quantity),Ue(ie,"aria-label",`Editar ${a(l).name??""}`)}),s(b,A)}),e(_),e(O),e(h),e(U),s(y,U),Nt(),m()}It(["click"]);var Vo=d('<div class="space-y-4"><div class="flex justify-between items-center mb-2"><h3 class="text-xs font-bold text-slate-500 uppercase">Anotações do Personagem</h3> <span class="text-[10px] text-slate-600 italic">Salvo automaticamente</span></div> <textarea class="w-full h-[60vh] bg-slate-950 border border-slate-800 rounded p-4 text-white resize-none focus:border-indigo-500 focus:outline-none custom-scrollbar leading-relaxed font-mono text-sm" placeholder="Escreva aqui a história, anotações de campanha, NPCs importantes, segredos..." aria-label="Anotações do personagem"></textarea></div>');function Go(y,c){St(c,!1);const i=()=>oe(Le,"$character",p),[p,m]=Dt();Ut();var w=Vo(),n=r(t(w),2);da(n),e(w),we(n,()=>i().notes,x=>Fa(Le,Sa(i).notes=x,Sa(i))),s(y,w),Nt(),m()}var Bo=d('<div class="min-h-screen flex flex-col items-center justify-center p-4"><div class="bg-slate-900 border border-slate-800 rounded-3xl p-8 max-w-md w-full text-center shadow-2xl"><div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-600"><!></div> <h1 class="text-2xl font-black text-white mb-2 uppercase tracking-tight">Personagem Não Encontrado</h1> <p class="text-slate-400 mb-8">Este personagem não existe na sua base local. Crie um novo personagem através da página inicial.</p> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all"><!> Voltar ao Início</button></div></div>'),Wo=d('<!> <!> <!> <main class="max-w-6xl mx-auto px-4 mt-6 lg:mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6"><aside class="lg:col-span-3 space-y-4"><!> <button class="w-full bg-slate-900 hover:bg-slate-800 p-3 rounded-xl border border-slate-800 flex items-center justify-between group transition-colors"><div class="flex items-center gap-2 font-bold text-slate-400 group-hover:text-green-400 uppercase text-xs"><!> Teste de Sorte</div><!></button> <!> <!> <!> <!> <div class="hidden lg:block pt-2"><!></div></aside> <section class="lg:col-span-9"><div class="bg-slate-900 rounded-xl border border-slate-800 min-h-[60vh]"><!> <div class="p-4 md:p-6"><!> <!> <!> <!> <!> <!></div></div></section></main> <div class="lg:hidden px-4 mt-6"><!></div>',1),Yo=d('<div class="flex items-center justify-center min-h-screen"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"></div></div>'),Ko=d('<div class="min-h-screen bg-slate-950 text-slate-100 font-sans pb-20 relative overflow-x-hidden"><!></div> ```',1);function pi(y,c){St(c,!0);const i=()=>oe(Le,"$character",u),p=()=>oe(ia,"$normalHealth",u),m=()=>oe(la,"$currentHealth",u),w=()=>oe(oa,"$damage",u),n=()=>oe(ha,"$totalDefense",u),x=()=>oe(ga,"$effectiveMaxHealth",u),U=()=>oe(sr,"$page",u),L=()=>oe(_a,"$isHistoryOpen",u),o=()=>oe($a,"$activeTab",u),[u,h]=Dt();let O=Zt(!1),_=Zt(!1),b=Zt(null);pa(()=>{if(!a(O)||a(_)||!a(b))return;const $=i(),E=p(),S=m(),W=w(),Z=n(),Y=x(),J={...$,normalHealth:E,currentHealth:S,damage:W};xa.set(a(b),J),$.campaignId&&Pa({id:a(b),type:"player",name:$.name,level:$.level,ancestry:$.ancestry,damage:W,currentHealth:S,normalHealth:E,health:Y,defense:Z,initiative:$.initiative,acted:$.acted,afflictions:$.afflictions||[],campaignApproval:$.campaignApproval})}),pa(()=>{if(!a(O)||a(_)||!a(b)||!Xt(Le).campaignId)return;const E=setInterval(()=>{const S=Xt(Le);Pa({id:a(b),type:"player",name:S.name,level:S.level,ancestry:S.ancestry,damage:Xt(oa),currentHealth:Xt(la),normalHealth:Xt(ia),health:Xt(ga),defense:Xt(ha),initiative:S.initiative,acted:S.acted,afflictions:S.afflictions||[],campaignApproval:S.campaignApproval})},3e4);return()=>clearInterval(E)}),pa(()=>{const $=U().params.id;$&&$!==a(b)&&l($)});async function l($){if(yt(O,!1),yt(_,!1),yt(b,$,!0),await er(),xa.has($)){const E=xa.get($);Le.set({...tr,...E,id:$}),E.normalHealth!==void 0&&ia.set(E.normalHealth),E.currentHealth!==void 0&&la.set(E.currentHealth),E.damage!==void 0&&oa.set(E.damage);const S=Xt(Le);S.campaignId&&ar(S.campaignId,!1,a(b))}else yt(_,!0);yt(O,!0)}var A=Ko(),N=k(A),j=t(N);{var B=$=>{var E=T(),S=k(E);{var W=Y=>{var J=Bo(),f=t(J),D=t(f),P=t(D);cr(P,{size:40}),e(D);var z=r(D,6);z.__click=()=>Oa("/");var G=t(z);br(G,{size:18}),pe(),e(z),e(f),e(J),s(Y,J)},Z=Y=>{var J=Wo(),f=k(J);pr(f,{get isOpen(){return L()},onClose:()=>_a.set(!1)});var D=r(f,2);Hs(D,{});var P=r(D,2);Rr(P,{});var z=r(P,2),G=t(z),ee=t(G);Us(ee,{});var K=r(ee,2);K.__click=()=>ut.set({type:"pre_roll",isOpen:!0,data:{type:"luck",source:{name:"Sorte"}}});var F=t(K),ie=t(F);qa(ie,{size:14}),pe(),e(F);var ae=r(F);gr(ae,{size:14,class:"text-slate-600"}),e(K);var Q=r(K,2);Vs(Q,{});var ne=r(Q,2);Bs(ne,{});var Ke=r(ne,2);Ks(Ke,{});var kt=r(Ke,2);Zs(kt,{});var ze=r(kt,2),ue=t(ze);Ia(ue,{}),e(ze),e(G);var be=r(G,2),Pe=t(be),ot=t(Pe);ro(ot,{});var Me=r(ot,2),ke=t(Me);{var Be=I=>{co(I,{})};v(ke,I=>{o()==="acoes"&&I(Be)})}var ye=r(ke,2);{var it=I=>{Ao(I,{})};v(ye,I=>{o()==="efeitos"&&I(it)})}var _e=r(ye,2);{var Ae=I=>{fo(I,{})};v(_e,I=>{o()==="magias"&&I(Ae)})}var ge=r(_e,2);{var Ee=I=>{Po(I,{})};v(ge,I=>{o()==="talentos"&&I(Ee)})}var H=r(ge,2);{var R=I=>{Fo(I,{})};v(H,I=>{o()==="equipamento"&&I(R)})}var ve=r(H,2);{var We=I=>{Go(I,{})};v(ve,I=>{o()==="notas"&&I(We)})}e(Me),e(Pe),e(be),e(z);var tt=r(z,2),Ye=t(tt);Ia(Ye,{banner:!0}),e(tt),s(Y,J)};v(S,Y=>{a(_)?Y(W):Y(Z,!1)})}s($,E)},V=$=>{var E=Yo();s($,E)};v(j,$=>{a(O)?$(B):$(V,!1)})}e(N),pe(),s(y,A),Nt(),h()}It(["click"]);export{pi as component,ci as universal};
