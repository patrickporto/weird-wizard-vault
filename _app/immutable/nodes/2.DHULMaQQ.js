import"../chunks/DsnmJJEf.js";import"../chunks/Dcsmm6So.js";import{v as ie,w as N,k as u,x as mt,j as m,z as ht,F as g,R as ee,y as n,A as a,B as t,I as e,t as U,a2 as qa,L as qt,n as at,T as Ct,ap as is,U as ls,b7 as ma}from"../chunks/Dw_raXzk.js";import{d as bt,o as Ia,s as f,w as ca,g as ze,e as Et}from"../chunks/Dy4L3Tb7.js";import{l as Be,s as De,i as $,p as Ye}from"../chunks/C7jdvfZ7.js";import{h as Yt}from"../chunks/lWjc63_F.js";import{a as Ve,$ as At,e as Wt,s as ye,i as Wa,r as ut,h as ka,g as ha}from"../chunks/DHvfXG5j.js";import{s as Ot,a as me}from"../chunks/CLDCoJG6.js";import{I as Ae,s as Oe}from"../chunks/DjRg1Dji.js";import{X as Ja,M as Ka,a as ds,q as Gt,T as Ba,P as ba,b as cs}from"../chunks/DsV61ll_.js";import{t as ft,a as Xa,f as Bt}from"../chunks/CdKeR9oO.js";import{D as et,G as ra,S as vs,l as Za,c as $a,a as us,b as ps,C as gs,g as xa}from"../chunks/CjEbL4_G.js";import{b as pt,t as gt,d as _e,e as we,f as ta,g as aa,v as Sa,x as na,u as Da,y as fs}from"../chunks/DoCbXyb_.js";import{b as ms,g as sa}from"../chunks/D5jXSscZ.js";import{C as Aa,U as Oa,r as oa,W as hs}from"../chunks/Dw-BcmbT.js";import{C as bs,G as Ca,S as Ea,a as xs,P as Ua}from"../chunks/CphbQaxe.js";import{U as Ta,S as Fa,L as _s,A as ws}from"../chunks/BYOHMWyn.js";import{c as ys}from"../chunks/pTLFCRzO.js";import{h as ks}from"../chunks/BYmFNSF7.js";function $s(c,o){const l=Be(o,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];Ae(c,De({name:"book-open"},()=>l,{get iconNode(){return d},children:(i,r)=>{var s=ie(),v=N(s);Oe(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function Ss(c,o){const l=Be(o,["children","$$slots","$$events","$$legacy"]);const d=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];Ae(c,De({name:"circle-alert"},()=>l,{get iconNode(){return d},children:(i,r)=>{var s=ie(),v=N(s);Oe(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function Cs(c,o){const l=Be(o,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"m2 2 20 20"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07"}]];Ae(c,De({name:"cloud-off"},()=>l,{get iconNode(){return d},children:(i,r)=>{var s=ie(),v=N(s);Oe(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function Es(c,o){const l=Be(o,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"}]];Ae(c,De({name:"cloud"},()=>l,{get iconNode(){return d},children:(i,r)=>{var s=ie(),v=N(s);Oe(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function La(c,o){const l=Be(o,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];Ae(c,De({name:"download"},()=>l,{get iconNode(){return d},children:(i,r)=>{var s=ie(),v=N(s);Oe(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function zs(c,o){const l=Be(o,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];Ae(c,De({name:"loader-circle"},()=>l,{get iconNode(){return d},children:(i,r)=>{var s=ie(),v=N(s);Oe(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function Is(c,o){const l=Be(o,["children","$$slots","$$events","$$legacy"]);const d=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21"}]];Ae(c,De({name:"monitor"},()=>l,{get iconNode(){return d},children:(i,r)=>{var s=ie(),v=N(s);Oe(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function Ts(c,o){const l=Be(o,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}]];Ae(c,De({name:"palette"},()=>l,{get iconNode(){return d},children:(i,r)=>{var s=ie(),v=N(s);Oe(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function Ns(c,o){const l=Be(o,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];Ae(c,De({name:"refresh-cw"},()=>l,{get iconNode(){return d},children:(i,r)=>{var s=ie(),v=N(s);Oe(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function _a(c,o){const l=Be(o,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3"}]];Ae(c,De({name:"scroll"},()=>l,{get iconNode(){return d},children:(i,r)=>{var s=ie(),v=N(s);Oe(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}function Ps(c,o){const l=Be(o,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}],["path",{d:"M12 8v4"}],["path",{d:"M12 16h.01"}]];Ae(c,De({name:"shield-alert"},()=>l,{get iconNode(){return d},children:(i,r)=>{var s=ie(),v=N(s);Oe(v,o,"default",{}),u(i,s)},$$slots:{default:!0}}))}var Ms=m('<button class="fixed bottom-28 md:bottom-6 right-6 z-[60] bg-indigo-600 hover:bg-indigo-500 text-white h-14 px-4 rounded-full shadow-2xl shadow-indigo-900/50 flex items-center justify-center font-bold animate-pulse hover:animate-none transition-all active:scale-95 group"><!> <span class="text-sm uppercase tracking-wider max-w-0 overflow-hidden ml-0 group-hover:max-w-xs group-hover:ml-2 transition-all duration-300 md:max-w-xs md:ml-2 md:inline"> </span></button>'),js=m("<div><!></div>"),Gs=m("<div><!></div>"),Bs=m('<li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">1</span> <!></li> <li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">2</span> <div><!></div></li>',1),Ds=m('<li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">1</span> <div><!></div></li> <li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">2</span> <div><!></div></li>',1),As=m('<div class="fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-end sm:items-center justify-center p-4 animate-in fade-in"><div class="bg-slate-900 border border-slate-700 rounded-2xl p-6 max-w-sm w-full relative shadow-2xl mb-4 sm:mb-0 animate-in slide-in-from-bottom-10 sm:slide-in-from-bottom-0 sm:zoom-in-95"><button class="absolute top-4 right-4 text-slate-400 hover:text-white p-1"><!></button> <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2"><!> </h3> <ol class="space-y-4 text-slate-300 text-sm"><!></ol> <div class="mt-6 text-center"><button class="text-indigo-400 text-sm font-bold hover:text-indigo-300"> </button></div></div></div>'),Os=m("<!> <!>",1);function Us(c,o){mt(o,!0);const l=()=>me(At,"$t",d),[d,i]=Ot();let r=ee(null),s=ee(!1),v=ee(!1),x=ee(!1),_=ee(!1);Ia(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone){g(s,!1);return}const C=window.navigator.userAgent;g(x,/iPad|iPhone|iPod/.test(C)&&!window.MSStream,!0),g(_,/CriOS/i.test(C),!0),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(C)&&g(s,!0),window.addEventListener("beforeinstallprompt",E=>{E.preventDefault(),g(r,E,!0),g(s,!0)}),window.addEventListener("appinstalled",()=>{g(r,null),g(s,!1),g(v,!1)})});async function P(){if(n(r)){n(r).prompt();const{outcome:y}=await n(r).userChoice;y==="accepted"&&(g(r,null),g(s,!1))}else g(v,!0)}const q="inline w-3.5 h-3.5",F=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${q}"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" x2="12" y1="2" y2="15"/></svg>`,te=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${q}"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M8 12h8"/><path d="M12 8v8"/></svg>`,w=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${q}"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>`;function M(y,C){const j=l()(y),E=`<span class="inline-flex items-center justify-center bg-slate-800 p-1 rounded mx-1 align-middle">${C}</span>`;return j.replace("{icon}",E)}var V=Os(),S=N(V);{var B=y=>{var C=Ms();C.__click=P;var j=t(C);La(j,{size:24});var E=a(j,2),oe=t(E,!0);e(E),e(C),U((Y,D)=>{Ve(C,"aria-label",Y),f(oe,D)},[()=>l()("home.install.button"),()=>l()("home.install.button")]),u(y,C)};$(S,y=>{n(s)&&y(B)})}var T=a(S,2);{var k=y=>{var C=As(),j=t(C),E=t(j);E.__click=()=>g(v,!1);var oe=t(E);Ja(oe,{size:20}),e(E);var Y=a(E,2),D=t(Y);La(D,{size:24,class:"text-indigo-500"});var h=a(D);e(Y);var G=a(Y,2),W=t(G);{var X=I=>{var A=Bs(),R=N(A),re=a(t(R),2);{var le=ve=>{var Q=js(),K=t(Q);Yt(K,()=>M("home.install.ios_chrome_step1",F)),e(Q),u(ve,Q)},ge=ve=>{var Q=Gs(),K=t(Q);Yt(K,()=>M("home.install.ios_step1",F)),e(Q),u(ve,Q)};$(re,ve=>{n(_)?ve(le):ve(ge,!1)})}e(R);var de=a(R,2),se=a(t(de),2),be=t(se);Yt(be,()=>M("home.install.ios_step2",te)),e(se),e(de),u(I,A)},J=I=>{var A=Ds(),R=N(A),re=a(t(R),2),le=t(re);Yt(le,()=>M("home.install.android_step1",w)),e(re),e(R);var ge=a(R,2),de=a(t(ge),2),se=t(de);Yt(se,()=>l()("home.install.android_step2")),e(de),e(ge),u(I,A)};$(W,I=>{n(x)?I(X):I(J,!1)})}e(G);var L=a(G,2),ae=t(L);ae.__click=()=>g(v,!1);var b=t(ae,!0);e(ae),e(L),e(j),e(C),U((I,A)=>{f(h,` ${I??""}`),f(b,A)},[()=>l()("home.install.title"),()=>l()("home.install.close")]),u(y,C)};$(T,y=>{n(v)&&y(k)})}u(c,V),ht(),i()}bt(["click"]);var Fs=m('<span class="text-[9px] bg-slate-800 text-slate-400 px-1.5 py-0.5 rounded uppercase tracking-wider">Em Breve</span>'),Ls=m('<div class="w-2 h-2 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]"></div>'),Rs=m('<button><div class="flex-1"><div class="font-bold text-sm flex items-center gap-2"> <!></div> <div class="text-[10px] opacity-60 mt-0.5"> </div></div> <!></button>'),Hs=m('<div class="space-y-4"><div><label class="text-xs text-slate-500 uppercase font-black block mb-2 tracking-widest flex items-center gap-1"><!> Sistema de Jogo</label> <div class="grid grid-cols-1 gap-2"></div></div> <div><label for="char-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nome do Personagem</label> <input id="char-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Alaric, o Errante"/></div> <div><label for="char-player" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> Nome do Jogador</label> <input id="char-player" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-ancestry" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Ancestralidade</label> <input id="char-ancestry" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Humano"/></div> <div><label for="char-level" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">NÃ­vel</label> <input id="char-level" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div> <div><label for="char-path" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Trilha Inicial (Novice)</label> <input id="char-path" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Guerreiro, Mago"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-defense" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Defesa</label> <input id="char-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div> <div><label for="char-health" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Vida MÃ¡xima</label> <input id="char-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div></div> <div class="flex gap-3 mt-8"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-3 rounded-xl text-white font-bold active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95">Criar Personagem</button></div>',1);function Vs(c,o){mt(o,!0);let l=Ye(o,"isOpen",3,!1),d=Ye(o,"initialData",3,"{}"),i=qa({name:"",playerName:"",ancestry:"",novicePath:"",level:1,defense:10,health:24,system:et});qt(()=>{if(l()&&d())try{const s=JSON.parse(d());i.name=s.name||"",i.playerName=s.playerName||"",i.ancestry=s.ancestry||"",i.novicePath=s.paths&&s.paths.novice?s.paths.novice:"",i.level=s.level||1,i.defense=s.defense||10,i.health=s.health||s.normalHealth||24,i.system=s.system||et}catch{i.name="",i.playerName="",i.ancestry="",i.novicePath="",i.level=1,i.defense=10,i.health=24,i.system=et}});function r(){o.onSave({...i})}Ka(c,{get isOpen(){return l()},get onClose(){return o.onClose},title:"Novo Personagem",maxWidth:"max-w-md",children:(s,v)=>{var x=Hs(),_=N(x),P=t(_),q=t(P),F=t(q);ra(F,{size:12}),at(),e(q);var te=a(q,2);Wt(te,21,()=>vs,Wa,(b,I)=>{var A=Rs();A.__click=()=>!n(I).disabled&&(i.system=n(I).id);var R=t(A),re=t(R),le=t(re),ge=a(le);{var de=K=>{var ke=Fs();u(K,ke)};$(ge,K=>{n(I).comingSoon&&K(de)})}e(re);var se=a(re,2),be=t(se,!0);e(se),e(R);var ve=a(R,2);{var Q=K=>{var ke=Ls();u(K,ke)};$(ve,K=>{i.system===n(I).id&&K(Q)})}e(A),U(()=>{ye(A,1,`relative flex items-center p-3 rounded-lg border text-left transition-all ${i.system===n(I).id?"bg-indigo-600/20 border-indigo-500 text-white":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"} ${n(I).disabled?"opacity-60 cursor-not-allowed":""}`),A.disabled=n(I).disabled,f(le,`${n(I).name??""} `),f(be,n(I).description)}),u(b,A)}),e(te),e(P);var w=a(P,2),M=a(t(w),2);ut(M),e(w);var V=a(w,2),S=t(V),B=t(S);Ta(B,{size:12}),at(),e(S);var T=a(S,2);ut(T),e(V);var k=a(V,2),y=t(k),C=a(t(y),2);ut(C),e(y);var j=a(y,2),E=a(t(j),2);ut(E),e(j),e(k);var oe=a(k,2),Y=a(t(oe),2);ut(Y),e(oe);var D=a(oe,2),h=t(D),G=a(t(h),2);ut(G),e(h);var W=a(h,2),X=a(t(W),2);ut(X),e(W),e(D),e(_);var J=a(_,2),L=t(J);L.__click=function(...b){o.onClose?.apply(this,b)};var ae=a(L,2);ae.__click=r,e(J),pt(M,()=>i.name,b=>i.name=b),pt(T,()=>i.playerName,b=>i.playerName=b),pt(C,()=>i.ancestry,b=>i.ancestry=b),pt(E,()=>i.level,b=>i.level=b),pt(Y,()=>i.novicePath,b=>i.novicePath=b),pt(G,()=>i.defense,b=>i.defense=b),pt(X,()=>i.health,b=>i.health=b),u(s,x)},$$slots:{default:!0}}),ht()}bt(["click"]);var Ys=m('<div class="ml-auto flex items-center h-full self-center"><div class="w-3 h-3 rounded-full bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]"></div></div>'),qs=m('<button><div><!></div> <div class="flex-1"><h4 class="font-bold text-sm mb-1"> </h4> <p class="text-[10px] opacity-70 leading-relaxed"> </p></div> <!></button>'),Ws=m('<div class="space-y-3 pt-4 border-t border-slate-800"><label class="text-xs font-black uppercase tracking-widest text-slate-500 flex items-center gap-2"><!> </label> <div class="grid grid-cols-1 gap-3"></div></div>'),Js=m('<div class="space-y-6"><div><label for="settings-player-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> </label> <input id="settings-player-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/> <p class="text-[10px] text-slate-500 mt-1">O nome do jogador associado a este personagem.</p></div> <!></div> <div class="flex flex-col-reverse sm:flex-row gap-3 mt-8"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-4 sm:py-3 rounded-xl text-white font-bold active:scale-95"> </button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-4 sm:py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95"> </button></div>',1);function Ks(c,o){mt(o,!0);const l=()=>me(At,"$t",d),[d,i]=Ot();let r=Ye(o,"isOpen",3,!1),s=Ye(o,"characterData",3,null),v=ee(""),x=ee("standard"),_=[{value:"standard",label:"Standard",desc:"Sistema de magia padrÃ£o do Shadow of the Demon Lord.",icon:$s,disabled:!1},{value:"forbidden_rules",label:"Forbidden Rules",desc:"Coming Soon",icon:ds,disabled:!0},{value:"uncanny_arcana",label:"Uncanny Arcana",desc:"Coming Soon",icon:Fa,disabled:!0}];qt(()=>{r()&&s()&&(g(v,s().playerName||"",!0),g(x,s().magicSystem||"standard",!0))});function P(){o.onSave({playerName:n(v),magicSystem:n(x)})}{let q=Ct(()=>l()("character.settings.title_label"));Ka(c,{get isOpen(){return r()},get onClose(){return o.onClose},get title(){return`âš™ï¸ ${n(q)??""}`},maxWidth:"max-w-md",children:(F,te)=>{var w=Js(),M=N(w),V=t(M),S=t(V),B=t(S);Ta(B,{size:12});var T=a(B);e(S);var k=a(S,2);ut(k),at(2),e(V);var y=a(V,2);{var C=h=>{var G=Ws(),W=t(G),X=t(W);Fa(X,{size:14});var J=a(X);e(W);var L=a(W,2);Wt(L,21,()=>_,Wa,(ae,b)=>{var I=qs();I.__click=()=>!n(b).disabled&&g(x,n(b).value,!0);var A=t(I),R=t(A);ys(R,()=>n(b).icon,(Q,K)=>{K(Q,{size:20})}),e(A);var re=a(A,2),le=t(re),ge=t(le,!0);e(le);var de=a(le,2),se=t(de,!0);e(de),e(re);var be=a(re,2);{var ve=Q=>{var K=Ys();u(Q,K)};$(be,Q=>{n(x)===n(b).value&&Q(ve)})}e(I),U(()=>{ye(I,1,`flex items-start gap-4 p-4 rounded-xl border text-left transition-all ${n(x)===n(b).value?"bg-indigo-600/20 border-indigo-500 text-white":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"} ${n(b).disabled?"opacity-50 cursor-not-allowed":""}`),I.disabled=n(b).disabled,ye(A,1,`mt-1 p-2 rounded-lg bg-slate-800 ${n(x)===n(b).value?"text-indigo-400":"text-slate-500"}`),f(ge,n(b).label),f(se,n(b).desc)}),u(ae,I)}),e(L),e(G),U(ae=>f(J,` ${ae??""}`),[()=>l()("character.settings.magic_system")]),u(h,G)};$(y,h=>{s()?.system==="sofdl"&&h(C)})}e(M);var j=a(M,2),E=t(j);E.__click=function(...h){o.onClose?.apply(this,h)};var oe=t(E,!0);e(E);var Y=a(E,2);Y.__click=P;var D=t(Y,!0);e(Y),e(j),U((h,G,W)=>{f(T,` ${h??""}`),f(oe,G),f(D,W)},[()=>l()("character.settings.player_name"),()=>l()("common.buttons.cancel")||"Cancelar",()=>l()("common.buttons.save")||"Salvar"]),pt(k,()=>n(v),h=>g(v,h)),u(F,w)},$$slots:{default:!0}})}ht(),i()}bt(["click"]);const tt=ca("idle"),Na=ca(null),ia=ca(null),Xs="701898444454-7ml9onnv529k99rkvgh1slhdj4a1arrm.apps.googleusercontent.com",Ra="https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/userinfo.profile",he=ca({signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null,isInited:!1});let la,Ha=!1;const Dt="wwv_google_session";function Zs(){localStorage.removeItem(Dt),he.update(c=>({...c,signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null})),console.log("Session cleared due to expired or invalid token")}async function da(){Zs(),console.warn("OAuth token expired or invalid. Please sign in again.")}async function Qa(c){try{const o=await fetch("https://www.googleapis.com/oauth2/v1/userinfo?alt=json",{headers:{Authorization:`Bearer ${c}`}});if(o.status===401){await da();return}if(o.ok){const l=await o.json();he.update(d=>({...d,userProfile:{name:l.name,picture:l.picture}})),es()}}catch(o){console.error("Failed to fetch user profile:",o)}}function Qs(){try{const c=localStorage.getItem(Dt);if(c){const o=JSON.parse(c);if(o.accessToken)return o.tokenExpiry&&Date.now()>o.tokenExpiry?(console.log("Stored token is expired, clearing session"),localStorage.removeItem(Dt),!1):(he.set({signedIn:!0,accessToken:o.accessToken,tokenExpiry:o.tokenExpiry||null,userProfile:o.userProfile||null,isInited:!0}),console.log("Restored session from localStorage"),Qa(o.accessToken),!0)}}catch(c){console.error("Failed to load stored session:",c)}return!1}function es(){const c=ze(he);c.signedIn&&c.accessToken?localStorage.setItem(Dt,JSON.stringify({accessToken:c.accessToken,tokenExpiry:c.tokenExpiry,userProfile:c.userProfile})):localStorage.removeItem(Dt)}async function eo(){const c=Xs;if(Qs()){try{await Ya(),la=google.accounts.oauth2.initTokenClient({client_id:c,scope:Ra,callback:Va}),Ha=!0}catch(l){console.warn("Could not initialize GIS after restoring session:",l)}return}try{await Ya(),la=google.accounts.oauth2.initTokenClient({client_id:c,scope:Ra,callback:Va}),Ha=!0,he.update(l=>({...l,isInited:!0})),console.log("Google Auth Initialized")}catch(l){console.error("Failed to initialize Google Auth:",l),ia.set("init_failed"),he.update(d=>({...d,isInited:!0}))}}function Va(c){if(c.error!==void 0){console.error("Google Auth Error:",c);return}console.log("Google Auth Success",c);const o=c.expires_in||3600,l=Date.now()+o*1e3;he.update(d=>({...d,signedIn:!0,accessToken:c.access_token,tokenExpiry:l})),es(),Qa(c.access_token)}let St=null;function Ya(){return typeof window>"u"||typeof google<"u"&&google.accounts?Promise.resolve():St||(St=new Promise((c,o)=>{if(document.querySelector('script[src="https://accounts.google.com/gsi/client"]')){const i=setInterval(()=>{typeof google<"u"&&google.accounts&&(clearInterval(i),c())},100);setTimeout(()=>{clearInterval(i),(typeof google>"u"||!google.accounts)&&(St=null,o(new Error("Google Identity Services script found but failed to initialize")))},5e3);return}const d=document.createElement("script");d.src="https://accounts.google.com/gsi/client",d.async=!0,d.defer=!0,d.onload=()=>{const i=setInterval(()=>{typeof google<"u"&&google.accounts&&(clearInterval(i),c())},50);setTimeout(()=>{clearInterval(i),(typeof google>"u"||!google.accounts)&&(St=null,o(new Error("Google object not available after script load")))},5e3)},d.onerror=()=>{St=null;const r=!navigator.onLine?"Failed to load Google script: No internet connection":"Failed to load Google script: Blocked by browser or network error";o(new Error(r))},document.head.appendChild(d)}),St)}function ts(){la?(ia.set(null),la.requestAccessToken()):(console.error("Google Auth not initialized"),ia.set("not_initialized"),tt.set("error"))}function to(){const c=ze(he).accessToken;localStorage.removeItem(Dt),he.update(o=>({...o,signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null})),c&&typeof google<"u"&&google.accounts&&google.accounts.oauth2.revoke(c,()=>{console.log("Access token revoked")})}async function as(){const c=ze(he),o=c.accessToken;if(!o)throw new Error("Not signed in");if(c.tokenExpiry&&Date.now()>c.tokenExpiry)throw await da(),new Error("Token expired, please sign in again");const d=`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent("name = 'weird-wizard-backup.json' and 'appDataFolder' in parents and trashed = false")}&spaces=appDataFolder&fields=files(id, name, modifiedTime, size)`,i=await fetch(d,{headers:{Authorization:`Bearer ${o}`}});if(i.status===401)throw await da(),new Error("Token expired, please sign in again");if(!i.ok)throw new Error("Failed to list backups: "+i.statusText);return(await i.json()).files||[]}async function ao(c){const o=ze(he).accessToken;if(!o)throw new Error("Not signed in");const l=JSON.stringify(c),d="weird-wizard-backup.json",i=await as(),r=i.length>0?i[0].id:null;if(r){const s=`https://www.googleapis.com/upload/drive/v3/files/${r}?uploadType=media`,v=await fetch(s,{method:"PATCH",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:l});if(!v.ok){const x=await v.text();throw console.error("Upload error details:",x),new Error("Upload failed: "+v.statusText)}return await v.json()}else{const s={name:d,mimeType:"application/json",parents:["appDataFolder"]},v=new FormData;v.append("metadata",new Blob([JSON.stringify(s)],{type:"application/json"})),v.append("file",new Blob([l],{type:"application/json"}));const _=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${o}`},body:v});if(!_.ok){const P=await _.text();throw console.error("Upload error details:",P),new Error("Upload failed: "+_.statusText)}return await _.json()}}async function so(c){const o=ze(he).accessToken;if(!o)throw new Error("Not signed in");const l=`https://www.googleapis.com/drive/v3/files/${c}?alt=media`,d=await fetch(l,{headers:{Authorization:`Bearer ${o}`}});if(d.status===401)throw await da(),new Error("Token expired, please sign in again");if(!d.ok)throw new Error("Download failed: "+d.statusText);return await d.json()}let wa;async function za(){if(ze(he).accessToken)try{console.log("Syncing from cloud..."),tt.set("syncing");const o=await as();if(o.length===0){console.log("No backups found in cloud."),tt.set("success");return}const l=o[0].id,d=await so(l),i=new Set;if(gt.forEach((r,s)=>{i.add(String(s)),console.log("[DEBUG] Local deleted ID entry:",{key:s,type:typeof s,val:r})}),console.log("[DEBUG] Total locally deleted IDs:",i.size),d.deletedIds&&Array.isArray(d.deletedIds)){console.log("[DEBUG] Cloud data deletedIds count:",d.deletedIds.length);for(const r of d.deletedIds){const s=String(r.id);gt.has(s)||(gt.set(s,r),console.log("[DEBUG] New deletion synced from cloud:",s)),i.add(s),r.type==="character"&&_e.has(s)&&(_e.delete(s),console.log("[DEBUG] Removed char locally based on cloud deletion:",s)),r.type==="campaign"&&we.has(s)&&(we.delete(s),console.log("[DEBUG] Removed camp locally based on cloud deletion:",s)),r.type==="enemy"&&ta.has(s)&&(ta.delete(s),console.log("[DEBUG] Removed enemy locally based on cloud deletion:",s)),r.type==="encounter"&&aa.has(s)&&(aa.delete(s),console.log("[DEBUG] Removed encounter locally based on cloud deletion:",s))}}if(d.characters&&Array.isArray(d.characters)){console.log("[DEBUG] Syncing",d.characters.length,"characters from cloud");for(const r of d.characters){const s=String(r.id);if(i.has(s)||gt.has(s)){console.log("[DEBUG] Skipping character because it is marked as deleted:",{id:s,name:r.name}),_e.has(s)&&(console.log("[DEBUG] Character found locally but marked deleted. Removing now:",s),_e.delete(s));for(const x of _e.keys()){const _=_e.get(x);_&&_.id===s&&(console.log("[DEBUG] Mismatched key entry found for deleted char. Removing:",x),_e.delete(x))}continue}const v=_e.get(s);console.log("[DEBUG] Syncing character from cloud:",{id:s,name:r.name,status:v?"OVERWRITING":"ADDING"}),_e.set(s,r)}}if(d.campaigns&&Array.isArray(d.campaigns)){console.log("[DEBUG] Syncing",d.campaigns.length,"campaigns from cloud");for(const r of d.campaigns){const s=String(r.id);if(i.has(s)||gt.has(s)){console.log("[DEBUG] Skipping campaign because it is marked as deleted:",{id:s,name:r.name}),we.has(s)&&(console.log("[DEBUG] Campaign found locally but marked deleted. Removing now:",s),we.delete(s));for(const v of we.keys()){const x=we.get(v);x&&x.id===s&&(console.log("[DEBUG] Mismatched key entry found for deleted camp. Removing:",v),we.delete(v))}continue}console.log("[DEBUG] Syncing campaign from cloud:",{id:s,name:r.name,status:we.has(s)?"OVERWRITING":"ADDING"}),we.set(s,r)}}if(d.enemies&&Array.isArray(d.enemies))for(const r of d.enemies){const s=String(r.id);!i.has(s)&&!ta.has(s)&&ta.set(s,r)}if(d.encounters&&Array.isArray(d.encounters))for(const r of d.encounters){const s=String(r.id);!i.has(s)&&!aa.has(s)&&aa.set(s,r)}if(d.images&&typeof d.images=="object"){console.log("[DEBUG] Syncing",Object.keys(d.images).length,"images from cloud");for(const[r,s]of Object.entries(d.images))Sa.has(r)||(Sa.set(r,s),console.log("[DEBUG] New image synced from cloud:",r))}d.appSettings&&(console.log("[DEBUG] Syncing app settings from cloud"),na.set(d.appSettings)),console.log("[DEBUG] Sync from cloud complete."),tt.set("success"),Na.set(Date.now())}catch(o){console.error("Failed to sync from cloud:",o),tt.set("error")}}async function ya(){ze(he).accessToken&&(wa&&clearTimeout(wa),wa=setTimeout(async()=>{try{console.log("Syncing to cloud..."),tt.set("syncing");const o=[],l=new Set;gt.forEach((_,P)=>{o.push({id:P,..._}),l.add(String(P))});const d=ze(Za).filter(_=>!l.has(String(_.id))),i=ze($a).filter(_=>!l.has(String(_.id))),r=ze(us).filter(_=>!l.has(String(_.id))),s=ze(ps).filter(_=>!l.has(String(_.id))),v={};Sa.forEach((_,P)=>{v[P]=_});const x={characters:d,campaigns:i,enemies:r,encounters:s,images:v,deletedIds:o,appSettings:ze(na),timestamp:Date.now(),version:1,appName:"WeirdWizardVault"};console.log("[DEBUG] Uploading to cloud:",{charactersCount:x.characters.length,campaignsCount:x.campaigns.length,enemiesCount:r.length,imagesCount:Object.keys(v).length,deletedIdsCount:o.length}),await ao(x),console.log("Sync to cloud complete."),tt.set("success"),Na.set(Date.now())}catch(o){console.error("Failed to sync to cloud:",o),tt.set("error")}},2e3))}var oo=m('<img alt="Avatar" class="w-10 h-10 rounded-full border-2 border-indigo-500/50 shadow-lg object-cover"/>'),ro=m('<div class="w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white border-2 border-indigo-400/30 shadow-lg"><span class="font-bold text-lg"><!></span></div>'),no=m('<div class="absolute right-0 top-full mt-2 w-48 bg-slate-800 rounded-xl shadow-xl border border-slate-700 p-2 z-50 animate-in fade-in slide-in-from-top-2"><div class="px-3 py-2 border-b border-slate-700 mb-2"><p class="text-xs text-slate-400"> </p> <p class="text-sm font-bold text-white truncate"> </p></div> <button class="w-full flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors text-sm"><!> </button></div>  <div class="fixed inset-0 z-40"></div>',1),io=m('<div class="relative"><button><!> <div class="absolute bottom-1 right-1 w-3 h-3 bg-emerald-500 rounded-full border-2 border-slate-900"></div></button> <!></div>'),lo=m('<div class="w-4 h-4 rounded-full border-2 border-slate-300 border-t-slate-600 animate-spin"></div>'),co=is('<svg class="w-4 h-4" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg>'),vo=m("<button><!> <span> </span></button>");function uo(c,o){mt(o,!0);const l=()=>me(he,"$googleSession",i),d=()=>me(At,"$t",i),[i,r]=Ot();let s=Ye(o,"className",3,""),v=ee(!1);var x=ie(),_=N(x);{var P=F=>{var te=io(),w=t(te);w.__click=()=>g(v,!n(v));var M=t(w);{var V=k=>{var y=oo();U(()=>Ve(y,"src",l().userProfile.picture)),u(k,y)},S=k=>{var y=ro(),C=t(y),j=t(C);{var E=Y=>{var D=ls();U(h=>f(D,h),[()=>l().userProfile.name[0].toUpperCase()]),u(Y,D)},oe=Y=>{Ta(Y,{size:20})};$(j,Y=>{l().userProfile?.name?Y(E):Y(oe,!1)})}e(C),e(y),u(k,y)};$(M,k=>{l().userProfile?.picture?k(V):k(S,!1)})}at(2),e(w);var B=a(w,2);{var T=k=>{var y=no(),C=N(y),j=t(C),E=t(j),oe=t(E,!0);e(E);var Y=a(E,2),D=t(Y,!0);e(Y),e(j);var h=a(j,2);h.__click=()=>{to(),g(v,!1)};var G=t(h);_s(G,{size:14});var W=a(G);e(h),e(C);var X=a(C,2);X.__click=()=>g(v,!1),U((J,L,ae)=>{f(oe,J),f(D,L),f(W,` ${ae??""}`)},[()=>d()("common.auth.signed_in_as"),()=>l().userProfile?.name??d()("common.auth.user"),()=>d()("common.auth.logout")]),u(k,y)};$(B,k=>{n(v)&&k(T)})}e(te),U(k=>{ye(w,1,`flex items-center gap-2 p-1 rounded-full hover:bg-slate-800 transition-colors border border-transparent hover:border-slate-700 ${s()??""}`),Ve(w,"title",k)},[()=>l().userProfile?.name||d()("common.auth.user")]),u(F,te)},q=F=>{var te=vo();te.__click=function(...T){ts?.apply(this,T)};var w=t(te);{var M=T=>{var k=lo();u(T,k)},V=T=>{var k=co();u(T,k)};$(w,T=>{l().isInited?T(V,!1):T(M)})}var S=a(w,2),B=t(S,!0);e(S),e(te),U(T=>{te.disabled=!l().isInited,ye(te,1,`flex items-center gap-2 px-4 py-2 bg-white text-slate-900 hover:bg-slate-100 rounded-full font-bold text-xs transition-all shadow-lg hover:shadow-xl hover:scale-105 disabled:opacity-50 disabled:cursor-wait disabled:scale-100 disabled:shadow-none ${s()??""}`),f(B,T)},[()=>d()("common.auth.login")]),u(F,te)};$(_,F=>{l().signedIn?F(P):F(q,!1)})}u(c,x),ht(),r()}bt(["click"]);var po=m('<span class="w-2 h-2 rounded-full bg-amber-500"></span> <span class="text-amber-400">Auth: Init Failed</span>',1),go=m('<span class="w-2 h-2 rounded-full bg-amber-500"></span> <span class="text-amber-400">Auth: Not Ready</span>',1),fo=m('<span class="w-2 h-2 rounded-full bg-slate-600"></span> <span> </span>',1),mo=m('<span class="w-2 h-2 rounded-full bg-indigo-500 animate-pulse"></span> <span> </span>',1),ho=m('<span class="w-2 h-2 rounded-full bg-emerald-500"></span> <span> </span>',1),bo=m('<span class="w-2 h-2 rounded-full bg-red-500"></span> <span> </span>',1),xo=m('<span class="w-2 h-2 rounded-full bg-slate-500"></span> <span> </span>',1),_o=m('<div class="mt-1.5 pt-1.5 border-t border-slate-800 text-[9px] text-slate-400 opacity-80 font-medium flex justify-between items-center gap-4"><span> </span> <span> </span></div>'),wo=m('<div class="mt-1 text-[9px] text-slate-400 opacity-60 italic"> </div>'),yo=m('<div class="absolute top-full right-0 mt-3 whitespace-nowrap bg-slate-900/95 backdrop-blur-md text-white text-[10px] font-bold py-2 px-3 rounded-lg shadow-2xl border border-slate-700/50 z-[100] pointer-events-none min-w-[120px]"><div class="flex items-center gap-2"><!></div> <!></div>'),ko=m('<div class="relative flex items-center"><button class="flex items-center justify-center p-2 rounded-xl hover:bg-slate-800/50 transition-all active:scale-95 group focus:outline-none"><!></button> <!></div>');function $o(c,o){mt(o,!0);const l=()=>me(he,"$googleSession",v),d=()=>me(At,"$t",v),i=()=>me(ia,"$authError",v),r=()=>me(tt,"$syncStatus",v),s=()=>me(Na,"$lastSyncTime",v),[v,x]=Ot();let _=ee(!1);function P(B){return new Date(B).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}var q=ko(),F=t(q);F.__click=()=>l().signedIn?za():ts();var te=t(F);{var w=B=>{Ps(B,{size:20,class:"text-amber-500"})},M=B=>{var T=ie(),k=N(T);{var y=j=>{Cs(j,{size:20,class:"text-slate-600 group-hover:text-slate-400"})},C=j=>{var E=ie(),oe=N(E);{var Y=h=>{Ns(h,{size:20,class:"animate-spin text-indigo-400"})},D=h=>{var G=ie(),W=N(G);{var X=L=>{bs(L,{size:20,class:"text-emerald-400 group-hover:text-emerald-300"})},J=L=>{var ae=ie(),b=N(ae);{var I=R=>{Ss(R,{size:20,class:"text-red-400"})},A=R=>{Es(R,{size:20,class:"text-slate-400 group-hover:text-slate-300"})};$(b,R=>{r()==="error"?R(I):R(A,!1)},!0)}u(L,ae)};$(W,L=>{r()==="success"?L(X):L(J,!1)},!0)}u(h,G)};$(oe,h=>{r()==="syncing"?h(Y):h(D,!1)},!0)}u(j,E)};$(k,j=>{l().signedIn?j(C,!1):j(y)},!0)}u(B,T)};$(te,B=>{i()?B(w):B(M,!1)})}e(F);var V=a(F,2);{var S=B=>{var T=yo(),k=t(T),y=t(k);{var C=D=>{var h=po();at(2),u(D,h)},j=D=>{var h=ie(),G=N(h);{var W=J=>{var L=go();at(2),u(J,L)},X=J=>{var L=ie(),ae=N(L);{var b=A=>{var R=fo(),re=a(N(R),2),le=t(re,!0);e(re),U(ge=>f(le,ge),[()=>d()("common.status.offline")]),u(A,R)},I=A=>{var R=ie(),re=N(R);{var le=de=>{var se=mo(),be=a(N(se),2),ve=t(be,!0);e(be),U(Q=>f(ve,Q),[()=>d()("common.status.syncing")]),u(de,se)},ge=de=>{var se=ie(),be=N(se);{var ve=K=>{var ke=ho(),Ne=a(N(ke),2),Se=t(Ne,!0);e(Ne),U(qe=>f(Se,qe),[()=>d()("common.status.saved")]),u(K,ke)},Q=K=>{var ke=ie(),Ne=N(ke);{var Se=Pe=>{var Ie=bo(),Me=a(N(Ie),2),st=t(Me,!0);e(Me),U(We=>f(st,We),[()=>d()("common.status.error")]),u(Pe,Ie)},qe=Pe=>{var Ie=xo(),Me=a(N(Ie),2),st=t(Me,!0);e(Me),U(We=>f(st,We),[()=>d()("common.status.synced")]),u(Pe,Ie)};$(Ne,Pe=>{r()==="error"?Pe(Se):Pe(qe,!1)},!0)}u(K,ke)};$(be,K=>{r()==="success"?K(ve):K(Q,!1)},!0)}u(de,se)};$(re,de=>{r()==="syncing"?de(le):de(ge,!1)},!0)}u(A,R)};$(ae,A=>{l().signedIn?A(I,!1):A(b)},!0)}u(J,L)};$(G,J=>{i()==="not_initialized"?J(W):J(X,!1)},!0)}u(D,h)};$(y,D=>{i()==="init_failed"?D(C):D(j,!1)})}e(k);var E=a(k,2);{var oe=D=>{var h=_o(),G=t(h),W=t(G,!0);e(G);var X=a(G,2),J=t(X,!0);e(X),e(h),U((L,ae)=>{f(W,L),f(J,ae)},[()=>d()("common.status.last_sync"),()=>P(s())]),u(D,h)},Y=D=>{var h=ie(),G=N(h);{var W=X=>{var J=wo(),L=t(J,!0);e(J),U(ae=>f(L,ae),[()=>d()("common.auth.login")]),u(X,J)};$(G,X=>{l().signedIn||X(W)},!0)}u(D,h)};$(E,D=>{l().signedIn&&s()?D(oe):D(Y,!1)})}e(T),ft(3,T,()=>Xa,()=>({duration:150})),u(B,T)};$(V,B=>{n(_)&&B(S)})}e(q),U(B=>Ve(F,"aria-label",B),[()=>d()("common.status.label")]),Et("mouseenter",F,()=>g(_,!0)),Et("mouseleave",F,()=>g(_,!1)),Et("focus",F,()=>g(_,!0)),Et("blur",F,()=>g(_,!1)),u(c,q),ht(),x()}bt(["click"]);var So=m('<span class="text-[10px] text-slate-500 font-medium leading-tight mt-0.5"> </span>'),Co=m('<div class="flex flex-col"><span> </span> <!></div>'),Eo=m('<div class="absolute inset-0 flex items-center justify-center"><div class="w-1.5 h-1.5 rounded-full bg-indigo-600"></div></div>'),zo=m("<div><!> <div><div><!></div></div></div>");function Io(c,o){mt(o,!0);let l=Ye(o,"checked",3,!1),d=Ye(o,"label",3,""),i=Ye(o,"description",3,""),r=Ye(o,"disabled",3,!1);function s(){r()||o.onToggle(!l())}var v=zo();v.__click=s;var x=t(v);{var _=w=>{var M=Co(),V=t(M),S=t(V,!0);e(V);var B=a(V,2);{var T=k=>{var y=So(),C=t(y,!0);e(y),U(()=>f(C,i())),u(k,y)};$(B,k=>{i()&&k(T)})}e(M),U(()=>{ye(V,1,`text-sm font-black uppercase tracking-widest transition-colors ${l()?"text-indigo-400":"text-slate-300 group-hover:text-white"}`),f(S,d())}),u(w,M)};$(x,w=>{(d()||i())&&w(_)})}var P=a(x,2),q=t(P),F=t(q);{var te=w=>{var M=Eo();u(w,M)};$(F,w=>{l()&&w(te)})}e(q),e(P),e(v),U(()=>{ye(v,1,`flex items-center justify-between gap-4 p-1 group ${r()?"opacity-50 grayscale":"cursor-pointer"}`),ye(P,1,`relative w-12 h-6 rounded-full transition-all duration-300 ease-in-out ${l()?"bg-indigo-600 shadow-[0_0_15px_rgba(79,70,229,0.4)]":"bg-slate-800 border border-white/5"}`),ye(q,1,`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-all duration-300 ease-[cubic-bezier(0.34,1.56,0.64,1)] shadow-md ${l()?"translate-x-6":"translate-x-0"}`)}),u(c,v),ht()}bt(["click"]);var To=m('<button class="p-2 -ml-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all active:scale-95"><!></button>'),No=m('<div class="p-2 bg-indigo-500/10 rounded-xl border border-indigo-500/20"><!></div>'),Po=m('<button class="p-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all active:scale-95"><!></button>'),Mo=m('<div class="p-4 bg-white/[0.02] border-t border-white/5"><button class="w-full bg-slate-800 hover:bg-slate-700 text-white font-black uppercase tracking-widest py-3 rounded-2xl transition-all active:scale-[0.98] text-sm"> </button></div>'),jo=m('<div class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center md:p-4"><div class="bg-slate-900 border-white/10 w-full md:max-w-md md:rounded-3xl shadow-2xl overflow-hidden flex flex-col h-full md:h-auto md:max-h-[90vh]"><div class="px-6 py-6 border-b border-white/5 flex items-center justify-between bg-white/[0.02]"><div class="flex items-center gap-3"><!> <div><h2 class="text-lg font-black text-white uppercase tracking-tight"> </h2> <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </p></div></div> <!></div> <div class="flex-1 p-6 space-y-8 overflow-y-auto custom-scrollbar pb-32 md:pb-6 svelte-14b6qd9"><div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-indigo-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="space-y-6"><!></div></div> <div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-amber-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="grid grid-cols-1 gap-2"><button><div class="flex items-center gap-3"><span class="text-xl">ðŸ‡§ðŸ‡·</span> <span class="font-bold">PortuguÃªs (Brasil)</span></div> <!></button> <button><div class="flex items-center gap-3"><span class="text-xl">ðŸ‡ºðŸ‡¸</span> <span class="font-bold">English (US)</span></div> <!></button></div></div> <div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-emerald-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="bg-white/5 rounded-2xl p-4 border border-white/5"><div class="flex justify-between items-center opacity-50 cursor-not-allowed"><div class="flex flex-col"><span class="text-sm font-black uppercase tracking-widest text-slate-400"> </span> <span class="text-[10px] text-slate-500"> </span></div> <div class="w-12 h-6 bg-slate-800 rounded-full border border-white/5 p-1 relative"><div class="w-4 h-4 bg-slate-600 rounded-full"></div></div></div></div></div> <div class="pt-4 border-t border-white/5 flex flex-col items-center gap-4 text-center"><p class="text-[10px] text-slate-500 leading-relaxed max-w-[250px]"> </p></div></div> <!></div></div>');function Go(c,o){mt(o,!0);const l=()=>me(At,"$t",r),d=()=>me(na,"$appSettings",r),i=()=>me(ka,"$locale",r),[r,s]=Ot();let v=Ye(o,"isOpen",3,!1),x=ee(!1);Ia(()=>{const w=()=>g(x,window.innerWidth<768);return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)});function _(w,M){na.update(V=>({...V,[w]:M}))}function P(w){ka.set(w),localStorage.setItem("user_locale",w)}var q=ie(),F=N(q);{var te=w=>{var M=jo();M.__click=function(...O){o.onClose?.apply(this,O)};var V=t(M);V.__click=O=>O.stopPropagation();var S=t(V),B=t(S),T=t(B);{var k=O=>{var ne=To();ne.__click=function(...Ue){o.onClose?.apply(this,Ue)};var ue=t(ne);ws(ue,{size:24}),e(ne),u(O,ne)},y=O=>{var ne=No(),ue=t(ne);Ea(ue,{size:20,class:"text-indigo-400"}),e(ne),u(O,ne)};$(T,O=>{n(x)?O(k):O(y,!1)})}var C=a(T,2),j=t(C),E=t(j,!0);e(j);var oe=a(j,2),Y=t(oe,!0);e(oe),e(C),e(B);var D=a(B,2);{var h=O=>{var ne=Po();ne.__click=function(...Ue){o.onClose?.apply(this,Ue)};var ue=t(ne);Ja(ue,{size:24}),e(ne),u(O,ne)};$(D,O=>{n(x)||O(h)})}e(S);var G=a(S,2),W=t(G),X=t(W),J=t(X);Is(J,{size:16});var L=a(J,2),ae=t(L,!0);e(L),e(X);var b=a(X,2),I=t(b);{let O=Ct(()=>l()("settings.options.auto_open_history.label")),ne=Ct(()=>l()("settings.options.auto_open_history.description"));Io(I,{get checked(){return d().autoOpenHistory},onToggle:ue=>_("autoOpenHistory",ue),get label(){return n(O)},get description(){return n(ne)}})}e(b),e(W);var A=a(W,2),R=t(A),re=t(R);Ca(re,{size:16});var le=a(re,2),ge=t(le,!0);e(le),e(R);var de=a(R,2),se=t(de);se.__click=()=>P("pt");var be=a(t(se),2);{var ve=O=>{Aa(O,{size:18,class:"text-indigo-400"})};$(be,O=>{i()==="pt"&&O(ve)})}e(se);var Q=a(se,2);Q.__click=()=>P("en");var K=a(t(Q),2);{var ke=O=>{Aa(O,{size:18,class:"text-indigo-400"})};$(K,O=>{i()==="en"&&O(ke)})}e(Q),e(de),e(A);var Ne=a(A,2),Se=t(Ne),qe=t(Se);Ts(qe,{size:16});var Pe=a(qe,2),Ie=t(Pe,!0);e(Pe),e(Se);var Me=a(Se,2),st=t(Me),We=t(st),zt=t(We),xt=t(zt,!0);e(zt);var Jt=a(zt,2),va=t(Jt,!0);e(Jt),e(We),at(2),e(st),e(Me),e(Ne);var It=a(Ne,2),Ut=t(It),Kt=t(Ut,!0);e(Ut),e(It),e(G);var _t=a(G,2);{var Xt=O=>{var ne=Mo(),ue=t(ne);ue.__click=function(...ot){o.onClose?.apply(this,ot)};var Ue=t(ue,!0);e(ue),e(ne),U(ot=>f(Ue,ot),[()=>l()("common.buttons.close")]),u(O,ne)};$(_t,O=>{n(x)||O(Xt)})}e(V),e(M),U((O,ne,ue,Ue,ot,ua,Ft,pa)=>{f(E,O),f(Y,ne),f(ae,ue),f(ge,Ue),ye(se,1,`flex items-center justify-between px-4 py-3 rounded-2xl border transition-all ${i()==="pt"?"bg-indigo-600/10 border-indigo-500/50 text-white":"bg-white/5 border-white/5 text-slate-400 hover:bg-white/10"}`),ye(Q,1,`flex items-center justify-between px-4 py-3 rounded-2xl border transition-all ${i()==="en"?"bg-indigo-600/10 border-indigo-500/50 text-white":"bg-white/5 border-white/5 text-slate-400 hover:bg-white/10"}`),f(Ie,ot),f(xt,ua),f(va,Ft),f(Kt,pa)},[()=>l()("settings.title"),()=>l()("settings.description"),()=>l()("settings.sections.interface"),()=>l()("common.labels.language")||"Language",()=>l()("settings.sections.appearance"),()=>l()("settings.options.theme.label"),()=>l()("settings.options.theme.description"),()=>l()("settings.sync_info")]),ft(1,V,()=>Bt,()=>n(x)?{x:"100%",duration:600,easing:Gt}:{y:20,duration:300}),ft(2,V,()=>Bt,()=>n(x)?{x:"100%",duration:600,easing:Gt}:{y:20,duration:300}),ft(3,M,()=>Xa,()=>({duration:200})),u(w,M)};$(F,w=>{v()&&w(te)})}u(c,q),ht(),s()}bt(["click"]);var Bo=m('<span class="text-[10px] text-slate-400 font-medium"> </span>'),Do=m('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all relative group flex flex-col shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="flex justify-between items-start mb-4"><div class="flex-1"><h3 class="font-black text-xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate pr-16"> </h3> <div class="flex items-center gap-2 mt-1 flex-wrap"><span class="text-[10px] bg-indigo-500/10 text-indigo-400 font-black px-2 py-0.5 rounded uppercase tracking-wider"> </span> <span class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </span> <!></div> <div class="mt-2 flex items-center gap-2"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800 text-[9px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div></div></div> <div class="flex items-center gap-1"><button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button></div></div> <div class="space-y-3 mb-6"><div class="flex items-center justify-between text-xs text-slate-400"><span class="flex items-center gap-1.5 opacity-60"><!> </span> <span class="font-bold text-slate-300 truncate max-w-[150px]"> </span></div></div> <button class="w-full bg-slate-800 hover:bg-indigo-600 text-white py-3 rounded-2xl font-bold transition-all active:scale-[0.98] border border-slate-700 hover:border-indigo-400/30 flex items-center justify-center gap-2"> <!></button></div>'),Ao=m('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 col-start-1 row-start-1 w-full"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold"> </span></button></div>'),Oo=m('<span class="text-[9px] bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded-full border border-emerald-500/20 font-black uppercase tracking-widest flex items-center gap-1"><!> </span>'),Uo=m('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="mb-4"><div class="flex justify-between items-start mb-1"><h3 class="font-black text-2xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight"> </h3> <div class="flex items-center gap-1"><!> <button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button></div></div> <p class="text-indigo-400 text-[10px] font-black uppercase tracking-[0.2em] mb-3"> </p> <div class="mb-3"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800 text-[9px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div></div> <p class="text-sm text-slate-400 line-clamp-2 leading-relaxed h-10"> </p></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-2xl font-bold flex items-center justify-center gap-2 border border-indigo-400/20 shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98]"><!> </button></div>'),Fo=m('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-emerald-500/40 transition-all group relative flex flex-col justify-between shadow-xl border-t-white/5"><div><h3 class="font-black text-2xl text-white group-hover:text-emerald-400 mb-2 uppercase tracking-tight"> </h3> <div class="flex items-center gap-2 mb-4"><div class="px-2 py-0.5 bg-slate-800 rounded text-[9px] text-slate-400 font-black uppercase tracking-widest"> </div> <div class="flex items-center gap-1 px-2 py-0.5 bg-emerald-500/10 rounded text-[9px] text-emerald-400 font-black uppercase tracking-wider"><div class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></div> </div></div> <div class="mb-4"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800/50 text-[9px] text-slate-400 border border-slate-700/50 font-bold uppercase tracking-wider"><!> </div></div> <p class="text-sm text-slate-400 line-clamp-3 leading-relaxed mb-6 h-15"> </p></div> <button class="w-full bg-emerald-600 hover:bg-emerald-500 text-white py-3 rounded-2xl font-black uppercase text-xs tracking-[0.1em] flex items-center justify-center gap-2 border border-emerald-400/20 transition-all active:scale-[0.98] group"> <!></button></div>'),Lo=m('<div class="col-span-full py-12 flex flex-col items-center text-center opacity-40"><div class="w-16 h-16 bg-slate-800/50 rounded-full flex items-center justify-center text-slate-600 mb-3 border border-slate-700 border-dashed"><!></div> <h3 class="text-lg font-black uppercase tracking-widest text-slate-500"> </h3> <p class="text-slate-600 max-w-sm mt-2 text-sm"> </p></div>'),Ro=m('<div class="space-y-8 col-start-1 row-start-1 w-full"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold"> </span></button></div> <div><div class="flex items-center gap-3 mb-4"><div class="h-px flex-1 bg-slate-800"></div> <h3 class="text-xs font-black uppercase tracking-widest text-emerald-400 flex items-center gap-2"><!> </h3> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><!> <!></div></div></div>'),Ho=m('<div class="fixed top-0 left-0 w-full flex justify-center items-center pointer-events-none z-[100] transition-all duration-300"><div class="bg-indigo-600 rounded-full p-2.5 shadow-xl border border-indigo-500/50 text-white"><!></div></div> <div class="animate-in fade-in px-4 md:px-8 max-w-7xl mx-auto pb-32 md:pb-20"><header class="mb-8 flex justify-between items-center border-b border-slate-800/50 pt-4 md:pt-8 pb-4 sticky top-0 bg-slate-950/80 backdrop-blur-md z-40 -mx-4 px-4 md:-mx-8 md:px-8 transition-all"><div class="flex items-center gap-3"><img alt="Schwalb Vault Logo" class="h-10 md:h-14 w-auto rounded-xl"/> <h1 class="text-xl md:text-3xl font-bold text-white flex items-center gap-2 text-gradient m-0 leading-none"><span class="hidden md:inline">Schwalb Vault</span> <span class="md:hidden">Schwalb Vault</span></h1></div> <div class="hidden md:flex absolute left-1/2 -translate-x-1/2 bg-slate-900/50 p-1.5 rounded-2xl border border-slate-800 glass shadow-xl backdrop-blur-md"><div class="relative flex"><div class="absolute inset-y-0 w-1/2 bg-indigo-600 rounded-xl transition-transform duration-300 ease-out shadow-lg shadow-indigo-500/20"></div> <button><!> </button> <button><!> </button></div></div> <div class="flex items-center justify-end min-w-[40px] gap-3"><!> <button class="p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-all"><!></button> <!></div></header> <div class="md:hidden fixed bottom-0 left-0 right-0 bg-slate-900/90 backdrop-blur-xl border-t border-slate-800 shadow-2xl rounded-t-2xl z-50 p-2 pb-safe"><div class="relative flex justify-between"><div class="absolute inset-y-0 w-1/2 bg-indigo-600/20 rounded-xl transition-transform duration-300 ease-out"></div> <button><!> <span class="transition-all duration-300"> </span></button> <button><!> <span class="transition-all duration-300"> </span></button></div></div> <div class="min-h-[500px] grid items-start relative"><!></div> <!> <!> <!> <!> <!></div>',1);function Vo(c,o){mt(o,!0);const l=()=>me(he,"$googleSession",v),d=()=>me(Za,"$liveCharacters",v),i=()=>me($a,"$liveCampaigns",v),r=()=>me(At,"$t",v),s=()=>me(fs,"$publicCampaigns",v),[v,x]=Ot();let _=ee(0),P=ee(0),q=ee(!1),F=ee(!1);const te=80;function w(p){window.scrollY===0&&(g(_,p.touches[0].clientY,!0),g(q,!0))}function M(p){if(!n(q))return;const Z=p.touches[0].clientY-n(_);Z>0&&window.scrollY<=0?g(P,Math.min(Z*.4,120),!0):(g(q,!1),g(P,0))}async function V(){if(n(q))if(g(q,!1),n(P)>te){g(F,!0),g(P,60);try{navigator&&navigator.vibrate&&navigator.vibrate(50),await za()}finally{setTimeout(()=>{g(F,!1),g(P,0)},1e3)}}else g(P,0)}Ia(()=>{eo();const p=localStorage.getItem("user_locale");return p&&ka.set(p),document.addEventListener("touchmove",M,{passive:!1}),()=>{document.removeEventListener("touchmove",M)}});let S=ee("characters"),B=ee("characters"),T=ee(!1);qt(()=>{n(S)!==n(B)&&g(B,n(S),!0)}),qt(()=>{l().signedIn&&za()}),qt(()=>{l().signedIn&&(d(),i(),ya())});let k=ee(!1),y=ee(null);function C(p){g(y,p,!0),g(k,!0)}function j(p){if(!n(y))return;const H=n(y).id,z={..._e.get(H),...p};_e.set(H,z),g(k,!1)}let E=ee(!1),oe=ee("{}");const Y={name:"",playerName:"",ancestry:"Humano",novicePath:"",level:0,defense:8,health:5,system:et};function D(){g(oe,JSON.stringify(Y),!0),g(E,!0)}async function h(p){const H=Da();let Z;p.system==="sofdl"?Z={id:H,system:"sofdl",name:p.name,playerName:p.playerName||"",ancestry:p.ancestry,level:p.level,attributes:{strength:10,agility:10,intellect:10,will:10},perception:10,defense:p.defense||10,health:p.health||10,healingRate:Math.floor((p.health||10)/4),size:1,speed:10,power:0,damage:0,insanity:0,corruption:0,description:"",notes:"",professions:[],languages:["Comum"],talents:[],spells:[],equipment:[],effects:[]}:Z={id:H,name:p.name,playerName:p.playerName||"",ancestry:p.ancestry,level:p.level,defense:p.defense,system:p.system||et,paths:{novice:p.novicePath||"-",expert:"-",master:"-"},attributes:[{name:"ForÃ§a",value:10,key:"str"},{name:"Agilidade",value:10,key:"agi"},{name:"Intelecto",value:10,key:"int"},{name:"Vontade",value:10,key:"wil"}],speed:5,health:p.health,currentHealth:p.health,spells:[],talents:[],equipment:[],afflictions:[],effects:[],currency:{gp:0,sp:0,cp:0},languages:["Comum"]},_e.set(H,Z),g(E,!1),sa(oa("/characters/[id]",{id:H}))}let G=ee(!1),W=ee(null),X=ee("{}");const J={name:"",description:"",gmName:"",system:et};function L(p=null){g(W,p?p.id:null,!0),g(X,JSON.stringify(p||J),!0),g(G,!0)}async function ae(p){const H=n(W)||Da(),Z=n(W)?we.get(H):{},z={...Z,id:H,name:p.name,description:p.description,gmName:p.gmName,players:Z.players||[],backupEnabled:p.backupEnabled||!1,backupHash:p.backupHash||"",system:p.system||et};p.removePassword?delete z.passwordHash:p.password&&(z.passwordHash=await ks(p.password)),we.set(H,z),g(G,!1)}let b=ee(!1),I=ee(qa({title:"",message:"",onConfirm:()=>{}}));function A(p){g(I,{title:r()("dashboard.campaigns.delete_title"),message:r()("dashboard.campaigns.delete_message"),onConfirm:()=>{console.log("[DEBUG] Deleting campaign with ID:",p);let H=0;for(const Z of we.keys()){const z=we.get(Z);(Z===p||z&&z.id===p)&&(console.log("[DEBUG] Found match for deletion - Key:",Z,"Camp ID:",z?.id),we.delete(Z),H++)}console.log("[DEBUG] Total entries deleted from map:",H),gt.set(p,{type:"campaign",deletedAt:Date.now()}),console.log("[DEBUG] Deletion tracked in deletedIdsMap"),ya(),g(b,!1)}},!0),g(b,!0)}function R(p){g(I,{title:r()("dashboard.characters.delete_title"),message:r()("dashboard.characters.delete_message"),onConfirm:()=>{ze($a).forEach(z=>{let pe=!1;z.members&&z.members.some(xe=>xe.id===p)&&(z.members=z.members.filter(xe=>xe.id!==p),pe=!0),z.sessionRoster&&z.sessionRoster.includes(p)&&(z.sessionRoster=z.sessionRoster.filter(xe=>xe!==p),pe=!0),z.activeEnemies&&z.activeEnemies.some(xe=>xe.id===p)&&(z.activeEnemies=z.activeEnemies.filter(xe=>xe.id!==p),pe=!0),pe&&we.set(z.id,z)}),console.log("[DEBUG] Deleting character with ID:",p);let Z=0;for(const z of _e.keys()){const pe=_e.get(z);(z===p||pe&&pe.id===p)&&(console.log("[DEBUG] Found match for deletion - Key:",z,"Char ID:",pe?.id),_e.delete(z),Z++)}console.log("[DEBUG] Total entries deleted from map:",Z),gt.set(p,{type:"character",deletedAt:Date.now()}),console.log("[DEBUG] Deletion tracked in deletedIdsMap"),ya(),g(b,!1)}},!0),g(b,!0)}var re=Ho();Et("touchstart",ma,w),Et("touchmove",ma,M),Et("touchend",ma,V);var le=N(re),ge=t(le),de=t(ge);{let p=Ct(()=>n(F)?"animate-spin":""),H=Ct(()=>n(P)*2);zs(de,{get class(){return n(p)},size:20,get style(){return`transform: rotate(${n(H)??""}deg)`}})}e(ge),e(le);var se=a(le,2),be=t(se),ve=t(be),Q=t(ve);at(2),e(ve);var K=a(ve,2),ke=t(K),Ne=t(ke),Se=a(Ne,2);Se.__click=()=>g(S,"characters");var qe=t(Se);Oa(qe,{size:18});var Pe=a(qe);e(Se);var Ie=a(Se,2);Ie.__click=()=>g(S,"campaigns");var Me=t(Ie);_a(Me,{size:18});var st=a(Me);e(Ie),e(ke),e(K);var We=a(K,2),zt=t(We);$o(zt,{});var xt=a(zt,2);xt.__click=()=>g(T,!0);var Jt=t(xt);Ea(Jt,{size:20}),e(xt);var va=a(xt,2);uo(va,{}),e(We),e(be);var It=a(be,2),Ut=t(It),Kt=t(Ut),_t=a(Kt,2);_t.__click=()=>g(S,"characters");var Xt=t(_t);{let p=Ct(()=>n(S)==="characters"?2.5:2);Oa(Xt,{size:20,get strokeWidth(){return n(p)},class:"transition-all duration-300"})}var O=a(Xt,2),ne=t(O,!0);e(O),e(_t);var ue=a(_t,2);ue.__click=()=>g(S,"campaigns");var Ue=t(ue);{let p=Ct(()=>n(S)==="campaigns"?2.5:2);_a(Ue,{size:20,get strokeWidth(){return n(p)},class:"transition-all duration-300"})}var ot=a(Ue,2),ua=t(ot,!0);e(ot),e(ue),e(Ut),e(It);var Ft=a(It,2),pa=t(Ft);{var ss=p=>{var H=Ao(),Z=t(H);Wt(Z,1,d,wt=>wt.id,(wt,Ce)=>{var yt=Do(),Tt=t(yt),Nt=t(Tt),Lt=t(Nt),ea=t(Lt,!0);e(Lt);var Pt=a(Lt,2),Rt=t(Pt),ga=t(Rt,!0);e(Rt);var fe=a(Rt,2),ce=t(fe);e(fe);var Ee=a(fe,2);{var je=He=>{var Ze=Bo(),Qe=t(Ze);e(Ze),U(()=>f(Qe,`â€¢ ${n(Ce).playerName??""}`)),u(He,Ze)};$(Ee,He=>{n(Ce).playerName&&He(je)})}e(Pt);var $e=a(Pt,2),Fe=t($e),Ge=t(Fe);ra(Ge,{size:10});var Le=a(Ge);e(Fe),e($e),e(Nt);var Je=a(Nt,2),Te=t(Je);Te.__click=()=>C(n(Ce));var Ke=t(Te);Ea(Ke,{size:16}),e(Te);var Re=a(Te,2);Re.__click=()=>R(n(Ce).id);var Xe=t(Re);Ba(Xe,{size:16}),e(Re),e(Je),e(Tt);var rt=a(Tt,2),nt=t(rt),it=t(nt),lt=t(it);_a(lt,{size:12});var dt=a(lt);e(it);var ct=a(it,2),Ht=t(ct,!0);e(ct),e(nt),e(rt);var vt=a(rt,2);vt.__click=()=>sa(oa("/characters/[id]",{id:n(Ce).id}));var Mt=t(vt),kt=a(Mt);Ua(kt,{size:14,fill:"currentColor"}),e(vt),e(yt),U((He,Ze,Qe,$t,jt,Vt)=>{f(ea,n(Ce).name),f(ga,n(Ce).ancestry||"Humano"),f(ce,`${He??""} ${n(Ce).level??""}`),f(Le,` ${Ze??""}`),Ve(Te,"title",Qe),Ve(Re,"title",$t),f(dt,` ${jt??""}`),f(Ht,n(Ce).paths?.novice||"-"),f(Mt,`${Vt??""} `)},[()=>r()("common.labels.level"),()=>xa(n(Ce).system).name,()=>r()("common.buttons.settings"),()=>r()("common.buttons.delete"),()=>r()("dashboard.characters.paths"),()=>r()("dashboard.characters.open_sheet")]),u(wt,yt)});var z=a(Z,2);z.__click=()=>D();var pe=t(z),xe=t(pe);ba(xe,{size:32}),e(pe);var Zt=a(pe,2),Qt=t(Zt,!0);e(Zt),e(z),e(H),U(wt=>f(Qt,wt),[()=>r()("dashboard.characters.new_character")]),ft(1,H,()=>Bt,()=>({x:-100,duration:300,easing:Gt})),ft(2,H,()=>Bt,()=>({x:-100,duration:300,easing:Gt})),u(p,H)},os=p=>{var H=Ro(),Z=t(H),z=t(Z);Wt(z,1,i,fe=>fe.id,(fe,ce)=>{var Ee=Uo(),je=t(Ee),$e=t(je),Fe=t($e),Ge=t(Fe,!0);e(Fe);var Le=a(Fe,2),Je=t(Le);{var Te=Qe=>{var $t=Oo(),jt=t($t);Ca(jt,{size:10});var Vt=a(jt);e($t),U(fa=>f(Vt,` ${fa??""}`),[()=>r()("dashboard.campaigns.published")]),u(Qe,$t)};$(Je,Qe=>{n(ce).isPublished&&Qe(Te)})}var Ke=a(Je,2);Ke.__click=()=>L(n(ce));var Re=t(Ke);cs(Re,{size:16}),e(Ke);var Xe=a(Ke,2);Xe.__click=()=>A(n(ce).id);var rt=t(Xe);Ba(rt,{size:16}),e(Xe),e(Le),e($e);var nt=a($e,2),it=t(nt,!0);e(nt);var lt=a(nt,2),dt=t(lt),ct=t(dt);ra(ct,{size:10});var Ht=a(ct);e(dt),e(lt);var vt=a(lt,2),Mt=t(vt,!0);e(vt),e(je);var kt=a(je,2);kt.__click=()=>sa(oa("/campaigns/[id]",{id:n(ce).id}));var He=t(kt);Ua(He,{size:18,fill:"currentColor"});var Ze=a(He);e(kt),e(Ee),U((Qe,$t,jt,Vt,fa,ns)=>{f(Ge,n(ce).name),Ve(Ke,"title",Qe),Ve(Xe,"title",$t),f(it,jt),f(Ht,` ${Vt??""}`),f(Mt,fa),f(Ze,` ${ns??""}`)},[()=>r()("common.buttons.edit"),()=>r()("common.buttons.delete"),()=>n(ce).gmName||r()("common.labels.master"),()=>xa(n(ce).system||et).name,()=>n(ce).description||r()("dashboard.campaigns.no_description"),()=>r()("dashboard.campaigns.start_session")]),u(fe,Ee)});var pe=a(z,2);pe.__click=()=>L();var xe=t(pe),Zt=t(xe);ba(Zt,{size:32}),e(xe);var Qt=a(xe,2),wt=t(Qt,!0);e(Qt),e(pe),e(Z);var Ce=a(Z,2),yt=t(Ce),Tt=a(t(yt),2),Nt=t(Tt);Ca(Nt,{size:14});var Lt=a(Nt);e(Tt),at(2),e(yt);var ea=a(yt,2),Pt=t(ea);Wt(Pt,1,s,fe=>fe.id,(fe,ce)=>{var Ee=Fo(),je=t(Ee),$e=t(je),Fe=t($e,!0);e($e);var Ge=a($e,2),Le=t(Ge),Je=t(Le,!0);e(Le);var Te=a(Le,2),Ke=a(t(Te));e(Te),e(Ge);var Re=a(Ge,2),Xe=t(Re),rt=t(Xe);ra(rt,{size:10});var nt=a(rt);e(Xe),e(Re);var it=a(Re,2),lt=t(it,!0);e(it),e(je);var dt=a(je,2);dt.__click=()=>sa(oa("/campaigns/[id]/invite",{id:n(ce).id}));var ct=t(dt),Ht=a(ct);ba(Ht,{size:18,class:"group-hover:rotate-90 transition-transform"}),e(dt),e(Ee),U((vt,Mt,kt,He,Ze)=>{f(Fe,n(ce).name),f(Je,vt),f(Ke,` ${Mt??""}`),f(nt,` ${kt??""}`),f(lt,He),f(ct,`${Ze??""} `)},[()=>n(ce).gmName||r()("common.labels.master"),()=>r()("dashboard.campaigns.online"),()=>xa(n(ce).system||et).name,()=>n(ce).description||r()("dashboard.campaigns.public_description"),()=>r()("dashboard.campaigns.join_adventure")]),u(fe,Ee)});var Rt=a(Pt,2);{var ga=fe=>{var ce=Lo(),Ee=t(ce),je=t(Ee);hs(je,{size:32}),e(Ee);var $e=a(Ee,2),Fe=t($e,!0);e($e);var Ge=a($e,2),Le=t(Ge,!0);e(Ge),e(ce),U((Je,Te)=>{f(Fe,Je),f(Le,Te)},[()=>r()("dashboard.campaigns.no_online_campaigns"),()=>r()("dashboard.campaigns.no_online_description")]),u(fe,ce)};$(Rt,fe=>{s().length===0&&fe(ga)})}e(ea),e(Ce),e(H),U((fe,ce)=>{f(wt,fe),f(Lt,` ${ce??""}`)},[()=>r()("dashboard.campaigns.new_campaign"),()=>r()("dashboard.campaigns.public_campaigns")]),ft(1,H,()=>Bt,()=>({x:100,duration:300,easing:Gt})),ft(2,H,()=>Bt,()=>({x:100,duration:300,easing:Gt})),u(p,H)};$(pa,p=>{n(S)==="characters"?p(ss):p(os,!1)})}e(Ft);var Pa=a(Ft,2);Vs(Pa,{get isOpen(){return n(E)},get initialData(){return n(oe)},onClose:()=>g(E,!1),onSave:h});var Ma=a(Pa,2);xs(Ma,{get isOpen(){return n(G)},get initialData(){return n(X)},onClose:()=>g(G,!1),onSave:ae});var ja=a(Ma,2);gs(ja,{get isOpen(){return n(b)},get title(){return n(I).title},get message(){return n(I).message},get onConfirm(){return n(I).onConfirm},onCancel:()=>g(b,!1)});var Ga=a(ja,2);Ks(Ga,{get isOpen(){return n(k)},get characterData(){return n(y)},onClose:()=>g(k,!1),onSave:j});var rs=a(Ga,2);Go(rs,{get isOpen(){return n(T)},onClose:()=>g(T,!1)}),e(se),U((p,H,Z,z,pe)=>{ha(le,`transform: translateY(${(n(F)?60:n(P))??""}px); opacity: ${n(P)>0?1:0}`),Ve(Q,"src",`${ms??""}/logo-black.webp`),ha(Ne,`transform: translateX(${n(S)==="campaigns"?"100%":"0%"})`),ye(Se,1,`relative z-10 px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${n(S)==="characters"?"text-white":"text-slate-400 hover:text-white"}`),f(Pe,` ${p??""}`),ye(Ie,1,`relative z-10 px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${n(S)==="campaigns"?"text-white":"text-slate-400 hover:text-white"}`),f(st,` ${H??""}`),Ve(xt,"title",Z),ha(Kt,`transform: translateX(${n(S)==="campaigns"?"100%":"0%"})`),ye(_t,1,`relative flex-1 py-3 rounded-xl text-xs font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 z-10 ${n(S)==="characters"?"text-indigo-400":"text-slate-500"}`),f(ne,z),ye(ue,1,`relative flex-1 py-3 rounded-xl text-xs font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 z-10 ${n(S)==="campaigns"?"text-indigo-400":"text-slate-500"}`),f(ua,pe)},[()=>r()("dashboard.tabs.characters"),()=>r()("dashboard.tabs.campaigns"),()=>r()("settings.title"),()=>r()("dashboard.tabs.characters"),()=>r()("dashboard.tabs.campaigns")]),u(c,re),ht(),x()}bt(["click"]);var Yo=m("<!> <!>",1);function ur(c){var o=Yo(),l=N(o);Us(l,{});var d=a(l,2);Vo(d,{}),u(c,o)}export{ur as component};
