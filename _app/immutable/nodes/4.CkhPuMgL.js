import"../chunks/DsnmJJEf.js";import{o as Be,p as ye,k as c,x as Yt,z as ea,j as _,B as t,y as a,A as r,T as fe,I as e,t as g,L as za,F as T,R as Pe,n as Xt,a2 as Zt,ag as Ea}from"../chunks/DA0UBnP0.js";import{d as ta,s as n,o as Ma,g as ga,e as ha}from"../chunks/BLQLsqF7.js";import{l as zt,s as Ct,i as j,p as Nt}from"../chunks/B8t1AzQE.js";import{s as aa,a as tt}from"../chunks/BxFuL_3h.js";import{e as Oe,s as je,i as et,$ as Gt,r as $t,a as Fe,m as wa,j as Ga}from"../chunks/BNAKlAka.js";import{p as Wa}from"../chunks/DxhMflQL.js";import{A as ja,d as Oa,m as fa,a as Ja,c as Ia,e as pt,n as ka,o as Qa,q as sa,k as Za,t as _a,u as ba,b as It,f as Na,g as ya,l as Xa}from"../chunks/CV-PqCZy.js";import{C as Ra,b as Ca,c as Pa,l as Ka,a as Ya}from"../chunks/CERjy4Pu.js";import{b as er}from"../chunks/BZw0xz31.js";import{U as tr,W as ar,r as Ta}from"../chunks/qohIlr3z.js";import{a as rr,A as $a,M as sr,G as pa,D as ir,b as nr,H as Aa,C as Da,c as or,I as lr,s as dr,d as vr,L as cr,S as ur,e as br}from"../chunks/B1LN9wQP.js";import{k as Ha}from"../chunks/CnIL6DSp.js";import{M as xr,X as xa,P as Kt,c as mr,T as va,b as _r,a as fr}from"../chunks/_qXVQNaj.js";import"../chunks/CY1_wl6H.js";import{I as Et,s as Mt}from"../chunks/bAp6L4kg.js";import{S as pr,G as gr,P as La,C as hr}from"../chunks/BSac6KtG.js";import{C as Sa}from"../chunks/DmrB5X_H.js";import{b as yr}from"../chunks/GrMvDIpR.js";import{g as wr}from"../chunks/DgO2ULbl.js";function kr(z,s){const l=zt(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"m6 9 6 6 6-6"}]];Et(z,Ct({name:"chevron-down"},()=>l,{get iconNode(){return x},children:(w,A)=>{var k=Be(),d=ye(k);Mt(d,s,"default",{}),c(w,k)},$$slots:{default:!0}}))}function $r(z,s){const l=zt(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"m18 15-6-6-6 6"}]];Et(z,Ct({name:"chevron-up"},()=>l,{get iconNode(){return x},children:(w,A)=>{var k=Be(),d=ye(k);Mt(d,s,"default",{}),c(w,k)},$$slots:{default:!0}}))}function qa(z,s){const l=zt(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]];Et(z,Ct({name:"circle-check-big"},()=>l,{get iconNode(){return x},children:(w,A)=>{var k=Be(),d=ye(k);Mt(d,s,"default",{}),c(w,k)},$$slots:{default:!0}}))}function zr(z,s){const l=zt(s,["children","$$slots","$$events","$$legacy"]);const x=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];Et(z,Ct({name:"copy"},()=>l,{get iconNode(){return x},children:(w,A)=>{var k=Be(),d=ye(k);Mt(d,s,"default",{}),c(w,k)},$$slots:{default:!0}}))}function Cr(z,s){const l=zt(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];Et(z,Ct({name:"eye"},()=>l,{get iconNode(){return x},children:(w,A)=>{var k=Be(),d=ye(k);Mt(d,s,"default",{}),c(w,k)},$$slots:{default:!0}}))}function Er(z,s){const l=zt(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4"}]];Et(z,Ct({name:"flame"},()=>l,{get iconNode(){return x},children:(w,A)=>{var k=Be(),d=ye(k);Mt(d,s,"default",{}),c(w,k)},$$slots:{default:!0}}))}function Mr(z,s){const l=zt(s,["children","$$slots","$$events","$$legacy"]);const x=[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]];Et(z,Ct({name:"grip-vertical"},()=>l,{get iconNode(){return x},children:(w,A)=>{var k=Be(),d=ye(k);Mt(d,s,"default",{}),c(w,k)},$$slots:{default:!0}}))}function Ua(z,s){const l=zt(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"}]];Et(z,Ct({name:"layers"},()=>l,{get iconNode(){return x},children:(w,A)=>{var k=Be(),d=ye(k);Mt(d,s,"default",{}),c(w,k)},$$slots:{default:!0}}))}function jr(z,s){const l=zt(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"m16 6 4 14"}],["path",{d:"M12 6v14"}],["path",{d:"M8 8v12"}],["path",{d:"M4 4v16"}]];Et(z,Ct({name:"library"},()=>l,{get iconNode(){return x},children:(w,A)=>{var k=Be(),d=ye(k);Mt(d,s,"default",{}),c(w,k)},$$slots:{default:!0}}))}function Or(z,s){const l=zt(s,["children","$$slots","$$events","$$legacy"]);const x=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}],["path",{d:"M21 21v.01"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}],["path",{d:"M3 12h.01"}],["path",{d:"M12 3h.01"}],["path",{d:"M12 16v.01"}],["path",{d:"M16 12h1"}],["path",{d:"M21 12v.01"}],["path",{d:"M12 21v-1"}]];Et(z,Ct({name:"qr-code"},()=>l,{get iconNode(){return x},children:(w,A)=>{var k=Be(),d=ye(k);Mt(d,s,"default",{}),c(w,k)},$$slots:{default:!0}}))}function Ir(z,s){const l=zt(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];Et(z,Ct({name:"rotate-ccw"},()=>l,{get iconNode(){return x},children:(w,A)=>{var k=Be(),d=ye(k);Mt(d,s,"default",{}),c(w,k)},$$slots:{default:!0}}))}function Fa(z,s){const l=zt(s,["children","$$slots","$$events","$$legacy"]);const x=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];Et(z,Ct({name:"save"},()=>l,{get iconNode(){return x},children:(w,A)=>{var k=Be(),d=ye(k);Mt(d,s,"default",{}),c(w,k)},$$slots:{default:!0}}))}function Ba(z,s){const l=zt(s,["children","$$slots","$$events","$$legacy"]);const x=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21"}]];Et(z,Ct({name:"swords"},()=>l,{get iconNode(){return x},children:(w,A)=>{var k=Be(),d=ye(k);Mt(d,s,"default",{}),c(w,k)},$$slots:{default:!0}}))}function Nr(z){let s=!1;return document.body&&(document.body.appendChild(z),s=!0),{destroy(){s&&z.parentNode&&z.parentNode.removeChild(z)}}}var Sr=_("<button> <!></button>"),Rr=_('<p class="text-xs text-slate-600 italic"> </p>'),Pr=_('<div class="text-xs leading-tight"><span class="text-red-400 font-bold"> </span> <span class="text-slate-400"> </span></div>'),Tr=_('<div class="space-y-1"></div>'),Ar=_('<div class="grid grid-cols-2 gap-2 max-h-[60vh] overflow-y-auto custom-scrollbar p-1"></div> <div class="mt-4 pt-3 border-t border-slate-800 flex flex-col gap-2"><div class="p-3 bg-slate-900/50 rounded-lg border border-slate-700/50 min-h-[60px]"><p class="text-[10px] text-slate-500 uppercase font-bold mb-1"> </p> <!></div> <div class="flex justify-end mt-2"><button class="bg-indigo-600 text-white px-4 py-2 rounded-xl font-bold text-sm shadow hover:bg-indigo-500 transition-colors w-full sm:w-auto"> </button></div></div>',1),Dr=_("<div><!></div>");function Hr(z,s){Yt(s,!0);const l=()=>tt(Gt,"$t",x),[x,w]=aa();var A=Be(),k=ye(A);{var d=C=>{var O=Dr(),ue=t(O);{let J=fe(()=>l()("session.affliction_modal.title"));xr(ue,{get isOpen(){return s.isOpen},get onClose(){return s.onClose},get title(){return a(J)},maxWidth:"max-w-md",children:(ke,be)=>{var pe=Ar(),Ee=ye(pe);Oe(Ee,21,()=>Object.keys(ja),et,(F,M)=>{const xe=fe(()=>s.afflictions.includes(a(M)));var oe=Sr();oe.__click=()=>s.onToggle(a(M));var ze=t(oe),de=r(ze);{var Ve=Ie=>{qa(Ie,{size:14,class:"text-red-400"})};j(de,Ie=>{a(xe)&&Ie(Ve)})}e(oe),g(()=>{je(oe,1,`flex items-center justify-between px-3 py-2 rounded-lg border text-xs font-bold transition-all ${a(xe)?"bg-red-500/20 border-red-500 text-red-100":"bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-750"}`),n(ze,`${a(M)??""} `)}),c(F,oe)}),e(Ee);var D=r(Ee,2),ie=t(D),ne=t(ie),X=t(ne,!0);e(ne);var $e=r(ne,2);{var V=F=>{var M=Rr(),xe=t(M,!0);e(M),g(oe=>n(xe,oe),[()=>l()("session.affliction_modal.none_selected")]),c(F,M)},G=F=>{var M=Tr();Oe(M,21,()=>s.afflictions,et,(xe,oe)=>{var ze=Pr(),de=t(ze),Ve=t(de);e(de);var Ie=r(de,2),He=t(Ie,!0);e(Ie),e(ze),g(()=>{n(Ve,`${a(oe)??""}:`),n(He,ja[a(oe)]?.effect)}),c(xe,ze)}),e(M),c(F,M)};j($e,F=>{s.afflictions.length===0?F(V):F(G,!1)})}e(ie);var K=r(ie,2),q=t(K);q.__click=function(...F){s.onClose?.apply(this,F)};var Me=t(q,!0);e(q),e(K),e(D),g((F,M)=>{n(X,F),n(Me,M)},[()=>l()("session.affliction_modal.effects"),()=>l()("session.affliction_modal.done")]),c(ke,pe)},$$slots:{default:!0}})}e(O),rr(O,J=>Nr?.(J)),c(C,O)};j(k,C=>{s.isOpen&&C(d)})}c(z,A),ea(),w()}ta(["click"]);var Lr=_('<div class="absolute top-0 right-0 bg-gradient-to-l from-yellow-600/20 to-transparent border-l border-b border-yellow-500/30 text-yellow-500 text-[9px] font-black tracking-widest px-3 py-1 rounded-bl-xl z-20 uppercase shadow-[0_0_10px_rgba(234,179,8,0.2)]"> </div>'),qr=_('<div class="absolute inset-0 bg-red-950/40 animate-pulse z-0 pointer-events-none"></div>'),Ur=_('<span class="text-[9px] font-black bg-red-950/40 text-red-500 px-1.5 py-0.5 rounded border border-red-900/30 uppercase tracking-wider flex-shrink-0"> </span>'),Fr=_("<button><!></button>"),Br=_('<button class="w-7 h-7 flex items-center justify-center rounded bg-slate-800/50 text-slate-600 hover:text-red-400 hover:bg-red-950/30 border border-slate-700/50 transition-colors"><!></button>'),Vr=_('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),Gr=_('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"><div class="absolute inset-0 bg-gradient-to-b from-white/10 to-transparent"></div></div>'),Wr=_('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-20"><span class="text-[9px] font-black uppercase text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] tracking-widest leading-none mt-0.5"> </span></div>'),Jr=_('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-20"><span class="text-[9px] font-black uppercase text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] tracking-widest leading-none mt-0.5"> </span></div>'),Qr=_('<button class="text-[9px] bg-red-500/10 text-red-400 px-1.5 py-0.5 rounded border border-red-500/20 hover:bg-red-500/20 hover:border-red-500/40 transition-all flex items-center gap-1 group/btn"> <!></button>'),Zr=_('<div class="bg-slate-900/50 p-2 rounded border border-slate-800/50 text-center"><span class="text-[9px] text-slate-500 uppercase font-black block mb-0.5"> </span> <div class="text-white font-bold font-mono text-lg leading-none"> </div> <div> </div></div>'),Xr=_('<div class="text-sm bg-slate-900/30 p-2 rounded border border-slate-800/30"><span class="font-bold text-slate-300"> </span> <span class="text-slate-400 text-xs block mt-1 leading-relaxed"> </span></div>'),Kr=_('<div><div> <span class="h-px flex-1 bg-current opacity-20"></span></div> <div class="grid gap-2"></div></div>'),Yr=_('<div class="border-t border-slate-800/50 bg-slate-950/30 p-4"><div class="mb-4"><div class="text-slate-500 font-bold uppercase text-[10px] mb-2 flex items-center gap-2"><span> </span> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-4 gap-2"></div></div> <div class="grid grid-cols-3 gap-4 mb-4"><div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div> <div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div> <div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div></div> <div class="space-y-4"></div></div>'),es=_('<div><!> <!> <div class="relative z-10 p-4"><div class="flex items-start gap-4 mb-3"><div class="relative flex-shrink-0"><div><!></div> <button><!></button></div> <div class="flex-1 min-w-0"><div class="flex justify-between items-start mb-1"><div class="flex flex-col min-w-0 mr-2"><div class="flex items-center gap-2"><h3> </h3> <!></div></div> <div class="flex gap-1 flex-shrink-0"><button class="w-7 h-7 flex items-center justify-center rounded bg-slate-800 text-slate-500 hover:text-white hover:bg-slate-700 border border-slate-700/50 transition-colors"><!></button> <!></div></div>  <div class="relative w-full h-3.5 sm:h-4 bg-slate-950 rounded-full border border-white/5 overflow-hidden shadow-inner group-hover:border-white/20 transition-all mb-2"><div></div> <!> <!> <!></div> <div class="flex flex-col sm:flex-row gap-3"><div class="flex items-start gap-1.5"><div class="flex flex-col items-center justify-between bg-slate-900 border border-slate-700 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm"><span class="text-[9px] font-black text-slate-400 uppercase tracking-wider mb-0.5"> </span> <span class="text-xl font-bold text-white font-mono leading-none"> </span></div> <div class="flex flex-col items-center justify-between bg-red-950/30 border border-red-900/50 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm relative group/dmg"><span class="text-[9px] font-black text-red-400 uppercase tracking-wider mb-0.5"> </span> <input type="number" class="w-full bg-transparent text-center text-white font-mono font-bold text-xl focus:outline-none p-0 leading-none placeholder-red-800"/> <span class="absolute -top-1 -right-1 flex h-2 w-2 opacity-0 group-hover/dmg:opacity-100 transition-opacity"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span></span></div> <div><span> </span> <div class="flex items-baseline gap-0.5 justify-center w-full"><input type="number" class="w-full bg-transparent text-right text-white font-mono font-bold text-xl focus:outline-none p-0 leading-none"/> <span class="text-[10px] text-slate-500 font-mono self-end mb-0.5 opacity-70"> </span></div></div></div> <div class="flex flex-wrap gap-1.5 items-center flex-1"><!> <button class="text-[10px] sm:text-[9px] font-bold text-slate-500 hover:text-indigo-400 px-1.5 py-0.5 rounded border border-transparent hover:border-indigo-500/30 hover:bg-indigo-500/10 transition-all flex items-center gap-1 whitespace-nowrap"><!> </button></div></div></div></div></div>  <!> <!></div>');function ts(z,s){Yt(s,!0);const l=()=>tt(Gt,"$t",x),[x,w]=aa();let A=Nt(s,"updateEnemy",3,(f,y)=>{}),k=Nt(s,"updatePlayer",3,(f,y)=>{}),d=Nt(s,"removeFromCombat",3,f=>{}),C=fe(()=>s.entity.type==="player"),O=fe(()=>s.entity.damage||0),ue=fe(()=>s.entity.normalHealth||s.entity.health||10),J=fe(()=>s.entity.currentHealth??a(ue)),ke=fe(()=>a(O)>=a(J)),be=fe(()=>a(O)>=a(J)/2&&!a(ke)),pe=fe(()=>a(J)>0?Math.min(100,Math.max(0,a(O)/a(J)*100)):100),Ee=Pe(!1),D=Pe(!1);za(()=>{const f=s.entity.afflictions||[],y=f.includes("Incapacitated");if(a(ke)&&!y){const ee={afflictions:[...f,"Incapacitated"]};s.entity.type==="player"?ie(ee):A()(s.entity.instanceId,ee)}else if(!a(ke)&&y){const ee={afflictions:f.filter(Re=>Re!=="Incapacitated")};s.entity.type==="player"?ie(ee):A()(s.entity.instanceId,ee)}});function ie(f){if(s.entity.type!=="player")return;const y=Oa.get(s.entity.id);y&&Oa.set(s.entity.id,{...y,...f}),k()(s.entity.id,f),fa({id:s.entity.id,...f})}function ne(f){const y=parseInt(f.target.value);if(isNaN(y))return;const ee={damage:Math.max(0,y)};s.entity.type==="player"?ie(ee):A()(s.entity.instanceId,ee)}function X(f){const y=parseInt(f.target.value);if(isNaN(y))return;const Y=Math.max(0,y);let ee=a(O);Y<a(O)&&(ee=Y);const Re={currentHealth:Y,damage:ee};s.entity.type==="player"?ie(Re):A()(s.entity.instanceId,Re)}function $e(){const f=!s.entity.acted;s.entity.type==="player"?ie({acted:f}):A()(s.entity.instanceId,{acted:f})}function V(){s.entity.type==="player"&&ie({initiative:!s.entity.initiative})}function G(f){const y=s.entity.afflictions||[],ee={afflictions:y.includes(f)?y.filter(Re=>Re!==f):[...y,f]};s.entity.type==="player"?ie(ee):A()(s.entity.instanceId,ee)}var K=es(),q=t(K);{var Me=f=>{var y=Lr(),Y=t(y,!0);e(y),g(ee=>n(Y,ee),[()=>l()("session.combat_card.initiative")]),c(f,y)};j(q,f=>{a(C)&&s.entity.initiative&&f(Me)})}var F=r(q,2);{var M=f=>{var y=qr();c(f,y)};j(F,f=>{a(ke)&&f(M)})}var xe=r(F,2),oe=t(xe),ze=t(oe),de=t(ze),Ve=t(de);Ha(Ve,()=>s.entity.imageUrl,f=>{{let y=fe(()=>s.entity.name.charAt(0));$a(f,{get hash(){return s.entity.imageUrl},get alt(){return s.entity.name},size:"custom",get fallbackText(){return a(y)}})}}),e(de);var Ie=r(de,2);Ie.__click=$e;var He=t(Ie);{var Ge=f=>{pr(f,{size:14,class:""})},lt=f=>{var y=Be(),Y=ye(y);{var ee=nt=>{qa(nt,{size:14})},Re=nt=>{Ba(nt,{size:14})};j(Y,nt=>{s.entity.acted?nt(ee):nt(Re,!1)},!0)}c(f,y)};j(He,f=>{a(ke)?f(Ge):f(lt,!1)})}e(Ie),e(ze);var St=r(ze,2),ut=t(St),yt=t(ut),jt=t(yt),We=t(jt),dt=t(We,!0);e(We);var gt=r(We,2);{var ht=f=>{var y=Ur(),Y=t(y);e(y),g(()=>n(Y,`Dif ${s.entity.difficulty??""}`)),c(f,y)};j(gt,f=>{a(C)||f(ht)})}e(jt),e(yt);var bt=r(yt,2),xt=t(bt);xt.__click=()=>T(Ee,!a(Ee));var Te=t(xt);{var Le=f=>{$r(f,{size:14})},Je=f=>{kr(f,{size:14})};j(Te,f=>{a(Ee)?f(Le):f(Je,!1)})}e(xt);var qe=r(xt,2);{var Qe=f=>{var y=Fr();y.__click=V;var Y=t(y);Er(Y,{size:14}),e(y),g(ee=>{je(y,1,`w-7 h-7 flex items-center justify-center rounded transition-all ${s.entity.initiative?"bg-yellow-500 text-yellow-950 shadow-lg shadow-yellow-500/20":"bg-slate-800 text-slate-500 hover:text-white hover:bg-slate-700"}`),Fe(y,"title",ee)},[()=>l()("session.combat_card.initiative")]),c(f,y)},at=f=>{var y=Br();y.__click=()=>d()(s.entity.instanceId);var Y=t(y);xa(Y,{size:14}),e(y),c(f,y)};j(qe,f=>{a(C)?f(Qe):f(at,!1)})}e(bt),e(ut);var Ze=r(ut,2),E=t(Ze),$=r(E,2);{var re=f=>{var y=Vr();g(()=>{je(y,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10 
                            ${a(ke)?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":a(pe)>=80?"bg-gradient-to-r from-red-600 to-rose-500":a(be)?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),Ga(y,`width: ${a(pe)??""}%`)}),c(f,y)};j($,f=>{a(pe)>0&&f(re)})}var we=r($,2);{var Ae=f=>{var y=Gr();c(f,y)};j(we,f=>{a(O)===0&&f(Ae)})}var Ue=r(we,2);{var Ne=f=>{var y=Wr(),Y=t(y),ee=t(Y,!0);e(Y),e(y),g(Re=>n(ee,Re),[()=>l()("session.combat_card.incapacitated")]),c(f,y)},rt=f=>{var y=Be(),Y=ye(y);{var ee=Re=>{var nt=Jr(),Ut=t(nt),Ft=t(Ut,!0);e(Ut),e(nt),g(At=>n(Ft,At),[()=>l()("session.combat_card.injured")]),c(Re,nt)};j(Y,Re=>{a(be)&&Re(ee)},!0)}c(f,y)};j(Ue,f=>{a(ke)?f(Ne):f(rt,!1)})}e(Ze);var Rt=r(Ze,2),mt=t(Rt),_t=t(mt),st=t(_t),wt=t(st,!0);e(st);var Pt=r(st,2),ft=t(Pt,!0);e(Pt),e(_t);var kt=r(_t,2),De=t(kt),it=t(De,!0);e(De);var Se=r(De,2);$t(Se),Se.__input=ne,Xt(2),e(kt);var Ke=r(kt,2),Xe=t(Ke),vt=t(Xe,!0);e(Xe);var ct=r(Xe,2),Ye=t(ct);$t(Ye),Ye.__input=X;var Ot=r(Ye,2),Lt=t(Ot);e(Ot),e(ct),e(Ke),e(mt);var Tt=r(mt,2),ia=t(Tt);Oe(ia,17,()=>s.entity.afflictions||[],et,(f,y)=>{var Y=Qr();Y.__click=()=>G(a(y));var ee=t(Y),Re=r(ee);xa(Re,{size:8,class:"opacity-50 group-hover/btn:opacity-100"}),e(Y),g(()=>n(ee,`${a(y)??""} `)),c(f,Y)});var Wt=r(ia,2);Wt.__click=()=>T(D,!0);var na=t(Wt);Kt(na,{size:10});var Jt=r(na);e(Wt),e(Tt),e(Rt),e(St),e(oe),e(xe);var qt=r(xe,2);{var ra=f=>{var y=Yr(),Y=t(y),ee=t(Y),Re=t(ee),nt=t(Re,!0);e(Re),Xt(2),e(ee);var Ut=r(ee,2);Oe(Ut,20,()=>["str","agi","int","wil"],et,(u,m)=>{var p=Zr(),b=t(p),h=t(b,!0);e(b);var P=r(b,2),S=t(P,!0);e(P);var te=r(P,2),ae=t(te);e(te),e(p),g(()=>{n(h,m),n(S,s.entity.stats?.[m]??s.entity.attributes?.[m]??10),je(te,1,`text-[9px] font-bold ${(s.entity.stats?.[m]??s.entity.attributes?.[m]??10)-10>=0?"text-emerald-500":"text-red-500"}`),n(ae,`${(s.entity.stats?.[m]??s.entity.attributes?.[m]??10)-10>=0?"+":""}${(s.entity.stats?.[m]??s.entity.attributes?.[m]??10)-10}`)}),c(u,p)}),e(Ut),e(Y);var Ft=r(Y,2),At=t(Ft),Bt=t(At),oa=t(Bt,!0);e(Bt);var la=r(Bt,2),da=t(la,!0);e(la),e(At);var Vt=r(At,2),Qt=t(Vt),I=t(Qt,!0);e(Qt);var N=r(Qt,2),H=t(N,!0);e(N),e(Vt);var ge=r(Vt,2),me=t(ge),Q=t(me,!0);e(me);var i=r(me,2),o=t(i,!0);e(i),e(ge),e(Ft);var v=r(Ft,2);Oe(v,20,()=>[{key:"traits",label:"Traços",color:"text-amber-500"},{key:"actions",label:"Ações",color:"text-red-400"},{key:"reactions",label:"Reações",color:"text-indigo-400"},{key:"end_of_round",label:"Fim da Rodada",color:"text-emerald-400"}],et,(u,m)=>{var p=Be(),b=ye(p);{var h=P=>{var S=Kr(),te=t(S),ae=t(te);Xt(),e(te);var _e=r(te,2);Oe(_e,21,()=>s.entity[m.key],et,(le,ve)=>{var R=Xr(),W=t(R),se=t(W,!0);e(W);var L=r(W,2),U=t(L,!0);e(L),e(R),g(()=>{n(se,a(ve).name),n(U,a(ve).description||a(ve).effect)}),c(le,R)}),e(_e),e(S),g(()=>{je(te,1,`${m.color??""} text-[10px] font-black uppercase mb-2 flex items-center gap-2`),n(ae,`${m.label??""} `)}),c(P,S)};j(b,P=>{s.entity[m.key]&&s.entity[m.key].length>0&&P(h)})}c(u,p)}),e(v),e(y),g((u,m,p,b)=>{n(nt,u),n(oa,m),n(da,s.entity.size||1),n(I,p),n(H,s.entity.speed||10),n(Q,b),n(o,s.entity.defense||10)},[()=>l()("session.combat_card.attributes"),()=>l()("session.combat_card.size"),()=>l()("session.combat_card.speed"),()=>l()("session.combat_card.defense")]),c(f,y)};j(qt,f=>{a(Ee)&&f(ra)})}var ca=r(qt,2);{let f=fe(()=>s.entity.afflictions||[]);Hr(ca,{get isOpen(){return a(D)},onClose:()=>T(D,!1),get afflictions(){return a(f)},onToggle:G})}e(K),g((f,y,Y,ee,Re)=>{je(K,1,`group relative overflow-hidden transition-all duration-300 rounded-2xl border ${a(C)?"bg-slate-900/80 border-indigo-500/30 hover:border-indigo-500/50 hover:shadow-indigo-900/20":"bg-slate-950/80 border-red-900/30 hover:border-red-800/50 hover:shadow-red-900/10"} shadow-lg backdrop-blur-sm`),je(de,1,`w-14 h-14 rounded-2xl overflow-hidden border-2 shadow-xl transition-transform group-hover:scale-105 ${a(ke)?"border-red-600 grayscale brightness-50":a(C)?"border-indigo-500/50":"border-red-900/50"}`),je(Ie,1,`absolute -bottom-2 -right-2 w-7 h-7 rounded-lg flex items-center justify-center border shadow-lg transition-all hover:scale-110 z-20 ${s.entity.acted?"bg-slate-800 border-slate-600 text-slate-500":a(C)?"bg-indigo-600 border-indigo-400 text-white":"bg-red-600 border-red-400 text-white"}`),Fe(Ie,"title",f),je(We,1,`text-base font-bold truncate leading-snug ${a(C)?"text-white":"text-red-100 font-serif tracking-wide"}`),n(dt,s.entity.name),je(E,1,`absolute inset-0 w-full ${a(O)===0?"bg-emerald-900/20":"bg-slate-900/50"}`),n(wt,y),n(ft,s.entity.defense||10),n(it,Y),wa(Se,a(O)),je(Ke,1,`flex flex-col items-center justify-between border rounded-lg p-1.5 w-[5.5rem] h-[3.75rem] shadow-sm relative transition-colors ${a(ke)?"bg-red-950/50 border-red-500":a(be)?"bg-orange-950/30 border-orange-500":"bg-emerald-950/30 border-emerald-900/50"}`),je(Xe,1,`text-[9px] font-black uppercase tracking-wider mb-0.5 ${a(ke)?"text-red-400":a(be)?"text-orange-400":"text-emerald-400"}`),n(vt,ee),wa(Ye,a(J)),n(Lt,`/${a(ue)??""}`),n(Jt,` ${Re??""}`)},[()=>s.entity.acted?l()("session.combat_card.acted"):l()("session.combat_card.act"),()=>l()("session.combat_card.defense"),()=>l()("session.combat_card.damage"),()=>l()("session.combat_card.health"),()=>l()("session.combat_card.add_affliction")]),c(z,K),ea(),w()}ta(["click","input"]);function as(z,{from:s,to:l},x={}){var{delay:w=0,duration:A=G=>Math.sqrt(G)*120,easing:k=mr}=x,d=getComputedStyle(z),C=d.transform==="none"?"":d.transform,[O,ue]=d.transformOrigin.split(" ").map(parseFloat);O/=z.clientWidth,ue/=z.clientHeight;var J=rs(z),ke=z.clientWidth/l.width/J,be=z.clientHeight/l.height/J,pe=s.left+s.width*O,Ee=s.top+s.height*ue,D=l.left+l.width*O,ie=l.top+l.height*ue,ne=(pe-D)*ke,X=(Ee-ie)*be,$e=s.width/l.width,V=s.height/l.height;return{delay:w,duration:typeof A=="function"?A(Math.sqrt(ne*ne+X*X)):A,easing:k,css:(G,K)=>{var q=K*ne,Me=K*X,F=G+K*$e,M=G+K*V;return`transform: ${C} translate(${q}px, ${Me}px) scale(${F}, ${M});`}}}function rs(z){if("currentCSSZoom"in z)return z.currentCSSZoom;for(var s=z,l=1;s!==null;)l*=+getComputedStyle(s).zoom,s=s.parentElement;return l}function ss(z,s=1,l=0){const x=[];let w=0;for(let C=0;C<s;C++){const O=Math.floor(Math.random()*z)+1;x.push(O),w+=O}let A=`${s}d${z}`,k=[],d=0;if(l!==0)if(z===20){const C=Math.abs(l);for(let ue=0;ue<C;ue++)k.push(Math.floor(Math.random()*6)+1);const O=Math.max(...k);l>0?(d=O,w+=O,A+=` + ${O} [Boon]`):(d=-O,w-=O,A+=` - ${O} [Bane]`)}else d=l,w+=l,A+=l>0?` + ${l}`:` - ${Math.abs(l)}`;return{total:w,results:x,bonusRolls:k,formula:A,crit:z===20&&x.includes(20),modifierTotal:d}}var is=_('<span class="text-[10px] bg-slate-800 text-slate-400 px-1.5 py-0.5 rounded-full"> </span>'),ns=_('<div class="p-3 rounded-xl border border-amber-500/30 bg-amber-500/5 flex items-center gap-3 transition-all hover:bg-amber-500/10 shadow-sm"><div class="flex-1"><div class="font-bold text-sm text-amber-200 leading-none"> </div> <div class="text-[9px] text-amber-500/60 font-medium mt-1 uppercase tracking-tighter"> </div></div> <div class="flex items-center gap-1.5"><button class="p-2 rounded-lg bg-green-600/20 text-green-400 hover:bg-green-600 hover:text-white transition-all shadow-lg active:scale-90" title="Aprovar"><!></button> <button class="p-2 rounded-lg bg-red-600/20 text-red-400 hover:bg-red-600 hover:text-white transition-all shadow-lg active:scale-90" title="Recusar"><!></button></div></div>'),os=_('<div class="space-y-2 animate-in fade-in slide-in-from-top-2"><div class="flex items-center gap-2 px-1"><div class="w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"></div> <span class="text-[10px] font-black text-amber-500 uppercase tracking-wider"> </span></div> <!> <div class="h-px bg-slate-800/50 mx-2 my-2"></div></div>'),ls=_('<span class="text-indigo-400 font-bold uppercase tracking-tighter mr-1"> </span>'),ds=_('<div><div></div> <div class="flex-1"><div> </div> <div class="text-[10px] text-slate-500 font-medium"><!> </div></div> <div class="flex items-center gap-1"><button><!></button> <button class="text-slate-600 hover:text-red-400 p-1.5 hover:bg-red-400/10 rounded-lg transition-all"><!></button></div></div>'),vs=_('<div class="text-xs text-slate-600 italic p-6 border-2 border-dashed border-slate-800 rounded-xl text-center"> </div>'),cs=_('<button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-black uppercase text-[10px] tracking-[0.2em] shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2"><!> </button> <p class="text-[9px] text-slate-600 text-center font-bold uppercase tracking-tighter"> </p>',1),us=_('<div class="flex justify-center p-3 bg-white rounded-xl mb-2 animate-in zoom-in-95 duration-200 shadow-xl mx-auto w-32 h-32"><img class="w-24 h-24"/></div>'),bs=_('<div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-green-500 text-white text-[10px] font-bold rounded shadow-lg animate-in fade-in slide-in-from-bottom-1 whitespace-nowrap"><!> </div>'),xs=_('<div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-1"><!> </span></div> <button class="text-slate-500 hover:text-white transition-colors p-1"><!></button></div> <!> <div class="relative group"><div class="flex gap-1"><div class="flex-1 bg-slate-950 border border-slate-800 rounded-lg p-2 text-[10px] text-slate-400 font-mono truncate cursor-pointer hover:border-slate-700 transition-colors flex items-center"> </div> <button class="bg-indigo-600 hover:bg-indigo-500 text-white p-2 rounded-lg transition-all active:scale-95 shadow-lg shadow-indigo-900/20 relative"><!> <!></button></div></div> <button class="w-full text-[9px] text-slate-600 hover:text-red-400 font-bold uppercase tracking-widest transition-colors mt-1"> </button>',1),ms=_('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 group hover:border-indigo-500/30 transition-all"><div class="truncate flex-1 flex items-center gap-2"><!> <div><div class="text-sm font-bold text-white truncate"> </div> <div class="text-[10px] text-slate-500"> </div></div></div> <button class="text-slate-500 hover:text-indigo-400 p-1 ml-2 bg-slate-900 rounded border border-slate-800"><!></button></div>'),_s=_('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),fs=_("<!> <!>",1),ps=_('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 group hover:border-indigo-500/30 transition-all"><div class="truncate flex-1"><div class="text-sm font-bold text-white truncate"> </div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-slate-500 hover:text-indigo-400 p-1 ml-2 bg-slate-900 rounded border border-slate-800"><!></button></div>'),gs=_('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),hs=_("<!> <!>",1),ys=_('<button class="bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 shadow-lg shadow-green-900/20"><!> </button>'),ws=_('<div class="flex items-center gap-4"><button class="p-2 hover:bg-slate-700 rounded text-slate-400"><!></button> <div class="text-center"><div class="text-[10px] font-bold text-slate-500 uppercase"> </div><div class="text-3xl font-mono font-bold text-white leading-none"> </div></div> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded font-bold flex items-center gap-2"><!> </button> <div class="h-8 w-px bg-slate-700 mx-2"></div> <button class="text-red-400 hover:text-red-300 text-xs font-bold px-3 py-2 border border-red-900/30 rounded bg-red-900/10"> </button></div>'),ks=_("<div><!></div>"),$s=_('<div class="text-center text-slate-500 italic py-10"> </div>'),zs=_('<div class="text-sm"><span class="font-bold text-yellow-500"> </span> <span class="text-slate-300"> </span></div>'),Cs=_('<div class="bg-slate-900 border border-slate-700 rounded-lg p-4"><h4 class="font-bold text-white mb-2 pb-2 border-b border-slate-800 flex items-center gap-2"><!> </h4> <div class="space-y-2"></div></div>'),Es=_('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" aria-label="Fechar" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-lg border border-slate-700 shadow-2xl p-6 relative" role="dialog" aria-modal="true"><div class="flex items-center gap-3 mb-6"><div class="p-3 bg-yellow-900/20 rounded-full border border-yellow-500/30 text-yellow-500"><!></div> <div><h3 class="font-bold text-white text-xl"> </h3> <p class="text-slate-400 text-sm"> </p></div></div> <div class="space-y-4 mb-8 max-h-[60vh] overflow-y-auto custom-scrollbar"></div> <div class="flex gap-3"><button class="flex-1 py-1.5 rounded bg-slate-700 hover:bg-slate-600 text-white font-bold text-sm"> </button> <button class="flex-1 py-1.5 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold text-sm"> </button></div></div></div>'),Ms=_('<button class="w-full text-left flex items-center gap-3 p-3 bg-slate-900 border border-slate-700 hover:border-indigo-500 hover:bg-indigo-500/10 rounded-xl group transition-all"><div class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center text-sm font-bold text-slate-500 group-hover:text-indigo-400 border border-slate-700 group-hover:border-indigo-500/30"> </div> <div class="flex-1"><div class="font-bold text-white group-hover:text-indigo-300"> </div> <div class="text-[10px] text-slate-500"> </div></div> <div class="bg-slate-800 p-2 rounded-lg text-slate-500 group-hover:bg-indigo-500 group-hover:text-white transition-colors"><!></div></button>'),js=_('<div class="text-center py-8"><div class="w-12 h-12 bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-500"><!></div> <p class="text-slate-500 text-sm font-bold"> </p> <p class="text-[10px] text-slate-600 mt-1"> </p></div>'),Os=_('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" aria-label="Fechar" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-md border border-slate-700 shadow-2xl p-6" role="dialog" aria-modal="true"><div class="flex justify-between items-center mb-6"><div><h3 class="font-bold text-white text-lg"> </h3> <p class="text-xs text-slate-400"> </p></div> <button class="bg-slate-700 hover:bg-slate-600 p-2 rounded-lg text-white transition-colors"><!></button></div> <div class="space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2"><!> <!></div></div></div>'),Is=_('<div class="grid grid-cols-1 lg:grid-cols-4 gap-6 h-full relative"><div class="space-y-6"><div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex flex-col gap-4"><div class="flex justify-between items-center bg-slate-950/50 p-2 rounded-lg border border-slate-800"><h3 class="text-xs font-black text-slate-500 uppercase tracking-widest flex items-center gap-2"><!> <!></h3> <button class="text-[10px] bg-slate-800 hover:bg-slate-700 text-white px-2.5 py-1.5 rounded-md font-bold transition-all border border-slate-700 active:scale-95"> </button></div> <!> <div class="space-y-2 flex-1 overflow-y-auto max-h-[300px] custom-scrollbar pr-1"><div class="space-y-2"><!> <!></div></div> <div class="pt-4 border-t border-slate-800 space-y-3"><!></div></div> <div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex flex-col h-[400px]"><div class="flex items-center gap-2 mb-3 bg-slate-950 p-1 rounded-lg border border-slate-800"><button><!> </button> <button><!> </button></div> <div class="flex-1 overflow-y-auto pr-1 custom-scrollbar space-y-2"><!></div></div></div> <div class="lg:col-span-2 space-y-4"><div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex justify-between items-center shadow-lg sticky top-0 z-20"><div class="flex items-center gap-4"><!></div></div> <div class="space-y-3 pb-20"><!> <!></div></div> <div class="hidden lg:flex flex-col gap-4"></div></div> <!> <div class="fixed bottom-6 left-1/2 -translate-x-1/2 bg-slate-900/90 backdrop-blur-md border border-slate-700 rounded-2xl p-2 flex items-center gap-2 shadow-2xl z-40 animate-in slide-in-from-bottom-4"><div class="px-3 border-r border-slate-700 flex items-center gap-2 text-slate-400 font-bold text-xs uppercase"><!> </div> <button class="bg-slate-800 hover:bg-indigo-600 text-white font-bold w-10 h-10 rounded-xl flex items-center justify-center transition-all hover:-translate-y-1 shadow-lg">d20</button> <button class="bg-slate-800 hover:bg-indigo-600 text-white font-bold w-10 h-10 rounded-xl flex items-center justify-center transition-all hover:-translate-y-1 shadow-lg">d6</button> <button class="bg-slate-800 hover:bg-indigo-600 text-white font-bold w-10 h-10 rounded-xl flex items-center justify-center transition-all hover:-translate-y-1 shadow-lg text-xs">2d6</button> <button class="bg-slate-800 hover:bg-indigo-600 text-white font-bold w-10 h-10 rounded-xl flex items-center justify-center transition-all hover:-translate-y-1 shadow-lg text-xs">3d6</button></div> <!> <!> <!> <!>',1);function Ns(z,s){Yt(s,!0);const l=()=>tt(Ka,"$liveCharacters",d),x=()=>tt(Gt,"$t",d),w=()=>tt(Ca,"$liveEnemies",d),A=()=>tt(Pa,"$liveEncounters",d),k=()=>tt(sa,"$isHistoryOpen",d),[d,C]=aa();let O=Pe(!1),ue=Pe(!1),J=Pe(!1);const ke={active:!1,round:1};let be=Pe("enemies"),pe=Pe(!1),Ee=Pe(Zt([])),D=Pe(Zt({isOpen:!1,title:"",message:"",onConfirm:()=>{}}));Ma(()=>{if(s.campaign?.id){Ja(s.campaign.id,!0);const i=ga(Gt)("common.labels.master");Ia.update(v=>({...v,campaignId:s.campaign.id,name:s.campaign.gmName||i}));const o=setInterval(()=>{const v=pt.get(s.campaign.id)||s.campaign,u=ga(Gt)("common.labels.master");ka(s.campaign.id,{name:v.name,gmName:v.gmName||u})},3e4);return()=>{clearInterval(o),Qa(),Ia.update(v=>({...v,campaignId:null}))}}});const ie=fe(()=>typeof window<"u"?`${window.location.origin}${Ta("/campaigns/[id]/invite",{id:s.campaign?.id})}`:"");function ne(){a(ie)&&(navigator.clipboard.writeText(a(ie)),T(ue,!0),setTimeout(()=>{T(ue,!1)},2e3))}let X=fe(()=>s.campaign?.sessionRoster||[]),$e=fe(()=>s.campaign?.combat||ke),V=fe(()=>s.campaign?.activeEnemies||[]),G=fe(()=>s.campaign?.members||[]),K=fe(()=>Array.from(new Set([...a(X),...a(G).map(o=>o.id)])).map(o=>{const v=l().find(m=>m.id===o),u=a(G).find(m=>m.id===o);return v&&u?{...v,...u,lastUpdate:u.lastUpdate}:v||u}).filter(Boolean)),q=fe(()=>a(K).filter(i=>!i.campaignApproval||i.campaignApproval==="approved")),Me=fe(()=>a(K).filter(i=>i.campaignApproval==="pending")),F=fe(()=>l().filter(i=>!a(X).includes(i.id)&&!a(G).some(o=>o.id===i.id)));function M(i){if(!s.campaign?.id)return;const v={...pt.get(s.campaign.id)||s.campaign,...i};pt.set(s.campaign.id,v),i.combat&&_a(s.campaign.id,i.combat),(i.name||i.gmName)&&ka(s.campaign.id,{name:v.name,gmName:v.gmName})}function xe(i){if(a(X).includes(i)){const o=a(X).filter(v=>v!==i);M({sessionRoster:o})}else{const o=[...a(X),i];M({sessionRoster:o})}}function oe(i){Le(i,{campaignApproval:"approved"}),fa({id:i,campaignApproval:"approved"})}function ze(i){fa({id:i,campaignApproval:"rejected",campaignId:null});const v=((pt.get(s.campaign.id)||s.campaign).members||[]).filter(u=>u.id!==i);M({members:v})}function de(i){const o=a(K).find(v=>v.id===i);T(D,{isOpen:!0,title:x()("session.players.remove_title"),message:x()("session.players.remove_message",{values:{name:o?.name||"este personagem"}}),onConfirm:()=>{const v=pt.get(s.campaign.id)||s.campaign;fa({id:i,campaignId:null});const u=(v.sessionRoster||[]).filter(b=>b!==i),m=(v.members||[]).filter(b=>b.id!==i),p=(v.activeEnemies||[]).filter(b=>b.type!=="player"||b.id!==i);M({sessionRoster:u,members:m,activeEnemies:p}),a(D).isOpen=!1}},!0)}function Ve(i){const v=(pt.get(s.campaign.id)||s.campaign).activeEnemies||[],u={...i,instanceId:ba(),damage:0,currentHealth:i.health,afflictions:[],acted:!1,initiative:!1};M({activeEnemies:[...v,u]})}function Ie(i){const v=(pt.get(s.campaign.id)||s.campaign).activeEnemies||[];let u=[];i.enemies.forEach(m=>{const p=w().find(b=>b.id===m.enemyId);if(p)for(let b=0;b<m.count;b++)u.push({...p,instanceId:ba(),damage:0,currentHealth:p.health,afflictions:[],acted:!1,initiative:!1})}),M({activeEnemies:[...v,...u]})}function He(){M({combat:{active:!0,round:1}}),_a(s.campaign.id,{active:!0,round:1})}function Ge(){const i=a(V).filter(o=>o.damage<(o.currentHealth??o.health)&&o.endOfRound&&o.endOfRound.length>0).map(o=>({name:o.name,effects:o.endOfRound}));if(i.length>0){T(Ee,i,!0),T(pe,!0);return}lt()}function lt(){const i=pt.get(s.campaign.id)||s.campaign,o=(i.combat?.round||1)+1,v=(i.activeEnemies||[]).map(u=>({...u,acted:!1}));M({combat:{...i.combat,round:o},activeEnemies:v}),_a(s.campaign.id,{active:!0,round:o}),T(pe,!1)}function St(i){M({combat:{active:!1,round:1}}),_a(s.campaign.id,{active:!1,round:1})}function ut(i){const o=pt.get(s.campaign.id)||s.campaign;M({activeEnemies:(o.activeEnemies||[]).filter(v=>v.instanceId!==i)})}function yt(i,o){const v=pt.get(s.campaign.id)||s.campaign;M({activeEnemies:(v.activeEnemies||[]).map(u=>u.instanceId===i?{...u,...o}:u)})}function jt(){const i=pt.get(s.campaign.id)||s.campaign,o=i.combat?.round||1;o>1&&M({combat:{...i.combat,round:o-1}})}let We=Pe(Zt({isOpen:!1,sides:20,count:1,modifier:0}));function dt(i,o=1){T(We,{isOpen:!0,sides:i,count:o,modifier:0},!0)}function gt(i){ht(a(We).sides,a(We).count,i),a(We).isOpen=!1}function ht(i,o=1,v=0){const u=ss(i,o,v);let m="";o>1&&(m+=`Dados: [${u.results.join(", ")}] `),u.bonusRolls?.length>0&&(m+=`Bonus Rolls: [${u.bonusRolls.join(", ")}] -> ${Math.abs(u.modifierTotal)}`);const p=s.campaign?.gmName||ga(Gt)("common.labels.master");Za.addToHistory({source:"GM",charName:p,name:`${o}d${i} ${v?v>0?`+${v}`:v:""}`,description:m.trim()||null,total:u.total,formula:u.formula,crit:u.crit}),sa.set(!0)}let bt=Pe(Zt(Date.now()));Ma(()=>{const i=setInterval(()=>{T(bt,Date.now(),!0)},1e4);return()=>clearInterval(i)});let xt=fe(()=>(()=>{const i=a(q).filter(b=>a(X).includes(b.id)),o=i.filter(b=>b&&b.initiative).map(b=>({...b,type:"player"})),v=a(V).map(b=>({...b,type:"enemy"})),u=i.filter(b=>b&&!b.initiative).map(b=>({...b,type:"player"})),m=[...o,...v,...u],p=new Set;return m.filter(b=>{if(!b)return!1;const h=b.type==="player"?b.id:b.instanceId;return p.has(h)?!1:(p.add(h),!0)})})());function Te(i){return i.lastUpdate?a(bt)-i.lastUpdate<6e4:!1}function Le(i,o){const v=pt.get(s.campaign.id)||s.campaign,u=v.members||[],m=u.findIndex(S=>S.id===i);let p=u;m!==-1&&(p=[...u],p[m]={...p[m],...o});const b=v.activeEnemies||[],h=b.findIndex(S=>S.id===i&&S.type==="player");let P=b;h!==-1&&(P=[...b],P[h]={...P[h],...o}),M({members:p,activeEnemies:P})}var Je=Is(),qe=ye(Je),Qe=t(qe),at=t(Qe),Ze=t(at),E=t(Ze),$=t(E);tr($,{size:14,class:"text-indigo-500"});var re=r($),we=r(re);{var Ae=i=>{var o=is(),v=t(o,!0);e(o),g(()=>n(v,a(q).length)),c(i,o)};j(we,i=>{a(q).length>0&&i(Ae)})}e(E);var Ue=r(E,2);Ue.__click=()=>T(O,!a(O));var Ne=t(Ue,!0);e(Ue),e(Ze);var rt=r(Ze,2);{var Rt=i=>{var o=os(),v=t(o),u=r(t(v),2),m=t(u);e(u),e(v);var p=r(v,2);Oe(p,17,()=>a(Me),b=>b.id,(b,h)=>{var P=ns(),S=t(P),te=t(S),ae=t(te,!0);e(te);var _e=r(te,2),le=t(_e,!0);e(_e),e(S);var ve=r(S,2),R=t(ve);R.__click=()=>oe(a(h).id);var W=t(R);Sa(W,{size:14}),e(R);var se=r(R,2);se.__click=()=>ze(a(h).id);var L=t(se);va(L,{size:14}),e(se),e(ve),e(P),g(U=>{n(ae,a(h).name),n(le,U)},[()=>x()("session.players.new_request")]),c(b,P)}),Xt(2),e(o),g(b=>n(m,`${b??""} (${a(Me).length??""})`),[()=>x()("session.players.waiting_approval")]),c(i,o)};j(rt,i=>{a(Me).length>0&&i(Rt)})}var mt=r(rt,2),_t=t(mt),st=t(_t);Oe(st,17,()=>a(q),i=>i.id,(i,o)=>{const v=fe(()=>Te(a(o))),u=fe(()=>a(X).includes(a(o).id));var m=ds(),p=t(m),b=r(p,2),h=t(b),P=t(h,!0);e(h);var S=r(h,2),te=t(S);{var ae=Z=>{var B=ls(),Ce=t(B,!0);e(B),g(he=>n(Ce,he),[()=>x()("common.labels.session")]),c(Z,B)};j(te,Z=>{a(u)&&Z(ae)})}var _e=r(te);e(S),e(b);var le=r(b,2),ve=t(le);ve.__click=()=>xe(a(o).id);var R=t(ve);{var W=Z=>{sr(Z,{size:14})},se=Z=>{Kt(Z,{size:14})};j(R,Z=>{a(u)?Z(W):Z(se,!1)})}e(ve);var L=r(ve,2);L.__click=()=>de(a(o).id);var U=t(L);va(U,{size:14}),e(L),e(le),e(m),g((Z,B,Ce)=>{je(m,1,`p-2.5 rounded-xl border flex items-center gap-3 transition-all ${a(v)?"bg-indigo-900/10 border-indigo-500/20":"bg-slate-900/50 border-slate-800"} ${a(v)||a(u)?"opacity-100":"opacity-40"} hover:border-indigo-500/40 group shadow-sm`),je(p,1,`w-2 h-2 rounded-full ${a(v)?"bg-green-500 shadow-[0_0_8px_rgba(74,222,128,0.4)]":"bg-slate-700"}`),je(h,1,`font-bold text-sm ${a(v)?"text-white":"text-slate-500"} group-hover:text-indigo-300 transition-colors`),n(P,a(o).name),n(_e,` ${Z??""} ${a(o).level??""} • ${a(o).ancestry??""}`),je(ve,1,`p-1.5 rounded-lg transition-all ${a(u)?"text-amber-400 hover:bg-amber-400/10":"text-slate-500 hover:text-indigo-400 hover:bg-indigo-400/10"}`),Fe(ve,"title",B),Fe(L,"title",Ce)},[()=>x()("common.labels.level"),()=>a(u)?x()("session.players.remove_from_session"):x()("session.players.add_to_session"),()=>x()("session.players.kick_from_campaign")]),c(i,m)});var wt=r(st,2);{var Pt=i=>{var o=vs(),v=t(o,!0);e(o),g(u=>n(v,u),[()=>x()("session.players.none")]),c(i,o)};j(wt,i=>{a(q).length===0&&i(Pt)})}e(_t),e(mt);var ft=r(mt,2),kt=t(ft);{var De=i=>{var o=cs(),v=ye(o);v.__click=()=>M({isPublished:!0});var u=t(v);gr(u,{size:14});var m=r(u);e(v);var p=r(v,2),b=t(p,!0);e(p),g((h,P)=>{n(m,` ${h??""}`),n(b,P)},[()=>x()("session.publish.publish_session"),()=>x()("session.publish.make_visible")]),c(i,o)},it=i=>{var o=xs(),v=ye(o),u=t(v),m=t(u),p=t(m);ar(p,{size:10,class:"animate-pulse"});var b=r(p);e(m),e(u);var h=r(u,2);h.__click=()=>T(J,!a(J));var P=t(h);Or(P,{size:14}),e(h),e(v);var S=r(v,2);{var te=B=>{var Ce=us(),he=t(Ce);e(Ce),g((ce,ot)=>{Fe(he,"src",ce),Fe(he,"alt",ot)},[()=>`https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${encodeURIComponent(a(ie))}`,()=>x()("session.publish.qr_alt")]),c(B,Ce)};j(S,B=>{a(J)&&B(te)})}var ae=r(S,2),_e=t(ae),le=t(_e);le.__click=ne;var ve=t(le,!0);e(le);var R=r(le,2);R.__click=ne;var W=t(R);{var se=B=>{var Ce=bs(),he=t(Ce);Sa(he,{size:10,class:"inline mr-1"});var ce=r(he);e(Ce),g(ot=>n(ce,` ${ot??""}`),[()=>x()("common.buttons.copied")]),c(B,Ce)};j(W,B=>{a(ue)&&B(se)})}var L=r(W,2);zr(L,{size:14}),e(R),e(_e),e(ae);var U=r(ae,2);U.__click=()=>M({isPublished:!1});var Z=t(U,!0);e(U),g((B,Ce,he,ce)=>{n(b,` ${B??""}`),Fe(h,"title",Ce),n(ve,a(ie)),Fe(R,"aria-label",he),n(Z,ce)},[()=>x()("session.publish.public_session"),()=>x()("session.publish.qr_code"),()=>x()("session.publish.copy_link"),()=>x()("session.publish.remove_public")]),c(i,o)};j(kt,i=>{s.campaign?.isPublished?i(it,!1):i(De)})}e(ft),e(at);var Se=r(at,2),Ke=t(Se),Xe=t(Ke);Xe.__click=()=>T(be,"enemies");var vt=t(Xe);pa(vt,{size:14});var ct=r(vt);e(Xe);var Ye=r(Xe,2);Ye.__click=()=>T(be,"encounters");var Ot=t(Ye);Ua(Ot,{size:14});var Lt=r(Ot);e(Ye),e(Ke);var Tt=r(Ke,2),ia=t(Tt);{var Wt=i=>{var o=fs(),v=ye(o);Oe(v,1,w,p=>p.id,(p,b)=>{var h=ms(),P=t(h),S=t(P);Mr(S,{size:12,class:"text-slate-600 cursor-grab"});var te=r(S,2),ae=t(te),_e=t(ae,!0);e(ae);var le=r(ae,2),ve=t(le);e(le),e(te),e(P);var R=r(P,2);R.__click=()=>Ve(a(b));var W=t(R);Kt(W,{size:16}),e(R),e(h),g(se=>{n(_e,a(b).name),n(ve,`${se??""} ${a(b).difficulty??""}`)},[()=>x()("session.enemies.difficulty")]),c(p,h)});var u=r(v,2);{var m=p=>{var b=_s(),h=t(b,!0);e(b),g(P=>n(h,P),[()=>x()("session.enemies.none")]),c(p,b)};j(u,p=>{w().length===0&&p(m)})}c(i,o)},na=i=>{var o=hs(),v=ye(o);Oe(v,1,A,p=>p.id,(p,b)=>{var h=ps(),P=t(h),S=t(P),te=t(S,!0);e(S);var ae=r(S,2),_e=t(ae);e(ae),e(P);var le=r(P,2);le.__click=()=>Ie(a(b));var ve=t(le);La(ve,{size:14}),e(le),e(h),g((R,W)=>{n(te,a(b).name),n(_e,`${R??""} ${W??""}`)},[()=>a(b).enemies?.reduce((R,W)=>R+W.count,0)||0,()=>x()("session.enemies.title")]),c(p,h)});var u=r(v,2);{var m=p=>{var b=gs(),h=t(b,!0);e(b),g(P=>n(h,P),[()=>x()("session.enemies.no_encounters")]),c(p,b)};j(u,p=>{A().length===0&&p(m)})}c(i,o)};j(ia,i=>{a(be)==="enemies"?i(Wt):i(na,!1)})}e(Tt),e(Se),e(Qe);var Jt=r(Qe,2),qt=t(Jt),ra=t(qt),ca=t(ra);{var f=i=>{var o=ys();o.__click=He;var v=t(o);Ba(v,{size:20});var u=r(v);e(o),g(m=>n(u,` ${m??""}`),[()=>x()("session.combat.start")]),c(i,o)},y=i=>{var o=ws(),v=t(o);v.__click=jt;var u=t(v);Da(u,{size:20}),e(v);var m=r(v,2),p=t(m),b=t(p,!0);e(p);var h=r(p),P=t(h,!0);e(h),e(m);var S=r(m,2);S.__click=Ge;var te=t(S);Ir(te,{size:16});var ae=r(te);e(S);var _e=r(S,4);_e.__click=()=>St();var le=t(_e,!0);e(_e),e(o),g((ve,R,W,se,L)=>{Fe(v,"title",ve),n(b,R),n(P,a($e).round),Fe(S,"title",W),n(ae,` ${se??""}`),n(le,L)},[()=>x()("session.combat.previous"),()=>x()("session.combat.round"),()=>x()("session.combat.next"),()=>x()("session.combat.next"),()=>x()("session.combat.end")]),c(i,o)};j(ca,i=>{a($e).active?i(y,!1):i(f)})}e(ra),e(qt);var Y=r(qt,2),ee=t(Y);Oe(ee,25,()=>a(xt),i=>i.type==="player"?i.id:i.instanceId,(i,o)=>{var v=ks(),u=t(v);ts(u,{get entity(){return a(o)},updateEnemy:yt,removeFromCombat:ut,updatePlayer:Le}),e(v),er(v,()=>as,()=>({duration:300})),c(i,v)});var Re=r(ee,2);{var nt=i=>{var o=$s(),v=t(o,!0);e(o),g(u=>n(v,u),[()=>x()("session.combat.empty")]),c(i,o)};j(Re,i=>{a(xt).length===0&&i(nt)})}e(Y),e(Jt),Xt(2),e(qe);var Ut=r(qe,2);{var Ft=i=>{var o=Es();o.__click=se=>{se.target===se.currentTarget&&T(pe,!1)};var v=t(o),u=t(v),m=t(u),p=t(m);or(p,{size:24}),e(m);var b=r(m,2),h=t(b),P=t(h,!0);e(h);var S=r(h,2),te=t(S,!0);e(S),e(b),e(u);var ae=r(u,2);Oe(ae,21,()=>a(Ee),et,(se,L)=>{var U=Cs(),Z=t(U),B=t(Z);pa(B,{size:14,class:"text-slate-500"});var Ce=r(B);e(Z);var he=r(Z,2);Oe(he,21,()=>a(L).effects,et,(ce,ot)=>{var Dt=zs(),Ht=t(Dt),ua=t(Ht);e(Ht);var ma=r(Ht,2),Va=t(ma,!0);e(ma),e(Dt),g(()=>{n(ua,`${a(ot).name??""}:`),n(Va,a(ot).desc)}),c(ce,Dt)}),e(he),e(U),g(()=>n(Ce,` ${a(L).name??""}`)),c(se,U)}),e(ae);var _e=r(ae,2),le=t(_e);le.__click=()=>T(pe,!1);var ve=t(le,!0);e(le);var R=r(le,2);R.__click=lt;var W=t(R,!0);e(R),e(_e),e(v),e(o),g((se,L,U,Z)=>{n(P,se),n(te,L),n(ve,U),n(W,Z)},[()=>x()("session.end_of_round.title"),()=>x()("session.end_of_round.summary"),()=>x()("common.buttons.cancel"),()=>x()("session.end_of_round.advance")]),c(i,o)};j(Ut,i=>{a(pe)&&i(Ft)})}var At=r(Ut,2),Bt=t(At),oa=t(Bt);ir(oa,{size:16});var la=r(oa);e(Bt);var da=r(Bt,2);da.__click=()=>dt(20);var Vt=r(da,2);Vt.__click=()=>dt(6);var Qt=r(Vt,2);Qt.__click=()=>dt(6,2);var I=r(Qt,2);I.__click=()=>dt(6,3),e(At);var N=r(At,2);{let i=fe(()=>`${x()("session.quick.roll_title")} (${a(We).count}d${a(We).sides})`),o=fe(()=>a(We).sides===20?x()("session.quick.boons_banes"):x()("session.quick.fixed_modifier"));nr(N,{get isOpen(){return a(We).isOpen},get title(){return a(i)},get label(){return a(o)},onClose:()=>a(We).isOpen=!1,onRoll:gt,initialModifier:0})}var H=r(N,2);{var ge=i=>{var o=Os();o.__click=R=>{R.target===R.currentTarget&&T(O,!1)};var v=t(o),u=t(v),m=t(u),p=t(m),b=t(p,!0);e(p);var h=r(p,2),P=t(h,!0);e(h),e(m);var S=r(m,2);S.__click=()=>T(O,!1);var te=t(S);xa(te,{size:16}),e(S),e(u);var ae=r(u,2),_e=t(ae);Oe(_e,17,()=>a(F),et,(R,W)=>{var se=Ms();se.__click=()=>xe(a(W).id);var L=t(se),U=t(L,!0);e(L);var Z=r(L,2),B=t(Z),Ce=t(B,!0);e(B);var he=r(B,2),ce=t(he);e(he),e(Z);var ot=r(Z,2),Dt=t(ot);Kt(Dt,{size:16}),e(ot),e(se),g((Ht,ua)=>{n(U,Ht),n(Ce,a(W).name),n(ce,`${ua??""} ${a(W).level??""} • ${a(W).ancestry??""}`)},[()=>a(W).name.charAt(0),()=>x()("common.labels.level")]),c(R,se)});var le=r(_e,2);{var ve=R=>{var W=js(),se=t(W),L=t(se);pa(L,{size:24}),e(se);var U=r(se,2),Z=t(U,!0);e(U);var B=r(U,2),Ce=t(B,!0);e(B),e(W),g((he,ce)=>{n(Z,he),n(Ce,ce)},[()=>x()("session.manage_session.no_available"),()=>x()("session.manage_session.all_in_session")]),c(R,W)};j(le,R=>{a(F).length===0&&R(ve)})}e(ae),e(v),e(o),g((R,W)=>{n(b,R),n(P,W)},[()=>x()("session.manage_session.title"),()=>x()("session.manage_session.description")]),c(i,o)};j(H,i=>{a(O)&&i(ge)})}var me=r(H,2);Aa(me,{get isOpen(){return k()},onClose:()=>sa.set(!1)});var Q=r(me,2);Ra(Q,{get isOpen(){return a(D).isOpen},get title(){return a(D).title},get message(){return a(D).message},get onConfirm(){return a(D).onConfirm},onCancel:()=>a(D).isOpen=!1}),g((i,o,v,u,m)=>{n(re,` ${i??""} `),n(Ne,o),je(Xe,1,`flex-1 text-xs font-bold py-1.5 rounded flex items-center justify-center gap-2 transition-colors ${a(be)==="enemies"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),n(ct,` ${v??""}`),je(Ye,1,`flex-1 text-xs font-bold py-1.5 rounded flex items-center justify-center gap-2 transition-colors ${a(be)==="encounters"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),n(Lt,` ${u??""}`),n(la,` ${m??""}`)},[()=>x()("session.players.title"),()=>a(O)?x()("session.players.close"):x()("session.players.add"),()=>x()("session.enemies.title"),()=>x()("session.enemies.encounters"),()=>x()("session.quick.title")]),c(z,Je),ea(),C()}ta(["click"]);var Ss=_('<div class="space-y-4"><div class="flex items-center gap-4"><div class="relative group cursor-pointer"><div class="w-16 h-16 rounded-xl overflow-hidden border border-slate-700"><!></div> <div class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"><!></div></div> <div class="flex-1"><label for="enemy-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold text-lg"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-diff" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-diff" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-size" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-size" type="number" step="0.5" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div><label for="enemy-desc" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <textarea id="enemy-desc" class="w-full bg-slate-900 border border-slate-700 rounded p-3 text-white text-sm min-h-[100px] resize-none focus:border-indigo-500 focus:outline-none transition-colors"></textarea></div> <div class="grid grid-cols-1"><div><label for="enemy-speed" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-speed" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div></div>'),Rs=_('<div class="bg-slate-900 p-2 rounded border border-slate-700 text-center"><label class="text-[10px] text-slate-500 uppercase font-bold block mb-1"> </label> <input type="number" class="w-full bg-transparent text-center font-bold text-white text-xl focus:outline-none mb-1"/> <div> </div></div>'),Ps=_('<div class="space-y-6"><div><h4 class="text-indigo-400 font-bold text-sm uppercase mb-3"> </h4> <div class="grid grid-cols-4 gap-3"></div></div> <div class="space-y-3"><div><label for="enemy-senses" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-senses" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-langs" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-langs" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-immune" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-immune" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div></div></div>'),Ts=_('<div class="flex gap-2 items-start animate-in fade-in slide-in-from-left-2"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600 focus:border-indigo-500 focus:outline-none" placeholder="Nome"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none focus:border-indigo-500 focus:outline-none" rows="2" placeholder="Descrição..."></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),As=_('<div class="text-xs text-slate-600 italic text-center py-4 border-2 border-dashed border-slate-800 rounded"> </div>'),Ds=_('<div><div class="flex justify-between items-center mb-3"><h4> </h4> <button class="text-xs bg-slate-800 px-2 py-1 rounded hover:bg-slate-700 text-white flex items-center gap-1 border border-slate-700"><!> </button></div> <div class="space-y-3"><!> <!></div></div>'),Hs=_('<div class="space-y-6"></div>'),Ls=_('<div class="w-16 h-16 rounded-lg overflow-hidden border border-slate-700 shadow-lg flex-shrink-0"><!></div>'),qs=_('<div class="bg-slate-950 p-2 rounded border border-slate-800"><div class="text-[10px] text-slate-500 uppercase font-bold mb-1"> </div> <div class="text-white font-bold"> <span> </span></div></div>'),Us=_('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),Fs=_('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),Bs=_('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),Vs=_('<div class="mb-2 pl-3 border-l-2 border-indigo-900"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),Gs=_('<div><h4 class="font-bold text-indigo-400 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Ws=_('<div class="mb-2 pl-3 border-l-2 border-red-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),Js=_('<div><h4 class="font-bold text-red-500 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Qs=_('<div class="mb-2 pl-3 border-l-2 border-orange-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),Zs=_('<div><h4 class="font-bold text-orange-400 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Xs=_('<div class="mb-2 pl-3 border-l-2 border-yellow-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),Ks=_('<div><h4 class="font-bold text-yellow-500 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Ys=_('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-6xl h-[90vh] border border-slate-700 shadow-2xl overflow-hidden flex flex-col lg:flex-row" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="w-full lg:w-1/2 flex flex-col h-full border-r border-slate-700"><div class="p-4 border-b border-slate-700 bg-slate-900 flex justify-between items-center"><h3 id="modal-title" class="font-bold text-white text-lg"> </h3> <button class="lg:hidden text-slate-400 hover:text-white"><!></button></div> <div class="flex border-b border-slate-700 bg-slate-900/50"><button> </button> <button> </button> <button> </button></div> <div class="flex-1 overflow-y-auto p-6 custom-scrollbar bg-slate-800/50"><!></div> <div class="p-4 border-t border-slate-700 bg-slate-900 flex justify-end gap-3"><button class="px-6 py-2 rounded bg-slate-800 hover:bg-slate-700 text-white font-bold transition-colors"> </button> <button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold flex items-center gap-2 transition-colors"><!> </button></div></div> <div class="hidden lg:flex w-1/2 bg-slate-950 flex-col border-l border-slate-800"><div class="p-4 border-b border-slate-800 bg-slate-950"><h3 class="font-bold text-slate-500 text-xs uppercase flex items-center gap-2"><!> </h3></div> <div class="flex-1 p-8 overflow-y-auto flex items-center justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-slate-950"><div class="w-full max-w-md bg-slate-900 border border-slate-700 rounded-xl p-5 shadow-2xl relative"><div class="absolute -top-3 -right-3 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-red-400"> </div> <div class="flex items-center gap-3 mb-4"><!> <div class="flex-1 min-w-0"><h2 class="text-2xl font-bold text-white mb-1 font-serif tracking-wide truncate"> </h2> <div class="h-1 w-20 bg-red-600 rounded-full"></div></div></div> <div class="grid grid-cols-2 gap-4 mb-4 text-sm"><div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold text-lg"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold text-lg"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold"> </span></div></div> <div class="grid grid-cols-4 gap-2 mb-6 text-center font-mono text-slate-300"></div> <div class="mb-6 space-y-2 text-xs"><!> <!> <!></div> <div class="space-y-5 text-sm"><!> <!> <!> <!></div></div></div></div></div></div> <input type="file" hidden="" accept="image/*"/> <!>',1);function ei(z,s){Yt(s,!0);const l=()=>tt(Gt,"$t",x),[x,w]=aa();let A=Nt(s,"isOpen",3,!1),k=Nt(s,"initialData",3,"{}"),d=Pe(Zt(pe())),C=Pe("stats"),O=Pe(!1),ue=Pe(""),J=Pe(void 0);function ke(V){const G=V.target.files;if(G&&G.length>0){const K=G[0],q=new FileReader;q.onload=()=>{T(ue,q.result,!0),T(O,!0)},q.readAsDataURL(K)}V.target&&(V.target.value="")}async function be(V){try{const G=await dr(V);a(d).imageUrl=G,T(O,!1)}catch(G){console.error(G),alert(G.message||"Erro ao salvar imagem")}}function pe(){return{name:"",difficulty:1,defense:10,health:10,damage:0,size:1,speed:10,description:"",senses:"",languages:"",immune:"",imageUrl:"",stats:{str:10,agi:10,int:10,wil:10},traits:[],actions:[],reactions:[],endOfRound:[]}}za(()=>{if(A()&&k())try{const V=JSON.parse(k());Object.keys(V).length===0?T(d,pe(),!0):T(d,{...pe(),...V},!0)}catch{T(d,pe(),!0)}});function Ee(V){a(d)[V]=[...a(d)[V],{name:"",desc:""}]}function D(V,G){a(d)[V]=a(d)[V].filter((K,q)=>q!==G)}function ie(V){}var ne=Be(),X=ye(ne);{var $e=V=>{var G=Ys(),K=ye(G);K.__click=ie;var q=t(K),Me=t(q),F=t(Me),M=t(F),xe=t(M,!0);e(M);var oe=r(M,2);oe.__click=function(...I){s.onClose?.apply(this,I)};var ze=t(oe);xa(ze,{size:20}),e(oe),e(F);var de=r(F,2),Ve=t(de);Ve.__click=()=>T(C,"stats");var Ie=t(Ve,!0);e(Ve);var He=r(Ve,2);He.__click=()=>T(C,"attributes");var Ge=t(He,!0);e(He);var lt=r(He,2);lt.__click=()=>T(C,"abilities");var St=t(lt,!0);e(lt),e(de);var ut=r(de,2),yt=t(ut);{var jt=I=>{var N=Ss(),H=t(N),ge=t(H);ge.__click=()=>a(J)?.click();var me=t(ge),Q=t(me);Ha(Q,()=>a(d).imageUrl,ce=>{$a(ce,{get hash(){return a(d).imageUrl},get alt(){return a(d).name},size:"custom",fallbackText:"?"})}),e(me);var i=r(me,2),o=t(i);vr(o,{size:20,class:"text-white"}),e(i),e(ge);var v=r(ge,2),u=t(v),m=t(u,!0);e(u);var p=r(u,2);$t(p),e(v),e(H);var b=r(H,2),h=t(b),P=t(h),S=t(P,!0);e(P);var te=r(P);$t(te),e(h);var ae=r(h,2),_e=t(ae),le=t(_e,!0);e(_e);var ve=r(_e);$t(ve),e(ae),e(b);var R=r(b,2),W=t(R),se=t(W,!0);e(W);var L=r(W,2);Ea(L),e(R);var U=r(R,2),Z=t(U),B=t(Z),Ce=t(B,!0);e(B);var he=r(B);$t(he),e(Z),e(U),e(N),g((ce,ot,Dt,Ht,ua,ma)=>{n(m,ce),n(S,ot),n(le,Dt),n(se,Ht),Fe(L,"placeholder",ua),n(Ce,ma)},[()=>l()("session.enemy_modal.name"),()=>l()("session.enemy_modal.difficulty"),()=>l()("session.enemy_modal.size"),()=>l()("session.enemy_modal.description"),()=>l()("session.enemy_modal.description_placeholder"),()=>l()("session.enemy_modal.speed")]),It(p,()=>a(d).name,ce=>a(d).name=ce),It(te,()=>a(d).difficulty,ce=>a(d).difficulty=ce),It(ve,()=>a(d).size,ce=>a(d).size=ce),It(L,()=>a(d).description,ce=>a(d).description=ce),It(he,()=>a(d).speed,ce=>a(d).speed=ce),c(I,N)},We=I=>{var N=Be(),H=ye(N);{var ge=Q=>{var i=Ps(),o=t(i),v=t(o),u=t(v,!0);e(v);var m=r(v,2);Oe(m,20,()=>["str","agi","int","wil"],et,(L,U)=>{var Z=Rs(),B=t(Z),Ce=t(B,!0);e(B);var he=r(B,2);$t(he);var ce=r(he,2),ot=t(ce);e(ce),e(Z),g(()=>{Fe(B,"for",`attr-${U??""}`),n(Ce,U),Fe(he,"id",`attr-${U??""}`),je(ce,1,`text-xs font-bold ${a(d).stats[U]-10>=0?"text-green-500":"text-red-500"}`),n(ot,`${a(d).stats[U]-10>=0?"+":""}${a(d).stats[U]-10}`)}),It(he,()=>a(d).stats[U],Dt=>a(d).stats[U]=Dt),c(L,Z)}),e(m),e(o);var p=r(o,2),b=t(p),h=t(b),P=t(h,!0);e(h);var S=r(h);$t(S),e(b);var te=r(b,2),ae=t(te),_e=t(ae,!0);e(ae);var le=r(ae);$t(le),e(te);var ve=r(te,2),R=t(ve),W=t(R,!0);e(R);var se=r(R);$t(se),e(ve),e(p),e(i),g((L,U,Z,B,Ce,he,ce)=>{n(u,L),n(P,U),Fe(S,"placeholder",Z),n(_e,B),Fe(le,"placeholder",Ce),n(W,he),Fe(se,"placeholder",ce)},[()=>l()("session.enemy_modal.main_attributes"),()=>l()("session.enemy_modal.senses"),()=>l()("session.enemy_modal.senses_placeholder"),()=>l()("session.enemy_modal.languages"),()=>l()("session.enemy_modal.languages_placeholder"),()=>l()("session.enemy_modal.immunities"),()=>l()("session.enemy_modal.immunities_placeholder")]),It(S,()=>a(d).senses,L=>a(d).senses=L),It(le,()=>a(d).languages,L=>a(d).languages=L),It(se,()=>a(d).immune,L=>a(d).immune=L),c(Q,i)},me=Q=>{var i=Be(),o=ye(i);{var v=u=>{var m=Hs();Oe(m,20,()=>[{key:"traits",title:"Traços (Traits)",color:"text-indigo-400",border:"border-indigo-500/30"},{key:"actions",title:"Ações",color:"text-red-400",border:"border-red-500/30"},{key:"reactions",title:"Reações",color:"text-orange-400",border:"border-orange-500/30"},{key:"endOfRound",title:"Fim da Rodada",color:"text-yellow-400",border:"border-yellow-500/30"}],et,(p,b)=>{var h=Ds(),P=t(h),S=t(P),te=t(S,!0);e(S);var ae=r(S,2);ae.__click=()=>Ee(b.key);var _e=t(ae);Kt(_e,{size:12});var le=r(_e);e(ae),e(P);var ve=r(P,2),R=t(ve);Oe(R,17,()=>a(d)[b.key],et,(L,U,Z)=>{var B=Ts(),Ce=t(B),he=t(Ce);$t(he);var ce=r(he,2);Ea(ce),e(Ce);var ot=r(Ce,2);ot.__click=()=>D(b.key,Z);var Dt=t(ot);va(Dt,{size:16}),e(ot),e(B),It(he,()=>a(U).name,Ht=>a(U).name=Ht),It(ce,()=>a(U).desc,Ht=>a(U).desc=Ht),c(L,B)});var W=r(R,2);{var se=L=>{var U=As(),Z=t(U,!0);e(U),g(B=>n(Z,B),[()=>l()("session.enemy_modal.empty")]),c(L,U)};j(W,L=>{a(d)[b.key].length===0&&L(se)})}e(ve),e(h),g(L=>{je(h,1,`p-4 bg-slate-900 rounded border ${b.border??""}`),je(S,1,`font-bold text-sm uppercase ${b.color??""}`),n(te,b.title),n(le,` ${L??""}`)},[()=>l()("session.enemy_modal.add")]),c(p,h)}),e(m),c(u,m)};j(o,u=>{a(C)==="abilities"&&u(v)},!0)}c(Q,i)};j(H,Q=>{a(C)==="attributes"?Q(ge):Q(me,!1)},!0)}c(I,N)};j(yt,I=>{a(C)==="stats"?I(jt):I(We,!1)})}e(ut);var dt=r(ut,2),gt=t(dt);gt.__click=function(...I){s.onClose?.apply(this,I)};var ht=t(gt,!0);e(gt);var bt=r(gt,2);bt.__click=()=>s.onSave(a(d));var xt=t(bt);Fa(xt,{size:18});var Te=r(xt);e(bt),e(dt),e(Me);var Le=r(Me,2),Je=t(Le),qe=t(Je),Qe=t(qe);Cr(Qe,{size:14});var at=r(Qe);e(qe),e(Je);var Ze=r(Je,2),E=t(Ze),$=t(E),re=t($);e($);var we=r($,2),Ae=t(we);{var Ue=I=>{var N=Ls(),H=t(N);$a(H,{get hash(){return a(d).imageUrl},get alt(){return a(d).name},size:"custom"}),e(N),c(I,N)};j(Ae,I=>{a(d).imageUrl&&I(Ue)})}var Ne=r(Ae,2),rt=t(Ne),Rt=t(rt,!0);e(rt),Xt(2),e(Ne),e(we);var mt=r(we,2),_t=t(mt),st=t(_t),wt=t(st,!0);e(st);var Pt=r(st,2),ft=t(Pt,!0);e(Pt),e(_t);var kt=r(_t,2),De=t(kt),it=t(De,!0);e(De);var Se=r(De,2),Ke=t(Se,!0);e(Se),e(kt);var Xe=r(kt,2),vt=t(Xe),ct=t(vt,!0);e(vt);var Ye=r(vt,2),Ot=t(Ye,!0);e(Ye),e(Xe);var Lt=r(Xe,2),Tt=t(Lt),ia=t(Tt,!0);e(Tt);var Wt=r(Tt,2),na=t(Wt,!0);e(Wt),e(Lt),e(mt);var Jt=r(mt,2);Oe(Jt,20,()=>["str","agi","int","wil"],et,(I,N)=>{var H=qs(),ge=t(H),me=t(ge,!0);e(ge);var Q=r(ge,2),i=t(Q),o=r(i),v=t(o);e(o),e(Q),e(H),g(()=>{n(me,N),n(i,`${a(d).stats[N]??""} `),je(o,1,`text-xs ${a(d).stats[N]-10>=0?"text-green-500":"text-red-500"}`),n(v,`(${a(d).stats[N]-10>=0?"+":""}${a(d).stats[N]-10})`)}),c(I,H)}),e(Jt);var qt=r(Jt,2),ra=t(qt);{var ca=I=>{var N=Us(),H=t(N),ge=t(H);e(H);var me=r(H,2),Q=t(me,!0);e(me),e(N),g(i=>{n(ge,`${i??""}:`),n(Q,a(d).senses)},[()=>l()("session.enemy_modal.senses")]),c(I,N)};j(ra,I=>{a(d).senses&&I(ca)})}var f=r(ra,2);{var y=I=>{var N=Fs(),H=t(N),ge=t(H);e(H);var me=r(H,2),Q=t(me,!0);e(me),e(N),g(i=>{n(ge,`${i??""}:`),n(Q,a(d).languages)},[()=>l()("session.enemy_modal.languages")]),c(I,N)};j(f,I=>{a(d).languages&&I(y)})}var Y=r(f,2);{var ee=I=>{var N=Bs(),H=t(N),ge=t(H);e(H);var me=r(H,2),Q=t(me,!0);e(me),e(N),g(i=>{n(ge,`${i??""}:`),n(Q,a(d).immune)},[()=>l()("session.enemy_modal.immunities")]),c(I,N)};j(Y,I=>{a(d).immune&&I(ee)})}e(qt);var Re=r(qt,2),nt=t(Re);{var Ut=I=>{var N=Gs(),H=t(N),ge=t(H,!0);e(H);var me=r(H,2);Oe(me,17,()=>a(d).traits,et,(Q,i,o,v)=>{var u=Vs(),m=t(u),p=t(m);e(m);var b=r(m,2),h=t(b,!0);e(b),e(u),g(()=>{n(p,`${a(i).name??""}:`),n(h,a(i).desc)}),c(Q,u)}),e(N),g(Q=>n(ge,Q),[()=>l()("session.enemy_modal.traits")]),c(I,N)};j(nt,I=>{a(d).traits.length>0&&I(Ut)})}var Ft=r(nt,2);{var At=I=>{var N=Js(),H=t(N),ge=t(H,!0);e(H);var me=r(H,2);Oe(me,17,()=>a(d).actions,et,(Q,i,o,v)=>{var u=Ws(),m=t(u),p=t(m);e(m);var b=r(m,2),h=t(b,!0);e(b),e(u),g(()=>{n(p,`${a(i).name??""}:`),n(h,a(i).desc)}),c(Q,u)}),e(N),g(Q=>n(ge,Q),[()=>l()("session.enemy_modal.actions")]),c(I,N)};j(Ft,I=>{a(d).actions.length>0&&I(At)})}var Bt=r(Ft,2);{var oa=I=>{var N=Zs(),H=t(N),ge=t(H,!0);e(H);var me=r(H,2);Oe(me,17,()=>a(d).reactions,et,(Q,i,o,v)=>{var u=Qs(),m=t(u),p=t(m);e(m);var b=r(m,2),h=t(b,!0);e(b),e(u),g(()=>{n(p,`${a(i).name??""}:`),n(h,a(i).desc)}),c(Q,u)}),e(N),g(Q=>n(ge,Q),[()=>l()("session.enemy_modal.reactions")]),c(I,N)};j(Bt,I=>{a(d).reactions.length>0&&I(oa)})}var la=r(Bt,2);{var da=I=>{var N=Ks(),H=t(N),ge=t(H,!0);e(H);var me=r(H,2);Oe(me,17,()=>a(d).endOfRound,et,(Q,i,o,v)=>{var u=Xs(),m=t(u),p=t(m);e(m);var b=r(m,2),h=t(b,!0);e(b),e(u),g(()=>{n(p,`${a(i).name??""}:`),n(h,a(i).desc)}),c(Q,u)}),e(N),g(Q=>n(ge,Q),[()=>l()("session.enemy_modal.end_of_round")]),c(I,N)};j(la,I=>{a(d).endOfRound.length>0&&I(da)})}e(Re),e(E),e(Ze),e(Le),e(q),e(K);var Vt=r(K,2);Vt.__change=ke,yr(Vt,I=>T(J,I),()=>a(J));var Qt=r(Vt,2);lr(Qt,{get isOpen(){return a(O)},get imageUrl(){return a(ue)},onClose:()=>T(O,!1),onCrop:be}),g((I,N,H,ge,me,Q,i,o,v,u,m,p,b,h)=>{Fe(K,"aria-label",I),n(xe,N),je(Ve,1,`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a(C)==="stats"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),n(Ie,H),je(He,1,`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a(C)==="attributes"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),n(Ge,ge),je(lt,1,`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a(C)==="abilities"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),n(St,me),n(ht,Q),n(Te,` ${i??""}`),n(at,` ${o??""}`),n(re,`${v??""} ${a(d).difficulty??""}`),n(Rt,u),n(wt,m),n(ft,a(d).defense),n(it,p),n(Ke,a(d).health),n(ct,b),n(Ot,a(d).size),n(ia,h),n(na,a(d).speed)},[()=>l()("session.enemy_modal.close"),()=>l()("session.enemy_modal.title"),()=>l()("session.enemy_modal.tab_general"),()=>l()("session.enemy_modal.tab_attributes"),()=>l()("session.enemy_modal.tab_abilities"),()=>l()("common.buttons.cancel"),()=>l()("common.buttons.save"),()=>l()("session.enemy_modal.preview"),()=>l()("session.enemy_modal.difficulty"),()=>a(d).name||l()("session.enemy_modal.enemy_default"),()=>l()("session.enemy_modal.defense"),()=>l()("session.enemy_modal.health"),()=>l()("session.enemy_modal.size"),()=>l()("session.enemy_modal.speed")]),c(V,G)};j(X,V=>{A()&&V($e)})}c(z,ne),ea(),w()}ta(["click","change"]);var ti=_('<div class="flex justify-between items-center bg-slate-800 p-2 rounded border border-slate-700"><div class="flex-1"><div class="text-sm font-bold text-white"> </div> <div class="text-[10px] text-slate-400"> </div></div> <div class="flex items-center gap-2"><input type="number" min="1" class="w-12 bg-slate-900 border border-slate-600 rounded text-center text-white"/> <button class="text-red-400 hover:text-red-300"><!></button></div></div>'),ai=_('<div class="text-center text-slate-600 italic text-sm py-4"> </div>'),ri=_('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 hover:border-indigo-500/30 transition-colors"><div><div class="text-sm font-bold text-white max-w-[120px] truncate"> </div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-indigo-400 hover:text-white p-1 bg-slate-900 rounded border border-slate-800"><!></button></div>'),si=_('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-2xl p-6 border border-slate-700 shadow-2xl flex flex-col max-h-[90vh]" role="dialog" aria-modal="true" aria-labelledby="encounter-modal-title"><div class="flex justify-between items-center mb-6"><h3 id="encounter-modal-title" class="text-xl font-bold text-white"> </h3> <button class="text-slate-400 hover:text-white"><!></button></div> <div class="space-y-4 mb-6"><div><label for="encounter-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="encounter-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white outline-hidden focus:border-indigo-500"/></div></div> <div class="flex-1 flex gap-4 min-h-0"><div class="flex-1 bg-slate-900 border border-slate-800 rounded-lg p-3 flex flex-col"><h4 class="text-xs text-slate-500 uppercase font-bold mb-2"> </h4> <div class="flex-1 overflow-y-auto space-y-2 custom-scrollbar"><!> <!></div></div> <div class="flex-1 bg-slate-900 border border-slate-800 rounded-lg p-3 flex flex-col"><h4 class="text-xs text-slate-500 uppercase font-bold mb-2"> </h4> <div class="flex-1 overflow-y-auto space-y-2 custom-scrollbar"></div></div></div> <div class="flex gap-3 mt-6 pt-4 border-t border-slate-700"><button class="flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded font-bold"> </button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-2 rounded font-bold flex items-center justify-center gap-2"><!> </button></div></div></div>');function ii(z,s){Yt(s,!0);const l=()=>tt(Gt,"$t",w),x=()=>tt(Ca,"$liveEnemies",w),[w,A]=aa();let k=Nt(s,"isOpen",3,!1),d=Nt(s,"initialData",3,"{}"),C=Pe(Zt({name:"",enemies:[]}));za(()=>{if(k()&&d())try{const D=JSON.parse(d());T(C,{name:D.name||"",enemies:D.enemies||[]},!0)}catch{T(C,{name:"",enemies:[]},!0)}});function O(D){a(C).enemies.find(ne=>ne.enemyId===D)?a(C).enemies=a(C).enemies.map(ne=>ne.enemyId===D?{...ne,count:ne.count+1}:ne):a(C).enemies=[...a(C).enemies,{enemyId:D,count:1}]}function ue(D){a(C).enemies=a(C).enemies.filter((ie,ne)=>ne!==D)}function J(D,ie){const ne=Math.max(1,parseInt(ie)||1);a(C).enemies[D].count=ne}function ke(D){}var be=Be(),pe=ye(be);{var Ee=D=>{var ie=si();ie.__click=ke;var ne=t(ie),X=t(ne),$e=t(X),V=t($e,!0);e($e);var G=r($e,2);G.__click=function(...Te){s.onClose?.apply(this,Te)};var K=t(G);xa(K,{size:20}),e(G),e(X);var q=r(X,2),Me=t(q),F=t(Me),M=t(F,!0);e(F);var xe=r(F,2);$t(xe),e(Me),e(q);var oe=r(q,2),ze=t(oe),de=t(ze),Ve=t(de,!0);e(de);var Ie=r(de,2),He=t(Ie);Oe(He,17,()=>a(C).enemies,et,(Te,Le,Je)=>{const qe=fe(()=>x().find(rt=>rt.id===a(Le).enemyId));var Qe=ti(),at=t(Qe),Ze=t(at),E=t(Ze,!0);e(Ze);var $=r(Ze,2),re=t($);e($),e(at);var we=r(at,2),Ae=t(we);$t(Ae),Ae.__input=rt=>J(Je,rt.target.value);var Ue=r(Ae,2);Ue.__click=()=>ue(Je);var Ne=t(Ue);va(Ne,{size:16}),e(Ue),e(we),e(Qe),g(rt=>{n(E,rt),n(re,`Dif ${(a(qe)?a(qe).difficulty:"?")??""}`),wa(Ae,a(Le).count)},[()=>a(qe)?a(qe).name:l()("session.encounter_modal.unknown")]),c(Te,Qe)});var Ge=r(He,2);{var lt=Te=>{var Le=ai(),Je=t(Le,!0);e(Le),g(qe=>n(Je,qe),[()=>l()("session.encounter_modal.none_added")]),c(Te,Le)};j(Ge,Te=>{a(C).enemies.length===0&&Te(lt)})}e(Ie),e(ze);var St=r(ze,2),ut=t(St),yt=t(ut,!0);e(ut);var jt=r(ut,2);Oe(jt,5,x,Te=>Te.id,(Te,Le)=>{var Je=ri(),qe=t(Je),Qe=t(qe),at=t(Qe,!0);e(Qe);var Ze=r(Qe,2),E=t(Ze);e(Ze),e(qe);var $=r(qe,2);$.__click=()=>O(a(Le).id);var re=t($);Kt(re,{size:16}),e($),e(Je),g(()=>{n(at,a(Le).name),n(E,`Dif ${a(Le).difficulty??""}`)}),c(Te,Je)}),e(jt),e(St),e(oe);var We=r(oe,2),dt=t(We);dt.__click=function(...Te){s.onClose?.apply(this,Te)};var gt=t(dt,!0);e(dt);var ht=r(dt,2);ht.__click=()=>s.onSave(a(C));var bt=t(ht);Fa(bt,{size:18});var xt=r(bt);e(ht),e(We),e(ne),e(ie),g((Te,Le,Je,qe,Qe,at,Ze,E)=>{Fe(ie,"aria-label",Te),n(V,Le),n(M,Je),Fe(xe,"placeholder",qe),n(Ve,Qe),n(yt,at),n(gt,Ze),n(xt,` ${E??""}`)},[()=>l()("session.encounter_modal.close"),()=>l()("session.encounter_modal.title"),()=>l()("session.encounter_modal.name"),()=>l()("session.encounter_modal.name_placeholder"),()=>l()("session.encounter_modal.enemies_in_encounter"),()=>l()("session.encounter_modal.add_enemies"),()=>l()("common.buttons.cancel"),()=>l()("session.encounter_modal.save_encounter")]),It(xe,()=>a(C).name,Te=>a(C).name=Te),c(D,ie)};j(pe,D=>{k()&&D(Ee)})}c(z,be),ea(),A()}ta(["click","input"]);var ni=_('<div class="text-[10px] text-slate-400 flex items-center gap-1.5 bg-slate-950 p-1 px-1.5 rounded-lg border border-slate-800/50"><span class="text-indigo-400 font-black"> </span> <span class="font-medium truncate max-w-[80px]"> </span></div>'),oi=_('<div class="text-[10px] text-slate-600 italic"> </div>'),li=_('<div class="bg-slate-900 border border-slate-800 rounded-2xl p-4 transition-all hover:border-indigo-500/30 group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10" role="region"><div class="flex-1"><div class="font-bold text-white text-base mb-2 group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate"> </div> <div class="flex flex-wrap gap-1"><!> <!></div></div> <div class="flex gap-2 mt-3 pt-3 border-t border-slate-800/50"><button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-1.5 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition-all active:scale-95 shadow-lg shadow-indigo-900/20"><!> </button> <button class="p-1.5 text-slate-400 hover:text-white bg-slate-800/50 rounded-lg border border-slate-800 transition-all" title="Editar"><!></button> <button class="p-1.5 text-slate-400 hover:text-red-400 bg-slate-800/50 rounded-lg border border-slate-800 hover:border-red-900/30 transition-all"><!></button></div></div>'),di=_('<button class="text-[10px] font-bold text-indigo-400 hover:text-indigo-300 mt-1 uppercase tracking-wider"> </button>'),vi=_('<div class="mb-4 flex-1"><p> </p> <!></div>'),ci=_('<div class="mb-4 flex-1 text-[10px] text-slate-600 italic"> </div>'),ui=_('<div class="bg-slate-900 border border-slate-800 rounded-2xl p-5 hover:border-indigo-500/30 transition-all relative group cursor-move hover:shadow-lg hover:shadow-indigo-500/10 active:scale-[0.98] flex flex-col" draggable="true" role="listitem"><div class="flex justify-between items-start mb-3"><h3 class="font-bold text-lg text-white group-hover:text-indigo-400 transition-colors"> </h3> <span class="text-[10px] font-black bg-indigo-500/10 text-indigo-400 border border-indigo-400/20 px-2 py-1 rounded-lg uppercase"> </span></div> <!> <div class="mt-auto flex gap-2 pt-4 border-t border-slate-800/50"><button class="flex-1 bg-slate-800/50 hover:bg-slate-800 text-white py-2 rounded-xl text-xs font-bold border border-slate-800 transition-all"> </button> <button class="bg-slate-800/50 hover:bg-red-900/20 text-slate-500 hover:text-red-400 px-3 rounded-xl border border-slate-800 hover:border-red-900/30 transition-all"><!></button></div></div>'),bi=_('<div class="text-center text-slate-500 italic col-span-3"> </div>'),xi=_('<div><div class="mb-12"><div class="flex justify-between items-center mb-6"><h3 class="text-sm font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2"><!> </h3></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><button class="min-h-[120px] border-2 border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-400 transition-all hover:bg-indigo-500/5 gap-2 group"><!> <span class="font-bold text-sm"> </span></button> <!></div></div> <div class="mb-6"><h3 class="text-sm font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2 mb-6"><!> </h3></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><button class="min-h-[180px] border-2 border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-400 transition-all hover:bg-indigo-500/5 gap-2 group"><!> <span class="font-bold text-sm"> </span></button> <!> <!></div> <!> <!> <!></div>');function mi(z,s){Yt(s,!0);const l=()=>tt(Ca,"$liveEnemies",A),x=()=>tt(Pa,"$liveEncounters",A),w=()=>tt(Gt,"$t",A),[A,k]=aa();let d=Pe(!1),C=Pe(null),O=Pe("{}"),ue=Pe(!1),J=Pe(null),ke=Pe("{}"),be=Pe(Zt({isOpen:!1,title:"",message:"",onConfirm:()=>{}}));function pe(){return{name:"",difficulty:1,defense:10,health:10,damage:0,size:1,speed:10,description:"",senses:"",languages:"",immune:"",stats:{str:10,agi:10,int:10,wil:10},traits:[],actions:[],reactions:[],endOfRound:[]}}function Ee(E=null){T(C,E?E.id:null,!0),T(O,JSON.stringify(E||pe()),!0),T(d,!0)}let D=Zt(new Set);function ie(E){D.has(E)?D.delete(E):D.add(E)}function ne(E){const $=a(C)||ba();Na.set($,{...E,id:$}),T(d,!1)}function X(E){const $=l().find(re=>re.id===E);T(be,{isOpen:!0,title:"Excluir Inimigo",message:`Tem certeza que deseja excluir permanentemente o inimigo "${$?.name||"este inimigo"}"?`,onConfirm:()=>{Na.delete(E),a(be).isOpen=!1}},!0)}function $e(E=null){T(J,E?E.id:null,!0),T(ke,JSON.stringify(E||{name:"",enemies:[]}),!0),T(ue,!0)}function V(E){const $=a(J)||ba();ya.set($,{...E,id:$}),T(ue,!1)}function G(E){const $=x().find(re=>re.id===E);T(be,{isOpen:!0,title:"Excluir Encontro",message:`Tem certeza que deseja excluir permanentemente o encontro "${$?.name||"este encontro"}"?`,onConfirm:()=>{ya.delete(E),a(be).isOpen=!1}},!0)}function K(E){const $=pt.get(s.campId);if(!$)return;const re=$.activeEnemies||[];let we=[];E.enemies.forEach(Ae=>{const Ue=l().find(Ne=>Ne.id===Ae.enemyId);if(Ue)for(let Ne=0;Ne<Ae.count;Ne++)we.push({...Ue,instanceId:ba(),damage:0,currentHealth:Ue.health,afflictions:[],acted:!1,initiative:!1})}),pt.set(s.campId,{...$,activeEnemies:[...re,...we]})}function q(E,$){E.dataTransfer.setData("text/plain",$.id),E.dataTransfer.effectAllowed="copy"}function Me(E){return E.preventDefault(),!1}function F(E,$){E.preventDefault();const re=E.dataTransfer.getData("text/plain");if(!re)return;const we=$.enemies||[],Ae=we.find(Ne=>Ne.enemyId===re);let Ue;Ae?Ue=we.map(Ne=>Ne.enemyId===re?{...Ne,count:Ne.count+1}:Ne):Ue=[...we,{enemyId:re,count:1}],ya.set($.id,{...$,enemies:Ue})}var M=xi(),xe=t(M),oe=t(xe),ze=t(oe),de=t(ze);Ua(de,{size:16});var Ve=r(de);e(ze),e(oe);var Ie=r(oe,2),He=t(Ie);He.__click=()=>$e();var Ge=t(He);Kt(Ge,{size:28,class:"group-hover:scale-110 transition-transform"});var lt=r(Ge,2),St=t(lt,!0);e(lt),e(He);var ut=r(He,2);Oe(ut,1,x,E=>E.id,(E,$)=>{var re=li(),we=t(re),Ae=t(we),Ue=t(Ae,!0);e(Ae);var Ne=r(Ae,2),rt=t(Ne);Oe(rt,17,()=>a($).enemies||[],et,(Se,Ke)=>{const Xe=fe(()=>l().find(Tt=>Tt.id===a(Ke).enemyId));var vt=ni(),ct=t(vt),Ye=t(ct);e(ct);var Ot=r(ct,2),Lt=t(Ot,!0);e(Ot),e(vt),g(()=>{n(Ye,`${a(Ke).count??""}x`),n(Lt,a(Xe)?a(Xe).name:"...")}),c(Se,vt)});var Rt=r(rt,2);{var mt=Se=>{var Ke=oi(),Xe=t(Ke,!0);e(Ke),g(vt=>n(Xe,vt),[()=>w()("session.bestiary.empty_encounter")]),c(Se,Ke)};j(Rt,Se=>{a($).enemies?.length||Se(mt)})}e(Ne),e(we);var _t=r(we,2),st=t(_t);st.__click=()=>K(a($));var wt=t(st);La(wt,{size:12,fill:"currentColor"});var Pt=r(wt);e(st);var ft=r(st,2);ft.__click=()=>$e(a($));var kt=t(ft);_r(kt,{size:14}),e(ft);var De=r(ft,2);De.__click=()=>G(a($).id);var it=t(De);va(it,{size:14}),e(De),e(_t),e(re),g(Se=>{Fe(re,"aria-label",`Encontro ${a($).name??""}`),n(Ue,a($).name),n(Pt,` ${Se??""}`)},[()=>w()("session.bestiary.start")]),ha("dragover",re,Me),ha("drop",re,Se=>F(Se,a($))),c(E,re)}),e(Ie),e(xe);var yt=r(xe,2),jt=t(yt),We=t(jt);pa(We,{size:16});var dt=r(We);e(jt),e(yt);var gt=r(yt,2),ht=t(gt);ht.__click=()=>Ee();var bt=t(ht);Kt(bt,{size:32,class:"group-hover:scale-110 transition-transform"});var xt=r(bt,2),Te=t(xt,!0);e(xt),e(ht);var Le=r(ht,2);Oe(Le,1,l,E=>E.id,(E,$)=>{var re=ui(),we=t(re),Ae=t(we),Ue=t(Ae,!0);e(Ae);var Ne=r(Ae,2),rt=t(Ne);e(Ne),e(we);var Rt=r(we,2);{var mt=De=>{var it=vi(),Se=t(it),Ke=t(Se,!0);e(Se);var Xe=r(Se,2);{var vt=ct=>{var Ye=di();Ye.__click=()=>ie(a($).id);var Ot=t(Ye,!0);e(Ye),g(Lt=>n(Ot,Lt),[()=>D.has(a($).id)?w()("session.bestiary.see_less"):w()("session.bestiary.see_more")]),c(ct,Ye)};j(Xe,ct=>{a($).description.length>120&&ct(vt)})}e(it),g(ct=>{je(Se,1,`text-xs text-slate-400 leading-relaxed ${ct??""}`),n(Ke,a($).description)},[()=>D.has(a($).id)?"":"line-clamp-3"]),c(De,it)},_t=De=>{var it=ci(),Se=t(it,!0);e(it),g(Ke=>n(Se,Ke),[()=>w()("session.bestiary.no_description")]),c(De,it)};j(Rt,De=>{a($).description?De(mt):De(_t,!1)})}var st=r(Rt,2),wt=t(st);wt.__click=()=>Ee(a($));var Pt=t(wt,!0);e(wt);var ft=r(wt,2);ft.__click=()=>X(a($).id);var kt=t(ft);va(kt,{size:14}),e(ft),e(st),e(re),g((De,it)=>{n(Ue,a($).name),n(rt,`${De??""} ${a($).difficulty??""}`),n(Pt,it)},[()=>w()("session.bestiary.level"),()=>w()("common.buttons.edit")]),ha("dragstart",re,De=>q(De,a($))),c(E,re)});var Je=r(Le,2);{var qe=E=>{var $=bi(),re=t($,!0);e($),g(we=>n(re,we),[()=>w()("session.bestiary.no_enemies")]),c(E,$)};j(Je,E=>{l().length===0&&E(qe)})}e(gt);var Qe=r(gt,2);ei(Qe,{get isOpen(){return a(d)},get initialData(){return a(O)},onClose:()=>T(d,!1),onSave:ne});var at=r(Qe,2);ii(at,{get isOpen(){return a(ue)},get initialData(){return a(ke)},onClose:()=>T(ue,!1),onSave:V});var Ze=r(at,2);Ra(Ze,{get isOpen(){return a(be).isOpen},get title(){return a(be).title},get message(){return a(be).message},get onConfirm(){return a(be).onConfirm},onCancel:()=>a(be).isOpen=!1}),e(M),g((E,$,re,we)=>{n(Ve,` ${E??""}`),n(St,$),n(dt,` ${re??""}`),n(Te,we)},[()=>w()("session.bestiary.encounters_title"),()=>w()("session.bestiary.new_encounter"),()=>w()("session.bestiary.title"),()=>w()("session.bestiary.new_enemy")]),c(z,M),ea(),k()}ta(["click"]);var _i=_('<span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border border-slate-900"></span></span>'),fi=_('<header class="bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-40 shadow-2xl"><div class="max-w-7xl mx-auto px-2 sm:px-4 py-2 sm:py-3"><div class="flex items-center justify-between gap-2 sm:gap-4"><div class="flex items-center gap-1 sm:gap-3 shrink-0"><button class="p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all flex items-center gap-1 group" aria-label="Voltar para Dashboard" title="Voltar para Dashboard"><!> <!></button> <div class="flex flex-col"><h1 class="text-sm sm:text-base font-bold text-white leading-tight truncate max-w-[120px] sm:max-w-none"> </h1> <span class="text-[10px] text-indigo-400 font-mono font-bold uppercase tracking-wider"> </span></div></div> <div class="flex bg-slate-950/50 p-1 rounded-xl border border-white/5"><button><!> <span class="hidden min-[400px]:block">Sessão</span></button> <button><!> <span class="hidden min-[400px]:block">Bestiário</span></button></div> <div class="flex items-center gap-1 sm:gap-2"><button class="p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-all" aria-label="Configurações da Campanha" title="Configurações"><!></button> <button class="p-2 bg-indigo-600/10 text-indigo-400 border border-indigo-400/20 rounded-lg hover:bg-indigo-600 hover:text-white transition-all relative" aria-label="Toggle Histórico" title="Histórico"><!> <!></button></div></div></div></header>');function pi(z,s){Yt(s,!0);const l=()=>tt(sa,"$isHistoryOpen",w),x=()=>tt(Xa,"$rollHistory",w),[w,A]=aa();let k=Nt(s,"campaignName",3,""),d=Nt(s,"gmName",3,"Mestre"),C=Nt(s,"activeSubTab",3,"session"),O=Nt(s,"onTabChange",3,()=>{}),ue=Nt(s,"onOpenSettings",3,()=>{});var J=fi(),ke=t(J),be=t(ke),pe=t(be),Ee=t(pe);Ee.__click=()=>wr(Ta("/"));var D=t(Ee);Da(D,{size:20,class:"group-hover:-translate-x-0.5 transition-transform"});var ie=r(D,2);cr(ie,{size:18,class:"hidden sm:block opacity-50"}),e(Ee);var ne=r(Ee,2),X=t(ne),$e=t(X,!0);e(X);var V=r(X,2),G=t(V,!0);e(V),e(ne),e(pe);var K=r(pe,2),q=t(K);q.__click=()=>O()("session");var Me=t(q);{let Ge=fe(()=>C()==="session"?"opacity-100":"opacity-50");ur(Me,{size:14,get class(){return a(Ge)}})}Xt(2),e(q);var F=r(q,2);F.__click=()=>O()("bestiary");var M=t(F);{let Ge=fe(()=>C()==="bestiary"?"opacity-100":"opacity-50");jr(M,{size:14,get class(){return a(Ge)}})}Xt(2),e(F),e(K);var xe=r(K,2),oe=t(xe);oe.__click=function(...Ge){ue()?.apply(this,Ge)};var ze=t(oe);fr(ze,{size:18}),e(oe);var de=r(oe,2);de.__click=()=>sa.update(Ge=>!Ge);var Ve=t(de);br(Ve,{size:18});var Ie=r(Ve,2);{var He=Ge=>{var lt=_i();c(Ge,lt)};j(Ie,Ge=>{x()&&x().length>0&&Ge(He)})}e(de),e(xe),e(be),e(ke),e(J),g(()=>{n($e,k()),n(G,d()),je(q,1,`flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-lg text-xs font-black transition-all ${C()==="session"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:text-slate-300"}`),Fe(q,"aria-pressed",C()==="session"),je(F,1,`flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-lg text-xs font-black transition-all ${C()==="bestiary"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:text-slate-300"}`),Fe(F,"aria-pressed",C()==="bestiary"),Fe(de,"aria-pressed",l())}),c(z,J),ea(),A()}ta(["click"]);var gi=_('<!> <!> <main class="max-w-7xl mx-auto p-4 md:p-8 animate-in slide-in-from-bottom-4 duration-500"><!></main>',1),hi=_('<div class="flex flex-col items-center justify-center min-h-screen p-4 text-center"><div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ghost"><path d="M9 10h.01"></path><path d="M15 10h.01"></path><path d="M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"></path></svg></div> <h1 class="text-2xl font-black text-white mb-2 uppercase tracking-tight"> </h1> <p class="text-slate-400 mb-8 max-w-md"> </p> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-xl font-bold transition-all flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><path d="m12 19-7-7 7-7"></path><path d="19 12H5"></path></svg> </button></div>'),yi=_('<div class="flex items-center justify-center min-h-screen"><div class="relative w-16 h-16"><div class="absolute inset-0 border-4 border-indigo-500/20 rounded-full"></div> <div class="absolute inset-0 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div></div></div>'),wi=_('<div class="min-h-screen bg-slate-950 text-slate-100 font-sans pb-20"><!> <!></div>');function Fi(z,s){Yt(s,!0);const l=()=>tt(Wa,"$page",k),x=()=>tt(Ya,"$liveCampaigns",k),w=()=>tt(Gt,"$t",k),A=()=>tt(sa,"$isHistoryOpen",k),[k,d]=aa();let C=Pe("session"),O=Pe(!1),ue=fe(()=>l().params.id),J=fe(()=>x().find(X=>X.id===a(ue))),ke=fe(()=>!!a(J));function be(X){if(!a(ue)||!a(J))return;const $e={...a(J),...X};pt.set(a(ue),$e),ka(a(ue),{name:$e.name,gmName:$e.gmName}),T(O,!1)}var pe=wi(),Ee=t(pe);{var D=X=>{var $e=gi(),V=ye($e);pi(V,{get campaignName(){return a(J).name},get gmName(){return a(J).gmName},get activeSubTab(){return a(C)},onTabChange:M=>T(C,M,!0),onOpenSettings:()=>T(O,!0)});var G=r(V,2);{let M=fe(()=>JSON.stringify(a(J)));hr(G,{get isOpen(){return a(O)},get initialData(){return a(M)},onClose:()=>T(O,!1),onSave:be})}var K=r(G,2),q=t(K);{var Me=M=>{Ns(M,{get campaign(){return a(J)}})},F=M=>{var xe=Be(),oe=ye(xe);{var ze=de=>{mi(de,{get campId(){return a(ue)}})};j(oe,de=>{a(C)==="bestiary"&&de(ze)},!0)}c(M,xe)};j(q,M=>{a(C)==="session"?M(Me):M(F,!1)})}e(K),c(X,$e)},ie=X=>{var $e=Be(),V=ye($e);{var G=q=>{var Me=hi(),F=r(t(Me),2),M=t(F,!0);e(F);var xe=r(F,2),oe=t(xe,!0);e(xe);var ze=r(xe,2);ze.__click=()=>window.history.back();var de=r(t(ze));e(ze),e(Me),g((Ve,Ie,He)=>{n(M,Ve),n(oe,Ie),n(de,` ${He??""}`)},[()=>w()("campaign.not_found.title"),()=>w()("campaign.not_found.message"),()=>w()("common.buttons.back")]),c(q,Me)},K=q=>{var Me=yi();c(q,Me)};j(V,q=>{a(ke)&&!a(J)?q(G):q(K,!1)},!0)}c(X,$e)};j(Ee,X=>{a(ke)&&a(J)?X(D):X(ie,!1)})}var ne=r(Ee,2);Aa(ne,{get isOpen(){return A()},onClose:()=>sa.set(!1)}),e(pe),c(z,pe),ea(),d()}ta(["click"]);export{Fi as component};
