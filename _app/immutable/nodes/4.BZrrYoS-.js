const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/BPjVGcEY.js","../chunks/X4qjwA50.js","../chunks/JmLgoKLb.js","../chunks/CjDeeOcX.js","../chunks/Da70ei3y.js"])))=>i.map(i=>d[i]);
import{a as la,s as Pt,_ as Es}from"../chunks/CjDeeOcX.js";import"../chunks/DsnmJJEf.js";import{B as St,o as Je,k as d,p as oa,v as da,j as u,q as t,x as a,u as s,z as F,A as e,t as x,O as Ha,w as C,y as _t,n as Ea,D as Ga,a2 as ga,at as ha}from"../chunks/X4qjwA50.js";import{d as ba,s as i,o as ss,g as Aa,e as Ca}from"../chunks/JmLgoKLb.js";import{l as xa,s as _a,i as w,p as sa}from"../chunks/BGpg0XVn.js";import{e as Ge,s as We,i as Ct,$ as aa,r as zt,a as _e,f as Qa,g as $a,h as Ss}from"../chunks/Da70ei3y.js";import{p as Is}from"../chunks/CGFhl_F0.js";import{d as rs,h as Na,j as Ds,c as is,e as ea,k as Ya,l as Rs,m as ja,n as Ra,u as Ia,b as bt,o as vs,f as ns,g as Va,p as $s,q as Ns,t as As,v as Ts}from"../chunks/BPjVGcEY.js";import{C as cs,D as Oa,l as Us,c as Ka,d as us,a as Ps,e as Hs}from"../chunks/Cq1FyKpK.js";import{a as Ls,t as Ta,f as Ua}from"../chunks/J-RRPI-t.js";import{U as bs,C as ls,W as xs,r as _s}from"../chunks/cz0qtXKI.js";import{A as Fs,a as qs,b as Da,B as Bs,T as Ws,E as es,M as fs,G as za,H as ms,R as Js,C as Gs,I as ps,s as gs,c as hs,S as ys,L as Vs,d as Qs,D as Ys}from"../chunks/CykQqjg-.js";import{k as ts}from"../chunks/BDCFw3lJ.js";import{M as Zs,X as ya,P as ra,a as Pa,c as Xs,b as ua,C as La,d as Ks,e as ws,D as Ma}from"../chunks/AyiQWXjM.js";import{C as ks,G as pa,P as Za,S as er,a as tr}from"../chunks/vPoZRHiz.js";import"../chunks/B6lYapqp.js";import{I as fa,s as ma}from"../chunks/CRJZpbrG.js";import{b as zs}from"../chunks/BpzvJAE_.js";import{g as ar}from"../chunks/BwvpkP7t.js";import{W as sr}from"../chunks/D8hSSIaG.js";function rr(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const X=[["path",{d:"m6 9 6 6 6-6"}]];fa(U,_a({name:"chevron-down"},()=>l,{get iconNode(){return X},children:(E,_)=>{var j=St(),S=Je(j);ma(S,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function ir(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const X=[["path",{d:"m18 15-6-6-6 6"}]];fa(U,_a({name:"chevron-up"},()=>l,{get iconNode(){return X},children:(E,_)=>{var j=St(),S=Je(j);ma(S,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function nr(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const X=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];fa(U,_a({name:"copy"},()=>l,{get iconNode(){return X},children:(E,_)=>{var j=St(),S=Je(j);ma(S,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function lr(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const X=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4"}]];fa(U,_a({name:"flame"},()=>l,{get iconNode(){return X},children:(E,_)=>{var j=St(),S=Je(j);ma(S,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function or(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const X=[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]];fa(U,_a({name:"grip-vertical"},()=>l,{get iconNode(){return X},children:(E,_)=>{var j=St(),S=Je(j);ma(S,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function Xa(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const X=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"}]];fa(U,_a({name:"layers"},()=>l,{get iconNode(){return X},children:(E,_)=>{var j=St(),S=Je(j);ma(S,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function Cs(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const X=[["path",{d:"m16 6 4 14"}],["path",{d:"M12 6v14"}],["path",{d:"M8 8v12"}],["path",{d:"M4 4v16"}]];fa(U,_a({name:"library"},()=>l,{get iconNode(){return X},children:(E,_)=>{var j=St(),S=Je(j);ma(S,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function dr(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const X=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}],["path",{d:"M21 21v.01"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}],["path",{d:"M3 12h.01"}],["path",{d:"M12 3h.01"}],["path",{d:"M12 16v.01"}],["path",{d:"M16 12h1"}],["path",{d:"M21 12v.01"}],["path",{d:"M12 21v-1"}]];fa(U,_a({name:"qr-code"},()=>l,{get iconNode(){return X},children:(E,_)=>{var j=St(),S=Je(j);ma(S,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function as(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const X=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];fa(U,_a({name:"save"},()=>l,{get iconNode(){return X},children:(E,_)=>{var j=St(),S=Je(j);ma(S,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function js(U,r){const l=xa(r,["children","$$slots","$$events","$$legacy"]);const X=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21"}]];fa(U,_a({name:"swords"},()=>l,{get iconNode(){return X},children:(E,_)=>{var j=St(),S=Je(j);ma(S,r,"default",{}),d(E,j)},$$slots:{default:!0}}))}function vr(U){let r=!1;return document.body&&(document.body.appendChild(U),r=!0),{destroy(){r&&U.parentNode&&U.parentNode.removeChild(U)}}}var cr=u("<button> <!></button>"),ur=u('<p class="text-xs text-slate-600 italic"> </p>'),br=u('<div class="text-xs leading-tight"><span class="text-red-400 font-bold"> </span> <span class="text-slate-400"> </span></div>'),xr=u('<div class="space-y-1"></div>'),_r=u('<div class="grid grid-cols-2 gap-2 max-h-[60vh] overflow-y-auto custom-scrollbar p-1"></div> <div class="mt-4 pt-3 border-t border-slate-800 flex flex-col gap-2"><div class="p-3 bg-slate-900/50 rounded-lg border border-slate-700/50 min-h-[60px]"><p class="text-[10px] text-slate-500 uppercase font-bold mb-1"> </p> <!></div> <div class="flex justify-end mt-2"><button class="bg-indigo-600 text-white px-4 py-2 rounded-xl font-bold text-sm shadow hover:bg-indigo-500 transition-colors w-full sm:w-auto"> </button></div></div>',1),fr=u("<div><!></div>");function mr(U,r){oa(r,!0);const l=()=>Pt(aa,"$t",X),[X,E]=la();var _=St(),j=Je(_);{var S=n=>{var h=fr(),A=t(h);{let te=F(()=>l()("session.affliction_modal.title"));Zs(A,{get isOpen(){return r.isOpen},get onClose(){return r.onClose},get title(){return a(te)},maxWidth:"max-w-md",children:(se,we)=>{var $=_r(),B=Je($);Ge(B,21,()=>Object.keys(Fs),Ct,(ve,je)=>{const qe=F(()=>r.afflictions.includes(a(je)));var pe=cr();pe.__click=()=>r.onToggle(a(je));var M=t(pe),Z=s(M);{var fe=Ee=>{ks(Ee,{size:14,class:"text-red-400"})};w(Z,Ee=>{a(qe)&&Ee(fe)})}e(pe),x(Ee=>{We(pe,1,`flex items-center justify-between px-3 py-2 rounded-lg border text-xs font-bold transition-all ${a(qe)?"bg-red-500/20 border-red-500 text-red-100":"bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-750"}`),i(M,`${Ee??""} `)},[()=>l()(`character.afflictions.${a(je)}`)]),d(ve,pe)}),e(B);var D=s(B,2),le=t(D),I=t(le),$e=t(I,!0);e(I);var Ne=s(I,2);{var Ot=ve=>{var je=ur(),qe=t(je,!0);e(je),x(pe=>i(qe,pe),[()=>l()("session.affliction_modal.none_selected")]),d(ve,je)},ie=ve=>{var je=xr();Ge(je,21,()=>r.afflictions,Ct,(qe,pe)=>{var M=br(),Z=t(M),fe=t(Z);e(Z);var Ee=s(Z,2),Oe=t(Ee,!0);e(Ee),e(M),x((dt,tt)=>{i(fe,`${dt??""}:`),i(Oe,tt)},[()=>l()(`character.afflictions.${a(pe)}`),()=>l()(`sofww.afflictions.${a(pe).toLowerCase().replace(" ","_")}.effect`)]),d(qe,M)}),e(je),d(ve,je)};w(Ne,ve=>{r.afflictions.length===0?ve(Ot):ve(ie,!1)})}e(le);var ke=s(le,2),me=t(ke);me.__click=function(...ve){r.onClose?.apply(this,ve)};var ze=t(me,!0);e(me),e(ke),e(D),x((ve,je)=>{i($e,ve),i(ze,je)},[()=>l()("session.affliction_modal.effects"),()=>l()("session.affliction_modal.done")]),d(se,$)},$$slots:{default:!0}})}e(h),qs(h,te=>vr?.(te)),d(n,h)};w(j,n=>{r.isOpen&&n(S)})}d(U,_),da(),E()}ba(["click"]);var pr=u('<div class="absolute top-0 right-0 bg-gradient-to-l from-yellow-600/20 to-transparent border-l border-b border-yellow-500/30 text-yellow-500 text-[9px] font-black tracking-widest px-3 py-1 rounded-bl-xl z-20 uppercase shadow-[0_0_10px_rgba(234,179,8,0.2)]"> </div>'),gr=u('<div class="absolute inset-0 bg-red-950/40 animate-pulse z-0 pointer-events-none"></div>'),hr=u('<span class="text-[9px] font-black bg-red-950/40 text-red-500 px-1.5 py-0.5 rounded border border-red-900/30 uppercase tracking-wider flex-shrink-0"> </span>'),yr=u("<button><!></button>"),wr=u('<button class="w-7 h-7 flex items-center justify-center rounded bg-slate-800/50 text-slate-600 hover:text-red-400 hover:bg-red-950/30 border border-slate-700/50 transition-colors"><!></button>'),kr=u('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),zr=u('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"><div class="absolute inset-0 bg-gradient-to-b from-white/10 to-transparent"></div></div>'),Cr=u('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-20"><span class="text-[9px] font-black uppercase text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] tracking-widest leading-none mt-0.5"> </span></div>'),jr=u('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-20"><span class="text-[9px] font-black uppercase text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] tracking-widest leading-none mt-0.5"> </span></div>'),Or=u('<div class="flex flex-col items-center justify-between bg-cyan-950/20 border border-cyan-500/30 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm"><span class="text-[9px] font-black text-cyan-400 uppercase tracking-wider mb-0.5"> </span> <span class="text-xl font-bold text-white font-mono leading-none"> </span></div>'),Mr=u('<button class="text-[9px] bg-red-500/10 text-red-400 px-1.5 py-0.5 rounded border border-red-500/20 hover:bg-red-500/20 hover:border-red-500/40 transition-all flex items-center gap-1 group/btn"> <!></button>'),Er=u('<div class="bg-slate-900/50 p-2 rounded border border-slate-800/50 text-center"><span class="text-[9px] text-slate-500 uppercase font-black block mb-0.5"> </span> <div class="text-white font-bold font-mono text-lg leading-none"> </div> <div> </div></div>'),Sr=u('<div class="grid grid-cols-2 gap-4 mb-4"><div class="p-3 rounded-xl bg-purple-950/20 border border-purple-500/30 flex justify-between items-center group/ins"><div><span class="text-[9px] text-purple-400 uppercase font-black block"> </span> <span class="text-white font-bold text-lg font-mono leading-none"> </span></div> <!></div> <div class="p-3 rounded-xl bg-red-950/20 border border-red-500/30 flex justify-between items-center group/cor"><div><span class="text-[9px] text-red-400 uppercase font-black block"> </span> <span class="text-white font-bold text-lg font-mono leading-none"> </span></div> <!></div></div>'),Ir=u("<!> ",1),Dr=u('<div><div class="text-emerald-500 text-[10px] font-black uppercase mb-2 flex items-center gap-2"> <span class="h-px flex-1 bg-current opacity-20"></span></div> <div class="flex flex-wrap gap-2"></div></div>'),Rr=u('<div class="text-sm bg-slate-900/30 p-2 rounded border border-slate-800/30"><span class="font-bold text-slate-300"> </span> <span class="text-slate-400 text-xs block mt-1 leading-relaxed"> </span></div>'),$r=u('<div><div> <span class="h-px flex-1 bg-current opacity-20"></span></div> <div class="grid gap-2"></div></div>'),Nr=u('<div class="border-t border-slate-800/50 bg-slate-950/30 p-4"><div class="mb-4"><div class="text-slate-500 font-bold uppercase text-[10px] mb-2 flex items-center gap-2"><span> </span> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-4 gap-2"></div></div> <!> <div class="grid grid-cols-2 gap-4 mb-4"><div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div> <div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div></div> <div class="space-y-4"><!> <!></div></div>'),Ar=u('<div><!> <!> <div class="relative z-10 p-4"><div class="flex items-start gap-4 mb-3"><div class="relative flex-shrink-0"><div><!></div> <button><!></button></div> <div class="flex-1 min-w-0"><div class="flex justify-between items-start mb-1"><div class="flex flex-col min-w-0 mr-2"><div class="flex items-center gap-2"><h3> </h3> <!></div></div> <div class="flex gap-1 flex-shrink-0"><button class="w-7 h-7 flex items-center justify-center rounded bg-slate-800 text-slate-500 hover:text-white hover:bg-slate-700 border border-slate-700/50 transition-colors"><!></button> <!></div></div>  <div class="relative w-full h-3.5 sm:h-4 bg-slate-950 rounded-full border border-white/5 overflow-hidden shadow-inner group-hover:border-white/20 transition-all mb-2"><div></div> <!> <!> <!></div> <div class="flex flex-col sm:flex-row gap-3"><div class="flex items-start gap-1.5"><div class="flex flex-col items-center justify-between bg-slate-900 border border-slate-700 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm"><span class="text-[9px] font-black text-slate-400 uppercase tracking-wider mb-0.5"> </span> <span class="text-xl font-bold text-white font-mono leading-none"> </span></div> <div class="flex flex-col items-center justify-between bg-red-950/30 border border-red-900/50 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm relative group/dmg"><span class="text-[9px] font-black text-red-400 uppercase tracking-wider mb-0.5"> </span> <input type="number" class="w-full bg-transparent text-center text-white font-mono font-bold text-xl focus:outline-none p-0 leading-none placeholder-red-800"/> <span class="absolute -top-1 -right-1 flex h-2 w-2 opacity-0 group-hover/dmg:opacity-100 transition-opacity"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span></span></div> <div><span> </span> <div class="flex items-baseline gap-0.5 justify-center w-full"><input type="number" class="w-full bg-transparent text-right text-white font-mono font-bold text-xl focus:outline-none p-0 leading-none"/> <span class="text-[10px] text-slate-500 font-mono self-end mb-0.5 opacity-70"> </span></div></div> <!></div> <div class="flex flex-wrap gap-1.5 items-center flex-1"><!> <button class="text-[10px] sm:text-[9px] font-bold text-slate-500 hover:text-indigo-400 px-1.5 py-0.5 rounded border border-transparent hover:border-indigo-500/30 hover:bg-indigo-500/10 transition-all flex items-center gap-1 whitespace-nowrap"><!> </button></div></div></div></div></div>  <!> <!></div>');function Tr(U,r){oa(r,!0);const l=()=>Pt(aa,"$t",X),[X,E]=la();let _=sa(r,"updateEnemy",3,(f,b)=>{}),j=sa(r,"updatePlayer",3,(f,b)=>{}),S=sa(r,"removeFromCombat",3,f=>{}),n=F(()=>r.entity.type==="player"),h=F(()=>r.entity.system==="sofdl"),A=F(()=>r.entity.damage||0),te=F(()=>r.entity.normalHealth||r.entity.health||10),se=F(()=>r.entity.currentHealth??a(te)),we=F(()=>a(A)>=a(se)),$=F(()=>a(A)>=a(se)/2&&!a(we)),B=F(()=>a(se)>0?Math.min(100,Math.max(0,a(A)/a(se)*100)):100),D=_t(!1),le=_t(!1);Ha(()=>{const f=r.entity.afflictions||[],b=f.includes("Incapacitated");if(a(we)&&!b){const k={afflictions:[...f,"Incapacitated"]};r.entity.type==="player"?I(k):_()(r.entity.instanceId,k)}else if(!a(we)&&b){const k={afflictions:f.filter(ye=>ye!=="Incapacitated")};r.entity.type==="player"?I(k):_()(r.entity.instanceId,k)}});function I(f){if(r.entity.type!=="player")return;const b=rs.get(r.entity.id);b&&rs.set(r.entity.id,{...b,...f}),j()(r.entity.id,f),Na({id:r.entity.id,...f})}function $e(f){const b=parseInt(f.target.value);if(isNaN(b))return;const k={damage:Math.max(0,b)};r.entity.type==="player"?I(k):_()(r.entity.instanceId,k)}function Ne(f){const b=parseInt(f.target.value);if(isNaN(b))return;const z=Math.max(0,b);let k=a(A);z<a(A)&&(k=z);const ye={currentHealth:z,damage:k};r.entity.type==="player"?I(ye):_()(r.entity.instanceId,ye)}function Ot(){const f=!r.entity.acted;r.entity.type==="player"?I({acted:f}):_()(r.entity.instanceId,{acted:f})}function ie(){r.entity.type==="player"&&I({initiative:!r.entity.initiative})}function ke(f){const b=r.entity.afflictions||[],k={afflictions:b.includes(f)?b.filter(ye=>ye!==f):[...b,f]};r.entity.type==="player"?I(k):_()(r.entity.instanceId,k)}var me=Ar(),ze=t(me);{var ve=f=>{var b=pr(),z=t(b,!0);e(b),x(k=>i(z,k),[()=>l()("session.combat_card.initiative")]),d(f,b)};w(ze,f=>{a(n)&&r.entity.initiative&&f(ve)})}var je=s(ze,2);{var qe=f=>{var b=gr();d(f,b)};w(je,f=>{a(we)&&f(qe)})}var pe=s(je,2),M=t(pe),Z=t(M),fe=t(Z),Ee=t(fe);ts(Ee,()=>r.entity.imageUrl,f=>{{let b=F(()=>r.entity.name.charAt(0));Da(f,{get hash(){return r.entity.imageUrl},get alt(){return r.entity.name},size:"custom",get fallbackText(){return a(b)}})}}),e(fe);var Oe=s(fe,2);Oe.__click=Ot;var dt=t(Oe);{var tt=f=>{Pa(f,{size:14,class:""})},ft=f=>{var b=St(),z=Je(b);{var k=Fe=>{ks(Fe,{size:14})},ye=Fe=>{js(Fe,{size:14})};w(z,Fe=>{r.entity.acted?Fe(k):Fe(ye,!1)},!0)}d(f,b)};w(dt,f=>{a(we)?f(tt):f(ft,!1)})}e(Oe),e(Z);var nt=s(Z,2),at=t(nt),gt=t(at),ht=t(gt),yt=t(ht),ce=t(yt,!0);e(yt);var Se=s(yt,2);{var Ce=f=>{var b=hr(),z=t(b);e(b),x(()=>i(z,`Dif ${r.entity.difficulty??""}`)),d(f,b)};w(Se,f=>{a(n)||f(Ce)})}e(ht),e(gt);var re=s(gt,2),ae=t(re);ae.__click=()=>C(D,!a(D));var oe=t(ae);{var he=f=>{ir(f,{size:14})},Ie=f=>{rr(f,{size:14})};w(oe,f=>{a(D)?f(he):f(Ie,!1)})}e(ae);var Me=s(ae,2);{var He=f=>{var b=yr();b.__click=ie;var z=t(b);lr(z,{size:14}),e(b),x(k=>{We(b,1,`w-7 h-7 flex items-center justify-center rounded transition-all ${r.entity.initiative?"bg-yellow-500 text-yellow-950 shadow-lg shadow-yellow-500/20":"bg-slate-800 text-slate-500 hover:text-white hover:bg-slate-700"}`),_e(b,"title",k)},[()=>l()("session.combat_card.initiative")]),d(f,b)},Ue=f=>{var b=wr();b.__click=()=>S()(r.entity.instanceId);var z=t(b);ya(z,{size:14}),e(b),d(f,b)};w(Me,f=>{a(n)?f(He):f(Ue,!1)})}e(re),e(at);var Ve=s(at,2),Xe=t(Ve),Mt=s(Xe,2);{var wt=f=>{var b=kr();x(()=>{We(b,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10
                            ${a(we)?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":a(B)>=80?"bg-gradient-to-r from-red-600 to-rose-500":a($)?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),$a(b,`width: ${a(B)??""}%`)}),d(f,b)};w(Mt,f=>{a(B)>0&&f(wt)})}var At=s(Mt,2);{var O=f=>{var b=zr();d(f,b)};w(At,f=>{a(A)===0&&f(O)})}var q=s(At,2);{var P=f=>{var b=Cr(),z=t(b),k=t(z,!0);e(z),e(b),x(ye=>i(k,ye),[()=>l()("session.combat_card.incapacitated")]),d(f,b)},Pe=f=>{var b=St(),z=Je(b);{var k=ye=>{var Fe=jr(),et=t(Fe),Ze=t(et,!0);e(et),e(Fe),x(mt=>i(Ze,mt),[()=>l()("session.combat_card.injured")]),d(ye,Fe)};w(z,ye=>{a($)&&ye(k)},!0)}d(f,b)};w(q,f=>{a(we)?f(P):f(Pe,!1)})}e(Ve);var st=s(Ve,2),rt=t(st),Ke=t(rt),jt=t(Ke),Et=t(jt,!0);e(jt);var It=s(jt,2),Qe=t(It,!0);e(It),e(Ke);var L=s(Ke,2),T=t(L),H=t(T,!0);e(T);var ge=s(T,2);zt(ge),ge.__input=$e,Ea(2),e(L);var W=s(L,2),J=t(W),ne=t(J,!0);e(J);var Ye=s(J,2),ue=t(Ye);zt(ue),ue.__input=Ne;var de=s(ue,2),G=t(de);e(de),e(Ye),e(W);var De=s(W,2);{var be=f=>{var b=Or(),z=t(b),k=t(z,!0);e(z);var ye=s(z,2),Fe=t(ye,!0);e(ye),e(b),x(et=>{i(k,et),i(Fe,r.entity.perception||10)},[()=>l()("sofdl.attributes.perception")]),d(f,b)};w(De,f=>{a(h)&&f(be)})}e(rt);var Le=s(rt,2),lt=t(Le);Ge(lt,17,()=>r.entity.afflictions||[],Ct,(f,b)=>{var z=Mr();z.__click=()=>ke(a(b));var k=t(z),ye=s(k);ya(ye,{size:8,class:"opacity-50 group-hover/btn:opacity-100"}),e(z),x(()=>i(k,`${a(b)??""} `)),d(f,z)});var ot=s(lt,2);ot.__click=()=>C(le,!0);var vt=t(ot);ra(vt,{size:10});var Ht=s(vt);e(ot),e(Le),e(st),e(nt),e(M),e(pe);var Dt=s(pe,2);{var Vt=f=>{var b=Nr(),z=t(b),k=t(z),ye=t(k),Fe=t(ye,!0);e(ye),Ea(2),e(k);var et=s(k,2);Ge(et,21,()=>a(h)?["strength","agility","intellect","will"]:["str","agi","int","wil"],Ct,(o,v)=>{const c=F(()=>a(h)?r.entity.attributes?.[a(v)]??10:r.entity.stats?.[a(v)]??r.entity.attributes?.[a(v)]??10),p=F(()=>a(c)-10);var N=Er(),m=t(N),y=t(m,!0);e(m);var g=s(m,2),K=t(g,!0);e(g);var R=s(g,2),Q=t(R);e(R),e(N),x(V=>{i(y,V),i(K,a(c)),We(R,1,`text-[9px] font-bold ${a(p)>=0?"text-emerald-500":"text-red-500"}`),i(Q,`${a(p)>=0?"+":""}${a(p)??""}`)},[()=>a(h)?a(v).slice(0,3):a(v)]),d(o,N)}),e(et),e(z);var Ze=s(z,2);{var mt=o=>{var v=Sr(),c=t(v),p=t(c),N=t(p),m=t(N,!0);e(N);var y=s(N,2),g=t(y,!0);e(y),e(p);var K=s(p,2);Bs(K,{size:20,class:"text-purple-500/30 group-hover/ins:text-purple-500 transition-colors"}),e(c);var R=s(c,2),Q=t(R),V=t(Q),xe=t(V,!0);e(V);var ee=s(V,2),Ae=t(ee,!0);e(ee),e(Q);var Y=s(Q,2);Pa(Y,{size:20,class:"text-red-500/30 group-hover/cor:text-red-500 transition-colors"}),e(R),e(v),x((Te,Re)=>{i(m,Te),i(g,r.entity.insanity||0),i(xe,Re),i(Ae,r.entity.corruption||0)},[()=>l()("sofdl.attributes.insanity"),()=>l()("sofdl.attributes.corruption")]),d(o,v)};w(Ze,o=>{a(h)&&o(mt)})}var pt=s(Ze,2),Lt=t(pt),Rt=t(Lt),Bt=t(Rt,!0);e(Rt);var Gt=s(Rt,2),Xt=t(Gt,!0);e(Gt),e(Lt);var ta=s(Lt,2),Jt=t(ta),Wt=t(Jt,!0);e(Jt);var Qt=s(Jt,2),ca=t(Qt,!0);e(Qt),e(ta),e(pt);var Zt=s(pt,2),ct=t(Zt);{var Ut=o=>{var v=Dr(),c=t(v),p=t(c);Ea(),e(c);var N=s(c,2);Ge(N,21,()=>r.entity.senses,Ct,(m,y)=>{const g=F(()=>{const[Q,V]=a(y).split(":");return{key:Q,val:V}}),K=F(()=>l()(`character.senses.list.${a(g).key}`)+(a(g).val?` ${a(g).val}`:"")),R=F(()=>l()(`character.senses.descriptions.${a(g).key}`));Ws(m,{get text(){return a(R)},class:"text-xs bg-emerald-950/30 text-emerald-200 px-3 py-1.5 rounded border border-emerald-900/50 font-bold flex items-center gap-2 cursor-help whitespace-nowrap",children:(Q,V)=>{var xe=Ir(),ee=Je(xe);es(ee,{size:12,class:"text-emerald-500 flex-shrink-0"});var Ae=s(ee);x(()=>i(Ae,` ${a(K)??""}`)),d(Q,xe)},$$slots:{default:!0}})}),e(N),e(v),x(m=>i(p,`${m??""} `),[()=>l()("character.senses.title")]),d(o,v)};w(ct,o=>{r.entity.senses&&r.entity.senses.length>0&&o(Ut)})}var ia=s(ct,2);Ge(ia,16,()=>[{key:"traits",label:"Traços",color:"text-amber-500"},{key:"actions",label:"Ações",color:"text-red-400"},{key:"reactions",label:"Reações",color:"text-indigo-400"},{key:"end_of_round",label:"Fim da Rodada",color:"text-emerald-400"}],Ct,(o,v)=>{var c=St(),p=Je(c);{var N=m=>{var y=$r(),g=t(y),K=t(g);Ea(),e(g);var R=s(g,2);Ge(R,21,()=>r.entity[v.key],Ct,(Q,V)=>{var xe=Rr(),ee=t(xe),Ae=t(ee,!0);e(ee);var Y=s(ee,2),Te=t(Y,!0);e(Y),e(xe),x(()=>{i(Ae,a(V).name),i(Te,a(V).description||a(V).effect)}),d(Q,xe)}),e(R),e(y),x(()=>{We(g,1,`${v.color??""} text-[10px] font-black uppercase mb-2 flex items-center gap-2`),i(K,`${v.label??""} `)}),d(m,y)};w(p,m=>{r.entity[v.key]&&r.entity[v.key].length>0&&m(N)})}d(o,c)}),e(Zt),e(b),x((o,v,c)=>{i(Fe,o),i(Bt,v),i(Xt,r.entity.size||1),i(Wt,c),i(ca,r.entity.speed||10)},[()=>l()("session.combat_card.attributes"),()=>l()("session.combat_card.size"),()=>l()("session.combat_card.speed")]),d(f,b)};w(Dt,f=>{a(D)&&f(Vt)})}var Tt=s(Dt,2);{let f=F(()=>r.entity.afflictions||[]);mr(Tt,{get isOpen(){return a(le)},onClose:()=>C(le,!1),get afflictions(){return a(f)},onToggle:ke})}e(me),x((f,b,z,k,ye)=>{We(me,1,`group relative overflow-hidden transition-all duration-300 rounded-2xl border ${a(n)?"bg-slate-900/80 border-indigo-500/30 hover:border-indigo-500/50 hover:shadow-indigo-900/20":"bg-slate-950/80 border-red-900/30 hover:border-red-800/50 hover:shadow-red-900/10"} shadow-lg backdrop-blur-sm`),We(fe,1,`w-14 h-14 rounded-2xl overflow-hidden border-2 shadow-xl transition-transform group-hover:scale-105 ${a(we)?"border-red-600 grayscale brightness-50":a(n)?"border-indigo-500/50":"border-red-900/50"}`),We(Oe,1,`absolute -bottom-2 -right-2 w-7 h-7 rounded-lg flex items-center justify-center border shadow-lg transition-all hover:scale-110 z-20 ${r.entity.acted?"bg-slate-800 border-slate-600 text-slate-500":a(n)?"bg-indigo-600 border-indigo-400 text-white":"bg-red-600 border-red-400 text-white"}`),_e(Oe,"title",f),We(yt,1,`text-base font-bold truncate leading-snug ${a(n)?"text-white":"text-red-100 font-serif tracking-wide"}`),i(ce,r.entity.name),We(Xe,1,`absolute inset-0 w-full ${a(A)===0?"bg-emerald-900/20":"bg-slate-900/50"}`),i(Et,b),i(Qe,r.entity.defense||10),i(H,z),Qa(ge,a(A)),We(W,1,`flex flex-col items-center justify-between border rounded-lg p-1.5 w-[5.5rem] h-[3.75rem] shadow-sm relative transition-colors ${a(we)?"bg-red-950/50 border-red-500":a($)?"bg-orange-950/30 border-orange-500":"bg-emerald-950/30 border-emerald-900/50"}`),We(J,1,`text-[9px] font-black uppercase tracking-wider mb-0.5 ${a(we)?"text-red-400":a($)?"text-orange-400":"text-emerald-400"}`),i(ne,k),Qa(ue,a(se)),i(G,`/${a(te)??""}`),i(Ht,` ${ye??""}`)},[()=>r.entity.acted?l()("session.combat_card.acted"):l()("session.combat_card.act"),()=>l()("session.combat_card.defense"),()=>l()("session.combat_card.damage"),()=>l()("session.combat_card.health"),()=>l()("session.combat_card.add_affliction")]),d(U,me),da(),E()}ba(["click","input"]);function Ur(U,{from:r,to:l},X={}){var{delay:E=0,duration:_=ie=>Math.sqrt(ie)*120,easing:j=Xs}=X,S=getComputedStyle(U),n=S.transform==="none"?"":S.transform,[h,A]=S.transformOrigin.split(" ").map(parseFloat);h/=U.clientWidth,A/=U.clientHeight;var te=Pr(U),se=U.clientWidth/l.width/te,we=U.clientHeight/l.height/te,$=r.left+r.width*h,B=r.top+r.height*A,D=l.left+l.width*h,le=l.top+l.height*A,I=($-D)*se,$e=(B-le)*we,Ne=r.width/l.width,Ot=r.height/l.height;return{delay:E,duration:typeof _=="function"?_(Math.sqrt(I*I+$e*$e)):_,easing:j,css:(ie,ke)=>{var me=ke*I,ze=ke*$e,ve=ie+ke*Ne,je=ie+ke*Ot;return`transform: ${n} translate(${me}px, ${ze}px) scale(${ve}, ${je});`}}}function Pr(U){if("currentCSSZoom"in U)return U.currentCSSZoom;for(var r=U,l=1;r!==null;)l*=+getComputedStyle(r).zoom,r=r.parentElement;return l}function Hr(U,r=1,l=0){const X=[];let E=0;for(let n=0;n<r;n++){const h=Math.floor(Math.random()*U)+1;X.push(h),E+=h}let _=`${r}d${U}`,j=[],S=0;if(l!==0)if(U===20){const n=Math.abs(l);for(let A=0;A<n;A++)j.push(Math.floor(Math.random()*6)+1);const h=Math.max(...j);l>0?(S=h,E+=h,_+=` + ${h} [Boon]`):(S=-h,E-=h,_+=` - ${h} [Bane]`)}else S=l,E+=l,_+=l>0?` + ${l}`:` - ${Math.abs(l)}`;return{total:E,results:X,bonusRolls:j,formula:_,crit:U===20&&X.includes(20),modifierTotal:S}}function Lr(U,r,l){const X=l.map(n=>({...n,type:"enemy"}));if(U==="standard"){const n=r.filter(se=>se.initiative).map(se=>({...se,type:"player",isFast:!0})),h=r.filter(se=>!se.initiative).map(se=>({...se,type:"player",isFast:!1})),A=X.filter(se=>se.initiative).map(se=>({...se,isFast:!0})),te=X.filter(se=>!se.initiative).map(se=>({...se,isFast:!1}));return[...n,...A,...h,...te]}if(U==="individual")return[...r.map(h=>({...h,type:"player",totalInit:(h.initiativeRoll||0)+(h.attributes?.agility||10)-10})),...X.map(h=>({...h,type:"enemy",totalInit:(h.initiativeRoll||0)+(h.attributes?.agility||10)-10}))].sort((h,A)=>A.totalInit-h.totalInit);const E=r.filter(n=>n&&n.initiative).map(n=>({...n,type:"player"})),_=r.filter(n=>n&&!n.initiative).map(n=>({...n,type:"player"})),j=[...E,...X,..._],S=new Set;return j.filter(n=>{if(!n)return!1;const h=n.type==="player"?n.id:n.instanceId;return S.has(h)?!1:(S.add(h),!0)})}var Fr=u('<div class="h-full border-r border-slate-900/30 last:border-0"></div>'),qr=u('<div class="flex flex-col items-center"><span> </span> <span class="text-[8px] font-mono text-slate-600"><!></span></div>'),Br=u('<div class="space-y-4 w-full"><div class="relative h-3 w-full bg-slate-800 rounded-full overflow-hidden border border-slate-700/50 shadow-inner"><div class="absolute inset-0 flex"></div> <div><div class="absolute inset-0 bg-white/10 animate-pulse"></div></div></div> <div class="flex justify-between w-full px-1"></div></div>');function Os(U,r){oa(r,!0);const l=()=>Pt(aa,"$t",X),[X,E]=la();let _=F(()=>()=>{for(let $=0;$<r.segments.length;$++)if(r.value<=r.segments[$].max)return $;return r.segments.length-1}),j=F(()=>()=>{const $=a(_)(),B=$===0?0:r.segments[$-1].max,D=r.segments[$].max;if($===r.segments.length-1&&r.value>D)return 1;const le=D-B;return le===0?1:Math.min(1,Math.max(0,(r.value-B)/le))}),S=F(()=>()=>{const $=a(_)(),B=100/r.segments.length;return $*B+a(j)()*B}),n=F(()=>r.segments[a(_)()].color);var h=Br(),A=t(h),te=t(A);Ge(te,21,()=>r.segments,Ct,($,B)=>{var D=Fr();x(()=>$a(D,`width: ${100/r.segments.length}%`)),d($,D)}),e(te);var se=s(te,2);e(A);var we=s(A,2);Ge(we,21,()=>r.segments,Ct,($,B,D)=>{var le=qr(),I=t(le),$e=t(I,!0);e(I);var Ne=s(I,2),Ot=t(Ne);{var ie=me=>{var ze=Ga();x(()=>i(ze,`${r.segments[D-1].max+1}+`)),d(me,ze)},ke=me=>{var ze=St(),ve=Je(ze);{var je=pe=>{var M=Ga();x(()=>i(M,a(B).max)),d(pe,M)},qe=pe=>{var M=Ga();x(()=>i(M,a(B).max)),d(pe,M)};w(ve,pe=>{D===0?pe(je):pe(qe,!1)},!0)}d(me,ze)};w(Ot,me=>{D===r.segments.length-1?me(ie):me(ke,!1)})}e(Ne),e(le),x((me,ze)=>{$a(le,`width: ${100/r.segments.length}%`),We(I,1,`text-[9px] font-black uppercase tracking-tighter transition-colors ${me??""}`,"svelte-1ix6916"),i($e,ze)},[()=>D===a(_)()?a(n).replace("bg-","text-"):"text-slate-500",()=>l()("campaign.difficulty."+a(B).key)]),d($,le)}),e(we),e(h),x($=>{We(se,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out rounded-full ${a(n)??""}`,"svelte-1ix6916"),$a(se,`width: ${$??""}%`)},[()=>a(S)()]),d(U,h),da(),E()}var Wr=u('<div><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-2"><!> <span class="text-xs font-black uppercase tracking-widest"> </span></div> <div class="text-xs font-bold uppercase opacity-70"> </div></div> <div class="flex items-center justify-between mb-6"><div><div class="text-3xl font-black leading-none"> </div> <div class="text-[10px] font-bold uppercase opacity-50 mt-1"> </div></div> <div class="text-right"><div class="text-sm font-black uppercase"> </div> <div class="text-[10px] font-bold opacity-40 mt-1 flex items-center justify-end gap-1"><span class="uppercase tracking-tighter"> </span> <span> </span></div></div></div> <!></div>');function os(U,r){oa(r,!0);const l=()=>Pt(aa,"$t",X),[X,E]=la(),_={starting:{easy:3,avgMin:4,avgMax:15,challMin:16,challMax:30,hard:31,maxCreature:25},novice:{easy:10,avgMin:11,avgMax:30,challMin:31,challMax:50,hard:51,maxCreature:100},expert:{easy:30,avgMin:31,avgMax:50,challMin:51,challMax:125,hard:126,maxCreature:250},master:{easy:50,avgMin:51,avgMax:125,challMin:126,challMax:200,hard:201,maxCreature:null}};let j=F(()=>_[r.tier]||_.starting),S=F(()=>()=>r.totalDifficulty<=a(j).easy?"easy":r.totalDifficulty<=a(j).avgMax?"average":r.totalDifficulty<=a(j).challMax?"challenging":"hard"),n=F(()=>[{key:"easy",max:a(j).easy,color:"bg-green-500"},{key:"average",max:a(j).avgMax,color:"bg-yellow-500"},{key:"challenging",max:a(j).challMax,color:"bg-orange-500"},{key:"hard",max:a(j).challMax*1.5,color:"bg-red-500"}]),h=F(()=>()=>{switch(a(S)()){case"easy":return"text-green-400 bg-green-500/10 border-green-500/30";case"average":return"text-yellow-400 bg-yellow-500/10 border-yellow-500/30";case"challenging":return"text-orange-400 bg-orange-500/10 border-orange-500/30";case"hard":return"text-red-400 bg-red-500/10 border-red-500/30";default:return"text-slate-400 bg-slate-500/10 border-slate-500/30"}});var A=Wr(),te=t(A),se=t(te),we=t(se);Pa(we,{size:18});var $=s(we,2),B=t($,!0);e($),e(se);var D=s(se,2),le=t(D,!0);e(D),e(te);var I=s(te,2),$e=t(I),Ne=t($e),Ot=t(Ne,!0);e(Ne);var ie=s(Ne,2),ke=t(ie,!0);e(ie),e($e);var me=s($e,2),ze=t(me),ve=t(ze,!0);e(ze);var je=s(ze,2),qe=t(je),pe=t(qe);e(qe);var M=s(qe,2),Z=t(M,!0);e(M),e(je),e(me),e(I);var fe=s(I,2);Os(fe,{get value(){return r.totalDifficulty},get segments(){return a(n)}}),e(A),x((Ee,Oe,dt,tt,ft,nt,at)=>{We(A,1,`rounded-xl border p-4 ${Ee??""} shadow-lg`),i(B,Oe),i(le,dt),i(Ot,r.totalDifficulty),i(ke,tt),i(ve,ft),i(pe,`${nt??""}:`),i(Z,at)},[()=>a(h)(),()=>l()("campaign.difficulty.title"),()=>l()("campaign.settings.tiers."+r.tier),()=>l()("campaign.difficulty.total"),()=>l()("campaign.difficulty."+a(S)()),()=>l()("campaign.difficulty.max_creature"),()=>a(j).maxCreature??l()("campaign.difficulty.none")]),d(U,A),da(),E()}var Jr=u('<div><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-2"><!> <span class="text-xs font-black uppercase tracking-widest"> </span></div> <div class="flex items-center gap-2 text-xs font-bold uppercase opacity-70"><span> </span> <span class="text-[10px] bg-black/20 px-2 py-0.5 rounded"> </span></div></div> <div class="flex items-center justify-between mb-6"><div><div class="text-3xl font-black leading-none"> </div> <div class="text-[10px] font-bold uppercase opacity-50 mt-1"> </div></div> <div class="text-right"><div class="text-sm font-black uppercase"> </div> <div class="text-[10px] font-medium opacity-50 mt-1 uppercase tracking-tighter"> </div></div></div> <!></div>');function ds(U,r){oa(r,!0);const l=()=>Pt(aa,"$t",X),[X,E]=la(),_={starting:{easy:.5,average:1,hard:1.5},novice:{easy:1,average:2,hard:3},expert:{easy:2,average:4,hard:6},master:{easy:4,average:8,hard:12}};let j=F(()=>_[r.tier]||_.novice),S=F(()=>({easy:a(j).easy*r.playerCount,average:a(j).average*r.playerCount,hard:a(j).hard*r.playerCount})),n=F(()=>()=>r.totalDifficulty<=a(S).easy?"easy":r.totalDifficulty<=a(S).average?"average":"hard"),h=F(()=>[{key:"easy",max:a(S).easy,color:"bg-green-500"},{key:"average",max:a(S).average,color:"bg-yellow-500"},{key:"hard",max:a(S).hard*1.5,color:"bg-red-500"}]),A=F(()=>()=>{switch(a(n)()){case"easy":return"text-green-400 bg-green-500/10 border-green-500/30";case"average":return"text-yellow-400 bg-yellow-500/10 border-yellow-500/30";case"hard":return"text-red-400 bg-red-500/10 border-red-500/30";default:return"text-slate-400 bg-slate-500/10 border-slate-500/30"}});var te=Jr(),se=t(te),we=t(se),$=t(we);Pa($,{size:18});var B=s($,2),D=t(B,!0);e(B),e(we);var le=s(we,2),I=t(le),$e=t(I,!0);e(I);var Ne=s(I,2),Ot=t(Ne,!0);e(Ne),e(le),e(se);var ie=s(se,2),ke=t(ie),me=t(ke),ze=t(me,!0);e(me);var ve=s(me,2),je=t(ve,!0);e(ve),e(ke);var qe=s(ke,2),pe=t(qe),M=t(pe,!0);e(pe);var Z=s(pe,2),fe=t(Z);e(Z),e(qe),e(ie);var Ee=s(ie,2);Os(Ee,{get value(){return r.totalDifficulty},get segments(){return a(h)}}),e(te),x((Oe,dt,tt,ft,nt,at,gt)=>{We(te,1,`rounded-xl border p-4 ${Oe??""} shadow-lg`),i(D,dt),i($e,tt),i(Ot,ft),i(ze,r.totalDifficulty),i(je,nt),i(M,at),i(fe,`${a(j).average??""}/${gt??""}`)},[()=>a(A)(),()=>l()("campaign.difficulty.title"),()=>l()("campaign.settings.tiers."+r.tier),()=>l()("campaign.difficulty.players",{values:{count:r.playerCount}}),()=>l()("campaign.difficulty.total"),()=>l()("campaign.difficulty."+a(n)()),()=>l()("common.labels.master")]),d(U,te),da(),E()}var Gr=u('<span class="text-[10px] bg-slate-800 text-slate-400 px-1.5 py-0.5 rounded-full"> </span>'),Vr=u('<div class="p-3 rounded-xl border border-amber-500/30 bg-amber-500/5 flex items-center gap-3 transition-all hover:bg-amber-500/10 shadow-sm"><div class="flex-1"><div class="font-bold text-sm text-amber-200 leading-none"> </div> <div class="text-[9px] text-amber-500/60 font-medium mt-1 uppercase tracking-tighter"> </div></div> <div class="flex items-center gap-1.5"><button class="p-2 rounded-lg bg-green-600/20 text-green-400 hover:bg-green-600 hover:text-white transition-all shadow-lg active:scale-90" title="Aprovar"><!></button> <button class="p-2 rounded-lg bg-red-600/20 text-red-400 hover:bg-red-600 hover:text-white transition-all shadow-lg active:scale-90" title="Recusar"><!></button></div></div>'),Qr=u('<div class="space-y-2 animate-in fade-in slide-in-from-top-2"><div class="flex items-center gap-2 px-1"><div class="w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"></div> <span class="text-[10px] font-black text-amber-500 uppercase tracking-wider"> </span></div> <!> <div class="h-px bg-slate-800/50 mx-2 my-2"></div></div>'),Yr=u('<span class="text-indigo-400 font-bold uppercase tracking-tighter mr-1"> </span>'),Zr=u('<div><div></div> <div class="flex-1"><div> </div> <div class="text-[10px] text-slate-500 font-medium"><!> </div></div> <div class="flex items-center gap-1"><button><!></button> <button class="text-slate-600 hover:text-red-400 p-1.5 hover:bg-red-400/10 rounded-lg transition-all"><!></button></div></div>'),Xr=u('<div class="text-xs text-slate-600 italic p-6 border-2 border-dashed border-slate-800 rounded-xl text-center"> </div>'),Kr=u('<button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-black uppercase text-[10px] tracking-[0.2em] shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2"><!> </button> <p class="text-[9px] text-slate-600 text-center font-bold uppercase tracking-tighter"> </p>',1),ei=u('<div class="flex justify-center p-3 bg-white rounded-xl mb-2 animate-in zoom-in-95 duration-200 shadow-xl mx-auto w-32 h-32"><img class="w-24 h-24"/></div>'),ti=u('<div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-green-500 text-white text-[10px] font-bold rounded shadow-lg animate-in fade-in slide-in-from-bottom-1 whitespace-nowrap"><!> </div>'),ai=u('<div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-1"><!> </span></div> <button class="text-slate-500 hover:text-white transition-colors p-1"><!></button></div> <!> <div class="relative group"><div class="flex gap-1"><div class="flex-1 bg-slate-950 border border-slate-800 rounded-lg p-2 text-[10px] text-slate-400 font-mono truncate cursor-pointer hover:border-slate-700 transition-colors flex items-center"> </div> <button class="bg-indigo-600 hover:bg-indigo-500 text-white p-2 rounded-lg transition-all active:scale-95 shadow-lg shadow-indigo-900/20 relative"><!> <!></button></div></div> <button class="w-full text-[9px] text-slate-600 hover:text-red-400 font-bold uppercase tracking-widest transition-colors mt-1"> </button>',1),si=u('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 group hover:border-indigo-500/30 transition-all cursor-move hover:bg-slate-800/50" draggable="true"><div class="truncate flex-1 flex items-center gap-2"><!> <div class="min-w-0 flex-1"><div class="text-sm font-bold text-white truncate flex items-center gap-1"> <!></div> <div class="text-[10px] text-slate-500"> </div></div></div> <button class="text-slate-500 hover:text-indigo-400 p-1 ml-2 bg-slate-900 rounded border border-slate-800 hover:bg-slate-800"><!></button></div>'),ri=u('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),ii=u("<!> <!>",1),ni=u('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 group hover:border-indigo-500/30 transition-all cursor-move hover:bg-slate-800/50" draggable="true"><div class="truncate flex-1"><div class="text-sm font-bold text-white truncate flex items-center gap-1"> <!></div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-slate-500 hover:text-indigo-400 p-1 ml-2 bg-slate-900 rounded border border-slate-800 hover:bg-slate-800"><!></button></div>'),li=u('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),oi=u("<!> <!>",1),di=u('<button class="bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 shadow-lg shadow-green-900/20"><!> </button>'),vi=u('<div class="flex items-center gap-4"><button class="p-2 hover:bg-slate-700 rounded text-slate-400"><!></button> <div class="text-center"><div class="text-[10px] font-bold text-slate-500 uppercase"> </div><div class="text-3xl font-mono font-bold text-white leading-none"> </div></div> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded font-bold flex items-center gap-2"><!> </button> <div class="h-8 w-px bg-slate-700 mx-2"></div> <button class="text-red-400 hover:text-red-300 text-xs font-bold px-3 py-2 border border-red-900/30 rounded bg-red-900/10"> </button></div>'),ci=u('<div class="lg:hidden"><!></div>'),ui=u("<div><!></div>"),bi=u('<div class="text-center text-slate-500 italic py-10"> </div>'),xi=u('<div class="text-sm"><span class="font-bold text-yellow-500"> </span> <span class="text-slate-300"> </span></div>'),_i=u('<div class="bg-slate-900 border border-slate-700 rounded-lg p-4"><h4 class="font-bold text-white mb-2 pb-2 border-b border-slate-800 flex items-center gap-2"><!> </h4> <div class="space-y-2"></div></div>'),fi=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" aria-label="Fechar" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-lg border border-slate-700 shadow-2xl p-6 relative" role="dialog" aria-modal="true"><div class="flex items-center gap-3 mb-6"><div class="p-3 bg-yellow-900/20 rounded-full border border-yellow-500/30 text-yellow-500"><!></div> <div><h3 class="font-bold text-white text-xl"> </h3> <p class="text-slate-400 text-sm"> </p></div></div> <div class="space-y-4 mb-8 max-h-[60vh] overflow-y-auto custom-scrollbar"></div> <div class="flex gap-3"><button class="flex-1 py-1.5 rounded bg-slate-700 hover:bg-slate-600 text-white font-bold text-sm"> </button> <button class="flex-1 py-1.5 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold text-sm"> </button></div></div></div>'),mi=u('<button class="w-full text-left flex items-center gap-3 p-3 bg-slate-900 border border-slate-700 hover:border-indigo-500 hover:bg-indigo-500/10 rounded-xl group transition-all"><div class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center text-sm font-bold text-slate-500 group-hover:text-indigo-400 border border-slate-700 group-hover:border-indigo-500/30"> </div> <div class="flex-1"><div class="font-bold text-white group-hover:text-indigo-300"> </div> <div class="text-[10px] text-slate-500"> </div></div> <div class="bg-slate-800 p-2 rounded-lg text-slate-500 group-hover:bg-indigo-500 group-hover:text-white transition-colors"><!></div></button>'),pi=u('<div class="text-center py-8"><div class="w-12 h-12 bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-500"><!></div> <p class="text-slate-500 text-sm font-bold"> </p> <p class="text-[10px] text-slate-600 mt-1"> </p></div>'),gi=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" aria-label="Fechar" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-md border border-slate-700 shadow-2xl p-6" role="dialog" aria-modal="true"><div class="flex justify-between items-center mb-6"><div><h3 class="font-bold text-white text-lg"> </h3> <p class="text-xs text-slate-400"> </p></div> <button class="bg-slate-700 hover:bg-slate-600 p-2 rounded-lg text-white transition-colors"><!></button></div> <div class="space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2"><!> <!></div></div></div>'),hi=u('<div class="flex justify-between items-center bg-slate-950 p-3 rounded-xl border border-slate-800 group active:border-indigo-500/50 transition-all"><div class="truncate flex-1 flex flex-col"><div class="text-sm font-bold text-white truncate flex items-center gap-1"> <!></div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-white hover:bg-indigo-600 p-2 bg-slate-800 rounded-lg border border-slate-700"><!></button></div>'),yi=u('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),wi=u("<!> <!>",1),ki=u('<div class="flex justify-between items-center bg-slate-950 p-3 rounded-xl border border-slate-800 group active:border-indigo-500/50 transition-all"><div class="truncate flex-1"><div class="text-sm font-bold text-white truncate flex items-center gap-1"> <!></div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-white hover:bg-indigo-600 p-2 bg-slate-800 rounded-lg border border-slate-700"><!></button></div>'),zi=u('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),Ci=u("<!> <!>",1),ji=u('<div class="fixed inset-0 z-50 flex justify-end bg-black/60"><div class="w-full max-w-[300px] h-full bg-slate-900 border-l border-slate-800 p-4 shadow-2xl animate-in slide-in-from-right duration-300"><div class="flex justify-between items-center mb-4"><h3 class="font-bold text-white uppercase tracking-widest text-sm flex items-center gap-2"><!> </h3> <button class="bg-slate-800 p-2 rounded-lg text-slate-400 hover:text-white"><!></button></div> <div class="flex items-center gap-2 mb-3 bg-slate-950 p-1 rounded-lg border border-slate-800"><button><!> </button> <button><!> </button></div> <div class="h-[calc(100%-100px)] overflow-y-auto custom-scrollbar space-y-2"><!></div></div></div>'),Oi=u('<div class="grid grid-cols-1 lg:grid-cols-4 gap-6 h-full relative"><div class="space-y-6"><div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex flex-col gap-4"><div class="flex justify-between items-center bg-slate-950/50 p-2 rounded-lg border border-slate-800"><h3 class="text-xs font-black text-slate-500 uppercase tracking-widest flex items-center gap-2"><!> <!></h3> <button class="text-[10px] bg-slate-800 hover:bg-slate-700 text-white px-2.5 py-1.5 rounded-md font-bold transition-all border border-slate-700 active:scale-95"> </button></div> <!> <div class="space-y-2 flex-1 overflow-y-auto max-h-[300px] custom-scrollbar pr-1"><div class="space-y-2"><!> <!></div></div> <div class="pt-4 border-t border-slate-800 space-y-3"><!></div></div> <div class="hidden lg:flex flex-col h-[400px] bg-slate-900 border border-slate-800 rounded-xl p-4"><div class="flex items-center gap-2 mb-3 bg-slate-950 p-1 rounded-lg border border-slate-800"><button><!> </button> <button><!> </button></div> <div class="flex-1 overflow-y-auto pr-1 custom-scrollbar space-y-2"><!></div></div></div> <div class="lg:col-span-2 space-y-4" role="region" aria-label="Combat Zone"><div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex justify-between items-center shadow-lg sticky top-0 z-20"><div class="flex items-center gap-4"><!></div></div> <!> <div class="space-y-3 pb-20"><!> <!></div></div> <div class="hidden lg:flex flex-col gap-4"><!></div></div> <!> <!> <!> <button class="lg:hidden fixed bottom-24 right-4 bg-slate-800 text-white p-3 rounded-full shadow-lg border border-slate-700 z-40 active:scale-90 transition-transform" aria-label="Add Enemy"><!></button> <!> <!>',1);function Mi(U,r){oa(r,!0);const l=()=>Pt(Us,"$liveCharacters",S),X=()=>Pt(Ka,"$liveEnemies",S),E=()=>Pt(us,"$liveEncounters",S),_=()=>Pt(aa,"$t",S),j=()=>Pt(ja,"$isHistoryOpen",S),[S,n]=la();let h=_t(!1),A=_t(!1),te=_t(!1),se=_t(!1);const we={active:!1,round:1};let $=_t("enemies"),B=_t(!1),D=_t(ga([])),le=_t(ga({isOpen:!1,title:"",message:"",onConfirm:()=>{}}));ss(()=>{if(r.campaign?.id){Ds(r.campaign.id,!0);const o=Aa(aa)("common.labels.master");is.update(c=>({...c,campaignId:r.campaign.id,name:r.campaign.gmName||o}));const v=setInterval(()=>{const c=ea.get(r.campaign.id)||r.campaign,p=Aa(aa)("common.labels.master");Ya(r.campaign.id,{name:c.name,gmName:c.gmName||p})},3e4);return()=>{clearInterval(v),Rs(),is.update(c=>({...c,campaignId:null}))}}});const I=F(()=>typeof window<"u"?`${window.location.origin}${_s("/campaigns/[id]/invite",{id:r.campaign?.id})}`:"");function $e(){a(I)&&(navigator.clipboard.writeText(a(I)),C(te,!0),setTimeout(()=>{C(te,!1)},2e3))}let Ne=F(()=>r.campaign?.sessionRoster||[]),Ot=F(()=>r.campaign?.combat||we),ie=F(()=>r.campaign?.activeEnemies||[]),ke=F(()=>r.campaign?.members||[]),me=F(()=>r.campaign?.initiativeStyle||"dle"),ze=F(()=>r.campaign?.tier||Ps(r.campaign?.system)),ve=F(()=>a(ie).reduce((o,v)=>o+(v.difficulty||0),0)),je=F(()=>a(Ne).length||1),qe=F(()=>Array.from(new Set([...a(Ne),...a(ke).map(v=>v.id)])).map(v=>{const c=l().find(N=>N.id===v),p=a(ke).find(N=>N.id===v);return c&&p?{...c,...p,lastUpdate:p.lastUpdate}:c||p}).filter(Boolean)),pe=F(()=>a(qe).filter(o=>!o.campaignApproval||o.campaignApproval==="approved")),M=F(()=>a(qe).filter(o=>o.campaignApproval==="pending")),Z=F(()=>l().filter(o=>!a(Ne).includes(o.id)&&!a(ke).some(v=>v.id===o.id)&&(o.system||Oa)===(r.campaign?.system||Oa))),fe=F(()=>X().filter(o=>{const v=(o.system||Oa)===(r.campaign?.system||Oa),c=o.campaignId===r.campaign?.id||o.global;return v&&c})),Ee=F(()=>E().filter(o=>(o.system||Oa)===(r.campaign?.system||Oa)&&!0));function Oe(o){if(!r.campaign?.id)return;const c={...ea.get(r.campaign.id)||r.campaign,...o};ea.set(r.campaign.id,c),o.combat&&Ra(r.campaign.id,o.combat),(o.name||o.gmName)&&Ya(r.campaign.id,{name:c.name,gmName:c.gmName})}function dt(o){if(a(Ne).includes(o)){const v=a(Ne).filter(c=>c!==o);Oe({sessionRoster:v})}else{const v=[...a(Ne),o];Oe({sessionRoster:v})}}function tt(o){Me(o,{campaignApproval:"approved"}),Na({id:o,campaignApproval:"approved"})}function ft(o){Na({id:o,campaignApproval:"rejected",campaignId:null});const c=((ea.get(r.campaign.id)||r.campaign).members||[]).filter(p=>p.id!==o);Oe({members:c})}function nt(o){const v=a(qe).find(c=>c.id===o);C(le,{isOpen:!0,title:_()("session.players.remove_title"),message:_()("session.players.remove_message",{values:{name:v?.name||"este personagem"}}),onConfirm:()=>{const c=ea.get(r.campaign.id)||r.campaign;Na({id:o,campaignId:null});const p=(c.sessionRoster||[]).filter(y=>y!==o),N=(c.members||[]).filter(y=>y.id!==o),m=(c.activeEnemies||[]).filter(y=>y.type!=="player"||y.id!==o);Oe({sessionRoster:p,members:N,activeEnemies:m}),a(le).isOpen=!1}},!0)}function at(o){const c=(ea.get(r.campaign.id)||r.campaign).activeEnemies||[],p={...o,instanceId:Ia(),damage:0,currentHealth:o.health,afflictions:[],acted:!1,initiative:!1};Oe({activeEnemies:[...c,p]})}function gt(o){const c=(ea.get(r.campaign.id)||r.campaign).activeEnemies||[];let p=[];o.enemies.forEach(N=>{const m=X().find(y=>y.id===N.enemyId);if(m)for(let y=0;y<N.count;y++)p.push({...m,instanceId:Ia(),damage:0,currentHealth:m.health,afflictions:[],acted:!1,initiative:!1})}),Oe({activeEnemies:[...c,...p]})}function ht(){Oe({combat:{active:!0,round:1}}),Ra(r.campaign.id,{active:!0,round:1})}function yt(){const o=a(ie).filter(v=>v.damage<(v.currentHealth??v.health)&&v.endOfRound&&v.endOfRound.length>0).map(v=>({name:v.name,effects:v.endOfRound}));if(o.length>0){C(D,o,!0),C(B,!0);return}ce()}function ce(){const o=ea.get(r.campaign.id)||r.campaign,v=(o.combat?.round||1)+1,c=(o.activeEnemies||[]).map(p=>({...p,acted:!1}));Oe({combat:{...o.combat,round:v},activeEnemies:c}),Ra(r.campaign.id,{active:!0,round:v}),C(B,!1)}function Se(o){Oe({combat:{active:!1,round:1}}),Ra(r.campaign.id,{active:!1,round:1})}function Ce(o){const v=ea.get(r.campaign.id)||r.campaign;Oe({activeEnemies:(v.activeEnemies||[]).filter(c=>c.instanceId!==o)})}function re(o,v){const c=ea.get(r.campaign.id)||r.campaign;Oe({activeEnemies:(c.activeEnemies||[]).map(p=>p.instanceId===o?{...p,...v}:p)})}function ae(){const o=ea.get(r.campaign.id)||r.campaign,v=o.combat?.round||1;v>1&&Oe({combat:{...o.combat,round:v-1}})}let oe=_t(ga(Date.now()));ss(()=>{const o=setInterval(()=>{C(oe,Date.now(),!0)},1e4);return()=>clearInterval(o)});let he=F(()=>(()=>{const o=a(pe).filter(v=>a(Ne).includes(v.id));return Lr(a(me),o,a(ie))})());function Ie(o){return o.lastUpdate?a(oe)-o.lastUpdate<6e4:!1}function Me(o,v){const c=ea.get(r.campaign.id)||r.campaign,p=c.members||[],N=p.findIndex(R=>R.id===o);let m=p;N!==-1&&(m=[...p],m[N]={...m[N],...v});const y=c.activeEnemies||[],g=y.findIndex(R=>R.id===o&&R.type==="player");let K=y;g!==-1&&(K=[...y],K[g]={...K[g],...v}),Oe({members:m,activeEnemies:K})}function He(o,v,c){o.dataTransfer&&(o.dataTransfer.setData("application/json",JSON.stringify({item:v,type:c})),o.dataTransfer.effectAllowed="copy")}function Ue(o){return o.preventDefault(),!1}function Ve(o){o.preventDefault();const v=o.dataTransfer?.getData("application/json");if(v)try{const{item:c,type:p}=JSON.parse(v);p==="enemy"?at(c):p==="encounter"&&gt(c)}catch(c){console.error("Drop error",c)}}var Xe=Oi(),Mt=Je(Xe),wt=t(Mt),At=t(wt),O=t(At),q=t(O),P=t(q);bs(P,{size:14,class:"text-indigo-500"});var Pe=s(P),st=s(Pe);{var rt=o=>{var v=Gr(),c=t(v,!0);e(v),x(()=>i(c,a(pe).length)),d(o,v)};w(st,o=>{a(pe).length>0&&o(rt)})}e(q);var Ke=s(q,2);Ke.__click=()=>C(h,!a(h));var jt=t(Ke,!0);e(Ke),e(O);var Et=s(O,2);{var It=o=>{var v=Qr(),c=t(v),p=s(t(c),2),N=t(p);e(p),e(c);var m=s(c,2);Ge(m,17,()=>a(M),y=>y.id,(y,g)=>{var K=Vr(),R=t(K),Q=t(R),V=t(Q,!0);e(Q);var xe=s(Q,2),ee=t(xe,!0);e(xe),e(R);var Ae=s(R,2),Y=t(Ae);Y.__click=()=>tt(a(g).id);var Te=t(Y);ls(Te,{size:14}),e(Y);var Re=s(Y,2);Re.__click=()=>ft(a(g).id);var xt=t(Re);ua(xt,{size:14}),e(Re),e(Ae),e(K),x(ut=>{i(V,a(g).name),i(ee,ut)},[()=>_()("session.players.new_request")]),d(y,K)}),Ea(2),e(v),x(y=>i(N,`${y??""} (${a(M).length??""})`),[()=>_()("session.players.waiting_approval")]),d(o,v)};w(Et,o=>{a(M).length>0&&o(It)})}var Qe=s(Et,2),L=t(Qe),T=t(L);Ge(T,17,()=>a(pe),o=>o.id,(o,v)=>{const c=F(()=>Ie(a(v))),p=F(()=>a(Ne).includes(a(v).id));var N=Zr(),m=t(N),y=s(m,2),g=t(y),K=t(g,!0);e(g);var R=s(g,2),Q=t(R);{var V=Be=>{var it=Yr(),kt=t(it,!0);e(it),x(qt=>i(kt,qt),[()=>_()("common.labels.session")]),d(Be,it)};w(Q,Be=>{a(p)&&Be(V)})}var xe=s(Q);e(R),e(y);var ee=s(y,2),Ae=t(ee);Ae.__click=()=>dt(a(v).id);var Y=t(Ae);{var Te=Be=>{fs(Be,{size:14})},Re=Be=>{ra(Be,{size:14})};w(Y,Be=>{a(p)?Be(Te):Be(Re,!1)})}e(Ae);var xt=s(Ae,2);xt.__click=()=>nt(a(v).id);var ut=t(xt);ua(ut,{size:14}),e(xt),e(ee),e(N),x((Be,it,kt)=>{We(N,1,`p-2.5 rounded-xl border flex items-center gap-3 transition-all ${a(c)?"bg-indigo-900/10 border-indigo-500/20":"bg-slate-900/50 border-slate-800"} ${a(c)||a(p)?"opacity-100":"opacity-40"} hover:border-indigo-500/40 group shadow-sm`),We(m,1,`w-2 h-2 rounded-full ${a(c)?"bg-green-500 shadow-[0_0_8px_rgba(74,222,128,0.4)]":"bg-slate-700"}`),We(g,1,`font-bold text-sm ${a(c)?"text-white":"text-slate-500"} group-hover:text-indigo-300 transition-colors`),i(K,a(v).name),i(xe,` ${Be??""} ${a(v).level??""} • ${a(v).ancestry??""}`),We(Ae,1,`p-1.5 rounded-lg transition-all ${a(p)?"text-amber-400 hover:bg-amber-400/10":"text-slate-500 hover:text-indigo-400 hover:bg-indigo-400/10"}`),_e(Ae,"title",it),_e(xt,"title",kt)},[()=>_()("common.labels.level"),()=>a(p)?_()("session.players.remove_from_session"):_()("session.players.add_to_session"),()=>_()("session.players.kick_from_campaign")]),d(o,N)});var H=s(T,2);{var ge=o=>{var v=Xr(),c=t(v,!0);e(v),x(p=>i(c,p),[()=>_()("session.players.none")]),d(o,v)};w(H,o=>{a(pe).length===0&&o(ge)})}e(L),e(Qe);var W=s(Qe,2),J=t(W);{var ne=o=>{var v=Kr(),c=Je(v);c.__click=()=>Oe({isPublished:!0});var p=t(c);pa(p,{size:14});var N=s(p);e(c);var m=s(c,2),y=t(m,!0);e(m),x((g,K)=>{i(N,` ${g??""}`),i(y,K)},[()=>_()("session.publish.publish_session"),()=>_()("session.publish.make_visible")]),d(o,v)},Ye=o=>{var v=ai(),c=Je(v),p=t(c),N=t(p),m=t(N);xs(m,{size:10,class:"animate-pulse"});var y=s(m);e(N),e(p);var g=s(p,2);g.__click=()=>C(se,!a(se));var K=t(g);dr(K,{size:14}),e(g),e(c);var R=s(c,2);{var Q=it=>{var kt=ei(),qt=t(kt);e(kt),x(($t,Nt)=>{_e(qt,"src",$t),_e(qt,"alt",Nt)},[()=>`https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${encodeURIComponent(a(I))}`,()=>_()("session.publish.qr_alt")]),d(it,kt)};w(R,it=>{a(se)&&it(Q)})}var V=s(R,2),xe=t(V),ee=t(xe);ee.__click=$e;var Ae=t(ee,!0);e(ee);var Y=s(ee,2);Y.__click=$e;var Te=t(Y);{var Re=it=>{var kt=ti(),qt=t(kt);ls(qt,{size:10,class:"inline mr-1"});var $t=s(qt);e(kt),x(Nt=>i($t,` ${Nt??""}`),[()=>_()("common.buttons.copied")]),d(it,kt)};w(Te,it=>{a(te)&&it(Re)})}var xt=s(Te,2);nr(xt,{size:14}),e(Y),e(xe),e(V);var ut=s(V,2);ut.__click=()=>Oe({isPublished:!1});var Be=t(ut,!0);e(ut),x((it,kt,qt,$t)=>{i(y,` ${it??""}`),_e(g,"title",kt),i(Ae,a(I)),_e(Y,"aria-label",qt),i(Be,$t)},[()=>_()("session.publish.public_session"),()=>_()("session.publish.qr_code"),()=>_()("session.publish.copy_link"),()=>_()("session.publish.remove_public")]),d(o,v)};w(J,o=>{r.campaign?.isPublished?o(Ye,!1):o(ne)})}e(W),e(At);var ue=s(At,2),de=t(ue),G=t(de);G.__click=()=>C($,"enemies");var De=t(G);za(De,{size:14});var be=s(De);e(G);var Le=s(G,2);Le.__click=()=>C($,"encounters");var lt=t(Le);Xa(lt,{size:14});var ot=s(lt);e(Le),e(de);var vt=s(de,2),Ht=t(vt);{var Dt=o=>{var v=ii(),c=Je(v);Ge(c,17,()=>a(fe),m=>m.id,(m,y)=>{var g=si(),K=t(g),R=t(K);or(R,{size:12,class:"text-slate-600 cursor-grab"});var Q=s(R,2),V=t(Q),xe=t(V),ee=s(xe);{var Ae=ut=>{pa(ut,{size:10,class:"text-indigo-400"})};w(ee,ut=>{a(y).global&&ut(Ae)})}e(V);var Y=s(V,2),Te=t(Y);e(Y),e(Q),e(K);var Re=s(K,2);Re.__click=()=>at(a(y));var xt=t(Re);ra(xt,{size:16}),e(Re),e(g),x(ut=>{i(xe,`${a(y).name??""} `),i(Te,`${ut??""} ${a(y).difficulty??""}`)},[()=>_()("session.enemies.difficulty")]),Ca("dragstart",g,ut=>He(ut,a(y),"enemy")),d(m,g)});var p=s(c,2);{var N=m=>{var y=ri(),g=t(y,!0);e(y),x(K=>i(g,K),[()=>_()("session.enemies.none")]),d(m,y)};w(p,m=>{a(fe).length===0&&m(N)})}d(o,v)},Vt=o=>{var v=oi(),c=Je(v);Ge(c,17,()=>a(Ee),m=>m.id,(m,y)=>{var g=ni(),K=t(g),R=t(K),Q=t(R),V=s(Q);{var xe=Re=>{pa(Re,{size:10,class:"text-indigo-400"})};w(V,Re=>{a(y).global&&Re(xe)})}e(R);var ee=s(R,2),Ae=t(ee);e(ee),e(K);var Y=s(K,2);Y.__click=()=>gt(a(y));var Te=t(Y);Za(Te,{size:14}),e(Y),e(g),x((Re,xt)=>{i(Q,`${a(y).name??""} `),i(Ae,`${Re??""} ${xt??""}`)},[()=>a(y).enemies?.reduce((Re,xt)=>Re+xt.count,0)||0,()=>_()("session.enemies.title")]),Ca("dragstart",g,Re=>He(Re,a(y),"encounter")),d(m,g)});var p=s(c,2);{var N=m=>{var y=li(),g=t(y,!0);e(y),x(K=>i(g,K),[()=>_()("session.enemies.no_encounters")]),d(m,y)};w(p,m=>{a(Ee).length===0&&m(N)})}d(o,v)};w(Ht,o=>{a($)==="enemies"?o(Dt):o(Vt,!1)})}e(vt),e(ue),e(wt);var Tt=s(wt,2),f=t(Tt),b=t(f),z=t(b);{var k=o=>{var v=di();v.__click=ht;var c=t(v);js(c,{size:20});var p=s(c);e(v),x(N=>i(p,` ${N??""}`),[()=>_()("session.combat.start")]),d(o,v)},ye=o=>{var v=vi(),c=t(v);c.__click=ae;var p=t(c);La(p,{size:20}),e(c);var N=s(c,2),m=t(N),y=t(m,!0);e(m);var g=s(m),K=t(g,!0);e(g),e(N);var R=s(N,2);R.__click=yt;var Q=t(R);Js(Q,{size:16});var V=s(Q);e(R);var xe=s(R,4);xe.__click=()=>Se();var ee=t(xe,!0);e(xe),e(v),x((Ae,Y,Te,Re,xt)=>{_e(c,"title",Ae),i(y,Y),i(K,a(Ot).round),_e(R,"title",Te),i(V,` ${Re??""}`),i(ee,xt)},[()=>_()("session.combat.previous"),()=>_()("session.combat.round"),()=>_()("session.combat.next"),()=>_()("session.combat.next"),()=>_()("session.combat.end")]),d(o,v)};w(z,o=>{a(Ot).active?o(ye,!1):o(k)})}e(b),e(f);var Fe=s(f,2);{var et=o=>{var v=ci(),c=t(v);{var p=m=>{os(m,{get tier(){return a(ze)},get totalDifficulty(){return a(ve)}})},N=m=>{ds(m,{get tier(){return a(ze)},get totalDifficulty(){return a(ve)},get playerCount(){return a(je)}})};w(c,m=>{r.campaign?.system==="sofdl"?m(p):m(N,!1)})}e(v),d(o,v)};w(Fe,o=>{a(ie).length>0&&o(et)})}var Ze=s(Fe,2),mt=t(Ze);Ge(mt,25,()=>a(he),o=>o.type==="player"?o.id:o.instanceId,(o,v)=>{var c=ui(),p=t(c);Tr(p,{get entity(){return a(v)},updateEnemy:re,removeFromCombat:Ce,updatePlayer:Me}),e(c),Ls(c,()=>Ur,()=>({duration:300})),d(o,c)});var pt=s(mt,2);{var Lt=o=>{var v=bi(),c=t(v,!0);e(v),x(p=>i(c,p),[()=>_()("session.combat.empty")]),d(o,v)};w(pt,o=>{a(he).length===0&&o(Lt)})}e(Ze),e(Tt);var Rt=s(Tt,2),Bt=t(Rt);{var Gt=o=>{var v=St(),c=Je(v);{var p=m=>{os(m,{get tier(){return a(ze)},get totalDifficulty(){return a(ve)}})},N=m=>{ds(m,{get tier(){return a(ze)},get totalDifficulty(){return a(ve)},get playerCount(){return a(je)}})};w(c,m=>{r.campaign?.system==="sofdl"?m(p):m(N,!1)})}d(o,v)};w(Bt,o=>{a(ie).length>0&&o(Gt)})}e(Rt),e(Mt);var Xt=s(Mt,2);{var ta=o=>{var v=fi();v.__click=Re=>{Re.target===Re.currentTarget&&C(B,!1)};var c=t(v),p=t(c),N=t(p),m=t(N);Gs(m,{size:24}),e(N);var y=s(N,2),g=t(y),K=t(g,!0);e(g);var R=s(g,2),Q=t(R,!0);e(R),e(y),e(p);var V=s(p,2);Ge(V,21,()=>a(D),Ct,(Re,xt)=>{var ut=_i(),Be=t(ut),it=t(Be);za(it,{size:14,class:"text-slate-500"});var kt=s(it);e(Be);var qt=s(Be,2);Ge(qt,21,()=>a(xt).effects,Ct,($t,Nt)=>{var Ft=xi(),Yt=t(Ft),Kt=t(Yt);e(Yt);var va=s(Yt,2),wa=t(va,!0);e(va),e(Ft),x(()=>{i(Kt,`${a(Nt).name??""}:`),i(wa,a(Nt).desc)}),d($t,Ft)}),e(qt),e(ut),x(()=>i(kt,` ${a(xt).name??""}`)),d(Re,ut)}),e(V);var xe=s(V,2),ee=t(xe);ee.__click=()=>C(B,!1);var Ae=t(ee,!0);e(ee);var Y=s(ee,2);Y.__click=ce;var Te=t(Y,!0);e(Y),e(xe),e(c),e(v),x((Re,xt,ut,Be)=>{i(K,Re),i(Q,xt),i(Ae,ut),i(Te,Be)},[()=>_()("session.end_of_round.title"),()=>_()("session.end_of_round.summary"),()=>_()("common.buttons.cancel"),()=>_()("session.end_of_round.advance")]),d(o,v)};w(Xt,o=>{a(B)&&o(ta)})}var Jt=s(Xt,2);{var Wt=o=>{var v=gi();v.__click=Y=>{Y.target===Y.currentTarget&&C(h,!1)};var c=t(v),p=t(c),N=t(p),m=t(N),y=t(m,!0);e(m);var g=s(m,2),K=t(g,!0);e(g),e(N);var R=s(N,2);R.__click=()=>C(h,!1);var Q=t(R);ya(Q,{size:16}),e(R),e(p);var V=s(p,2),xe=t(V);Ge(xe,17,()=>a(Z),Ct,(Y,Te)=>{var Re=mi();Re.__click=()=>dt(a(Te).id);var xt=t(Re),ut=t(xt,!0);e(xt);var Be=s(xt,2),it=t(Be),kt=t(it,!0);e(it);var qt=s(it,2),$t=t(qt);e(qt),e(Be);var Nt=s(Be,2),Ft=t(Nt);ra(Ft,{size:16}),e(Nt),e(Re),x((Yt,Kt)=>{i(ut,Yt),i(kt,a(Te).name),i($t,`${Kt??""} ${a(Te).level??""} • ${a(Te).ancestry??""}`)},[()=>a(Te).name.charAt(0),()=>_()("common.labels.level")]),d(Y,Re)});var ee=s(xe,2);{var Ae=Y=>{var Te=pi(),Re=t(Te),xt=t(Re);za(xt,{size:24}),e(Re);var ut=s(Re,2),Be=t(ut,!0);e(ut);var it=s(ut,2),kt=t(it,!0);e(it),e(Te),x((qt,$t)=>{i(Be,qt),i(kt,$t)},[()=>_()("session.manage_session.no_available"),()=>_()("session.manage_session.all_in_session")]),d(Y,Te)};w(ee,Y=>{a(Z).length===0&&Y(Ae)})}e(V),e(c),e(v),x((Y,Te)=>{i(y,Y),i(K,Te)},[()=>_()("session.manage_session.title"),()=>_()("session.manage_session.description")]),d(o,v)};w(Jt,o=>{a(h)&&o(Wt)})}var Qt=s(Jt,2);{var ca=o=>{var v=ji();v.__click=Be=>{Be.target===Be.currentTarget&&C(A,!1)};var c=t(v),p=t(c),N=t(p),m=t(N);za(m,{size:16});var y=s(m);e(N);var g=s(N,2);g.__click=()=>C(A,!1);var K=t(g);ya(K,{size:18}),e(g),e(p);var R=s(p,2),Q=t(R);Q.__click=()=>C($,"enemies");var V=t(Q);za(V,{size:14});var xe=s(V);e(Q);var ee=s(Q,2);ee.__click=()=>C($,"encounters");var Ae=t(ee);Xa(Ae,{size:14});var Y=s(Ae);e(ee),e(R);var Te=s(R,2),Re=t(Te);{var xt=Be=>{var it=wi(),kt=Je(it);Ge(kt,17,()=>a(fe),Nt=>Nt.id,(Nt,Ft)=>{var Yt=hi(),Kt=t(Yt),va=t(Kt),wa=t(va),Fa=s(wa);{var qa=na=>{pa(na,{size:10,class:"text-indigo-400"})};w(Fa,na=>{a(Ft).global&&na(qa)})}e(va);var Sa=s(va,2),Ba=t(Sa);e(Sa),e(Kt);var ka=s(Kt,2);ka.__click=()=>{at(a(Ft)),C(A,!1)};var Wa=t(ka);ra(Wa,{size:16}),e(ka),e(Yt),x(na=>{i(wa,`${a(Ft).name??""} `),i(Ba,`${na??""} ${a(Ft).difficulty??""}`)},[()=>_()("session.enemies.difficulty")]),d(Nt,Yt)});var qt=s(kt,2);{var $t=Nt=>{var Ft=yi(),Yt=t(Ft,!0);e(Ft),x(Kt=>i(Yt,Kt),[()=>_()("session.enemies.none")]),d(Nt,Ft)};w(qt,Nt=>{a(fe).length===0&&Nt($t)})}d(Be,it)},ut=Be=>{var it=Ci(),kt=Je(it);Ge(kt,17,()=>a(Ee),Nt=>Nt.id,(Nt,Ft)=>{var Yt=ki(),Kt=t(Yt),va=t(Kt),wa=t(va),Fa=s(wa);{var qa=na=>{pa(na,{size:10,class:"text-indigo-400"})};w(Fa,na=>{a(Ft).global&&na(qa)})}e(va);var Sa=s(va,2),Ba=t(Sa);e(Sa),e(Kt);var ka=s(Kt,2);ka.__click=()=>{gt(a(Ft)),C(A,!1)};var Wa=t(ka);Za(Wa,{size:16}),e(ka),e(Yt),x((na,Ja)=>{i(wa,`${a(Ft).name??""} `),i(Ba,`${na??""} ${Ja??""}`)},[()=>a(Ft).enemies?.reduce((na,Ja)=>na+Ja.count,0)||0,()=>_()("session.enemies.title")]),d(Nt,Yt)});var qt=s(kt,2);{var $t=Nt=>{var Ft=zi(),Yt=t(Ft,!0);e(Ft),x(Kt=>i(Yt,Kt),[()=>_()("session.enemies.no_encounters")]),d(Nt,Ft)};w(qt,Nt=>{a(Ee).length===0&&Nt($t)})}d(Be,it)};w(Re,Be=>{a($)==="enemies"?Be(xt):Be(ut,!1)})}e(Te),e(c),e(v),x((Be,it,kt)=>{i(y,` ${Be??""}`),We(Q,1,`flex-1 text-xs font-bold py-2 rounded flex items-center justify-center gap-2 transition-colors ${a($)==="enemies"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),i(xe,` ${it??""}`),We(ee,1,`flex-1 text-xs font-bold py-2 rounded flex items-center justify-center gap-2 transition-colors ${a($)==="encounters"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),i(Y,` ${kt??""}`)},[()=>_()("session.enemies.title"),()=>_()("session.enemies.title"),()=>_()("session.enemies.encounters")]),d(o,v)};w(Qt,o=>{a(A)&&o(ca)})}var Zt=s(Qt,2);Zt.__click=()=>C(A,!0);var ct=t(Zt);za(ct,{size:24}),e(Zt);var Ut=s(Zt,2);ms(Ut,{get isOpen(){return j()},onClose:()=>ja.set(!1)});var ia=s(Ut,2);cs(ia,{get isOpen(){return a(le).isOpen},get title(){return a(le).title},get message(){return a(le).message},get onConfirm(){return a(le).onConfirm},onCancel:()=>a(le).isOpen=!1}),x((o,v,c,p)=>{i(Pe,` ${o??""} `),i(jt,v),We(G,1,`flex-1 text-xs font-bold py-1.5 rounded flex items-center justify-center gap-2 transition-colors ${a($)==="enemies"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),i(be,` ${c??""}`),We(Le,1,`flex-1 text-xs font-bold py-1.5 rounded flex items-center justify-center gap-2 transition-colors ${a($)==="encounters"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),i(ot,` ${p??""}`)},[()=>_()("session.players.title"),()=>a(h)?_()("session.players.close"):_()("session.players.add"),()=>_()("session.enemies.title"),()=>_()("session.enemies.encounters")]),Ca("dragover",Tt,Ue),Ca("drop",Tt,Ve),d(U,Xe),da(),n()}ba(["click"]);var Ei=u('<span class="text-[10px] text-indigo-300 uppercase font-bold mb-2 block"> </span>'),Si=u('<div><!> <div class="flex items-center justify-between bg-black/40 rounded-xl p-1.5 border border-white/5"><button type="button" class="w-10 h-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <div class="flex flex-col items-center min-w-[3rem]"><span class="text-2xl font-black text-white leading-none tracking-tighter"> </span></div> <button type="button" class="w-10 h-10 flex items-center justify-center bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-all active:scale-90 shadow-lg shadow-indigo-500/20 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div></div>');function Ms(U,r){oa(r,!0);const l=()=>Pt(aa,"$t",X),[X,E]=la();function _(){const I=r.steps.indexOf(r.value);if(I>0)r.onUpdate(r.steps[I-1]);else if(I===-1){const $e=[...r.steps].reverse().find(Ne=>Ne<r.value);$e!==void 0?r.onUpdate($e):r.onUpdate(r.steps[0])}}function j(){const I=r.steps.indexOf(r.value);if(I!==-1&&I<r.steps.length-1)r.onUpdate(r.steps[I+1]);else if(I===-1){const $e=r.steps.find(Ne=>Ne>r.value);$e!==void 0?r.onUpdate($e):r.onUpdate(r.steps[r.steps.length-1])}}var S=Si(),n=t(S);{var h=I=>{var $e=Ei(),Ne=t($e,!0);e($e),x(()=>i(Ne,r.label)),d(I,$e)};w(n,I=>{r.label&&I(h)})}var A=s(n,2),te=t(A);te.__click=_;var se=t(te);fs(se,{size:18}),e(te);var we=s(te,2),$=t(we),B=t($,!0);e($),e(we);var D=s(we,2);D.__click=j;var le=t(D);ra(le,{size:18}),e(D),e(A),e(S),x((I,$e)=>{_e(te,"aria-label",I),te.disabled=r.value<=r.steps[0],i(B,r.value),_e(D,"aria-label",$e),D.disabled=r.value>=r.steps[r.steps.length-1]},[()=>l()("common.buttons.decrease"),()=>l()("common.buttons.increase")]),d(U,S),da(),E()}ba(["click"]);var Ii=u('<div class="w-16 h-16 rounded-lg overflow-hidden border border-slate-700 shadow-lg flex-shrink-0"><!></div>'),Di=u('<div class="text-xs text-slate-500 italic mt-2 leading-relaxed opacity-75"> </div>'),Ri=u('<span class="text-slate-400"> </span>'),$i=u('<span class="text-slate-400"> </span>'),Ni=u('<div class="text-sm mb-4"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span></div>'),Ai=u('<div class="mb-3 text-sm"><span class="font-bold text-indigo-400"> </span> <span class="text-slate-300 ml-1"> </span></div>'),Ti=u('<span class="text-slate-300"> </span>'),Ui=u('<div class="mb-2 text-sm"><span class="font-bold text-white"> </span> <span class="text-slate-400"> </span> <span class="text-white ml-1"> </span> <!></div>'),Pi=u('<div class="mt-4"><h4 class="text-red-500 font-bold text-xs uppercase mb-2 tracking-wider"> </h4> <!></div>'),Hi=u('<div class="mb-2 text-sm"><span class="font-bold text-white"> </span> <span class="text-slate-300 ml-1"> </span></div>'),Li=u('<div class="mt-4"><h4 class="text-orange-500 font-bold text-xs uppercase mb-2 tracking-wider"> </h4> <!></div>'),Fi=u('<div class="mb-2 text-sm"><span class="font-bold text-white"> </span> <span class="text-slate-300 ml-1"> </span></div>'),qi=u('<div class="mt-4"><h4 class="text-yellow-500 font-bold text-xs uppercase mb-2 tracking-wider"> </h4> <!></div>'),Bi=u('<div class="w-full max-w-md bg-slate-900 border border-slate-700 rounded-xl p-5 shadow-2xl"><div class="flex items-start gap-3 mb-4"><!> <div class="flex-1 min-w-0"><div class="flex items-baseline gap-2"><h2 class="text-xl font-bold text-white font-serif tracking-wide"> </h2> <span class="text-red-500 font-bold text-sm"> </span></div> <div class="text-sm text-slate-400 mt-1"> </div> <!></div></div> <div class="text-sm mb-3"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span> <!></div> <div class="text-sm mb-3"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span> <span class="text-slate-500 font-bold ml-3"> </span> <span class="text-white ml-1"> </span></div> <div class="text-sm mb-3"><span class="text-white"><span class="text-slate-500 font-bold"> </span> <span class="text-slate-500 font-bold"> </span> <span class="text-slate-500 font-bold"> </span> <span class="text-slate-500 font-bold"> </span> </span></div> <div class="text-sm mb-3"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span> <!></div> <!> <div class="border-t border-slate-700 my-4"></div> <!> <!> <!> <!></div>'),Wi=u('<div class="space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="flex items-center gap-4"><div class="relative group cursor-pointer"><div class="w-16 h-16 rounded-xl overflow-hidden border border-slate-700"><!></div> <div class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"><!></div></div> <div class="flex-1"><label for="enemy-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold text-lg"/></div></div> <div><label for="enemy-desc-text" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <textarea id="enemy-desc-text" class="w-full bg-slate-900 border border-slate-700 rounded p-3 text-white text-sm min-h-[100px] resize-none focus:border-indigo-500 focus:outline-none transition-colors"></textarea></div> <div><label for="enemy-desc" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-desc" type="text" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div class="flex items-center gap-2 mt-4"><input id="enemy-global" type="checkbox" class="w-4 h-4 bg-slate-900 border-slate-700 rounded focus:ring-indigo-500"/> <label for="enemy-global" class="text-sm font-bold text-slate-400 select-none cursor-pointer flex items-center gap-2"><!> </label></div></div>'),Ji=u('<div class="bg-slate-900 p-3 rounded border border-slate-700 text-center"><label class="text-[10px] text-slate-500 uppercase font-bold block mb-1 text-ellipsis overflow-hidden whitespace-nowrap"> </label> <input type="number" class="w-full bg-transparent text-center font-bold text-white text-xl focus:outline-none mb-1"/> <div> </div></div>'),Gi=u('<div class="space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="grid grid-cols-2 gap-4"><div class="flex flex-col"><label for="enemy-diff" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <!></div> <div><label for="enemy-size" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <!></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-speed" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-speed" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-health" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-defense" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-perception" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-perception" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div><h4 class="text-indigo-400 font-bold text-sm uppercase mb-3 border-b border-indigo-500/20 pb-2"> </h4> <div class="grid grid-cols-4 gap-3"></div></div> <div class="space-y-3 pt-4 border-t border-slate-800"><div><label for="enemy-speed-notes" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-speed-notes" type="text" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-senses" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-senses" type="text" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-immune" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <textarea id="enemy-immune" class="w-full bg-slate-900 border border-slate-700 rounded p-3 text-white text-sm min-h-[80px] resize-none focus:border-indigo-500 focus:outline-none transition-colors"></textarea></div></div></div>'),Vi=u('<div class="flex gap-2 items-start"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),Qi=u('<div class="flex gap-2 items-start"><div class="flex-1 space-y-2"><div class="grid grid-cols-2 gap-2"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <select class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm"><option> </option><option> </option></select></div> <div class="grid grid-cols-2 gap-2"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600"/> <input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600"/></div> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),Yi=u('<div class="flex gap-2 items-start"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),Zi=u('<div class="flex gap-2 items-start"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),Xi=u('<div class="space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="p-4 bg-slate-900 rounded border border-indigo-500/30"><div class="mb-3"><h4 class="font-bold text-sm uppercase text-indigo-400"> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div> <div class="p-4 bg-slate-900 rounded border border-red-500/30"><div class="mb-3"><h4 class="font-bold text-sm uppercase text-red-400"> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div> <div class="p-4 bg-slate-900 rounded border border-orange-500/30"><div class="mb-3"><h4 class="font-bold text-sm uppercase text-orange-400"> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div> <div class="p-4 bg-slate-900 rounded border border-yellow-500/30"><div class="mb-3"><h4 class="font-bold text-sm uppercase text-yellow-400"> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div></div>'),Ki=u('<div class="flex-1 flex items-start justify-center p-4 min-h-0 animate-in fade-in slide-in-from-right-2 duration-300"><!></div>'),en=u('<div class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 lg:p-4" role="button" aria-label="Close" tabindex="-1"><div class="bg-slate-900 w-full h-full lg:rounded-xl lg:max-w-6xl lg:h-[90vh] border-0 lg:border border-slate-700 shadow-2xl overflow-hidden flex flex-col lg:flex-row" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="w-full lg:w-1/2 flex flex-col h-full border-r border-slate-700"><div class="p-4 border-b border-slate-700 bg-slate-900 flex justify-between items-center"><div class="flex items-center gap-3"><button class="lg:hidden text-slate-400 hover:text-white p-1 rounded-full hover:bg-slate-800 transition-colors"><!></button> <h3 id="modal-title" class="font-bold text-white text-lg"> </h3></div> <button class="hidden lg:block text-slate-400 hover:text-white"><!></button></div> <div class="flex border-b border-slate-700 bg-slate-900/50 overflow-x-auto"><button> </button> <button> </button> <button> </button> <button> </button></div> <div class="flex-1 overflow-y-auto p-6 custom-scrollbar bg-slate-800/50"><!></div> <div class="p-4 border-t border-slate-700 bg-slate-900 flex justify-end gap-3 safe-area-bottom"><button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold flex items-center gap-2 transition-colors"><!> </button></div></div> <div class="hidden lg:flex w-1/2 bg-slate-950 flex-col border-l border-slate-800"><div class="p-4 border-b border-slate-800 bg-slate-950"><h3 class="font-bold text-slate-500 text-xs uppercase flex items-center gap-2"><!> </h3></div> <div class="flex-1 p-8 overflow-y-auto flex items-start justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-slate-950"><!></div></div></div></div> <input type="file" hidden="" accept="image/*"/> <!>',1);function tn(U,r){oa(r,!0);const l=()=>Pt(aa,"$t",X),[X,E]=la(),_=M=>{var Z=Bi(),fe=t(Z),Ee=t(fe);{var Oe=b=>{var z=Ii(),k=t(z);Da(k,{get hash(){return a(n).imageUrl},get alt(){return a(n).name},size:"custom"}),e(z),d(b,z)};w(Ee,b=>{a(n).imageUrl&&b(Oe)})}var dt=s(Ee,2),tt=t(dt),ft=t(tt),nt=t(ft,!0);e(ft);var at=s(ft,2),gt=t(at);e(at),e(tt);var ht=s(tt,2),yt=t(ht);e(ht);var ce=s(ht,2);{var Se=b=>{var z=Di(),k=t(z,!0);e(z),x(()=>i(k,a(n).description)),d(b,z)};w(ce,b=>{a(n).description&&b(Se)})}e(dt),e(fe);var Ce=s(fe,2),re=t(Ce),ae=t(re,!0);e(re);var oe=s(re,2),he=t(oe);e(oe);var Ie=s(oe,2);{var Me=b=>{var z=Ri(),k=t(z);e(z),x(()=>i(k,`; ${a(n).senses??""}`)),d(b,z)};w(Ie,b=>{a(n).senses&&b(Me)})}e(Ce);var He=s(Ce,2),Ue=t(He),Ve=t(Ue,!0);e(Ue);var Xe=s(Ue,2),Mt=t(Xe,!0);e(Xe);var wt=s(Xe,2),At=t(wt,!0);e(wt);var O=s(wt,2),q=t(O,!0);e(O),e(He);var P=s(He,2),Pe=t(P),st=t(Pe),rt=t(st,!0);e(st);var Ke=s(st),jt=s(Ke),Et=t(jt,!0);e(jt);var It=s(jt),Qe=s(It),L=t(Qe,!0);e(Qe);var T=s(Qe),H=s(T),ge=t(H,!0);e(H);var W=s(H);e(Pe),e(P);var J=s(P,2),ne=t(J),Ye=t(ne,!0);e(ne);var ue=s(ne,2),de=t(ue,!0);e(ue);var G=s(ue,2);{var De=b=>{var z=$i(),k=t(z);e(z),x(()=>i(k,`; ${a(n).speedNotes??""}`)),d(b,z)};w(G,b=>{a(n).speedNotes&&b(De)})}e(J);var be=s(J,2);{var Le=b=>{var z=Ni(),k=t(z),ye=t(k,!0);e(k);var Fe=s(k,2),et=t(Fe,!0);e(Fe),e(z),x(Ze=>{i(ye,Ze),i(et,a(n).immunities)},[()=>l()("session.enemy_modal.immunities")]),d(b,z)};w(be,b=>{a(n).immunities&&b(Le)})}var lt=s(be,4);{var ot=b=>{var z=St(),k=Je(z);Ge(k,17,()=>a(n).traits,Ct,(ye,Fe)=>{var et=Ai(),Ze=t(et),mt=t(Ze,!0);e(Ze);var pt=s(Ze,2),Lt=t(pt,!0);e(pt),e(et),x(()=>{i(mt,a(Fe).name),i(Lt,a(Fe).desc)}),d(ye,et)}),d(b,z)};w(lt,b=>{a(n).traits.length>0&&b(ot)})}var vt=s(lt,2);{var Ht=b=>{var z=Pi(),k=t(z),ye=t(k,!0);e(k);var Fe=s(k,2);Ge(Fe,17,()=>a(n).attackOptions,Ct,(et,Ze)=>{var mt=Ui(),pt=t(mt),Lt=t(pt,!0);e(pt);var Rt=s(pt,2),Bt=t(Rt);e(Rt);var Gt=s(Rt,2),Xt=t(Gt);e(Gt);var ta=s(Gt,2);{var Jt=Wt=>{var Qt=Ti(),ca=t(Qt);e(Qt),x(()=>i(ca,`; ${a(Ze).desc??""}`)),d(Wt,Qt)};w(ta,Wt=>{a(Ze).desc&&Wt(Jt)})}e(mt),x(Wt=>{i(Lt,a(Ze).name),i(Bt,`(${Wt??""})`),i(Xt,`${a(Ze).attackRoll??""} (${a(Ze).damage??""})`)},[()=>a(Ze).type==="melee"?l()("session.enemy_modal.melee").toLowerCase():l()("session.enemy_modal.ranged").toLowerCase()]),d(et,mt)}),e(z),x(et=>i(ye,et),[()=>l()("session.enemy_modal.attack_options")]),d(b,z)};w(vt,b=>{a(n).attackOptions.length>0&&b(Ht)})}var Dt=s(vt,2);{var Vt=b=>{var z=Li(),k=t(z),ye=t(k,!0);e(k);var Fe=s(k,2);Ge(Fe,17,()=>a(n).specialAttacks,Ct,(et,Ze)=>{var mt=Hi(),pt=t(mt),Lt=t(pt,!0);e(pt);var Rt=s(pt,2),Bt=t(Rt,!0);e(Rt),e(mt),x(()=>{i(Lt,a(Ze).name),i(Bt,a(Ze).desc)}),d(et,mt)}),e(z),x(et=>i(ye,et),[()=>l()("session.enemy_modal.special_attacks")]),d(b,z)};w(Dt,b=>{a(n).specialAttacks.length>0&&b(Vt)})}var Tt=s(Dt,2);{var f=b=>{var z=qi(),k=t(z),ye=t(k,!0);e(k);var Fe=s(k,2);Ge(Fe,17,()=>a(n).endOfRound,Ct,(et,Ze)=>{var mt=Fi(),pt=t(mt),Lt=t(pt,!0);e(pt);var Rt=s(pt,2),Bt=t(Rt,!0);e(Rt),e(mt),x(()=>{i(Lt,a(Ze).name),i(Bt,a(Ze).desc)}),d(et,mt)}),e(z),x(et=>i(ye,et),[()=>l()("session.enemy_modal.end_of_round")]),d(b,z)};w(Tt,b=>{a(n).endOfRound.length>0&&b(f)})}e(Z),x((b,z,k,ye,Fe,et,Ze,mt,pt,Lt,Rt,Bt,Gt,Xt,ta,Jt,Wt)=>{i(nt,b),i(gt,`${z??""} ${a(n).difficulty??""}`),i(yt,`${k??""} ${ye??""} ${a(n).descriptors??""}`),i(ae,Fe),i(he,`${a(n).perception??""} (${et??""})`),i(Ve,Ze),i(Mt,a(n).defense),i(At,mt),i(q,a(n).health),i(rt,pt),i(Ke,` ${a(n).attributes.strength??""} (${Lt??""}), `),i(Et,Rt),i(It,` ${a(n).attributes.agility??""} (${Bt??""}), `),i(L,Gt),i(T,` ${a(n).attributes.intellect??""} (${Xt??""}), `),i(ge,ta),i(W,` ${a(n).attributes.will??""} (${Jt??""})`),i(Ye,Wt),i(de,a(n).speed)},[()=>a(n).name||l()("session.enemy_modal.enemy_default"),()=>l()("session.enemies.difficulty").toUpperCase(),()=>l()("session.enemy_modal.size"),()=>le(a(n).size),()=>l()("sofdl.attributes.perception"),()=>D(a(n).perception),()=>l()("session.enemy_modal.defense"),()=>l()("session.enemy_modal.health"),()=>l()("sofdl.attributes.strength"),()=>D(a(n).attributes.strength),()=>l()("sofdl.attributes.agility"),()=>D(a(n).attributes.agility),()=>l()("sofdl.attributes.intellect"),()=>D(a(n).attributes.intellect),()=>l()("sofdl.attributes.will"),()=>D(a(n).attributes.will),()=>l()("session.enemy_modal.speed")]),d(M,Z)};let j=sa(r,"isOpen",3,!1),S=sa(r,"initialData",3,"{}"),n=_t(ga(B())),h=_t("general"),A=_t(!1),te=_t(""),se=_t(void 0);function we(M){const Z=M.target.files;if(Z&&Z.length>0){const fe=Z[0],Ee=new FileReader;Ee.onload=()=>{C(te,Ee.result,!0),C(A,!0)},Ee.readAsDataURL(fe)}M.target&&(M.target.value="")}async function $(M){try{const Z=await gs(M);a(n).imageUrl=Z,C(A,!1)}catch(Z){console.error(Z),alert(Z.message||"Erro ao salvar imagem")}}function B(){return{name:"",difficulty:1,size:1,description:"",descriptors:"",perception:10,senses:"",defense:10,health:10,attributes:{strength:10,agility:10,intellect:10,will:10},speed:10,speedNotes:"",immunities:"",traits:[],attackOptions:[],specialAttacks:[],endOfRound:[],imageUrl:"",global:!1}}function D(M){const Z=M-10;return Z>=0?`+${Z}`:`${Z}`}function le(M){return M===.125?"1/8":M===.5?"1/2":M}Ha(()=>{if(j()&&S())try{const M=JSON.parse(S());Object.keys(M).length===0?C(n,B(),!0):C(n,{...B(),...M},!0)}catch{C(n,B(),!0)}});function I(){a(n).traits=[...a(n).traits,{name:"",desc:""}]}function $e(M){a(n).traits=a(n).traits.filter((Z,fe)=>fe!==M)}function Ne(){a(n).attackOptions=[...a(n).attackOptions,{name:"",type:"melee",attackRoll:"+0",damage:"1d6",desc:""}]}function Ot(M){a(n).attackOptions=a(n).attackOptions.filter((Z,fe)=>fe!==M)}function ie(){a(n).specialAttacks=[...a(n).specialAttacks,{name:"",desc:""}]}function ke(M){a(n).specialAttacks=a(n).specialAttacks.filter((Z,fe)=>fe!==M)}function me(){a(n).endOfRound=[...a(n).endOfRound,{name:"",desc:""}]}function ze(M){a(n).endOfRound=a(n).endOfRound.filter((Z,fe)=>fe!==M)}function ve(M){}var je=St(),qe=Je(je);{var pe=M=>{var Z=en(),fe=Je(Z);fe.__click=ve;var Ee=t(fe),Oe=t(Ee),dt=t(Oe),tt=t(dt),ft=t(tt);ft.__click=function(...Qe){r.onClose?.apply(this,Qe)};var nt=t(ft);La(nt,{size:24}),e(ft);var at=s(ft,2),gt=t(at,!0);e(at),e(tt);var ht=s(tt,2);ht.__click=function(...Qe){r.onClose?.apply(this,Qe)};var yt=t(ht);ya(yt,{size:20}),e(ht),e(dt);var ce=s(dt,2),Se=t(ce);Se.__click=()=>C(h,"general");var Ce=t(Se,!0);e(Se);var re=s(Se,2);re.__click=()=>C(h,"stats");var ae=t(re,!0);e(re);var oe=s(re,2);oe.__click=()=>C(h,"abilities");var he=t(oe,!0);e(oe);var Ie=s(oe,2);Ie.__click=()=>C(h,"preview");var Me=t(Ie,!0);e(Ie),e(ce);var He=s(ce,2),Ue=t(He);{var Ve=Qe=>{var L=Wi(),T=t(L),H=t(T);H.__click=()=>a(se)?.click();var ge=t(H),W=t(ge);ts(W,()=>a(n).imageUrl,k=>{Da(k,{get hash(){return a(n).imageUrl},get alt(){return a(n).name},size:"custom",fallbackText:"?"})}),e(ge);var J=s(ge,2),ne=t(J);hs(ne,{size:20,class:"text-white"}),e(J),e(H);var Ye=s(H,2),ue=t(Ye),de=t(ue,!0);e(ue);var G=s(ue,2);zt(G),e(Ye),e(T);var De=s(T,2),be=t(De),Le=t(be,!0);e(be);var lt=s(be,2);ha(lt),e(De);var ot=s(De,2),vt=t(ot),Ht=t(vt,!0);e(vt);var Dt=s(vt,2);zt(Dt),e(ot);var Vt=s(ot,2),Tt=t(Vt);zt(Tt);var f=s(Tt,2),b=t(f);pa(b,{size:14});var z=s(b);e(f),e(Vt),e(L),x((k,ye,Fe,et,Ze,mt)=>{i(de,k),i(Le,ye),_e(lt,"placeholder",Fe),i(Ht,et),_e(Dt,"placeholder",Ze),i(z,` ${mt??""}`)},[()=>l()("session.enemy_modal.name"),()=>l()("session.enemy_modal.description"),()=>l()("session.enemy_modal.description_placeholder"),()=>l()("session.enemy_modal.descriptors"),()=>l()("session.enemy_modal.descriptors_placeholder"),()=>l()("session.enemy_modal.global_enemy")]),bt(G,()=>a(n).name,k=>a(n).name=k),bt(lt,()=>a(n).description,k=>a(n).description=k),bt(Dt,()=>a(n).descriptors,k=>a(n).descriptors=k),vs(Tt,()=>a(n).global,k=>a(n).global=k),d(Qe,L)},Xe=Qe=>{var L=St(),T=Je(L);{var H=W=>{var J=Gi(),ne=t(J),Ye=t(ne),ue=t(Ye),de=t(ue,!0);e(ue);var G=s(ue,2);{let m=F(()=>a(n).difficulty??0);Ms(G,{get value(){return a(m)},onUpdate:y=>a(n).difficulty=y,steps:[0,1,5,10,25,50,100,250,500,750,1e3]})}e(Ye);var De=s(Ye,2),be=t(De),Le=t(be,!0);e(be);var lt=s(be,2);{let m=F(()=>a(n).size||1);ys(lt,{get value(){return a(m)},onUpdate:y=>a(n).size=y})}e(De),e(ne);var ot=s(ne,2),vt=t(ot),Ht=t(vt),Dt=t(Ht,!0);e(Ht);var Vt=s(Ht,2);zt(Vt),e(vt);var Tt=s(vt,2),f=t(Tt),b=t(f,!0);e(f);var z=s(f,2);zt(z),e(Tt),e(ot);var k=s(ot,2),ye=t(k),Fe=t(ye),et=t(Fe,!0);e(Fe);var Ze=s(Fe,2);zt(Ze),e(ye);var mt=s(ye,2),pt=t(mt),Lt=t(pt,!0);e(pt);var Rt=s(pt,2);zt(Rt),e(mt),e(k);var Bt=s(k,2),Gt=t(Bt),Xt=t(Gt,!0);e(Gt);var ta=s(Gt,2);Ge(ta,5,()=>[{key:"strength",label:l()("sofdl.attributes.strength")},{key:"agility",label:l()("sofdl.attributes.agility")},{key:"intellect",label:l()("sofdl.attributes.intellect")},{key:"will",label:l()("sofdl.attributes.will")}],Ct,(m,y)=>{var g=Ji(),K=t(g),R=t(K,!0);e(K);var Q=s(K,2);zt(Q);var V=s(Q,2),xe=t(V,!0);e(V),e(g),x((ee,Ae)=>{_e(K,"for",`attr-${a(y).key??""}`),_e(K,"title",a(y).label),i(R,ee),_e(Q,"id",`attr-${a(y).key??""}`),We(V,1,`text-xs font-bold ${a(n).attributes[a(y).key]-10>=0?"text-green-500":"text-red-500"}`),i(xe,Ae)},[()=>a(y).label.substring(0,3),()=>D(a(n).attributes[a(y).key])]),bt(Q,()=>a(n).attributes[a(y).key],ee=>a(n).attributes[a(y).key]=ee),d(m,g)}),e(ta),e(Bt);var Jt=s(Bt,2),Wt=t(Jt),Qt=t(Wt),ca=t(Qt,!0);e(Qt);var Zt=s(Qt,2);zt(Zt),e(Wt);var ct=s(Wt,2),Ut=t(ct),ia=t(Ut,!0);e(Ut);var o=s(Ut,2);zt(o),e(ct);var v=s(ct,2),c=t(v),p=t(c,!0);e(c);var N=s(c,2);ha(N),e(v),e(Jt),e(J),x((m,y,g,K,R,Q,V,xe,ee,Ae,Y,Te,Re)=>{i(de,m),i(Le,y),i(Dt,g),i(b,K),i(et,R),i(Lt,Q),i(Xt,V),i(ca,xe),_e(Zt,"placeholder",ee),i(ia,Ae),_e(o,"placeholder",Y),i(p,Te),_e(N,"placeholder",Re)},[()=>l()("session.enemy_modal.difficulty"),()=>l()("session.enemy_modal.size"),()=>l()("session.enemy_modal.speed"),()=>l()("session.enemy_modal.health"),()=>l()("session.enemy_modal.defense"),()=>l()("sofdl.attributes.perception"),()=>l()("session.enemy_modal.main_attributes"),()=>l()("session.enemy_modal.speed_notes"),()=>l()("session.enemy_modal.speed_notes_placeholder"),()=>l()("session.enemy_modal.senses"),()=>l()("session.enemy_modal.senses_placeholder_sotdl"),()=>l()("session.enemy_modal.immunities"),()=>l()("session.enemy_modal.immunities_placeholder_sotdl")]),bt(Vt,()=>a(n).speed,m=>a(n).speed=m),bt(z,()=>a(n).health,m=>a(n).health=m),bt(Ze,()=>a(n).defense,m=>a(n).defense=m),bt(Rt,()=>a(n).perception,m=>a(n).perception=m),bt(Zt,()=>a(n).speedNotes,m=>a(n).speedNotes=m),bt(o,()=>a(n).senses,m=>a(n).senses=m),bt(N,()=>a(n).immunities,m=>a(n).immunities=m),d(W,J)},ge=W=>{var J=St(),ne=Je(J);{var Ye=de=>{var G=Xi(),De=t(G),be=t(De),Le=t(be),lt=t(Le,!0);e(Le),e(be);var ot=s(be,2),vt=t(ot);Ge(vt,17,()=>a(n).traits,Ct,(y,g,K)=>{var R=Vi(),Q=t(R),V=t(Q);zt(V);var xe=s(V,2);ha(xe),e(Q);var ee=s(Q,2);ee.__click=()=>$e(K);var Ae=t(ee);ua(Ae,{size:16}),e(ee),e(R),x((Y,Te)=>{_e(V,"placeholder",Y),_e(xe,"placeholder",Te)},[()=>l()("session.enemy_modal.name_placeholder"),()=>l()("session.enemy_modal.desc_placeholder")]),bt(V,()=>a(g).name,Y=>a(g).name=Y),bt(xe,()=>a(g).desc,Y=>a(g).desc=Y),d(y,R)});var Ht=s(vt,2);Ht.__click=I;var Dt=t(Ht),Vt=t(Dt);ra(Vt,{size:16}),e(Dt);var Tt=s(Dt);e(Ht),e(ot),e(De);var f=s(De,2),b=t(f),z=t(b),k=t(z,!0);e(z),e(b);var ye=s(b,2),Fe=t(ye);Ge(Fe,17,()=>a(n).attackOptions,Ct,(y,g,K)=>{var R=Qi(),Q=t(R),V=t(Q),xe=t(V);zt(xe);var ee=s(xe,2),Ae=t(ee),Y=t(Ae,!0);e(Ae),Ae.value=Ae.__value="melee";var Te=s(Ae),Re=t(Te,!0);e(Te),Te.value=Te.__value="ranged",e(ee),e(V);var xt=s(V,2),ut=t(xt);zt(ut);var Be=s(ut,2);zt(Be),e(xt);var it=s(xt,2);ha(it),e(Q);var kt=s(Q,2);kt.__click=()=>Ot(K);var qt=t(kt);ua(qt,{size:16}),e(kt),e(R),x(($t,Nt,Ft,Yt,Kt,va)=>{_e(xe,"placeholder",$t),i(Y,Nt),i(Re,Ft),_e(ut,"placeholder",Yt),_e(Be,"placeholder",Kt),_e(it,"placeholder",va)},[()=>l()("session.enemy_modal.name_placeholder"),()=>l()("session.enemy_modal.melee"),()=>l()("session.enemy_modal.ranged"),()=>l()("session.enemy_modal.attack_placeholder"),()=>l()("session.enemy_modal.damage_placeholder"),()=>l()("session.enemy_modal.desc_effects_placeholder")]),bt(xe,()=>a(g).name,$t=>a(g).name=$t),Ss(ee,()=>a(g).type,$t=>a(g).type=$t),bt(ut,()=>a(g).attackRoll,$t=>a(g).attackRoll=$t),bt(Be,()=>a(g).damage,$t=>a(g).damage=$t),bt(it,()=>a(g).desc,$t=>a(g).desc=$t),d(y,R)});var et=s(Fe,2);et.__click=Ne;var Ze=t(et),mt=t(Ze);ra(mt,{size:16}),e(Ze);var pt=s(Ze);e(et),e(ye),e(f);var Lt=s(f,2),Rt=t(Lt),Bt=t(Rt),Gt=t(Bt,!0);e(Bt),e(Rt);var Xt=s(Rt,2),ta=t(Xt);Ge(ta,17,()=>a(n).specialAttacks,Ct,(y,g,K)=>{var R=Yi(),Q=t(R),V=t(Q);zt(V);var xe=s(V,2);ha(xe),e(Q);var ee=s(Q,2);ee.__click=()=>ke(K);var Ae=t(ee);ua(Ae,{size:16}),e(ee),e(R),x((Y,Te)=>{_e(V,"placeholder",Y),_e(xe,"placeholder",Te)},[()=>l()("session.enemy_modal.name_placeholder"),()=>l()("session.enemy_modal.desc_placeholder")]),bt(V,()=>a(g).name,Y=>a(g).name=Y),bt(xe,()=>a(g).desc,Y=>a(g).desc=Y),d(y,R)});var Jt=s(ta,2);Jt.__click=ie;var Wt=t(Jt),Qt=t(Wt);ra(Qt,{size:16}),e(Wt);var ca=s(Wt);e(Jt),e(Xt),e(Lt);var Zt=s(Lt,2),ct=t(Zt),Ut=t(ct),ia=t(Ut,!0);e(Ut),e(ct);var o=s(ct,2),v=t(o);Ge(v,17,()=>a(n).endOfRound,Ct,(y,g,K)=>{var R=Zi(),Q=t(R),V=t(Q);zt(V);var xe=s(V,2);ha(xe),e(Q);var ee=s(Q,2);ee.__click=()=>ze(K);var Ae=t(ee);ua(Ae,{size:16}),e(ee),e(R),x((Y,Te)=>{_e(V,"placeholder",Y),_e(xe,"placeholder",Te)},[()=>l()("session.enemy_modal.name_placeholder"),()=>l()("session.enemy_modal.desc_placeholder")]),bt(V,()=>a(g).name,Y=>a(g).name=Y),bt(xe,()=>a(g).desc,Y=>a(g).desc=Y),d(y,R)});var c=s(v,2);c.__click=me;var p=t(c),N=t(p);ra(N,{size:16}),e(p);var m=s(p);e(c),e(o),e(Zt),e(G),x((y,g,K,R,Q,V,xe,ee)=>{i(lt,y),i(Tt,` ${g??""}`),i(k,K),i(pt,` ${R??""}`),i(Gt,Q),i(ca,` ${V??""}`),i(ia,xe),i(m,` ${ee??""}`)},[()=>l()("session.enemy_modal.traits"),()=>l()("common.buttons.add"),()=>l()("session.enemy_modal.attack_options"),()=>l()("common.buttons.add"),()=>l()("session.enemy_modal.special_attacks"),()=>l()("common.buttons.add"),()=>l()("session.enemy_modal.end_of_round"),()=>l()("common.buttons.add")]),d(de,G)},ue=de=>{var G=St(),De=Je(G);{var be=Le=>{var lt=Ki(),ot=t(lt);_(ot),e(lt),d(Le,lt)};w(De,Le=>{a(h)==="preview"&&Le(be)},!0)}d(de,G)};w(ne,de=>{a(h)==="abilities"?de(Ye):de(ue,!1)},!0)}d(W,J)};w(T,W=>{a(h)==="stats"?W(H):W(ge,!1)},!0)}d(Qe,L)};w(Ue,Qe=>{a(h)==="general"?Qe(Ve):Qe(Xe,!1)})}e(He);var Mt=s(He,2),wt=t(Mt);wt.__click=()=>r.onSave(a(n));var At=t(wt);as(At,{size:18});var O=s(At);e(wt),e(Mt),e(Oe);var q=s(Oe,2),P=t(q),Pe=t(P),st=t(Pe);es(st,{size:14});var rt=s(st);e(Pe),e(P);var Ke=s(P,2),jt=t(Ke);_(jt),e(Ke),e(q),e(Ee),e(fe);var Et=s(fe,2);Et.__change=we,zs(Et,Qe=>C(se,Qe),()=>a(se));var It=s(Et,2);ps(It,{get isOpen(){return a(A)},get imageUrl(){return a(te)},onClose:()=>C(A,!1),onCrop:$}),x((Qe,L,T,H,ge,W,J)=>{i(gt,Qe),We(Se,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="general"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(Ce,L),We(re,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="stats"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(ae,T),We(oe,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="abilities"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(he,H),We(Ie,1,`lg:hidden flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="preview"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(Me,ge),i(O,` ${W??""}`),i(rt,` ${J??""}`)},[()=>l()("session.enemy_modal.title"),()=>l()("session.enemy_modal.tab_general"),()=>l()("session.enemy_modal.tab_stats"),()=>l()("session.enemy_modal.tab_abilities"),()=>l()("session.enemy_modal.preview"),()=>l()("common.buttons.save"),()=>l()("session.enemy_modal.preview")]),Ta(3,Ee,()=>Ua,()=>({y:20,duration:300})),Ta(3,fe,()=>Ua,()=>({duration:200,opacity:1})),d(M,Z)};w(qe,M=>{j()&&M(pe)})}d(U,je),da(),E()}ba(["click","change"]);var an=u('<div class="w-16 h-16 rounded-lg overflow-hidden border border-slate-700 shadow-lg flex-shrink-0"><!></div>'),sn=u('<div class="bg-slate-950 p-2 rounded border border-slate-800"><div class="text-[10px] text-slate-500 uppercase font-bold mb-1"> </div> <div class="text-white font-bold"> <span> </span></div></div>'),rn=u('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),nn=u('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),ln=u('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),on=u('<div class="mb-2 pl-3 border-l-2 border-indigo-900"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),dn=u('<div><h4 class="font-bold text-indigo-400 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),vn=u('<div class="mb-2 pl-3 border-l-2 border-red-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),cn=u('<div><h4 class="font-bold text-red-500 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),un=u('<div class="mb-2 pl-3 border-l-2 border-orange-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),bn=u('<div><h4 class="font-bold text-orange-400 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),xn=u('<div class="mb-2 pl-3 border-l-2 border-yellow-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),_n=u('<div><h4 class="font-bold text-yellow-500 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),fn=u('<div class="w-full max-w-md bg-slate-900 border border-slate-700 rounded-xl p-5 shadow-2xl relative"><div class="absolute -top-3 -right-3 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-red-400"> </div> <div class="flex items-center gap-3 mb-4"><!> <div class="flex-1 min-w-0"><h2 class="text-2xl font-bold text-white mb-1 font-serif tracking-wide truncate"> </h2> <div class="h-1 w-20 bg-red-600 rounded-full"></div></div></div> <div class="grid grid-cols-2 gap-4 mb-4 text-sm"><div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold text-lg"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold text-lg"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold"> </span></div></div> <div class="grid grid-cols-4 gap-2 mb-6 text-center font-mono text-slate-300"></div> <div class="mb-6 space-y-2 text-xs"><!> <!> <!></div> <div class="space-y-5 text-sm"><!> <!> <!> <!></div></div>'),mn=u('<div class="space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="flex items-center gap-4"><div class="relative group cursor-pointer"><div class="w-16 h-16 rounded-xl overflow-hidden border border-slate-700"><!></div> <div class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"><!></div></div> <div class="flex-1"><label for="enemy-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold text-lg"/></div></div> <div><label for="enemy-desc" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <textarea id="enemy-desc" class="w-full bg-slate-900 border border-slate-700 rounded p-3 text-white text-sm min-h-[100px] resize-none focus:border-indigo-500 focus:outline-none transition-colors"></textarea></div> <div class="flex items-center gap-2"><input id="enemy-global" type="checkbox" class="w-4 h-4 bg-slate-900 border-slate-700 rounded focus:ring-indigo-500"/> <label for="enemy-global" class="text-sm font-bold text-slate-400 select-none cursor-pointer flex items-center gap-2"><!> </label></div></div>'),pn=u('<div class="bg-slate-900 p-2 rounded border border-slate-700 text-center"><label class="text-[10px] text-slate-500 uppercase font-bold block mb-1 text-ellipsis overflow-hidden whitespace-nowrap"> </label> <input type="number" class="w-full bg-transparent text-center font-bold text-white text-xl focus:outline-none mb-1"/> <div> </div></div>'),gn=u('<div class="space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="grid grid-cols-2 gap-4"><div class="flex flex-col"><label for="enemy-diff" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <!></div> <div class="flex flex-col"><label for="enemy-size" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <!></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-defense" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-health" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-damage" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-damage" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-speed" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-speed" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div><h4 class="text-indigo-400 font-bold text-sm uppercase mb-3 text-center border-b border-indigo-500/20 pb-2"> </h4> <div class="grid grid-cols-4 gap-3"></div></div> <div class="space-y-3 pt-4 border-t border-slate-800"><div><label for="enemy-senses" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-senses" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-langs" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-langs" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-immune" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-immune" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div></div></div>'),hn=u('<div class="flex gap-2 items-start animate-in fade-in slide-in-from-left-2"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600 focus:border-indigo-500 focus:outline-none"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none focus:border-indigo-500 focus:outline-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),yn=u('<div><div class="mb-3"><h4> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div>'),wn=u('<div class="space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300"></div>'),kn=u('<div class="flex-1 flex items-start justify-center p-4 min-h-0 animate-in fade-in slide-in-from-right-2 duration-300"><!></div>'),zn=u('<div class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 lg:p-4" role="button" tabindex="-1"><div class="bg-slate-900 w-full h-full lg:rounded-xl lg:max-w-6xl lg:h-[90vh] border-0 lg:border border-slate-700 shadow-2xl overflow-hidden flex flex-col lg:flex-row" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="w-full lg:w-1/2 flex flex-col h-full border-r border-slate-700"><div class="p-4 border-b border-slate-700 bg-slate-900 flex justify-between items-center"><div class="flex items-center gap-3"><button class="lg:hidden text-slate-400 hover:text-white p-1 rounded-full hover:bg-slate-800 transition-colors"><!></button> <h3 id="modal-title" class="font-bold text-white text-lg"> </h3></div> <button class="hidden lg:block text-slate-400 hover:text-white"><!></button></div> <div class="flex border-b border-slate-700 bg-slate-900/50 overflow-x-auto"><button> </button> <button> </button> <button> </button> <button> </button></div> <div class="flex-1 overflow-y-auto p-6 custom-scrollbar bg-slate-800/50"><!></div> <div class="p-4 border-t border-slate-700 bg-slate-900 flex justify-end gap-3 safe-area-bottom"><button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold flex items-center gap-2 transition-colors"><!> </button></div></div> <div class="hidden lg:flex w-1/2 bg-slate-950 flex-col border-l border-slate-800"><div class="p-4 border-b border-slate-800 bg-slate-950"><h3 class="font-bold text-slate-500 text-xs uppercase flex items-center gap-2"><!> </h3></div> <div class="flex-1 p-8 overflow-y-auto flex items-center justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-slate-950"><!></div></div></div></div> <input type="file" hidden="" accept="image/*"/> <!>',1);function Cn(U,r){oa(r,!0);const l=()=>Pt(aa,"$t",X),[X,E]=la(),_=ie=>{var ke=fn(),me=t(ke),ze=t(me);e(me);var ve=s(me,2),je=t(ve);{var qe=L=>{var T=an(),H=t(T);Da(H,{get hash(){return a(n).imageUrl},get alt(){return a(n).name},size:"custom"}),e(T),d(L,T)};w(je,L=>{a(n).imageUrl&&L(qe)})}var pe=s(je,2),M=t(pe),Z=t(M,!0);e(M),Ea(2),e(pe),e(ve);var fe=s(ve,2),Ee=t(fe),Oe=t(Ee),dt=t(Oe,!0);e(Oe);var tt=s(Oe,2),ft=t(tt,!0);e(tt),e(Ee);var nt=s(Ee,2),at=t(nt),gt=t(at,!0);e(at);var ht=s(at,2),yt=t(ht,!0);e(ht),e(nt);var ce=s(nt,2),Se=t(ce),Ce=t(Se,!0);e(Se);var re=s(Se,2),ae=t(re,!0);e(re),e(ce);var oe=s(ce,2),he=t(oe),Ie=t(he,!0);e(he);var Me=s(he,2),He=t(Me,!0);e(Me),e(oe),e(fe);var Ue=s(fe,2);Ge(Ue,20,()=>["str","agi","int","wil"],Ct,(L,T)=>{var H=sn(),ge=t(H),W=t(ge,!0);e(ge);var J=s(ge,2),ne=t(J),Ye=s(ne),ue=t(Ye);e(Ye),e(J),e(H),x(()=>{i(W,T),i(ne,`${a(n).stats[T]??""} `),We(Ye,1,`text-xs ${a(n).stats[T]-10>=0?"text-green-500":"text-red-500"}`),i(ue,`(${a(n).stats[T]-10>=0?"+":""}${a(n).stats[T]-10})`)}),d(L,H)}),e(Ue);var Ve=s(Ue,2),Xe=t(Ve);{var Mt=L=>{var T=rn(),H=t(T),ge=t(H);e(H);var W=s(H,2),J=t(W,!0);e(W),e(T),x(ne=>{i(ge,`${ne??""}:`),i(J,a(n).senses)},[()=>l()("session.enemy_modal.senses")]),d(L,T)};w(Xe,L=>{a(n).senses&&L(Mt)})}var wt=s(Xe,2);{var At=L=>{var T=nn(),H=t(T),ge=t(H);e(H);var W=s(H,2),J=t(W,!0);e(W),e(T),x(ne=>{i(ge,`${ne??""}:`),i(J,a(n).languages)},[()=>l()("session.enemy_modal.languages")]),d(L,T)};w(wt,L=>{a(n).languages&&L(At)})}var O=s(wt,2);{var q=L=>{var T=ln(),H=t(T),ge=t(H);e(H);var W=s(H,2),J=t(W,!0);e(W),e(T),x(ne=>{i(ge,`${ne??""}:`),i(J,a(n).immune)},[()=>l()("session.enemy_modal.immunities")]),d(L,T)};w(O,L=>{a(n).immune&&L(q)})}e(Ve);var P=s(Ve,2),Pe=t(P);{var st=L=>{var T=dn(),H=t(T),ge=t(H,!0);e(H);var W=s(H,2);Ge(W,17,()=>a(n).traits,Ct,(J,ne,Ye,ue)=>{var de=on(),G=t(de),De=t(G);e(G);var be=s(G,2),Le=t(be,!0);e(be),e(de),x(()=>{i(De,`${a(ne).name??""}:`),i(Le,a(ne).desc)}),d(J,de)}),e(T),x(J=>i(ge,J),[()=>l()("session.enemy_modal.traits")]),d(L,T)};w(Pe,L=>{a(n).traits.length>0&&L(st)})}var rt=s(Pe,2);{var Ke=L=>{var T=cn(),H=t(T),ge=t(H,!0);e(H);var W=s(H,2);Ge(W,17,()=>a(n).actions,Ct,(J,ne,Ye,ue)=>{var de=vn(),G=t(de),De=t(G);e(G);var be=s(G,2),Le=t(be,!0);e(be),e(de),x(()=>{i(De,`${a(ne).name??""}:`),i(Le,a(ne).desc)}),d(J,de)}),e(T),x(J=>i(ge,J),[()=>l()("session.enemy_modal.actions")]),d(L,T)};w(rt,L=>{a(n).actions.length>0&&L(Ke)})}var jt=s(rt,2);{var Et=L=>{var T=bn(),H=t(T),ge=t(H,!0);e(H);var W=s(H,2);Ge(W,17,()=>a(n).reactions,Ct,(J,ne,Ye,ue)=>{var de=un(),G=t(de),De=t(G);e(G);var be=s(G,2),Le=t(be,!0);e(be),e(de),x(()=>{i(De,`${a(ne).name??""}:`),i(Le,a(ne).desc)}),d(J,de)}),e(T),x(J=>i(ge,J),[()=>l()("session.enemy_modal.reactions")]),d(L,T)};w(jt,L=>{a(n).reactions.length>0&&L(Et)})}var It=s(jt,2);{var Qe=L=>{var T=_n(),H=t(T),ge=t(H,!0);e(H);var W=s(H,2);Ge(W,17,()=>a(n).endOfRound,Ct,(J,ne,Ye,ue)=>{var de=xn(),G=t(de),De=t(G);e(G);var be=s(G,2),Le=t(be,!0);e(be),e(de),x(()=>{i(De,`${a(ne).name??""}:`),i(Le,a(ne).desc)}),d(J,de)}),e(T),x(J=>i(ge,J),[()=>l()("session.enemy_modal.end_of_round")]),d(L,T)};w(It,L=>{a(n).endOfRound.length>0&&L(Qe)})}e(P),e(ke),x((L,T,H,ge,W,J)=>{i(ze,`${L??""} ${a(n).difficulty??""}`),i(Z,T),i(dt,H),i(ft,a(n).defense),i(gt,ge),i(yt,a(n).health),i(Ce,W),i(ae,a(n).size),i(Ie,J),i(He,a(n).speed)},[()=>l()("session.enemy_modal.difficulty"),()=>a(n).name||l()("session.enemy_modal.enemy_default"),()=>l()("session.enemy_modal.defense"),()=>l()("session.enemy_modal.health"),()=>l()("session.enemy_modal.size"),()=>l()("session.enemy_modal.speed")]),d(ie,ke)};let j=sa(r,"isOpen",3,!1),S=sa(r,"initialData",3,"{}"),n=_t(ga(B())),h=_t("general"),A=_t(!1),te=_t(""),se=_t(void 0);function we(ie){const ke=ie.target.files;if(ke&&ke.length>0){const me=ke[0],ze=new FileReader;ze.onload=()=>{C(te,ze.result,!0),C(A,!0)},ze.readAsDataURL(me)}ie.target&&(ie.target.value="")}async function $(ie){try{const ke=await gs(ie);a(n).imageUrl=ke,C(A,!1)}catch(ke){console.error(ke),alert(ke.message||"Erro ao salvar imagem")}}function B(){return{name:"",difficulty:1,defense:10,health:10,damage:0,size:1,speed:10,description:"",senses:"",languages:"",immune:"",imageUrl:"",stats:{str:10,agi:10,int:10,wil:10},traits:[],actions:[],reactions:[],endOfRound:[],global:!1}}Ha(()=>{if(j()&&S())try{const ie=JSON.parse(S());Object.keys(ie).length===0?C(n,B(),!0):C(n,{...B(),...ie},!0)}catch{C(n,B(),!0)}});function D(ie){a(n)[ie]=[...a(n)[ie],{name:"",desc:""}]}function le(ie,ke){a(n)[ie]=a(n)[ie].filter((me,ze)=>ze!==ke)}function I(ie){}var $e=St(),Ne=Je($e);{var Ot=ie=>{var ke=zn(),me=Je(ke);me.__click=I;var ze=t(me),ve=t(ze),je=t(ve),qe=t(je),pe=t(qe);pe.__click=function(...P){r.onClose?.apply(this,P)};var M=t(pe);La(M,{size:24}),e(pe);var Z=s(pe,2),fe=t(Z,!0);e(Z),e(qe);var Ee=s(qe,2);Ee.__click=function(...P){r.onClose?.apply(this,P)};var Oe=t(Ee);ya(Oe,{size:20}),e(Ee),e(je);var dt=s(je,2),tt=t(dt);tt.__click=()=>C(h,"general");var ft=t(tt,!0);e(tt);var nt=s(tt,2);nt.__click=()=>C(h,"stats");var at=t(nt,!0);e(nt);var gt=s(nt,2);gt.__click=()=>C(h,"abilities");var ht=t(gt,!0);e(gt);var yt=s(gt,2);yt.__click=()=>C(h,"preview");var ce=t(yt,!0);e(yt),e(dt);var Se=s(dt,2),Ce=t(Se);{var re=P=>{var Pe=mn(),st=t(Pe),rt=t(st);rt.__click=()=>a(se)?.click();var Ke=t(rt),jt=t(Ke);ts(jt,()=>a(n).imageUrl,be=>{Da(be,{get hash(){return a(n).imageUrl},get alt(){return a(n).name},size:"custom",fallbackText:"?"})}),e(Ke);var Et=s(Ke,2),It=t(Et);hs(It,{size:20,class:"text-white"}),e(Et),e(rt);var Qe=s(rt,2),L=t(Qe),T=t(L,!0);e(L);var H=s(L,2);zt(H),e(Qe),e(st);var ge=s(st,2),W=t(ge),J=t(W,!0);e(W);var ne=s(W,2);ha(ne),e(ge);var Ye=s(ge,2),ue=t(Ye);zt(ue);var de=s(ue,2),G=t(de);pa(G,{size:14});var De=s(G);e(de),e(Ye),e(Pe),x((be,Le,lt,ot)=>{i(T,be),i(J,Le),_e(ne,"placeholder",lt),i(De,` ${ot??""}`)},[()=>l()("session.enemy_modal.name"),()=>l()("session.enemy_modal.description"),()=>l()("session.enemy_modal.description_placeholder"),()=>l()("session.enemy_modal.global_enemy")]),bt(H,()=>a(n).name,be=>a(n).name=be),bt(ne,()=>a(n).description,be=>a(n).description=be),vs(ue,()=>a(n).global,be=>a(n).global=be),d(P,Pe)},ae=P=>{var Pe=St(),st=Je(Pe);{var rt=jt=>{var Et=gn(),It=t(Et),Qe=t(It),L=t(Qe),T=t(L,!0);e(L);var H=s(L,2);{let ct=F(()=>a(n).difficulty??1);Ms(H,{get value(){return a(ct)},onUpdate:Ut=>a(n).difficulty=Ut,steps:[1,2,4,8,16,32,64,128]})}e(Qe);var ge=s(Qe,2),W=t(ge),J=t(W,!0);e(W);var ne=s(W,2);{let ct=F(()=>a(n).size||1);ys(ne,{get value(){return a(ct)},onUpdate:Ut=>a(n).size=Ut})}e(ge),e(It);var Ye=s(It,2),ue=t(Ye),de=t(ue),G=t(de,!0);e(de);var De=s(de);zt(De),e(ue);var be=s(ue,2),Le=t(be),lt=t(Le,!0);e(Le);var ot=s(Le);zt(ot),e(be),e(Ye);var vt=s(Ye,2),Ht=t(vt),Dt=t(Ht),Vt=t(Dt,!0);e(Dt);var Tt=s(Dt);zt(Tt),e(Ht);var f=s(Ht,2),b=t(f),z=t(b,!0);e(b);var k=s(b);zt(k),e(f),e(vt);var ye=s(vt,2),Fe=t(ye),et=t(Fe,!0);e(Fe);var Ze=s(Fe,2);Ge(Ze,20,()=>["str","agi","int","wil"],Ct,(ct,Ut)=>{var ia=pn(),o=t(ia),v=t(o,!0);e(o);var c=s(o,2);zt(c);var p=s(c,2),N=t(p);e(p),e(ia),x(m=>{_e(o,"for",`attr-${Ut??""}`),i(v,m),_e(c,"id",`attr-${Ut??""}`),We(p,1,`text-xs font-bold ${a(n).stats[Ut]-10>=0?"text-green-500":"text-red-500"}`),i(N,`${a(n).stats[Ut]-10>=0?"+":""}${a(n).stats[Ut]-10}`)},[()=>l()("sofww.attributes."+Ut).substring(0,3)]),bt(c,()=>a(n).stats[Ut],m=>a(n).stats[Ut]=m),d(ct,ia)}),e(Ze),e(ye);var mt=s(ye,2),pt=t(mt),Lt=t(pt),Rt=t(Lt,!0);e(Lt);var Bt=s(Lt);zt(Bt),e(pt);var Gt=s(pt,2),Xt=t(Gt),ta=t(Xt,!0);e(Xt);var Jt=s(Xt);zt(Jt),e(Gt);var Wt=s(Gt,2),Qt=t(Wt),ca=t(Qt,!0);e(Qt);var Zt=s(Qt);zt(Zt),e(Wt),e(mt),e(Et),x((ct,Ut,ia,o,v,c,p,N,m,y,g,K,R)=>{i(T,ct),i(J,Ut),i(G,ia),i(lt,o),i(Vt,v),i(z,c),i(et,p),i(Rt,N),_e(Bt,"placeholder",m),i(ta,y),_e(Jt,"placeholder",g),i(ca,K),_e(Zt,"placeholder",R)},[()=>l()("session.enemy_modal.difficulty"),()=>l()("session.enemy_modal.size"),()=>l()("session.enemy_modal.defense"),()=>l()("session.enemy_modal.health"),()=>l()("session.enemy_modal.damage"),()=>l()("session.enemy_modal.speed"),()=>l()("session.enemy_modal.main_attributes"),()=>l()("session.enemy_modal.senses"),()=>l()("session.enemy_modal.senses_placeholder"),()=>l()("session.enemy_modal.languages"),()=>l()("session.enemy_modal.languages_placeholder"),()=>l()("session.enemy_modal.immunities"),()=>l()("session.enemy_modal.immunities_placeholder")]),bt(De,()=>a(n).defense,ct=>a(n).defense=ct),bt(ot,()=>a(n).health,ct=>a(n).health=ct),bt(Tt,()=>a(n).damage,ct=>a(n).damage=ct),bt(k,()=>a(n).speed,ct=>a(n).speed=ct),bt(Bt,()=>a(n).senses,ct=>a(n).senses=ct),bt(Jt,()=>a(n).languages,ct=>a(n).languages=ct),bt(Zt,()=>a(n).immune,ct=>a(n).immune=ct),d(jt,Et)},Ke=jt=>{var Et=St(),It=Je(Et);{var Qe=T=>{var H=wn();Ge(H,20,()=>[{key:"traits",label:"traits",color:"text-indigo-400",border:"border-indigo-500/30"},{key:"actions",label:"actions",color:"text-red-400",border:"border-red-500/30"},{key:"reactions",label:"reactions",color:"text-orange-400",border:"border-orange-500/30"},{key:"endOfRound",label:"end_of_round",color:"text-yellow-400",border:"border-yellow-500/30"}],Ct,(ge,W)=>{var J=yn(),ne=t(J),Ye=t(ne),ue=t(Ye,!0);e(Ye),e(ne);var de=s(ne,2),G=t(de);Ge(G,17,()=>a(n)[W.key],Ct,(ot,vt,Ht)=>{var Dt=hn(),Vt=t(Dt),Tt=t(Vt);zt(Tt);var f=s(Tt,2);ha(f),e(Vt);var b=s(Vt,2);b.__click=()=>le(W.key,Ht);var z=t(b);ua(z,{size:16}),e(b),e(Dt),x((k,ye)=>{_e(Tt,"placeholder",k),_e(f,"placeholder",ye)},[()=>l()("session.enemy_modal.name_placeholder"),()=>l()("session.enemy_modal.desc_placeholder")]),bt(Tt,()=>a(vt).name,k=>a(vt).name=k),bt(f,()=>a(vt).desc,k=>a(vt).desc=k),d(ot,Dt)});var De=s(G,2);De.__click=()=>D(W.key);var be=t(De),Le=t(be);ra(Le,{size:16}),e(be);var lt=s(be);e(De),e(de),e(J),x((ot,vt)=>{We(J,1,`p-4 bg-slate-900 rounded border ${W.border??""}`),We(Ye,1,`font-bold text-sm uppercase ${W.color??""}`),i(ue,ot),i(lt,` ${vt??""}`)},[()=>l()("session.enemy_modal."+W.label),()=>l()("common.buttons.add")]),d(ge,J)}),e(H),d(T,H)},L=T=>{var H=St(),ge=Je(H);{var W=J=>{var ne=kn(),Ye=t(ne);_(Ye),e(ne),d(J,ne)};w(ge,J=>{a(h)==="preview"&&J(W)},!0)}d(T,H)};w(It,T=>{a(h)==="abilities"?T(Qe):T(L,!1)},!0)}d(jt,Et)};w(st,jt=>{a(h)==="stats"?jt(rt):jt(Ke,!1)},!0)}d(P,Pe)};w(Ce,P=>{a(h)==="general"?P(re):P(ae,!1)})}e(Se);var oe=s(Se,2),he=t(oe);he.__click=()=>r.onSave(a(n));var Ie=t(he);as(Ie,{size:18});var Me=s(Ie);e(he),e(oe),e(ve);var He=s(ve,2),Ue=t(He),Ve=t(Ue),Xe=t(Ve);es(Xe,{size:14});var Mt=s(Xe);e(Ve),e(Ue);var wt=s(Ue,2),At=t(wt);_(At),e(wt),e(He),e(ze),e(me);var O=s(me,2);O.__change=we,zs(O,P=>C(se,P),()=>a(se));var q=s(O,2);ps(q,{get isOpen(){return a(A)},get imageUrl(){return a(te)},onClose:()=>C(A,!1),onCrop:$}),x((P,Pe,st,rt,Ke,jt,Et,It)=>{_e(me,"aria-label",P),i(fe,Pe),We(tt,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="general"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(ft,st),We(nt,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="stats"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(at,rt),We(gt,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="abilities"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(ht,Ke),We(yt,1,`lg:hidden flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(h)==="preview"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),i(ce,jt),i(Me,` ${Et??""}`),i(Mt,` ${It??""}`)},[()=>l()("session.enemy_modal.close"),()=>l()("session.enemy_modal.title"),()=>l()("session.enemy_modal.tab_general"),()=>l()("session.enemy_modal.tab_stats"),()=>l()("session.enemy_modal.tab_abilities"),()=>l()("session.enemy_modal.preview"),()=>l()("common.buttons.save"),()=>l()("session.enemy_modal.preview")]),Ta(3,ze,()=>Ua,()=>({y:20,duration:300})),Ta(3,me,()=>Ua,()=>({duration:200,opacity:1})),d(ie,ke)};w(Ne,ie=>{j()&&ie(Ot)})}d(U,$e),da(),E()}ba(["click","change"]);var jn=u('<div class="flex justify-between items-center bg-slate-800 p-2 rounded border border-slate-700"><div class="flex-1"><div class="text-sm font-bold text-white"> </div> <div class="text-[10px] text-slate-400"> </div></div> <div class="flex items-center gap-2"><input type="number" min="1" class="w-12 bg-slate-900 border border-slate-600 rounded text-center text-white"/> <button class="text-red-400 hover:text-red-300"><!></button></div></div>'),On=u('<div class="text-center text-slate-600 italic text-sm py-4"> </div>'),Mn=u('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 hover:border-indigo-500/30 transition-colors"><div><div class="text-sm font-bold text-white max-w-[120px] truncate"> </div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-indigo-400 hover:text-white p-1 bg-slate-900 rounded border border-slate-800"><!></button></div>'),En=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-2xl p-6 border border-slate-700 shadow-2xl flex flex-col max-h-[90vh]" role="dialog" aria-modal="true" aria-labelledby="encounter-modal-title"><div class="flex justify-between items-center mb-6"><h3 id="encounter-modal-title" class="text-xl font-bold text-white"> </h3> <button class="text-slate-400 hover:text-white"><!></button></div> <div class="space-y-4 mb-6"><div><label for="encounter-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="encounter-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white outline-hidden focus:border-indigo-500"/></div></div> <div class="flex-1 flex gap-4 min-h-0"><div class="flex-1 bg-slate-900 border border-slate-800 rounded-lg p-3 flex flex-col"><h4 class="text-xs text-slate-500 uppercase font-bold mb-2"> </h4> <div class="flex-1 overflow-y-auto space-y-2 custom-scrollbar"><!> <!></div></div> <div class="flex-1 bg-slate-900 border border-slate-800 rounded-lg p-3 flex flex-col"><h4 class="text-xs text-slate-500 uppercase font-bold mb-2"> </h4> <div class="flex-1 overflow-y-auto space-y-2 custom-scrollbar"></div></div></div> <div class="flex gap-3 mt-6 pt-4 border-t border-slate-700"><button class="flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded font-bold"> </button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-2 rounded font-bold flex items-center justify-center gap-2"><!> </button></div></div></div>');function Sn(U,r){oa(r,!0);const l=()=>Pt(aa,"$t",E),X=()=>Pt(Ka,"$liveEnemies",E),[E,_]=la();let j=sa(r,"isOpen",3,!1),S=sa(r,"initialData",3,"{}"),n=_t(ga({name:"",enemies:[]}));Ha(()=>{if(j()&&S())try{const D=JSON.parse(S());C(n,{name:D.name||"",enemies:D.enemies||[]},!0)}catch{C(n,{name:"",enemies:[]},!0)}});function h(D){a(n).enemies.find(I=>I.enemyId===D)?a(n).enemies=a(n).enemies.map(I=>I.enemyId===D?{...I,count:I.count+1}:I):a(n).enemies=[...a(n).enemies,{enemyId:D,count:1}]}function A(D){a(n).enemies=a(n).enemies.filter((le,I)=>I!==D)}function te(D,le){const I=Math.max(1,parseInt(le)||1);a(n).enemies[D].count=I}function se(D){}var we=St(),$=Je(we);{var B=D=>{var le=En();le.__click=se;var I=t(le),$e=t(I),Ne=t($e),Ot=t(Ne,!0);e(Ne);var ie=s(Ne,2);ie.__click=function(...ae){r.onClose?.apply(this,ae)};var ke=t(ie);ya(ke,{size:20}),e(ie),e($e);var me=s($e,2),ze=t(me),ve=t(ze),je=t(ve,!0);e(ve);var qe=s(ve,2);zt(qe),e(ze),e(me);var pe=s(me,2),M=t(pe),Z=t(M),fe=t(Z,!0);e(Z);var Ee=s(Z,2),Oe=t(Ee);Ge(Oe,17,()=>a(n).enemies,Ct,(ae,oe,he)=>{const Ie=F(()=>X().find(P=>P.id===a(oe).enemyId));var Me=jn(),He=t(Me),Ue=t(He),Ve=t(Ue,!0);e(Ue);var Xe=s(Ue,2),Mt=t(Xe);e(Xe),e(He);var wt=s(He,2),At=t(wt);zt(At),At.__input=P=>te(he,P.target.value);var O=s(At,2);O.__click=()=>A(he);var q=t(O);ua(q,{size:16}),e(O),e(wt),e(Me),x(P=>{i(Ve,P),i(Mt,`Dif ${(a(Ie)?a(Ie).difficulty:"?")??""}`),Qa(At,a(oe).count)},[()=>a(Ie)?a(Ie).name:l()("session.encounter_modal.unknown")]),d(ae,Me)});var dt=s(Oe,2);{var tt=ae=>{var oe=On(),he=t(oe,!0);e(oe),x(Ie=>i(he,Ie),[()=>l()("session.encounter_modal.none_added")]),d(ae,oe)};w(dt,ae=>{a(n).enemies.length===0&&ae(tt)})}e(Ee),e(M);var ft=s(M,2),nt=t(ft),at=t(nt,!0);e(nt);var gt=s(nt,2);Ge(gt,5,X,ae=>ae.id,(ae,oe)=>{var he=Mn(),Ie=t(he),Me=t(Ie),He=t(Me,!0);e(Me);var Ue=s(Me,2),Ve=t(Ue);e(Ue),e(Ie);var Xe=s(Ie,2);Xe.__click=()=>h(a(oe).id);var Mt=t(Xe);ra(Mt,{size:16}),e(Xe),e(he),x(()=>{i(He,a(oe).name),i(Ve,`Dif ${a(oe).difficulty??""}`)}),d(ae,he)}),e(gt),e(ft),e(pe);var ht=s(pe,2),yt=t(ht);yt.__click=function(...ae){r.onClose?.apply(this,ae)};var ce=t(yt,!0);e(yt);var Se=s(yt,2);Se.__click=()=>r.onSave(a(n));var Ce=t(Se);as(Ce,{size:18});var re=s(Ce);e(Se),e(ht),e(I),e(le),x((ae,oe,he,Ie,Me,He,Ue,Ve)=>{_e(le,"aria-label",ae),i(Ot,oe),i(je,he),_e(qe,"placeholder",Ie),i(fe,Me),i(at,He),i(ce,Ue),i(re,` ${Ve??""}`)},[()=>l()("session.encounter_modal.close"),()=>l()("session.encounter_modal.title"),()=>l()("session.encounter_modal.name"),()=>l()("session.encounter_modal.name_placeholder"),()=>l()("session.encounter_modal.enemies_in_encounter"),()=>l()("session.encounter_modal.add_enemies"),()=>l()("common.buttons.cancel"),()=>l()("session.encounter_modal.save_encounter")]),bt(qe,()=>a(n).name,ae=>a(n).name=ae),d(D,le)};w($,D=>{j()&&D(B)})}d(U,we),da(),_()}ba(["click","input"]);var In=u('<div class="text-[10px] text-slate-400 flex items-center gap-1.5 bg-slate-950 p-1 px-1.5 rounded-lg border border-slate-800/50"><span class="text-indigo-400 font-black"> </span> <span class="font-medium truncate max-w-[80px]"> </span></div>'),Dn=u('<div class="text-[10px] text-slate-600 italic"> </div>'),Rn=u('<div class="bg-slate-900 border border-slate-800 rounded-2xl p-4 transition-all hover:border-indigo-500/30 group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10" role="region"><div class="flex-1"><div class="flex items-center gap-2 mb-2"><div class="font-bold text-white text-base group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate"> </div> <!></div> <div class="flex flex-wrap gap-1"><!> <!></div></div> <div class="flex gap-2 mt-3 pt-3 border-t border-slate-800/50"><button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-1.5 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition-all active:scale-95 shadow-lg shadow-indigo-900/20"><!> </button> <button class="p-1.5 text-slate-400 hover:text-white bg-slate-800/50 rounded-lg border border-slate-800 transition-all" title="Editar"><!></button> <button class="p-1.5 text-slate-400 hover:text-red-400 bg-slate-800/50 rounded-lg border border-slate-800 hover:border-red-900/30 transition-all"><!></button></div></div>'),$n=u('<button class="text-[10px] font-bold text-indigo-400 hover:text-indigo-300 mt-1 uppercase tracking-wider"> </button>'),Nn=u('<div class="mb-4 flex-1"><p> </p> <!></div>'),An=u('<div class="mb-4 flex-1 text-[10px] text-slate-600 italic"> </div>'),Tn=u('<div class="bg-slate-900 border border-slate-800 rounded-2xl p-5 hover:border-indigo-500/30 transition-all relative group cursor-move hover:shadow-lg hover:shadow-indigo-500/10 active:scale-[0.98] flex flex-col" draggable="true" role="listitem"><div class="flex justify-between items-start mb-3"><div class="flex items-center gap-2"><h3 class="font-bold text-lg text-white group-hover:text-indigo-400 transition-colors"> </h3> <!></div> <span class="text-[10px] font-black bg-indigo-500/10 text-indigo-400 border border-indigo-400/20 px-2 py-1 rounded-lg uppercase"> </span></div> <!> <div class="mt-auto flex gap-2 pt-4 border-t border-slate-800/50"><button class="flex-1 bg-slate-800/50 hover:bg-slate-800 text-white py-2 rounded-xl text-xs font-bold border border-slate-800 transition-all"> </button> <button class="bg-slate-800/50 hover:bg-red-900/20 text-slate-500 hover:text-red-400 px-3 rounded-xl border border-slate-800 hover:border-red-900/30 transition-all"><!></button></div></div>'),Un=u('<div class="text-center text-slate-500 italic col-span-3"> </div>'),Pn=u('<div><div class="mb-12"><div class="flex justify-between items-center mb-6"><h3 class="text-sm font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2"><!> </h3></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><button class="min-h-[120px] border-2 border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-400 transition-all hover:bg-indigo-500/5 gap-2 group"><!> <span class="font-bold text-sm"> </span></button> <!></div></div> <div class="mb-6"><h3 class="text-sm font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2 mb-6"><!> </h3></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><button class="min-h-[180px] border-2 border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-400 transition-all hover:bg-indigo-500/5 gap-2 group"><!> <span class="font-bold text-sm"> </span></button> <!> <!></div> <!> <!> <!></div>');function Hn(U,r){oa(r,!0);const l=()=>Pt(Ka,"$liveEnemies",_),X=()=>Pt(us,"$liveEncounters",_),E=()=>Pt(aa,"$t",_),[_,j]=la();let S=_t(!1),n=_t(null),h=_t("{}"),A=_t(!1),te=_t(null),se=_t("{}"),we=_t(ga({isOpen:!1,title:"",message:"",onConfirm:()=>{}}));function $(){return{name:"",difficulty:1,defense:10,health:10,damage:0,size:1,speed:10,description:"",senses:"",languages:"",immune:"",stats:{str:10,agi:10,int:10,wil:10},traits:[],actions:[],reactions:[],endOfRound:[]}}function B(O=null){C(n,O?O.id:null,!0),O?C(h,JSON.stringify(O),!0):a(je)==="sofdl"?C(h,"{}"):C(h,JSON.stringify($()),!0),C(S,!0)}let D=ga(new Set);function le(O){D.has(O)?D.delete(O):D.add(O)}function I(O){const q=a(n)||Ia(),P=ea.get(r.campId);ns.set(q,{...O,id:q,campaignId:r.campId,system:P?.system||"sofww"}),C(S,!1)}function $e(O){const q=l().find(P=>P.id===O);C(we,{isOpen:!0,title:"Excluir Inimigo",message:`Tem certeza que deseja excluir permanentemente o inimigo "${q?.name||"este inimigo"}"?`,onConfirm:()=>{ns.delete(O),a(we).isOpen=!1}},!0)}function Ne(O=null){C(te,O?O.id:null,!0),C(se,JSON.stringify(O||{name:"",enemies:[]}),!0),C(A,!0)}function Ot(O){const q=a(te)||Ia();Va.set(q,{...O,id:q,system:a(je)}),C(A,!1)}function ie(O){const q=X().find(P=>P.id===O);C(we,{isOpen:!0,title:"Excluir Encontro",message:`Tem certeza que deseja excluir permanentemente o encontro "${q?.name||"este encontro"}"?`,onConfirm:()=>{Va.delete(O),a(we).isOpen=!1}},!0)}function ke(O){const q=ea.get(r.campId);if(!q)return;const P=q.activeEnemies||[];let Pe=[];O.enemies.forEach(st=>{const rt=l().find(Ke=>Ke.id===st.enemyId);if(rt)for(let Ke=0;Ke<st.count;Ke++)Pe.push({...rt,instanceId:Ia(),damage:0,currentHealth:rt.health,afflictions:[],acted:!1,initiative:!1})}),ea.set(r.campId,{...q,activeEnemies:[...P,...Pe]})}function me(O,q){O.dataTransfer.setData("text/plain",q.id),O.dataTransfer.effectAllowed="copy"}function ze(O){return O.preventDefault(),!1}function ve(O,q){O.preventDefault();const P=O.dataTransfer.getData("text/plain");if(!P)return;const Pe=q.enemies||[],st=Pe.find(Ke=>Ke.enemyId===P);let rt;st?rt=Pe.map(Ke=>Ke.enemyId===P?{...Ke,count:Ke.count+1}:Ke):rt=[...Pe,{enemyId:P,count:1}],Va.set(q.id,{...q,enemies:rt})}let je=F(()=>ea.get(r.campId)?.system||"sofww"),qe=F(()=>l().filter(O=>{const P=(O.system||"sofww")===a(je),Pe=O.global===!0,st=O.campaignId===r.campId;return P&&(Pe||st)})),pe=F(()=>X().filter(O=>{const P=(O.system||"sofww")===a(je),Pe=O.global===!0,st=O.campaignId===r.campId;return P&&(Pe||st)}));var M=Pn(),Z=t(M),fe=t(Z),Ee=t(fe),Oe=t(Ee);Xa(Oe,{size:16});var dt=s(Oe);e(Ee),e(fe);var tt=s(fe,2),ft=t(tt);ft.__click=()=>Ne();var nt=t(ft);ra(nt,{size:28,class:"group-hover:scale-110 transition-transform"});var at=s(nt,2),gt=t(at,!0);e(at),e(ft);var ht=s(ft,2);Ge(ht,17,()=>a(pe),O=>O.id,(O,q)=>{var P=Rn(),Pe=t(P),st=t(Pe),rt=t(st),Ke=t(rt,!0);e(rt);var jt=s(rt,2);{var Et=G=>{pa(G,{size:12,class:"text-indigo-400"})};w(jt,G=>{a(q).global&&G(Et)})}e(st);var It=s(st,2),Qe=t(It);Ge(Qe,17,()=>a(q).enemies||[],Ct,(G,De)=>{const be=F(()=>l().find(Dt=>Dt.id===a(De).enemyId));var Le=In(),lt=t(Le),ot=t(lt);e(lt);var vt=s(lt,2),Ht=t(vt,!0);e(vt),e(Le),x(()=>{i(ot,`${a(De).count??""}x`),i(Ht,a(be)?a(be).name:"...")}),d(G,Le)});var L=s(Qe,2);{var T=G=>{var De=Dn(),be=t(De,!0);e(De),x(Le=>i(be,Le),[()=>E()("session.bestiary.empty_encounter")]),d(G,De)};w(L,G=>{a(q).enemies?.length||G(T)})}e(It),e(Pe);var H=s(Pe,2),ge=t(H);ge.__click=()=>ke(a(q));var W=t(ge);Za(W,{size:12,fill:"currentColor"});var J=s(W);e(ge);var ne=s(ge,2);ne.__click=()=>Ne(a(q));var Ye=t(ne);Ks(Ye,{size:14}),e(ne);var ue=s(ne,2);ue.__click=()=>ie(a(q).id);var de=t(ue);ua(de,{size:14}),e(ue),e(H),e(P),x(G=>{_e(P,"aria-label",`Encontro ${a(q).name??""}`),i(Ke,a(q).name),i(J,` ${G??""}`)},[()=>E()("session.bestiary.start")]),Ca("dragover",P,ze),Ca("drop",P,G=>ve(G,a(q))),d(O,P)}),e(tt),e(Z);var yt=s(Z,2),ce=t(yt),Se=t(ce);za(Se,{size:16});var Ce=s(Se);e(ce),e(yt);var re=s(yt,2),ae=t(re);ae.__click=()=>B();var oe=t(ae);ra(oe,{size:32,class:"group-hover:scale-110 transition-transform"});var he=s(oe,2),Ie=t(he,!0);e(he),e(ae);var Me=s(ae,2);Ge(Me,17,()=>a(qe),O=>O.id,(O,q)=>{var P=Tn(),Pe=t(P),st=t(Pe),rt=t(st),Ke=t(rt,!0);e(rt);var jt=s(rt,2);{var Et=ue=>{pa(ue,{size:14,class:"text-indigo-400"})};w(jt,ue=>{a(q).global&&ue(Et)})}e(st);var It=s(st,2),Qe=t(It);e(It),e(Pe);var L=s(Pe,2);{var T=ue=>{var de=Nn(),G=t(de),De=t(G,!0);e(G);var be=s(G,2);{var Le=lt=>{var ot=$n();ot.__click=()=>le(a(q).id);var vt=t(ot,!0);e(ot),x(Ht=>i(vt,Ht),[()=>D.has(a(q).id)?E()("session.bestiary.see_less"):E()("session.bestiary.see_more")]),d(lt,ot)};w(be,lt=>{a(q).description.length>120&&lt(Le)})}e(de),x(lt=>{We(G,1,`text-xs text-slate-400 leading-relaxed ${lt??""}`),i(De,a(q).description)},[()=>D.has(a(q).id)?"":"line-clamp-3"]),d(ue,de)},H=ue=>{var de=An(),G=t(de,!0);e(de),x(De=>i(G,De),[()=>E()("session.bestiary.no_description")]),d(ue,de)};w(L,ue=>{a(q).description?ue(T):ue(H,!1)})}var ge=s(L,2),W=t(ge);W.__click=()=>B(a(q));var J=t(W,!0);e(W);var ne=s(W,2);ne.__click=()=>$e(a(q).id);var Ye=t(ne);ua(Ye,{size:14}),e(ne),e(ge),e(P),x((ue,de)=>{i(Ke,a(q).name),i(Qe,`${ue??""} ${a(q).difficulty??""}`),i(J,de)},[()=>E()("session.bestiary.level"),()=>E()("common.buttons.edit")]),Ca("dragstart",P,ue=>me(ue,a(q))),d(O,P)});var He=s(Me,2);{var Ue=O=>{var q=Un(),P=t(q,!0);e(q),x(Pe=>i(P,Pe),[()=>E()("session.bestiary.no_enemies")]),d(O,q)};w(He,O=>{a(qe).length===0&&O(Ue)})}e(re);var Ve=s(re,2);{var Xe=O=>{tn(O,{get isOpen(){return a(S)},get initialData(){return a(h)},onClose:()=>C(S,!1),onSave:I})},Mt=O=>{Cn(O,{get isOpen(){return a(S)},get initialData(){return a(h)},onClose:()=>C(S,!1),onSave:I})};w(Ve,O=>{a(je)==="sofdl"?O(Xe):O(Mt,!1)})}var wt=s(Ve,2);Sn(wt,{get isOpen(){return a(A)},get initialData(){return a(se)},onClose:()=>C(A,!1),onSave:Ot});var At=s(wt,2);cs(At,{get isOpen(){return a(we).isOpen},get title(){return a(we).title},get message(){return a(we).message},get onConfirm(){return a(we).onConfirm},onCancel:()=>a(we).isOpen=!1}),e(M),x((O,q,P,Pe)=>{i(dt,` ${O??""}`),i(gt,q),i(Ce,` ${P??""}`),i(Ie,Pe)},[()=>E()("session.bestiary.encounters_title"),()=>E()("session.bestiary.new_encounter"),()=>E()("session.bestiary.title"),()=>E()("session.bestiary.new_enemy")]),d(U,M),da(),j()}ba(["click"]);var Ln=u('<div class="flex items-center gap-1 text-slate-400 ml-1"><!> <span class="text-xs"> </span></div>'),Fn=u('<div class="flex items-center gap-1 text-emerald-400"><!> <span class="text-xs font-bold hidden sm:block"> </span></div> <!>',1),qn=u('<div class="flex items-center gap-1 text-slate-500"><!> <span class="text-xs hidden sm:block"> </span></div>'),Bn=u('<span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border border-slate-900"></span></span>'),Wn=u('<header class="bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-40 shadow-2xl"><div class="max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-3"><div class="flex items-center justify-between gap-2 sm:gap-4"><div class="flex items-center gap-1 sm:gap-3 shrink-0"><button class="p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all flex items-center gap-1 group"><!> <!></button> <div class="flex flex-col"><h1 class="text-base sm:text-lg font-black text-white leading-tight truncate max-w-[140px] sm:max-w-none"> </h1> <span class="text-xs text-indigo-400 font-mono font-black uppercase tracking-wider"> </span></div></div> <div class="hidden md:flex bg-slate-950/50 p-1 rounded-xl border border-white/5"><button><!> <span class="hidden min-[400px]:block"> </span></button> <button><!> <span class="hidden min-[400px]:block"> </span></button></div> <div class="flex items-center gap-1 sm:gap-2"><div class="flex items-center gap-2 mr-2 border-r border-white/10 pr-2"><!></div> <button class="p-2 sm:p-2.5 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-all"><!></button> <button class="p-2 sm:p-2.5 bg-indigo-600/10 text-indigo-400 border border-indigo-400/20 rounded-lg hover:bg-indigo-600 hover:text-white transition-all relative"><!> <!></button></div></div></div></header>');function Jn(U,r){oa(r,!0);const l=()=>Pt(aa,"$t",j),X=()=>Pt($s,"$syncState",j),E=()=>Pt(ja,"$isHistoryOpen",j),_=()=>Pt(Ns,"$hasUnreadRolls",j),[j,S]=la();let n=sa(r,"campaignName",3,""),h=sa(r,"gmName",3,"Mestre"),A=sa(r,"activeSubTab",3,"session"),te=sa(r,"onTabChange",3,()=>{}),se=sa(r,"onOpenSettings",3,()=>{});var we=Wn(),$=t(we),B=t($),D=t(B),le=t(D);le.__click=()=>ar(_s("/"));var I=t(le);La(I,{size:20,class:"group-hover:-translate-x-0.5 transition-transform"});var $e=s(I,2);Vs($e,{size:18,class:"hidden sm:block opacity-50"}),e(le);var Ne=s(le,2),Ot=t(Ne),ie=t(Ot,!0);e(Ot);var ke=s(Ot,2),me=t(ke,!0);e(ke),e(Ne),e(D);var ze=s(D,2),ve=t(ze);ve.__click=()=>te()("session");var je=t(ve);{let Ce=F(()=>A()==="session"?"opacity-100":"opacity-50");ws(je,{size:14,get class(){return a(Ce)}})}var qe=s(je,2),pe=t(qe,!0);e(qe),e(ve);var M=s(ve,2);M.__click=()=>te()("bestiary");var Z=t(M);{let Ce=F(()=>A()==="bestiary"?"opacity-100":"opacity-50");Cs(Z,{size:14,get class(){return a(Ce)}})}var fe=s(Z,2),Ee=t(fe,!0);e(fe),e(M),e(ze);var Oe=s(ze,2),dt=t(Oe),tt=t(dt);{var ft=Ce=>{var re=Fn(),ae=Je(re),oe=t(ae);xs(oe,{size:16});var he=s(oe,2),Ie=t(he,!0);e(he),e(ae);var Me=s(ae,2);{var He=Ue=>{var Ve=Ln(),Xe=t(Ve);bs(Xe,{size:14});var Mt=s(Xe,2),wt=t(Mt,!0);e(Mt),e(Ve),x(At=>{_e(Ve,"title",At),i(wt,X().peers.length)},[()=>l()("common.status.peers",{values:{count:X().peers.length}})]),d(Ue,Ve)};w(Me,Ue=>{X().peers.length>0&&Ue(He)})}x((Ue,Ve)=>{_e(ae,"title",Ue),i(Ie,Ve)},[()=>l()("common.status.connected"),()=>l()("common.status.connected")]),d(Ce,re)},nt=Ce=>{var re=qn(),ae=t(re);sr(ae,{size:16});var oe=s(ae,2),he=t(oe,!0);e(oe),e(re),x((Ie,Me)=>{_e(re,"title",Ie),i(he,Me)},[()=>l()("common.status.offline"),()=>l()("common.status.offline")]),d(Ce,re)};w(tt,Ce=>{X().isConnected?Ce(ft):Ce(nt,!1)})}e(dt);var at=s(dt,2);at.__click=function(...Ce){se()?.apply(this,Ce)};var gt=t(at);er(gt,{size:20}),e(at);var ht=s(at,2);ht.__click=()=>ja.update(Ce=>!Ce);var yt=t(ht);Qs(yt,{size:20});var ce=s(yt,2);{var Se=Ce=>{var re=Bn();d(Ce,re)};w(ce,Ce=>{_()&&Ce(Se)})}e(ht),e(Oe),e(B),e($),e(we),x((Ce,re,ae,oe,he,Ie,Me,He)=>{_e(le,"aria-label",Ce),_e(le,"title",re),i(ie,n()),i(me,h()),We(ve,1,`flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-lg text-xs font-black transition-all ${A()==="session"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:text-slate-300"}`),_e(ve,"aria-pressed",A()==="session"),i(pe,ae),We(M,1,`flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-lg text-xs font-black transition-all ${A()==="bestiary"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:text-slate-300"}`),_e(M,"aria-pressed",A()==="bestiary"),i(Ee,oe),_e(at,"aria-label",he),_e(at,"title",Ie),_e(ht,"aria-label",Me),_e(ht,"title",He),_e(ht,"aria-pressed",E())},[()=>l()("character.header.back_dashboard"),()=>l()("character.header.back_dashboard"),()=>l()("common.labels.session"),()=>l()("common.labels.bestiary"),()=>l()("common.buttons.settings"),()=>l()("common.buttons.settings"),()=>l()("character.header.history"),()=>l()("character.header.history")]),d(U,we),da(),S()}ba(["click"]);var Gn=u('<!> <!> <main class="max-w-7xl mx-auto p-4 md:p-8 animate-in slide-in-from-bottom-4 duration-500"><!></main>',1),Vn=u('<div class="flex flex-col items-center justify-center min-h-screen p-4 text-center"><div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ghost"><path d="M9 10h.01"></path><path d="M15 10h.01"></path><path d="M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"></path></svg></div> <h1 class="text-2xl font-black text-white mb-2 uppercase tracking-tight"> </h1> <p class="text-slate-400 mb-8 max-w-md"> </p> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-xl font-bold transition-all flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><path d="m12 19-7-7 7-7"></path><path d="19 12H5"></path></svg> </button></div>'),Qn=u('<div class="flex items-center justify-center min-h-screen"><div class="relative w-16 h-16"><div class="absolute inset-0 border-4 border-indigo-500/20 rounded-full"></div> <div class="absolute inset-0 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div></div></div>'),Yn=u('<div class="fixed bottom-24 left-1/2 -translate-x-1/2 md:left-8 md:translate-x-0 z-[60] flex flex-col items-center gap-2"><div class="bg-slate-900/95 backdrop-blur-md border border-white/10 rounded-2xl p-2 flex items-center gap-2 shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 duration-200"><button class="bg-indigo-600/20 hover:bg-indigo-600 text-indigo-400 hover:text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-indigo-500/20"><span class="text-[10px] opacity-70">d20</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">1d6</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">2d6</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">3d6</span> <!></button> <div class="w-px h-8 bg-white/10 mx-1"></div> <button class="w-10 h-10 flex items-center justify-center text-slate-500 hover:text-white transition-colors"><!></button></div></div>  <div class="fixed inset-0 bg-black/40 z-[55]"></div>',1),Zn=u('<div class="min-h-screen bg-slate-950 text-slate-100 font-sans pb-20"><!> <!> <!> <div class="hidden md:block fixed bottom-8 left-8 z-[60]"><button class="w-16 h-16 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full shadow-[0_0_20px_rgba(79,70,229,0.4)] flex items-center justify-center transition-all active:scale-90 border-2 border-white/10 group"><!></button></div> <nav class="md:hidden fixed bottom-0 left-0 right-0 z-50 px-4 pb-6 pt-2 pointer-events-none"><div class="max-w-md mx-auto relative h-16 pointer-events-auto"><div class="absolute inset-0 bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden"><div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-indigo-500/30 to-transparent"></div></div> <div class="relative h-full flex items-center justify-around px-2"><button><!> <span class="text-[9px] font-black uppercase tracking-widest leading-none"> </span></button> <div class="relative w-16 h-16 -mt-10 flex items-center justify-center"><div class="absolute inset-0 bg-indigo-600/20 rounded-full blur-xl animate-pulse"></div> <button class="relative w-14 h-14 bg-indigo-600 rounded-full flex items-center justify-center shadow-[0_0_20px_rgba(79,70,229,0.5)] border-4 border-slate-900 transition-all active:scale-90 hover:bg-indigo-500 z-10"><!></button></div> <button><!> <span class="text-[9px] font-black uppercase tracking-widest leading-none"> </span></button></div></div></nav> <!></div>');function pl(U,r){oa(r,!0);const l=()=>Pt(Is,"$page",j),X=()=>Pt(Hs,"$liveCampaigns",j),E=()=>Pt(aa,"$t",j),_=()=>Pt(ja,"$isHistoryOpen",j),[j,S]=la();let n=_t("session"),h=_t(!1),A=F(()=>l().params.id),te=F(()=>X().find(ce=>ce.id===a(A))),se=F(()=>!!a(te));function we(ce){if(!a(A)||!a(te))return;const Se={...a(te),...ce};ea.set(a(A),Se),Ya(a(A),{name:Se.name,gmName:Se.gmName}),C(h,!1)}let $=_t(!1),B=_t(ga({isOpen:!1,sides:20,count:1,modifier:0}));function D(ce,Se=1){C(B,{isOpen:!0,sides:ce,count:Se,modifier:0},!0)}function le(ce,Se=[],Ce){if(!a(te))return;const re=Hr(a(B).sides,a(B).count,ce);let ae="";a(B).count>1&&(ae+=`Dados: [${re.results.join(", ")}] `),re.bonusRolls?.length>0&&(ae+=`Bonus Rolls: [${re.bonusRolls.join(", ")}] -> ${Math.abs(re.modifierTotal)}`);const oe=a(te).gmName||Aa(aa)("common.labels.master"),he=()=>{As.addToHistory({source:"GM",charName:oe,name:`${a(B).count}d${a(B).sides} ${ce?ce>0?`+${ce}`:ce:""}`,description:ae.trim()||null,total:re.total,formula:re.formula,crit:re.crit}),Aa(Ts).autoOpenHistory?ja.set(!0):Es(async()=>{const{hasUnreadRolls:He}=await import("../chunks/BPjVGcEY.js").then(Ue=>Ue.a6);return{hasUnreadRolls:He}},__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(({hasUnreadRolls:He})=>{He.set(!0)})};Ce?.suppressHistory||(he(),a(B).isOpen=!1);const Ie=a(B).sides===20&&a(B).count===1;return{d20:Ie?re.results[0]:void 0,boonBaneDice:Ie?re.bonusRolls:[],damageDice:Ie?[]:re.results,total:re.total,formula:re.formula,commit:he}}var I=Zn(),$e=t(I);{var Ne=ce=>{var Se=Gn(),Ce=Je(Se);Jn(Ce,{get campaignName(){return a(te).name},get gmName(){return a(te).gmName},get activeSubTab(){return a(n)},onTabChange:Me=>C(n,Me,!0),onOpenSettings:()=>C(h,!0)});var re=s(Ce,2);{let Me=F(()=>JSON.stringify(a(te)));tr(re,{get isOpen(){return a(h)},get initialData(){return a(Me)},onClose:()=>C(h,!1),onSave:we})}var ae=s(re,2),oe=t(ae);{var he=Me=>{Mi(Me,{get campaign(){return a(te)}})},Ie=Me=>{var He=St(),Ue=Je(He);{var Ve=Xe=>{Hn(Xe,{get campId(){return a(A)}})};w(Ue,Xe=>{a(n)==="bestiary"&&Xe(Ve)},!0)}d(Me,He)};w(oe,Me=>{a(n)==="session"?Me(he):Me(Ie,!1)})}e(ae),d(ce,Se)},Ot=ce=>{var Se=St(),Ce=Je(Se);{var re=oe=>{var he=Vn(),Ie=s(t(he),2),Me=t(Ie,!0);e(Ie);var He=s(Ie,2),Ue=t(He,!0);e(He);var Ve=s(He,2);Ve.__click=()=>window.history.back();var Xe=s(t(Ve));e(Ve),e(he),x((Mt,wt,At)=>{i(Me,Mt),i(Ue,wt),i(Xe,` ${At??""}`)},[()=>E()("campaign.not_found.title"),()=>E()("campaign.not_found.message"),()=>E()("common.buttons.back")]),d(oe,he)},ae=oe=>{var he=Qn();d(oe,he)};w(Ce,oe=>{a(se)&&!a(te)?oe(re):oe(ae,!1)},!0)}d(ce,Se)};w($e,ce=>{a(se)&&a(te)?ce(Ne):ce(Ot,!1)})}var ie=s($e,2);ms(ie,{get isOpen(){return _()},onClose:()=>ja.set(!1)});var ke=s(ie,2);{var me=ce=>{var Se=Yn(),Ce=Je(Se),re=t(Ce),ae=t(re);ae.__click=()=>{D(20),C($,!1)};var oe=s(t(ae),2);Ma(oe,{size:16}),e(ae);var he=s(ae,2);he.__click=()=>{D(6),C($,!1)};var Ie=s(t(he),2);Ma(Ie,{size:16}),e(he);var Me=s(he,2);Me.__click=()=>{D(6,2),C($,!1)};var He=s(t(Me),2);Ma(He,{size:16}),e(Me);var Ue=s(Me,2);Ue.__click=()=>{D(6,3),C($,!1)};var Ve=s(t(Ue),2);Ma(Ve,{size:16}),e(Ue);var Xe=s(Ue,4);Xe.__click=()=>C($,!1);var Mt=t(Xe);ya(Mt,{size:20}),e(Xe),e(re),e(Ce);var wt=s(Ce,2);wt.__click=()=>C($,!1),d(ce,Se)};w(ke,ce=>{a($)&&ce(me)})}var ze=s(ke,2),ve=t(ze);ve.__click=()=>C($,!a($));var je=t(ve);Ma(je,{size:32,class:"group-hover:rotate-12 transition-transform"}),e(ve),e(ze);var qe=s(ze,2),pe=t(qe),M=s(t(pe),2),Z=t(M);Z.__click=()=>{C(n,"session"),C($,!1)};var fe=t(Z);{let ce=F(()=>a(n)==="session"?"animate-in zoom-in-75 duration-300":"");ws(fe,{size:20,get class(){return a(ce)}})}var Ee=s(fe,2),Oe=t(Ee,!0);e(Ee),e(Z);var dt=s(Z,2),tt=s(t(dt),2);tt.__click=()=>C($,!a($));var ft=t(tt);{let ce=F(()=>a($)?"rotate-90":"rotate-0");Ma(ft,{size:28,get class(){return`text-white ${a(ce)??""} transition-transform duration-300`}})}e(tt),e(dt);var nt=s(dt,2);nt.__click=()=>{C(n,"bestiary"),C($,!1)};var at=t(nt);{let ce=F(()=>a(n)==="bestiary"?"animate-in zoom-in-75 duration-300":"");Cs(at,{size:20,get class(){return a(ce)}})}var gt=s(at,2),ht=t(gt,!0);e(gt),e(nt),e(M),e(pe),e(qe);var yt=s(qe,2);{let ce=F(()=>`${E()("session.quick.roll_title")} (${a(B).count}d${a(B).sides})`),Se=F(()=>a(B).sides===20?E()("session.quick.boons_banes"):E()("session.quick.fixed_modifier"));Ys(yt,{get isOpen(){return a(B).isOpen},get title(){return a(ce)},get label(){return a(Se)},onClose:()=>a(B).isOpen=!1,onRoll:le,initialModifier:0})}e(I),x((ce,Se,Ce,re)=>{_e(ve,"title",ce),We(Z,1,`flex flex-col items-center justify-center gap-1 flex-1 transition-all ${a(n)==="session"?"text-indigo-400":"text-slate-500 hover:text-slate-300"}`),i(Oe,Se),_e(tt,"aria-label",Ce),We(nt,1,`flex flex-col items-center justify-center gap-1 flex-1 transition-all ${a(n)==="bestiary"?"text-indigo-400":"text-slate-500 hover:text-slate-300"}`),i(ht,re)},[()=>E()("session.quick.fab_title"),()=>E()("session.tabs.session"),()=>E()("session.quick.roll_dice"),()=>E()("session.tabs.bestiary")]),d(U,I),da(),S()}ba(["click"]);export{pl as component};
