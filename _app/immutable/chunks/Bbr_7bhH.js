import"./DsnmJJEf.js";import"./BmPwc1c7.js";import{J as yt,L as ct,u as fe,v as K,k as g,B as t,D as z,A as c,E as ke,w as Se,j as w,x as o,F as r,t as S,z as ze,y as f,a9 as Te,V as Ze,P as ut,O as rt,n as Qe,bc as kt}from"./EigO5Itq.js";import{I as Ee,s as $e}from"./D-_OqhXn.js";import{l as Ae,s as Ne,p as U,i as j}from"./EUrPnace.js";import{g as Mt,o as vt,f as ht,s as C,d as Ge,k as ft,e as Ve,r as Et}from"./CE5Oy5gg.js";import{s as _e,b as qe,$ as tt,a as Me,e as Xe,i as gt,r as $t}from"./B3FtJd8P.js";import{b as De}from"./BuOUQAlr.js";import{a as at,s as He}from"./x7t77AVd.js";import{a as At,D as Nt,M as Pt,P as bt,b as Rt,X as xt,c as Ct}from"./DpTP32G1.js";import{d as et,e as Lt,r as It,b as Tt}from"./pbaF5S1J.js";import{r as Dt,C as mt}from"./BV7ibAGp.js";import{t as St,s as zt}from"./DRbEtCnn.js";function Ot(i,e,a){yt(()=>{var n=ct(()=>e(i,a?.())||{});if(n?.destroy)return()=>n.destroy()})}function qa(i,e){const a=Ae(e,["children","$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12 18V5"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77"}]];Ee(i,Ne({name:"brain"},()=>a,{get iconNode(){return n},children:(d,x)=>{var l=fe(),u=K(l);$e(u,e,"default",{}),g(d,l)},$$slots:{default:!0}}))}function Xa(i,e){const a=Ae(e,["children","$$slots","$$events","$$legacy"]);const n=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18"}],["path",{d:"M16 10h.01"}],["path",{d:"M12 10h.01"}],["path",{d:"M8 10h.01"}],["path",{d:"M12 14h.01"}],["path",{d:"M8 14h.01"}],["path",{d:"M12 18h.01"}],["path",{d:"M8 18h.01"}]];Ee(i,Ne({name:"calculator"},()=>a,{get iconNode(){return n},children:(d,x)=>{var l=fe(),u=K(l);$e(u,e,"default",{}),g(d,l)},$$slots:{default:!0}}))}function Ya(i,e){const a=Ae(e,["children","$$slots","$$events","$$legacy"]);const n=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z"}],["circle",{cx:"12",cy:"13",r:"3"}]];Ee(i,Ne({name:"camera"},()=>a,{get iconNode(){return n},children:(d,x)=>{var l=fe(),u=K(l);$e(u,e,"default",{}),g(d,l)},$$slots:{default:!0}}))}function Ja(i,e){const a=Ae(e,["children","$$slots","$$events","$$legacy"]);const n=[["path",{d:"M9 10h.01"}],["path",{d:"M15 10h.01"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"}]];Ee(i,Ne({name:"ghost"},()=>a,{get iconNode(){return n},children:(d,x)=>{var l=fe(),u=K(l);$e(u,e,"default",{}),g(d,l)},$$slots:{default:!0}}))}function ot(i,e){const a=Ae(e,["children","$$slots","$$events","$$legacy"]);const n=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M12 7v5l4 2"}]];Ee(i,Ne({name:"history"},()=>a,{get iconNode(){return n},children:(d,x)=>{var l=fe(),u=K(l);$e(u,e,"default",{}),g(d,l)},$$slots:{default:!0}}))}function Ka(i,e){const a=Ae(e,["children","$$slots","$$events","$$legacy"]);const n=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"}]];Ee(i,Ne({name:"layout-dashboard"},()=>a,{get iconNode(){return n},children:(d,x)=>{var l=fe(),u=K(l);$e(u,e,"default",{}),g(d,l)},$$slots:{default:!0}}))}function pt(i,e){const a=Ae(e,["children","$$slots","$$events","$$legacy"]);const n=[["path",{d:"M5 12h14"}]];Ee(i,Ne({name:"minus"},()=>a,{get iconNode(){return n},children:(d,x)=>{var l=fe(),u=K(l);$e(u,e,"default",{}),g(d,l)},$$slots:{default:!0}}))}function Qa(i,e){const a=Ae(e,["children","$$slots","$$events","$$legacy"]);const n=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];Ee(i,Ne({name:"rotate-ccw"},()=>a,{get iconNode(){return n},children:(d,x)=>{var l=fe(),u=K(l);$e(u,e,"default",{}),g(d,l)},$$slots:{default:!0}}))}function jt(i,e){const a=Ae(e,["children","$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];Ee(i,Ne({name:"zoom-in"},()=>a,{get iconNode(){return n},children:(d,x)=>{var l=fe(),u=K(l);$e(u,e,"default",{}),g(d,l)},$$slots:{default:!0}}))}const er={Blinded:{effect:"Make rolls with 3 banes. No sight reactions. Speed halved.",speedMult:.5,rollMod:-3},Confused:{effect:"No reactions. Intellect and Will rolls with 1 bane.",rollMod:-1,attributes:["int","wil"]},Controlled:{effect:"Controller decides your turn. Regard source as ally."},Cursed:{effect:"Luck rolls with 1 bane."},Deafened:{effect:"No hearing reactions. Immune to hearing effects."},Frightened:{effect:"Attribute rolls with 1 bane (while in LOS). Grant 1 boon on rolls against you.",rollMod:-1},Held:{effect:"Speed 0. Cannot increase Speed. Auto-fail Agility defense rolls.",speedFixed:0},Impaired:{effect:"Roll with 1 bane for specified attribute. Grant 1 boon against that attribute.",rollMod:-1},Incapacitated:{effect:"Damage equals or exceeds Health. You cannot use actions or reactions. Speed 0.",speedFixed:0},"On Fire":{effect:"Take 1d6 damage at end of round. Action/Luck roll to extinguish."},Poisoned:{effect:"Attribute rolls with 1 bane. Grant 1 boon against you. Lose 1d6 Health end of round.",rollMod:-1},Prone:{effect:"No reactions. Grant 1 boon to melee vs you, impose 1 bane to ranged vs you."},Slowed:{effect:"Speed drops to 2 (if higher). Cannot benefit from Speed increases.",speedCap:2},Stunned:{effect:"No actions/reactions. Speed 0. Grant 2 boons against you. Attribute rolls with 2 banes.",speedFixed:0,rollMod:-2},Unconscious:{effect:"No actions/reactions. Speed 0. Grant 3 boons against you. Auto-fail attribute rolls.",speedFixed:0,autoFail:!0},Vulnerable:{effect:"Grant 1 boon on attacks/rolls against you."},Weakened:{effect:"Strength/Agility rolls with 1 bane. Grant 1 boon vs Str/Agi. Speed halved.",speedMult:.5,attributes:["str","agi"],rollMod:-1}},tr={OFF:"Off",ONE:"One",TWO:"Two"},ar=["NIMBLE","FIREARM","THROWN","BRUTAL","BLUDGEONING","SLASHING","DISARMING","RANGE","SPECIAL","MISFIRE","LARGE","SLOW","LIGHT","LONG","AMMUNITION","PIERCING","RELOAD","VERSATILE"],rr={ANCESTRY:"Ancestry",NOVICE:"Novice",EXPERT:"Expert",MASTER:"Master"};function nt(i){const e=At[i];return e?{theme_surface:i,theme_customColorset:e.dice,theme_colorset:i}:{}}function Ft(){let i=z(null),e=z("idle"),a=z(null),n=z(null),d=z(null);et.subscribe(b=>{t(i)&&b.diceTheme&&t(i).updateConfig(nt(b.diceTheme))});const x=ke(()=>t(e)==="ready"),l=ke(()=>t(e)==="rolling");async function u(b){if(!(t(i)||t(e)==="initializing")){c(a,b,!0),c(e,"initializing"),c(d,null);try{const h=Mt(et);c(i,new Nt(b,{assetPath:Dt("/"),...nt(h.diceTheme||"default"),shadows:!0}),!0),await t(i).initialize(),c(e,"ready")}catch(h){console.error("Failed to initialize DiceBox:",h),c(d,h instanceof Error?h.message:"Unknown error",!0),c(e,"error")}}}async function P(b){if(!t(i)||t(e)!=="ready")throw new Error("DiceBox is not initialized");c(e,"rolling"),c(d,null);try{const h=await t(i).roll(b);return c(n,h,!0),c(e,"ready"),h}catch(h){throw console.error("Roll failed:",h),c(d,h instanceof Error?h.message:"Roll failed",!0),c(e,"ready"),h}}async function B({dicePool:b}){const h=b.map(({shape:v})=>`1${v}`).join("+"),k=b.map(({value:v})=>v).filter(Boolean),O=k.length>0?`${h}@${k.join(",")}`:h;return P(O)}async function R(){if(t(i))try{await t(i).clear(),c(n,null)}catch(b){console.error("Clear failed:",b)}}function y(){t(i)&&(t(i).clear(),c(i,null)),c(a,null),c(e,"idle"),c(n,null),c(d,null)}return{get status(){return t(e)},get isReady(){return t(x)},get isRolling(){return t(l)},get lastResults(){return t(n)},get error(){return t(d)},get container(){return t(a)},initialize:u,roll:P,rollPool:B,clear:R,dispose:y}}const Ie=Ft();var Ht=w('<div class="dice-overlay svelte-10rxhsn"><div class="dice-loader svelte-10rxhsn"><span class="loader-spinner svelte-10rxhsn"></span> <span>Loading dice...</span></div></div>'),Gt=w('<small class="svelte-10rxhsn"> </small>'),Bt=w('<div class="dice-overlay dice-error svelte-10rxhsn"><span>Failed to load dice</span> <!></div>'),Wt=w('<div role="img" aria-label="3D Dice Roller"><!></div>');function Ut(i,e){Se(e,!0);let a=U(e,"height",3,400),n=U(e,"class",3,""),d,x=z(!1);const l=ke(()=>Ie.status),u=ke(()=>Ie.error);vt(async()=>{c(x,!0),d&&await Ie.initialize(d)}),ht(()=>{Ie.dispose()});async function P(v){const A=await Ie.roll(v);return e.onRollComplete?.(A),A}async function B(){await Ie.clear()}var R={roll:P,clear:B},y=Wt();let b;var h=o(y);{var k=v=>{var A=Ht();g(v,A)},O=v=>{var A=fe(),$=K(A);{var Z=M=>{var D=Bt(),H=f(o(D),2);{var te=re=>{var se=Gt(),F=o(se,!0);r(se),S(()=>C(F,t(u))),g(re,se)};j(H,re=>{t(u)&&re(te)})}r(D),g(M,D)};j($,M=>{t(l)==="error"&&M(Z)},!0)}g(v,A)};j(h,v=>{t(l)==="initializing"?v(k):v(O,!1)})}return r(y),De(y,v=>d=v,()=>d),S(()=>{_e(y,1,`dice-roller ${n()??""}`,"svelte-10rxhsn"),b=qe(y,"",b,{height:`${a()??""}px`})}),g(i,y),ze(R)}var Zt=w('<div class="absolute inset-0 bg-transparent z-10"></div>'),Vt=w('<div class="rounded-2xl overflow-hidden border border-white/10 relative h-[300px]"><!> <!></div>'),qt=w('<div class="mt-2 text-sm text-slate-400 font-mono bg-black/30 py-1 px-3 rounded-full inline-block border border-white/5"> </div>'),Xt=w('<div class="space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500"><div class="bg-slate-900/80 p-6 rounded-2xl border border-white/10 text-center shadow-lg relative overflow-hidden group"><div class="absolute inset-0 bg-indigo-500/10 blur-xl"></div> <div class="relative z-10"><div class="text-xs text-slate-400 uppercase tracking-widest font-bold mb-2"> </div> <div class="text-5xl font-black text-white tracking-tighter drop-shadow-lg scale-110 transform transition-transform duration-300"> </div> <!></div></div> <button class="w-full bg-slate-800 hover:bg-slate-700 text-white font-black py-4 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-all active:scale-[0.98] uppercase tracking-widest text-sm border border-slate-700"><!> </button></div>'),Yt=w('<div class="flex flex-col items-center"><div class="text-xs font-black text-slate-500 uppercase tracking-widest mb-2"> </div> <div class="text-2xl font-mono font-bold text-white bg-slate-950/50 px-4 py-2 rounded-lg border border-white/10 shadow-inner"> </div></div>'),Jt=w('<button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-red-500/20 text-slate-300 hover:text-red-400 border border-slate-700 hover:border-red-500/30 flex items-center justify-center transition-all active:scale-90 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <div class="flex flex-col items-center min-w-[100px]"><span> </span></div> <button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-green-500/20 text-slate-300 hover:text-green-400 border border-slate-700 hover:border-green-500/30 flex items-center justify-center transition-all active:scale-90 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"><!></button>',1),Kt=w('<div class="text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] relative z-10"> </div>'),Qt=w('<div class="w-2 h-2 bg-white rounded-sm"></div>'),ea=w('<span class="text-[9px] text-slate-400 bg-slate-800 px-1 rounded"> </span>'),ta=w('<div class="flex flex-wrap gap-1 mt-1"></div>'),aa=w('<button><div class="flex items-center gap-3"><div><!></div> <div><span class="text-sm font-bold text-slate-200 block leading-tight"> </span> <!></div></div></button>'),ra=w('<div class="space-y-2"><h4 class="text-xs font-bold text-slate-500 uppercase px-1"> </h4> <div class="grid grid-cols-1 gap-2 max-h-[150px] overflow-y-auto pr-1 custom-scrollbar"></div></div>'),oa=w('<div class="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> <span> </span>',1),na=w("<!> ",1),ia=w('<div class="bg-slate-900/50 p-6 rounded-2xl border border-white/5 text-center shadow-inner relative overflow-hidden group"><div class="absolute inset-0 bg-indigo-500/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"></div> <div class="flex justify-center items-center gap-8 mb-4 relative z-10"><!></div> <!></div> <!> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 disabled:bg-slate-700 text-white font-black py-4 rounded-xl flex items-center justify-center gap-3 shadow-lg shadow-indigo-600/20 transition-all active:scale-[0.98] uppercase tracking-widest text-sm disabled:cursor-not-allowed"><!></button>',1),sa=w('<div class="space-y-6"><!> <!></div>');function or(i,e){Se(e,!0);const a=()=>He(tt,"$t",d),n=()=>He(et,"$appSettings",d),[d,x]=at();let l=U(e,"initialModifier",3,0),u=U(e,"effects",19,()=>[]);const P=ke(()=>e.label||a()("common.labels.boons_banes")),B=ke(()=>e.rollLabel||a()("common.buttons.roll"));let R=z(0),y=z(Te([])),b,h=z(!1),k=z(null),O=z(void 0),v;const A=ke(()=>n().enable3DDice);Ze(()=>(e.isOpen?(ct(()=>{t(k)||(c(R,l()),c(y,u().map(F=>F.id),!0))}),c(h,!1)):($(),c(y,[],!0),c(k,null)),()=>$()));function $(){v&&clearTimeout(v),c(O,void 0)}function Z(F){t(y).includes(F)?c(y,t(y).filter(W=>W!==F),!0):c(y,[...t(y),F],!0)}function M(F,W=[],G=[]){if(F!==void 0){const le=W.length,N=[F,...W].join(",");if(le===0)return`1d20@${F}`;const p=t(R)>0?"boon":t(R)<0?"bane":"",E=p?`[${p}]`:"";return`1d20+${le}d6${E}@${N}`}return G.length>0?`${G.length}d6@${G.join(",")}`:""}async function D(){const F=u().filter(G=>t(y).includes(G.id)),W=e.onRoll(t(R),F,{suppressHistory:!0});if(W){if(c(h,!0),t(A)&&b)try{const G=W.notation||M(W.d20,W.boonBaneDice,W.damageDice);G&&(await b.roll(G),await new Promise(le=>setTimeout(le,500)))}catch(G){console.error("3D dice roll failed:",G)}else await new Promise(G=>setTimeout(G,200));c(h,!1),c(k,W,!0),W.commit&&c(O,W.commit,!0),v=setTimeout(()=>{H()},2500)}else e.onClose()}function H(){v&&clearTimeout(v),t(O)&&(t(O)(),c(O,void 0)),e.onClose(),setTimeout(()=>{c(k,null)},300)}var te=fe(),re=K(te);{var se=F=>{{let W=ke(()=>t(k)?a()("common.labels.result"):e.title);Pt(F,{get isOpen(){return e.isOpen},onClose:H,get title(){return t(W)},children:(G,le)=>{var N=sa(),p=o(N);{var E=V=>{var Y=Vt(),Q=o(Y);De(Ut(Q,{height:300}),de=>b=de,()=>b);var ue=f(Q,2);{var ve=de=>{var he=Zt();g(de,he)};j(ue,de=>{t(h)&&de(ve)})}r(Y),g(V,Y)};j(p,V=>{t(A)&&V(E)})}var oe=f(p,2);{var ce=V=>{var Y=Xt(),Q=o(Y),ue=f(o(Q),2),ve=o(ue),de=o(ve,!0);r(ve);var he=f(ve,2),Pe=o(he,!0);r(he);var be=f(he,2);{var we=xe=>{var s=qt(),L=o(s,!0);r(s),S(()=>C(L,t(k).formula)),g(xe,s)};j(be,xe=>{t(k).formula&&xe(we)})}r(ue),r(Q);var ae=f(Q,2);ae.__click=H;var ne=o(ae);mt(ne,{size:20});var pe=f(ne);r(ae),r(Y),S((xe,s)=>{C(de,xe),C(Pe,t(k).total),C(pe,` ${s??""}`)},[()=>a()("common.labels.total"),()=>a()("common.buttons.close")]),g(V,Y)},ge=V=>{var Y=ia(),Q=K(Y),ue=f(o(Q),2),ve=o(ue);{var de=_=>{var I=Yt(),m=o(I),T=o(m,!0);r(m);var q=f(m,2),ie=o(q,!0);r(q),r(I),S(X=>{C(T,X),C(ie,e.customFormula)},[()=>a()("common.labels.formula")]),g(_,I)},he=_=>{var I=Jt(),m=K(I);m.__click=()=>rt(R,-1);var T=o(m);pt(T,{size:24}),r(m);var q=f(m,2),ie=o(q),X=o(ie);r(ie),r(q);var J=f(q,2);J.__click=()=>rt(R);var Ce=o(J);bt(Ce,{size:24}),r(J),S((ye,Oe)=>{Me(m,"aria-label",ye),m.disabled=t(h),_e(ie,1,`text-5xl font-black ${t(R)>0?"text-green-400":t(R)<0?"text-red-400":"text-slate-500"} tabular-nums drop-shadow-sm transition-colors duration-300`),C(X,`${t(R)>0?"+":""}${t(R)??""}`),Me(J,"aria-label",Oe),J.disabled=t(h)},[()=>a()("common.buttons.decrease"),()=>a()("common.buttons.increase")]),g(_,I)};j(ve,_=>{e.customFormula?_(de):_(he,!1)})}r(ue);var Pe=f(ue,2);{var be=_=>{var I=Kt(),m=o(I,!0);r(I),S(()=>C(m,t(P))),g(_,I)};j(Pe,_=>{e.customFormula||_(be)})}r(Q);var we=f(Q,2);{var ae=_=>{var I=ra(),m=o(I),T=o(m,!0);r(m);var q=f(m,2);Xe(q,21,u,ie=>ie.id,(ie,X)=>{var J=aa();J.__click=()=>Z(t(X).id);var Ce=o(J),ye=o(Ce),Oe=o(ye);{var Be=me=>{var ee=Qt();g(me,ee)};j(Oe,me=>{t(y).includes(t(X).id)&&me(Be)})}r(ye);var Le=f(ye,2),je=o(Le),Fe=o(je,!0);r(je);var We=f(je,2);{var Ye=me=>{var ee=ta();Xe(ee,21,()=>t(X).modifiers,gt,(Re,Ue)=>{var Je=ea(),wt=o(Je);r(Je),S(()=>C(wt,`${t(Ue).target??""}: ${t(Ue).value??""}`)),g(Re,Je)}),r(ee),g(me,ee)};j(We,me=>{t(X).modifiers&&t(X).modifiers.length>0&&me(Ye)})}r(Le),r(Ce),r(J),S((me,ee)=>{_e(J,1,`flex items-center justify-between p-3 rounded-lg border transition-all text-left ${me??""}`),J.disabled=t(h),_e(ye,1,`w-4 h-4 rounded border flex items-center justify-center transition-colors ${ee??""}`),C(Fe,t(X).name)},[()=>t(y).includes(t(X).id)?"bg-indigo-900/30 border-indigo-500/50 shadow-sm":"bg-slate-900/50 border-slate-800 opacity-60 hover:opacity-100 hover:border-slate-700",()=>t(y).includes(t(X).id)?"bg-indigo-500 border-indigo-400":"border-slate-600 bg-slate-900"]),g(ie,J)}),r(q),r(I),S(ie=>C(T,ie),[()=>a()("character.effects.active")]),g(_,I)};j(we,_=>{u().length>0&&_(ae)})}var ne=f(we,2);ft(ne,()=>e.children??ut);var pe=f(ne,2);pe.__click=D;var xe=o(pe);{var s=_=>{var I=oa(),m=f(K(I),2),T=o(m);r(m),S(q=>C(T,`${q??""}...`),[()=>a()("character.modals.rolling")]),g(_,I)},L=_=>{var I=na(),m=K(I);Rt(m,{size:18});var T=f(m);S(()=>C(T,` ${t(B)??""}`)),g(_,I)};j(xe,_=>{t(h)?_(s):_(L,!1)})}r(pe),S(()=>pe.disabled=t(h)),g(V,Y)};j(oe,V=>{t(k)?V(ce):V(ge,!1)})}r(N),g(G,N)},$$slots:{default:!0}})}};j(re,F=>{e.isOpen&&F(se)})}g(i,te),ze(),x()}Ge(["click"]);var la=w('<div class="absolute z-50 bottom-full left-1/2 mb-2 w-max max-w-[200px] p-2 bg-slate-800 border border-indigo-500 rounded-lg shadow-xl shadow-black/50 text-[10px] text-slate-300 leading-relaxed text-center pointer-events-none whitespace-normal -translate-x-1/2" style="margin-left: var(--x-offset);"> <div class="absolute -bottom-1 left-1/2 w-2 h-2 bg-slate-800 border-r border-b border-indigo-500 -translate-x-1/2" style="transform: translateX(calc(-50% - var(--x-offset))) rotate(45deg);"></div></div>'),da=w('<div role="button" tabindex="0"><!> <!></div>');function nr(i,e){let a=U(e,"text",3,""),n=U(e,"class",3,""),d=z(!1),x=!1,l=z(0),u,P=z(void 0);function B(){if(!u||!t(P))return;const v=u.getBoundingClientRect(),$=t(P).getBoundingClientRect().width/2;c(l,0);const Z=v.left+v.width/2-$;Z<10&&c(l,10-Z);const M=v.left+v.width/2+$;M>window.innerWidth-10&&c(l,window.innerWidth-10-M)}async function R(){x||(c(d,!0),setTimeout(B,0))}function y(v){x&&(t(d)?c(d,!1):(c(d,!0),setTimeout(B,0)))}var b=da();b.__touchstart=()=>x=!0,b.__click=y,b.__keydown=v=>{(v.key==="Enter"||v.key===" ")&&c(d,!t(d))};var h=o(b);ft(h,()=>e.children??ut);var k=f(h,2);{var O=v=>{var A=la(),$=o(A);Qe(),r(A),De(A,Z=>c(P,Z),()=>t(P)),S(()=>C($,`${a()??""} `)),St(3,A,()=>zt,()=>({duration:150,start:.95})),g(v,A)};j(k,v=>{t(d)&&a()&&v(O)})}r(b),De(b,v=>u=v,()=>u),S(()=>{_e(b,1,`relative inline-flex ${n()??""}`),qe(b,`--x-offset: ${t(l)??""}px;`)}),Ve("mouseenter",b,R),Ve("mouseleave",b,()=>!x&&c(d,!1)),g(i,b)}Ge(["touchstart","click","keydown"]);var ca=w('<div class="fixed inset-0 bg-black/50 z-[90] lg:hidden backdrop-blur-sm" role="button" tabindex="-1"></div>'),ua=w('<div class="flex flex-col items-center justify-center h-full text-slate-600 opacity-50"><div class="w-16 h-16 border-2 border-dashed border-slate-800 rounded-full flex items-center justify-center mb-4"><!></div> <p class="text-sm font-bold uppercase tracking-widest italic"> </p></div>'),va=w('<span class="text-[10px] text-white/50 font-black uppercase tracking-tighter"> </span>'),ha=w('<div class="text-[10px] text-slate-400 font-medium italic mt-1 leading-relaxed opacity-80 whitespace-pre-wrap"> </div>'),fa=w('<span class="text-[8px] font-black uppercase tracking-widest bg-indigo-500/10 text-indigo-300 px-2 py-0.5 rounded-full border border-indigo-500/20"> </span>'),ga=w('<div class="flex flex-wrap gap-1 mb-3"></div>'),ba=w('<div class="absolute inset-0 bg-yellow-400/5 animate-pulse"></div>'),xa=w('<span class="text-[10px] animate-bounce">âœ¨</span>'),ma=w('<div class="relative bg-black/40 rounded-xl p-3 flex justify-between items-center border border-white/5 group-hover:border-white/10 transition-colors overflow-hidden"><!> <div class="flex flex-col"><span class="text-[10px] text-slate-500 font-black uppercase tracking-widest mb-0.5"> </span> <div class="text-xs font-mono text-indigo-300 font-bold"> </div></div> <div class="flex flex-col items-end"><span class="text-[10px] text-slate-500 font-black uppercase tracking-widest mb-0.5"> </span> <div> <!></div></div></div>'),pa=w('<div class="relative bg-slate-800/40 hover:bg-slate-800/60 transition-colors rounded-2xl border border-white/5 p-4 shadow-xl overflow-hidden group animate-in slide-in-from-right-8 duration-300"><div></div> <div class="flex justify-between items-start mb-3"><div class="flex flex-col"><div class="flex items-center gap-2"><span> </span> <!></div></div> <span class="text-[9px] text-slate-500 font-black tracking-widest uppercase"> </span></div> <div class="flex items-center gap-3 mb-2"><div class="flex-1"><div class="font-black text-white text-sm uppercase tracking-tight leading-snug"> </div> <!></div></div> <!> <!></div>'),_a=w('<!> <aside><div class="px-6 py-5 border-b border-white/5 flex justify-between items-center bg-slate-950/50"><div class="flex items-center gap-3"><div class="p-2 bg-indigo-500/10 rounded-lg border border-indigo-500/20"><!></div> <div><h3 class="font-black text-white uppercase tracking-widest text-sm"> </h3> <p class="text-[10px] text-slate-500 font-bold uppercase tracking-tighter"> </p></div></div> <button class="p-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all active:scale-90"><!></button></div> <div class="flex-1 overflow-y-auto p-4 sm:p-6 space-y-4 custom-scrollbar"><!> <!></div> <div class="p-6 border-t border-white/5 bg-slate-950/80"><button class="w-full py-3 text-xs font-black uppercase tracking-[0.2em] text-red-400/70 hover:text-red-400 border border-red-900/30 rounded-xl hover:bg-red-900/20 transition-all flex items-center justify-center gap-3 active:scale-[0.98]"><!> </button></div></aside>',1);function ir(i,e){Se(e,!0);const a=()=>He(tt,"$t",d),n=()=>He(It,"$rollHistory",d),[d,x]=at();let l=U(e,"isOpen",3,!1);var u=_a(),P=K(u);{var B=N=>{var p=ca();p.__click=function(...E){e.onClose?.apply(this,E)},S(E=>Me(p,"aria-label",E),[()=>a()("character.history.close")]),g(N,p)};j(P,N=>{l()&&N(B)})}var R=f(P,2),y=o(R),b=o(y),h=o(b),k=o(h);ot(k,{size:20,class:"text-indigo-400"}),r(h);var O=f(h,2),v=o(O),A=o(v,!0);r(v);var $=f(v,2),Z=o($);r($),r(O),r(b);var M=f(b,2);M.__click=function(...N){e.onClose?.apply(this,N)};var D=o(M);xt(D,{size:24}),r(M),r(y);var H=f(y,2),te=o(H);{var re=N=>{var p=ua(),E=o(p),oe=o(E);ot(oe,{size:32}),r(E);var ce=f(E,2),ge=o(ce,!0);r(ce),r(p),S(V=>C(ge,V),[()=>a()("character.history.none")]),g(N,p)};j(te,N=>{n().length===0&&N(re)})}var se=f(te,2);Xe(se,1,n,N=>N.id,(N,p)=>{const E=ke(()=>t(p).source?.toLowerCase());var oe=pa(),ce=o(oe),ge=f(ce,2),V=o(ge),Y=o(V),Q=o(Y),ue=o(Q,!0);r(Q);var ve=f(Q,2);{var de=m=>{var T=va(),q=o(T,!0);r(T),S(()=>C(q,t(p).charName)),g(m,T)};j(ve,m=>{t(p).charName&&t(p).charName!==t(p).source&&m(de)})}r(Y),r(V);var he=f(V,2),Pe=o(he,!0);r(he),r(ge);var be=f(ge,2),we=o(be),ae=o(we),ne=o(ae,!0);r(ae);var pe=f(ae,2);{var xe=m=>{var T=ha(),q=o(T,!0);r(T),S(()=>C(q,t(p).description)),g(m,T)};j(pe,m=>{t(p).description&&m(xe)})}r(we),r(be);var s=f(be,2);{var L=m=>{var T=ga();Xe(T,21,()=>t(p).effectsApplied,gt,(q,ie)=>{var X=fa(),J=o(X,!0);r(X),S(()=>C(J,t(ie))),g(q,X)}),r(T),g(m,T)};j(s,m=>{t(p).effectsApplied?.length>0&&m(L)})}var _=f(s,2);{var I=m=>{var T=ma(),q=o(T);{var ie=ee=>{var Re=ba();g(ee,Re)};j(q,ee=>{t(p).crit&&ee(ie)})}var X=f(q,2),J=o(X),Ce=o(J,!0);r(J);var ye=f(J,2),Oe=o(ye,!0);r(ye),r(X);var Be=f(X,2),Le=o(Be),je=o(Le,!0);r(Le);var Fe=f(Le,2),We=o(Fe),Ye=f(We);{var me=ee=>{var Re=xa();g(ee,Re)};j(Ye,ee=>{t(p).crit&&ee(me)})}r(Fe),r(Be),r(T),S((ee,Re,Ue)=>{C(Ce,ee),C(Oe,Re),C(je,Ue),_e(Fe,1,`text-3xl font-black font-mono leading-none flex items-baseline gap-1 ${t(p).crit?"text-yellow-400 drop-shadow-[0_0_10px_rgba(250,204,21,0.3)]":"text-white"}`),C(We,`${t(p).total??""} `)},[()=>a()("character.history.formula"),()=>t(p).formula||a()("character.history.fixed"),()=>a()("character.history.total")]),g(m,T)};j(_,m=>{(t(p).formula||t(p).total!==void 0)&&m(I)})}r(oe),S((m,T)=>{_e(ce,1,`absolute left-0 top-0 bottom-0 w-1 ${t(p).source==="GM"?"bg-indigo-500":"bg-emerald-500"}`),_e(Q,1,`text-[10px] px-1.5 py-0.5 rounded ${t(p).source==="GM"?"bg-indigo-500/20 text-indigo-400":"bg-emerald-500/20 text-emerald-400"} uppercase font-black tracking-widest leading-none border border-current opacity-70`),C(ue,m),C(Pe,T),C(ne,t(p).name)},[()=>a()(`character.history.source.${t(E)}`,{default:t(p).source}),()=>new Date(t(p).timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]),g(N,oe)}),r(H);var F=f(H,2),W=o(F);W.__click=function(...N){Lt.clearHistory?.apply(this,N)};var G=o(W);Ct(G,{size:16});var le=f(G);r(W),r(F),r(R),S((N,p,E)=>{_e(R,1,`h-full bg-slate-900/95 backdrop-blur-xl border-l border-white/10 transition-all duration-500 ease-out shadow-[0_0_50px_rgba(0,0,0,0.5)] flex flex-col fixed top-0 right-0 z-[100] w-full sm:w-96 ${l()?"translate-x-0":"translate-x-full"}`),C(A,N),C(Z,`${n().length??""} ${p??""}`),C(le,` ${E??""}`)},[()=>a()("character.history.title"),()=>a()("character.history.rolls_count"),()=>a()("character.history.clear")]),g(i,u),ze(),x()}Ge(["click"]);function it(i,e,a){return i>=e*a?{width:e*a,height:e}:{width:i,height:i/a}}function Ke(i,e,a,n){return{x:st(i.x,e.width,a.width,n),y:st(i.y,e.height,a.height,n)}}function st(i,e,a,n){let d=e*n/2-a/2;return n<1&&(d=a/2-e*n/2),Math.min(d,Math.max(i,-d))}function lt(i,e){return Math.sqrt(Math.pow(i.y-e.y,2)+Math.pow(i.x-e.x,2))}function wa(i,e,a,n,d,x=!0){const l=x?ya:ka,u={x:l(100,((e.width-a.width/d)/2-i.x/d)/e.width*100),y:l(100,((e.height-a.height/d)/2-i.y/d)/e.height*100),width:l(100,a.width/e.width*100/d),height:l(100,a.height/e.height*100/d)},P=l(e.naturalWidth,u.width*e.naturalWidth/100,!0),B=l(e.naturalHeight,u.height*e.naturalHeight/100,!0),y=e.naturalWidth>=e.naturalHeight*n?{width:Math.round(B*n),height:B}:{width:P,height:Math.round(P/n)},b={...y,x:l(e.naturalWidth-y.width,u.x*e.naturalWidth/100,!0),y:l(e.naturalHeight-y.height,u.y*e.naturalHeight/100,!0)};return{croppedAreaPercentages:u,croppedAreaPixels:b}}function ya(i,e,a=!1){const n=a?Math.round(e):e;return Math.min(i,Math.max(0,n))}function ka(i,e){return e}function dt(i,e){return{x:(e.x+i.x)/2,y:(e.y+i.y)/2}}var Ma=w('<div data-testid="cropper"></div>'),Ea=w('<div class="svelte-easy-crop-container svelte-1yetlj5" role="button" data-testid="container"><img class="svelte-easy-crop-image svelte-1yetlj5" alt=""/> <!></div>');function $a(i,e){Se(e,!0);let a=U(e,"crop",31,()=>Te({x:0,y:0})),n=U(e,"zoom",15,1),d=U(e,"minZoom",11,1),x=U(e,"maxZoom",11,3),l=U(e,"aspect",3,4/3),u=U(e,"cropSize",3,null),P=U(e,"cropShape",3,"rect"),B=U(e,"showGrid",3,!0),R=U(e,"zoomSpeed",3,1),y=U(e,"crossOrigin",3,null),b=U(e,"restrictPosition",3,!0),h=U(e,"tabindex",3,void 0),k=z(null),O=z(Te({width:0,height:0,naturalWidth:0,naturalHeight:0})),v=z(null),A=z(null),$=z(null),Z=z(Te({x:0,y:0})),M=z(Te({x:0,y:0})),D=z(0),H=z(null),te=z(null);vt(()=>{t($)&&t($).complete&&F(),t(v)&&(t(v).addEventListener("gesturestart",re),t(v).addEventListener("gesturechange",re))}),ht(()=>{t(v)&&(t(v).removeEventListener("gesturestart",re),t(v).removeEventListener("gesturechange",re)),se()});const re=s=>s.preventDefault(),se=()=>{typeof document<"u"&&(document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",Y),document.removeEventListener("touchmove",ce),document.removeEventListener("touchend",Y))},F=()=>{G(),be()},W=()=>u()?u().width/u().height:l(),G=()=>{t($)&&(c(O,{width:t($).width,height:t($).height,naturalWidth:t($).naturalWidth,naturalHeight:t($).naturalHeight},!0),c(k,u()?u():it(t($).width,t($).height,l()),!0)),t(v)&&c(A,t(v).getBoundingClientRect(),!0)},le=s=>({x:Number(s.clientX),y:Number(s.clientY)}),N=s=>({x:Number(s.clientX),y:Number(s.clientY)}),p=s=>{s.preventDefault(),document.addEventListener("mousemove",E),document.addEventListener("mouseup",Y),ge(le(s))},E=s=>V(le(s)),oe=s=>{s.preventDefault(),document.addEventListener("touchmove",ce,{passive:!1}),document.addEventListener("touchend",Y),s.touches.length===2?Q(s):s.touches.length===1&&ge(N(s.touches[0]))},ce=s=>{s.preventDefault(),s.touches.length===2?ue(s):s.touches.length===1&&V(N(s.touches[0]))},ge=({x:s,y:L})=>{c(Z,{x:s,y:L},!0),c(M,{x:a().x,y:a().y},!0)},V=({x:s,y:L})=>{t(H)&&window.cancelAnimationFrame(t(H)),c(H,window.requestAnimationFrame(()=>{if(s===void 0||L===void 0||!t(k))return;const _=s-t(Z).x,I=L-t(Z).y,m={x:t(M).x+_,y:t(M).y+I};a(b()?Ke(m,t(O),t(k),n()):m)}),!0)},Y=()=>{se(),be()},Q=s=>{const L=N(s.touches[0]),_=N(s.touches[1]);c(D,lt(L,_),!0),ge(dt(L,_))},ue=s=>{const L=N(s.touches[0]),_=N(s.touches[1]),I=dt(L,_);V(I),t(te)&&window.cancelAnimationFrame(t(te)),c(te,window.requestAnimationFrame(()=>{const m=lt(L,_),T=n()*(m/t(D));Pe(T,I),c(D,m,!0)}),!0)},ve=s=>{s.preventDefault();const L=le(s),_=n()-s.deltaY*R()/200;Pe(_,L)},de=({x:s,y:L})=>{if(!t(A))throw new Error("The Cropper is not mounted");return{x:t(A).width/2-(s-t(A).left),y:t(A).height/2-(L-t(A).top)}},he=({x:s,y:L})=>({x:(s+a().x)/n(),y:(L+a().y)/n()}),Pe=(s,L)=>{if(!t(k))return;const _=de(L),I=he(_);n(Math.min(x(),Math.max(s,d())));const m={x:I.x*n()-_.x,y:I.y*n()-_.y};a(b()?Ke(m,t(O),t(k),n()):m)},be=()=>{if(!t(k)||t(k).width===0)return;const s=b()?Ke(a(),t(O),t(k),n()):a(),{croppedAreaPercentages:L,croppedAreaPixels:_}=wa(s,t(O),t(k),W(),n(),b());e.oncropcomplete?.({percent:L,pixels:_})};Ze(()=>{t($)&&c(k,u()?u():it(t($).width,t($).height,l()),!0)}),Ze(()=>{n()&&be()});const we=s=>{Ze(()=>(s.addEventListener("touchstart",oe),s.addEventListener("mousedown",p),s.addEventListener("wheel",ve,{passive:!1}),()=>{s.removeEventListener("touchstart",oe),s.removeEventListener("mousedown",p),s.removeEventListener("wheel",ve)}))};var ae=Ea();Ve("resize",kt,G);var ne=o(ae);De(ne,s=>c($,s),()=>t($));var pe=f(ne,2);{var xe=s=>{var L=Ma();let _;S(()=>{_=_e(L,1,"svelte-easy-crop-area svelte-1yetlj5",null,_,{"svelte-easy-crop-round":P()==="round","svelte-easy-crop-grid":B()}),qe(L,`width: ${t(k).width??""}px; height: ${t(k).height??""}px;`)}),g(s,L)};j(pe,s=>{t(k)&&s(xe)})}r(ae),De(ae,s=>c(v,s),()=>t(v)),Ot(ae,s=>we?.(s)),S(()=>{Me(ae,"tabindex",h()),Me(ne,"src",e.image),qe(ne,`transform: translate(${a().x??""}px, ${a().y??""}px) scale(${n()??""});`),Me(ne,"crossorigin",y())}),Ve("load",ne,F),Et(ne),g(i,ae),ze()}const Aa=i=>new Promise((e,a)=>{const n=new Image;n.addEventListener("load",()=>e(n)),n.addEventListener("error",d=>a(d)),n.setAttribute("crossOrigin","anonymous"),n.src=i});function _t(i){return i*Math.PI/180}function Na(i,e,a){const n=_t(a);return{width:Math.abs(Math.cos(n)*i)+Math.abs(Math.sin(n)*e),height:Math.abs(Math.sin(n)*i)+Math.abs(Math.cos(n)*e)}}async function Pa(i,e,a=0,n={horizontal:!1,vertical:!1}){const d=await Aa(i),x=document.createElement("canvas"),l=x.getContext("2d");if(!l)return null;const u=_t(a),{width:P,height:B}=Na(d.width,d.height,a);x.width=P,x.height=B,l.translate(P/2,B/2),l.rotate(u),l.scale(n.horizontal?-1:1,n.vertical?-1:1),l.translate(-d.width/2,-d.height/2),l.drawImage(d,0,0);const R=l.getImageData(e.x,e.y,e.width,e.height);return x.width=e.width,x.height=e.height,l.putImageData(R,0,0),new Promise((y,b)=>{x.toBlob(h=>{y(h)},"image/jpeg",.8)})}var Ra=w('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> Processando...',1),Ca=w("<!> Salvar Foto",1),La=w('<div class="fixed inset-0 z-[150] flex items-center justify-center bg-black/90 p-4 animate-in fade-in duration-200" role="dialog" aria-modal="true"><div class="bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-2xl flex flex-col shadow-2xl overflow-hidden max-h-[90vh]"><div class="p-4 border-b border-slate-800 flex justify-between items-center bg-slate-950"><h3 class="font-bold text-white flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-indigo-500"></div> Editar Imagem</h3> <button class="text-slate-400 hover:text-white p-2 rounded-lg hover:bg-slate-800 transition-colors"><!></button></div> <div class="relative flex-1 bg-black min-h-[400px]"><!></div> <div class="p-4 bg-slate-950 border-t border-slate-800 space-y-4"><div class="flex items-center gap-4"><div class="flex items-center gap-2 text-slate-400 w-full px-4"><!> <input type="range" min="1" max="3" step="0.1" class="w-full accent-indigo-500 h-1 bg-slate-800 rounded-lg appearance-none cursor-pointer"/></div></div> <div class="flex justify-end gap-3 pt-2"><button class="px-6 py-2.5 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-bold transition-all text-sm border border-slate-700">Cancelar</button> <button class="px-8 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold transition-all text-sm shadow-lg shadow-indigo-900/20 flex items-center gap-2"><!></button></div></div></div></div>');function sr(i,e){Se(e,!0);let a=U(e,"isOpen",3,!1),n=U(e,"imageUrl",3,""),d=U(e,"aspectRatio",3,1),x=z(Te({x:0,y:0})),l=z(1),u=z(null),P=z(!1);async function B(){if(console.log("handleSave called",{isProcessing:t(P),pixelCrop:t(u)}),!(t(P)||!t(u))){c(P,!0);try{console.log("Calling getCroppedImg with",{imageUrl:n().substring(0,50)+"...",pixelCrop:t(u)});const h=await Pa(n(),t(u),0);console.log("getCroppedImg result:",h),h&&e.onCrop(h)}catch(h){console.error("Error in handleSave:",h)}finally{c(P,!1)}}}var R=fe(),y=K(R);{var b=h=>{var k=La(),O=o(k),v=o(O),A=f(o(v),2);A.__click=function(...E){e.onClose?.apply(this,E)};var $=o(A);xt($,{size:20}),r(A),r(v);var Z=f(v,2),M=o(Z);$a(M,{get image(){return n()},get aspect(){return d()},oncropcomplete:E=>{console.log("oncropcomplete prop data:",E),c(u,E.pixels,!0)},showGrid:!0,get crop(){return t(x)},set crop(E){c(x,E,!0)},get zoom(){return t(l)},set zoom(E){c(l,E,!0)}}),r(Z);var D=f(Z,2),H=o(D),te=o(H),re=o(te);jt(re,{size:16});var se=f(re,2);$t(se),r(te),r(H);var F=f(H,2),W=o(F);W.__click=function(...E){e.onClose?.apply(this,E)};var G=f(W,2);G.__click=B;var le=o(G);{var N=E=>{var oe=Ra();Qe(),g(E,oe)},p=E=>{var oe=Ca(),ce=K(oe);mt(ce,{size:18}),Qe(),g(E,oe)};j(le,E=>{t(P)?E(N):E(p,!1)})}r(G),r(F),r(D),r(O),r(k),S(()=>G.disabled=t(P)),Tt(se,()=>t(l),E=>c(l,E)),g(h,k)};j(y,h=>{a()&&h(b)})}g(i,R),ze()}Ge(["click"]);var Ia=w('<span class="text-[10px] text-indigo-300 uppercase font-bold mb-2 block"> </span>'),Ta=w('<div><!> <div class="flex items-center justify-between bg-black/40 rounded-xl p-1.5 border border-white/5" role="group"><button type="button" class="w-10 h-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <div class="flex flex-col items-center min-w-[3rem]"><span class="text-2xl font-black text-white leading-none tracking-tighter" data-testid="size-display"> </span></div> <button type="button" class="w-10 h-10 flex items-center justify-center bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-all active:scale-90 shadow-lg shadow-indigo-500/20 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div></div>');function lr(i,e){Se(e,!0);const a=()=>He(tt,"$t",n),[n,d]=at(),x=[.125,.5,...Array.from({length:20},(M,D)=>D+1)];function l(){const M=x.indexOf(e.value);if(M>0)e.onUpdate(x[M-1]);else if(M===-1){const D=x.slice().reverse().find(H=>H<e.value);D?e.onUpdate(D):e.onUpdate(x[0])}}function u(){const M=x.indexOf(e.value);if(M!==-1&&M<x.length-1)e.onUpdate(x[M+1]);else if(M===-1){const D=x.find(H=>H>e.value);D?e.onUpdate(D):e.onUpdate(x[x.length-1])}}function P(M){return M===.125?"1/8":M===.5?"1/2":M.toString()}var B=Ta(),R=o(B);{var y=M=>{var D=Ia(),H=o(D,!0);r(D),S(()=>C(H,e.label)),g(M,D)};j(R,M=>{e.label&&M(y)})}var b=f(R,2),h=o(b);h.__click=l;var k=o(h);pt(k,{size:18}),r(h);var O=f(h,2),v=o(O),A=o(v,!0);r(v),r(O);var $=f(O,2);$.__click=u;var Z=o($);bt(Z,{size:18}),r($),r(b),r(B),S((M,D,H,te)=>{Me(b,"aria-label",M),Me(h,"aria-label",D),h.disabled=e.value<=x[0],C(A,H),Me($,"aria-label",te),$.disabled=e.value>=x[x.length-1]},[()=>a()("common.labels.size_selector"),()=>a()("common.buttons.decrease"),()=>P(e.value),()=>a()("common.buttons.increase")]),g(i,B),ze(),d()}Ge(["click"]);export{er as A,qa as B,Ya as C,or as D,Ja as G,ir as H,sr as I,Ka as L,pt as M,Qa as R,lr as S,nr as T,ar as W,Ot as a,ot as b,Xa as c,tr as d,rr as e};
