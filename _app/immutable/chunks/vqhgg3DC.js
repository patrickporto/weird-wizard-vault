import"./DsnmJJEf.js";import"./DdC0RNGD.js";import{o as ce,u as ue,v as V,w as G,k as w,x as wt,L as yt,F as S,z as $t,R as Z,j as T,B as p,A as _,G as Ft,I as g,ad as he,y as s,t as W,T as fe,a2 as _t,b7 as ve,n as Ot}from"./DzRT0qSm.js";import{I as tt,s as et}from"./Byjcbj0b.js";import{l as rt,s as at,p as z,i as Y}from"./DV-HjJ0V.js";import{d as Ut,f as ge,s as O,j as ee,o as pe,e as Zt,r as me}from"./9QvhKPlK.js";import{s as vt,j as be,a as mt,e as Wt,$ as xe,i as _e,f as qt,r as ye}from"./DmTIwYKB.js";import{M as we,P as $e,X as re,T as Ae}from"./BJHf1IjA.js";import{x as pt,v as Me,t as Pe,b as Ce}from"./WcsszTkO.js";import{s as Le,a as Gt}from"./FHgTlLI2.js";import{b as Xt}from"./DoXFKFJ1.js";import{C as Be}from"./B42Mvk0m.js";function Ie(c,i,l){ce(()=>{var d=ue(()=>i(c,l?.())||{});if(d?.destroy)return()=>d.destroy()})}function $r(c,i){const l=rt(i,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z"}],["circle",{cx:"12",cy:"13",r:"3"}]];tt(c,at({name:"camera"},()=>l,{get iconNode(){return d},children:(f,b)=>{var u=V(),v=G(u);et(v,i,"default",{}),w(f,u)},$$slots:{default:!0}}))}function Ar(c,i){const l=rt(i,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"m15 18-6-6 6-6"}]];tt(c,at({name:"chevron-left"},()=>l,{get iconNode(){return d},children:(f,b)=>{var u=V(),v=G(u);et(v,i,"default",{}),w(f,u)},$$slots:{default:!0}}))}function Mr(c,i){const l=rt(i,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M12 6v6l4 2"}],["circle",{cx:"12",cy:"12",r:"10"}]];tt(c,at({name:"clock"},()=>l,{get iconNode(){return d},children:(f,b)=>{var u=V(),v=G(u);et(v,i,"default",{}),w(f,u)},$$slots:{default:!0}}))}function Ee(c,i){const l=rt(i,["children","$$slots","$$events","$$legacy"]);const d=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6"}],["path",{d:"M6 18h.01"}],["path",{d:"M10 14h.01"}],["path",{d:"M15 6h.01"}],["path",{d:"M18 9h.01"}]];tt(c,at({name:"dices"},()=>l,{get iconNode(){return d},children:(f,b)=>{var u=V(),v=G(u);et(v,i,"default",{}),w(f,u)},$$slots:{default:!0}}))}function Pr(c,i){const l=rt(i,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M9 10h.01"}],["path",{d:"M15 10h.01"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"}]];tt(c,at({name:"ghost"},()=>l,{get iconNode(){return d},children:(f,b)=>{var u=V(),v=G(u);et(v,i,"default",{}),w(f,u)},$$slots:{default:!0}}))}function Yt(c,i){const l=rt(i,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M12 7v5l4 2"}]];tt(c,at({name:"history"},()=>l,{get iconNode(){return d},children:(f,b)=>{var u=V(),v=G(u);et(v,i,"default",{}),w(f,u)},$$slots:{default:!0}}))}function Cr(c,i){const l=rt(i,["children","$$slots","$$events","$$legacy"]);const d=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"}]];tt(c,at({name:"layout-dashboard"},()=>l,{get iconNode(){return d},children:(f,b)=>{var u=V(),v=G(u);et(v,i,"default",{}),w(f,u)},$$slots:{default:!0}}))}function Ne(c,i){const l=rt(i,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M5 12h14"}]];tt(c,at({name:"minus"},()=>l,{get iconNode(){return d},children:(f,b)=>{var u=V(),v=G(u);et(v,i,"default",{}),w(f,u)},$$slots:{default:!0}}))}function Lr(c,i){const l=rt(i,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"m11 19-6-6"}],["path",{d:"m5 21-2-2"}],["path",{d:"m8 16-4 4"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5"}]];tt(c,at({name:"sword"},()=>l,{get iconNode(){return d},children:(f,b)=>{var u=V(),v=G(u);et(v,i,"default",{}),w(f,u)},$$slots:{default:!0}}))}function je(c,i){const l=rt(i,["children","$$slots","$$events","$$legacy"]);const d=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];tt(c,at({name:"zoom-in"},()=>l,{get iconNode(){return d},children:(f,b)=>{var u=V(),v=G(u);et(v,i,"default",{}),w(f,u)},$$slots:{default:!0}}))}var De=T('<div class="space-y-6"><div class="bg-slate-900/50 p-6 rounded-2xl border border-white/5 text-center shadow-inner relative overflow-hidden group"><div class="absolute inset-0 bg-indigo-500/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"></div> <div class="flex justify-center items-center gap-8 mb-4 relative z-10"><button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-red-500/20 text-slate-300 hover:text-red-400 border border-slate-700 hover:border-red-500/30 flex items-center justify-center transition-all active:scale-90 shadow-lg" aria-label="Diminuir"><!></button> <div class="flex flex-col items-center min-w-[100px]"><span> </span></div> <button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-green-500/20 text-slate-300 hover:text-green-400 border border-slate-700 hover:border-green-500/30 flex items-center justify-center transition-all active:scale-90 shadow-lg" aria-label="Aumentar"><!></button></div> <div class="text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] relative z-10"> </div></div> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-4 rounded-xl flex items-center justify-center gap-3 shadow-lg shadow-indigo-600/20 transition-all active:scale-[0.98] uppercase tracking-widest text-sm"><!> </button></div>');function Br(c,i){wt(i,!0);let l=z(i,"initialModifier",3,0),d=z(i,"label",3,"Boons / Banes"),f=z(i,"rollLabel",3,"ROLAR"),b=Z(0);yt(()=>{i.isOpen&&S(b,l())});var u=V(),v=G(u);{var E=R=>{we(R,{get isOpen(){return i.isOpen},get onClose(){return i.onClose},get title(){return i.title},children:(j,M)=>{var $=De(),B=p($),I=_(p(B),2),D=p(I);D.__click=()=>Ft(b,-1);var m=p(D);Ne(m,{size:24}),g(D);var o=_(D,2),n=p(o),e=p(n);g(n),g(o);var t=_(o,2);t.__click=()=>Ft(b);var a=p(t);$e(a,{size:24}),g(t),g(I);var r=_(I,2),A=p(r,!0);g(r),g(B);var N=_(B,2);ge(N,()=>i.children??he);var U=_(N,2);U.__click=()=>i.onRoll(s(b));var q=p(U);Ee(q,{size:18});var k=_(q);g(U),g($),W(()=>{vt(n,1,`text-5xl font-black ${s(b)>0?"text-green-400":s(b)<0?"text-red-400":"text-slate-500"} tabular-nums drop-shadow-sm transition-colors duration-300`),O(e,`${s(b)>0?"+":""}${s(b)??""}`),O(A,d()),O(k,` ${f()??""}`)}),w(j,$)},$$slots:{default:!0}})};Y(v,R=>{i.isOpen&&R(E)})}w(c,u),$t()}Ut(["click"]);var St={exports:{}},Vt;function Se(){return Vt||(Vt=1,(function(c,i){(function(l){c.exports=l()})(function(l){var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function f(o,n){var e=o[0],t=o[1],a=o[2],r=o[3];e+=(t&a|~t&r)+n[0]-680876936|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&a)+n[1]-389564586|0,r=(r<<12|r>>>20)+e|0,a+=(r&e|~r&t)+n[2]+606105819|0,a=(a<<17|a>>>15)+r|0,t+=(a&r|~a&e)+n[3]-1044525330|0,t=(t<<22|t>>>10)+a|0,e+=(t&a|~t&r)+n[4]-176418897|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&a)+n[5]+1200080426|0,r=(r<<12|r>>>20)+e|0,a+=(r&e|~r&t)+n[6]-1473231341|0,a=(a<<17|a>>>15)+r|0,t+=(a&r|~a&e)+n[7]-45705983|0,t=(t<<22|t>>>10)+a|0,e+=(t&a|~t&r)+n[8]+1770035416|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&a)+n[9]-1958414417|0,r=(r<<12|r>>>20)+e|0,a+=(r&e|~r&t)+n[10]-42063|0,a=(a<<17|a>>>15)+r|0,t+=(a&r|~a&e)+n[11]-1990404162|0,t=(t<<22|t>>>10)+a|0,e+=(t&a|~t&r)+n[12]+1804603682|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&a)+n[13]-40341101|0,r=(r<<12|r>>>20)+e|0,a+=(r&e|~r&t)+n[14]-1502002290|0,a=(a<<17|a>>>15)+r|0,t+=(a&r|~a&e)+n[15]+1236535329|0,t=(t<<22|t>>>10)+a|0,e+=(t&r|a&~r)+n[1]-165796510|0,e=(e<<5|e>>>27)+t|0,r+=(e&a|t&~a)+n[6]-1069501632|0,r=(r<<9|r>>>23)+e|0,a+=(r&t|e&~t)+n[11]+643717713|0,a=(a<<14|a>>>18)+r|0,t+=(a&e|r&~e)+n[0]-373897302|0,t=(t<<20|t>>>12)+a|0,e+=(t&r|a&~r)+n[5]-701558691|0,e=(e<<5|e>>>27)+t|0,r+=(e&a|t&~a)+n[10]+38016083|0,r=(r<<9|r>>>23)+e|0,a+=(r&t|e&~t)+n[15]-660478335|0,a=(a<<14|a>>>18)+r|0,t+=(a&e|r&~e)+n[4]-405537848|0,t=(t<<20|t>>>12)+a|0,e+=(t&r|a&~r)+n[9]+568446438|0,e=(e<<5|e>>>27)+t|0,r+=(e&a|t&~a)+n[14]-1019803690|0,r=(r<<9|r>>>23)+e|0,a+=(r&t|e&~t)+n[3]-187363961|0,a=(a<<14|a>>>18)+r|0,t+=(a&e|r&~e)+n[8]+1163531501|0,t=(t<<20|t>>>12)+a|0,e+=(t&r|a&~r)+n[13]-1444681467|0,e=(e<<5|e>>>27)+t|0,r+=(e&a|t&~a)+n[2]-51403784|0,r=(r<<9|r>>>23)+e|0,a+=(r&t|e&~t)+n[7]+1735328473|0,a=(a<<14|a>>>18)+r|0,t+=(a&e|r&~e)+n[12]-1926607734|0,t=(t<<20|t>>>12)+a|0,e+=(t^a^r)+n[5]-378558|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^a)+n[8]-2022574463|0,r=(r<<11|r>>>21)+e|0,a+=(r^e^t)+n[11]+1839030562|0,a=(a<<16|a>>>16)+r|0,t+=(a^r^e)+n[14]-35309556|0,t=(t<<23|t>>>9)+a|0,e+=(t^a^r)+n[1]-1530992060|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^a)+n[4]+1272893353|0,r=(r<<11|r>>>21)+e|0,a+=(r^e^t)+n[7]-155497632|0,a=(a<<16|a>>>16)+r|0,t+=(a^r^e)+n[10]-1094730640|0,t=(t<<23|t>>>9)+a|0,e+=(t^a^r)+n[13]+681279174|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^a)+n[0]-358537222|0,r=(r<<11|r>>>21)+e|0,a+=(r^e^t)+n[3]-722521979|0,a=(a<<16|a>>>16)+r|0,t+=(a^r^e)+n[6]+76029189|0,t=(t<<23|t>>>9)+a|0,e+=(t^a^r)+n[9]-640364487|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^a)+n[12]-421815835|0,r=(r<<11|r>>>21)+e|0,a+=(r^e^t)+n[15]+530742520|0,a=(a<<16|a>>>16)+r|0,t+=(a^r^e)+n[2]-995338651|0,t=(t<<23|t>>>9)+a|0,e+=(a^(t|~r))+n[0]-198630844|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~a))+n[7]+1126891415|0,r=(r<<10|r>>>22)+e|0,a+=(e^(r|~t))+n[14]-1416354905|0,a=(a<<15|a>>>17)+r|0,t+=(r^(a|~e))+n[5]-57434055|0,t=(t<<21|t>>>11)+a|0,e+=(a^(t|~r))+n[12]+1700485571|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~a))+n[3]-1894986606|0,r=(r<<10|r>>>22)+e|0,a+=(e^(r|~t))+n[10]-1051523|0,a=(a<<15|a>>>17)+r|0,t+=(r^(a|~e))+n[1]-2054922799|0,t=(t<<21|t>>>11)+a|0,e+=(a^(t|~r))+n[8]+1873313359|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~a))+n[15]-30611744|0,r=(r<<10|r>>>22)+e|0,a+=(e^(r|~t))+n[6]-1560198380|0,a=(a<<15|a>>>17)+r|0,t+=(r^(a|~e))+n[13]+1309151649|0,t=(t<<21|t>>>11)+a|0,e+=(a^(t|~r))+n[4]-145523070|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~a))+n[11]-1120210379|0,r=(r<<10|r>>>22)+e|0,a+=(e^(r|~t))+n[2]+718787259|0,a=(a<<15|a>>>17)+r|0,t+=(r^(a|~e))+n[9]-343485551|0,t=(t<<21|t>>>11)+a|0,o[0]=e+o[0]|0,o[1]=t+o[1]|0,o[2]=a+o[2]|0,o[3]=r+o[3]|0}function b(o){var n=[],e;for(e=0;e<64;e+=4)n[e>>2]=o.charCodeAt(e)+(o.charCodeAt(e+1)<<8)+(o.charCodeAt(e+2)<<16)+(o.charCodeAt(e+3)<<24);return n}function u(o){var n=[],e;for(e=0;e<64;e+=4)n[e>>2]=o[e]+(o[e+1]<<8)+(o[e+2]<<16)+(o[e+3]<<24);return n}function v(o){var n=o.length,e=[1732584193,-271733879,-1732584194,271733878],t,a,r,A,N,U;for(t=64;t<=n;t+=64)f(e,b(o.substring(t-64,t)));for(o=o.substring(t-64),a=o.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<a;t+=1)r[t>>2]|=o.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(f(e,r),t=0;t<16;t+=1)r[t]=0;return A=n*8,A=A.toString(16).match(/(.*?)(.{0,8})$/),N=parseInt(A[2],16),U=parseInt(A[1],16)||0,r[14]=N,r[15]=U,f(e,r),e}function E(o){var n=o.length,e=[1732584193,-271733879,-1732584194,271733878],t,a,r,A,N,U;for(t=64;t<=n;t+=64)f(e,u(o.subarray(t-64,t)));for(o=t-64<n?o.subarray(t-64):new Uint8Array(0),a=o.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<a;t+=1)r[t>>2]|=o[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(f(e,r),t=0;t<16;t+=1)r[t]=0;return A=n*8,A=A.toString(16).match(/(.*?)(.{0,8})$/),N=parseInt(A[2],16),U=parseInt(A[1],16)||0,r[14]=N,r[15]=U,f(e,r),e}function R(o){var n="",e;for(e=0;e<4;e+=1)n+=d[o>>e*8+4&15]+d[o>>e*8&15];return n}function j(o){var n;for(n=0;n<o.length;n+=1)o[n]=R(o[n]);return o.join("")}j(v("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function o(n,e){return n=n|0||0,n<0?Math.max(n+e,0):Math.min(n,e)}ArrayBuffer.prototype.slice=function(n,e){var t=this.byteLength,a=o(n,t),r=t,A,N,U,q;return e!==l&&(r=o(e,t)),a>r?new ArrayBuffer(0):(A=r-a,N=new ArrayBuffer(A),U=new Uint8Array(N),q=new Uint8Array(this,a,A),U.set(q),N)}})();function M(o){return/[\u0080-\uFFFF]/.test(o)&&(o=unescape(encodeURIComponent(o))),o}function $(o,n){var e=o.length,t=new ArrayBuffer(e),a=new Uint8Array(t),r;for(r=0;r<e;r+=1)a[r]=o.charCodeAt(r);return n?a:t}function B(o){return String.fromCharCode.apply(null,new Uint8Array(o))}function I(o,n,e){var t=new Uint8Array(o.byteLength+n.byteLength);return t.set(new Uint8Array(o)),t.set(new Uint8Array(n),o.byteLength),t}function D(o){var n=[],e=o.length,t;for(t=0;t<e-1;t+=2)n.push(parseInt(o.substr(t,2),16));return String.fromCharCode.apply(String,n)}function m(){this.reset()}return m.prototype.append=function(o){return this.appendBinary(M(o)),this},m.prototype.appendBinary=function(o){this._buff+=o,this._length+=o.length;var n=this._buff.length,e;for(e=64;e<=n;e+=64)f(this._hash,b(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},m.prototype.end=function(o){var n=this._buff,e=n.length,t,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r;for(t=0;t<e;t+=1)a[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(a,e),r=j(this._hash),o&&(r=D(r)),this.reset(),r},m.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},m.prototype.setState=function(o){return this._buff=o.buff,this._length=o.length,this._hash=o.hash,this},m.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},m.prototype._finish=function(o,n){var e=n,t,a,r;if(o[e>>2]|=128<<(e%4<<3),e>55)for(f(this._hash,o),e=0;e<16;e+=1)o[e]=0;t=this._length*8,t=t.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(t[2],16),r=parseInt(t[1],16)||0,o[14]=a,o[15]=r,f(this._hash,o)},m.hash=function(o,n){return m.hashBinary(M(o),n)},m.hashBinary=function(o,n){var e=v(o),t=j(e);return n?D(t):t},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(o){var n=I(this._buff.buffer,o),e=n.length,t;for(this._length+=o.byteLength,t=64;t<=e;t+=64)f(this._hash,u(n.subarray(t-64,t)));return this._buff=t-64<e?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(o){var n=this._buff,e=n.length,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a,r;for(a=0;a<e;a+=1)t[a>>2]|=n[a]<<(a%4<<3);return this._finish(t,e),r=j(this._hash),o&&(r=D(r)),this.reset(),r},m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.getState=function(){var o=m.prototype.getState.call(this);return o.buff=B(o.buff),o},m.ArrayBuffer.prototype.setState=function(o){return o.buff=$(o.buff,!0),m.prototype.setState.call(this,o)},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.hash=function(o,n){var e=E(new Uint8Array(o)),t=j(e);return n?D(t):t},m})})(St)),St.exports}var ze=Se();const Ue=be(ze),kt=5;async function Ir(c){if(c.size>kt*1024*1024)throw new Error(`Imagem muito grande. Máximo de ${kt}MB.`);const i=await c.arrayBuffer(),l=Ue.ArrayBuffer.hash(i);if(pt.has(l))return l;const d=new FileReader,b=await new Promise((u,v)=>{d.onload=()=>u(d.result),d.onerror=v,d.readAsDataURL(c)});return pt.set(l,b),l}function He(c,i){if(!c)return i(void 0),()=>{};i(pt.get(c));const l=d=>{const f=pt.get(c);i(f)};return pt.observe(l),()=>{pt.unobserve(l)}}var Te=T('<img class="w-full h-full object-cover rounded-full border border-white/10 shadow-sm"/>'),Re=T('<div class="w-full h-full bg-slate-800 rounded-full border border-white/10 flex items-center justify-center font-black text-slate-500 shadow-sm"> </div>'),Fe=T("<div><!></div>");function Er(c,i){wt(i,!0);let l=z(i,"size",3,"md"),d=z(i,"fallbackText",3,"?"),f=Z(void 0),b;yt(()=>{b&&b(),i.hash?b=He(i.hash,M=>{S(f,M,!0)}):S(f,void 0)}),ee(()=>{b&&b()});const u={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-16 h-16 text-lg",xl:"w-20 h-20 text-xl",custom:"w-full h-full"};var v=Fe(),E=p(v);{var R=M=>{var $=Te();W(()=>{mt($,"src",s(f)),mt($,"alt",i.alt)}),w(M,$)},j=M=>{var $=Re(),B=p($,!0);g($),W(()=>O(B,d())),w(M,$)};Y(E,M=>{s(f)?M(R):M(j,!1)})}g(v),W(()=>vt(v,1,`${u[l()]??""} relative flex-shrink-0`)),w(c,v),$t()}var Oe=T('<div class="fixed inset-0 bg-black/50 z-[90] lg:hidden backdrop-blur-sm" role="button" tabindex="-1"></div>'),Ze=T('<div class="flex flex-col items-center justify-center h-full text-slate-600 opacity-50"><div class="w-16 h-16 border-2 border-dashed border-slate-800 rounded-full flex items-center justify-center mb-4"><!></div> <p class="text-sm font-bold uppercase tracking-widest italic"> </p></div>'),We=T('<span class="text-[10px] text-white/50 font-black uppercase tracking-tighter"> </span>'),qe=T('<div class="text-[10px] text-slate-400 font-medium italic mt-1 leading-relaxed opacity-80 whitespace-pre-wrap"> </div>'),Ge=T('<span class="text-[8px] font-black uppercase tracking-widest bg-indigo-500/10 text-indigo-300 px-2 py-0.5 rounded-full border border-indigo-500/20"> </span>'),Xe=T('<div class="flex flex-wrap gap-1 mb-3"></div>'),Ye=T('<div class="absolute inset-0 bg-yellow-400/5 animate-pulse"></div>'),Ve=T('<span class="text-[10px] animate-bounce">✨</span>'),ke=T('<div class="relative bg-black/40 rounded-xl p-3 flex justify-between items-center border border-white/5 group-hover:border-white/10 transition-colors overflow-hidden"><!> <div class="flex flex-col"><span class="text-[10px] text-slate-500 font-black uppercase tracking-widest mb-0.5"> </span> <div class="text-xs font-mono text-indigo-300 font-bold"> </div></div> <div class="flex flex-col items-end"><span class="text-[10px] text-slate-500 font-black uppercase tracking-widest mb-0.5"> </span> <div> <!></div></div></div>'),Ke=T('<div class="relative bg-slate-800/40 hover:bg-slate-800/60 transition-colors rounded-2xl border border-white/5 p-4 shadow-xl overflow-hidden group animate-in slide-in-from-right-8 duration-300"><div></div> <div class="flex justify-between items-start mb-3"><div class="flex flex-col"><div class="flex items-center gap-2"><span> </span> <!></div></div> <span class="text-[9px] text-slate-500 font-black tracking-widest uppercase"> </span></div> <div class="flex items-center gap-3 mb-2"><div class="flex-1"><div class="font-black text-white text-sm uppercase tracking-tight leading-snug"> </div> <!></div></div> <!> <!></div>'),Je=T('<!> <aside><div class="px-6 py-5 border-b border-white/5 flex justify-between items-center bg-slate-950/50"><div class="flex items-center gap-3"><div class="p-2 bg-indigo-500/10 rounded-lg border border-indigo-500/20"><!></div> <div><h3 class="font-black text-white uppercase tracking-widest text-sm"> </h3> <p class="text-[10px] text-slate-500 font-bold uppercase tracking-tighter"> </p></div></div> <button class="p-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all active:scale-90"><!></button></div> <div class="flex-1 overflow-y-auto p-4 sm:p-6 space-y-4 custom-scrollbar"><!> <!></div> <div class="p-6 border-t border-white/5 bg-slate-950/80"><button class="w-full py-3 text-xs font-black uppercase tracking-[0.2em] text-red-400/70 hover:text-red-400 border border-red-900/30 rounded-xl hover:bg-red-900/20 transition-all flex items-center justify-center gap-3 active:scale-[0.98]"><!> </button></div></aside>',1);function Nr(c,i){wt(i,!0);const l=()=>Gt(xe,"$t",f),d=()=>Gt(Pe,"$rollHistory",f),[f,b]=Le();let u=z(i,"isOpen",3,!1);var v=Je(),E=G(v);{var R=P=>{var x=Oe();x.__click=function(...y){i.onClose?.apply(this,y)},W(y=>mt(x,"aria-label",y),[()=>l()("character.history.close")]),w(P,x)};Y(E,P=>{u()&&P(R)})}var j=_(E,2),M=p(j),$=p(M),B=p($),I=p(B);Yt(I,{size:20,class:"text-indigo-400"}),g(B);var D=_(B,2),m=p(D),o=p(m,!0);g(m);var n=_(m,2),e=p(n);g(n),g(D),g($);var t=_($,2);t.__click=function(...P){i.onClose?.apply(this,P)};var a=p(t);re(a,{size:24}),g(t),g(M);var r=_(M,2),A=p(r);{var N=P=>{var x=Ze(),y=p(x),X=p(y);Yt(X,{size:32}),g(y);var J=_(y,2),nt=p(J,!0);g(J),g(x),W(it=>O(nt,it),[()=>l()("character.history.none")]),w(P,x)};Y(A,P=>{d().length===0&&P(N)})}var U=_(A,2);Wt(U,1,d,P=>P.id,(P,x)=>{const y=fe(()=>s(x).source?.toLowerCase().replace("ação","attribute").replace("consumível","item").replace("magia","spell").replace("dano","damage").replace("ataque","attack").replace("sorte","luck").replace("talento","talent"));var X=Ke(),J=p(X),nt=_(J,2),it=p(nt),ut=p(it),gt=p(ut),Lt=p(gt,!0);g(gt);var At=_(gt,2);{var Bt=L=>{var F=We(),dt=p(F,!0);g(F),W(()=>O(dt,s(x).charName)),w(L,F)};Y(At,L=>{s(x).charName&&s(x).charName!==s(x).source&&L(Bt)})}g(ut),g(it);var Mt=_(it,2),Pt=p(Mt,!0);g(Mt),g(nt);var ht=_(nt,2),Ct=p(ht),Q=p(Ct),ot=p(Q,!0);g(Q);var It=_(Q,2);{var Et=L=>{var F=qe(),dt=p(F,!0);g(F),W(()=>O(dt,s(x).description)),w(L,F)};Y(It,L=>{s(x).description&&L(Et)})}g(Ct),g(ht);var h=_(ht,2);{var C=L=>{var F=Xe();Wt(F,21,()=>s(x).effectsApplied,_e,(dt,Nt)=>{var ft=Ge(),bt=p(ft,!0);g(ft),W(()=>O(bt,s(Nt))),w(dt,ft)}),g(F),w(L,F)};Y(h,L=>{s(x).effectsApplied?.length>0&&L(C)})}var H=_(h,2);{var st=L=>{var F=ke(),dt=p(F);{var Nt=lt=>{var xt=Ye();w(lt,xt)};Y(dt,lt=>{s(x).crit&&lt(Nt)})}var ft=_(dt,2),bt=p(ft),ne=p(bt,!0);g(bt);var Ht=_(bt,2),ie=p(Ht,!0);g(Ht),g(ft);var Tt=_(ft,2),jt=p(Tt),oe=p(jt,!0);g(jt);var Dt=_(jt,2),Rt=p(Dt),se=_(Rt);{var le=lt=>{var xt=Ve();w(lt,xt)};Y(se,lt=>{s(x).crit&&lt(le)})}g(Dt),g(Tt),g(F),W((lt,xt,de)=>{O(ne,lt),O(ie,xt),O(oe,de),vt(Dt,1,`text-3xl font-black font-mono leading-none flex items-baseline gap-1 ${s(x).crit?"text-yellow-400 drop-shadow-[0_0_10px_rgba(250,204,21,0.3)]":"text-white"}`),O(Rt,`${s(x).total??""} `)},[()=>l()("character.history.formula"),()=>s(x).formula||l()("character.history.fixed"),()=>l()("character.history.total")]),w(L,F)};Y(H,L=>{(s(x).formula||s(x).total!==void 0)&&L(st)})}g(X),W((L,F)=>{vt(J,1,`absolute left-0 top-0 bottom-0 w-1 ${s(x).source==="GM"?"bg-indigo-500":"bg-emerald-500"}`),vt(gt,1,`text-[10px] px-1.5 py-0.5 rounded ${s(x).source==="GM"?"bg-indigo-500/20 text-indigo-400":"bg-emerald-500/20 text-emerald-400"} uppercase font-black tracking-widest leading-none border border-current opacity-70`),O(Lt,L),O(Pt,F),O(ot,s(x).name)},[()=>l()(`character.history.source.${s(y)}`,{default:s(x).source}),()=>new Date(s(x).timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]),w(P,X)}),g(r);var q=_(r,2),k=p(q);k.__click=function(...P){Me.clearHistory?.apply(this,P)};var K=p(k);Ae(K,{size:16});var ct=_(K);g(k),g(q),g(j),W((P,x,y)=>{vt(j,1,`fixed top-0 right-0 h-full w-full sm:w-96 bg-slate-900/95 backdrop-blur-xl border-l border-white/10 z-[100] transition-transform duration-500 ease-out shadow-[0_0_50px_rgba(0,0,0,0.5)] flex flex-col ${u()?"translate-x-0":"translate-x-full"}`),O(o,P),O(e,`${d().length??""} ${x??""}`),O(ct,` ${y??""}`)},[()=>l()("character.history.title"),()=>l()("character.history.rolls_count"),()=>l()("character.history.clear")]),w(c,v),$t(),b()}Ut(["click"]);function Kt(c,i,l){return c>=i*l?{width:i*l,height:i}:{width:c,height:c/l}}function zt(c,i,l,d){return{x:Jt(c.x,i.width,l.width,d),y:Jt(c.y,i.height,l.height,d)}}function Jt(c,i,l,d){let f=i*d/2-l/2;return d<1&&(f=l/2-i*d/2),Math.min(f,Math.max(c,-f))}function Qt(c,i){return Math.sqrt(Math.pow(c.y-i.y,2)+Math.pow(c.x-i.x,2))}function Qe(c,i,l,d,f,b=!0){const u=b?tr:er,v={x:u(100,((i.width-l.width/f)/2-c.x/f)/i.width*100),y:u(100,((i.height-l.height/f)/2-c.y/f)/i.height*100),width:u(100,l.width/i.width*100/f),height:u(100,l.height/i.height*100/f)},E=u(i.naturalWidth,v.width*i.naturalWidth/100,!0),R=u(i.naturalHeight,v.height*i.naturalHeight/100,!0),M=i.naturalWidth>=i.naturalHeight*d?{width:Math.round(R*d),height:R}:{width:E,height:Math.round(E/d)},$={...M,x:u(i.naturalWidth-M.width,v.x*i.naturalWidth/100,!0),y:u(i.naturalHeight-M.height,v.y*i.naturalHeight/100,!0)};return{croppedAreaPercentages:v,croppedAreaPixels:$}}function tr(c,i,l=!1){const d=l?Math.round(i):i;return Math.min(c,Math.max(0,d))}function er(c,i){return i}function te(c,i){return{x:(i.x+c.x)/2,y:(i.y+c.y)/2}}var rr=T('<div data-testid="cropper"></div>'),ar=T('<div class="svelte-easy-crop-container svelte-1yetlj5" role="button" data-testid="container"><img class="svelte-easy-crop-image svelte-1yetlj5" alt=""/> <!></div>');function nr(c,i){wt(i,!0);let l=z(i,"crop",31,()=>_t({x:0,y:0})),d=z(i,"zoom",15,1),f=z(i,"minZoom",11,1),b=z(i,"maxZoom",11,3),u=z(i,"aspect",3,4/3),v=z(i,"cropSize",3,null),E=z(i,"cropShape",3,"rect"),R=z(i,"showGrid",3,!0),j=z(i,"zoomSpeed",3,1),M=z(i,"crossOrigin",3,null),$=z(i,"restrictPosition",3,!0),B=z(i,"tabindex",3,void 0),I=Z(null),D=Z(_t({width:0,height:0,naturalWidth:0,naturalHeight:0})),m=Z(null),o=Z(null),n=Z(null),e=Z(_t({x:0,y:0})),t=Z(_t({x:0,y:0})),a=Z(0),r=Z(null),A=Z(null);pe(()=>{s(n)&&s(n).complete&&q(),s(m)&&(s(m).addEventListener("gesturestart",N),s(m).addEventListener("gesturechange",N))}),ee(()=>{s(m)&&(s(m).removeEventListener("gesturestart",N),s(m).removeEventListener("gesturechange",N)),U()});const N=h=>h.preventDefault(),U=()=>{typeof document<"u"&&(document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",ut),document.removeEventListener("touchmove",J),document.removeEventListener("touchend",ut))},q=()=>{K(),ht()},k=()=>v()?v().width/v().height:u(),K=()=>{s(n)&&(S(D,{width:s(n).width,height:s(n).height,naturalWidth:s(n).naturalWidth,naturalHeight:s(n).naturalHeight},!0),S(I,v()?v():Kt(s(n).width,s(n).height,u()),!0)),s(m)&&S(o,s(m).getBoundingClientRect(),!0)},ct=h=>({x:Number(h.clientX),y:Number(h.clientY)}),P=h=>({x:Number(h.clientX),y:Number(h.clientY)}),x=h=>{h.preventDefault(),document.addEventListener("mousemove",y),document.addEventListener("mouseup",ut),nt(ct(h))},y=h=>it(ct(h)),X=h=>{h.preventDefault(),document.addEventListener("touchmove",J,{passive:!1}),document.addEventListener("touchend",ut),h.touches.length===2?gt(h):h.touches.length===1&&nt(P(h.touches[0]))},J=h=>{h.preventDefault(),h.touches.length===2?Lt(h):h.touches.length===1&&it(P(h.touches[0]))},nt=({x:h,y:C})=>{S(e,{x:h,y:C},!0),S(t,{x:l().x,y:l().y},!0)},it=({x:h,y:C})=>{s(r)&&window.cancelAnimationFrame(s(r)),S(r,window.requestAnimationFrame(()=>{if(h===void 0||C===void 0||!s(I))return;const H=h-s(e).x,st=C-s(e).y,L={x:s(t).x+H,y:s(t).y+st};l($()?zt(L,s(D),s(I),d()):L)}),!0)},ut=()=>{U(),ht()},gt=h=>{const C=P(h.touches[0]),H=P(h.touches[1]);S(a,Qt(C,H),!0),nt(te(C,H))},Lt=h=>{const C=P(h.touches[0]),H=P(h.touches[1]),st=te(C,H);it(st),s(A)&&window.cancelAnimationFrame(s(A)),S(A,window.requestAnimationFrame(()=>{const L=Qt(C,H),F=d()*(L/s(a));Pt(F,st),S(a,L,!0)}),!0)},At=h=>{h.preventDefault();const C=ct(h),H=d()-h.deltaY*j()/200;Pt(H,C)},Bt=({x:h,y:C})=>{if(!s(o))throw new Error("The Cropper is not mounted");return{x:s(o).width/2-(h-s(o).left),y:s(o).height/2-(C-s(o).top)}},Mt=({x:h,y:C})=>({x:(h+l().x)/d(),y:(C+l().y)/d()}),Pt=(h,C)=>{if(!s(I))return;const H=Bt(C),st=Mt(H);d(Math.min(b(),Math.max(h,f())));const L={x:st.x*d()-H.x,y:st.y*d()-H.y};l($()?zt(L,s(D),s(I),d()):L)},ht=()=>{if(!s(I)||s(I).width===0)return;const h=$()?zt(l(),s(D),s(I),d()):l(),{croppedAreaPercentages:C,croppedAreaPixels:H}=Qe(h,s(D),s(I),k(),d(),$());i.oncropcomplete?.({percent:C,pixels:H})};yt(()=>{s(n)&&S(I,v()?v():Kt(s(n).width,s(n).height,u()),!0)}),yt(()=>{d()&&ht()});const Ct=h=>{yt(()=>(h.addEventListener("touchstart",X),h.addEventListener("mousedown",x),h.addEventListener("wheel",At,{passive:!1}),()=>{h.removeEventListener("touchstart",X),h.removeEventListener("mousedown",x),h.removeEventListener("wheel",At)}))};var Q=ar();Zt("resize",ve,K);var ot=p(Q);Xt(ot,h=>S(n,h),()=>s(n));var It=_(ot,2);{var Et=h=>{var C=rr();let H;W(()=>{H=vt(C,1,"svelte-easy-crop-area svelte-1yetlj5",null,H,{"svelte-easy-crop-round":E()==="round","svelte-easy-crop-grid":R()}),qt(C,`width: ${s(I).width??""}px; height: ${s(I).height??""}px;`)}),w(h,C)};Y(It,h=>{s(I)&&h(Et)})}g(Q),Xt(Q,h=>S(m,h),()=>s(m)),Ie(Q,h=>Ct?.(h)),W(()=>{mt(Q,"tabindex",B()),mt(ot,"src",i.image),qt(ot,`transform: translate(${l().x??""}px, ${l().y??""}px) scale(${d()??""});`),mt(ot,"crossorigin",M())}),Zt("load",ot,q),me(ot),w(c,Q),$t()}const ir=c=>new Promise((i,l)=>{const d=new Image;d.addEventListener("load",()=>i(d)),d.addEventListener("error",f=>l(f)),d.setAttribute("crossOrigin","anonymous"),d.src=c});function ae(c){return c*Math.PI/180}function or(c,i,l){const d=ae(l);return{width:Math.abs(Math.cos(d)*c)+Math.abs(Math.sin(d)*i),height:Math.abs(Math.sin(d)*c)+Math.abs(Math.cos(d)*i)}}async function sr(c,i,l=0,d={horizontal:!1,vertical:!1}){const f=await ir(c),b=document.createElement("canvas"),u=b.getContext("2d");if(!u)return null;const v=ae(l),{width:E,height:R}=or(f.width,f.height,l);b.width=E,b.height=R,u.translate(E/2,R/2),u.rotate(v),u.scale(d.horizontal?-1:1,d.vertical?-1:1),u.translate(-f.width/2,-f.height/2),u.drawImage(f,0,0);const j=u.getImageData(i.x,i.y,i.width,i.height);return b.width=i.width,b.height=i.height,u.putImageData(j,0,0),new Promise((M,$)=>{b.toBlob(B=>{M(B)},"image/jpeg",.8)})}var lr=T('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> Processando...',1),dr=T("<!> Salvar Foto",1),cr=T('<div class="fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4 animate-in fade-in duration-200" role="dialog" aria-modal="true"><div class="bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-2xl flex flex-col shadow-2xl overflow-hidden max-h-[90vh]"><div class="p-4 border-b border-slate-800 flex justify-between items-center bg-slate-950"><h3 class="font-bold text-white flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-indigo-500"></div> Editar Imagem</h3> <button class="text-slate-400 hover:text-white p-2 rounded-lg hover:bg-slate-800 transition-colors"><!></button></div> <div class="relative flex-1 bg-black min-h-[400px]"><!></div> <div class="p-4 bg-slate-950 border-t border-slate-800 space-y-4"><div class="flex items-center gap-4"><div class="flex items-center gap-2 text-slate-400 w-full px-4"><!> <input type="range" min="1" max="3" step="0.1" class="w-full accent-indigo-500 h-1 bg-slate-800 rounded-lg appearance-none cursor-pointer"/></div></div> <div class="flex justify-end gap-3 pt-2"><button class="px-6 py-2.5 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-bold transition-all text-sm border border-slate-700">Cancelar</button> <button class="px-8 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold transition-all text-sm shadow-lg shadow-indigo-900/20 flex items-center gap-2"><!></button></div></div></div></div>');function jr(c,i){wt(i,!0);let l=z(i,"isOpen",3,!1),d=z(i,"imageUrl",3,""),f=z(i,"aspectRatio",3,1),b=Z(_t({x:0,y:0})),u=Z(1),v=Z(null),E=Z(!1);async function R(){if(console.log("handleSave called",{isProcessing:s(E),pixelCrop:s(v)}),!(s(E)||!s(v))){S(E,!0);try{console.log("Calling getCroppedImg with",{imageUrl:d().substring(0,50)+"...",pixelCrop:s(v)});const B=await sr(d(),s(v),0);console.log("getCroppedImg result:",B),B&&i.onCrop(B)}catch(B){console.error("Error in handleSave:",B)}finally{S(E,!1)}}}var j=V(),M=G(j);{var $=B=>{var I=cr(),D=p(I),m=p(D),o=_(p(m),2);o.__click=function(...y){i.onClose?.apply(this,y)};var n=p(o);re(n,{size:20}),g(o),g(m);var e=_(m,2),t=p(e);nr(t,{get image(){return d()},get aspect(){return f()},oncropcomplete:y=>{console.log("oncropcomplete prop data:",y),S(v,y.pixels,!0)},showGrid:!0,get crop(){return s(b)},set crop(y){S(b,y,!0)},get zoom(){return s(u)},set zoom(y){S(u,y,!0)}}),g(e);var a=_(e,2),r=p(a),A=p(r),N=p(A);je(N,{size:16});var U=_(N,2);ye(U),g(A),g(r);var q=_(r,2),k=p(q);k.__click=function(...y){i.onClose?.apply(this,y)};var K=_(k,2);K.__click=R;var ct=p(K);{var P=y=>{var X=lr();Ot(),w(y,X)},x=y=>{var X=dr(),J=G(X);Be(J,{size:18}),Ot(),w(y,X)};Y(ct,y=>{s(E)?y(P):y(x,!1)})}g(K),g(q),g(a),g(D),g(I),W(()=>K.disabled=s(E)),Ce(U,()=>s(u),y=>S(u,y)),w(B,I)};Y(M,B=>{l()&&B($)})}w(c,j),$t()}Ut(["click"]);export{Er as A,Ar as C,Ee as D,Pr as G,Nr as H,jr as I,Cr as L,Ne as M,Lr as S,Ie as a,Mr as b,$r as c,Yt as d,Br as e,Ir as s};
