import"./DsnmJJEf.js";import"./DRxX7t_H.js";import{g as Gt,u as Xt,d as Y,e as G,a as _,p as xt,z as mt,o as S,G as Z,k as yt,f as T,l as b,s as w,v as Bt,w as m,a4 as Vt,j as s,t as q,V as pt,b8 as Yt,n as It}from"./COX-Du3q.js";import{I as Q,s as k}from"./DJJOPez5.js";import{l as tt,s as et,p as z,i as K}from"./-cW7HwuZ.js";import{d as Lt,f as Jt,s as W,j as Ft,o as Kt,e as Et,r as Qt}from"./B1e8pvGG.js";import{s as bt,l as kt,a as ht,e as Nt,$ as te,i as ee,j as Dt,r as re}from"./CEeMCE7T.js";import{M as ne,P as ae,X as Zt,T as oe}from"./jwKhP9Ft.js";import{h as ut,k as ie,l as se,b as le}from"./BqTPuKKD.js";import{s as de,a as jt}from"./-uljABfF.js";import{b as St}from"./FIbzlXHG.js";import{C as ce}from"./yCfd3Xoi.js";function ue(c,o,d){Gt(()=>{var l=Xt(()=>o(c,d?.())||{});if(l?.destroy)return()=>l.destroy()})}function nr(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z"}],["circle",{cx:"12",cy:"13",r:"3"}]];Q(c,et({name:"camera"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=Y(),v=G(u);k(v,o,"default",{}),_(h,u)},$$slots:{default:!0}}))}function ar(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"m15 18-6-6 6-6"}]];Q(c,et({name:"chevron-left"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=Y(),v=G(u);k(v,o,"default",{}),_(h,u)},$$slots:{default:!0}}))}function or(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M12 6v6l4 2"}],["circle",{cx:"12",cy:"12",r:"10"}]];Q(c,et({name:"clock"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=Y(),v=G(u);k(v,o,"default",{}),_(h,u)},$$slots:{default:!0}}))}function he(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6"}],["path",{d:"M6 18h.01"}],["path",{d:"M10 14h.01"}],["path",{d:"M15 6h.01"}],["path",{d:"M18 9h.01"}]];Q(c,et({name:"dices"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=Y(),v=G(u);k(v,o,"default",{}),_(h,u)},$$slots:{default:!0}}))}function ir(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M9 10h.01"}],["path",{d:"M15 10h.01"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"}]];Q(c,et({name:"ghost"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=Y(),v=G(u);k(v,o,"default",{}),_(h,u)},$$slots:{default:!0}}))}function fe(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M12 7v5l4 2"}]];Q(c,et({name:"history"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=Y(),v=G(u);k(v,o,"default",{}),_(h,u)},$$slots:{default:!0}}))}function sr(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"}]];Q(c,et({name:"layout-dashboard"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=Y(),v=G(u);k(v,o,"default",{}),_(h,u)},$$slots:{default:!0}}))}function ve(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M5 12h14"}]];Q(c,et({name:"minus"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=Y(),v=G(u);k(v,o,"default",{}),_(h,u)},$$slots:{default:!0}}))}function lr(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"m11 19-6-6"}],["path",{d:"m5 21-2-2"}],["path",{d:"m8 16-4 4"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5"}]];Q(c,et({name:"sword"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=Y(),v=G(u);k(v,o,"default",{}),_(h,u)},$$slots:{default:!0}}))}function ge(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];Q(c,et({name:"zoom-in"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=Y(),v=G(u);k(v,o,"default",{}),_(h,u)},$$slots:{default:!0}}))}var pe=T('<div class="space-y-6"><div class="bg-slate-900/50 p-6 rounded-2xl border border-white/5 text-center shadow-inner relative overflow-hidden group"><div class="absolute inset-0 bg-indigo-500/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"></div> <div class="flex justify-center items-center gap-8 mb-4 relative z-10"><button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-red-500/20 text-slate-300 hover:text-red-400 border border-slate-700 hover:border-red-500/30 flex items-center justify-center transition-all active:scale-90 shadow-lg" aria-label="Diminuir"><!></button> <div class="flex flex-col items-center min-w-[100px]"><span> </span></div> <button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-green-500/20 text-slate-300 hover:text-green-400 border border-slate-700 hover:border-green-500/30 flex items-center justify-center transition-all active:scale-90 shadow-lg" aria-label="Aumentar"><!></button></div> <div class="text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] relative z-10"> </div></div> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-4 rounded-xl flex items-center justify-center gap-3 shadow-lg shadow-indigo-600/20 transition-all active:scale-[0.98] uppercase tracking-widest text-sm"><!> </button></div>');function dr(c,o){xt(o,!0);let d=z(o,"initialModifier",3,0),l=z(o,"label",3,"Boons / Banes"),h=z(o,"rollLabel",3,"ROLAR"),g=Z(0);mt(()=>{o.isOpen&&S(g,d())});var u=Y(),v=G(u);{var I=U=>{ne(U,{get isOpen(){return o.isOpen},get onClose(){return o.onClose},get title(){return o.title},children:(D,M)=>{var A=pe(),C=b(A),P=w(b(C),2),E=b(P);E.__click=()=>Bt(g,-1);var p=b(E);ve(p,{size:24}),m(E);var i=w(E,2),a=b(i),e=b(a);m(a),m(i);var t=w(i,2);t.__click=()=>Bt(g);var n=b(t);ae(n,{size:24}),m(t),m(P);var r=w(P,2),$=b(r,!0);m(r),m(C);var N=w(C,2);Jt(N,()=>o.children??Vt);var y=w(N,2);y.__click=()=>o.onRoll(s(g));var x=b(y);he(x,{size:18});var R=w(x);m(y),m(A),q(()=>{bt(a,1,`text-5xl font-black ${s(g)>0?"text-green-400":s(g)<0?"text-red-400":"text-slate-500"} tabular-nums drop-shadow-sm transition-colors duration-300`),W(e,`${s(g)>0?"+":""}${s(g)??""}`),W($,l()),W(R,` ${h()??""}`)}),_(D,A)},$$slots:{default:!0}})};K(v,U=>{o.isOpen&&U(I)})}_(c,u),yt()}Lt(["click"]);var Pt={exports:{}},zt;function me(){return zt||(zt=1,(function(c,o){(function(d){c.exports=d()})(function(d){var l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function h(i,a){var e=i[0],t=i[1],n=i[2],r=i[3];e+=(t&n|~t&r)+a[0]-680876936|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+a[1]-389564586|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+a[2]+606105819|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+a[3]-1044525330|0,t=(t<<22|t>>>10)+n|0,e+=(t&n|~t&r)+a[4]-176418897|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+a[5]+1200080426|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+a[6]-1473231341|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+a[7]-45705983|0,t=(t<<22|t>>>10)+n|0,e+=(t&n|~t&r)+a[8]+1770035416|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+a[9]-1958414417|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+a[10]-42063|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+a[11]-1990404162|0,t=(t<<22|t>>>10)+n|0,e+=(t&n|~t&r)+a[12]+1804603682|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+a[13]-40341101|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+a[14]-1502002290|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+a[15]+1236535329|0,t=(t<<22|t>>>10)+n|0,e+=(t&r|n&~r)+a[1]-165796510|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+a[6]-1069501632|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+a[11]+643717713|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+a[0]-373897302|0,t=(t<<20|t>>>12)+n|0,e+=(t&r|n&~r)+a[5]-701558691|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+a[10]+38016083|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+a[15]-660478335|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+a[4]-405537848|0,t=(t<<20|t>>>12)+n|0,e+=(t&r|n&~r)+a[9]+568446438|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+a[14]-1019803690|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+a[3]-187363961|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+a[8]+1163531501|0,t=(t<<20|t>>>12)+n|0,e+=(t&r|n&~r)+a[13]-1444681467|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+a[2]-51403784|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+a[7]+1735328473|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+a[12]-1926607734|0,t=(t<<20|t>>>12)+n|0,e+=(t^n^r)+a[5]-378558|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+a[8]-2022574463|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+a[11]+1839030562|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+a[14]-35309556|0,t=(t<<23|t>>>9)+n|0,e+=(t^n^r)+a[1]-1530992060|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+a[4]+1272893353|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+a[7]-155497632|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+a[10]-1094730640|0,t=(t<<23|t>>>9)+n|0,e+=(t^n^r)+a[13]+681279174|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+a[0]-358537222|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+a[3]-722521979|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+a[6]+76029189|0,t=(t<<23|t>>>9)+n|0,e+=(t^n^r)+a[9]-640364487|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+a[12]-421815835|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+a[15]+530742520|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+a[2]-995338651|0,t=(t<<23|t>>>9)+n|0,e+=(n^(t|~r))+a[0]-198630844|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+a[7]+1126891415|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+a[14]-1416354905|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+a[5]-57434055|0,t=(t<<21|t>>>11)+n|0,e+=(n^(t|~r))+a[12]+1700485571|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+a[3]-1894986606|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+a[10]-1051523|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+a[1]-2054922799|0,t=(t<<21|t>>>11)+n|0,e+=(n^(t|~r))+a[8]+1873313359|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+a[15]-30611744|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+a[6]-1560198380|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+a[13]+1309151649|0,t=(t<<21|t>>>11)+n|0,e+=(n^(t|~r))+a[4]-145523070|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+a[11]-1120210379|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+a[2]+718787259|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+a[9]-343485551|0,t=(t<<21|t>>>11)+n|0,i[0]=e+i[0]|0,i[1]=t+i[1]|0,i[2]=n+i[2]|0,i[3]=r+i[3]|0}function g(i){var a=[],e;for(e=0;e<64;e+=4)a[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return a}function u(i){var a=[],e;for(e=0;e<64;e+=4)a[e>>2]=i[e]+(i[e+1]<<8)+(i[e+2]<<16)+(i[e+3]<<24);return a}function v(i){var a=i.length,e=[1732584193,-271733879,-1732584194,271733878],t,n,r,$,N,y;for(t=64;t<=a;t+=64)h(e,g(i.substring(t-64,t)));for(i=i.substring(t-64),n=i.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=i.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(h(e,r),t=0;t<16;t+=1)r[t]=0;return $=a*8,$=$.toString(16).match(/(.*?)(.{0,8})$/),N=parseInt($[2],16),y=parseInt($[1],16)||0,r[14]=N,r[15]=y,h(e,r),e}function I(i){var a=i.length,e=[1732584193,-271733879,-1732584194,271733878],t,n,r,$,N,y;for(t=64;t<=a;t+=64)h(e,u(i.subarray(t-64,t)));for(i=t-64<a?i.subarray(t-64):new Uint8Array(0),n=i.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=i[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(h(e,r),t=0;t<16;t+=1)r[t]=0;return $=a*8,$=$.toString(16).match(/(.*?)(.{0,8})$/),N=parseInt($[2],16),y=parseInt($[1],16)||0,r[14]=N,r[15]=y,h(e,r),e}function U(i){var a="",e;for(e=0;e<4;e+=1)a+=l[i>>e*8+4&15]+l[i>>e*8&15];return a}function D(i){var a;for(a=0;a<i.length;a+=1)i[a]=U(i[a]);return i.join("")}D(v("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function i(a,e){return a=a|0||0,a<0?Math.max(a+e,0):Math.min(a,e)}ArrayBuffer.prototype.slice=function(a,e){var t=this.byteLength,n=i(a,t),r=t,$,N,y,x;return e!==d&&(r=i(e,t)),n>r?new ArrayBuffer(0):($=r-n,N=new ArrayBuffer($),y=new Uint8Array(N),x=new Uint8Array(this,n,$),y.set(x),N)}})();function M(i){return/[\u0080-\uFFFF]/.test(i)&&(i=unescape(encodeURIComponent(i))),i}function A(i,a){var e=i.length,t=new ArrayBuffer(e),n=new Uint8Array(t),r;for(r=0;r<e;r+=1)n[r]=i.charCodeAt(r);return a?n:t}function C(i){return String.fromCharCode.apply(null,new Uint8Array(i))}function P(i,a,e){var t=new Uint8Array(i.byteLength+a.byteLength);return t.set(new Uint8Array(i)),t.set(new Uint8Array(a),i.byteLength),t}function E(i){var a=[],e=i.length,t;for(t=0;t<e-1;t+=2)a.push(parseInt(i.substr(t,2),16));return String.fromCharCode.apply(String,a)}function p(){this.reset()}return p.prototype.append=function(i){return this.appendBinary(M(i)),this},p.prototype.appendBinary=function(i){this._buff+=i,this._length+=i.length;var a=this._buff.length,e;for(e=64;e<=a;e+=64)h(this._hash,g(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},p.prototype.end=function(i){var a=this._buff,e=a.length,t,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r;for(t=0;t<e;t+=1)n[t>>2]|=a.charCodeAt(t)<<(t%4<<3);return this._finish(n,e),r=D(this._hash),i&&(r=E(r)),this.reset(),r},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},p.prototype.setState=function(i){return this._buff=i.buff,this._length=i.length,this._hash=i.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(i,a){var e=a,t,n,r;if(i[e>>2]|=128<<(e%4<<3),e>55)for(h(this._hash,i),e=0;e<16;e+=1)i[e]=0;t=this._length*8,t=t.toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(t[2],16),r=parseInt(t[1],16)||0,i[14]=n,i[15]=r,h(this._hash,i)},p.hash=function(i,a){return p.hashBinary(M(i),a)},p.hashBinary=function(i,a){var e=v(i),t=D(e);return a?E(t):t},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(i){var a=P(this._buff.buffer,i),e=a.length,t;for(this._length+=i.byteLength,t=64;t<=e;t+=64)h(this._hash,u(a.subarray(t-64,t)));return this._buff=t-64<e?new Uint8Array(a.buffer.slice(t-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(i){var a=this._buff,e=a.length,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n,r;for(n=0;n<e;n+=1)t[n>>2]|=a[n]<<(n%4<<3);return this._finish(t,e),r=D(this._hash),i&&(r=E(r)),this.reset(),r},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var i=p.prototype.getState.call(this);return i.buff=C(i.buff),i},p.ArrayBuffer.prototype.setState=function(i){return i.buff=A(i.buff,!0),p.prototype.setState.call(this,i)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(i,a){var e=I(new Uint8Array(i)),t=D(e);return a?E(t):t},p})})(Pt)),Pt.exports}var be=me();const xe=kt(be),Ut=5;async function cr(c){if(c.size>Ut*1024*1024)throw new Error(`Imagem muito grande. MÃ¡ximo de ${Ut}MB.`);const o=await c.arrayBuffer(),d=xe.ArrayBuffer.hash(o);if(ut.has(d))return d;const l=new FileReader,g=await new Promise((u,v)=>{l.onload=()=>u(l.result),l.onerror=v,l.readAsDataURL(c)});return ut.set(d,g),d}function ye(c,o){if(!c)return o(void 0),()=>{};o(ut.get(c));const d=l=>{const h=ut.get(c);o(h)};return ut.observe(d),()=>{ut.unobserve(d)}}var _e=T('<img class="w-full h-full object-cover rounded-full border border-white/10 shadow-sm"/>'),we=T('<div class="w-full h-full bg-slate-800 rounded-full border border-white/10 flex items-center justify-center font-black text-slate-500 shadow-sm"> </div>'),Ae=T("<div><!></div>");function ur(c,o){xt(o,!0);let d=z(o,"size",3,"md"),l=z(o,"fallbackText",3,"?"),h=Z(void 0),g;mt(()=>{g&&g(),o.hash?g=ye(o.hash,M=>{S(h,M,!0)}):S(h,void 0)}),Ft(()=>{g&&g()});const u={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-16 h-16 text-lg",xl:"w-20 h-20 text-xl",custom:"w-full h-full"};var v=Ae(),I=b(v);{var U=M=>{var A=_e();q(()=>{ht(A,"src",s(h)),ht(A,"alt",o.alt)}),_(M,A)},D=M=>{var A=we(),C=b(A,!0);m(A),q(()=>W(C,l())),_(M,A)};K(I,M=>{s(h)?M(U):M(D,!1)})}m(v),q(()=>bt(v,1,`${u[d()]??""} relative flex-shrink-0`)),_(c,v),yt()}var $e=T('<div class="fixed inset-0 bg-black/50 z-[90] lg:hidden backdrop-blur-sm" role="button" tabindex="-1"></div>'),Me=T('<div class="text-center text-slate-500 text-sm mt-10 italic"> </div>'),Pe=T('<span class="text-[10px] text-indigo-400 font-bold -mt-0.5"> </span>'),Ce=T('<div class="text-xs text-slate-400 italic mb-2 whitespace-pre-wrap"> </div>'),Le=T('<span class="text-[9px] bg-indigo-900/50 text-indigo-200 px-1.5 py-0.5 rounded border border-indigo-800/50"> </span>'),Be=T('<div class="flex flex-wrap gap-1 mb-2"></div>'),Ie=T('<div class="bg-slate-900 rounded p-2 flex justify-between items-center"><div class="text-xs font-mono text-slate-400"> </div> <div> </div></div>'),Ee=T('<div class="bg-slate-800 rounded-lg border border-slate-700 p-3 shadow-sm animate-in slide-in-from-right-4"><div class="flex justify-between items-start mb-1"><div class="flex flex-col"><span class="text-[10px] text-slate-400 uppercase font-black tracking-tight"> </span> <!></div> <span class="text-[10px] text-slate-500 font-mono"> </span></div> <div class="font-bold text-white mb-1"> </div> <!> <!> <!></div>'),Ne=T('<!> <aside><div class="p-4 border-b border-slate-700 flex justify-between items-center bg-slate-950"><h3 class="font-bold text-white flex items-center gap-2"><!> </h3> <button class="text-slate-400 hover:text-white"><!></button></div> <div class="flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar"><!> <!></div> <div class="p-4 border-t border-slate-700 bg-slate-950"><button class="w-full py-2 text-xs font-bold text-red-400 hover:text-red-300 border border-red-900/50 rounded hover:bg-red-900/20 flex items-center justify-center gap-2"><!> </button></div></aside>',1);function hr(c,o){xt(o,!0);const d=()=>jt(te,"$t",h),l=()=>jt(se,"$rollHistory",h),[h,g]=de();let u=z(o,"isOpen",3,!1);var v=Ne(),I=G(v);{var U=y=>{var x=$e();x.__click=function(...R){o.onClose?.apply(this,R)},q(R=>ht(x,"aria-label",R),[()=>d()("character.history.close")]),_(y,x)};K(I,y=>{u()&&y(U)})}var D=w(I,2),M=b(D),A=b(M),C=b(A);fe(C,{size:18});var P=w(C);m(A);var E=w(A,2);E.__click=function(...y){o.onClose?.apply(this,y)};var p=b(E);Zt(p,{size:20}),m(E),m(M);var i=w(M,2),a=b(i);{var e=y=>{var x=Me(),R=b(x,!0);m(x),q(X=>W(R,X),[()=>d()("character.history.none")]),_(y,x)};K(a,y=>{l().length===0&&y(e)})}var t=w(a,2);Nt(t,1,l,y=>y.id,(y,x)=>{var R=Ee(),X=b(R),rt=b(X),V=b(rt),dt=b(V,!0);m(V);var L=w(V,2);{var nt=j=>{var O=Pe(),F=b(O,!0);m(O),q(()=>W(F,s(x).charName)),_(j,O)};K(L,j=>{s(x).charName&&s(x).charName!==s(x).source&&j(nt)})}m(rt);var it=w(rt,2),ft=b(it,!0);m(it),m(X);var st=w(X,2),ct=b(st,!0);m(st);var _t=w(st,2);{var At=j=>{var O=Ce(),F=b(O,!0);m(O),q(()=>W(F,s(x).description)),_(j,O)};K(_t,j=>{s(x).description&&j(At)})}var vt=w(_t,2);{var $t=j=>{var O=Be();Nt(O,21,()=>s(x).effectsApplied,ee,(F,J)=>{var at=Le(),gt=b(at,!0);m(at),q(()=>W(gt,s(J))),_(F,at)}),m(O),_(j,O)};K(vt,j=>{s(x).effectsApplied?.length>0&&j($t)})}var Mt=w(vt,2);{var wt=j=>{var O=Ie(),F=b(O),J=b(F,!0);m(F);var at=w(F,2),gt=b(at,!0);m(at),m(O),q(()=>{W(J,s(x).formula),bt(at,1,`text-xl font-bold font-mono ${s(x).crit?"text-yellow-400":"text-white"}`),W(gt,s(x).total)}),_(j,O)};K(Mt,j=>{(s(x).formula||s(x).total!==void 0)&&j(wt)})}m(R),q(j=>{W(dt,s(x).source),W(ft,j),W(ct,s(x).name)},[()=>new Date(s(x).timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})]),_(y,R)}),m(i);var n=w(i,2),r=b(n);r.__click=function(...y){ie.clearHistory?.apply(this,y)};var $=b(r);oe($,{size:14});var N=w($);m(r),m(n),m(D),q((y,x)=>{bt(D,1,`fixed top-0 right-0 h-full w-80 bg-slate-900 border-l border-slate-700 z-[100] transition-transform duration-300 shadow-2xl flex flex-col ${u()?"translate-x-0":"translate-x-full"}`),W(P,` ${y??""}`),W(N,` ${x??""}`)},[()=>d()("character.history.title"),()=>d()("character.history.clear")]),_(c,v),yt(),g()}Lt(["click"]);function Ht(c,o,d){return c>=o*d?{width:o*d,height:o}:{width:c,height:c/d}}function Ct(c,o,d,l){return{x:Tt(c.x,o.width,d.width,l),y:Tt(c.y,o.height,d.height,l)}}function Tt(c,o,d,l){let h=o*l/2-d/2;return l<1&&(h=d/2-o*l/2),Math.min(h,Math.max(c,-h))}function Ot(c,o){return Math.sqrt(Math.pow(c.y-o.y,2)+Math.pow(c.x-o.x,2))}function De(c,o,d,l,h,g=!0){const u=g?je:Se,v={x:u(100,((o.width-d.width/h)/2-c.x/h)/o.width*100),y:u(100,((o.height-d.height/h)/2-c.y/h)/o.height*100),width:u(100,d.width/o.width*100/h),height:u(100,d.height/o.height*100/h)},I=u(o.naturalWidth,v.width*o.naturalWidth/100,!0),U=u(o.naturalHeight,v.height*o.naturalHeight/100,!0),M=o.naturalWidth>=o.naturalHeight*l?{width:Math.round(U*l),height:U}:{width:I,height:Math.round(I/l)},A={...M,x:u(o.naturalWidth-M.width,v.x*o.naturalWidth/100,!0),y:u(o.naturalHeight-M.height,v.y*o.naturalHeight/100,!0)};return{croppedAreaPercentages:v,croppedAreaPixels:A}}function je(c,o,d=!1){const l=d?Math.round(o):o;return Math.min(c,Math.max(0,l))}function Se(c,o){return o}function Rt(c,o){return{x:(o.x+c.x)/2,y:(o.y+c.y)/2}}var ze=T('<div data-testid="cropper"></div>'),Ue=T('<div class="svelte-easy-crop-container svelte-1yetlj5" role="button" data-testid="container"><img class="svelte-easy-crop-image svelte-1yetlj5" alt=""/> <!></div>');function He(c,o){xt(o,!0);let d=z(o,"crop",31,()=>pt({x:0,y:0})),l=z(o,"zoom",15,1),h=z(o,"minZoom",11,1),g=z(o,"maxZoom",11,3),u=z(o,"aspect",3,4/3),v=z(o,"cropSize",3,null),I=z(o,"cropShape",3,"rect"),U=z(o,"showGrid",3,!0),D=z(o,"zoomSpeed",3,1),M=z(o,"crossOrigin",3,null),A=z(o,"restrictPosition",3,!0),C=z(o,"tabindex",3,void 0),P=Z(null),E=Z(pt({width:0,height:0,naturalWidth:0,naturalHeight:0})),p=Z(null),i=Z(null),a=Z(null),e=Z(pt({x:0,y:0})),t=Z(pt({x:0,y:0})),n=Z(0),r=Z(null),$=Z(null);Kt(()=>{s(a)&&s(a).complete&&x(),s(p)&&(s(p).addEventListener("gesturestart",N),s(p).addEventListener("gesturechange",N))}),Ft(()=>{s(p)&&(s(p).removeEventListener("gesturestart",N),s(p).removeEventListener("gesturechange",N)),y()});const N=f=>f.preventDefault(),y=()=>{typeof document<"u"&&(document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",ct),document.removeEventListener("touchmove",it),document.removeEventListener("touchend",ct))},x=()=>{X(),j()},R=()=>v()?v().width/v().height:u(),X=()=>{s(a)&&(S(E,{width:s(a).width,height:s(a).height,naturalWidth:s(a).naturalWidth,naturalHeight:s(a).naturalHeight},!0),S(P,v()?v():Ht(s(a).width,s(a).height,u()),!0)),s(p)&&S(i,s(p).getBoundingClientRect(),!0)},rt=f=>({x:Number(f.clientX),y:Number(f.clientY)}),V=f=>({x:Number(f.clientX),y:Number(f.clientY)}),dt=f=>{f.preventDefault(),document.addEventListener("mousemove",L),document.addEventListener("mouseup",ct),ft(rt(f))},L=f=>st(rt(f)),nt=f=>{f.preventDefault(),document.addEventListener("touchmove",it,{passive:!1}),document.addEventListener("touchend",ct),f.touches.length===2?_t(f):f.touches.length===1&&ft(V(f.touches[0]))},it=f=>{f.preventDefault(),f.touches.length===2?At(f):f.touches.length===1&&st(V(f.touches[0]))},ft=({x:f,y:B})=>{S(e,{x:f,y:B},!0),S(t,{x:d().x,y:d().y},!0)},st=({x:f,y:B})=>{s(r)&&window.cancelAnimationFrame(s(r)),S(r,window.requestAnimationFrame(()=>{if(f===void 0||B===void 0||!s(P))return;const H=f-s(e).x,lt=B-s(e).y,ot={x:s(t).x+H,y:s(t).y+lt};d(A()?Ct(ot,s(E),s(P),l()):ot)}),!0)},ct=()=>{y(),j()},_t=f=>{const B=V(f.touches[0]),H=V(f.touches[1]);S(n,Ot(B,H),!0),ft(Rt(B,H))},At=f=>{const B=V(f.touches[0]),H=V(f.touches[1]),lt=Rt(B,H);st(lt),s($)&&window.cancelAnimationFrame(s($)),S($,window.requestAnimationFrame(()=>{const ot=Ot(B,H),qt=l()*(ot/s(n));wt(qt,lt),S(n,ot,!0)}),!0)},vt=f=>{f.preventDefault();const B=rt(f),H=l()-f.deltaY*D()/200;wt(H,B)},$t=({x:f,y:B})=>{if(!s(i))throw new Error("The Cropper is not mounted");return{x:s(i).width/2-(f-s(i).left),y:s(i).height/2-(B-s(i).top)}},Mt=({x:f,y:B})=>({x:(f+d().x)/l(),y:(B+d().y)/l()}),wt=(f,B)=>{if(!s(P))return;const H=$t(B),lt=Mt(H);l(Math.min(g(),Math.max(f,h())));const ot={x:lt.x*l()-H.x,y:lt.y*l()-H.y};d(A()?Ct(ot,s(E),s(P),l()):ot)},j=()=>{if(!s(P)||s(P).width===0)return;const f=A()?Ct(d(),s(E),s(P),l()):d(),{croppedAreaPercentages:B,croppedAreaPixels:H}=De(f,s(E),s(P),R(),l(),A());o.oncropcomplete?.({percent:B,pixels:H})};mt(()=>{s(a)&&S(P,v()?v():Ht(s(a).width,s(a).height,u()),!0)}),mt(()=>{l()&&j()});const O=f=>{mt(()=>(f.addEventListener("touchstart",nt),f.addEventListener("mousedown",dt),f.addEventListener("wheel",vt,{passive:!1}),()=>{f.removeEventListener("touchstart",nt),f.removeEventListener("mousedown",dt),f.removeEventListener("wheel",vt)}))};var F=Ue();Et("resize",Yt,X);var J=b(F);St(J,f=>S(a,f),()=>s(a));var at=w(J,2);{var gt=f=>{var B=ze();let H;q(()=>{H=bt(B,1,"svelte-easy-crop-area svelte-1yetlj5",null,H,{"svelte-easy-crop-round":I()==="round","svelte-easy-crop-grid":U()}),Dt(B,`width: ${s(P).width??""}px; height: ${s(P).height??""}px;`)}),_(f,B)};K(at,f=>{s(P)&&f(gt)})}m(F),St(F,f=>S(p,f),()=>s(p)),ue(F,f=>O?.(f)),q(()=>{ht(F,"tabindex",C()),ht(J,"src",o.image),Dt(J,`transform: translate(${d().x??""}px, ${d().y??""}px) scale(${l()??""});`),ht(J,"crossorigin",M())}),Et("load",J,x),Qt(J),_(c,F),yt()}const Te=c=>new Promise((o,d)=>{const l=new Image;l.addEventListener("load",()=>o(l)),l.addEventListener("error",h=>d(h)),l.setAttribute("crossOrigin","anonymous"),l.src=c});function Wt(c){return c*Math.PI/180}function Oe(c,o,d){const l=Wt(d);return{width:Math.abs(Math.cos(l)*c)+Math.abs(Math.sin(l)*o),height:Math.abs(Math.sin(l)*c)+Math.abs(Math.cos(l)*o)}}async function Re(c,o,d=0,l={horizontal:!1,vertical:!1}){const h=await Te(c),g=document.createElement("canvas"),u=g.getContext("2d");if(!u)return null;const v=Wt(d),{width:I,height:U}=Oe(h.width,h.height,d);g.width=I,g.height=U,u.translate(I/2,U/2),u.rotate(v),u.scale(l.horizontal?-1:1,l.vertical?-1:1),u.translate(-h.width/2,-h.height/2),u.drawImage(h,0,0);const D=u.getImageData(o.x,o.y,o.width,o.height);return g.width=o.width,g.height=o.height,u.putImageData(D,0,0),new Promise((M,A)=>{g.toBlob(C=>{M(C)},"image/jpeg",.8)})}var Fe=T('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> Processando...',1),Ze=T("<!> Salvar Foto",1),We=T('<div class="fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4 animate-in fade-in duration-200" role="dialog" aria-modal="true"><div class="bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-2xl flex flex-col shadow-2xl overflow-hidden max-h-[90vh]"><div class="p-4 border-b border-slate-800 flex justify-between items-center bg-slate-950"><h3 class="font-bold text-white flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-indigo-500"></div> Editar Imagem</h3> <button class="text-slate-400 hover:text-white p-2 rounded-lg hover:bg-slate-800 transition-colors"><!></button></div> <div class="relative flex-1 bg-black min-h-[400px]"><!></div> <div class="p-4 bg-slate-950 border-t border-slate-800 space-y-4"><div class="flex items-center gap-4"><div class="flex items-center gap-2 text-slate-400 w-full px-4"><!> <input type="range" min="1" max="3" step="0.1" class="w-full accent-indigo-500 h-1 bg-slate-800 rounded-lg appearance-none cursor-pointer"/></div></div> <div class="flex justify-end gap-3 pt-2"><button class="px-6 py-2.5 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-bold transition-all text-sm border border-slate-700">Cancelar</button> <button class="px-8 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold transition-all text-sm shadow-lg shadow-indigo-900/20 flex items-center gap-2"><!></button></div></div></div></div>');function fr(c,o){xt(o,!0);let d=z(o,"isOpen",3,!1),l=z(o,"imageUrl",3,""),h=z(o,"aspectRatio",3,1),g=Z(pt({x:0,y:0})),u=Z(1),v=Z(null),I=Z(!1);async function U(){if(console.log("handleSave called",{isProcessing:s(I),pixelCrop:s(v)}),!(s(I)||!s(v))){S(I,!0);try{console.log("Calling getCroppedImg with",{imageUrl:l().substring(0,50)+"...",pixelCrop:s(v)});const C=await Re(l(),s(v),0);console.log("getCroppedImg result:",C),C&&o.onCrop(C)}catch(C){console.error("Error in handleSave:",C)}finally{S(I,!1)}}}var D=Y(),M=G(D);{var A=C=>{var P=We(),E=b(P),p=b(E),i=w(b(p),2);i.__click=function(...L){o.onClose?.apply(this,L)};var a=b(i);Zt(a,{size:20}),m(i),m(p);var e=w(p,2),t=b(e);He(t,{get image(){return l()},get aspect(){return h()},oncropcomplete:L=>{console.log("oncropcomplete prop data:",L),S(v,L.pixels,!0)},showGrid:!0,get crop(){return s(g)},set crop(L){S(g,L,!0)},get zoom(){return s(u)},set zoom(L){S(u,L,!0)}}),m(e);var n=w(e,2),r=b(n),$=b(r),N=b($);ge(N,{size:16});var y=w(N,2);re(y),m($),m(r);var x=w(r,2),R=b(x);R.__click=function(...L){o.onClose?.apply(this,L)};var X=w(R,2);X.__click=U;var rt=b(X);{var V=L=>{var nt=Fe();It(),_(L,nt)},dt=L=>{var nt=Ze(),it=G(nt);ce(it,{size:18}),It(),_(L,nt)};K(rt,L=>{s(I)?L(V):L(dt,!1)})}m(X),m(x),m(n),m(E),m(P),q(()=>X.disabled=s(I)),le(y,()=>s(u),L=>S(u,L)),_(C,P)};K(M,C=>{d()&&C(A)})}_(c,D),yt()}Lt(["click"]);export{ur as A,ar as C,he as D,ir as G,hr as H,fr as I,sr as L,ve as M,lr as S,ue as a,dr as b,or as c,nr as d,fe as e,cr as s};
